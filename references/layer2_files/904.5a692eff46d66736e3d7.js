"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[904],{86183:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(33033),s=n(92739),r=n(52689),o=n(55480),l=n(24246);const a=({links:e,sx:t})=>(0,l.jsx)(o.xu,{sx:{display:"flex",alignItems:"center",...t},children:e.map(((e,t)=>0===t?(0,l.jsx)(r.rU,{to:e.path,children:(0,l.jsxs)(o.xu,{sx:{display:"flex",alignItems:"center",borderRadius:"4px",bg:"rgba(0,0,0,0.3)",color:"white",py:1,px:2,transition:"background 0.2s ease-in",":hover":{bg:"rgba(0,0,0,0.5)",cursor:"pointer"}},children:[(0,l.jsx)(s.G,{icon:i.A3}),(0,l.jsx)(o.xv,{variant:"heading4",color:"white",sx:{ml:2},children:e.title})]})},t):(0,l.jsx)(o.X6,{as:"h1",variant:"heading4",sx:{ml:3},children:e.title},t)))});a.defaultProps={sx:{}};const c=a},35242:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(28055),s=n(27378),r=n(55480),o=n(21020),l=n(19273),a=n(40957),c=n(28206),d=n(31646),u=n(62625),x=n(51493),h=n(24246);const p={borderColor:"error","&:hover, &:active, &:focus":{borderColor:"error"}},m=({setOpen:e})=>{const t=(0,c.T)(),[n,m]=(0,s.useState)(),[g,f]=(0,s.useState)(""),{track:b}=(0,d.Z)(),j=(0,s.useCallback)(((e,n)=>{t((0,u.kP)(e,n,!0)).then((()=>{b("Created new list",{name:e.name})}))}),[t,b]),v=(0,c.C)(u.Pb),C=(0,s.useCallback)((()=>t(u.tt.reset())),[t]),y=(0,s.useMemo)((()=>(0,x.BE)(v)),[v]),k=(0,s.useCallback)((e=>{f(e.target.value),y&&C()}),[C,y]),E=(0,s.useCallback)((()=>{e(!1),f(""),C()}),[e,C]),w=(0,s.useCallback)((()=>{j({name:g,organization:n},E)}),[j,g,E,n]),S=(0,s.useMemo)((()=>y?(0,x.lT)(v,"name").map((e=>(0,h.jsx)(r.xv,{variant:"body2",color:"error",children:e},e))):null),[v,y]);return(0,h.jsx)(l.Z,{open:!0,onClose:E,header:(0,h.jsx)(r.kC,{py:"18px",px:4,alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"border1"},children:(0,h.jsx)(r.xv,{variant:"modalHeader",children:"Create a new list"})}),footer:(0,h.jsxs)(r.kC,{px:4,py:22,alignItems:"center",justifyContent:"space-between",sx:{borderBottomLeftRadius:"sm",borderBottomRightRadius:"sm",backgroundColor:"bg2"},children:[(0,h.jsx)(o.ZP,{intent:"neutral",minWidth:!0,onClick:E,children:"Cancel"}),(0,h.jsx)(o.ZP,{intent:"submit",minWidth:!0,onClick:w,children:"Create list"})]}),children:(0,h.jsxs)(r.kC,{flexDirection:"column",children:[(0,h.jsx)(a.Z,{value:n,onChange:e=>m(e.value),setDefaultOrg:!0}),(0,h.jsxs)(r.xu,{p:4,children:[(0,h.jsx)(i.__,{htmlFor:"entitylist_name",mb:2,children:"Name your new list"}),(0,h.jsx)(i.II,{id:"entitylist_name",name:"name",placeholder:"Enter name...",value:g,onChange:k,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w())},autoFocus:!0,sx:y?p:{}}),S]})]})})}},7779:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(55480),s=n(86183),r=n(24246);const o=({color:e,link:t,children:n})=>(0,r.jsx)(i.xu,{sx:{bg:e},children:(0,r.jsx)(i.xu,{sx:{minHeight:100,display:"flex",alignItems:"center",px:3},children:(0,r.jsxs)(i.kC,{flex:1,flexDirection:"column",alignItems:["flex-start","center"],justifyContent:"center",sx:{my:2,mt:[3,3,2],pt:["44px","44px",0],pb:[2,2,0],position:"relative"},children:[(0,r.jsx)(i.xu,{sx:{position:"absolute",top:0,left:0,display:"flex",alignItems:"center"},children:t?(0,r.jsx)(s.Z,{links:[{title:t.title,path:t.path}]}):null}),n]})})})},99895:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(52689),s=n(55480),r=n(24246);const o=({creator:e})=>(0,r.jsxs)(s.xu,{as:i.rU,to:`/profile/${e.username}`,sx:{display:"flex",alignItems:"center",":hover":{textDecoration:"underline",color:"white"}},children:[(0,r.jsx)(s.Ee,{src:e.avatar.icon_retina,variant:"avatar-md",mr:2,sx:{mr:2,flexShrink:0},alt:`${e.name} profile picture`}),(0,r.jsxs)(s.kC,{sx:{flexWrap:"wrap"},children:[(0,r.jsx)(s.xv,{variant:"body1",color:"white",sx:{display:["none","block"]},children:"Created byÂ "}),(0,r.jsx)(s.xv,{variant:"body1",color:"white",children:e.name})]})]})},36764:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(68670),s=n(92739),r=n(27378),o=n(55480),l=n(99784),a=n(24246);const c=({title:e,children:t,menu:n,onClose:c})=>{const d=!!n,u=(0,r.useMemo)((()=>(0,a.jsxs)(o.kC,{sx:{color:"white",alignItems:"baseline",mb:2,...d?{cursor:"pointer",":hover":{textDecoration:"underline"}}:{}},children:[t,(0,a.jsx)(o.xv,{as:"h1",variant:"heading3",color:"white",sx:{mr:2},children:e}),d?(0,a.jsx)(o.xu,{children:(0,a.jsx)(s.G,{fixedWidth:!0,icon:i.pt,size:"sm"})}):null]})),[e,d,t]);return n?(0,a.jsx)(l.Z,{onClose:c,renderReferenceElement:({ref:e,setOpen:t})=>(0,a.jsx)(o.xu,{ref:e,onClick:()=>t(!0),children:u}),children:n}):u}},90015:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(28055),s=n(93386),r=n(55480),o=n(88954),l=n(24246);const a=e=>{if(!e.name)return{name:"Name is required"}},c=({name:e="",disabled:t=!1,onSubmit:n,errors:c})=>(0,l.jsx)(s.J9,{initialValues:{name:e},validate:a,onSubmit:n,initialTouched:{name:!0},children:({isSubmitting:e})=>(0,l.jsx)(s.l0,{children:(0,l.jsx)(s.gN,{name:"name",children:({field:n,meta:s})=>(0,l.jsxs)(r.xu,{sx:{mx:3},children:[(0,l.jsx)(i.II,{...n,sx:{height:"54px",fontSize:16,fontWeight:500,color:"slate90",textAlign:"center",...(0,o.$)(c&&c.length?{error:!0,touched:!0}:s)},autoFocus:!0,disabled:t,onKeyDown:t=>{"Enter"===t.key&&e&&t.preventDefault()}}),(0,l.jsx)(r.xu,{sx:{height:"28px",pt:1},children:c&&c.length||s.error&&s.touched?(0,l.jsx)(r.xv,{variant:"caption1",color:"error",children:c&&c.length?c.join(", "):s.error}):(0,l.jsx)(r.xv,{variant:"caption1",color:"blue40",children:"Press enter to rename"})})]})})})})},66426:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(0,n(27378).createContext)(void 0)},80645:(e,t,n)=>{n.d(t,{$V:()=>m,OU:()=>f,Ts:()=>y,kL:()=>b,ki:()=>j,nn:()=>C,uh:()=>v}),n(95623);var i=n(27378),s=n(56552),r=n(51705),o=n(28206),l=n(31646),a=n(62625),c=n(9306),d=n(2454),u=n(22478),x=n(47869),h=n(68349),p=n(66426);const m=()=>{const{column:e,index:t}=(0,i.useContext)(p.Z);return(0,i.useMemo)((()=>({column:e,index:t,isPlaceholder:e.id===a.D5||e.id===d.gh,isDescription:"description"===e.field,isSelectField:(0,r.YJ)(e.predicate)})),[e,t])},g=["number","int","float","date","text","entity","location"],f=()=>{const e=(0,o.T)(),{list:t}=(0,h.useEntityListDetail)(),{column:n}=m(),s=(0,i.useCallback)(((i,s)=>{e((0,a.rI)(t.id,{order:{sort:i,column:n.headerLabel,direction:s}}))}),[e,t,n]),r=(0,i.useCallback)(((e,{onClose:t})=>{s(n.id,c.fF.ASC),t()}),[s,n]),l=(0,i.useCallback)(((e,{onClose:t})=>{s(`-${n.id}`,c.fF.DESC),t()}),[s,n]),d=(0,i.useMemo)((()=>n.fieldType&&"description"!==n.fieldType.name&&g.includes(n.fieldType.field_model)),[n]);return(0,i.useMemo)((()=>({hasSorting:d,onToggleSort:s,onSortDescending:l,onSortAscending:r})),[d,s,l,r])},b=()=>{const e=(0,o.T)(),t=(0,o.C)(a.zn),n=(0,x.Z)();return(0,s.useMutation)((e=>n.post(`entitylists/${t.id}/add_column/`,e)),{onSuccess:n=>{e(a.j1.setCustom("data",{...t,columns:n.columns}))},onError:()=>{e((0,u.S1)("Error changing a column","error"))}})},j=(e=null)=>{const t=(0,o.T)(),n=(0,x.Z)(),{track:i}=(0,l.Z)(),{isCreator:r,list:a}=(0,h.useEntityListDetail)(),{mutate:c}=b();return(0,s.useMutation)((e=>n.post(`facts/predicates/?organization_slug=${a.organization}`,e)),{onSuccess:t=>{null!==e&&(i("Add private field to list",{label:e.label,isCreator:r}),c({predicate:t.id,column:e.id}))},onError:e=>{if(t((0,u.S1)("Error creating a private field","error")),e.response&&400===e.response.status)return e.response.json().then((e=>{throw e}))}})},v=(e,t)=>{const n=(0,o.T)(),i=(0,x.Z)(),{list:r}=(0,h.useEntityListDetail)();return(0,s.useMutation)((t=>i.patch(`facts/predicates/${e.predicate.id}/?organization_slug=${r.organization}`,t)),{onSuccess:e=>{n((0,a.bS)(e)),t&&t()},onError:e=>{if(e.response&&400===e.response.status)return e.response.json().then((e=>{throw e}));n((0,u.S1)("Error renaming a private field","error"))}})},C=(e=null)=>{const t=(0,o.T)(),n=(0,x.Z)(),{mutate:i}=b(),{list:r}=(0,h.useEntityListDetail)();return(0,s.useMutation)((e=>n.post(`list_pipeline/?organization_slug=${r.organization}`,e)),{onSuccess:t=>{null!==e&&i({pipeline:t.id,column:e.id})},onError:e=>{if(e.response&&400===e.response.status)return e.response.json().then((e=>{throw e}));t((0,u.S1)("Error creating a private field","error"))}})},y=e=>{(0,i.useEffect)((()=>{var t;null===(t=e.current)||void 0===t||t.focus({preventScroll:!0})}),[])}},85025:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(27378),s=n(55480),r=n(24246);const o=({icon:e,children:t,onClick:n,onClose:o=null,as:l=null,sx:a,iconSx:c})=>{const d=(0,i.useCallback)((e=>{o&&o(),n(e)}),[n,o]);return(0,r.jsxs)(s.xu,{as:l,onClick:d,sx:{cursor:"pointer",display:"flex",alignItems:"center",minHeight:"48px",width:"auto",px:3,py:2,transition:"background-color 0.4s ease-out",":hover":{bg:"gray30"},...a},children:[e&&(0,r.jsx)(s.xu,{sx:{color:"gray60",fontSize:"16px",mr:3,...c},children:e}),"string"==typeof t?(0,r.jsx)(s.xv,{variant:"body1",children:t}):t]})};o.defaultProps={sx:{},iconSx:{}};const l=o},99784:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(0,n(11628).ZP)({resolved:{},chunkName:()=>"PopupMenuModal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e(4463).then(n.bind(n,36962)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve:()=>36962},{ssr:!1})},61739:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(11512),s=n(27378),r=n(52689),o=n(55480),l=n(77959),a=n(86183),c=n(35242),d=n(28206),u=n(77986),x=n(9942),h=n(24246);const p=()=>{const e=(0,d.T)(),[t,n]=(0,s.useState)(!0),p=(0,d.C)((e=>e.user.isAuthenticated));(0,s.useEffect)((()=>{(0,x.J)(t)}),[t]);const m=(0,s.useCallback)((()=>{p?n(!1):e((0,i.VF)({...location,pathname:"/lists"}))}),[p,e]);return(0,h.jsxs)(o.xu,{children:[(0,h.jsx)(o.xu,{sx:{filter:"blur(5px)",m:"-5px"},children:(0,h.jsxs)(o.xu,{sx:{bg:"blue50",textAlign:"center",py:4},children:[(0,h.jsx)(a.Z,{links:[{title:"Lists",path:"/lists"}],sx:{position:"absolute",top:3,left:3}}),(0,h.jsx)(o.xv,{variant:"heading2",sx:{color:"white"},children:"List not found."})]})}),t?(0,h.jsx)(o.xu,{sx:{position:"fixed",top:0,right:0,bottom:0,left:0,display:"flex",flexDirection:"column",overflow:"auto",bg:"rgba(0,0,0,0.3)",alignItems:"center"},children:(0,h.jsxs)(o.xu,{sx:{my:[30,null,80],width:["95%",null,"580px"]},children:[(0,h.jsx)(o.xu,{sx:{bg:"#FEF0F0",p:3,mt:5,color:"red50",borderRadius:"md",mb:4},children:"List not found or you do not have permission to access it."}),(0,h.jsxs)(o.xu,{sx:{bg:"bg1",borderRadius:"md",margin:"auto",overflow:"hidden"},children:[(0,h.jsx)(o.Ee,{sx:{bg:"bg1p",pt:2,height:"auto",objectFit:"cover",objectPosition:"top left",maxHeight:[250,500]},width:"100%",height:376,src:u}),(0,h.jsxs)(o.xu,{sx:{p:[4,"50px"],bg:"white",position:"relative"},children:[(0,h.jsx)(o.xv,{variant:"heading1",sx:{mb:2,fontSize:[22,null,26]},children:"Create your own List"}),(0,h.jsx)(o.xv,{sx:{color:"gray70",mb:"50px",fontSize:[14,null,16]},children:"Lists are knowledge-graph powered tables of entities and topics that auto-update. You can add your own private data to add your own insights."}),(0,h.jsxs)(o.xu,{children:[(0,h.jsx)(l.K,{onClick:m,intent:"submit",children:"Create a List"}),(0,h.jsx)(l.K,{as:r.rU,to:"/product/knowledge-storage",target:"_blank",sx:{ml:3},children:"Learn more"})]})]})]})]})}):(0,h.jsx)(c.Z,{setOpen:e=>n(!e)})]})}},68349:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie,useEntityListDetail:()=>te});var i=n(89723),s=n(92739),r=n(27378),o=n(97015),l=n(52564),a=n(95473),c=n(99197),d=n.n(c),u=n(55480),x=n(88393),h=n(61739),p=n(31154),m=n(8851),g=n(28206),f=n(62625),b=n(9306),j=n(29546),v=n(82730),C=n(71706),y=n(97310),k=n(53065),E=n(64022),w=n(51788),S=n(36045),_=n(11512),Z=n(52689),I=n(7779),L=n(99895),R=n(36764),T=n(90015),A=n(80645),O=n(7988),D=n(85025),$=n(19273),z=n(28961),F=n(39122),M=n(51493),P=n(1422),N=n(49044),W=n(24246);const V=({color:e})=>{const{isOwner:t,isEditor:n}=(0,N.Z)();return t?null:(0,W.jsx)(u.xu,{sx:{bg:e},children:(0,W.jsxs)(u.xv,{variant:"body1",sx:{py:2,textAlign:"center",bg:"rgba(0,0,0,0.3)",color:"white"},children:["You are not the owner of this list but you have permission to",(0,W.jsxs)("b",{children:[" ",n?"edit":"view"]})]})})};var G=n(79376),Y=n(56552),q=n(51609),U=n(73214),B=n(21020),H=n(93841),K=n(47869);const J=({list:e})=>{const t=(0,K.Z)(),n=(0,H.A)(),i=(0,Y.useQueryClient)(),o=(0,g.C)((e=>e.user)),{open:l}=(0,r.useContext)(q.Z),{data:a,isLoading:c}=(0,Y.useQuery)(["userListCollaborationInvite"],(()=>t.get(`entitylists/${e.id}/collaborators/current_user/`)),{cacheTime:0,enabled:o.isAuthenticated}),{mutate:d,isLoading:u}=(0,Y.useMutation)((()=>t.post(`entitylists/${e.id}/collaborators/request_access/`)),{onSuccess:()=>{n("Edit access requested!","success"),i.invalidateQueries(["userListCollaborationInvite"])}}),x=(0,r.useCallback)((()=>{o.isAuthenticated?d():l(U.Ab)}),[d,l,o]);return c||e.role!==F.ht.VIEWER||e.is_collaborator?null:!a||"requested"!==a.status&&"declined"!==a.status?(0,W.jsx)(B.ZP,{disabled:u,size:"lg",sx:{position:"absolute",right:0,top:0,border:"2px solid",p:3,borderRadius:"lg"},onClick:x,children:"Request Edit Access"}):(0,W.jsx)(B.ZP,{disabled:!0,size:"lg",sx:{position:"absolute",right:0,top:0,border:"2px solid",p:3,borderRadius:"lg"},iconBefore:(0,W.jsx)(s.G,{fixedWidth:!0,icon:G.LE}),children:"Access Requested"})},Q=()=>{const{path:e}=(0,l.UO)(),t=(0,g.T)(),n=(0,P.Z)(),{list:i,isCreator:o,parentPath:a,pipelines:c}=te(),d=(0,p.Z)(i.id),{isOwner:x,role:h}=(0,N.Z)(),m=(0,r.useCallback)((()=>{const e=o?`Are you sure you want to delete the "${i.name}" list?`:`You are about to delete "${i.name}" list created by ${i.creator.name}`;n(e).then((()=>t((0,f.Ep)(i.id,i.name)))).then((()=>t((0,_.VF)(a))))}),[t,i,n,o,a]),b=(0,g.C)(f.Pb),y=(0,r.useCallback)((({name:e})=>t((0,f.Td)(i.id,{name:e}))),[i.id,t]),Z=(0,r.useCallback)((()=>{t((0,f.XE)(i.id))}),[t,i]),A=(0,r.useMemo)((()=>(0,M.lT)(b,"name")),[b]),O=(0,g.C)(f.Zi)||i.entity_count;return d.isSuccess?(0,W.jsxs)(u.xu,{children:[(0,W.jsx)(V,{color:i.color}),(0,W.jsxs)(I.Z,{color:i.color,link:{title:"Lists",path:a},children:[(0,W.jsxs)(R.Z,{title:i.name,menu:({onClose:e})=>(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(T.Z,{name:i.name,onSubmit:t=>y(t).then((()=>e())),errors:A}),x?(0,W.jsx)(D.Z,{onClick:Z,icon:(0,W.jsx)(s.G,{fixedWidth:!0,icon:k.Ef}),children:"Sharing permissions"}):null,(0,W.jsx)(D.Z,{onClick:m,iconSx:{color:"red50"},icon:(0,W.jsx)(s.G,{fixedWidth:!0,icon:E.I7}),children:"Delete list"})]}),children:[(0,W.jsx)(u.xu,{variant:"squareIcon",sx:{width:21,height:21,bg:"rgba(0,0,0,0.3)",mr:2,flexShrink:0},children:(0,W.jsx)(s.G,{icon:v.RY,size:"xs"})}),x?d.data.visibility===F.f8.PUBLIC?(0,W.jsx)(u.xu,{sx:{mr:2},children:(0,W.jsx)(s.G,{fixedWidth:!0,icon:C.g4})}):d.data.visibility===F.f8.PRIVATE||d.data.visibility===F.f8.ORGANIZATION_MEMBERS?(0,W.jsx)(u.xu,{sx:{mr:2},children:(0,W.jsx)(s.G,{fixedWidth:!0,icon:S.by})}):null:null]}),i?(0,W.jsxs)(u.xu,{sx:{display:"flex",alignItems:"center",color:"white",mt:1},children:[(0,W.jsx)(u.xv,{variant:"body1",color:"white",sx:{my:1,flexShrink:0},children:`${(0,j._k)(O)} ${1===O?"Result":"Results"}`}),(0,W.jsx)(u.xu,{sx:{mx:3,display:"flex",alignItems:"center"},children:(0,W.jsx)(s.G,{fixedWidth:!0,icon:w.di,style:{fontSize:"5px"}})}),(0,W.jsx)(L.Z,{creator:i.creator})]}):null,(0,W.jsx)(J,{list:d.data}),(0,W.jsx)(u.xu,{hidden:!0,"aria-hidden":!0,children:h})]}),(0,W.jsxs)(u.kC,{sx:{pl:3,bg:i.color},children:[(0,W.jsx)(X,{to:`/lists/${e}`,icon:v.RY,sx:{flexShrink:0},children:"List"}),c.map((t=>(0,W.jsx)(X,{to:`/lists/${e}/${t.id}`,children:t.name},t.id))),x?(0,W.jsx)(ee,{list:i}):null]})]}):null},X=({to:e,icon:t,children:n,sx:i})=>{const o=(0,l.$B)(e),a=(0,r.useMemo)((()=>o&&o.isExact?{bg:"white",color:"text1"}:{bg:"rgba(0,0,0,0.3)",color:"white",transition:"background 0.2s ease-in",":hover":{bg:"rgba(0,0,0,0.5)",cursor:"pointer"}}),[o]);return(0,W.jsxs)(u.rU,{as:Z.rU,to:e,sx:{py:2,px:3,borderTopLeftRadius:"md",borderTopRightRadius:"md",mr:1,fontSize:14,fontWeight:500,display:"flex",alignItems:"center",flexWrap:"nowrap",...a,...i},children:[t?(0,W.jsx)(s.G,{fixedWidth:!0,icon:t}):(0,W.jsx)(z.Z,{}),(0,W.jsx)(u.xv,{as:"span",sx:{ml:2,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:n})]})},ee=({list:e})=>{const{path:t}=(0,l.UO)(),n=(0,g.T)(),[i,o]=(0,r.useState)(!1),{mutateAsync:a}=(0,A.nn)({column:"PLACEHOLDER"});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(u.xu,{onClick:()=>o(!0),sx:{bg:"rgba(0,0,0,0.3)",color:"white",cursor:"pointer",py:2,px:3,borderTopLeftRadius:"md",borderTopRightRadius:"md",mr:1,fontSize:14,fontWeight:500,display:"flex",alignItems:"center",flexWrap:"nowrap",flexShrink:0,transition:"background 0.2s ease-in",":hover":{bg:"rgba(0,0,0,0.5)",cursor:"pointer"}},children:[(0,W.jsx)(s.G,{fixedWidth:!0,icon:y.r8}),(0,W.jsx)(u.xv,{as:"span",sx:{ml:2,display:["none","block"]},children:"Create pipeline"})]}),i?(0,W.jsx)($.Z,{open:!0,onClose:()=>o(!1),header:(0,W.jsx)(u.xu,{variant:"modalHeader",children:(0,W.jsx)(u.xv,{variant:"modalHeader",children:"Create pipeline"})}),footer:(0,W.jsx)(u.xu,{variant:"modalFooter",sx:{bg:"bg1",p:1}}),allowClickEventBubbling:!0,children:(0,W.jsx)(O.ZP,{onSubmit:async i=>{const s=await a(i);await n((0,f.oZ)(e.id,!0)),n((0,_.VF)(`/lists/${t}/${s.id}`)),o(!1)}})}):null]})};function te(){const e=(0,g.C)(f.zn),t=(0,g.C)((e=>e.user.username)),n=(0,r.useMemo)((()=>e&&e.creator.username===t),[e,t]),i=(0,r.useMemo)((()=>e&&e.organization!==m.CY&&3!==e.organization_detail.visibility_type),[e]),s=(0,r.useMemo)((()=>e?e.organization!==m.CY?"/lists":n?`/profile/${t}/lists`:null:null),[e,n,t]),o=(0,r.useMemo)((()=>e?e.columns.filter((e=>e.pipeline)).map((e=>e.pipeline)):[]),[e]);return(0,r.useMemo)((()=>({list:e,username:t,isCreator:n,isPrivateOrgList:i,parentPath:s,pipelines:o})),[e,t,n,i,s,o])}var ne={name:"1vpqsix",styles:"display:inline-block;margin:0 auto;flex:0 0 auto"};const ie=({route:e})=>{const{path:t,pipeline:n}=(0,l.UO)(),c=t.split("-"),m=c[c.length-1],v=(0,g.C)(f.o2),[C,y]=(0,r.useState)(null),{isFetching:k,fetch:E}=(({id:e,path:t})=>{const n=(0,g.T)(),[i,s]=(0,r.useState)(!0),o=(0,g.C)(f.pS),l=(0,r.useRef)(o),a=(0,r.useCallback)((async()=>{await Promise.all([n((0,f.oZ)(e,!0)),n((0,f.rI)(e))]),s(!1)}),[n,e]);return(0,r.useEffect)((()=>{const{isSuccess:t,fetchedList:n}=l.current;!e||t&&n===e||a()}),[e,t,a]),(0,r.useEffect)((()=>()=>{n(f.j1.reset()),n(f.IC.reset()),n((0,b.aw)())}),[n]),{fetch:a,isFetching:i,setIsFetching:s}})({id:m,path:t}),{list:w,parentPath:S,pipelines:_}=te(),Z=w?{enabled:!0,initialData:w}:{enabled:!1},I=(0,p.Z)(null==w?void 0:w.id,Z);if(!w)return k||I.isLoading?(0,W.jsx)(u.kC,{flexDirection:"column",flex:1,children:(0,W.jsx)(x.Z,{})}):(0,W.jsx)(h.Z,{});if(w.is_import_in_progress&&!C?y(setInterval(E,1e4)):!w.is_import_in_progress&&C&&(clearInterval(C),y(null),setTimeout(E,2e3)),t!==w.path)return(0,W.jsx)(l.l_,{to:`/lists/${w.path}`});if(n&&(!_.length||!_.some((e=>e.id.toString()===n))))return(0,W.jsx)(l.l_,{to:`/lists/${w.path}`});let L;if(w&&v){const e=`${w.name}`,[t,n]=[v.slice(0,3),v.slice(3)];let i=`${w.creator.name} created this list on Golden`;i=t.length>0?`${i}: ${(0,j.kg)([...t.map((e=>e.name)),"more"])}.`:`${i}.`,L=(0,W.jsxs)(o.q,{children:[(0,W.jsx)("title",{children:w.name}),(0,W.jsx)("meta",{property:"og:title",content:e}),(0,W.jsx)("meta",{property:"og:description",content:i}),(0,W.jsx)("meta",{name:"description",content:i})]})}const R=ne;return(0,W.jsxs)(W.Fragment,{children:[w&&w.is_import_in_progress&&(0,W.jsxs)(u.xu,{lineHeight:"21px",color:"#1C2026",sx:{position:"fixed",zIndex:"10000",margin:"0px !important",padding:"0px",background:"rgba(28, 32, 38, 0.85);",height:"100%",width:"100%",userSelect:"none",cursor:"default"},children:[(0,W.jsxs)(u.kC,{mt:105,justifyContent:"center",width:"100%",children:[(0,W.jsx)(u.kC,{justifyContent:"center",alignItems:"center",bg:"white",width:"70px",height:"70px",sx:{boxShadow:"0px 2px 20px rgba(0, 0, 0, 0.1);",borderRadius:"500px"},children:(0,W.jsx)(d(),{color:"#1D68F2",loading:!0,css:R,size:88,speedMultiplier:.5})}),(0,W.jsx)(u.xu,{fontSize:"28px",sx:{position:"absolute",transform:"translateY(20px)"},children:(0,W.jsx)(s.G,{fixedWidth:!0,icon:i.Vm})})]}),(0,W.jsx)(u.kC,{mt:30,justifyContent:"center",fontSize:"18px",fontWeight:500,color:"white",children:"Matching your data..."})]}),L,(0,W.jsxs)(u.kC,{flexDirection:"column",flex:1,sx:{height:"100%"},children:[(0,W.jsx)(Q,{parentPath:S}),(0,a.H)(e.routes)]})]})}},49044:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(31154),s=n(39122),r=n(28206),o=n(62625);const l=e=>{const t=(0,r.C)(o.zn),n=(0,i.Z)(e||t.id);if(!n.isSuccess)return{role:s.ht.VIEWER,isOwner:!1,isEditor:!1};const l=n.data;return{role:l.role,isOwner:!!l&&l.role===s.ht.OWNER,isEditor:!!l&&(l.role===s.ht.OWNER||l.role===s.ht.EDITOR)}}},51705:(e,t,n)=>{n.d(t,{OE:()=>a,YJ:()=>d,qF:()=>c,t1:()=>l});var i=n(73208),s=n(20997),r=n(24158),o=n(2454);const l=e=>e.field_model===r.cJ.boolean?"boolean"!=typeof e.display_value:!e.display_value||"object"==typeof e.display_value&&0===Object.values(e.display_value).filter((e=>!!e)).length,a=[o.gh],c=({field_model:e,allow_multiple:t,choices:n})=>n.length&&"text"===e?t?s.th:i.LE:r.iD[e],d=e=>Boolean(e&&e.choices.length&&e.field_model===r.cJ.text)},31154:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(56552),s=n(47869);const r=(e,t={})=>{const n=(0,s.Z)();return(0,i.useQuery)({queryKey:["entityList",e],queryFn:()=>n.get(`entitylists/${e}/`),...t})}},39122:(e,t,n)=>{n.d(t,{E6:()=>i,f8:()=>s,ht:()=>r});let i=function(e){return e.USER="user",e.FAVORITES="favorites",e.WATCHING="watching",e}({}),s=function(e){return e.PUBLIC="public",e.PRIVATE="private",e.ORGANIZATION_MEMBERS="organization_members",e}({}),r=function(e){return e.OWNER="owner",e.EDITOR="editor",e.VIEWER="viewer",e}({})},2454:(e,t,n)=>{n.d(t,{C9:()=>x,Ke:()=>h,LF:()=>a,gh:()=>c,zY:()=>u}),n(73902),n(95623);var i=n(95099),s=n.n(i),r=n(87389),o=n(89856),l=n(62625);const a=e=>{var t;const n=(0,l.wz)(e);return(null==n||null===(t=n.data)||void 0===t?void 0:t.count)||0},c="PRIVATE_FIELD_PLACEHOLDER",d=[{id:"name",label:"Name",fieldType:{default_label:"Name",id:-1},required:!0}],u=(0,o.Z)((e=>{const t=(0,l.VS)(e);return d.concat(t)}),(e=>({columns:(0,l.VS)(e)}))),x=e=>{var t,n;const i=((null==e||null===(t=e.infoboxFieldTypes)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.field_types)||[]).reduce(((e,t)=>(!(0,r.Z)(t)||"description"!==t.name&&t.disabled||e.push(t),e)),[]);return s()(i,(e=>["description"===e.name?0:1,"instance_of"===e.name?0:1,e.default_label]))},h=(0,o.Z)((e=>{const t=x(e),n=(0,l.VS)(e).map((e=>e.fieldType?e.fieldType.id:null));return t.reduce(((e,t)=>(n.includes(t.id)||e.push({...t,label:t.default_label}),e)),[])}),(e=>{const t=(0,l.VS)(e),{infoboxFieldTypes:{data:n}}=e;return{infoboxFieldTypes:n,columns:t}}))},89856:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(23884);const s=function(e,t){const n={};return s=>(n.state&&(0,i.wU)(t(n.state),t(s))||(n.state=s,n.value=e(s)),n.value)}},6016:(e,t,n)=>{n.d(t,{A:()=>a,s:()=>l});var i=n(77106);const s="CONFIRMATION_MODAL_OPEN",r="CONFIRMATION_MODAL_CLOSE",o={open:!1,message:"",onConfirm:null,isYesNo:!1,labelConfirm:"Confirm",labelCancel:"Cancel",heading:""};i.Z.register("userConfirmation",((e=o,t)=>{const{type:n,payload:i}=t;switch(n){case s:{const{message:e,onConfirm:t,isYesNo:n=!1,labelCancel:s,labelConfirm:r,heading:o}=i;return{open:!0,message:e,onConfirm:t,isYesNo:n,labelCancel:s,labelConfirm:r,heading:o}}case r:return o;default:return e}}));const l=e=>({type:s,payload:e}),a=()=>({type:r})},1422:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(27378),s=n(28206),r=n(6016);const o=({isYesNo:e,labelCancel:t,labelConfirm:n,heading:o}={})=>{const l=(0,s.T)(),a=(0,i.useCallback)((({message:i,onConfirm:s})=>{l((0,r.s)({message:i,heading:o,onConfirm:s,isYesNo:e,labelCancel:t,labelConfirm:n,open:!0}))}),[o,l,e,t,n]);return e=>new Promise((t=>{a({message:e,onConfirm:t})}))}}}]);