"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2625],{62625:(t,e,s)=>{s.d(e,{$2:()=>rt,D5:()=>tt,Ep:()=>j,Gw:()=>k,IC:()=>N,Pb:()=>J,RF:()=>x,Td:()=>z,UJ:()=>nt,Us:()=>I,VS:()=>Y,XE:()=>$,XS:()=>st,Zi:()=>X,_v:()=>O,_x:()=>U,_y:()=>w,_z:()=>et,aT:()=>q,bS:()=>M,hU:()=>K,i7:()=>E,j1:()=>F,kP:()=>H,o2:()=>W,oZ:()=>A,of:()=>G,pS:()=>Q,rI:()=>R,tL:()=>Z,tt:()=>f,ud:()=>h,wv:()=>T,wz:()=>B,xs:()=>P,yc:()=>b,zn:()=>V}),s(95735);var n=s(11512),r=s(95099),a=s.n(r),i=s(7723),o=s(24158),l=s(76553),c=s(75457),u=s(65923),d=s(22478),p=s(51493),m=s(77106),y=s(9306);const h="ACTION_ADD_ENTITIES",E="ACTION_REMOVE_ENTITIES",_="entityLists",g=`[${_}] SHARE_ENTITY_LIST`,S=`[${_}] OPEN_ADD_ENTITY_SEARCH`,v=`[${_}] OPEN_OPEN_COLUMN_CONFIG`,C=`[${_}] SET_OPEN_COLUMN_HEADER_KEY`,L={shareEntityList:null,addEntitySearchOpen:!1,columnConfigOpen:!1,openColumnHeaderKey:null},$=t=>({type:g,payload:t}),I=t=>({type:S,payload:t}),O=t=>({type:v,payload:t}),T=t=>({type:C,payload:t}),D=(0,p.Rk)("entityLists"),f=(0,p.Rk)("saveEntityList"),F=(0,p.Rk)("entityListsDetails"),N=(0,p.Rk)("entityListsEntities");m.Z.register(_,(0,p.Jz)({lists:D,selectedList:F,saveEntityList:f,entities:N},((t=L,e)=>{const{type:s}=e;switch(s){case g:return{...t,shareEntityList:e.payload};case S:return{...t,addEntitySearchOpen:e.payload};case v:return{...t,columnConfigOpen:e.payload};case C:return{...t,openColumnHeaderKey:e.payload};default:return t}})));const P=t=>(e,s)=>{const n=V(s());n&&t.id===n.id&&e(F.setCustom("data",t))},A=(t,e=!1)=>(s,n,{api:r})=>(s(F.setFetching()),r.get(`entitylists/${t}/`).then((t=>{s(F.setSuccess(t))})).catch((t=>{s(F.setError()),t&&void 0!==t.response&&e&&400===t.response.status&&s((0,c.A7)())}))),R=(t,{page:e,pageSize:s,order:n}={})=>(r,a,{api:o})=>{r(N.setCustom("id",t));const c=a(),u=B(c),d=u.search,p=(0,y.h9)(c);let m,h,E=n;n?r((0,y.dx)(n)):E=(0,y.r$)(c),s?(m=1,h=s):e?(m=e,h=(null==u?void 0:u.pageSize)||i.d):(m=1,h=i.d);let _={page:m,per_page:h};return d&&(_={..._,search:d}),p&&(_={..._,filters:JSON.stringify(p)}),E&&(_={..._,order:E.sort}),r(N.setCustom("currentPage",m)),r(N.setCustom("pageSize",h)),r(N.setFetching()),o.get(`entitylists/${t}/entities/`,_).then((t=>{r(N.setSuccess(t)),t.localData&&r((0,l.y6)(t.localData))})).catch((()=>{r(F.setError())}))},k=t=>(e,s)=>{const n=B(s());return e(N.setCustom("search",t)),e(R(n.id,{page:1}))},w=t=>(e,s,{api:n})=>n.post(`entitylists/${t}/remove_all_entities/`).then((t=>{e(F.setCustom("data",t))})),b=(t,e)=>(s,n,{api:r})=>{const i=n(),o=V(i),l=W(i),c=B(i),u=[...l],[d]=u.splice(t,1);return u.splice(e,0,d),s(N.setCustom("data",{...c.data,results:u})),r.post(`entitylists/${o.id}/move_entity/`,{entity:l[t].id,rank:l[e].rank}).then((t=>{const e=u.map((e=>{const s=t.find((t=>t.entity===e.id))||{};return{...e,rank:s.rank}}));s(N.setCustom("data",{...c.data,results:a()(e,["rank"])}))})).catch((()=>{s(N.setCustom("data",{...c.data,results:l}))}))},H=(t,e,s=!1)=>(r,a,{api:i})=>(r(f.setFetching()),t.query&&r((0,d.is)("Creating a list from all current results","pending")),i.post("entitylists/",t).then((i=>{r(f.setSuccess(i)),e&&e(i);const o=(0,u.jt)(a())===i.organization,l=3===i.organization_detail.visibility_type,c=o?`/lists/${i.path}`:l?`//golden.com/lists/${i.path}`:`//${i.organization}.golden.com/lists/${i.path}`;s?(r((0,d.S1)(`Created ${t.name}`,"success")),o?r((0,n.VF)({pathname:c})):"_blank"===s?window.open(c,"_blank"):window.location=c):r((0,d.S1)(`Created ${t.name}`,"success",5e3,{url:c,label:"View list",external:!o}))})).catch((t=>{t.response&&400===t.response.status?t.response.json().then((t=>{r(f.setError(t))})):r((0,d.S1)("Error creating a list","error"))}))),x=(t,e)=>(s,n,{api:r})=>(s(f.setFetching()),r.patch(`entitylists/${t}/`,e).then((t=>(s(f.setSuccess(t)),s((0,d.S1)(`Updated ${t.name}`,"success")),t))).catch((t=>{t.response&&400===t.response.status?t.response.json().then((t=>{s(f.setError(t))})):s((0,d.S1)("Error updating a list","error"))}))),j=(t,e)=>(s,n,{api:r})=>r.delete(`entitylists/${t}/`).then((()=>{s((0,d.S1)(`Deleted ${e}`,"success"))})).catch((t=>{t.response&&400===t.response.status?t.response.json().then((t=>{s((0,d.S1)(t,"error"))})):s((0,d.S1)("Error deleting a list","error"))})),z=(t,e)=>(s,n)=>{const r=V(n());return s(x(t,e)).then((t=>{t&&s(F.setCustom("data",{...r,...t}))}))},U=(t,e={})=>(s,n,{api:r})=>r.get(`entitylists/${t.id}/export/`,e).then((()=>{s((0,d.S1)("Your export is in progress and will be sent to your email.","success"))})).catch((()=>{s((0,d.S1)("Something went wrong with the export.","error"))})),G=t=>(e,s,{api:n})=>{const r=V(s());return n.post(`entitylists/${t}/reset_default_columns/`).then((t=>{e(F.setCustom("data",{...r,columns:t.columns}))})).catch((()=>{e((0,d.S1)("Error adding a column","error"))}))},Z=(t,e)=>(s,n,{api:r})=>{const a=V(n()),i=(null==a?void 0:a.columns)||o.LZ,l=[...i],[c]=l.splice(t,1);return l.splice(e,0,c),s(F.setCustom("data",{...a,columns:l})),r.post(`entitylists/${a.id}/reorder_columns/`,{column:i[t].id,rank:i[e].rank}).then((t=>{s(F.setCustom("data",{...a,columns:t.columns}))})).catch((()=>{s(F.setCustom("data",{...a,columns:i}))}))},K=t=>(e,s,{api:n})=>{const r=V(s());return e(st(t)),n.post(`entitylists/${r.id}/remove_column/`,{column:t}).then((t=>{e(F.setCustom("data",{...r,columns:t.columns}))})).catch((()=>{e((0,d.S1)("Error removing a column","error")),e(F.setCustom("data",{...r}))}))},M=t=>(e,s)=>{const n=s(),r=V(n),a=r.columns.findIndex((e=>e.predicate&&e.predicate.id===t.id)),i=r.columns[a],o=[...r.columns];o.splice(a,1,{...i,predicate:t,label:t.label}),e(F.setCustom("data",{...r,columns:o}))},q=(t,e)=>(s,n,{api:r})=>r.patch(`facts/predicates/${e}/`,{label:t}).then((t=>s(M(t)))).catch((t=>{throw t.response&&400===t.response.status?t.response.json().then((({label:t=[]})=>s((0,d.S1)(t.join(", "),"error")))):s((0,d.S1)("Error renaming a custom field","error")),t})),V=t=>{var e,s;return(null==t||null===(e=t.entityLists)||void 0===e||null===(s=e.selectedList)||void 0===s?void 0:s.data)||null},Y=t=>{var e;return(null===(e=V(t))||void 0===e?void 0:e.columns)||o.LZ},J=t=>{var e;return(null==t||null===(e=t.entityLists)||void 0===e?void 0:e.saveEntityList)||{}},B=t=>{var e;return(null==t||null===(e=t.entityLists)||void 0===e?void 0:e.entities)||{}},X=t=>{var e,s,n;return(null==t||null===(e=t.entityLists)||void 0===e||null===(s=e.entities)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.count)||0},W=t=>{var e;const s=B(t);return(null==s||null===(e=s.data)||void 0===e?void 0:e.results)||o.LZ},Q=t=>{const e=B(t);return{isSuccess:"success"===((null==e?void 0:e.status)||"none"),fetchedList:(null==e?void 0:e.id)||null}},tt="ADD_COLUMN_PLACEHOLDER",et=(t=null)=>(e,s)=>{const n=s(),r=V(n),a=r.columns;e(F.setCustom("data",{...r,columns:[...a,{id:tt,rank:a.length+1,label:"NEW FIELD",initialMenuRoute:t}]})),e(T(tt))},st=t=>(e,s)=>{const n=s(),r=V(n),a=[...r.columns],i=a.findIndex((e=>e.id===t));i>=0&&(a.splice(i,1),e(F.setCustom("data",{...r,columns:a})))},nt=(t,e,s)=>(n,r,{api:a})=>a.post(`entitylistimport/${e}/begin_import/`,s).then((()=>{n(A(t,!1))})).catch((()=>{n((0,d.S1)("Error initializing import","error"))})),rt=(t,e)=>(s,n,{api:r})=>{const a={listItemId:t,entityId:e},i=n(),o=V(i),l=B(i);return r.post(`entitylists/${o.id}/match_entity/`,a).then((()=>{s(R(o.id,{page:l.currentPage}))})).catch((()=>{s((0,d.S1)("Error matching entity","error"))}))}},9306:(t,e,s)=>{s.d(e,{Tg:()=>v,aw:()=>u,dx:()=>p,fF:()=>m,h9:()=>S,hg:()=>d,jj:()=>g,jp:()=>c,r$:()=>L,rr:()=>l,xv:()=>C,yG:()=>o}),s(41940);var n=s(89631),r=s(30427),a=s(77106);const i="entityListFilters",o=(0,n.PH)(`[${i}] ADD_INIT_FILTER`),l=(0,n.PH)(`[${i}] SET_FILTERS`),c=(0,n.PH)(`[${i}] INT_FILTERS_RESET`),u=(0,n.PH)(`[${i}] FILTERS_RESET`),d=(0,n.PH)(`[${i}] TOGGLE_FILTER_MENU`),p=(0,n.PH)(`[${i}] TOGGLE_SORT`),m={ASC:"ASC",DESC:"DESC"},y={filters:[],initFilters:[],sort:null,menuOpen:!1},h=(0,n.Lq)(y,(t=>{t.addCase(o,((t,e)=>{t.initFilters.push(e.payload)})).addCase(l,((t,e)=>{t.filters=e.payload})).addCase(d,((t,e)=>{t.menuOpen=e.payload})).addCase(p,((t,e)=>{t.sort=e.payload})).addCase(c,(t=>{t.initFilters=[]})).addCase(u,(()=>y))}));a.Z.register(i,h);const E=t=>t.entityListFilters,_=(0,r.P1)(E,(t=>t.filters)),g=(0,r.P1)(E,_,((t,e)=>e.concat(t.initFilters))),S=(0,r.P1)(_,(t=>t.map((t=>{var e,s,n;const r=(({type:t,operator:{op:e,valueKeys:s},value:n})=>"int"===t&&"eq"===e?parseInt(n):"float"===t&&"eq"===e?parseFloat(n):"int_range"===t&&"eq"!==e&&n&&s?Object.fromEntries(s.map((t=>[t,n[t][t]]))):n||null)(t);return{column:t.column,operator:null===(e=t.operator)||void 0===e?void 0:e.op,operatorIndex:null===(s=t.operator)||void 0===s?void 0:s.operatorIndex,negate:(null===(n=t.operator)||void 0===n?void 0:n.negate)||!1,value:r,aggreagte:null}})))),v=(0,r.P1)(E,(t=>t.menuOpen)),C=(0,r.P1)(_,(t=>t.length>0)),L=(0,r.P1)(E,(t=>t.sort))}}]);