(()=>{var ef=Object.defineProperty,tf=Object.defineProperties;var nf=Object.getOwnPropertyDescriptors;var Mc=Object.getOwnPropertySymbols;var ou=Object.prototype.hasOwnProperty,iu=Object.prototype.propertyIsEnumerable;var au=($,n,t)=>n in $?ef($,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):$[n]=t,vr=($,n)=>{for(var t in n||(n={}))ou.call(n,t)&&au($,t,n[t]);if(Mc)for(var t of Mc(n))iu.call(n,t)&&au($,t,n[t]);return $},Yo=($,n)=>tf($,nf(n));var ha=($,n)=>{var t={};for(var e in $)ou.call($,e)&&n.indexOf(e)<0&&(t[e]=$[e]);if($!=null&&Mc)for(var e of Mc($))n.indexOf(e)<0&&iu.call($,e)&&(t[e]=$[e]);return t};var rf=($,n)=>()=>(n||$((n={exports:{}}).exports,n),n.exports);var Ac=($,n,t)=>new Promise((e,s)=>{var o=l=>{try{c(t.next(l))}catch(p){s(p)}},a=l=>{try{c(t.throw(l))}catch(p){s(p)}},c=l=>l.done?e(l.value):Promise.resolve(l.value).then(o,a);c((t=t.apply($,n)).next())});var of=rf(su=>{(function($){function n(m){for(var g=m[0],v=m[1],O,u,r=0,i=[];r<g.length;r++)u=g[r],Object.prototype.hasOwnProperty.call(s,u)&&s[u]&&i.push(s[u][0]),s[u]=0;for(O in v)Object.prototype.hasOwnProperty.call(v,O)&&($[O]=v[O]);for(h&&h(m);i.length;)i.shift()()}var t={},e={7:0,15:0,16:0},s={7:0,15:0,16:0};function o(m){return a.p+""+({}[m]||m)+"."+{"14":"86a1cb628086eb73f295","15":"c9fc9f49dfa230d7dd99","16":"acc4bf3bb25fd77ac14b","17":"89e1d4665658682a9934","18":"3e778dc94ec676ebcd47","21":"68c98174f74ad9759138"}[m]+".chunk.js"}function a(m){if(t[m])return t[m].exports;var g=t[m]={i:m,l:!1,exports:{}};return $[m].call(g.exports,g,g.exports,a),g.l=!0,g.exports}a.e=function(g){var v=[],O={"14":1,"16":1,"18":1};e[g]?v.push(e[g]):e[g]!==0&&O[g]&&v.push(e[g]=new Promise(function(E,S){for(var P=""+({}[g]||g)+".css",D=a.p+P,W=document.getElementsByTagName("link"),B=0;B<W.length;B++){var f=W[B],y=f.getAttribute("data-href")||f.getAttribute("href");if(f.rel==="stylesheet"&&(y===P||y===D))return E()}for(var M=document.getElementsByTagName("style"),B=0;B<M.length;B++){var f=M[B],y=f.getAttribute("data-href");if(y===P||y===D)return E()}var N=document.createElement("link");N.rel="stylesheet",N.type="text/css";var A=function(L){if(N.onerror=N.onload=null,L.type==="load")E();else{var C=L&&(L.type==="load"?"missing":L.type),R=L&&L.target&&L.target.href||D,U=new Error("Loading CSS chunk "+g+` failed.
(`+R+")");U.code="CSS_CHUNK_LOAD_FAILED",U.type=C,U.request=R,delete e[g],N.parentNode.removeChild(N),S(U)}};N.onerror=N.onload=A,N.href=D,document.head.appendChild(N)}).then(function(){e[g]=0}));var u=s[g];if(u!==0)if(u)v.push(u[2]);else{var r=new Promise(function(E,S){u=s[g]=[E,S]});v.push(u[2]=r);var i=document.createElement("script"),d;i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.src=o(g);var b=new Error;d=function(E){i.onerror=i.onload=null,clearTimeout(w);var S=s[g];if(S!==0){if(S){var P=E&&(E.type==="load"?"missing":E.type),D=E&&E.target&&E.target.src;b.message="Loading chunk "+g+` failed.
(`+P+": "+D+")",b.name="ChunkLoadError",b.type=P,b.request=D,S[1](b)}s[g]=void 0}};var w=setTimeout(function(){d({type:"timeout",target:i})},12e4);i.onerror=i.onload=d,document.head.appendChild(i)}return Promise.all(v)},a.m=$,a.c=t,a.d=function(m,g,v){a.o(m,g)||Object.defineProperty(m,g,{enumerable:!0,get:v})},a.r=function(m){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},a.t=function(m,g){if(g&1&&(m=a(m)),g&8||g&4&&typeof m=="object"&&m&&m.__esModule)return m;var v=Object.create(null);if(a.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:m}),g&2&&typeof m!="string")for(var O in m)a.d(v,O,function(u){return m[u]}.bind(null,O));return v},a.n=function(m){var g=m&&m.__esModule?function(){return m.default}:function(){return m};return a.d(g,"a",g),g},a.o=function(m,g){return Object.prototype.hasOwnProperty.call(m,g)},a.p="https://substackcdn.com/min/",a.oe=function(m){throw console.error(m),m};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var p=0;p<c.length;p++)n(c[p]);var h=l;return a(a.s=1719)})([function($,n,t){"use strict";t.r(n),t.d(n,"render",function(){return z}),t.d(n,"hydrate",function(){return G}),t.d(n,"createElement",function(){return O}),t.d(n,"h",function(){return O}),t.d(n,"Fragment",function(){return i}),t.d(n,"createRef",function(){return r}),t.d(n,"isValidElement",function(){return s}),t.d(n,"Component",function(){return d}),t.d(n,"cloneElement",function(){return V}),t.d(n,"createContext",function(){return k}),t.d(n,"toChildArray",function(){return W}),t.d(n,"options",function(){return e});var e,s,o,a,c,l,p={},h=[],m=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function g(K,Y){for(var ee in Y)K[ee]=Y[ee];return K}function v(K){var Y=K.parentNode;Y&&Y.removeChild(K)}function O(K,Y,ee){var ae,he,me,Ye=arguments,se={};for(me in Y)me=="key"?ae=Y[me]:me=="ref"?he=Y[me]:se[me]=Y[me];if(arguments.length>3)for(ee=[ee],me=3;me<arguments.length;me++)ee.push(Ye[me]);if(ee!=null&&(se.children=ee),typeof K=="function"&&K.defaultProps!=null)for(me in K.defaultProps)se[me]===void 0&&(se[me]=K.defaultProps[me]);return u(K,se,ae,he,null)}function u(K,Y,ee,ae,he){var me={type:K,props:Y,key:ee,ref:ae,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:he==null?++e.__v:he};return e.vnode!=null&&e.vnode(me),me}function r(){return{current:null}}function i(K){return K.children}function d(K,Y){this.props=K,this.context=Y}function b(K,Y){if(Y==null)return K.__?b(K.__,K.__.__k.indexOf(K)+1):null;for(var ee;Y<K.__k.length;Y++)if((ee=K.__k[Y])!=null&&ee.__e!=null)return ee.__e;return typeof K.type=="function"?b(K):null}function w(K){var Y,ee;if((K=K.__)!=null&&K.__c!=null){for(K.__e=K.__c.base=null,Y=0;Y<K.__k.length;Y++)if((ee=K.__k[Y])!=null&&ee.__e!=null){K.__e=K.__c.base=ee.__e;break}return w(K)}}function E(K){(!K.__d&&(K.__d=!0)&&o.push(K)&&!S.__r++||c!==e.debounceRendering)&&((c=e.debounceRendering)||a)(S)}function S(){for(var K;S.__r=o.length;)K=o.sort(function(Y,ee){return Y.__v.__b-ee.__v.__b}),o=[],K.some(function(Y){var ee,ae,he,me,Ye,se;Y.__d&&(Ye=(me=(ee=Y).__v).__e,(se=ee.__P)&&(ae=[],(he=g({},me)).__v=me.__v+1,L(se,me,he,ee.__n,se.ownerSVGElement!==void 0,me.__h!=null?[Ye]:null,ae,Ye==null?b(me):Ye,me.__h),C(ae,me),me.__e!=Ye&&w(me)))})}function P(K,Y,ee,ae,he,me,Ye,se,ie,Ee){var Oe,ce,ue,pe,$e,ne,X,q=ae&&ae.__k||h,Ne=q.length;for(ee.__k=[],Oe=0;Oe<Y.length;Oe++)if((pe=ee.__k[Oe]=(pe=Y[Oe])==null||typeof pe=="boolean"?null:typeof pe=="string"||typeof pe=="number"||typeof pe=="bigint"?u(null,pe,null,null,pe):Array.isArray(pe)?u(i,{children:pe},null,null,null):pe.__b>0?u(pe.type,pe.props,pe.key,null,pe.__v):pe)!=null){if(pe.__=ee,pe.__b=ee.__b+1,(ue=q[Oe])===null||ue&&pe.key==ue.key&&pe.type===ue.type)q[Oe]=void 0;else for(ce=0;ce<Ne;ce++){if((ue=q[ce])&&pe.key==ue.key&&pe.type===ue.type){q[ce]=void 0;break}ue=null}L(K,pe,ue=ue||p,he,me,Ye,se,ie,Ee),$e=pe.__e,(ce=pe.ref)&&ue.ref!=ce&&(X||(X=[]),ue.ref&&X.push(ue.ref,null,pe),X.push(ce,pe.__c||$e,pe)),$e!=null?(ne==null&&(ne=$e),typeof pe.type=="function"&&pe.__k!=null&&pe.__k===ue.__k?pe.__d=ie=D(pe,ie,K):ie=B(K,pe,ue,q,$e,ie),Ee||ee.type!=="option"?typeof ee.type=="function"&&(ee.__d=ie):K.value=""):ie&&ue.__e==ie&&ie.parentNode!=K&&(ie=b(ue))}for(ee.__e=ne,Oe=Ne;Oe--;)q[Oe]!=null&&(typeof ee.type=="function"&&q[Oe].__e!=null&&q[Oe].__e==ee.__d&&(ee.__d=b(ae,Oe+1)),Z(q[Oe],q[Oe]));if(X)for(Oe=0;Oe<X.length;Oe++)U(X[Oe],X[++Oe],X[++Oe])}function D(K,Y,ee){var ae,he;for(ae=0;ae<K.__k.length;ae++)(he=K.__k[ae])&&(he.__=K,Y=typeof he.type=="function"?D(he,Y,ee):B(ee,he,he,K.__k,he.__e,Y));return Y}function W(K,Y){return Y=Y||[],K==null||typeof K=="boolean"||(Array.isArray(K)?K.some(function(ee){W(ee,Y)}):Y.push(K)),Y}function B(K,Y,ee,ae,he,me){var Ye,se,ie;if(Y.__d!==void 0)Ye=Y.__d,Y.__d=void 0;else if(ee==null||he!=me||he.parentNode==null)e:if(me==null||me.parentNode!==K)K.appendChild(he),Ye=null;else{for(se=me,ie=0;(se=se.nextSibling)&&ie<ae.length;ie+=2)if(se==he)break e;K.insertBefore(he,me),Ye=me}return Ye!==void 0?Ye:he.nextSibling}function f(K,Y,ee,ae,he){var me;for(me in ee)me==="children"||me==="key"||me in Y||M(K,me,null,ee[me],ae);for(me in Y)he&&typeof Y[me]!="function"||me==="children"||me==="key"||me==="value"||me==="checked"||ee[me]===Y[me]||M(K,me,Y[me],ee[me],ae)}function y(K,Y,ee){Y[0]==="-"?K.setProperty(Y,ee):K[Y]=ee==null?"":typeof ee!="number"||m.test(Y)?ee:ee+"px"}function M(K,Y,ee,ae,he){var me;e:if(Y==="style")if(typeof ee=="string")K.style.cssText=ee;else{if(typeof ae=="string"&&(K.style.cssText=ae=""),ae)for(Y in ae)ee&&Y in ee||y(K.style,Y,"");if(ee)for(Y in ee)ae&&ee[Y]===ae[Y]||y(K.style,Y,ee[Y])}else if(Y[0]==="o"&&Y[1]==="n")me=Y!==(Y=Y.replace(/Capture$/,"")),Y=Y.toLowerCase()in K?Y.toLowerCase().slice(2):Y.slice(2),K.l||(K.l={}),K.l[Y+me]=ee,ee?ae||K.addEventListener(Y,me?A:N,me):K.removeEventListener(Y,me?A:N,me);else if(Y!=="dangerouslySetInnerHTML"){if(he)Y=Y.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Y!=="href"&&Y!=="list"&&Y!=="form"&&Y!=="tabIndex"&&Y!=="download"&&Y in K)try{K[Y]=ee==null?"":ee;break e}catch(Ye){}typeof ee=="function"||(ee!=null&&(ee!==!1||Y[0]==="a"&&Y[1]==="r")?K.setAttribute(Y,ee):K.removeAttribute(Y))}}function N(K){this.l[K.type+!1](e.event?e.event(K):K)}function A(K){this.l[K.type+!0](e.event?e.event(K):K)}function L(K,Y,ee,ae,he,me,Ye,se,ie){var Ee,Oe,ce,ue,pe,$e,ne,X,q,Ne,Qe,Ze=Y.type;if(Y.constructor!==void 0)return null;ee.__h!=null&&(ie=ee.__h,se=Y.__e=ee.__e,Y.__h=null,me=[se]),(Ee=e.__b)&&Ee(Y);try{e:if(typeof Ze=="function"){if(X=Y.props,q=(Ee=Ze.contextType)&&ae[Ee.__c],Ne=Ee?q?q.props.value:Ee.__:ae,ee.__c?ne=(Oe=Y.__c=ee.__c).__=Oe.__E:("prototype"in Ze&&Ze.prototype.render?Y.__c=Oe=new Ze(X,Ne):(Y.__c=Oe=new d(X,Ne),Oe.constructor=Ze,Oe.render=F),q&&q.sub(Oe),Oe.props=X,Oe.state||(Oe.state={}),Oe.context=Ne,Oe.__n=ae,ce=Oe.__d=!0,Oe.__h=[]),Oe.__s==null&&(Oe.__s=Oe.state),Ze.getDerivedStateFromProps!=null&&(Oe.__s==Oe.state&&(Oe.__s=g({},Oe.__s)),g(Oe.__s,Ze.getDerivedStateFromProps(X,Oe.__s))),ue=Oe.props,pe=Oe.state,ce)Ze.getDerivedStateFromProps==null&&Oe.componentWillMount!=null&&Oe.componentWillMount(),Oe.componentDidMount!=null&&Oe.__h.push(Oe.componentDidMount);else{if(Ze.getDerivedStateFromProps==null&&X!==ue&&Oe.componentWillReceiveProps!=null&&Oe.componentWillReceiveProps(X,Ne),!Oe.__e&&Oe.shouldComponentUpdate!=null&&Oe.shouldComponentUpdate(X,Oe.__s,Ne)===!1||Y.__v===ee.__v){Oe.props=X,Oe.state=Oe.__s,Y.__v!==ee.__v&&(Oe.__d=!1),Oe.__v=Y,Y.__e=ee.__e,Y.__k=ee.__k,Y.__k.forEach(function(tt){tt&&(tt.__=Y)}),Oe.__h.length&&Ye.push(Oe);break e}Oe.componentWillUpdate!=null&&Oe.componentWillUpdate(X,Oe.__s,Ne),Oe.componentDidUpdate!=null&&Oe.__h.push(function(){Oe.componentDidUpdate(ue,pe,$e)})}Oe.context=Ne,Oe.props=X,Oe.state=Oe.__s,(Ee=e.__r)&&Ee(Y),Oe.__d=!1,Oe.__v=Y,Oe.__P=K,Ee=Oe.render(Oe.props,Oe.state,Oe.context),Oe.state=Oe.__s,Oe.getChildContext!=null&&(ae=g(g({},ae),Oe.getChildContext())),ce||Oe.getSnapshotBeforeUpdate==null||($e=Oe.getSnapshotBeforeUpdate(ue,pe)),Qe=Ee!=null&&Ee.type===i&&Ee.key==null?Ee.props.children:Ee,P(K,Array.isArray(Qe)?Qe:[Qe],Y,ee,ae,he,me,Ye,se,ie),Oe.base=Y.__e,Y.__h=null,Oe.__h.length&&Ye.push(Oe),ne&&(Oe.__E=Oe.__=null),Oe.__e=!1}else me==null&&Y.__v===ee.__v?(Y.__k=ee.__k,Y.__e=ee.__e):Y.__e=R(ee.__e,Y,ee,ae,he,me,Ye,ie);(Ee=e.diffed)&&Ee(Y)}catch(tt){Y.__v=null,(ie||me!=null)&&(Y.__e=se,Y.__h=!!ie,me[me.indexOf(se)]=null),e.__e(tt,Y,ee)}}function C(K,Y){e.__c&&e.__c(Y,K),K.some(function(ee){try{K=ee.__h,ee.__h=[],K.some(function(ae){ae.call(ee)})}catch(ae){e.__e(ae,ee.__v)}})}function R(K,Y,ee,ae,he,me,Ye,se){var ie,Ee,Oe,ce,ue=ee.props,pe=Y.props,$e=Y.type,ne=0;if($e==="svg"&&(he=!0),me!=null){for(;ne<me.length;ne++)if((ie=me[ne])&&(ie===K||($e?ie.localName==$e:ie.nodeType==3))){K=ie,me[ne]=null;break}}if(K==null){if($e===null)return document.createTextNode(pe);K=he?document.createElementNS("http://www.w3.org/2000/svg",$e):document.createElement($e,pe.is&&pe),me=null,se=!1}if($e===null)ue===pe||se&&K.data===pe||(K.data=pe);else{if(me=me&&h.slice.call(K.childNodes),Ee=(ue=ee.props||p).dangerouslySetInnerHTML,Oe=pe.dangerouslySetInnerHTML,!se){if(me!=null)for(ue={},ce=0;ce<K.attributes.length;ce++)ue[K.attributes[ce].name]=K.attributes[ce].value;(Oe||Ee)&&(Oe&&(Ee&&Oe.__html==Ee.__html||Oe.__html===K.innerHTML)||(K.innerHTML=Oe&&Oe.__html||""))}if(f(K,pe,ue,he,se),Oe)Y.__k=[];else if(ne=Y.props.children,P(K,Array.isArray(ne)?ne:[ne],Y,ee,ae,he&&$e!=="foreignObject",me,Ye,K.firstChild,se),me!=null)for(ne=me.length;ne--;)me[ne]!=null&&v(me[ne]);se||("value"in pe&&(ne=pe.value)!==void 0&&(ne!==K.value||$e==="progress"&&!ne)&&M(K,"value",ne,ue.value,!1),"checked"in pe&&(ne=pe.checked)!==void 0&&ne!==K.checked&&M(K,"checked",ne,ue.checked,!1))}return K}function U(K,Y,ee){try{typeof K=="function"?K(Y):K.current=Y}catch(ae){e.__e(ae,ee)}}function Z(K,Y,ee){var ae,he,me;if(e.unmount&&e.unmount(K),(ae=K.ref)&&(ae.current&&ae.current!==K.__e||U(ae,null,Y)),ee||typeof K.type=="function"||(ee=(he=K.__e)!=null),K.__e=K.__d=void 0,(ae=K.__c)!=null){if(ae.componentWillUnmount)try{ae.componentWillUnmount()}catch(Ye){e.__e(Ye,Y)}ae.base=ae.__P=null}if(ae=K.__k)for(me=0;me<ae.length;me++)ae[me]&&Z(ae[me],Y,ee);he!=null&&v(he)}function F(K,Y,ee){return this.constructor(K,ee)}function z(K,Y,ee){var ae,he,me;e.__&&e.__(K,Y),he=(ae=typeof ee=="function")?null:ee&&ee.__k||Y.__k,me=[],L(Y,K=(!ae&&ee||Y).__k=O(i,null,[K]),he||p,p,Y.ownerSVGElement!==void 0,!ae&&ee?[ee]:he?null:Y.firstChild?h.slice.call(Y.childNodes):null,me,!ae&&ee?ee:he?he.__e:Y.firstChild,ae),C(me,K)}function G(K,Y){z(K,Y,G)}function V(K,Y,ee){var ae,he,me,Ye=arguments,se=g({},K.props);for(me in Y)me=="key"?ae=Y[me]:me=="ref"?he=Y[me]:se[me]=Y[me];if(arguments.length>3)for(ee=[ee],me=3;me<arguments.length;me++)ee.push(Ye[me]);return ee!=null&&(se.children=ee),u(K.type,se,ae||K.key,he||K.ref,null)}function k(K,Y){var ee={__c:Y="__cC"+l++,__:K,Consumer:function(ae,he){return ae.children(he)},Provider:function(ae){var he,me;return this.getChildContext||(he=[],(me={})[Y]=this,this.getChildContext=function(){return me},this.shouldComponentUpdate=function(Ye){this.props.value!==Ye.value&&he.some(E)},this.sub=function(Ye){he.push(Ye);var se=Ye.componentWillUnmount;Ye.componentWillUnmount=function(){he.splice(he.indexOf(Ye),1),se&&se.call(Ye)}}),ae.children}};return ee.Provider.__=ee.Consumer.contextType=ee}e={__e:function(K,Y){for(var ee,ae,he;Y=Y.__;)if((ee=Y.__c)&&!ee.__)try{if((ae=ee.constructor)&&ae.getDerivedStateFromError!=null&&(ee.setState(ae.getDerivedStateFromError(K)),he=ee.__d),ee.componentDidCatch!=null&&(ee.componentDidCatch(K),he=ee.__d),he)return ee.__E=ee}catch(me){K=me}throw K},__v:0},s=function(K){return K!=null&&K.constructor===void 0},d.prototype.setState=function(K,Y){var ee;ee=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=g({},this.state),typeof K=="function"&&(K=K(g({},ee),this.props)),K&&g(ee,K),K!=null&&this.__v&&(Y&&this.__h.push(Y),E(this))},d.prototype.forceUpdate=function(K){this.__v&&(this.__e=!0,K&&this.__h.push(K),E(this))},d.prototype.render=i,o=[],a=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,S.__r=0,l=0},function($,n,t){"use strict";t.d(n,"k",function(){return u}),t.d(n,"i",function(){return r}),t.d(n,"d",function(){return i}),t.d(n,"g",function(){return d}),t.d(n,"j",function(){return b}),t.d(n,"f",function(){return w}),t.d(n,"h",function(){return E}),t.d(n,"a",function(){return S}),t.d(n,"b",function(){return P}),t.d(n,"c",function(){return D}),t.d(n,"e",function(){return W});var e=t(0),s,o,a,c=0,l=[],p=e.options.__b,h=e.options.__r,m=e.options.diffed,g=e.options.__c,v=e.options.unmount;function O(L,C){e.options.__h&&e.options.__h(o,L,c||C),c=0;var R=o.__H||(o.__H={__:[],__h:[]});return L>=R.__.length&&R.__.push({}),R.__[L]}function u(L){return c=1,r(A,L)}function r(L,C,R){var U=O(s++,2);return U.t=L,U.__c||(U.__=[R?R(C):A(void 0,C),function(Z){var F=U.t(U.__[0],Z);U.__[0]!==F&&(U.__=[F,U.__[1]],U.__c.setState({}))}],U.__c=o),U.__}function i(L,C){var R=O(s++,3);!e.options.__s&&N(R.__H,C)&&(R.__=L,R.__H=C,o.__H.__h.push(R))}function d(L,C){var R=O(s++,4);!e.options.__s&&N(R.__H,C)&&(R.__=L,R.__H=C,o.__h.push(R))}function b(L){return c=5,E(function(){return{current:L}},[])}function w(L,C,R){c=6,d(function(){typeof L=="function"?L(C()):L&&(L.current=C())},R==null?R:R.concat(L))}function E(L,C){var R=O(s++,7);return N(R.__H,C)&&(R.__=L(),R.__H=C,R.__h=L),R.__}function S(L,C){return c=8,E(function(){return L},C)}function P(L){var C=o.context[L.__c],R=O(s++,9);return R.__c=L,C?(R.__==null&&(R.__=!0,C.sub(o)),C.props.value):L.__}function D(L,C){e.options.useDebugValue&&e.options.useDebugValue(C?C(L):L)}function W(L){var C=O(s++,10),R=u();return C.__=L,o.componentDidCatch||(o.componentDidCatch=function(U){C.__&&C.__(U),R[1](U)}),[R[0],function(){R[1](void 0)}]}function B(){l.forEach(function(L){if(L.__P)try{L.__H.__h.forEach(y),L.__H.__h.forEach(M),L.__H.__h=[]}catch(C){L.__H.__h=[],e.options.__e(C,L.__v)}}),l=[]}e.options.__b=function(L){o=null,p&&p(L)},e.options.__r=function(L){h&&h(L),s=0;var C=(o=L.__c).__H;C&&(C.__h.forEach(y),C.__h.forEach(M),C.__h=[])},e.options.diffed=function(L){m&&m(L);var C=L.__c;C&&C.__H&&C.__H.__h.length&&(l.push(C)!==1&&a===e.options.requestAnimationFrame||((a=e.options.requestAnimationFrame)||function(R){var U,Z=function(){clearTimeout(F),f&&cancelAnimationFrame(U),setTimeout(R)},F=setTimeout(Z,100);f&&(U=requestAnimationFrame(Z))})(B)),o=void 0},e.options.__c=function(L,C){C.some(function(R){try{R.__h.forEach(y),R.__h=R.__h.filter(function(U){return!U.__||M(U)})}catch(U){C.some(function(Z){Z.__h&&(Z.__h=[])}),C=[],e.options.__e(U,R.__v)}}),g&&g(L,C)},e.options.unmount=function(L){v&&v(L);var C=L.__c;if(C&&C.__H)try{C.__H.__.forEach(y)}catch(R){e.options.__e(R,C.__v)}};var f=typeof requestAnimationFrame=="function";function y(L){var C=o;typeof L.__c=="function"&&L.__c(),o=C}function M(L){var C=o;L.__c=L.__(),o=C}function N(L,C){return!L||L.length!==C.length||C.some(function(R,U){return R!==L[U]})}function A(L,C){return typeof C=="function"?C(L):C}},function($,n,t){"use strict";t.r(n),t.d(n,"version",function(){return ae}),t.d(n,"Children",function(){return v}),t.d(n,"render",function(){return f}),t.d(n,"hydrate",function(){return y}),t.d(n,"unmountComponentAtNode",function(){return se}),t.d(n,"createPortal",function(){return P}),t.d(n,"createFactory",function(){return he}),t.d(n,"cloneElement",function(){return Ye}),t.d(n,"isValidElement",function(){return me}),t.d(n,"findDOMNode",function(){return ie}),t.d(n,"PureComponent",function(){return c}),t.d(n,"memo",function(){return l}),t.d(n,"forwardRef",function(){return m}),t.d(n,"unstable_batchedUpdates",function(){return Ee}),t.d(n,"StrictMode",function(){return Oe}),t.d(n,"Suspense",function(){return r}),t.d(n,"SuspenseList",function(){return b}),t.d(n,"lazy",function(){return d}),t.d(n,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",function(){return F}),t.d(n,"unstable_ImmediatePriority",function(){return z}),t.d(n,"unstable_UserBlockingPriority",function(){return G}),t.d(n,"unstable_NormalPriority",function(){return V}),t.d(n,"unstable_LowPriority",function(){return k}),t.d(n,"unstable_IdlePriority",function(){return K}),t.d(n,"unstable_runWithPriority",function(){return Y}),t.d(n,"unstable_now",function(){return ee});var e=t(1);t.d(n,"useState",function(){return e.k}),t.d(n,"useReducer",function(){return e.i}),t.d(n,"useEffect",function(){return e.d}),t.d(n,"useLayoutEffect",function(){return e.g}),t.d(n,"useRef",function(){return e.j}),t.d(n,"useImperativeHandle",function(){return e.f}),t.d(n,"useMemo",function(){return e.h}),t.d(n,"useCallback",function(){return e.a}),t.d(n,"useContext",function(){return e.b}),t.d(n,"useDebugValue",function(){return e.c}),t.d(n,"useErrorBoundary",function(){return e.e});var s=t(0);t.d(n,"createElement",function(){return s.createElement}),t.d(n,"createContext",function(){return s.createContext}),t.d(n,"createRef",function(){return s.createRef}),t.d(n,"Fragment",function(){return s.Fragment}),t.d(n,"Component",function(){return s.Component});function o(ce,ue){for(var pe in ue)ce[pe]=ue[pe];return ce}function a(ce,ue){for(var pe in ce)if(pe!=="__source"&&!(pe in ue))return!0;for(var $e in ue)if($e!=="__source"&&ce[$e]!==ue[$e])return!0;return!1}function c(ce){this.props=ce}function l(ce,ue){function pe(ne){var X=this.props.ref,q=X==ne.ref;return!q&&X&&(X.call?X(null):X.current=null),ue?!ue(this.props,ne)||!q:a(this.props,ne)}function $e(ne){return this.shouldComponentUpdate=pe,Object(s.createElement)(ce,ne)}return $e.displayName="Memo("+(ce.displayName||ce.name)+")",$e.prototype.isReactComponent=!0,$e.__f=!0,$e}(c.prototype=new s.Component).isPureReactComponent=!0,c.prototype.shouldComponentUpdate=function(ce,ue){return a(this.props,ce)||a(this.state,ue)};var p=s.options.__b;s.options.__b=function(ce){ce.type&&ce.type.__f&&ce.ref&&(ce.props.ref=ce.ref,ce.ref=null),p&&p(ce)};var h=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function m(ce){function ue(pe,$e){var ne=o({},pe);return delete ne.ref,ce(ne,($e=pe.ref||$e)&&(typeof $e!="object"||"current"in $e)?$e:null)}return ue.$$typeof=h,ue.render=ue,ue.prototype.isReactComponent=ue.__f=!0,ue.displayName="ForwardRef("+(ce.displayName||ce.name)+")",ue}var g=function(ce,ue){return ce==null?null:Object(s.toChildArray)(Object(s.toChildArray)(ce).map(ue))},v={map:g,forEach:g,count:function(ce){return ce?Object(s.toChildArray)(ce).length:0},only:function(ce){var ue=Object(s.toChildArray)(ce);if(ue.length!==1)throw"Children.only";return ue[0]},toArray:s.toChildArray},O=s.options.__e;s.options.__e=function(ce,ue,pe){if(ce.then){for(var $e,ne=ue;ne=ne.__;)if(($e=ne.__c)&&$e.__c)return ue.__e==null&&(ue.__e=pe.__e,ue.__k=pe.__k),$e.__c(ce,ue)}O(ce,ue,pe)};var u=s.options.unmount;function r(){this.__u=0,this.t=null,this.__b=null}function i(ce){var ue=ce.__.__c;return ue&&ue.__e&&ue.__e(ce)}function d(ce){var ue,pe,$e;function ne(X){if(ue||(ue=ce()).then(function(q){pe=q.default||q},function(q){$e=q}),$e)throw $e;if(!pe)throw ue;return Object(s.createElement)(pe,X)}return ne.displayName="Lazy",ne.__f=!0,ne}function b(){this.u=null,this.o=null}s.options.unmount=function(ce){var ue=ce.__c;ue&&ue.__R&&ue.__R(),ue&&ce.__h===!0&&(ce.type=null),u&&u(ce)},(r.prototype=new s.Component).__c=function(ce,ue){var pe=ue.__c,$e=this;$e.t==null&&($e.t=[]),$e.t.push(pe);var ne=i($e.__v),X=!1,q=function(){X||(X=!0,pe.__R=null,ne?ne(Ne):Ne())};pe.__R=q;var Ne=function(){if(!--$e.__u){if($e.state.__e){var Ze=$e.state.__e;$e.__v.__k[0]=function Ft(Lt,rn,ht){return Lt&&(Lt.__v=null,Lt.__k=Lt.__k&&Lt.__k.map(function(je){return Ft(je,rn,ht)}),Lt.__c&&Lt.__c.__P===rn&&(Lt.__e&&ht.insertBefore(Lt.__e,Lt.__d),Lt.__c.__e=!0,Lt.__c.__P=ht)),Lt}(Ze,Ze.__c.__P,Ze.__c.__O)}var tt;for($e.setState({__e:$e.__b=null});tt=$e.t.pop();)tt.forceUpdate()}},Qe=ue.__h===!0;$e.__u++||Qe||$e.setState({__e:$e.__b=$e.__v.__k[0]}),ce.then(q,q)},r.prototype.componentWillUnmount=function(){this.t=[]},r.prototype.render=function(ce,ue){if(this.__b){if(this.__v.__k){var pe=document.createElement("div"),$e=this.__v.__k[0].__c;this.__v.__k[0]=function X(q,Ne,Qe){return q&&(q.__c&&q.__c.__H&&(q.__c.__H.__.forEach(function(Ze){typeof Ze.__c=="function"&&Ze.__c()}),q.__c.__H=null),(q=o({},q)).__c!=null&&(q.__c.__P===Qe&&(q.__c.__P=Ne),q.__c=null),q.__k=q.__k&&q.__k.map(function(Ze){return X(Ze,Ne,Qe)})),q}(this.__b,pe,$e.__O=$e.__P)}this.__b=null}var ne=ue.__e&&Object(s.createElement)(s.Fragment,null,ce.fallback);return ne&&(ne.__h=null),[Object(s.createElement)(s.Fragment,null,ue.__e?null:ce.children),ne]};var w=function(ce,ue,pe){if(++pe[1]===pe[0]&&ce.o.delete(ue),ce.props.revealOrder&&(ce.props.revealOrder[0]!=="t"||!ce.o.size))for(pe=ce.u;pe;){for(;pe.length>3;)pe.pop()();if(pe[1]<pe[0])break;ce.u=pe=pe[2]}};function E(ce){return this.getChildContext=function(){return ce.context},ce.children}function S(ce){var ue=this,pe=ce.i;ue.componentWillUnmount=function(){Object(s.render)(null,ue.l),ue.l=null,ue.i=null},ue.i&&ue.i!==pe&&ue.componentWillUnmount(),ce.__v?(ue.l||(ue.i=pe,ue.l={nodeType:1,parentNode:pe,childNodes:[],appendChild:function($e){this.childNodes.push($e),ue.i.appendChild($e)},insertBefore:function($e,ne){this.childNodes.push($e),ue.i.appendChild($e)},removeChild:function($e){this.childNodes.splice(this.childNodes.indexOf($e)>>>1,1),ue.i.removeChild($e)}}),Object(s.render)(Object(s.createElement)(E,{context:ue.context},ce.__v),ue.l)):ue.l&&ue.componentWillUnmount()}function P(ce,ue){return Object(s.createElement)(S,{__v:ce,i:ue})}(b.prototype=new s.Component).__e=function(ce){var ue=this,pe=i(ue.__v),$e=ue.o.get(ce);return $e[0]++,function(ne){var X=function(){ue.props.revealOrder?($e.push(ne),w(ue,ce,$e)):ne()};pe?pe(X):X()}},b.prototype.render=function(ce){this.u=null,this.o=new Map;var ue=Object(s.toChildArray)(ce.children);ce.revealOrder&&ce.revealOrder[0]==="b"&&ue.reverse();for(var pe=ue.length;pe--;)this.o.set(ue[pe],this.u=[1,0,this.u]);return ce.children},b.prototype.componentDidUpdate=b.prototype.componentDidMount=function(){var ce=this;this.o.forEach(function(ue,pe){w(ce,pe,ue)})};var D=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,W=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,B=function(ce){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(ce)};function f(ce,ue,pe){return ue.__k==null&&(ue.textContent=""),Object(s.render)(ce,ue),typeof pe=="function"&&pe(),ce?ce.__c:null}function y(ce,ue,pe){return Object(s.hydrate)(ce,ue),typeof pe=="function"&&pe(),ce?ce.__c:null}s.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(ce){Object.defineProperty(s.Component.prototype,ce,{configurable:!0,get:function(){return this["UNSAFE_"+ce]},set:function(ue){Object.defineProperty(this,ce,{configurable:!0,writable:!0,value:ue})}})});var M=s.options.event;function N(){}function A(){return this.cancelBubble}function L(){return this.defaultPrevented}s.options.event=function(ce){return M&&(ce=M(ce)),ce.persist=N,ce.isPropagationStopped=A,ce.isDefaultPrevented=L,ce.nativeEvent=ce};var C,R={configurable:!0,get:function(){return this.class}},U=s.options.vnode;s.options.vnode=function(ce){var ue=ce.type,pe=ce.props,$e=pe;if(typeof ue=="string"){for(var ne in $e={},pe){var X=pe[ne];ne==="value"&&"defaultValue"in pe&&X==null||(ne==="defaultValue"&&"value"in pe&&pe.value==null?ne="value":ne==="download"&&X===!0?X="":/ondoubleclick/i.test(ne)?ne="ondblclick":/^onchange(textarea|input)/i.test(ne+ue)&&!B(pe.type)?ne="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(ne)?ne=ne.toLowerCase():W.test(ne)?ne=ne.replace(/[A-Z0-9]/,"-$&").toLowerCase():X===null&&(X=void 0),$e[ne]=X)}ue=="select"&&$e.multiple&&Array.isArray($e.value)&&($e.value=Object(s.toChildArray)(pe.children).forEach(function(q){q.props.selected=$e.value.indexOf(q.props.value)!=-1})),ue=="select"&&$e.defaultValue!=null&&($e.value=Object(s.toChildArray)(pe.children).forEach(function(q){q.props.selected=$e.multiple?$e.defaultValue.indexOf(q.props.value)!=-1:$e.defaultValue==q.props.value})),ce.props=$e}ue&&pe.class!=pe.className&&(R.enumerable="className"in pe,pe.className!=null&&($e.class=pe.className),Object.defineProperty($e,"className",R)),ce.$$typeof=D,U&&U(ce)};var Z=s.options.__r;s.options.__r=function(ce){Z&&Z(ce),C=ce.__c};var F={ReactCurrentDispatcher:{current:{readContext:function(ce){return C.__n[ce.__c].props.value}}}},z=1,G=2,V=3,k=4,K=5;function Y(ce,ue){return ue()}var ee=typeof performance=="object"&&typeof performance.now=="function"?performance.now.bind(performance):function(){return Date.now()},ae="16.8.0";function he(ce){return s.createElement.bind(null,ce)}function me(ce){return!!ce&&ce.$$typeof===D}function Ye(ce){return me(ce)?s.cloneElement.apply(null,arguments):ce}function se(ce){return!!ce.__k&&(Object(s.render)(null,ce),!0)}function ie(ce){return ce&&(ce.base||ce.nodeType===1&&ce)||null}var Ee=function(ce,ue){return ce(ue)},Oe=s.Fragment;n.default={useState:e.k,useReducer:e.i,useEffect:e.d,useLayoutEffect:e.g,useRef:e.j,useImperativeHandle:e.f,useMemo:e.h,useCallback:e.a,useContext:e.b,useDebugValue:e.c,version:"16.8.0",Children:v,render:f,hydrate:y,unmountComponentAtNode:se,createPortal:P,createElement:s.createElement,createContext:s.createContext,createFactory:he,cloneElement:Ye,createRef:s.createRef,Fragment:s.Fragment,isValidElement:me,findDOMNode:ie,Component:s.Component,PureComponent:c,memo:l,forwardRef:m,unstable_batchedUpdates:Ee,StrictMode:s.Fragment,Suspense:r,SuspenseList:b,lazy:d,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:F}},function($,n,t){(function(e){var s=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(se,ie,Ee)=>ie in se?s(se,ie,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):se[ie]=Ee,m=(se,ie)=>{for(var Ee in ie||(ie={}))l.call(ie,Ee)&&h(se,Ee,ie[Ee]);if(c)for(var Ee of c(ie))p.call(ie,Ee)&&h(se,Ee,ie[Ee]);return se},g=(se,ie)=>o(se,a(ie)),v=(se,ie)=>{var Ee={};for(var Oe in se)l.call(se,Oe)&&ie.indexOf(Oe)<0&&(Ee[Oe]=se[Oe]);if(se!=null&&c)for(var Oe of c(se))ie.indexOf(Oe)<0&&p.call(se,Oe)&&(Ee[Oe]=se[Oe]);return Ee};const{cleanSlug:O}=t(92),{substack_color:u}=t(67),{CDN_URL:r,substackDomain:i,getSubscribeUrl:d,serializeQuery:b,pathWithQuery:w,getBaseUrl:E,getSubstackUrl:S,getHostname:P,_getUrl:D,getBaseAppLinkUrl:W,getLikelyLoggedInParam:B,getPubAccountSettingsUrl:f,getDashboardUrl:y,getNewDashboardUrl:M,getSubscriberDashboardUrl:N,getProfileUrlById:A,getReaderProfileUrl:L,cloudinary:C,uncloudinary:R,extractDimensionsFromImageUrl:U,parseUrl:Z,getPublishBaseUrl:F,getPublishSettingsUrl:z,getDonateSubscriptionUrl:G,stripeBaseUrl:V,getPostUrl:k,getPostUrlBySlug:K,getEditPostUrlById:Y,getGroupManagementUrl:ee,getConnectTwitterUrl:ae,getPubConnectTwitterUrl:he}=t(16),me=[/\/embed\/podcast\//];n.TWITTER_CARD_WIDTH=504,n.TWITTER_CARD_HEIGHT=264,n.TWITTER_CARD_LOGO_SIZE=70,n.USER_BAN_APPEAL_URL="https://support.substack.com/hc/en-us/requests/new?ticket_form_id=4416942040980",n.IMPORT_FILE_TOO_LARGE_URL="https://support.substack.com/hc/en-us/requests/new?ticket_form_id=8613857127700&request_from_search=true",n.getBaseUrl=E,n.getSubstackUrl=S,n.getBaseAppLinkUrl=W,n.getHostname=P,n.serializeQuery=b,n.getSubscribeUrl=d,n.pathWithQuery=w,n.getLikelyLoggedInParam=B,n.getPubAccountSettingsUrl=f,n.getDashboardUrl=y,n.getSubscriberDashboardUrl=N,n.getProfileUrlById=A,n.getReaderProfileUrl=L,n.cloudinary=C,n.uncloudinary=R,n.extractDimensionsFromImageUrl=U,n.parseUrl=Z,n.getPublishBaseUrl=F,n.getPublishSettingsUrl=z,n.getDonateSubscriptionUrl=G,n.stripeBaseUrl=V,n.getPostUrl=k,n.getPostUrlBySlug=K,n.getEditPostUrlById=Y,n.getGroupManagementUrl=ee,n.getNewDashboardUrl=M,n.getConnectTwitterUrl=ae,n.getPubConnectTwitterUrl=he,n.updateQuery=function(se,ie,{skipHash:Ee=!1}={}){typeof se=="object"&&(ie=se,se=document.location.pathname+document.location.search+document.location.hash);let Oe=n.pathWithQuery(se.split("?")[0].split("#")[0],Object.assign(n.parseQuery(se),ie));return se.indexOf("#")!==-1&&!Ee&&(Oe+=se.substr(se.indexOf("#"))),Oe},n.parseQuery=function(se){const ie={},Ee=((se==null?void 0:se.split("?")[1])||"").split("#")[0].trim();if(Ee){const Oe=Ee.split("&");for(let ce=0;ce<Oe.length;ce++){const ue=Oe[ce].split("=");ie[decodeURIComponent(ue[0])]=decodeURIComponent(ue.slice(1).join("="))}}return ie},n.getQueryItem=(se,ie)=>{if(typeof ie!="string"){if(typeof window=="undefined"||!(window==null?void 0:window.location))return null;ie=se,se=window.location.href}const Ee=n.parseQuery(se);if(ie in Ee)return Ee[ie]},n.getPubUrl=(se,{params:ie={},signedIn:Ee=!1}={})=>{const Oe=B(Ee,se);return n.pathWithQuery(`${n.getBaseUrl(se)}/`,m({lli:Oe},ie))},n.DEFAULT_PHOTO_URL=`${n.getSubstackUrl()}/img/avatars/logged-out.png`,n.getCallbackUrl=se=>{const ie=!1;return`${ie?n.getBaseUrl():n.getBaseUrl({subdomain:"callback"})}${ie?"/callback":""}${se}`},n.getTld=se=>{try{return new URL(se).hostname.split(".").slice(-2).join(".")}catch(ie){return null}},n.cdnSvg=se=>!se||!se.startsWith("/")||se.startsWith("//")||!/\.svg(\?|#|$)/.test(se)?se:`${r}/${se}`,n.stripProtocol=se=>(se||"").replace(/^(\w+:)?\/\//g,""),n.getUserPhotoUrl=(se,{preferAuthorPhoto:ie,noFallbackToSignedOut:Ee}={})=>{if(ie&&(se==null?void 0:se.author_photo_url)&&C(se.author_photo_url))return C(se.author_photo_url);if((se==null?void 0:se.photo_url)&&C(se.photo_url))return C(se.photo_url);if((se==null?void 0:se.id)!==void 0)return n.getDefaultUserPhotoById(se.id);if(!Ee)return n.DEFAULT_PHOTO_URL},n.getDefaultUserPhotoById=se=>{const ie=["purple","yellow","orange","green","black"];return`${n.getSubstackUrl()}/img/avatars/${ie[se%5]}.png`},n.getUndergroundUrl=se=>{const Ee=D(`admin.${i}`);return se?`${Ee}/publications/${se}`:Ee},n.getStockLandingUrl=se=>`${D(`${i}`)}/discover/stocks/${se}`,n.getUserUndergroundUrl=se=>{const Ee=D(`admin.${i}`);return se?`${Ee}/users/${se}`:Ee},n.getBaseReaderUrl=({utm_source:se}={})=>{const ie=i,Ee=e.env.READER_SUBDOMAIN||"reader";return n.pathWithQuery(D(`${Ee}.${ie}`),{utm_source:se})},n.getReaderSignupUrl=se=>n.pathWithQuery(`${D(i)}/browse`,g(m({},se),{action:"signup"})),n.getReaderUrl=(se,{query:ie})=>{const Ee=i;return n.pathWithQuery(`${D(Ee)}${se}`,ie)},n.getNotificationsUrl=se=>n.getReaderUrl("/activity",{query:se}),n.getLibraryUrl=se=>n.getReaderUrl("/library",{query:se}),n.getFeedUrl=se=>n.getReaderUrl("/feed",{query:se}),n.getChatUrl=se=>n.getReaderUrl("/chat",{query:se}),n.getSavedPostsUrl=se=>n.getReaderUrl("/saved",se),n.getDeprecatedPostAppLinkUrl=(se,ie,{params:Ee={},redirect:Oe=null,source:ce=null,postUuid:ue=null}={})=>{const pe=ue?`${n.getSubstackUrl()}/app-link/publications/${se}/drafts/${ue}`:`${n.getSubstackUrl()}/app-link/post`,$e=m({publication_id:se,post_id:ie,utm_source:ce,redirect:Oe},Ee);return n.pathWithQuery(pe,$e)},n.getPostAppLinkUrl=(se,ie,{params:Ee={},redirect:Oe=null,source:ce=null,postUuid:ue=null}={})=>{if(!se||!ie)return"";const pe=ue?`${n.getBaseAppLinkUrl()}/pub/${se}/drafts/${ue}`:`${n.getBaseAppLinkUrl()}/pub/${se}/p/${ie}`,$e=m({utm_source:ce,redirect:Oe},Ee);return n.pathWithQuery(pe,$e)},n.getPostCommentsUrl=function(se,ie,Ee){return n.getPostUrl(se,ie,{comments:!0,commentId:Ee==null?void 0:Ee.id})},n.getPostCommentInContextUrl=function(se,ie,Ee,Oe=3){if(!Ee.ancestor_path)return n.getPostCommentsUrl(se,ie,Ee);const ce=Ee==null?void 0:Ee.ancestor_path.split("."),ue=ce.length<Oe?0:ce.length-Oe;return n.getPostUrl(se,ie,{comments:!0,commentId:Ee.id,commentContextId:ce[ue]})},n.getPodcastLandingUrl=({pub:se,section:ie,addBase:Ee=!0})=>{ie=ie||se.section;const Oe=Ee?n.getBaseUrl(se):"";return ie?`${Oe}/listen/${ie.slug||ie.id}`:`${Oe}/podcast`},n.getEditSectionUrl=(se,{addBase:ie,type:Ee,id:Oe}={})=>`${ie?n.getBaseUrl(se):""}/publish/settings/${Ee}/${Oe}`,n.getArchiveUrl=(se,{params:ie}={})=>{const Ee=se.section?`/s/${se.section.slug||se.section.id}`:"";return n.pathWithQuery(`${Ee}/archive`,ie)},n.getBaseArchiveUrl=(se,{addBase:ie,params:Ee}={})=>{const Oe=ie?n.getBaseUrl(se):"";return n.pathWithQuery(`${Oe}/archive`,Ee)},n.getAboutUrl=(se,{addBase:ie,params:Ee}={})=>{const Oe=ie?n.getBaseUrl(se):"";return n.pathWithQuery(`${Oe}/about`,Ee)},n.getSitemapUrl=(se,{addBase:ie,params:Ee}={})=>{const Oe=ie?n.getBaseUrl(se):"";return n.pathWithQuery(`${Oe}/sitemap`,Ee)},n.getDashboardUrlForSubdomain=(se,{params:ie}={})=>{const Ee=`${n.getBaseUrl({subdomain:se})}/publish`;return n.pathWithQuery(Ee,ie)},n.getFindTwitterPubsUrl=se=>n.pathWithQuery(`${n.getSubstackUrl()}/twitter/find-pubs`,se),n.getPodcastingUrl=(se,{addBase:ie,params:Ee,slug:Oe,isSection:ce}={})=>{let pe=`${ie?n.getBaseUrl(se):""}/publish/podcasting`;return Oe&&(ce?pe=`${pe}/s/${Oe}`:pe=`${pe}/${Oe}`),Ee?n.pathWithQuery(pe,Ee):pe},n.getCreatePostUrl=(se,ie={})=>{var Ee=ie,{baseUrl:Oe=null}=Ee,ce=v(Ee,["baseUrl"]);return n.pathWithQuery(`${Oe!=null?Oe:n.getBaseUrl(se)}/publish/post`,ce)},n.getCreateMarketingPostUrl=(se,ie)=>n.pathWithQuery(`${n.getBaseUrl(se)}/publish/post/marketing`,ie),n.getSubscriberStatsUrl=(se,{addBase:ie,params:Ee}={})=>{const Oe=ie?n.getBaseUrl(se):"";return n.pathWithQuery(`${Oe}/publish/subscribers`,Ee)},n.getAddSubscriberUrl=se=>"/publish/subscribers/add",n.getDomainConfigUrl=(se,{payment:ie}={})=>`/publish/domain${ie?"/pay":""}`,n.getDomainMigrateUrl=se=>"/publish/domain/migrate",n.getDomainStatusUrl=()=>"/publish/domain/status",n.getSubscriberDetailsUrl=(se,ie,{addBase:Ee,tab:Oe}={})=>{const ce=Ee?n.getBaseUrl(se):"";return n.pathWithQuery(`${ce}/publish/subscribers/legacy`,{email:ie,tab:Oe})},n.getGroupDetailsUrl=se=>`/publish/groups/${se}`,n.getManageGroupsUrl=()=>"/publish/groups",n.getCheckoutUrl=function(se,ie={}){const Ee=n.pathWithQuery(`${n.getBaseUrl(se)}/subscribe`,ie);return Ee.indexOf("?")===-1?`${Ee}?`:Ee},n.getFoundingCheckoutUrl=function(se){return`${n.getBaseUrl(se)}/subscribe?plan=founding&`},n.getLoginUrl=(se={})=>n.pathWithQuery("/account/login",se),n.getMfaUrl=(se={})=>n.pathWithQuery(`${n.getSubstackUrl()}/sign-in/mfa`,se),n.getGlobalAccountRedirectForPub=(se,ie,Ee)=>{const Oe=se==null?void 0:se.subdomain;return n.pathWithQuery(`${n.getSubstackUrl()}${ie}`,{redirect:Ee,for_pub:Oe})},n.getCancelOrUncancelUrl=(se,{addBase:ie,params:Ee}={})=>{const Oe=ie?n.getBaseUrl(se):"";return n.pathWithQuery(`${Oe}/account/cancel`,Ee)},n.getWriterReferralUrl=(se,ie={})=>{if(!!se)return n.pathWithQuery(`${n.getSubstackUrl()}/refer/${se}`,ie)},n.getWriterReferralSettingsUrl=({utm_source:se,utm_context:ie,utm_content:Ee}={})=>n.pathWithQuery(`${n.getSubstackUrl()}/referral`,{utm_source:se,utm_context:ie,utm_content:Ee}),n.getGlobalAccountSettingsUrl=({utm_source:se,section:ie}={})=>n.pathWithQuery(`${n.getSubstackUrl()}/settings`,{utm_source:se,section:ie}),n.getManageSubscriptionsUrl=({utm_source:se}={})=>n.pathWithQuery(`${n.getSubstackUrl()}/settings/subscriptions`,{utm_source:se}),n.getSharePubUrl=se=>`${n.getBaseUrl(se)}/?utm_source=substack&utm_medium=email&utm_content=share&action=share`,n.getPodcatcherSetupUrlForAllPodcasts=(se,ie)=>{var Ee=ie,{startAtSubscribeFlow:Oe}=Ee,ce=v(Ee,["startAtSubscribeFlow"]);let ue=`${n.getBaseUrl(se)}/listen`;if(ce){const pe=n.serializeQuery(ce);pe&&(ue+=`?${pe}`)}return Oe?n.getSubscribeUrl(se,m({addBase:!0,next:ue,skipPodcastSetupPage:!0},ce)):ue},n.getPodcatcherSetupUrl=(se,{addBase:ie,params:Ee,noSection:Oe,section:ce,user:ue,startAtSubscribeFlow:pe}={})=>{let $e="";if(ie&&($e+=n.getBaseUrl(se)),ce=ce||(se==null?void 0:se.section),ce&&!Oe&&($e+=`/s/${ce.slug||ce.id}`),$e+="/account/add-podcast",ue&&ue.email&&(Ee=g(m({},Ee),{email:ue.email}),$e+="/email"),Ee){const ne=n.serializeQuery(Ee);ne&&($e+=`?${ne}`)}return pe?n.getSubscribeUrl(se,m({addBase:!0,next:$e,skipPodcastSetupPage:!0},Ee)):$e},n.getCdnUrl=(se,{cdnUrl:ie=r}={})=>se==null?void 0:se.replace(/^https:\/\/(bucketeer[^/]*|substack-post-media|substack-post-media-staging|substack-audio|substack-video|substack-video-staging|substack-content|substack-content-dev)\.s3\.amazonaws\.com/,ie);const Ye="https://chrt.fm/track";n.getAsChartableUrl=(se,ie)=>se?`${Ye}/${encodeURIComponent(se)}/${n.stripProtocol(ie)}`:ie,n.getCdnUrlForAudio=(se,ie,{token:Ee}={})=>(ie=n.getCdnUrl(ie),(se==null?void 0:se.id)&&(ie=n.updateQuery(ie,{post_id:se.id})),Ee&&(ie=n.updateQuery(ie,{podcast_rss_token:Ee})),ie),n.getClientReadyPodcastUrl=(se,ie,{rssToken:Ee})=>{if(ie.podcast_upload_id){let Oe=n.updateQuery(`${n.getBaseUrl({subdomain:"api"})}/api/v1/audio/upload/${ie.podcast_upload_id}/src`,{token:Ee});return(se==null?void 0:se.chartable_token)&&(Oe=n.getAsChartableUrl(se.chartable_token,Oe)),Oe}if(ie.podcast_url){let Oe=n.getCdnUrlForAudio(ie,ie.podcast_url,{token:Ee});return(se==null?void 0:se.chartable_token)&&(Oe=n.getAsChartableUrl(se.chartable_token,Oe)),Oe}return null},n.urlIsRegularlyShownInIframe=se=>{for(let ie=0;ie<me.length;ie++)if(me[ie].test(se))return!0;return!1},n.getCurrentUrlForLoginRedirect=({useOriginalUrl:se})=>{if(se&&typeof window!="undefined"&&window._preloads.original_url)try{const ie=new URL(window._preloads.original_url);return`${ie.pathname}${ie.search}${ie.hash}`}catch(ie){}return`${document.location.pathname}${document.location.search}${document.location.hash}`},n.getSigninUrl=(se={})=>{const{for_pub:ie,email:Ee,with_password:Oe,error:ce,message:ue,change_user:pe,justTrying:$e,useOriginalUrl:ne}=se;let{redirect:X}=se;return typeof X!="string"&&(X=n.getCurrentUrlForLoginRedirect({useOriginalUrl:ne})),n.pathWithQuery(`${n.getSubstackUrl()}/sign-in`,{redirect:X,for_pub:ie,email:Ee,with_password:Oe,error:ce,message:ue,change_user:pe,justTrying:$e})},n.getTermsUrl=({utm_source:se}={})=>n.pathWithQuery(`${n.getSubstackUrl()}/tos`,{utm_source:se}),n.getGoingPaidUrl=()=>`${n.getSubstackUrl()}/going-paid`,n.getInfoCollectionUrl=({utm_source:se}={})=>`${n.pathWithQuery(`${n.getSubstackUrl()}/ccpa`,{utm_source:se})}#personal-data-collected`,n.getHomeUrl=({utm_source:se}={})=>n.pathWithQuery(`${n.getSubstackUrl()}/home`,{utm_source:se}),n.getPrivacyUrl=({pub:se,utm_source:ie,hash:Ee=null}={})=>{const Oe=se?`${n.getBaseUrl(se)}`:n.getSubstackUrl(),ce=Ee?`#${Ee}`:"";return`${n.pathWithQuery(`${Oe}/privacy`,{utm_source:ie})}${ce}`},n.getLegalUrls=()=>({infoCollection:n.getInfoCollectionUrl(),privacy:n.getPrivacyUrl(),terms:n.getTermsUrl()}),n.getEditProfileUrl=({params:se}={})=>n.pathWithQuery(`${n.getSubstackUrl()}/profile/edit`,se),n.getReaderOnboardingUrl=(se,{isAbbreviated:ie,redirect:Ee,postRedirectToast:Oe,pubId:ce=null}={})=>{let ue=null;if(Ee)try{ue=new URL(Ee),Oe&&ue.searchParams.set("profile-setup-message",Oe)}catch(pe){ue=new URL(n.getSubstackUrl())}return n.pathWithQuery(`${n.getSubstackUrl()}/reader-onboarding`,{isAbbreviated:ie,redirect:ue?ue.toString():null,pubId:ce})},n.getProfileSetupUrl=({utm_source:se}={})=>n.pathWithQuery(`${n.getSubstackUrl()}/profile/start`,{utm_source:se}),n.getDiscoverCategoryUrl=(se,ie)=>`${n.getSubstackUrl()}/discover${se?`/category/${se.slug}`:""}${ie==="all"?"/all":""}`,n.getDiscoverSearchUrl=({query:se,params:ie={}})=>{let Ee=`${n.getSubstackUrl()}/search`;return se&&(Ee=`${n.getSubstackUrl()}/search/${encodeURIComponent(se)}`),n.updateQuery(Ee,ie)},n.getSubscribeUrl=(se,ie={})=>{var Ee=ie,{signedIn:Oe=!1,addBase:ce=!1,root:ue=void 0,user:pe=void 0}=Ee,$e=v(Ee,["signedIn","addBase","root","user"]);const ne=B(Oe,se);return d(se,{root:ue,user:pe,addBase:ce,params:m({lli:ne},$e)})},n.getRecommendationsPageUrl=(se,ie={})=>n.pathWithQuery(`${n.getBaseUrl(se)}/recommendations`,ie),n.getStartPublishingUrl=(se={})=>n.updateQuery(`${n.getSubstackUrl()}/signup`,se),n.getMigrateFromTwitterUrl=(se={})=>n.updateQuery(`${n.getSubstackUrl()}/twitter-quitter`,se),n.getImportUrl=(se={})=>n.updateQuery(`${n.getSubstackUrl()}/signup/import`,se),n.getPublishStripeAccountImportUrl=(se,{addBase:ie=!1,baseUrlOptions:Ee={},params:Oe=void 0}={})=>n.pathWithQuery(`${F(se,{addBase:ie,baseUrlOptions:Ee})}/stripe-import`,Oe),n.getPublishStatsUrl=(se,{addBase:ie,baseUrlOptions:Ee,params:Oe}={})=>{const ce=ie?n.getBaseUrl(se,Ee):"";return n.pathWithQuery(`${ce}/publish/stats`,Oe)},n.getPublishSettingsRecommendationsUrl=(se,{addBase:ie,baseUrlOptions:Ee,params:Oe}={})=>{const ce=ie?n.getBaseUrl(se,Ee):"";return n.pathWithQuery(`${ce}/publish/settings/recommendations`,Oe)},n.getPublishStatsRecommendationsUrl=(se,{addBase:ie,baseUrlOptions:Ee,params:Oe}={})=>{const ce=ie?n.getBaseUrl(se,Ee):"";return n.pathWithQuery(`${ce}/publish/recommendations`,Oe)},n.getManageBlurbsUrl=(se,{addBase:ie,baseUrlOptions:Ee,params:Oe}={})=>{const ce=ie?n.getBaseUrl(se,Ee):"";return n.pathWithQuery(`${ce}/publish/settings/blurbs`,Oe)},n.getManageReaderReferralSettingsUrl=se=>{const ie=n.getBaseUrl(se);return n.pathWithQuery(`${ie}/publish/settings/`,{search:"referral"})},n.getPublishModerationUrl=(se,{addBase:ie=!1,baseUrlOptions:Ee={}}={})=>`${F(se,{addBase:ie,baseUrlOptions:Ee})}/moderation`,n.getPublicationPodcastUrl=se=>"/publish/settings/podcast/edit",n.getInviteUrl=se=>`${n.getBaseUrl(se)}/invite`,n.getProfileSlug=se=>{let ie=`${se.author_id||se.id}`;const Ee=O(se.author_id?se.author_name:se.name,{hashIfEmpty:!0});return Ee&&(ie+=`-${Ee}`),ie},n.getProfileUrl=(se,ie,{utm_source:Ee}={})=>n.getReaderProfileUrl(se,{utm_source:Ee}),n.getPodcastRssUrl=({pub:se,token:ie=null})=>{var Ee;if(se.section){const{section:ce}=se;if((Ee=ce.podcastSettings)==null?void 0:Ee.podcast_feed_url)return ce.podcastSettings.podcast_feed_url;let ue=`${n.getBaseUrl({subdomain:"api"})}/feed/podcast/${se.id}/s/`;return ie?ue+=`${ce.id}/private/${ie}.rss`:ue+=`${ce.id}.rss`,ue}else if(se.podcast_feed_url)return se.podcast_feed_url;let Oe=`${n.getBaseUrl({subdomain:"api"})}/feed/podcast/${se.id}`;return ie?Oe+=`/private/${ie}.rss`:Oe+=".rss",Oe},n.getSupportEmail=(se,{noOverride:ie}={})=>{if(se){if(se.support_email&&!ie)return se.support_email}else return"support@substack.com";return`support+${se.subdomain}@substack.com`},n.getSupportUrl=(se,ie)=>`https://support.substack.com/hc/en-us?s=${encodeURIComponent(n.getSupportEmail(se,ie))}`,n.getPostSelectionPreviewUrl=(se,ie,Ee)=>n.cloudinary(`${n.getPostSelectionPreviewSvgUrl(se,ie,Ee)}`,n.TWITTER_CARD_WIDTH*2,{height:n.TWITTER_CARD_HEIGHT*2,format:"jpg",crop:"fill",skipDomainValidation:!0,quality:"auto:best",version:7}),n.getPostSelectionPreviewSvgUrl=(se,ie,Ee)=>`${n.getBaseUrl(se)}/api/v1/post_selection_image/${ie.id}/${Ee}.svg`,n.getTwitterAccountUrl=se=>`https://twitter.com/${se}`,n.getInstagramAccountUrl=se=>`https://instagram.com/${se}`,n.getTiktokAccountUrl=se=>`https://tiktok.com/@${se}`,n.getYoutubeAccountUrl=se=>`https://youtube.com/channel/${se}`,n.getTwitterSubscribeCardUrl=se=>n.cloudinary(`${n.getTwitterSubscribeCardSvgUrl(se)}`,null,{quality:"auto:best",version:9,skipDomainValidation:!0}),n.getTwitterSubscribeCardSvgUrl=se=>{const{hashString:ie}=t(9);let Ee=`${n.getBaseUrl(se,{forceSubdomain:!0})}/twitter/subscribe-card.jpg`;const Oe=`${se.logo_url}:${se.hero_text}:${se.name}:${se.author_name}:${se.subdomain}`,ce=ie(Oe);return ce?Ee+=`?v=${ce}`:Ee+="?v=bust",Ee},n.getPressKitUrl=(se,ie,Ee)=>{const Oe=n.getPressKitImageUrl(se,ie,Ee);return n.cloudinary(Oe,null,{quality:"auto:best",skipDomainValidation:!0,version:9})},n.getPressKitImageUrl=(se,ie,Ee)=>{const{hashString:Oe}=t(9),ce=Oe(`${ie.social_title+ie.title+ie.description+ie.cover_image}`);return n.pathWithQuery(`${n.getBaseUrl(se,{forceSubdomain:!0})}/api/v1/press_kit/${ie.id}.jpg`,g(m({},Ee),{isDraft:ie.is_draft,hash:ce}))},n.getLatexUrl=se=>{const ie=n.getLatexImageUrl(se);return n.cloudinary(ie,null,{quality:"auto:best",version:9})},n.getLatexImageUrl=se=>n.pathWithQuery("/api/v1/latex/jpeg",{expression:se}),n.getBestsellerAssetUrl=se=>{const ie=`${n.getBaseUrl(null,{forceSubdomain:!0})}/api/v1/profile_assets/${se.id}-bestseller.jpg`;return n.cloudinary(ie,null,{quality:"auto:best",skipDomainValidation:!0,version:9})},n.getBestsellerShareCardUrl=se=>{const ie=`${n.getBaseUrl(null,{forceSubdomain:!0})}/api/v1/profile_assets/${se.id}-bestseller-share-card.jpg`;return n.cloudinary(ie,null,{quality:"auto:best",skipDomainValidation:!0,version:9})},n.getThreadDeepLinkUrl=se=>`substack://publications/${se.id}/threads`,n.isPublishPath=(se,ie)=>se.startsWith("/publish"),n.getReplyToPostUrl=({pub:se,post:ie})=>n.pathWithQuery(`${n.getSubstackUrl()}/api/v1/posts/reply`,{url:n.getPostUrl(se,ie)}),n.looksLikePostUrl=se=>{const ie=n.parseUrl(se);return ie?ie.pathname.startsWith("/p/"):!1},n.getPostSlug=se=>n.looksLikePostUrl(se)?n.parseUrl(se).pathname.split("/")[2]:null,n.getSignoutUrl=({redirect:se,for_pub:ie,utm_source:Ee}={})=>(se=se||"",n.pathWithQuery(`${n.getSubstackUrl()}/sign-out`,{redirect:se,for_pub:ie,utm_source:Ee})),n.getPodcastOnboardingUrl=se=>`/publish/podcast/new?referrer=${encodeURIComponent(se)}`,n.getUrlExtension=se=>{try{const Ee=new URL(se).pathname.match(/\.(\w+)$/);return Ee?Ee[0]:null}catch(ie){return null}},n.EMAIL_CONTENT_WIDTH=550,n.WEB_CONTENT_WIDTH=728,n.WEB_CONTENT_WIDTH_MOBILE=424,n.WEB_RESPONSIVE_IMAGE_WIDTHS=[n.WEB_CONTENT_WIDTH_MOBILE,n.WEB_CONTENT_WIDTH_MOBILE*2,n.WEB_CONTENT_WIDTH_MOBILE*3,n.WEB_CONTENT_WIDTH*2],n.LARGE_IMAGE_WIDTH=1200,n.MAX_REASONABLE_SCREEN_WIDTH=2880,n.MIN_GIF_WIDTH=320,n.MAX_GIF_WIDTH=550,n.getMediaUploadThumbnailUrl=se=>{var ie;return se?`https://substack-video.s3.amazonaws.com/video_upload/post/${se.post_id}/${se.id}/transcoded-${((ie=se.thumbnail_id)!=null?ie:1).toString().padStart(5,"0")}.png`:void 0},n.getMediaUploadThumbnailUrlForPlayer=(se,{pub:ie,isStatic:Ee}={})=>{var Oe;const{colorLuma:ce,videoPlayerDimensions:ue}=t(9),{height:pe,width:$e}=ue(se,{isStatic:Ee}),ne=$e/pe<1920/1080?"pad":"fill",X=((Oe=ie==null?void 0:ie.theme)==null?void 0:Oe.background_pop_color)||(ie==null?void 0:ie.theme_var_background_pop)||u,q=ce(X)>.6?"#1a1a1a":"#ffffff";return n.cloudinary(n.getMediaUploadThumbnailUrl(se),$e*2,{crop:ne,height:pe*2,trailingSegments:Ee?[`l_video_play_base_tu77jd,w_152,e_colorize:100,co_rgb:${X.slice(1)}`,`l_video_play_icon_c75z6z,w_152,e_colorize:100,co_rgb:${q.slice(1)}`]:[]})},n.getPreviewInAppUrl=(se,ie,Ee={})=>n.pathWithQuery(`https://substack.com/app-link/publications/${se.id}/drafts/${ie}`,Ee),n.getLinkRedirectUrl=(se,{userIdJwt:ie}={})=>`${n.getSubstackUrl()}/redirect/${se}?j=${ie||""}`,n.getLoginChallengeDeepUrl=se=>n.pathWithQuery("substack://sign-in/challenge",{token:se}),n.DIRECT_APPLE_APP_STORE_URL="https://apps.apple.com/us/app/substack-reader/id1581650857",n.DIRECT_GOOGLE_PLAY_STORE_URL="https://play.google.com/store/apps/details?id=com.substack.app",n.getSubstackMarketingUrl=(se={})=>n.pathWithQuery(`${n.getSubstackUrl()}/home`),n.getAppMarketingUrl=(se={})=>n.pathWithQuery(`${n.getSubstackUrl()}/app`,se),n.getAppWriterFaqUrl=(se={})=>n.pathWithQuery("https://on.substack.com/p/writerfaq",se),n.getAppStoreRedirectUrl=se=>n.pathWithQuery(`${n.getSubstackUrl()}/app/app-store-redirect`,se),n.getAppStoreUrl=se=>n.pathWithQuery(`${n.getSubstackUrl()}/app/get-ios`,se),n.getPlayStoreUrl=se=>n.pathWithQuery(`${n.getSubstackUrl()}/app/get-android`,se),n.getDefaultPodcastArtUrl=({pathOnly:se=!1}={})=>{const ie="/img/podcast/generic.png";return se?ie:`${n.getSubstackUrl()}${ie}`},n.getDefaultPodcastArtUrlCDN=()=>{const se=n.getDefaultPodcastArtUrl({pathOnly:!0});return n.cloudinary(se,1400)}}).call(this,t(169))},function($,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"c",function(){return r}),t.d(n,"b",function(){return i});var e=t(0),s=t(2),o=t(203),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(d,b,w)=>b in d?a(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,v=(d,b)=>{for(var w in b||(b={}))h.call(b,w)&&g(d,w,b[w]);if(p)for(var w of p(b))m.call(b,w)&&g(d,w,b[w]);return d},O=(d,b)=>c(d,l(b));const u=Object(s.forwardRef)(function(b,w){return Object(e.h)(o.a,O(v({},b),{display:"flex",ref:w}))}),r=u,i=Object(s.forwardRef)(function(b,w){return Object(e.h)(o.a,O(v({},b),{display:"flex",direction:"column",ref:w}))})},function($,n,t){"use strict";var e=t(0),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const o=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var a=n.a=(c,l)=>{const p=u=>{var r=u,{color:h="currentColor",size:m=24,strokeWidth:g=2,children:v}=r,O=ha(r,["color","size","strokeWidth","children"]);return Object(e.h)("svg",vr(Yo(vr({},s),{width:m,height:m,stroke:h,"stroke-width":g,class:`lucide lucide-${o(c)}`}),O),[...l.map(([i,d])=>Object(e.h)(i,d)),...Object(e.toChildArray)(v)])};return p.displayName=`${c}`,p}},function($,n,t){var e,s;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var o={}.hasOwnProperty;function a(){for(var c=[],l=0;l<arguments.length;l++){var p=arguments[l];if(!!p){var h=typeof p;if(h==="string"||h==="number")c.push(p);else if(Array.isArray(p)){if(p.length){var m=a.apply(null,p);m&&c.push(m)}}else if(h==="object")if(p.toString===Object.prototype.toString)for(var g in p)o.call(p,g)&&p[g]&&c.push(g);else c.push(p.toString())}}return c.join(" ")}$.exports?(a.default=a,$.exports=a):(e=[],s=function(){return a}.apply(n,e),s!==void 0&&($.exports=s))})()},function($,n,t){"use strict";t.d(n,"a",function(){return D}),t.d(n,"c",function(){return A}),t.d(n,"i",function(){return L}),t.d(n,"l",function(){return C}),t.d(n,"e",function(){return R}),t.d(n,"h",function(){return U}),t.d(n,"d",function(){return Z}),t.d(n,"b",function(){return z}),t.d(n,"g",function(){return he}),t.d(n,"f",function(){return me}),t.d(n,"k",function(){return Ee}),t.d(n,"j",function(){return Oe}),t.d(n,"m",function(){return ce});var e=t(15),s=t.n(e),o=t(291),a=t(3),c=t(335),l=t(9),p=t(48),h=t(16);const m=()=>typeof window!="undefined"&&window._preloads&&window._preloads.pub&&window._preloads.pub.twitter_pixel_id||null,g=()=>typeof window!="undefined"&&window._preloads&&window._preloads.publicationSettings&&window._preloads.publicationSettings.twitter_pixel_signup_event_id||null,v=()=>typeof window!="undefined"&&window._preloads&&window._preloads.publicationSettings&&window._preloads.publicationSettings.twitter_pixel_subscribe_event_id||null,O=(ue,pe=null)=>{const $e=m();if(!$e)return;const ne={p_id:"Twitter",p_user_id:0,txn_id:$e,events:JSON.stringify([[ue,pe]]),tw_sale_amount:(pe==null?void 0:pe.value)||0,tw_order_quantity:(pe==null?void 0:pe.num_items)||0,tw_iframe_status:0,tw_document_href:document.location.href};u(ne)},u=ue=>{new Image().src=`https://t.co/i/adsct?${Object(h.serializeQuery)(ue)}`,new Image().src=`https://analytics.twitter.com/i/adsct?${Object(h.serializeQuery)(ue)}`},r=(ue,{quantity:pe,price:$e}={})=>{if(ue==="purchase"){const ne=v();ne&&typeof window.twq=="function"&&window.twq("event",ne),O("purchase",{num_items:pe,value:$e})}else if(ue==="signup"){const ne=g();ne&&typeof window.twq=="function"&&window.twq("event",ne),O("signup")}else O("pageview")};var i=t(8),d=Object.defineProperty,b=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,S=(ue,pe,$e)=>pe in ue?d(ue,pe,{enumerable:!0,configurable:!0,writable:!0,value:$e}):ue[pe]=$e,P=(ue,pe)=>{for(var $e in pe||(pe={}))w.call(pe,$e)&&S(ue,$e,pe[$e]);if(b)for(var $e of b(pe))E.call(pe,$e)&&S(ue,$e,pe[$e]);return ue};const D=o.a,W=10,B=Object(l.randomString)(),f=typeof window!="undefined"&&window!=window.top&&Object(c.generateVisitIdHelper)(i.uuidV4);let y=null;M();function M(){var ue;typeof window!="undefined"&&((ue=window==null?void 0:window.navigator)==null?void 0:ue.sendBeacon)&&(window.navigator.sendBeacon=window.navigator.sendBeacon.bind(window.navigator)),se(),Ye(),N(),Object(i.windowReady)(()=>{const pe=y;y=null,pe&&pe.length>0&&V(pe)})}function N(ue){var pe,$e;if(document.location.pathname.startsWith("/embed")&&typeof window!="undefined"&&(($e=(pe=window==null?void 0:window._preloads)==null?void 0:pe.pub)==null?void 0:$e.embed_tracking_disabled))return;G(D.PAGES,Object.assign(ae(),ue));const ne=k();ne&&(new Image().src=`https://www.facebook.com/tr?id=${ne}&ev=PageView`),r("pageview"),he("pageview"),typeof window!="undefined"&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.beacon&&window.PARSELY.beacon.trackPageView&&window.PARSELY.beacon.trackPageView({url:document.location.origin+document.location.pathname+document.location.search,urlref:document.referrer||"",js:1})}function A({previous:ue,url:pe}){!ue||pe.includes("_no_an=true")||N()}function L(ue,pe){if(["development","test"].includes("production")&&!ue)throw new Error("`undefined` event passed to FRONTEND track call");G(ue,Object.assign({},pe))}function C(ue,pe,$e={}){L(D.PUBLICATION_VISITED,P({visited_publication_id:ue.id,visited_publication_subdomain:ue.subdomain,source:pe},$e))}function R(ue,pe,$e=1,{plan:ne,isSubscription:X}={}){const q=(ue/100).toFixed(2),Ne=(ue/$e/100).toFixed(2);pe=pe.toUpperCase(),U();const Qe=F(),Ze=k();Ze&&(new Image().src=`https://www.facebook.com/tr?id=${Ze}&ev=Purchase&cd[value]=${q}&cd[currency]=${pe}`),Ze&&X&&(new Image().src=`https://www.facebook.com/tr?id=${Ze}&ev=Subscribe&cd[value]=${q}&cd[currency]=${pe}`),r("purchase",{price:Ne,quantity:$e});const tt=Object(l.randomString)();he("transaction",{ti:tt,tr:q,cu:pe}),he("item",{ti:tt,in:ne&&(ne.name||ne.nickname||ne.id)||"subscription",ip:Ne,iq:$e,ic:ne&&ne.id,cu:pe});const Ft="7AeECMLq68wDEKuN5pYB";me("conversion",(Qe==null?void 0:Qe.adwordsAccountId)&&(Qe==null?void 0:Qe.adwordsEventSendTo)?{send_to:`${Qe.adwordsAccountId}/${Ft}`}:{});const Lt=ee();if(Lt){const{id:rn,label:ht}=Lt;new Image().src=`//www.googleadservices.com/pagead/conversion/${rn}/?value=${q}&currency_code=${pe}&label=${ht}&guid=ON&script=0`}if(typeof window!="undefined"&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.conversions&&window.PARSELY.conversions.trackSubscription&&window.PARSELY.conversions.trackSubscription(`${ne&&(ne.name||ne.nickname||ne.id)||""} Subscription`),K()==="bankless"){const rn=ne?`paid_${ne.interval}ly`:"paid";window.history.replaceState({},document.title,Object(a.updateQuery)({plan:rn})),N()}}function U(){const ue=F();if(ue.properties.is_free_subscribed)return;ue.properties.is_free_subscribed=!0,he("event",{ec:"Signup",ea:"Signup Success"});const pe="Yo9oCMOM1MYDEKuN5pYB";me("conversion",(ue==null?void 0:ue.adwordsAccountId)&&(ue==null?void 0:ue.adwordsEventSendTo)?{send_to:`${ue.adwordsAccountId}/${pe}`}:{});const $e=k();$e&&(new Image().src=`https://www.facebook.com/tr?id=${$e}&ev=CompleteRegistration`),r("signup"),typeof window!="undefined"&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.conversions&&window.PARSELY.conversions.trackNewsletterSignup&&window.PARSELY.conversions.trackNewsletterSignup("Newsletter Sign Up"),K()==="bankless"&&(window.history.replaceState({},document.title,Object(a.updateQuery)({plan:"free"})),N())}function Z(ue={}){me("Publication Created",ue)}function F(){let ue;return typeof window!="undefined"&&(ue=window._analyticsConfig),ue||(ue={}),ue.properties||(ue.properties={}),ue.properties.browserSessionId=B,ue}function z(){return f}function G(ue,pe){var $e,ne;if(typeof window=="undefined")return;const X={event:ue,properties:Object.assign({browserSessionId:B,iframeVisitId:f},pe),context:{client_type:"web",page:{referrer:document.referrer,title:document.title,url:document.location.href}}},q=Object(i.base64encode)(JSON.stringify(X));y&&y.length<W?y.push(q):new Image().src=Object(a.pathWithQuery)("/api/v1/firehose",{_:new Date().getTime(),d:q}),((ne=($e=window==null?void 0:window._preloads)==null?void 0:$e.user)==null?void 0:ne.is_global_admin)&&console.log(`EVENT: ${ue}`,pe)}function V(ue){typeof window!="undefined"&&(new Image().src=Object(a.pathWithQuery)("/api/v1/firehose/batch",{_:new Date().getTime(),d:ue.join(",")}))}function k(){return typeof window!="undefined"&&window._preloads&&window._preloads.pub&&window._preloads.pub.fb_pixel_id}function K(){var ue,pe;const $e=typeof window!="undefined"&&((ue=window._preloads)==null?void 0:ue.pub);return((pe=$e==null?void 0:$e.parent_publication)==null?void 0:pe.subdomain)||($e==null?void 0:$e.subdomain)}function Y(){return typeof window!="undefined"&&window._preloads&&window._preloads.pub&&window._preloads.pub.ga_pixel_id}function ee(){return typeof window!="undefined"&&window._preloads&&window._preloads.pub&&window._preloads.pub.google_conversion_info}function ae(){const ue={};if(typeof window!="undefined"){const pe=window._preloads&&window._preloads.post,$e=window.location&&/^\/p\/([^\/]+)/.exec(window.location.pathname);$e&&pe&&$e[1]===pe.slug&&(ue.post_id=pe.id,ue.post_audience=pe.audience,ue.post_type=pe.type)}return ue}function he(ue,pe){var $e;const ne=F(),X=Y();if(!X)return;const q=Object(a.parseQuery)(window.location.href);pe=Object.assign({v:1,t:ue,tid:X,cid:ne.anonymousId,dl:document.location.origin+document.location.pathname+document.location.search,dt:document.title||"",dr:document.referrer||"",cn:q.utm_campaign,cs:q.utm_source,cm:q.utm_medium,ck:q.utm_term,cc:q.utm_content,ci:q.utm_id},pe),(($e=ne.user)==null?void 0:$e.id)&&(pe.uid=ne.user.id.toString()),new Image().src=`https://www.google-analytics.com/collect?${Object(a.serializeQuery)(pe)}`}function me(ue,pe){typeof window=="undefined"||!(window==null?void 0:window.gtag)||window.gtag("event",ue,pe)}function Ye(){var ue;if(typeof window=="undefined")return;const pe=F();!pe.localGaPixelId&&!pe.adwordsAccountId||(window.localGaDataLayer=window.localGaDataLayer||[],window.gtag=function(){window.localGaDataLayer.push(arguments)},window.gtag("js",new Date),pe.localGaPixelId&&window.gtag("config",pe.localGaPixelId),pe.adwordsAccountId&&window.gtag("config",pe.adwordsAccountId),((ue=pe.user)==null?void 0:ue.id)&&window.gtag("userId",pe.user.id.toString()),ie(`https://www.googletagmanager.com/gtag/js?id=${pe.localGaPixelId}&l=localGaDataLayer`))}function se(){var ue,pe,$e;if(typeof window=="undefined")return;const ne=(pe=(ue=window==null?void 0:window._preloads)==null?void 0:ue.pub)==null?void 0:pe.google_tag_manager_token;if(!ne)return;window.dataLayer=window.dataLayer||[],Object(p.default)("exempt_from_gtm_filter")?window.dataLayer.push({"gtm.allowlist":["customPixels","customScripts","google","html","nonGooglePixels","nonGoogleScripts","nonGoogleIframes","sandboxedScripts"]}):window.dataLayer.push({"gtm.allowlist":["google"],"gtm.blocklist":["customPixels","customScripts","html","nonGooglePixels","nonGoogleScripts","nonGoogleIframes","sandboxedScripts"]}),window.dataLayer.push({"gtm.start":new Date().getTime(),event:"gtm.js"});const X=F();(($e=X.user)==null?void 0:$e.id)&&window.dataLayer.push({userId:X.user.id.toString()}),ie(`https://www.googletagmanager.com/gtm.js?id=${ne}`,{toHead:!0})}function ie(ue,{toHead:pe}={}){Object(i.windowReady)(()=>{const $e=document.createElement("script");if($e.async=!0,$e.src=ue,pe)document.head.appendChild($e);else{const ne=document.getElementsByTagName("script")[0];ne.parentNode.insertBefore($e,ne)}})}function Ee({post:ue,hasPaywall:pe,surface:$e}){L(D.POST_SEEN,{post_id:ue.id,post_audience:ue.audience,post_type:ue.type,has_paywall:pe,post_age_minutes:ue.post_date&&s()().diff(ue.post_date,"minute"),surface:$e})}function Oe({post:ue,hasPaywall:pe,surface:$e}){L(D.POST_BOTTOM_SEEN,{post_id:ue.id,post_audience:ue.audience,post_type:ue.type,has_paywall:pe,surface:$e})}function ce({post:ue}){!(ue==null?void 0:ue.id)||(L(D.POST_PAGE_PINGBACK,{seconds:0,post_id:ue.id}),setTimeout(function(){L(D.POST_PAGE_PINGBACK,{seconds:10,post_id:ue.id})},1e4))}},function($,n,t){var e=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(F,z,G)=>z in F?e(F,z,{enumerable:!0,configurable:!0,writable:!0,value:G}):F[z]=G,h=(F,z)=>{for(var G in z||(z={}))c.call(z,G)&&p(F,G,z[G]);if(a)for(var G of a(z))l.call(z,G)&&p(F,G,z[G]);return F},m=(F,z)=>s(F,o(z)),g=(F,z,G)=>new Promise((V,k)=>{var K=ae=>{try{ee(G.next(ae))}catch(he){k(he)}},Y=ae=>{try{ee(G.throw(ae))}catch(he){k(he)}},ee=ae=>ae.done?V(ae.value):Promise.resolve(ae.value).then(K,Y);ee((G=G.apply(F,z)).next())});const{h:v}=t(0),{route:O}=t(41),u=t(475),{cloudinary:r,getQueryItem:i,pathWithQuery:d,parseQuery:b,getGlobalAccountSettingsUrl:w,getPubAccountSettingsUrl:E,getCurrentUrlForLoginRedirect:S,getBaseUrl:P}=t(3),{centsToPriceString:D,toTitleCase:W,pluralize:B,isZeroDecimalCurrency:f}=t(9),y=t(482),{isMobileUserAgent:M,getIosVersion:N}=t(89),{validatePledgePrices:A}=t(483),L=["text","password","file","search","email","number","date","color","datetime","datetime-local","month","range","search","tel","time","url","week"],C=["pinespodcast","test1"];let R=typeof window=="undefined"||!window.addEventListener;R||window.addEventListener("load",()=>{R=!0},!1),typeof window!="undefined"&&window._preloads,n.globalPlaybackNotifier=typeof window!="undefined"?new y:null,n.getPodcastEpisodeImageUrl=(F,z)=>(z==null?void 0:z.cover_image)||(z==null?void 0:z.podcast_art_url)||(F==null?void 0:F.podcast_art_url),n.windowReady=F=>{R?F():window.addEventListener("load",F,!1)},n.debounce=function(F,z,G=this){let V=null;return function(){clearTimeout(V),V=setTimeout(()=>F.apply(G,arguments),z)}},n.planToString=function(F,{totalAmount:z=null,discount:G=null,quantity:V=1,trial_end_override:k=null,noTrial:K=!1,recurring:Y=!0,intervalPostfix:ee=null}={}){const ae=z===null?F.amount*(V||1):z,he=D(ae,F.currency);let me;F.is_bitcoin?me=B(F.interval_count,F.interval):F.interval_count===1&&Y?me=`per ${F.interval}`:me=`${Y?"per":"for"} ${B(F.interval_count,F.interval)}`,ee&&(me+=` ${ee}`);let Ye="";const se=Math.max(0,F.trial_period_days||0,G&&G.trial_period_days||0,k&&Math.ceil((k-Date.now()/1e3)/60/60/24));!K&&se>0&&(Ye=v("span",{className:"trial"},` ${se} day free trial`));let ie;if(G){if(G.loading)Ye=v("span",{className:"discount-price"}," (coupon loading)");else if(G.error)Ye=v("span",{className:"discount-price error"}," (coupon invalid or expired)");else if(G.percent_off||G.amount_off){let Ee;if(G.percent_off?Ee=Math.round(ae*(1-(G.percent_off_precise||G.percent_off)/100)):G.amount_off&&(Ee=Math.max(0,ae-G.amount_off)),ie=D(Ee,F.currency),Y){if(Ee===0&&(me=""),G.duration==="once")me+=` for first ${F.interval}`;else if(G.duration==="repeating"){const Oe=G.duration_in_months/(F.interval==="year"?12:1)*F.interval_count;Oe>1?me+=` for first ${Oe} ${F.interval}s`:me+=` for first ${F.interval}`}}}}return ie?[v("span",{className:"crossed-out"},he)," ",v("span",{className:"discount-price"},ie," ",me," ",Ye)]:[`${he}${F.is_bitcoin?"/":" "}${me}`,Ye]},n.couponToString=(F,z)=>{if(!F||F.loading||F.error)return;let G;return F.trial_period_days?G=`${F.trial_period_days} day free trial`:(F.percent_off?G=`${Math.round(F.percent_off_precise||F.percent_off)}% off`:F.amount_off&&(G=`${D(F.amount_off,z.currency)} off`),F.duration==="once"?z?G+=` first ${z.interval}`:G+=" first payment":F.duration==="repeating"?F.duration_in_months%12==0?G+=` for ${B(F.duration_in_months/12,"year")}`:G+=` for ${B(F.duration_in_months,"month")}`:G+=" forever"),G},n.preloadImage=function(F,z){const G=new Image;G.onload=()=>{G.onload=G.onerror=null,z&&z(G)},G.onerror=G.onload,G.src=F},n.getHostname=F=>{const z=document.createElement("a");return z.href=F,(z.hostname||"").replace(/\.localhost$/,"")},n.getPathname=F=>{const z=document.createElement("a");return z.href=F,z.pathname||""},n.getPath=F=>{const z=document.createElement("a");return z.href=F,(z.pathname||"")+(z.search||"")+(z.hash||"")},n.getNetworkErrorMessage=(F,z)=>{var G;return n.getNetworkErrorMessageFromResponse((F==null?void 0:F.body)||((G=F==null?void 0:F.response)==null?void 0:G.body),z)},n.getNetworkErrorMessageFromXhr=(F,z)=>{let G;try{G=JSON.parse(F&&F.responseText)}catch(V){}return n.getNetworkErrorMessageFromResponse(G,z)},n.getNetworkErrorMessageFromResponse=(F,z)=>(z=z||"Something went wrong",F&&F.error?F.error:F&&F.errors&&F.errors.length>0&&F.errors[F.errors.length-1].msg||z),n.inputPrefillHack=function(){return[v("input",{type:"email",name:"fake_email",placeholder:"email",style:"position:absolute;top:-10000px;left:-10000px"}),v("input",{type:"password",name:"fake_password",placeholder:"password",style:"position:absolute;top:-10000px;left:-10000px"})]},n.isBrowser=function(){return typeof window!="undefined"},n.isMobileBrowser=function(){if(typeof navigator!="undefined"||typeof window!="undefined"){const F=navigator.userAgent||navigator.vendor||window.opera;if(M(F,{checkFirst4:!0}))return!0}return!1},n.isIE=()=>typeof window=="undefined"||!window.navigator||!window.navigator.userAgent?!1:/(MSIE|Trident)/i.test(window.navigator.userAgent),n.isFirefox=()=>typeof window=="undefined"||!window.navigator||!window.navigator.userAgent?!1:/Firefox/i.test(window.navigator.userAgent),n.isAndroid=()=>typeof window=="undefined"||!window.navigator||!window.navigator.userAgent?!1:/Android/i.test(window.navigator.userAgent),n.isBrave=()=>!(typeof window=="undefined"||!window.navigator||!window.navigator.brave),n.isIOs=()=>Boolean(n.iosVersion()),n.isMac=(F=window.navigator)=>F?F.userAgentData&&F.userAgentData.platform?/macOS/.test(F.userAgentData.platform):/Mac/.test(F.platform):!1,n.isSafari=()=>{var F;return typeof window=="undefined"||!((F=window.navigator)==null?void 0:F.userAgent)?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},n.getModKeyLabel=(F=n.isMac())=>F?"\u2318":"^",n.iosVersion=()=>typeof window=="undefined"?null:N(),n.fixSmsUrl=F=>{const z=n.iosVersion();return z?z>=9?F.replace("?body=","&body="):F.replace("?body=",";body="):F};const U=F=>((z,G)=>{let V;const k=()=>G.userAgent.match(/ipad|iphone/i),K=he=>{V=z.createElement("textArea"),V.value=he,z.body.appendChild(V)},Y=()=>{let he,me;k()?(he=z.createRange(),he.selectNodeContents(V),me=F.getSelection(),me.removeAllRanges(),me.addRange(he),V.setSelectionRange(0,999999)):V.select()},ee=()=>{z.execCommand("copy"),z.body.removeChild(V)};return{copy:he=>{K(he),Y(),ee()}}})(document,navigator);n.copyToClipboard=F=>{if(typeof window=="undefined")return;U(window).copy(F);const z=G=>{G&&G.clipboardData?(G.clipboardData.setData("text/plain",F),G.preventDefault()):window.clipboardData&&window.clipboardData.setData("Text",F)};n.iosVersion()||window.addEventListener("copy",z),setTimeout(()=>{try{const G=document.createElement("input");G.style="position: absolute; top: 0; right: 0; height: 1px; width: 1px;",document.documentElement.appendChild(G),G.value=F,G.contentEditable=!0,G.readOnly=!1;const V=document.createRange();V.selectNodeContents(G);const k=window.getSelection();k.removeAllRanges(),k.addRange(V),G.setSelectionRange(0,999999),document.execCommand("copy"),document.documentElement.removeChild(G)}catch(G){}window.removeEventListener("copy",z)},0)},n.copyNodeToClipboard=F=>{try{n.selectNode(F),document.execCommand("copy")}catch(z){console.error("Failed to copy text:",z)}},n.selectNode=F=>{try{if(["INPUT","TEXTAREA"].includes(F.nodeName)&&F.select)F.select();else if(document.body.createTextRange){const z=document.body.createTextRange();z.moveToElementText(F),z.select()}else if(window.getSelection){const z=window.getSelection(),G=document.createRange();G.selectNodeContents(F),z.removeAllRanges(),z.addRange(G)}else console.warn("Could not select text in node: Unsupported browser")}catch(z){console.error("Failed to select node:",z)}},n.deselectNode=F=>{try{const z=window.getSelection?window.getSelection():document.selection;z&&z.anchorNode===F&&(z.empty?z.empty():z.removeAllRanges&&z.removeAllRanges())}catch(z){console.error("Failed to deselect node:",z)}},n.setMetaData=function({title:F=null,socialTitle:z=null,searchDescription:G=null,description:V=null,themeColor:k=null,image:K=null,seoProps:Y=null,isLargeImage:ee=!1,imageWidth:ae=null,imageHeight:he=null,isPodcast:me=!1,isVideo:Ye=!1,slug:se=null,pub:ie=null,post:Ee=null,meta:Oe=[],siteConfigs:ce={}}){const ue={meta:[...Oe,{property:"og:type",content:"article"}]};F&&(ue.title=F,ue.meta.push({property:"og:title",content:z||F},{property:"twitter:title",content:z||F})),(V||G)&&ue.meta.push({name:"description",content:G||V},{property:"og:description",content:V},{property:"twitter:description",content:V}),k&&ue.meta.push({name:"theme-color",content:k});const pe=!!ie&&ie.invite_only,$e=!!Ee&&Ee.audience==="everyone",ne=!pe&&$e,X=ne&&ce.twitter_player_card_enabled,q=C.includes(ie==null?void 0:ie.subdomain)&&ne;if(me){const Ne=n.getPodcastEpisodeImageUrl(ie,Ee);Ne&&(K=r(Ne,1200,{height:600,smartCrop:!0,format:"jpg"}),ee=!0)}if(K){let Ne="summary";ee&&(Ne="summary_large_image"),(me&&X||Ye&&q)&&(Ne="player"),ue.meta.push({property:"og:image",content:K},{property:"twitter:image",content:K},{property:"twitter:card",content:Ne}),ae&&ue.meta.push({property:"og:image:width",content:ae}),he&&ue.meta.push({property:"og:image:height",content:he})}if(Y){const Ne=["noindex","nofollow","noarchive"];Y=Object.fromEntries(Object.entries(Y).filter(([Qe,Ze])=>Ze&&Ne.includes(Qe.toLowerCase()))),Object.keys(Y).length>0&&ue.meta.push({name:"robots",content:Object.keys(Y).join(", ")})}return(ie==null?void 0:ie.explicit)&&ue.meta.push({name:"rating",content:"adult"}),me&&X&&ue.meta.push({property:"twitter:player",content:`${P(ie)}/embed/podcast/${se}?autoplay=1`},{property:"twitter:player:width",content:"1"},{property:"twitter:player:height",content:"1"},{property:"twitter:text:player_width",content:"1"},{property:"twitter:text:player_height",content:"1"}),Ye&&q&&ue.meta.push({property:"twitter:player",content:`${P(ie)}/embed/video/${se}?autoplay=1`},{property:"twitter:player:width",content:"16"},{property:"twitter:player:height",content:"9"},{property:"twitter:text:player_width",content:"16"},{property:"twitter:text:player_height",content:"9"}),v(u,h({},ue))},n.getBodyOffset=(F,z)=>{const G=`offset${W(z)}`;let V=0;for(;F&&F!==document.body;)V+=F[G],F=F.offsetParent;return V},n.getUrlHash=()=>typeof window=="undefined"||!window.location.hash?null:window.location.hash.slice(1),n.scrollToHash=function(F){const z=n.getUrlHash();if(!z)return;const G=document.getElementById(z);!G||(typeof F!="number"&&(F=-122),document.documentElement.scrollTop=Math.max(0,n.getBodyOffset(G,"top")+F))},n.mightSupportApplePay=F=>!(!F||!F.stripe_country||F.apple_pay_disabled||typeof window=="undefined"||!window.ApplePaySession),n.addClass=(F,z)=>{F.className+=` ${z}`},n.removeClass=(F,z)=>{F.className=F.className.replace(new RegExp(`\\b${z}\\b`,"g"),"").trim()},n.hasClass=(F,z)=>new RegExp(`\\b${z}\\b`,"g").test(F.className),n.isFocused=(...F)=>n.isRootOrChild(document.activeElement,...F),n.isRootOrChild=(F,...z)=>{for(;F;){for(const G of z)if(typeof G=="function"?G(F):F===G)return!0;F=F.parentNode}return!1},n.getRootOrChild=(F,z,{maxDepth:G}={})=>{const V=[F];let k=0;for(;V.length>0;){k++;const K=V.splice(0);for(const Y of K)if(Y){if(z(Y))return Y;(!G||k<G)&&Y.children&&V.push(...Y.children)}}return null},n.getRootOrParent=(F,z)=>F?z(F)?F:n.getRootOrParent(F.parentNode,z):null,n.getVisibilityApi=()=>{let F,z;return typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(F="visibilitychange",z="hidden"):typeof document.msHidden!="undefined"?(F="msvisibilitychange",z="msHidden"):typeof document.webkitHidden!="undefined"&&(F="webkitvisibilitychange",z="webkitHidden")),{visibilityChange:F,hidden:z}},n.isWindowVisible=()=>{const{hidden:F}=n.getVisibilityApi();return F?!document[F]:!0},n.onWindowVisibilityChange=F=>{const{visibilityChange:z}=n.getVisibilityApi();!z||document.addEventListener(z,F,!1)},n.offWindowVisibilityChange=F=>{const{visibilityChange:z}=n.getVisibilityApi();!z||document.removeEventListener(z,F,!1)},n.disableBackspaceNavigation=()=>{document.addEventListener("keydown",Z,!1)},n.enableBackspaceNavigation=()=>{document.removeEventListener("keydown",Z,!1)};function Z(F){if(F.keyCode!==8)return;const z=F.srcElement||F.target;if(!z.readonly&&!z.disabled){if(z.isContentEditable)return;if(z.nodeName==="TEXTAREA")return;if(z.nodeName==="INPUT"&&L.indexOf((z.getAttribute("type")||"").toLowerCase())>-1)return}return F.preventDefault(),!1}n.getBlob=F=>new Promise((z,G)=>{const V=new XMLHttpRequest;V.open("GET",F,!0),V.responseType="blob",V.onerror=G,V.onload=k=>{V.status==200?z(V.response):G(new Error("Failed to fetch blob"))},V.send()}),n.getDataUrlFromFile=F=>new Promise((z,G)=>{if(!window.FileReader){G(new TypeError("File reader API not found"));return}const V=new FileReader;V.onerror=G,V.onload=()=>{z(V.result)},V.readAsDataURL(F)}),n.getExifOrientationFromFile=F=>new Promise((z,G)=>{if(!window.FileReader){G(new TypeError("File reader API not found"));return}if(!window.DataView){G(new TypeError("DataView API not found"));return}const V=new FileReader;V.onerror=G,V.onload=()=>{const k=new DataView(V.result);if(k.getUint16(0,!1)!=65496)return z(-2);const K=k.byteLength;let Y=2;for(;Y<K;){if(k.getUint16(Y+2,!1)<=8)return z(-1);const ee=k.getUint16(Y,!1);if(Y+=2,ee==65505){if(k.getUint32(Y+=2,!1)!=1165519206)return z(-1);const ae=k.getUint16(Y+=6,!1)==18761;Y+=k.getUint32(Y+4,ae);const he=k.getUint16(Y,ae);Y+=2;for(let me=0;me<he;me++)if(k.getUint16(Y+me*12,ae)==274)return z(k.getUint16(Y+me*12+8,ae))}else{if((ee&65280)!=65280)break;Y+=k.getUint16(Y,!1)}}z(-1)},V.readAsArrayBuffer(F)}),n.getImageDataFromFileInput=F=>g(this,null,function*(){let z,G;const V=(F==null?void 0:F.files)?F.files[0]:null;if(F.value="",V){try{z=yield n.getDataUrlFromFile(V)}catch(k){console.error("Failed to get data URL from file:",k),alert(k.message);return}try{G=yield n.getExifOrientationFromFile(V)}catch(k){console.error("Failed to extract EXIF data from file:",k)}}return{url:z,orientation:G}}),n.transformExifOrientation=F=>{switch(F){case 2:return"rotateY(180deg)";case 3:return"rotateZ(-180deg)";case 4:return"rotateZ(-180deg) rotateY(180deg)";case 5:return"rotateZ(-90deg) rotateY(180deg)";case 6:return"rotateZ(90deg)";case 7:return"rotateZ(90deg) rotateY(180deg)";case 8:return"rotateZ(-90deg)";default:return""}},n.canScroll=()=>n.maxScroll()>0,n.maxScroll=()=>Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)-window.innerHeight,n.getLoginRedirect=({redirect:F,email:z,justTrying:G,with_password:V=!1,useOriginalUrl:k=!1}={})=>(typeof F!="string"&&(F=S({useOriginalUrl:k})),d("/account/login",{redirect:F||"",email:z||"",with_password:V?"1":"",justTrying:G||""})),n.redirectToLogin=(F={})=>{document.location.href=n.getLoginRedirect(F)},n.redirectToAccount=F=>{window.location.assign(E(F))},n.redirectToAccountSettings=()=>{document.location.href=w()},n.base64encode=F=>{const z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";let G="",V,k,K,Y,ee,ae,he,me=0;for(F=n.utf8Encode(F);me<F.length;)V=F.charCodeAt(me++),k=F.charCodeAt(me++),K=F.charCodeAt(me++),Y=V>>2,ee=(V&3)<<4|k>>4,ae=(k&15)<<2|K>>6,he=K&63,isNaN(k)?ae=he=64:isNaN(K)&&(he=64),G=G+z.charAt(Y)+z.charAt(ee)+z.charAt(ae)+z.charAt(he);return G},n.utf8Encode=F=>{let z="";for(let G=0;G<F.length;G++){const V=F.charCodeAt(G);V<128?z+=String.fromCharCode(V):V>127&&V<2048?(z+=String.fromCharCode(V>>6|192),z+=String.fromCharCode(V&63|128)):(z+=String.fromCharCode(V>>12|224),z+=String.fromCharCode(V>>6&63|128),z+=String.fromCharCode(V&63|128))}return z},n.redirectNoScroll=F=>{const z=[window.scrollX,window.scrollY];n.redirect(F),window.scrollTo(...z)},n.redirect=(F,{event:z=null,local_navigation:G=!0,replace:V=!1,newTab:k=!1}={})=>{var K;if(z&&z.preventDefault(),!F.trim().startsWith("javascript:")){if(F.startsWith("#")&&G){window.location.hash!==F&&(V&&((K=window.history)==null?void 0:K.replaceState)?window.history.replaceState(null,null,F):window.location.hash=F),n.scrollToHash();return}if(G&&n.getHostname(F)&&n.getHostname(F)!==n.getHostname(window.location.href)&&(G=!1),k||z&&(z.metaKey||z.ctrlKey)){window.open(F,"_blank");return}if(G&&O(n.getPath(F),V)){setTimeout(()=>n.scrollToHash(),0);return}window.location.href=F}},n.setState=(F,z)=>new Promise(G=>{F.setState(z,G)}),n.stateTransaction=(F,z)=>new Promise((G,V)=>{F.setState((...k)=>g(this,null,function*(){try{G(yield z.apply(F,k))}catch(K){V(K)}}))}),n.stateLock=(F,z,G,...V)=>g(this,[F,z,G,...V],function*(k,K,Y,{force:ee}={}){return typeof K=="function"&&(Y=K,K="lock"),yield n.stateTransaction(k,(ae,...he)=>g(this,null,function*(){if(ae[K]&&!ee)return;yield n.setState(k,{[K]:!0});const me=yield Y.call(k,ae,...he);return yield n.setState(k,{[K]:!1}),me}))}),n.getsMessageQuery=F=>z=>{const G=b(document.location.href),V=i("message");if(V){delete G.message;const k=`${d(document.location.pathname,G)}${document.location.hash}`;window&&window.history&&window.history.replaceState({},document.title,k)}return v(F,h({message:V},z))},n.uuidV4=()=>{const F=window.crypto||window.msCrypto;if(typeof(F==null?void 0:F.randomUUID)=="function")return F.randomUUID();if(F)return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,z=>(z^F.getRandomValues(new Uint8Array(1))[0]&15>>z/4).toString(16));{let z=new Date().getTime(),G=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(V){let k=Math.random()*16;return z>0?(k=(z+k)%16|0,z=Math.floor(z/16)):(k=(G+k)%16|0,G=Math.floor(G/16)),(V==="x"?k:k&3|8).toString(16)})}},n.isStandaloneWebApp=()=>navigator.standalone?!0:window.matchMedia("(display-mode: standalone)").matches,n.disabledIfSSR=()=>typeof window=="undefined"?"disabled":"",n.focusElement=F=>{F.focus&&F.focus(),F.select&&F.select()},n.getRoleOrOwner=(F,z)=>F?F.user_id===z.author_id?"owner":F.role:"byline",n.hexWithOpacity=(F,z)=>{if(!F)return F;F=F.replace("#","");const G=parseInt(F.substring(0,2),16),V=parseInt(F.substring(2,4),16),k=parseInt(F.substring(4,6),16);return`rgba(${G},${V},${k},${z/100})`},n.getSelectTheme=(F,z="#f8f8f8",G="#d8d8d8")=>V=>m(h({},V),{colors:m(h({},V.colors),{primary:F,primary25:n.hexWithOpacity(F,25),primary50:n.hexWithOpacity(F,50),primary75:n.hexWithOpacity(F,75),neutral0:z,neutral20:G})}),n.removeQueryParam=(F,{stripHash:z=!1}={})=>{var G;if(typeof window!="undefined"&&((G=window.history)==null?void 0:G.replaceState)){const V=b(window.location.href);if(!Array.isArray(F))delete V[F];else for(const K of F)delete V[K];const k=`${d(window.location.pathname,V)}${z?"":window.location.hash}`;window.history.replaceState({},document.title,k)}},n.isFullscreen=()=>typeof window=="undefined"?!1:typeof document.webkitCurrentFullScreenElement!="undefined"?document.webkitCurrentFullScreenElement!==null:typeof document.fullscreenElement!="undefined"?document.fullscreenElement!==null:!1,n.goFullscreen=F=>typeof window=="undefined"?!1:F.requestFullScreen?(F.requestFullScreen(),!0):F.webkitRequestFullScreen?(F.webkitRequestFullScreen(),!0):F.mozRequestFullScreen?(F.mozRequestFullScreen(),!0):!1,n.exitFullscreen=()=>{if(!n.isFullscreen())return!1;if(document.exitFullscreen)return document.exitFullscreen(),!0;if(document.webkitExitFullscreen)document.webkitExitFullscreen();else{if(document.mozCancelFullScreen)return document.mozCancelFullScreen(),!0;if(document.msExitFullscreen)return document.msExitFullscreen(),!0}return!1},n.exitPictureInPicture=()=>typeof window=="undefined"||!document.pictureInPictureElement||!document.exitPictureInPicture?!1:(document.exitPictureInPicture(),!0),n.getVideoBlobDuration=(F,...z)=>g(this,[F,...z],function*(G,{timeout:V=5*1e3}={}){const k=document.createElement("video");k.volume=0;const K=Promise.race([new Promise((Y,ee)=>{k.onloadedmetadata=()=>{k.onloadedmetadata=null,k.duration===1/0?(k.currentTime=Number.MAX_SAFE_INTEGER,k.ontimeupdate=()=>{k.ontimeupdate=null,Y(k.duration),k.currentTime=0}):Y(k.duration)},k.onerror=ae=>ee(ae.target.error)}),new Promise((Y,ee)=>{setTimeout(()=>{ee(new Error("Blob duration fetching timed out"))},V)})]);return k.src=typeof G=="string"||G instanceof String?G:window.URL.createObjectURL(G),K}),n.downloadSrc=F=>{const z=document.createElement("a");document.body.appendChild(z),z.href=F,z.target="_blank",z.click(),document.body.removeChild(z)},n.getCurrencyFormattedPledgePlans=(F,{skipFoundingPlan:z=!1}={})=>{if(!(F==null?void 0:F.length))return[];const G=[];for(const V of F)z&&V.is_founding?G.push(h({},V)):V.amount?G.push(m(h({},V),{amount:V.amount})):G.push(h({},V));return G},n.validatePledgePlanValues=(F,z,G,V)=>{if(G<=z)return"Your founding price must be greater than your yearly price";const k=A({value:F,interval:"month",is_founding:!1,currency:V});if(k)return k;const K=A({value:z,interval:"year",is_founding:!1,currency:V});if(K)return K;const Y=A({value:G,interval:"year",is_founding:!0,currency:V});return Y||null},n.decimalToPercentString=F=>{let z=F;return typeof F=="string"&&(z=parseFloat(F)),`${Math.round(z*100)}%`}},function($,n,t){(function(e){var s=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(f,y,M)=>y in f?s(f,y,{enumerable:!0,configurable:!0,writable:!0,value:M}):f[y]=M,m=(f,y)=>{for(var M in y||(y={}))l.call(y,M)&&h(f,M,y[M]);if(c)for(var M of c(y))p.call(y,M)&&h(f,M,y[M]);return f},g=(f,y)=>o(f,a(y));const v=t(459),{Substitutions:O}=t(33),{twitterScreenNames:u}=t(420);n.twitterScreenNames=u;const r="\u2026",i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=["CA","AU","HK","NZ"];n.MAX_PODCAST_FILE_SIZE=350*1024*1024,n.MAX_MEDIA_FILE_SIZE=20*1024*1024*1024,n.MAX_MEDIA_UPLOAD_CHUNK_SIZE=50*1024*1024,n.MAX_FILE_SIZE=700*1024*1024,n.SUBSTACK_PUBLICATION_ID_ON=1,n.SUBSTACK_PUBLICATION_ID_COMPANY=46438,n.SUBSTACK_PUBLICATION_ID_LIBRARYOLD=86696,n.SUBSTACK_PUBLICATION_ID_STORIESOLD=81318,n.SUBSTACK_PUBLICATION_ID_BLOGOLD=87805,n.SUBSTACK_PUBLICATION_ID_BETA=508885,n.SUBSTACK_PUBLICATION_ID_READ=737237,n.SUBSTACK_PUBLICATION_ID_THREADSPILOT=1014268,n.SUBSTACK_PUBLICATION_ID_PRODUCTLAB=1056696,n.SUBSTACK_PUBLICATION_IDS=[n.SUBSTACK_PUBLICATION_ID_ON,n.SUBSTACK_PUBLICATION_ID_COMPANY,n.SUBSTACK_PUBLICATION_ID_LIBRARYOLD,n.SUBSTACK_PUBLICATION_ID_STORIESOLD,n.SUBSTACK_PUBLICATION_ID_BLOGOLD,n.SUBSTACK_PUBLICATION_ID_BETA,n.SUBSTACK_PUBLICATION_ID_READ,n.SUBSTACK_PUBLICATION_ID_THREADSPILOT,n.SUBSTACK_PUBLICATION_ID_PRODUCTLAB],n.GRACE_PERIOD_DAYS=16,n.MANUAL_BILLING_DAYS_UNTIL_DUE=45,n.STRIPE_DAYS_UNTIL_DUE=30,n.GRACE_PERIOD_COUPON_TRIAL_DAYS=0,n.DEFAULT_PROFILE_PAGE_SUBSCRIPTIONS_LIMIT=1e3,n.DEFAULT_PREVIEW_LIMIT=356,n.DEFAULT_PREVIEW_LIMIT_EMAIL=256,n.MIN_MONTH_GAP_BETWEEN_PAUSES=6,n.TRANSPARENT_IMAGE_URL="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n.MISSING_IMAGE_URL="/img/missing-image.png",n.MISSING_IMAGE_HEIGHT=455,n.MISSING_IMAGE_WIDTH=728,n.CONTENT_MODERATION_REASONS=["","illegal","phishing","piracy","porn","spam"].sort(),n.FLAGGED_AS_SPAM_REASONS=[...n.CONTENT_MODERATION_REASONS,"hate","impersonation","plagiarism"].sort(),n.SUBSTACK_POST_MEDIA_BUCKET_NAME=e.env.SUBSTACK_POST_MEDIA_BUCKET_NAME||{development:"substack-post-media-staging",staging:"substack-post-media-staging","zuma-staging":"substack-post-media-staging",prod:"substack-post-media","zuma-prod":"substack-post-media"}[e.env.DD_ENV||"production"],n.SPECIAL_SUBDOMAINS=["cdn","cloudinary","delivery","jobs","mailgun","mail","support","www","callback","api","admin","reader","sublink","random","your","dashboard","open"],n.SECURITY_QUESTIONS=["In what city or town did your parents meet?","What was your first teacher's last name?","What is your earliest memory?","What was the make and model of your first car?","What was the first concert you attended?","Where did you go on your first date?","What was your first favorite band?","What was your first computer or smartphone?","What is your least favorite color?","What was the first video game you beat?","Who was your favorite artist, musician, or celebrity when you were a teenager?"],n.AUDIENCE_ADJECTIVES={everyone:"public",only_free:"free-only",only_paid:"subscribers-only",founding:"founding-only"},n.TERSE_AUDIENCE_ADJECTIVES={everyone:"public",only_free:"free-only",only_paid:"subscriber's",founding:"subscriber's"},n.HOMEPAGE_TYPE_CHANGE_CUTOFF=new Date("2020-01-16"),n.GIFT_LENGTH_MONTHS=1,n.PODCAST_CATEGORIES={Arts:["Books","Design","Fashion & Beauty","Food","Performing Arts","Visual Arts"],Business:["Careers","Entrepreneurship","Investing","Management","Marketing","Non-Profit"],Comedy:["Comedy Interviews","Improv","Stand-Up"],Education:["Courses","How To","Language Learning","Self-Improvement"],Fiction:["Comedy Fiction","Drama","Science Fiction"],Government:[],History:[],"Health & Fitness":["Alternative Health","Fitness","Medicine","Mental Health","Nutrition","Sexuality"],"Kids & Family":["Education for Kids","Parenting","Pets & Animals","Stories for Kids"],Leisure:["Animation & Manga","Automotive","Aviation","Crafts","Games","Hobbies","Home & Garden","Video Games"],Music:["Music Commentary","Music History","Music Interviews"],News:["Business News","Daily News","Entertainment News","News Commentary","Politics","Sports News","Tech News"],"Religion & Spirituality":["Buddhism","Christianity","Hinduism","Islam","Judaism","Religion","Spirituality"],Science:["Astronomy","Chemistry","Earth Sciences","Life Sciences","Mathematics","Natural Sciences","Nature","Physics","Social Sciences"],"Society & Culture":["Documentary","Personal Journals","Philosophy","Places & Travel","Relationships"],Sports:["Baseball","Basketball","Cricket","Fantasy Sports","Football","Golf","Hockey","Rugby","Running","Soccer","Swimming","Tennis","Volleyball","Wilderness","Wrestling"],Technology:[],"True Crime":[],"TV & Film":["After Shows","Film History","Film Interviews","Film Reviews","TV Reviews"]},n.COMMUNITY_PICKS_CATEGORY_NAME="writer favorites",n.TASTEMAKER_CATEGORY_NAME="featured recommenders",n.OLD_PODCAST_CATEGORIES={Arts:["Books","Design","Fashion & Beauty","Food","Literature","Performing Arts","Visual Arts"],Business:["Business News","Careers","Investing","Management & Marketing","Shopping"],Comedy:[],Education:["Educational Technology","Higher Education","K-12","Language Courses","Training"],"Games & Hobbies":["Automotive","Aviation","Hobbies","Other Games","Video Games"],"Government & Organizations":["Local","National","Non-Profit","Regional"],Health:["Alternative Health","Fitness & Nutrition","Self-Help","Sexuality"],"Kids & Family":[],Music:[],"News & Politics":[],"Religion & Spirituality":["Buddhism","Christianity","Hinduism","Islam","Judaism","Other","Spirituality"],"Science & Medicine":["Medicine","Natural Sciences","Social Sciences"],"Society & Culture":["History","Personal Journals","Philosophy","Places & Travel"],"Sports & Recreation":["Amateur","College & High School","Outdoor","Professional"],Technology:["Gadgets","Tech News","Podcasting","Software How-To"],"TV & Film":[]},n.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],n.STRIPE_TAX_ID_TYPES=[{name:"eu_vat",description:"European VAT number"},{name:"au_abn",description:"Australian Business Number (AU ABN)"},{name:"au_arn",description:"Australian Taxation Office Reference Number"},{name:"br_cnpj",description:"Brazilian CNPJ number"},{name:"br_cpf",description:"Brazilian CPF number"},{name:"bg_uic",description:"Bulgaria Unified Identification Code"},{name:"ca_bn",description:"Canadian BN"},{name:"ca_gst_hst",description:"Canadian GST/HST number"},{name:"ca_pst_bc",description:"Canadian PST number (British Columbia)"},{name:"ca_pst_mb",description:"Canadian PST number (Manitoba)"},{name:"ca_pst_sk",description:"Canadian PST number (Saskatchewan)"},{name:"ca_qst",description:"Canadian QST number (Qu\xE9bec)"},{name:"cl_tin",description:"Chilean TIN"},{name:"eu_oss_vat",description:"European One Stop Shop VAT number for non-Union scheme"},{name:"ge_va",description:"Georgian VAT"},{name:"hk_br",description:"Hong Kong BR number"},{name:"hu_tin",description:"Hungary tax number (ad\xF3sz\xE1m)"},{name:"is_vat",description:"Icelandic VAT"},{name:"in_gst",description:"Indian GST number"},{name:"id_npwp",description:"Indonesian NPWP number"},{name:"il_vat",description:"Israel VAT"},{name:"jp_cn",description:"Japanese Corporate Number (*H\u014Djin Bang\u014D*)"},{name:"jp_rn",description:"Japanese Registered Foreign Businesses' Registration Number (*T\u014Droku Kokugai Jigy\u014Dsha no T\u014Droku Bang\u014D*) "},{name:"li_uid",description:"Liechtensteinian UID number"},{name:"my_frp",description:"Malaysian FRP number"},{name:"my_itn",description:"Malaysian ITN C"},{name:"my_sst",description:"Malaysian SST number"},{name:"mx_rfc",description:"Mexican RFC number"},{name:"nz_gst",description:"New Zealand GST number"},{name:"no_vat",description:"Norwegian VAT number"},{name:"ru_inn",description:"Russian INN"},{name:"ru_kpp",description:"Russian KPP"},{name:"sa_vat",description:"Saudi Arabia VAT"},{name:"sg_gst",description:"Singaporean GST"},{name:"sg_uen",description:"Singaporean UEN"},{name:"si_tin",description:"Slovenia tax number (dav\u010Dna \u0161tevilka)"},{name:"za_vat",description:"South African VAT number"},{name:"kr_brn",description:"Korean BRN"},{name:"es_cif",description:"Spanish CIF number"},{name:"ch_vat",description:"Switzerland VAT number"},{name:"tw_vat",description:"Taiwanese VAT"},{name:"th_vat",description:"Thai VAT"},{name:"ua_vat",description:"Ukrainian VAT"},{name:"ae_trn",description:"United Arab Emirates TRN"},{name:"gb_vat",description:"United Kingdom VAT number"},{name:"us_ein",description:"United States EIN"}],n.DEFAULT_THEME_COLORS=["#EA410B","#FF0000","#FD5353","#FF6B00","#FF9900","#00C2FF","#67BDFC","#2096FF","#0068EF","#121BFA","#6B26FF","#786CFF","#9D6FFF","#B599F1","#99A2F1","#FF5CD7","#FF81CD","#EA82FF","#A33ACB","#6C0095","#009B50","#25BD65","#2EE240","#8AE1A2","#45D800","#9A6600","#BAA049","#E8B500","#D10000"],n.NO_PLATFORM_CUSTOMER_CLONE_COUNTRIES=["IN"],n.WEEK_IN_SECONDS=60*60*24*7,n.CENTS_PER_EMAIL=.0064,n.AppError=class extends Error{constructor(y,{status:M=500,userVisible:N=!1,messageHtml:A=null,responseBody:L=null}={}){super(y);this.name=this.constructor.name,this.status=M,this.userVisible=!!L||N||!1,this.messageHtml=A,this.response={body:L||(this.userVisible?A?{errors:[{msg:y,msgHTML:A}]}:{error:y}:{error:""})},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},n.getByLine=(f,{skipMultiContributorCheck:y=!1}={})=>{var M,N;if(f.subdomain==="popularinformation")return"Judd Legum";if(f.subdomain==="whyisthisinteresting")return"Noah & Colin";if(f.subdomain==="informant")return"Nick Martin";if(f.subdomain==="petition"||f.subdomain==="russiandissent"||!y&&((M=f.contributors)==null?void 0:M.length)>1)return null;const A=f.name||f.subdomain,L=[f.author_name,f.email_from_name,(N=f==null?void 0:f.author)==null?void 0:N.name];for(let C of L)if(C&&(C=C.split(/(,|\||\s-|-\s|\bfrom\b|\bat\b)/g)[0].trim(),C&&!C.startsWith(A)&&!A.startsWith(C)&&!C.endsWith(A)&&!A.endsWith(C)))return C;return null},n.getSubscribeText=(f,{now:y=!1,isFreeSubscribed:M=!1,isMobile:N=!1,skipTranslation:A=!1,isPledged:L=!1,pledgesEnabled:C=!1}={})=>{const R=M&&f.plans?n.toSentenceCase(n.getSubscriptionWord(f,N?"upgrade":"upgradeToPaid")):M&&C&&!L?"Pledge your support":n.toSentenceCase(n.getSubscriptionWord(f,"subscribe"));return A?R+(y?" now":""):I(R)+(y?I(" now"):"")},n.getPostEmbedMeta=({date:f,bylines:y,like_count:M,comment_count:N})=>{const A=t(15),L=[];return L.push(A(f).fromNow()),M&&L.push(n.pluralize(M,"like")),N&&L.push(n.pluralize(N,"comment")),y&&y.length&&L.push(n.formatArray(y.map(C=>C.name))),L.join(" \xB7 ")},n.hidePaidPostsFor=["astralcodexten"],n.shouldUseInlineComments=(f,y)=>f.custom_publication_theme_id?!1:!!(["astralcodexten","company","library","on","blog","stories"].includes(f==null?void 0:f.subdomain)||(y==null?void 0:y.type)==="video");const b=(f="")=>f.toUpperCase().replace(/^(THE|A|AN)\s+/,"");n.sortSubscriptions=f=>f.sort((y,M)=>{var N,A;if(!y)return 1;if(!M||y.membership_state==="subscribed"&&M.membership_state!=="subscribed")return-1;if(M.membership_state==="subscribed"&&y.membership_state!=="subscribed")return 1;const L=b((N=y.publication)==null?void 0:N.name),C=b((A=M.publication)==null?void 0:A.name);return L<C?-1:L>C?1:0}),n.subscriptionTypeText=f=>{if(f.expiry&&new Date(f.expiry)>new Date)switch(f.type){case"gift":return"Gifted Subscription";case"comp":return"Comped Subscription";default:return"Paid Subscriber"}else return!f.email_disabled||f.email_settings&&Object.values(f.email_settings||{}).some(y=>y==="individual")?"Free Subscriber":f.digest_enabled||f.email_settings&&Object.values(f.email_settings||{}).some(y=>y==="digest")?"Follows in Digests":"Emails Disabled"},n.canReplyToPost=({post:f,user:y})=>!!(f&&y&&y.has_publication&&!y.is_admin&&!y.is_contributor&&f.slug!=="coming-soon"),n.NO_REPLY_EMAIL="no-reply@substack.com",n.stripInvalidBytes=f=>{if(!f||typeof f!="string")return f;try{return encodeURIComponent(f),f}catch(y){}return f.replace(/[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,y=>y.length>1?y:"")},n.truncateToValidBytes=f=>{for(;;)try{return encodeURIComponent(f),f}catch(y){f=f.substring(0,f.length-1)}},n.truncateText=(f,y,{words:M=null,ellipsis:N=r,extension:A=null}={})=>{if(!f)return f;let L=!1;if(M){const C=new RegExp(`^(\\w+\\W+){${M-1}}\\w+`).exec(f);C&&(L=!0,f=C[0])}return y&&f.length>y&&(L=!0,f=f.substring(0,y-N.length)),L&&(f=n.truncateToValidBytes(f),f+=N,A&&(f+=A)),f},n.truncateWords=(f,y,{ellipsis:M=r}={})=>{if(f&&f.length>y){const N=f.split(/\s+/),A=[];let L=0;for(;L<=y;){const C=N.shift();if(!C||L+C.length>y)break;A.push(C),L+=C.length+1}return n.formatEllipsis(A.join(" "),M)}return f};const w=/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-./:;<=>?@[\]^_`{|}~]+$/g;n.formatEllipsis=(f,y=r)=>`${f.replace(w,"")}${y}`,n.endsWithPunctuation=f=>/[!.?](?:\s+)?$/.test(f);const E=new Set([" ","-"]);n.simpleBalanceText=(f,{maxCharsPerLine:y=55,maxLines:M=2,preferWide:N=!1}={})=>{if(f.length<=y)return[f];const A=y*M;if(f.length>A){let Z=A;for(;Z>=0&&f.charAt(Z)!==" ";)Z--;f=n.formatEllipsis(f.slice(0,Z))}const L=N?y:Math.floor(f.length/M);let C=-1,R=0;const U=[];for(;R+L<f.length-1;){for(R=R+L;R<=f.length-1&&!E.has(f.charAt(R));)R++;const Z=f.charAt(R)==="-";U.push(f.slice(C+1,Z?R+1:R)),C=R}return R<f.length-1&&U.push(f.slice(C+1)),U};const S=f=>/[A-Z]/.test(f),P=f=>/[\s-]/.test(f);n.stringCost=(f,y)=>{let M=0;for(let N=0;N<f.length;N+=1){const A=f[N];S(A)?M+=y:M+=1}return M},n.longestSetOfWordsBelowCost=(f,y,M)=>{const N=[];let A=0,L=!1;for(let U=0;U<f.length;U+=1){const Z=f[U];if(P(Z)){L=!0;continue}else L&&(N.push(f.slice(A,U)),A=U,L=!1)}if(A<f.length&&N.push(f.slice(A)),!N.length)return"";const C=[N[0]];let R=n.stringCost(N[0],y);for(const U of N.slice(1))if(R+=n.stringCost(U,y),R<=M)C.push(U);else break;return C.join("")},n.balanceTextWithCharacterWidths=(f,{maxCostPerLine:y=55,maxLines:M=2,capitalCost:N=1.2}={})=>{const A=f;if(n.stringCost(f)<=y)return[f];const C=[];for(let R=0;R<M;R+=1){const U=n.longestSetOfWordsBelowCost(f,N,y);if(U)C.push(U),f=f.slice(U.length);else break}return C.reduce((R,U)=>R+U.length,0)<A.length&&(C[C.length-1]=n.formatEllipsis(C[C.length-1].slice(0,C[C.length-1].length-1))),C},n.SUPPORTED_CURRENCIES=["usd","eur","gbp","cad","aud","nzd","brl","mxn","inr"],n.pubCurrency=f=>{var y,M;return((M=(y=f.draft_plans)==null?void 0:y[0])==null?void 0:M.currency)||"usd"},n.isZeroDecimalCurrency=f=>["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","UGX","VND","VUV","XAF","XOF","XPF"].includes(f.toUpperCase()),n.pubUsesZeroDecimalCurrency=f=>{const y=n.pubCurrency(f);return n.isZeroDecimalCurrency(y)},n.currencySymbol=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:f,minimumFractionDigits:0,maximumFractionDigits:0}).format(0).replace(/\d/,"").trim(),n.satoshiToBitcoin=f=>f/1e8,n.centsToPriceString=(f,y,{forceDecimals:M=!1}={})=>{let A=new Intl.NumberFormat("en-US",{style:"currency",currency:y,minimumFractionDigits:M||f%100?2:0,maximumFractionDigits:y==="btc"?8:2}).format(y==="btc"?n.satoshiToBitcoin(f):n.isZeroDecimalCurrency(y)?f:f/100);return y==="usd"&&typeof window!="undefined"&&window._preloads&&window._preloads.country&&d.includes(window._preloads.country)&&(A=`US${A}`),A},n.centsToDollarString=f=>new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(f/100),n.dollarFormatter=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}),n.dollarStringToCents=f=>{if(!f)return null;if(typeof f!="string")throw new Error("Bad type for dollar string");const y=f.replace(/[^0-9.]/g,"");return y?Math.round(Number(y)*100):null},n.getInitalPayment=(f,{quantity:y=1,coupon:M=null,noTrial:N=!1,trial_end_override:A=null}={})=>{if(!N&&(f.trial_period_days||M&&M.trial_period_days||A&&A>Date.now()/1e3+120))return 0;let L=f.amount*y;return M&&M.percent_off?L=Math.round(L*(1-(M.percent_off_precise||M.percent_off)/100)):M&&M.amount_off&&(L=Math.max(0,L-M.amount_off)),L},n.getGiftValueText=(f,{interval:y="month",interval_count:M=n.GIFT_LENGTH_MONTHS,multiplier:N=1,min:A=0}={})=>{let L,C,R;for(const z of f){if(!R)R=z.currency;else if(R!=z.currency)continue;z.interval=="month"?(!L||z.amount<L)&&(L=z.amount):z.interval=="year"&&(!C||z.amount<C)&&(C=z.amount)}let U=L;if(!U&&C&&(U=C/12),!U)return null;let Z;switch(y){case"month":Z=U;break;case"day":Z=U/30;break;case"year":Z=C||U*12;break;default:throw new Error(`bad interval: ${y}`)}let F=Z*M*N;return F<A?null:(F=Math.floor(F/100)*100,n.centsToPriceString(F,R))},n.planBasePricing=(f,{amount:y,interval:M=""}={})=>{let N=n.centsToPriceString(y!=null?y:f.amount,f.currency);return f.interval!=="forever"&&(f.interval_count===1?N+=`/${M||f.interval}`:N+=`/${f.interval_count==3?"three ":""}${n.pluralize(f.interval_count,f.interval,{just_word:f.interval_count==3})}`),N},n.secondsToLargestUnit=(f,{secondsCutoff:y,minutesCutoff:M,hoursCutoff:N,daysCutoff:A,weeksCutoff:L,long:C,noNumber:R,noWord:U,lessThanMinute:Z}={})=>{let F,z,G;return f=Math.round(f),f<(y||60)?(F=f,z=C?"second":"sec"):f<(M||60*60)?(F=f/60,z=C?"minute":"min",Z&&(G=!0)):f<(N||60*60*24)?(F=f/60/60,z=C?"hour":"hr"):f<(A||60*60*24*7)?(F=f/60/60/24,z="day"):f<(L||60*60*24*365.25)?(F=f/60/60/24/7,z=C?"week":"wk"):(F=f/60/60/24/365.25,z=C?"year":"yr"),F=Math.round(F),[G&&"less than",!R&&(U?F:F.toFixed(0)),!U&&(C?n.pluralize(F,z,{just_word:!0}):z)].filter(Boolean).join(" ")},n.secondsToHHMMSS=f=>{const y=Math.floor(f/60/60),M=Math.floor(f/60)%60,N=Math.floor(f%60);return`${(y?`${y}:`:"")+(y?`0${M}`.slice(-2):M)}:${`0${N}`.slice(-2)}`},n.validateHex=f=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(f),n.normalizeHex=f=>(f[0]!=="#"&&(f=`#${f}`),f=f.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(y,M,N,A)=>M+M+N+N+A+A),f),n.hexToHSV=f=>{f=n.normalizeHex(f);function y(G,V){typeof G=="string"&&G.indexOf(".")!=-1&&parseFloat(G)===1&&(G="100%");const k=typeof G=="string"&&G.indexOf("%")!=-1;return G=Math.min(V,Math.max(0,parseFloat(G))),k&&(G=parseInt(G*V,10)/100),Math.abs(G-V)<1e-6?1:G%V/parseFloat(V)}const M=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);let N=parseInt(M[1],16),A=parseInt(M[2],16),L=parseInt(M[3],16);N=y(N,255),A=y(A,255),L=y(L,255);const C=Math.max(N,A,L),R=Math.min(N,A,L);let U;const Z=C,F=C-R,z=C===0?0:F/C;if(C==R)U=0;else{switch(C){case N:U=(A-L)/F+(A<L?6:0);break;case A:U=(L-N)/F+2;break;case L:U=(N-A)/F+4;break}U/=6}return{h:U,s:z,v:Z}},n.hexToRgb=f=>{const y=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n.normalizeHex(f));return y?{r:parseInt(y[1],16),g:parseInt(y[2],16),b:parseInt(y[3],16)}:null},n.rgbToHex=({r:f,g:y,b:M})=>`#${f.toString(16).padStart(2,"0")}${y.toString(16).padStart(2,"0")}${M.toString(16).padStart(2,"0")}`,n.validateColor=f=>{const y=n.hexToHSV(f);if(y.h>.11&&y.h<.56)if(y.s>.25&&y.v>.5){if(y.s<.6&&y.v>.8)return!0;if(y.s>.6)return!0}else return!1;else return y.s>.25&&y.v>.5},n.colorLightness=(f,y)=>{const M=n.hexToRgb(f);return M?(M.r=Math.max(0,Math.min(255,Math.round(M.r*y))),M.g=Math.max(0,Math.min(255,Math.round(M.g*y))),M.b=Math.max(0,Math.min(255,Math.round(M.b*y))),n.rgbToHex(M)):f},n.colorLuma=f=>{let{r:y,g:M,b:N}=n.hexToRgb(f);return y=y/255,M=M/255,N=N/255,y=y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4),M=M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4),N=N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4),.2126*y+.7152*M+.0722*N},n.truncAndFormatArray=(f,y,{name:M=R=>R,restWord:N="other",noNames:A="people",pluralizeRest:L=!0,showRestCount:C=!0}={})=>{const R=f.map(M).filter(Boolean).slice(0,y);if(R.length===0)R.push(n.pluralize(f.length,A));else if(R.length<f.length){const U=f.length-R.length;R.push(`${C?U:""} ${N}${U>1&&L?"s":""}`)}return n.formatArray(R)},n.formatArray=f=>{let y="";return f.length===1?y=f[0]:f.length===2?y=f.join(" and "):f.length>2&&(y=`${f.slice(0,-1).join(", ")}, and ${f.slice(-1)}`),y},n.truncateNumber=(f,{minSignificantDigits:y=1}={})=>{if(f<1e3)return f;let M;Math.round(f/1e3)<1e3?(f/=1e3,M="k"):Math.round(f/1e6)<1e3?(f/=1e6,M="m"):Math.round(f/1e9)<1e3?(f/=1e9,M="b"):(f/=1e12,M="t");const N=Math.max(y-1-Math.floor(Math.log10(f)),0);return f=Math.round(f*Math.pow(10,N))/Math.pow(10,N),`${f}${M}`},n.baschezToCategory=f=>Math.max(0,Math.min(5,Math.floor(Math.log(Math.max(f,1))/Math.LN10+1e-9))-1),n.baschezScoreToEmojis=f=>"\u{1F525}".repeat(n.baschezToCategory(f)),n.joinLines=(f,y,M)=>{const N=(f||"").trim().split(/[\s\r]*\n[\s\r]*/g).map(L=>L.trim()).filter(L=>L),A=[];for(;N.length>0;){const L=N.shift(),C=A[A.length-1];C&&C.length<M?A[A.length-1]+=y+L:A.push(L)}return A.join(`
`)},n.randomString=()=>Math.random().toString(36).replace(/^0\./,""),n.toTitleCase=function(f){return f.trim().split(/\s+/).filter(Boolean).map(y=>y[0].toUpperCase()+y.substr(1).toLowerCase()).join(" ")},n.toSentenceCase=function(f,y){const M=y?f.substr(1).toLowerCase():f.substr(1);return f[0].toUpperCase()+M},n.numberToOrdinal=f=>{const y=["th","st","nd","rd"],M=f%100;return f+(y[(M-20)%10]||y[M]||y[0])},n.numberToString=function(f,y=0){return typeof f=="string"&&(f=Number(f.replace(/,/g,""))),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:y}).format(f)},n.numberToOrderOfMagnitude=f=>Math.pow(10,Math.floor(Math.log10(f)))||0,n.numberToOrderOfMagnitudeString=f=>f<100?"tens":f<1e3?"hundreds":f<1e4?"thousands":f<1e5?"tens of thousands":f<1e6?"hundreds of thousands":f<1e7?"millions":f<1e8?"tens of millions":f<1e9?"hundreds of millions":f<1e10?"billions":f<1e11?"tens of billions":f<1e12?"hundreds of billions":f<1e13?"trillions":f<1e14?"tens of trillions":f<1e15?"hundreds of trillions":"gagillions",n.numberToOrderOfMagnitudeShortString=f=>f<100?"10+":f<1e3?"100+":f<1e4?"1K+":f<1e5?"10K+":f<1e6?"100K+":f<1e7?"1M+":f<1e8?"10M+":f<1e9?"100M+":f<1e10?"1B+":f<1e11?"10B+":f<1e12?"100B+":f<1e13?"1T+":f<1e14?"10T+":f<1e15?"100T+":"gagillions",n.numberToRoughRankingString=function(f){return f<=10?`#${f}`:f<=25?"Top 25":f<=50?"Top 50":f<=100?"Top 100":""},n.coverPageFreeSubscriberCount=f=>{const y=1e6,M=1e5;if(f<1e3)return null;let N=Math.floor(f/1e3)*1e3;return N>=y&&(N=Math.floor(f/M)*M),`Over ${n.numberToString(N)} subscribers`},n.formatPercentForDisplay=f=>f<1?"< 1%":`${f}%`,n.decimalToPercent=(f,{rounded:y=!1,display:M=!1,decimalPlaces:N=-1}={})=>{let A=parseFloat(f)*100;return N>=0&&(A=A.toFixed(N)),y&&(A=Math.floor(A)),M&&(A=n.formatPercentForDisplay(A)),A},n.getScheduledAt=function(f){var y;if(((y=f==null?void 0:f.postSchedules)==null?void 0:y.length)&&f.postSchedules[0].trigger_at)return new Date(f.postSchedules[0].trigger_at);if(!(!f||!f.scheduled_at||f.email_sent_at&&f.should_send_email))return new Date(Math.max(+new Date(f.scheduled_at),Date.now()))},n.spellOutNumber=function(f){return f===0?"zero":f===1?"one":f===2?"two":f===3?"three":f===4?"four":f===5?"five":f===6?"six":f===7?"seven":f===8?"eight":f===9?"nine":f===10?"ten":f===11?"eleven":f===12?"twelve":n.numberToString(f)},n.pluralize=(f,y,{zero_fallback:M="",just_word:N}={})=>{let A,L;const C=y.lastIndexOf(" ")+1,R=y.substr(C),U=y.substr(0,C);return["person","people"].includes(R)?(A=`${U}person`,L=`${U}people`):["reply","replies"].includes(R)?(A=`${U}reply`,L=`${U}replies`):["entry","entries"].includes(R)?(A=`${U}entry`,L=`${U}entries`):["match","matches"].includes(R)?(A=`${U}match`,L=`${U}matches`):(A=y,L=`${y}s`),N||(A=`${n.numberToString(f)} ${A}`,L=`${n.numberToString(f)} ${L}`),!f&&M?M:f==1?A:L},n.possessive=f=>`${f}\u2019${f[f.length-1]==="s"?"":"s"}`,n.escapeNewlines=f=>f.replace(/\n/g,"\\n"),n.objectMap=(f,y,M)=>{const N={};for(const A in f)N[A]=y.call(M,f[A],A,f);return N},n.deep_equals=(f,y)=>{if(isNaN(f))return isNaN(y);if(f===null)return y===null;switch(typeof object){case"undefined":case"boolean":case"number":case"string":return f===y}const M=Object.keys(f).sort(),N=Object.keys(y).sort();if(M.length!==N.length)return!1;for(let A=0;A<M.length;A+=1){const L=M[A];if(L!==N[A]||!n.deep_equals(f[L],y[L]))return!1}return!0},n.toMap=(f,y="id")=>{const M={};for(const N of f)typeof y=="function"?M[y(N)]=N:M[N[y]]=N;return M},n.splitArray=(f,y)=>{const M=[],N=[];for(const A of f)y(A)?M.push(A):N.push(A);return[M,N]},n.flat=(f,y=1)=>{const M=[];function N(A,L){for(const C of A)Array.isArray(C)&&L>0?N(C,L-1):M.push(C)}return N(f,y),M},n.group_by=(f,y,M)=>{if(typeof y=="string"){const N=y.split(".");y=A=>N.reduce((L,C)=>L[C],A)}return[].reduce.call(f,(N,A,L)=>{const C=y.call(M,A,L,f),R=N.get(C);return R?R.push(A):N.set(C,[A]),N},new Map)},n.commentsEnabledForPost=({publication:f,post:y})=>["adhoc_email","page"].includes(y==null?void 0:y.type)?!1:f.community_enabled&&y&&y.write_comment_permissions!=="none",n.showCommentsOnPost=({publication:f,post:y})=>(y==null?void 0:y.type)==="adhoc_email"||(y==null?void 0:y.slug)==="coming-soon"?!1:y&&y.comment_count>0||n.commentsEnabledForPost({publication:f,post:y}),n.canSeeCommenterEmails=f=>f&&f.is_contributor,n.canSeeComments=(f,y,{bypassContentAccessCheck:M=!1}={})=>{const{userHasFullAccessToPost:N}=t(58);return f&&y.publishedBylines&&y.publishedBylines.find(A=>A.id===f.id)?!0:new Date(y.post_date)<new Date("2018-11-08T19:00:00.000Z")?f&&(f.is_subscribed||f.is_contributor):M||N(f,y)},n.areCommentsLocked=f=>f.type==="thread"&&f.write_comment_permissions==="none",n.canPostComments=(f,y,M)=>{if(f&&y.publishedBylines&&y.publishedBylines.find(N=>N.id===f.id))return!0;if(f&&f.is_contributor)return!0;switch(y.write_comment_permissions||M.default_write_comment_permissions){case"everyone":return!0;case"none":return!1;case"only_paid":return f&&f.is_subscribed}return!1},n.couldPostCommentsIfSubscribed=(f,y,M)=>n.canPostComments(g(m({},f),{is_subscribed:!0}),y,M),n.canEditComment=(f,y)=>y&&f&&f.id===y.user_id,n.canDeleteComment=(f,y,{pub:M,post:N,parentComments:A})=>{var L;if(!f||!y)return!1;if(f.is_contributor||f.id===y.user_id)return!0;if(y.publication_id&&y.post_id){if(n.canDeletePost(f,M,N))return!0}else{const C=Number((L=y.ancestor_path)==null?void 0:L.split(".").filter(Boolean)[0]),R=C&&(A==null?void 0:A.find(U=>(U==null?void 0:U.id)===C));if(f.id===(R==null?void 0:R.user_id))return!0}return!1},n.canDeletePost=(f,y,M)=>f?!!(f.is_contributor||f.id===(y==null?void 0:y.author_id)||(y==null?void 0:y.contributors.find(N=>N.user_id===f.id&&["admin","contributor"].includes(N.role)))):!1,n.canReportComment=(f,y)=>!(!f||!y||f.id===y.user_id),n.defaultAudienceForPub=(f,{type:y,coupon:M}={})=>!f.plans||y==="page"?"everyone":M?"only_free":"only_paid",n.validCommentLevels=(f,y,M)=>{if(y==="thread")switch(f){case"only_paid":return["only_paid"];case"founding":return["only_paid"];case"everyone":return["everyone"];default:return["everyone"]}else switch(f){case"only_paid":return["only_paid","none"];case"founding":return["only_paid","none"];case"everyone":return M?["only_paid","everyone","none"]:["everyone","none"];default:return["none"]}},n.isValidCommentLevel=(f,y,M,N)=>n.validCommentLevels(y,M,N).includes(f),n.defaultCommentLevelForPub=(f,y,M,N)=>n.isValidCommentLevel(M.default_write_comment_permissions,f,y,N)?M.default_write_comment_permissions:n.validCommentLevels(f,y,N)[0],n.defaultSendEmailForPub=(f,y,M)=>y==="page"?!1:M==="only_free"?!0:Boolean(f.default_post_publish_send_email),n.getTrialEndOverride=(f,y,M)=>y&&y.interval==="forever"?0:Math.max(0,...[f.trial_end_override>Date.now()/1e3?f.trial_end_override:0,y&&y.trial_period_days&&Math.round((Date.now()+y.trial_period_days*24*60*60*1e3)/1e3),M&&M.trial_period_days&&Math.round((Date.now()+M.trial_period_days*24*60*60*1e3)/1e3)].filter(N=>N)),n.guessFirstName=function(f,{prependSpace:y=!1}={}){return f?(y?" ":"")+f.trim().split(/\s+/g)[0]:""},n.guessLastName=function(f){return f?f.trim().split(/\s+/g).slice(1).slice(-1)[0]:""},n.get_month_name=f=>n.MONTH_NAMES[new Date(f).getMonth()],n.oxfordComma=(f,{noBreakSpace:y}={})=>{const M=y?"\xA0":" ";let N=[];if(f.length==1)N=[f[0]];else if(f.length==2)N=[f[0],`${M}and${M}`,f[1]];else if(f.length>=3)for(let A=0;A<f.length;A++)N.push(f[A]),A<f.length-2?N.push(`,${M}`):A===f.length-2&&N.push(`,${M}and${M}`);return N.toString=()=>N.join(""),N},n.mode=f=>{const y=new Map;for(const M of f){let N=y.get(M);N=(N||0)+1,y.set(M,N)}return Array.from(y).sort((M,N)=>N[1]-M[1])[0][0]},n.getPostCtaText=f=>f.type==="thread"?"View thread":f.type==="podcast"?"Listen":"Read",n.getPostCtaPresentParticiple=(f,{isFinalWord:y}={})=>f==="podcast"?`listening${y?"":" to"}`:f==="video"?"watching":"reading",n.getPrintedPostType=f=>f==="newsletter"?"post":f==="podcast"?"episode":f==="adhoc_email"?"email":f,n.getRestackEmailSubject=f=>`${n.truncateText(f.title||"Untitled post",115)}`,n.shouldHidePostFromArchive=f=>f.publication_id===10475&&f.section_id===18994,n.getBylineUsers=(f,{isDraft:y=!1}={})=>f?((y?f.draftBylines:f.publishedBylines)||[]).filter(N=>N.name):[],n.getPrintedByline=(f,y,{isDraft:M=!1}={})=>{const N=n.getBylineUsers(y,{isDraft:M});return N.length>0?n.formatArray(N.map(A=>A.name)):null},n.isUUID=f=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(f),n.toMillis=f=>typeof f=="string"?v(f)||0:typeof f=="number"?f:0,n.transformDocumentLink=f=>{const y=M=>new RegExp(`^.*${M}`);if(f){if(f.includes(O.CHECKOUT_URL))return f.replace(y(O.CHECKOUT_URL),"/subscribe?");if(f.includes(O.FOUNDING_CHECKOUT_URL))return f.replace(y(O.FOUNDING_CHECKOUT_URL),"/subscribe?plan=founding&");if(f.includes(O.REFERRAL_URL))return f.replace(y(O.REFERRAL_URL),"/?showWelcome=true");if(f.includes(O.UNSUBSCRIBE_URL))return f.replace(y(O.UNSUBSCRIBE_URL),"/account?");if(f.includes(O.ONE_CLICK_UNSUBSCRIBE_URL))return f.replace(y(O.ONE_CLICK_UNSUBSCRIBE_URL),"/account?");if(/^.*%%.*%%/.test(f))return null}else return f;return f},n.handleDocumentLinkClick=f=>{if(f=n.transformDocumentLink(f),f){const y=window.open(f,"_blank");y.focus&&y.focus()}},n.isNotMainEntry=f=>{if(!f)return!0;const y=document.location&&document.location.pathname||"";return["publish","account"].includes(y.split("/")[1])},n.formatBytes=(f,y=2)=>{if(f===0)return"0 Bytes";const M=1024,N=y<0?0:y,A=Math.floor(Math.log(f)/Math.log(M));return`${parseFloat((f/Math.pow(M,A)).toFixed(N))} ${i[A]}`},n.formattedBytesToNumber=(f="")=>{if(!f)return 0;const[y,M]=f.split(" "),N=i.indexOf(M);return N<0?0:y*Math.pow(1024,N)},n.isSearchEngineCrawlerQuick=f=>/Googlebot/i.test(f||"")?"Google":/bingbot/i.test(f||"")||/BingPreview/i.test(f||"")?"Bing":/Slurp/i.test(f||"")?"Yahoo":/DuckDuckBot/i.test(f||"")?"DDG":/Baiduspider/i.test(f||"")?"Baidu":!1,n.anonymousName=(f,y,M,N)=>f.name?f.name:(M&&M.author_id===N.id||y&&y.publishedBylines&&y.publishedBylines.find(A=>A.id===N.id))&&f.email||"Someone",n.postSocialDescription=(f,y)=>f&&f.description||y.hero_text||`Get ${y.name} in your inbox`,n.SUBSCRIPTION_WORDS=[{pubs:["thebulwark"],subscription:"membership",donateItem:"membership",subscriber:"member",subscribe:"join",subscribeTo:"join",upgrade:"join",upgradeTo:"join",upgradeToPaid:"join",upgradeSubscriptionTo:"upgrade your membership to"},{pubs:["georgesaunders"],donateItem:"scholarship"}];const D={subscription:"subscription",donateItem:"subscription",subscriber:"subscriber",subscribe:"subscribe",subscribeTo:"subscribe to",upgrade:"upgrade",upgradeTo:"upgrade to",upgradeToPaid:"upgrade to paid",upgradeSubscriptionTo:"upgrade your subscription to"};n.pubsWithCustomSubscriptionWords=n.SUBSCRIPTION_WORDS.flatMap(f=>f.pubs),n.getSubscriptionWord=(f,y)=>{const M=n.SUBSCRIPTION_WORDS.find(A=>{var L;return A.pubs.includes(((L=f==null?void 0:f.parent_publication)==null?void 0:L.subdomain)||(f==null?void 0:f.subdomain))});let N=M&&M[y];if(!N&&(N=D[y],!N))throw new Error(`${y} is not a valid subscription word`);return N},n.getSuperscriptNumberString=f=>{const y={0:8304,1:185,2:178,3:179,4:8308,5:8309,6:8310,7:8311,8:8312,9:8313};return String.fromCodePoint(...Array.from(`${f}`).map(M=>y[M]))},n.foundingMemberDescription=f=>{var y,M;return(M=(y=f==null?void 0:f.plans)==null?void 0:y.find(N=>{var A;return(A=N.metadata)==null?void 0:A.founding}))==null?void 0:M.metadata.short_description},n.getOpennodePaymentUrl=f=>`https://checkout.opennode.com/${f}`,n.numberToHumanFileSize=(f=0)=>{const y=f===0?0:Math.floor(Math.log(f)/Math.log(1024));return`${+(f/Math.pow(1024,y)).toPrecision(3)}${["B","KB","MB","GB","TB"][y]}`},n.getReadableAttribution=f=>{if(!f)return null;const y="Substack Network",M={"blog.substack.com":y,"library.substack.com":y,"on.substack.com":y,"post-end-cta":"Post Footer CTA","stories.substack.com":y,"substack-app":y,"substack-boost":y,"substack-categories-discovery":y,"substack-categories-discovery-search":y,"substack-comment-links":y,"substack-cross-posts":y,"substack-feed-item":y,"substack-mentions":y,"substack-notes":y,"substack-onboarding-discovery":y,"substack-post-embeds":y,"substack-post-reply-comment":y,"substack-presubscribe":y,"substack-publication-embeds":y,"substack-reader-discovery":y,"substack-reader-profile-discovery":y,"substack-reader-shared":"Reader sharing","substack-recommendation-email":y,"substack-referral":y,"substack-signup-flow":y,"substack-twitter-link":y,"substack-twitter-suggest":y,"substack-xp-post-template":y,"substack-xp-read-next":y,"substack.com":y,"t.co":"Twitter","www.substack.com":y,external:"external form / api","googleads.g.doubleclick.net":"Google","score-upsell":"Boost upsell to engaged subscribers"}[f];return M||(/(\b|\.)facebook\./.test(f)?"Facebook":/(\b|\.)instagram\./.test(f)?"Instagram":/(\b|\.)linkedin\./.test(f)?"LinkedIn":/(\b|\.)youtube\./.test(f)?"YouTube":/(\b|\.)duckduckgo\./.test(f)?"DuckDuckGo":/(\b|\.)medium\./.test(f)?"Medium":/(\b|\.)reddit\./.test(f)?"Reddit":/(\b|\.)bing\./.test(f)?"Bing":/(\b|\.)google\./.test(f)?"Google":(f==null?void 0:f.includes("."))?f:n.toTitleCase(f.replace(/-/g," ")))},n.isProbablyEmail=f=>/^\S+@\S+\.\S+$/.test(f),n.sanitizeInlineText=f=>(f||"").replace(/\s+/g," "),n.PUBLICATION_TIER_DESCRIPTIONS={"-2":{short:"Deleted - Flagged as spam",long:"This publication is deleted and every page will show a flagged error"},"-1":{short:"Noindexed - In moderation queue",long:"This publication is temporarily not available to search engines because it is pending moderation, where it will be approved or deleted"},0:{short:"Noindexed - New Pub",long:'This publication is temporarily not available to search engines because the author needs to create a new post other than "coming-soon"'},1:{short:"Available",long:"This publication is available to search engines"},2:{short:"Available w/priority",long:"This publication is available to search engines and is given priority SEO treatment"}},n.paymentPeriodToPlan=f=>f?f<40*24*60*60?"monthly":f<94*24*60*60?"quarterly":f<186*24*60*60?"semiannual":f<400*24*60*60?"annual":f>45*24*60*60?"lifetime":"other":"free",n.isPinnable=f=>f&&(f.homepage_type==="newspaper"||f.homepage_type==="magaziney"),n.MAX_BYLINES=35,n.videoPlayerDimensions=(f,{isStatic:y}={})=>{let M,N;return f.width>=f.height*(960/540)?(M=y?550:960,N=Math.round(M*(f.height/f.width))):f.width>=f.height?(M=y?550:728,N=Math.round(M*(f.height/f.width))):M=N=y?550:728,{height:N,width:M}},n.setDateToMidnightPST=f=>{const y=t(15),M=y(f);return y.utc([M.year(),M.month(),M.date(),8,0,0]).toDate()},n.getNext5HoursAfterMidnight=({now:f}={})=>{const y=t(15);f||(f=y());let M=f.utc().startOf("day").add(5,"hour");return M.isBefore(f)&&(M=M.utc().add(1,"day")),M},n.formatPodcastDuration=f=>{const y=Math.round(f/60),M=Math.floor(y/60),N=y%60;return`${M?`${M}HR `:""}${N}M`};function W(f){const y=f.toLowerCase()[0];return["a","e","i","o","u"].includes(y)}function B(f){return f.toLowerCase().startsWith("uni watch")?"a":W(f)?"an":"a"}n.getWithIndefiniteArticle=f=>`${B(f)} ${f}`,n.hashString=f=>f.split("").reduce((y,M)=>(y<<5)-y+M.charCodeAt(0)|0,0),n.kFormatter=f=>Math.abs(f)>9999?`${Math.sign(f)*(Math.abs(f)/1e3).toFixed(1)}K`:(Math.sign(f)*Math.abs(f)).toString(),n.getReaderRecommendationEmailSubject=({recommendedPubs:f})=>{let y=null;for(const M of f){for(const N of M.recommendations)if(N.hasOwnProperty("blurb")&&N.blurb){y=`${N.name} recommended ${M.name}`;break}if(y)break}return y!=null?y:"Recommendations from your Substacks"},n.getPlanTitle=f=>f.metadata.short_description?f.metadata.short_description:f.interval==="year"?"Annual":f.interval==="forever"?"Founding Membership":f.interval==="month"&&f.interval_count===3?"Quarterly":f.interval==="month"&&f.interval_count===6?"Semiannually":`${n.toTitleCase(f.interval)}ly`,n.textLengthAlphaNumericMinimumValidator=({minLength:f,maxLength:y,minAlphaNumeric:M}={})=>N=>{if(!N)return"Missing input";if(f&&N.length<f)return`Must be at least ${f} characters long`;if(y&&N.length>y)return`Must be at most ${y} characters long`;const A=/\P{P}|`/gu,L=N.match(A);if(!L||(L==null?void 0:L.length)<(M!=null?M:f))return`Must contain at least ${M!=null?M:f} non-punctuation characters`;const C=["`"];let R=0;return L.forEach(U=>{C.includes(U)&&(R+=1)}),L.length-R<(M!=null?M:f)?`Must contain at least ${M!=null?M:f} non-punctuation characters`:null}}).call(this,t(169))},function($,n,t){"use strict";t.d(n,"b",function(){return O}),t.d(n,"a",function(){return u});var e=t(0),s=t(6),o=t.n(s),a={reset:"frontend-pencraft-Text-module__reset--20JLV","align-left":"frontend-pencraft-Text-module__align-left--1CeQx","align-center":"frontend-pencraft-Text-module__align-center--21f80","align-right":"frontend-pencraft-Text-module__align-right--2aSHI","size-10":"frontend-pencraft-Text-module__size-10--1IqRx","size-12":"frontend-pencraft-Text-module__size-12--2onFT","size-13":"frontend-pencraft-Text-module__size-13--21fY0","size-14":"frontend-pencraft-Text-module__size-14--1PYz8","size-16":"frontend-pencraft-Text-module__size-16--yeezN","size-20":"frontend-pencraft-Text-module__size-20--31m1J","size-24":"frontend-pencraft-Text-module__size-24--1NIKc","size-28":"frontend-pencraft-Text-module__size-28--iXo1C","size-2":"frontend-pencraft-Text-module__size-2--2gpu6","size-32":"frontend-pencraft-Text-module__size-32--1nfrH","size-36":"frontend-pencraft-Text-module__size-36--2NkMm","line-height-16":"frontend-pencraft-Text-module__line-height-16--39OeY","line-height-18":"frontend-pencraft-Text-module__line-height-18--huBJO","line-height-20":"frontend-pencraft-Text-module__line-height-20--1soeQ","line-height-22":"frontend-pencraft-Text-module__line-height-22--2MbqA","line-height-24":"frontend-pencraft-Text-module__line-height-24--ePKm2","line-height-28":"frontend-pencraft-Text-module__line-height-28--2mTiH","line-height-30":"frontend-pencraft-Text-module__line-height-30--2cOiC","line-height-32":"frontend-pencraft-Text-module__line-height-32--2t1aw","line-height-40":"frontend-pencraft-Text-module__line-height-40--1FAWP","line-height-44":"frontend-pencraft-Text-module__line-height-44--28J1h","weight-light":"frontend-pencraft-Text-module__weight-light--j6qQW","weight-normal":"frontend-pencraft-Text-module__weight-normal--mEmBf","weight-medium":"frontend-pencraft-Text-module__weight-medium--aTbx5","weight-semibold":"frontend-pencraft-Text-module__weight-semibold--2XLPl","weight-bold":"frontend-pencraft-Text-module__weight-bold--VnIZR","weight-extrabold":"frontend-pencraft-Text-module__weight-extrabold--20epX","font-display":"frontend-pencraft-Text-module__font-display--v0e_A","font-text":"frontend-pencraft-Text-module__font-text--hJYwu","font-rounded":"frontend-pencraft-Text-module__font-rounded--bMtsZ","font-serif":"frontend-pencraft-Text-module__font-serif--1C_3G","font-monospace":"frontend-pencraft-Text-module__font-monospace--2jtmP","font-meta":"frontend-pencraft-Text-module__font-meta--2i-cR","font-digit":"frontend-pencraft-Text-module__font-digit--24di6","font-emoji":"frontend-pencraft-Text-module__font-emoji--2g4zS","font-style-italic":"frontend-pencraft-Text-module__font-style-italic--2DsX-","color-primary":"frontend-pencraft-Text-module__color-primary--2I-sF","color-secondary":"frontend-pencraft-Text-module__color-secondary--XjVGl","color-tertiary":"frontend-pencraft-Text-module__color-tertiary--62EOp","color-success":"frontend-pencraft-Text-module__color-success--qZUEU","color-error":"frontend-pencraft-Text-module__color-error--GdYJn","color-substack":"frontend-pencraft-Text-module__color-substack--27SO1","color-bg-light":"frontend-pencraft-Text-module__color-bg-light--2djqW","color-pub-primary-text":"frontend-pencraft-Text-module__color-pub-primary-text--34HX2","color-pub-secondary-text":"frontend-pencraft-Text-module__color-pub-secondary-text--Gqdnv","color-accent-red":"frontend-pencraft-Text-module__color-accent-red--10v74","color-accent-purple":"frontend-pencraft-Text-module__color-accent-purple--3OCNJ","color-accent-blue":"frontend-pencraft-Text-module__color-accent-blue--1HNON","transform-uppercase":"frontend-pencraft-Text-module__transform-uppercase--38jbr",ellipsis:"frontend-pencraft-Text-module__ellipsis--198Sy",clamp:"frontend-pencraft-Text-module__clamp--1_vjv","clamp-1":"frontend-pencraft-Text-module__clamp-1--2JwTt","clamp-2":"frontend-pencraft-Text-module__clamp-2--26qjc","clamp-3":"frontend-pencraft-Text-module__clamp-3--lwF7c","clamp-4":"frontend-pencraft-Text-module__clamp-4--2drqW","clamp-8":"frontend-pencraft-Text-module__clamp-8--TeUuw","decoration-underline":"frontend-pencraft-Text-module__decoration-underline--3BwEz","decoration-hover-underline":"frontend-pencraft-Text-module__decoration-hover-underline--1I94L","decoration-line-through":"frontend-pencraft-Text-module__decoration-line-through--1YEOr","pb-0":"frontend-pencraft-Text-module__pb-0--2BgQQ","pb-4":"frontend-pencraft-Text-module__pb-4--1Q4gV","pb-8":"frontend-pencraft-Text-module__pb-8--fsDHi","pb-12":"frontend-pencraft-Text-module__pb-12--3L9Eo","pb-16":"frontend-pencraft-Text-module__pb-16--2pK4E","pb-20":"frontend-pencraft-Text-module__pb-20--2E3V4","pb-24":"frontend-pencraft-Text-module__pb-24--2ITOb","pb-28":"frontend-pencraft-Text-module__pb-28--18_st","pb-32":"frontend-pencraft-Text-module__pb-32--2LF3A","pl-0":"frontend-pencraft-Text-module__pl-0--3Y03g","pl-4":"frontend-pencraft-Text-module__pl-4--2dnwl","pl-8":"frontend-pencraft-Text-module__pl-8--3WKp1","pl-12":"frontend-pencraft-Text-module__pl-12--92UB3","pl-16":"frontend-pencraft-Text-module__pl-16--1EdzN","pl-20":"frontend-pencraft-Text-module__pl-20--2RcZF","pl-24":"frontend-pencraft-Text-module__pl-24--29nQX","pl-28":"frontend-pencraft-Text-module__pl-28--2xxNB","pl-32":"frontend-pencraft-Text-module__pl-32--1ga1t","pt-0":"frontend-pencraft-Text-module__pt-0--3-0X4","pt-4":"frontend-pencraft-Text-module__pt-4--2_MLp","pt-8":"frontend-pencraft-Text-module__pt-8--3EjbH","pt-12":"frontend-pencraft-Text-module__pt-12--3h7nb","pt-16":"frontend-pencraft-Text-module__pt-16--QgNUx","pt-20":"frontend-pencraft-Text-module__pt-20--1KKoC","pt-24":"frontend-pencraft-Text-module__pt-24--2EAap","pt-28":"frontend-pencraft-Text-module__pt-28--2urL3","pt-32":"frontend-pencraft-Text-module__pt-32--3AB_9",paragraph:"frontend-pencraft-Text-module__paragraph--1KhXe",header1:"frontend-pencraft-Text-module__header1--3scFN",header3:"frontend-pencraft-Text-module__header3--1OHdz",body3:"frontend-pencraft-Text-module__body3--2ujZr",body4:"frontend-pencraft-Text-module__body4--flxpT",meta:"frontend-pencraft-Text-module__meta--3RRSj",digit:"frontend-pencraft-Text-module__digit--3soI9",marketingHeading1xl:"frontend-pencraft-Text-module__marketingHeading1xl--3eMsM",marketingHeading1:"frontend-pencraft-Text-module__marketingHeading1--2faSI",marketingHeading2:"frontend-pencraft-Text-module__marketingHeading2--3kVJM",marketingHeading3:"frontend-pencraft-Text-module__marketingHeading3--3VbJ0",marketingHeading4:"frontend-pencraft-Text-module__marketingHeading4--1NIXt",marketingHeading5:"frontend-pencraft-Text-module__marketingHeading5--2Z4pJ",marketingQuote:"frontend-pencraft-Text-module__marketingQuote--1DD9-",marketingBody:"frontend-pencraft-Text-module__marketingBody--3PyNX"},c=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(F,z,G)=>z in F?c(F,z,{enumerable:!0,configurable:!0,writable:!0,value:G}):F[z]=G,g=(F,z)=>{for(var G in z||(z={}))p.call(z,G)&&m(F,G,z[G]);if(l)for(var G of l(z))h.call(z,G)&&m(F,G,z[G]);return F},v=(F,z)=>{var G={};for(var V in F)p.call(F,V)&&z.indexOf(V)<0&&(G[V]=F[V]);if(F!=null&&l)for(var V of l(F))z.indexOf(V)<0&&h.call(F,V)&&(G[V]=F[V]);return G};const O=F=>{var z=F,{as:G,align:V,children:k,className:K,color:Y,decoration:ee,font:ae,fontStyle:he,isParagraph:me,lineHeight:Ye,transform:se,ellipsis:ie,clamp:Ee,paddingBottom:Oe,paddingLeft:ce,paddingTop:ue,size:pe,weight:$e}=z,ne=v(z,["as","align","children","className","color","decoration","font","fontStyle","isParagraph","lineHeight","transform","ellipsis","clamp","paddingBottom","paddingLeft","paddingTop","size","weight"]);const X=G!=null?G:"div";return Object(e.h)(X,g({className:o()(a.reset,V&&a[`align-${V}`],pe&&a[`size-${pe}`],Ye&&a[`line-height-${Ye}`],$e&&a[`weight-${$e}`],ae&&a[`font-${ae}`],he&&a[`font-style-${he}`],Y&&a[`color-${Y}`],se&&a[`transform-${se}`],ie&&a.ellipsis,Ee&&`${a.clamp} ${a[`clamp-${Ee}`]}`,ee&&a[`decoration-${ee}`],typeof Oe=="number"&&a[`pb-${Oe}`],typeof Oe=="number"&&a[`pl-${ce}`],typeof ue=="number"&&a[`pt-${ue}`],me&&a.paragraph,K)},ne),k)},u=F=>Object(e.h)(O,g({as:"span"},F)),r=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h1",font:"display",size:32,weight:"bold",color:"primary",className:o()(a.header1,V)},k),G)},i=F=>{var z=F,{children:G}=z,V=v(z,["children"]);return Object(e.h)(O,g({as:"h2",font:"display",size:24,weight:"bold",color:"primary"},V),G)},d=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h3",font:"display",size:20,lineHeight:24,weight:"bold",color:"primary",className:o()(a.header3,V)},k),G)},b=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h4",font:"display",size:16,lineHeight:20,weight:"bold",color:"primary",className:V},k),G)},w=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({font:"text",size:16,weight:"normal",color:"primary",className:o()(a.body3,V)},k),G)},E=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({font:"text",size:14,weight:"normal",color:"primary",className:o()(a.body4,V)},k),G)},S=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({font:"text",size:12,lineHeight:20,weight:"normal",color:"secondary",className:o()(V)},k),G)},P=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({font:"text",color:"primary",className:o()(a.marketingBody,V)},k),G)},D=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h1",color:"primary",weight:"normal",className:o()(a.marketingHeading1xl,V)},k),G)},W=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h1",color:"primary",weight:"normal",className:o()(a.marketingHeading1,V)},k),G)},B=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h3",color:"primary",weight:"medium",className:o()(a.marketingHeading2,V)},k),G)},f=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h3",color:"primary",weight:"medium",className:o()(a.marketingHeading3,V)},k),G)},y=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h4",color:"primary",weight:"medium",className:o()(a.marketingHeading4,V)},k),G)},M=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h5",color:"primary",weight:"normal",className:o()(a.marketingHeading5,V)},k),G)},N=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({as:"h4",color:"primary",weight:"normal",align:"center",className:o()(a.marketingQuote,V)},k),G)},A=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({color:"secondary",font:"meta",size:12,lineHeight:20,weight:"medium",className:o()(a.meta,V)},k),G)},L=F=>{var z=F,{children:G,className:V}=z,k=v(z,["children","className"]);return Object(e.h)(O,g({font:"digit",size:12,lineHeight:20,weight:"bold",className:o()(a.digit,V)},k),G)},C=F=>{var z=F,{children:G}=z,V=v(z,["children"]);return Object(e.h)(O,g({as:"h1",font:"display",size:28,weight:"bold",paddingTop:28,paddingBottom:16},V),G)},R=F=>{var z=F,{children:G}=z,V=v(z,["children"]);return Object(e.h)(O,g({as:"h3",font:"display",size:20,weight:"bold"},V),G)},U=F=>{var z=F,{children:G}=z,V=v(z,["children"]);return Object(e.h)(O,g({as:"label",font:"display",lineHeight:20,size:14,weight:"semibold"},V),G)},Z=F=>Object(e.h)(O,g({font:"text",lineHeight:20,size:14,weight:"medium",color:"substack"},F));O.H1=r,O.H2=i,O.H3=d,O.H4=b,O.B3=w,O.B4=E,O.Detail=S,O.MarketingBody=P,O.MarketingHeading1xl=D,O.MarketingHeading1=W,O.MarketingHeading2=B,O.MarketingHeading3=f,O.MarketingHeading4=y,O.MarketingHeading5=M,O.MarketingQuote=N,O.Meta=A,O.Digit=L,O.PageTitle=C,O.SectionHeader=R,O.InputLabel=U,O.Button=Z},function($,n,t){"use strict";function e(P){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(W){return typeof W}:e=function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},e(P)}var s;typeof window!="undefined"?s=window:typeof self=="undefined"?(console.warn("Using browser-only version of superagent in non-browser environment"),s=void 0):s=self;var o=t(602),a=t(603),c=t(604),l=t(613),p=t(368),h=t(614),m=t(616);function g(){}$.exports=function(P,D){return typeof D=="function"?new n.Request("GET",P).end(D):arguments.length===1?new n.Request("GET",P):new n.Request(P,D)},n=$.exports;var v=n;n.Request=E,v.getXHR=function(){if(s.XMLHttpRequest&&(!s.location||s.location.protocol!=="file:"||!s.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(P){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(P){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(P){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(P){}throw new Error("Browser-only version of superagent could not find XHR")};var O="".trim?function(P){return P.trim()}:function(P){return P.replace(/(^\s*|\s*$)/g,"")};function u(P){if(!p(P))return P;var D=[];for(var W in P)Object.prototype.hasOwnProperty.call(P,W)&&r(D,W,P[W]);return D.join("&")}function r(P,D,W){if(W!==void 0){if(W===null){P.push(encodeURI(D));return}if(Array.isArray(W))W.forEach(function(f){r(P,D,f)});else if(p(W))for(var B in W)Object.prototype.hasOwnProperty.call(W,B)&&r(P,"".concat(D,"[").concat(B,"]"),W[B]);else P.push(encodeURI(D)+"="+encodeURIComponent(W))}}v.serializeObject=u;function i(P){for(var D={},W=P.split("&"),B,f,y=0,M=W.length;y<M;++y)B=W[y],f=B.indexOf("="),f===-1?D[decodeURIComponent(B)]="":D[decodeURIComponent(B.slice(0,f))]=decodeURIComponent(B.slice(f+1));return D}v.parseString=i,v.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":c.stringify,"application/json":a},v.parse={"application/x-www-form-urlencoded":i,"application/json":JSON.parse};function d(P){for(var D=P.split(/\r?\n/),W={},B,f,y,M,N=0,A=D.length;N<A;++N)f=D[N],B=f.indexOf(":"),B!==-1&&(y=f.slice(0,B).toLowerCase(),M=O(f.slice(B+1)),W[y]=M);return W}function b(P){return/[/+]json($|[^-\w])/i.test(P)}function w(P){this.req=P,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType=="undefined"?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var D=this.xhr.status;D===1223&&(D=204),this._setStatusProperties(D),this.headers=d(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&P._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}h(w.prototype),w.prototype._parseBody=function(P){var D=v.parse[this.type];return this.req._parser?this.req._parser(this,P):(!D&&b(this.type)&&(D=v.parse["application/json"]),D&&P&&(P.length>0||P instanceof Object)?D(P):null)},w.prototype.toError=function(){var P=this.req,D=P.method,W=P.url,B="cannot ".concat(D," ").concat(W," (").concat(this.status,")"),f=new Error(B);return f.status=this.status,f.method=D,f.url=W,f},v.Response=w;function E(P,D){var W=this;this._query=this._query||[],this.method=P,this.url=D,this.header={},this._header={},this.on("end",function(){var B=null,f=null;try{f=new w(W)}catch(M){return B=new Error("Parser is unable to parse the response"),B.parse=!0,B.original=M,W.xhr?(B.rawResponse=typeof W.xhr.responseType=="undefined"?W.xhr.responseText:W.xhr.response,B.status=W.xhr.status?W.xhr.status:null,B.statusCode=B.status):(B.rawResponse=null,B.status=null),W.callback(B)}W.emit("response",f);var y;try{W._isResponseOK(f)||(y=new Error(f.statusText||f.text||"Unsuccessful HTTP response"))}catch(M){y=M}y?(y.original=B,y.response=f,y.status=f.status,W.callback(y,f)):W.callback(null,f)})}o(E.prototype),l(E.prototype),E.prototype.type=function(P){return this.set("Content-Type",v.types[P]||P),this},E.prototype.accept=function(P){return this.set("Accept",v.types[P]||P),this},E.prototype.auth=function(P,D,W){arguments.length===1&&(D=""),e(D)==="object"&&D!==null&&(W=D,D=""),W||(W={type:typeof btoa=="function"?"basic":"auto"});var B=function(y){if(typeof btoa=="function")return btoa(y);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(P,D,W,B)},E.prototype.query=function(P){return typeof P!="string"&&(P=u(P)),P&&this._query.push(P),this},E.prototype.attach=function(P,D,W){if(D){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(P,D,W||D.name)}return this},E.prototype._getFormData=function(){return this._formData||(this._formData=new s.FormData),this._formData},E.prototype.callback=function(P,D){if(this._shouldRetry(P,D))return this._retry();var W=this._callback;this.clearTimeout(),P&&(this._maxRetries&&(P.retries=this._retries-1),this.emit("error",P)),W(P,D)},E.prototype.crossDomainError=function(){var P=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);P.crossDomain=!0,P.status=this.status,P.method=this.method,P.url=this.url,this.callback(P)},E.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},E.prototype.ca=E.prototype.agent,E.prototype.buffer=E.prototype.ca,E.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},E.prototype.pipe=E.prototype.write,E.prototype._isHost=function(P){return P&&e(P)==="object"&&!Array.isArray(P)&&Object.prototype.toString.call(P)!=="[object Object]"},E.prototype.end=function(P){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=P||g,this._finalizeQueryString(),this._end()},E.prototype._setUploadTimeout=function(){var P=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){P._timeoutError("Upload timeout of ",P._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},E.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var P=this;this.xhr=v.getXHR();var D=this.xhr,W=this._formData||this._data;this._setTimeouts(),D.onreadystatechange=function(){var N=D.readyState;if(N>=2&&P._responseTimeoutTimer&&clearTimeout(P._responseTimeoutTimer),N===4){var A;try{A=D.status}catch(L){A=0}if(!A)return P.timedout||P._aborted?void 0:P.crossDomainError();P.emit("end")}};var B=function(A,L){L.total>0&&(L.percent=L.loaded/L.total*100,L.percent===100&&clearTimeout(P._uploadTimeoutTimer)),L.direction=A,P.emit("progress",L)};if(this.hasListeners("progress"))try{D.addEventListener("progress",B.bind(null,"download")),D.upload&&D.upload.addEventListener("progress",B.bind(null,"upload"))}catch(N){}D.upload&&this._setUploadTimeout();try{this.username&&this.password?D.open(this.method,this.url,!0,this.username,this.password):D.open(this.method,this.url,!0)}catch(N){return this.callback(N)}if(this._withCredentials&&(D.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof W!="string"&&!this._isHost(W)){var f=this._header["content-type"],y=this._serializer||v.serialize[f?f.split(";")[0]:""];!y&&b(f)&&(y=v.serialize["application/json"]),y&&(W=y(W))}for(var M in this.header)this.header[M]!==null&&Object.prototype.hasOwnProperty.call(this.header,M)&&D.setRequestHeader(M,this.header[M]);this._responseType&&(D.responseType=this._responseType),this.emit("request",this),D.send(typeof W=="undefined"?null:W)},v.agent=function(){return new m},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(P){m.prototype[P.toLowerCase()]=function(D,W){var B=new v.Request(P,D);return this._setDefaults(B),W&&B.end(W),B}}),m.prototype.del=m.prototype.delete,v.get=function(P,D,W){var B=v("GET",P);return typeof D=="function"&&(W=D,D=null),D&&B.query(D),W&&B.end(W),B},v.head=function(P,D,W){var B=v("HEAD",P);return typeof D=="function"&&(W=D,D=null),D&&B.query(D),W&&B.end(W),B},v.options=function(P,D,W){var B=v("OPTIONS",P);return typeof D=="function"&&(W=D,D=null),D&&B.send(D),W&&B.end(W),B};function S(P,D,W){var B=v("DELETE",P);return typeof D=="function"&&(W=D,D=null),D&&B.send(D),W&&B.end(W),B}v.del=S,v.delete=S,v.patch=function(P,D,W){var B=v("PATCH",P);return typeof D=="function"&&(W=D,D=null),D&&B.send(D),W&&B.end(W),B},v.post=function(P,D,W){var B=v("POST",P);return typeof D=="function"&&(W=D,D=null),D&&B.send(D),W&&B.end(W),B},v.put=function(P,D,W){var B=v("PUT",P);return typeof D=="function"&&(W=D,D=null),D&&B.send(D),W&&B.end(W),B}},function($,n,t){"use strict";t.d(n,"a",function(){return O});var e=t(0),s=t(3),o=t.n(s),a=t(112),c=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?c(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>{var i={};for(var d in u)p.call(u,d)&&r.indexOf(d)<0&&(i[d]=u[d]);if(u!=null&&l)for(var d of l(u))r.indexOf(d)<0&&h.call(u,d)&&(i[d]=u[d]);return i};const O=u=>{var r=u,{name:i,svgParams:d,isStatic:b,height:w,fill:E,stroke:S,version:P=4,strokeWidth:D=1.8,alt:W,additionalStaticParams:B={},children:f}=r,y=v(r,["name","svgParams","isStatic","height","fill","stroke","version","strokeWidth","alt","additionalStaticParams","children"]);const M=w?(d.width||1)*w/(d.height||1):d.width||1,N=w||d.height||1;return b?Object(e.h)(a.a,g(g({src:Object(s.cloudinary)(Object(s.pathWithQuery)(`/icon/${i}`,{v:P||4,height:N*2,fill:E,stroke:S,strokeWidth:D*2}),M*2,{format:"png",crop:"scale"}),width:M,height:N,style:{maxWidth:`${M}px`},alt:W||""},B),y)):Object(e.h)("svg",g({role:"img",style:w?{height:`${N}px`,width:`${M}px`}:void 0,width:M,height:N,viewBox:d.viewBox||`0 0 ${d.width} ${d.height}`,fill:E||d.fill||"none",strokeWidth:D||typeof D=="number"?Number(D):typeof d.strokeWidth=="number"?d.strokeWidth:1,stroke:S||d.stroke||"#000",xmlns:"http://www.w3.org/2000/svg"},y),Object(e.h)("g",null,Object(e.h)("title",null,W||""),f))}},function($,n,t){"use strict";t.r(n),t.d(n,"ContentMatch",function(){return U}),t.d(n,"DOMParser",function(){return ne}),t.d(n,"DOMSerializer",function(){return be}),t.d(n,"Fragment",function(){return c}),t.d(n,"Mark",function(){return m}),t.d(n,"MarkType",function(){return ue}),t.d(n,"Node",function(){return L}),t.d(n,"NodeRange",function(){return N}),t.d(n,"NodeType",function(){return Oe}),t.d(n,"ReplaceError",function(){return g}),t.d(n,"ResolvedPos",function(){return B}),t.d(n,"Schema",function(){return pe}),t.d(n,"Slice",function(){return v});function e(Te){this.content=Te}e.prototype={constructor:e,find:function(Te){for(var x=0;x<this.content.length;x+=2)if(this.content[x]===Te)return x;return-1},get:function(Te){var x=this.find(Te);return x==-1?void 0:this.content[x+1]},update:function(Te,x,H){var le=H&&H!=Te?this.remove(H):this,Ce=le.find(Te),Ue=le.content.slice();return Ce==-1?Ue.push(H||Te,x):(Ue[Ce+1]=x,H&&(Ue[Ce]=H)),new e(Ue)},remove:function(Te){var x=this.find(Te);if(x==-1)return this;var H=this.content.slice();return H.splice(x,2),new e(H)},addToStart:function(Te,x){return new e([Te,x].concat(this.remove(Te).content))},addToEnd:function(Te,x){var H=this.remove(Te).content.slice();return H.push(Te,x),new e(H)},addBefore:function(Te,x,H){var le=this.remove(x),Ce=le.content.slice(),Ue=le.find(Te);return Ce.splice(Ue==-1?Ce.length:Ue,0,x,H),new e(Ce)},forEach:function(Te){for(var x=0;x<this.content.length;x+=2)Te(this.content[x],this.content[x+1])},prepend:function(Te){return Te=e.from(Te),Te.size?new e(Te.content.concat(this.subtract(Te).content)):this},append:function(Te){return Te=e.from(Te),Te.size?new e(this.subtract(Te).content.concat(Te.content)):this},subtract:function(Te){var x=this;Te=e.from(Te);for(var H=0;H<Te.content.length;H+=2)x=x.remove(Te.content[H]);return x},toObject:function(){var Te={};return this.forEach(function(x,H){Te[x]=H}),Te},get size(){return this.content.length>>1}},e.from=function(Te){if(Te instanceof e)return Te;var x=[];if(Te)for(var H in Te)x.push(H,Te[H]);return new e(x)};var s=e;function o(Te,x,H){for(let le=0;;le++){if(le==Te.childCount||le==x.childCount)return Te.childCount==x.childCount?null:H;let Ce=Te.child(le),Ue=x.child(le);if(Ce==Ue){H+=Ce.nodeSize;continue}if(!Ce.sameMarkup(Ue))return H;if(Ce.isText&&Ce.text!=Ue.text){for(let Ve=0;Ce.text[Ve]==Ue.text[Ve];Ve++)H++;return H}if(Ce.content.size||Ue.content.size){let Ve=o(Ce.content,Ue.content,H+1);if(Ve!=null)return Ve}H+=Ce.nodeSize}}function a(Te,x,H,le){for(let Ce=Te.childCount,Ue=x.childCount;;){if(Ce==0||Ue==0)return Ce==Ue?null:{a:H,b:le};let Ve=Te.child(--Ce),bt=x.child(--Ue),yt=Ve.nodeSize;if(Ve==bt){H-=yt,le-=yt;continue}if(!Ve.sameMarkup(bt))return{a:H,b:le};if(Ve.isText&&Ve.text!=bt.text){let Qt=0,tn=Math.min(Ve.text.length,bt.text.length);for(;Qt<tn&&Ve.text[Ve.text.length-Qt-1]==bt.text[bt.text.length-Qt-1];)Qt++,H--,le--;return{a:H,b:le}}if(Ve.content.size||bt.content.size){let Qt=a(Ve.content,bt.content,H-1,le-1);if(Qt)return Qt}H-=yt,le-=yt}}class c{constructor(x,H){if(this.content=x,this.size=H||0,H==null)for(let le=0;le<x.length;le++)this.size+=x[le].nodeSize}nodesBetween(x,H,le,Ce=0,Ue){for(let Ve=0,bt=0;bt<H;Ve++){let yt=this.content[Ve],Qt=bt+yt.nodeSize;if(Qt>x&&le(yt,Ce+bt,Ue||null,Ve)!==!1&&yt.content.size){let tn=bt+1;yt.nodesBetween(Math.max(0,x-tn),Math.min(yt.content.size,H-tn),le,Ce+tn)}bt=Qt}}descendants(x){this.nodesBetween(0,this.size,x)}textBetween(x,H,le,Ce){let Ue="",Ve=!0;return this.nodesBetween(x,H,(bt,yt)=>{bt.isText?(Ue+=bt.text.slice(Math.max(x,yt)-yt,H-yt),Ve=!le):bt.isLeaf?(Ce?Ue+=typeof Ce=="function"?Ce(bt):Ce:bt.type.spec.leafText&&(Ue+=bt.type.spec.leafText(bt)),Ve=!le):!Ve&&bt.isBlock&&(Ue+=le,Ve=!0)},0),Ue}append(x){if(!x.size)return this;if(!this.size)return x;let H=this.lastChild,le=x.firstChild,Ce=this.content.slice(),Ue=0;for(H.isText&&H.sameMarkup(le)&&(Ce[Ce.length-1]=H.withText(H.text+le.text),Ue=1);Ue<x.content.length;Ue++)Ce.push(x.content[Ue]);return new c(Ce,this.size+x.size)}cut(x,H=this.size){if(x==0&&H==this.size)return this;let le=[],Ce=0;if(H>x)for(let Ue=0,Ve=0;Ve<H;Ue++){let bt=this.content[Ue],yt=Ve+bt.nodeSize;yt>x&&((Ve<x||yt>H)&&(bt.isText?bt=bt.cut(Math.max(0,x-Ve),Math.min(bt.text.length,H-Ve)):bt=bt.cut(Math.max(0,x-Ve-1),Math.min(bt.content.size,H-Ve-1))),le.push(bt),Ce+=bt.nodeSize),Ve=yt}return new c(le,Ce)}cutByIndex(x,H){return x==H?c.empty:x==0&&H==this.content.length?this:new c(this.content.slice(x,H))}replaceChild(x,H){let le=this.content[x];if(le==H)return this;let Ce=this.content.slice(),Ue=this.size+H.nodeSize-le.nodeSize;return Ce[x]=H,new c(Ce,Ue)}addToStart(x){return new c([x].concat(this.content),this.size+x.nodeSize)}addToEnd(x){return new c(this.content.concat(x),this.size+x.nodeSize)}eq(x){if(this.content.length!=x.content.length)return!1;for(let H=0;H<this.content.length;H++)if(!this.content[H].eq(x.content[H]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(x){let H=this.content[x];if(!H)throw new RangeError("Index "+x+" out of range for "+this);return H}maybeChild(x){return this.content[x]||null}forEach(x){for(let H=0,le=0;H<this.content.length;H++){let Ce=this.content[H];x(Ce,le,H),le+=Ce.nodeSize}}findDiffStart(x,H=0){return o(this,x,H)}findDiffEnd(x,H=this.size,le=x.size){return a(this,x,H,le)}findIndex(x,H=-1){if(x==0)return p(0,x);if(x==this.size)return p(this.content.length,x);if(x>this.size||x<0)throw new RangeError(`Position ${x} outside of fragment (${this})`);for(let le=0,Ce=0;;le++){let Ue=this.child(le),Ve=Ce+Ue.nodeSize;if(Ve>=x)return Ve==x||H>0?p(le+1,Ve):p(le,Ce);Ce=Ve}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(x=>x.toJSON()):null}static fromJSON(x,H){if(!H)return c.empty;if(!Array.isArray(H))throw new RangeError("Invalid input for Fragment.fromJSON");return new c(H.map(x.nodeFromJSON))}static fromArray(x){if(!x.length)return c.empty;let H,le=0;for(let Ce=0;Ce<x.length;Ce++){let Ue=x[Ce];le+=Ue.nodeSize,Ce&&Ue.isText&&x[Ce-1].sameMarkup(Ue)?(H||(H=x.slice(0,Ce)),H[H.length-1]=Ue.withText(H[H.length-1].text+Ue.text)):H&&H.push(Ue)}return new c(H||x,le)}static from(x){if(!x)return c.empty;if(x instanceof c)return x;if(Array.isArray(x))return this.fromArray(x);if(x.attrs)return new c([x],x.nodeSize);throw new RangeError("Can not convert "+x+" to a Fragment"+(x.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}c.empty=new c([],0);const l={index:0,offset:0};function p(Te,x){return l.index=Te,l.offset=x,l}function h(Te,x){if(Te===x)return!0;if(!(Te&&typeof Te=="object")||!(x&&typeof x=="object"))return!1;let H=Array.isArray(Te);if(Array.isArray(x)!=H)return!1;if(H){if(Te.length!=x.length)return!1;for(let le=0;le<Te.length;le++)if(!h(Te[le],x[le]))return!1}else{for(let le in Te)if(!(le in x)||!h(Te[le],x[le]))return!1;for(let le in x)if(!(le in Te))return!1}return!0}class m{constructor(x,H){this.type=x,this.attrs=H}addToSet(x){let H,le=!1;for(let Ce=0;Ce<x.length;Ce++){let Ue=x[Ce];if(this.eq(Ue))return x;if(this.type.excludes(Ue.type))H||(H=x.slice(0,Ce));else{if(Ue.type.excludes(this.type))return x;!le&&Ue.type.rank>this.type.rank&&(H||(H=x.slice(0,Ce)),H.push(this),le=!0),H&&H.push(Ue)}}return H||(H=x.slice()),le||H.push(this),H}removeFromSet(x){for(let H=0;H<x.length;H++)if(this.eq(x[H]))return x.slice(0,H).concat(x.slice(H+1));return x}isInSet(x){for(let H=0;H<x.length;H++)if(this.eq(x[H]))return!0;return!1}eq(x){return this==x||this.type==x.type&&h(this.attrs,x.attrs)}toJSON(){let x={type:this.type.name};for(let H in this.attrs){x.attrs=this.attrs;break}return x}static fromJSON(x,H){if(!H)throw new RangeError("Invalid input for Mark.fromJSON");let le=x.marks[H.type];if(!le)throw new RangeError(`There is no mark type ${H.type} in this schema`);return le.create(H.attrs)}static sameSet(x,H){if(x==H)return!0;if(x.length!=H.length)return!1;for(let le=0;le<x.length;le++)if(!x[le].eq(H[le]))return!1;return!0}static setFrom(x){if(!x||Array.isArray(x)&&x.length==0)return m.none;if(x instanceof m)return[x];let H=x.slice();return H.sort((le,Ce)=>le.type.rank-Ce.type.rank),H}}m.none=[];class g extends Error{}class v{constructor(x,H,le){this.content=x,this.openStart=H,this.openEnd=le}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(x,H){let le=u(this.content,x+this.openStart,H);return le&&new v(le,this.openStart,this.openEnd)}removeBetween(x,H){return new v(O(this.content,x+this.openStart,H+this.openStart),this.openStart,this.openEnd)}eq(x){return this.content.eq(x.content)&&this.openStart==x.openStart&&this.openEnd==x.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let x={content:this.content.toJSON()};return this.openStart>0&&(x.openStart=this.openStart),this.openEnd>0&&(x.openEnd=this.openEnd),x}static fromJSON(x,H){if(!H)return v.empty;let le=H.openStart||0,Ce=H.openEnd||0;if(typeof le!="number"||typeof Ce!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new v(c.fromJSON(x,H.content),le,Ce)}static maxOpen(x,H=!0){let le=0,Ce=0;for(let Ue=x.firstChild;Ue&&!Ue.isLeaf&&(H||!Ue.type.spec.isolating);Ue=Ue.firstChild)le++;for(let Ue=x.lastChild;Ue&&!Ue.isLeaf&&(H||!Ue.type.spec.isolating);Ue=Ue.lastChild)Ce++;return new v(x,le,Ce)}}v.empty=new v(c.empty,0,0);function O(Te,x,H){let{index:le,offset:Ce}=Te.findIndex(x),Ue=Te.maybeChild(le),{index:Ve,offset:bt}=Te.findIndex(H);if(Ce==x||Ue.isText){if(bt!=H&&!Te.child(Ve).isText)throw new RangeError("Removing non-flat range");return Te.cut(0,x).append(Te.cut(H))}if(le!=Ve)throw new RangeError("Removing non-flat range");return Te.replaceChild(le,Ue.copy(O(Ue.content,x-Ce-1,H-Ce-1)))}function u(Te,x,H,le){let{index:Ce,offset:Ue}=Te.findIndex(x),Ve=Te.maybeChild(Ce);if(Ue==x||Ve.isText)return le&&!le.canReplace(Ce,Ce,H)?null:Te.cut(0,x).append(H).append(Te.cut(x));let bt=u(Ve.content,x-Ue-1,H);return bt&&Te.replaceChild(Ce,Ve.copy(bt))}function r(Te,x,H){if(H.openStart>Te.depth)throw new g("Inserted content deeper than insertion position");if(Te.depth-H.openStart!=x.depth-H.openEnd)throw new g("Inconsistent open depths");return i(Te,x,H,0)}function i(Te,x,H,le){let Ce=Te.index(le),Ue=Te.node(le);if(Ce==x.index(le)&&le<Te.depth-H.openStart){let Ve=i(Te,x,H,le+1);return Ue.copy(Ue.content.replaceChild(Ce,Ve))}else if(H.content.size)if(!H.openStart&&!H.openEnd&&Te.depth==le&&x.depth==le){let Ve=Te.parent,bt=Ve.content;return S(Ve,bt.cut(0,Te.parentOffset).append(H.content).append(bt.cut(x.parentOffset)))}else{let{start:Ve,end:bt}=W(H,Te);return S(Ue,P(Te,Ve,bt,x,le))}else return S(Ue,D(Te,x,le))}function d(Te,x){if(!x.type.compatibleContent(Te.type))throw new g("Cannot join "+x.type.name+" onto "+Te.type.name)}function b(Te,x,H){let le=Te.node(H);return d(le,x.node(H)),le}function w(Te,x){let H=x.length-1;H>=0&&Te.isText&&Te.sameMarkup(x[H])?x[H]=Te.withText(x[H].text+Te.text):x.push(Te)}function E(Te,x,H,le){let Ce=(x||Te).node(H),Ue=0,Ve=x?x.index(H):Ce.childCount;Te&&(Ue=Te.index(H),Te.depth>H?Ue++:Te.textOffset&&(w(Te.nodeAfter,le),Ue++));for(let bt=Ue;bt<Ve;bt++)w(Ce.child(bt),le);x&&x.depth==H&&x.textOffset&&w(x.nodeBefore,le)}function S(Te,x){return Te.type.checkContent(x),Te.copy(x)}function P(Te,x,H,le,Ce){let Ue=Te.depth>Ce&&b(Te,x,Ce+1),Ve=le.depth>Ce&&b(H,le,Ce+1),bt=[];return E(null,Te,Ce,bt),Ue&&Ve&&x.index(Ce)==H.index(Ce)?(d(Ue,Ve),w(S(Ue,P(Te,x,H,le,Ce+1)),bt)):(Ue&&w(S(Ue,D(Te,x,Ce+1)),bt),E(x,H,Ce,bt),Ve&&w(S(Ve,D(H,le,Ce+1)),bt)),E(le,null,Ce,bt),new c(bt)}function D(Te,x,H){let le=[];if(E(null,Te,H,le),Te.depth>H){let Ce=b(Te,x,H+1);w(S(Ce,D(Te,x,H+1)),le)}return E(x,null,H,le),new c(le)}function W(Te,x){let H=x.depth-Te.openStart,Ce=x.node(H).copy(Te.content);for(let Ue=H-1;Ue>=0;Ue--)Ce=x.node(Ue).copy(c.from(Ce));return{start:Ce.resolveNoCache(Te.openStart+H),end:Ce.resolveNoCache(Ce.content.size-Te.openEnd-H)}}class B{constructor(x,H,le){this.pos=x,this.path=H,this.parentOffset=le,this.depth=H.length/3-1}resolveDepth(x){return x==null?this.depth:x<0?this.depth+x:x}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(x){return this.path[this.resolveDepth(x)*3]}index(x){return this.path[this.resolveDepth(x)*3+1]}indexAfter(x){return x=this.resolveDepth(x),this.index(x)+(x==this.depth&&!this.textOffset?0:1)}start(x){return x=this.resolveDepth(x),x==0?0:this.path[x*3-1]+1}end(x){return x=this.resolveDepth(x),this.start(x)+this.node(x).content.size}before(x){if(x=this.resolveDepth(x),!x)throw new RangeError("There is no position before the top-level node");return x==this.depth+1?this.pos:this.path[x*3-1]}after(x){if(x=this.resolveDepth(x),!x)throw new RangeError("There is no position after the top-level node");return x==this.depth+1?this.pos:this.path[x*3-1]+this.path[x*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let x=this.parent,H=this.index(this.depth);if(H==x.childCount)return null;let le=this.pos-this.path[this.path.length-1],Ce=x.child(H);return le?x.child(H).cut(le):Ce}get nodeBefore(){let x=this.index(this.depth),H=this.pos-this.path[this.path.length-1];return H?this.parent.child(x).cut(0,H):x==0?null:this.parent.child(x-1)}posAtIndex(x,H){H=this.resolveDepth(H);let le=this.path[H*3],Ce=H==0?0:this.path[H*3-1]+1;for(let Ue=0;Ue<x;Ue++)Ce+=le.child(Ue).nodeSize;return Ce}marks(){let x=this.parent,H=this.index();if(x.content.size==0)return m.none;if(this.textOffset)return x.child(H).marks;let le=x.maybeChild(H-1),Ce=x.maybeChild(H);if(!le){let bt=le;le=Ce,Ce=bt}let Ue=le.marks;for(var Ve=0;Ve<Ue.length;Ve++)Ue[Ve].type.spec.inclusive===!1&&(!Ce||!Ue[Ve].isInSet(Ce.marks))&&(Ue=Ue[Ve--].removeFromSet(Ue));return Ue}marksAcross(x){let H=this.parent.maybeChild(this.index());if(!H||!H.isInline)return null;let le=H.marks,Ce=x.parent.maybeChild(x.index());for(var Ue=0;Ue<le.length;Ue++)le[Ue].type.spec.inclusive===!1&&(!Ce||!le[Ue].isInSet(Ce.marks))&&(le=le[Ue--].removeFromSet(le));return le}sharedDepth(x){for(let H=this.depth;H>0;H--)if(this.start(H)<=x&&this.end(H)>=x)return H;return 0}blockRange(x=this,H){if(x.pos<this.pos)return x.blockRange(this);for(let le=this.depth-(this.parent.inlineContent||this.pos==x.pos?1:0);le>=0;le--)if(x.pos<=this.end(le)&&(!H||H(this.node(le))))return new N(this,x,le);return null}sameParent(x){return this.pos-this.parentOffset==x.pos-x.parentOffset}max(x){return x.pos>this.pos?x:this}min(x){return x.pos<this.pos?x:this}toString(){let x="";for(let H=1;H<=this.depth;H++)x+=(x?"/":"")+this.node(H).type.name+"_"+this.index(H-1);return x+":"+this.parentOffset}static resolve(x,H){if(!(H>=0&&H<=x.content.size))throw new RangeError("Position "+H+" out of range");let le=[],Ce=0,Ue=H;for(let Ve=x;;){let{index:bt,offset:yt}=Ve.content.findIndex(Ue),Qt=Ue-yt;if(le.push(Ve,bt,Ce+yt),!Qt||(Ve=Ve.child(bt),Ve.isText))break;Ue=Qt-1,Ce+=yt+1}return new B(H,le,Ue)}static resolveCached(x,H){for(let Ce=0;Ce<f.length;Ce++){let Ue=f[Ce];if(Ue.pos==H&&Ue.doc==x)return Ue}let le=f[y]=B.resolve(x,H);return y=(y+1)%M,le}}let f=[],y=0,M=12;class N{constructor(x,H,le){this.$from=x,this.$to=H,this.depth=le}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const A=Object.create(null);class L{constructor(x,H,le,Ce=m.none){this.type=x,this.attrs=H,this.marks=Ce,this.content=le||c.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(x){return this.content.child(x)}maybeChild(x){return this.content.maybeChild(x)}forEach(x){this.content.forEach(x)}nodesBetween(x,H,le,Ce=0){this.content.nodesBetween(x,H,le,Ce,this)}descendants(x){this.nodesBetween(0,this.content.size,x)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(x,H,le,Ce){return this.content.textBetween(x,H,le,Ce)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(x){return this==x||this.sameMarkup(x)&&this.content.eq(x.content)}sameMarkup(x){return this.hasMarkup(x.type,x.attrs,x.marks)}hasMarkup(x,H,le){return this.type==x&&h(this.attrs,H||x.defaultAttrs||A)&&m.sameSet(this.marks,le||m.none)}copy(x=null){return x==this.content?this:new L(this.type,this.attrs,x,this.marks)}mark(x){return x==this.marks?this:new L(this.type,this.attrs,this.content,x)}cut(x,H=this.content.size){return x==0&&H==this.content.size?this:this.copy(this.content.cut(x,H))}slice(x,H=this.content.size,le=!1){if(x==H)return v.empty;let Ce=this.resolve(x),Ue=this.resolve(H),Ve=le?0:Ce.sharedDepth(H),bt=Ce.start(Ve),Qt=Ce.node(Ve).content.cut(Ce.pos-bt,Ue.pos-bt);return new v(Qt,Ce.depth-Ve,Ue.depth-Ve)}replace(x,H,le){return r(this.resolve(x),this.resolve(H),le)}nodeAt(x){for(let H=this;;){let{index:le,offset:Ce}=H.content.findIndex(x);if(H=H.maybeChild(le),!H)return null;if(Ce==x||H.isText)return H;x-=Ce+1}}childAfter(x){let{index:H,offset:le}=this.content.findIndex(x);return{node:this.content.maybeChild(H),index:H,offset:le}}childBefore(x){if(x==0)return{node:null,index:0,offset:0};let{index:H,offset:le}=this.content.findIndex(x);if(le<x)return{node:this.content.child(H),index:H,offset:le};let Ce=this.content.child(H-1);return{node:Ce,index:H-1,offset:le-Ce.nodeSize}}resolve(x){return B.resolveCached(this,x)}resolveNoCache(x){return B.resolve(this,x)}rangeHasMark(x,H,le){let Ce=!1;return H>x&&this.nodesBetween(x,H,Ue=>(le.isInSet(Ue.marks)&&(Ce=!0),!Ce)),Ce}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let x=this.type.name;return this.content.size&&(x+="("+this.content.toStringInner()+")"),R(this.marks,x)}contentMatchAt(x){let H=this.type.contentMatch.matchFragment(this.content,0,x);if(!H)throw new Error("Called contentMatchAt on a node with invalid content");return H}canReplace(x,H,le=c.empty,Ce=0,Ue=le.childCount){let Ve=this.contentMatchAt(x).matchFragment(le,Ce,Ue),bt=Ve&&Ve.matchFragment(this.content,H);if(!bt||!bt.validEnd)return!1;for(let yt=Ce;yt<Ue;yt++)if(!this.type.allowsMarks(le.child(yt).marks))return!1;return!0}canReplaceWith(x,H,le,Ce){if(Ce&&!this.type.allowsMarks(Ce))return!1;let Ue=this.contentMatchAt(x).matchType(le),Ve=Ue&&Ue.matchFragment(this.content,H);return Ve?Ve.validEnd:!1}canAppend(x){return x.content.size?this.canReplace(this.childCount,this.childCount,x.content):this.type.compatibleContent(x.type)}check(){this.type.checkContent(this.content);let x=m.none;for(let H=0;H<this.marks.length;H++)x=this.marks[H].addToSet(x);if(!m.sameSet(x,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(H=>H.type.name)}`);this.content.forEach(H=>H.check())}toJSON(){let x={type:this.type.name};for(let H in this.attrs){x.attrs=this.attrs;break}return this.content.size&&(x.content=this.content.toJSON()),this.marks.length&&(x.marks=this.marks.map(H=>H.toJSON())),x}static fromJSON(x,H){if(!H)throw new RangeError("Invalid input for Node.fromJSON");let le=null;if(H.marks){if(!Array.isArray(H.marks))throw new RangeError("Invalid mark data for Node.fromJSON");le=H.marks.map(x.markFromJSON)}if(H.type=="text"){if(typeof H.text!="string")throw new RangeError("Invalid text node in JSON");return x.text(H.text,le)}let Ce=c.fromJSON(x,H.content);return x.nodeType(H.type).create(H.attrs,Ce,le)}}L.prototype.text=void 0;class C extends L{constructor(x,H,le,Ce){super(x,H,null,Ce);if(!le)throw new RangeError("Empty text nodes are not allowed");this.text=le}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):R(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(x,H){return this.text.slice(x,H)}get nodeSize(){return this.text.length}mark(x){return x==this.marks?this:new C(this.type,this.attrs,this.text,x)}withText(x){return x==this.text?this:new C(this.type,this.attrs,x,this.marks)}cut(x=0,H=this.text.length){return x==0&&H==this.text.length?this:this.withText(this.text.slice(x,H))}eq(x){return this.sameMarkup(x)&&this.text==x.text}toJSON(){let x=super.toJSON();return x.text=this.text,x}}function R(Te,x){for(let H=Te.length-1;H>=0;H--)x=Te[H].type.name+"("+x+")";return x}class U{constructor(x){this.validEnd=x,this.next=[],this.wrapCache=[]}static parse(x,H){let le=new Z(x,H);if(le.next==null)return U.empty;let Ce=F(le);le.next&&le.err("Unexpected trailing text");let Ue=me(ee(Ce));return Ye(Ue,le),Ue}matchType(x){for(let H=0;H<this.next.length;H++)if(this.next[H].type==x)return this.next[H].next;return null}matchFragment(x,H=0,le=x.childCount){let Ce=this;for(let Ue=H;Ce&&Ue<le;Ue++)Ce=Ce.matchType(x.child(Ue).type);return Ce}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let x=0;x<this.next.length;x++){let{type:H}=this.next[x];if(!(H.isText||H.hasRequiredAttrs()))return H}return null}compatible(x){for(let H=0;H<this.next.length;H++)for(let le=0;le<x.next.length;le++)if(this.next[H].type==x.next[le].type)return!0;return!1}fillBefore(x,H=!1,le=0){let Ce=[this];function Ue(Ve,bt){let yt=Ve.matchFragment(x,le);if(yt&&(!H||yt.validEnd))return c.from(bt.map(Qt=>Qt.createAndFill()));for(let Qt=0;Qt<Ve.next.length;Qt++){let{type:tn,next:Kn}=Ve.next[Qt];if(!(tn.isText||tn.hasRequiredAttrs())&&Ce.indexOf(Kn)==-1){Ce.push(Kn);let Ot=Ue(Kn,bt.concat(tn));if(Ot)return Ot}}return null}return Ue(this,[])}findWrapping(x){for(let le=0;le<this.wrapCache.length;le+=2)if(this.wrapCache[le]==x)return this.wrapCache[le+1];let H=this.computeWrapping(x);return this.wrapCache.push(x,H),H}computeWrapping(x){let H=Object.create(null),le=[{match:this,type:null,via:null}];for(;le.length;){let Ce=le.shift(),Ue=Ce.match;if(Ue.matchType(x)){let Ve=[];for(let bt=Ce;bt.type;bt=bt.via)Ve.push(bt.type);return Ve.reverse()}for(let Ve=0;Ve<Ue.next.length;Ve++){let{type:bt,next:yt}=Ue.next[Ve];!bt.isLeaf&&!bt.hasRequiredAttrs()&&!(bt.name in H)&&(!Ce.type||yt.validEnd)&&(le.push({match:bt.contentMatch,type:bt,via:Ce}),H[bt.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(x){if(x>=this.next.length)throw new RangeError(`There's no ${x}th edge in this content match`);return this.next[x]}toString(){let x=[];function H(le){x.push(le);for(let Ce=0;Ce<le.next.length;Ce++)x.indexOf(le.next[Ce].next)==-1&&H(le.next[Ce].next)}return H(this),x.map((le,Ce)=>{let Ue=Ce+(le.validEnd?"*":" ")+" ";for(let Ve=0;Ve<le.next.length;Ve++)Ue+=(Ve?", ":"")+le.next[Ve].type.name+"->"+x.indexOf(le.next[Ve].next);return Ue}).join(`
`)}}U.empty=new U(!0);class Z{constructor(x,H){this.string=x,this.nodeTypes=H,this.inline=null,this.pos=0,this.tokens=x.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(x){return this.next==x&&(this.pos++||!0)}err(x){throw new SyntaxError(x+" (in content expression '"+this.string+"')")}}function F(Te){let x=[];do x.push(z(Te));while(Te.eat("|"));return x.length==1?x[0]:{type:"choice",exprs:x}}function z(Te){let x=[];do x.push(G(Te));while(Te.next&&Te.next!=")"&&Te.next!="|");return x.length==1?x[0]:{type:"seq",exprs:x}}function G(Te){let x=Y(Te);for(;;)if(Te.eat("+"))x={type:"plus",expr:x};else if(Te.eat("*"))x={type:"star",expr:x};else if(Te.eat("?"))x={type:"opt",expr:x};else if(Te.eat("{"))x=k(Te,x);else break;return x}function V(Te){/\D/.test(Te.next)&&Te.err("Expected number, got '"+Te.next+"'");let x=Number(Te.next);return Te.pos++,x}function k(Te,x){let H=V(Te),le=H;return Te.eat(",")&&(Te.next!="}"?le=V(Te):le=-1),Te.eat("}")||Te.err("Unclosed braced range"),{type:"range",min:H,max:le,expr:x}}function K(Te,x){let H=Te.nodeTypes,le=H[x];if(le)return[le];let Ce=[];for(let Ue in H){let Ve=H[Ue];Ve.groups.indexOf(x)>-1&&Ce.push(Ve)}return Ce.length==0&&Te.err("No node type or group '"+x+"' found"),Ce}function Y(Te){if(Te.eat("(")){let x=F(Te);return Te.eat(")")||Te.err("Missing closing paren"),x}else if(/\W/.test(Te.next))Te.err("Unexpected token '"+Te.next+"'");else{let x=K(Te,Te.next).map(H=>(Te.inline==null?Te.inline=H.isInline:Te.inline!=H.isInline&&Te.err("Mixing inline and block content"),{type:"name",value:H}));return Te.pos++,x.length==1?x[0]:{type:"choice",exprs:x}}}function ee(Te){let x=[[]];return Ce(Ue(Te,0),H()),x;function H(){return x.push([])-1}function le(Ve,bt,yt){let Qt={term:yt,to:bt};return x[Ve].push(Qt),Qt}function Ce(Ve,bt){Ve.forEach(yt=>yt.to=bt)}function Ue(Ve,bt){if(Ve.type=="choice")return Ve.exprs.reduce((yt,Qt)=>yt.concat(Ue(Qt,bt)),[]);if(Ve.type=="seq")for(let yt=0;;yt++){let Qt=Ue(Ve.exprs[yt],bt);if(yt==Ve.exprs.length-1)return Qt;Ce(Qt,bt=H())}else if(Ve.type=="star"){let yt=H();return le(bt,yt),Ce(Ue(Ve.expr,yt),yt),[le(yt)]}else if(Ve.type=="plus"){let yt=H();return Ce(Ue(Ve.expr,bt),yt),Ce(Ue(Ve.expr,yt),yt),[le(yt)]}else{if(Ve.type=="opt")return[le(bt)].concat(Ue(Ve.expr,bt));if(Ve.type=="range"){let yt=bt;for(let Qt=0;Qt<Ve.min;Qt++){let tn=H();Ce(Ue(Ve.expr,yt),tn),yt=tn}if(Ve.max==-1)Ce(Ue(Ve.expr,yt),yt);else for(let Qt=Ve.min;Qt<Ve.max;Qt++){let tn=H();le(yt,tn),Ce(Ue(Ve.expr,yt),tn),yt=tn}return[le(yt)]}else{if(Ve.type=="name")return[le(bt,void 0,Ve.value)];throw new Error("Unknown expr type")}}}}function ae(Te,x){return x-Te}function he(Te,x){let H=[];return le(x),H.sort(ae);function le(Ce){let Ue=Te[Ce];if(Ue.length==1&&!Ue[0].term)return le(Ue[0].to);H.push(Ce);for(let Ve=0;Ve<Ue.length;Ve++){let{term:bt,to:yt}=Ue[Ve];!bt&&H.indexOf(yt)==-1&&le(yt)}}}function me(Te){let x=Object.create(null);return H(he(Te,0));function H(le){let Ce=[];le.forEach(Ve=>{Te[Ve].forEach(({term:bt,to:yt})=>{if(!bt)return;let Qt;for(let tn=0;tn<Ce.length;tn++)Ce[tn][0]==bt&&(Qt=Ce[tn][1]);he(Te,yt).forEach(tn=>{Qt||Ce.push([bt,Qt=[]]),Qt.indexOf(tn)==-1&&Qt.push(tn)})})});let Ue=x[le.join(",")]=new U(le.indexOf(Te.length-1)>-1);for(let Ve=0;Ve<Ce.length;Ve++){let bt=Ce[Ve][1].sort(ae);Ue.next.push({type:Ce[Ve][0],next:x[bt.join(",")]||H(bt)})}return Ue}}function Ye(Te,x){for(let H=0,le=[Te];H<le.length;H++){let Ce=le[H],Ue=!Ce.validEnd,Ve=[];for(let bt=0;bt<Ce.next.length;bt++){let{type:yt,next:Qt}=Ce.next[bt];Ve.push(yt.name),Ue&&!(yt.isText||yt.hasRequiredAttrs())&&(Ue=!1),le.indexOf(Qt)==-1&&le.push(Qt)}Ue&&x.err("Only non-generatable nodes ("+Ve.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function se(Te){let x=Object.create(null);for(let H in Te){let le=Te[H];if(!le.hasDefault)return null;x[H]=le.default}return x}function ie(Te,x){let H=Object.create(null);for(let le in Te){let Ce=x&&x[le];if(Ce===void 0){let Ue=Te[le];if(Ue.hasDefault)Ce=Ue.default;else throw new RangeError("No value supplied for attribute "+le)}H[le]=Ce}return H}function Ee(Te){let x=Object.create(null);if(Te)for(let H in Te)x[H]=new ce(Te[H]);return x}class Oe{constructor(x,H,le){this.name=x,this.schema=H,this.spec=le,this.markSet=null,this.groups=le.group?le.group.split(" "):[],this.attrs=Ee(le.attrs),this.defaultAttrs=se(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(le.inline||x=="text"),this.isText=x=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==U.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let x in this.attrs)if(this.attrs[x].isRequired)return!0;return!1}compatibleContent(x){return this==x||this.contentMatch.compatible(x.contentMatch)}computeAttrs(x){return!x&&this.defaultAttrs?this.defaultAttrs:ie(this.attrs,x)}create(x=null,H,le){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new L(this,this.computeAttrs(x),c.from(H),m.setFrom(le))}createChecked(x=null,H,le){return H=c.from(H),this.checkContent(H),new L(this,this.computeAttrs(x),H,m.setFrom(le))}createAndFill(x=null,H,le){if(x=this.computeAttrs(x),H=c.from(H),H.size){let Ve=this.contentMatch.fillBefore(H);if(!Ve)return null;H=Ve.append(H)}let Ce=this.contentMatch.matchFragment(H),Ue=Ce&&Ce.fillBefore(c.empty,!0);return Ue?new L(this,x,H.append(Ue),m.setFrom(le)):null}validContent(x){let H=this.contentMatch.matchFragment(x);if(!H||!H.validEnd)return!1;for(let le=0;le<x.childCount;le++)if(!this.allowsMarks(x.child(le).marks))return!1;return!0}checkContent(x){if(!this.validContent(x))throw new RangeError(`Invalid content for node ${this.name}: ${x.toString().slice(0,50)}`)}allowsMarkType(x){return this.markSet==null||this.markSet.indexOf(x)>-1}allowsMarks(x){if(this.markSet==null)return!0;for(let H=0;H<x.length;H++)if(!this.allowsMarkType(x[H].type))return!1;return!0}allowedMarks(x){if(this.markSet==null)return x;let H;for(let le=0;le<x.length;le++)this.allowsMarkType(x[le].type)?H&&H.push(x[le]):H||(H=x.slice(0,le));return H?H.length?H:m.none:x}static compile(x,H){let le=Object.create(null);x.forEach((Ue,Ve)=>le[Ue]=new Oe(Ue,H,Ve));let Ce=H.spec.topNode||"doc";if(!le[Ce])throw new RangeError("Schema is missing its top node type ('"+Ce+"')");if(!le.text)throw new RangeError("Every schema needs a 'text' type");for(let Ue in le.text.attrs)throw new RangeError("The text node type should not have attributes");return le}}class ce{constructor(x){this.hasDefault=Object.prototype.hasOwnProperty.call(x,"default"),this.default=x.default}get isRequired(){return!this.hasDefault}}class ue{constructor(x,H,le,Ce){this.name=x,this.rank=H,this.schema=le,this.spec=Ce,this.attrs=Ee(Ce.attrs),this.excluded=null;let Ue=se(this.attrs);this.instance=Ue?new m(this,Ue):null}create(x=null){return!x&&this.instance?this.instance:new m(this,ie(this.attrs,x))}static compile(x,H){let le=Object.create(null),Ce=0;return x.forEach((Ue,Ve)=>le[Ue]=new ue(Ue,Ce++,H,Ve)),le}removeFromSet(x){for(var H=0;H<x.length;H++)x[H].type==this&&(x=x.slice(0,H).concat(x.slice(H+1)),H--);return x}isInSet(x){for(let H=0;H<x.length;H++)if(x[H].type==this)return x[H]}excludes(x){return this.excluded.indexOf(x)>-1}}class pe{constructor(x){this.cached=Object.create(null);let H=this.spec={};for(let Ce in x)H[Ce]=x[Ce];H.nodes=s.from(x.nodes),H.marks=s.from(x.marks||{}),this.nodes=Oe.compile(this.spec.nodes,this),this.marks=ue.compile(this.spec.marks,this);let le=Object.create(null);for(let Ce in this.nodes){if(Ce in this.marks)throw new RangeError(Ce+" can not be both a node and a mark");let Ue=this.nodes[Ce],Ve=Ue.spec.content||"",bt=Ue.spec.marks;Ue.contentMatch=le[Ve]||(le[Ve]=U.parse(Ve,this.nodes)),Ue.inlineContent=Ue.contentMatch.inlineContent,Ue.markSet=bt=="_"?null:bt?$e(this,bt.split(" ")):bt==""||!Ue.inlineContent?[]:null}for(let Ce in this.marks){let Ue=this.marks[Ce],Ve=Ue.spec.excludes;Ue.excluded=Ve==null?[Ue]:Ve==""?[]:$e(this,Ve.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(x,H=null,le,Ce){if(typeof x=="string")x=this.nodeType(x);else if(x instanceof Oe){if(x.schema!=this)throw new RangeError("Node type from different schema used ("+x.name+")")}else throw new RangeError("Invalid node type: "+x);return x.createChecked(H,le,Ce)}text(x,H){let le=this.nodes.text;return new C(le,le.defaultAttrs,x,m.setFrom(H))}mark(x,H){return typeof x=="string"&&(x=this.marks[x]),x.create(H)}nodeFromJSON(x){return L.fromJSON(this,x)}markFromJSON(x){return m.fromJSON(this,x)}nodeType(x){let H=this.nodes[x];if(!H)throw new RangeError("Unknown node type: "+x);return H}}function $e(Te,x){let H=[];for(let le=0;le<x.length;le++){let Ce=x[le],Ue=Te.marks[Ce],Ve=Ue;if(Ue)H.push(Ue);else for(let bt in Te.marks){let yt=Te.marks[bt];(Ce=="_"||yt.spec.group&&yt.spec.group.split(" ").indexOf(Ce)>-1)&&H.push(Ve=yt)}if(!Ve)throw new SyntaxError("Unknown mark type: '"+x[le]+"'")}return H}class ne{constructor(x,H){this.schema=x,this.rules=H,this.tags=[],this.styles=[],H.forEach(le=>{le.tag?this.tags.push(le):le.style&&this.styles.push(le)}),this.normalizeLists=!this.tags.some(le=>{if(!/^(ul|ol)\b/.test(le.tag)||!le.node)return!1;let Ce=x.nodes[le.node];return Ce.contentMatch.matchType(Ce)})}parse(x,H={}){let le=new rn(this,H,!1);return le.addAll(x,H.from,H.to),le.finish()}parseSlice(x,H={}){let le=new rn(this,H,!0);return le.addAll(x,H.from,H.to),v.maxOpen(le.finish())}matchTag(x,H,le){for(let Ce=le?this.tags.indexOf(le)+1:0;Ce<this.tags.length;Ce++){let Ue=this.tags[Ce];if(je(x,Ue.tag)&&(Ue.namespace===void 0||x.namespaceURI==Ue.namespace)&&(!Ue.context||H.matchesContext(Ue.context))){if(Ue.getAttrs){let Ve=Ue.getAttrs(x);if(Ve===!1)continue;Ue.attrs=Ve||void 0}return Ue}}}matchStyle(x,H,le,Ce){for(let Ue=Ce?this.styles.indexOf(Ce)+1:0;Ue<this.styles.length;Ue++){let Ve=this.styles[Ue],bt=Ve.style;if(!(bt.indexOf(x)!=0||Ve.context&&!le.matchesContext(Ve.context)||bt.length>x.length&&(bt.charCodeAt(x.length)!=61||bt.slice(x.length+1)!=H))){if(Ve.getAttrs){let yt=Ve.getAttrs(H);if(yt===!1)continue;Ve.attrs=yt||void 0}return Ve}}}static schemaRules(x){let H=[];function le(Ce){let Ue=Ce.priority==null?50:Ce.priority,Ve=0;for(;Ve<H.length;Ve++){let bt=H[Ve];if((bt.priority==null?50:bt.priority)<Ue)break}H.splice(Ve,0,Ce)}for(let Ce in x.marks){let Ue=x.marks[Ce].spec.parseDOM;Ue&&Ue.forEach(Ve=>{le(Ve=rt(Ve)),Ve.mark||Ve.ignore||Ve.clearMark||(Ve.mark=Ce)})}for(let Ce in x.nodes){let Ue=x.nodes[Ce].spec.parseDOM;Ue&&Ue.forEach(Ve=>{le(Ve=rt(Ve)),Ve.node||Ve.ignore||Ve.mark||(Ve.node=Ce)})}return H}static fromSchema(x){return x.cached.domParser||(x.cached.domParser=new ne(x,ne.schemaRules(x)))}}const X={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},q={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ne={ol:!0,ul:!0},Qe=1,Ze=2,tt=4;function Ft(Te,x,H){return x!=null?(x?Qe:0)|(x==="full"?Ze:0):Te&&Te.whitespace=="pre"?Qe|Ze:H&~tt}class Lt{constructor(x,H,le,Ce,Ue,Ve,bt){this.type=x,this.attrs=H,this.marks=le,this.pendingMarks=Ce,this.solid=Ue,this.options=bt,this.content=[],this.activeMarks=m.none,this.stashMarks=[],this.match=Ve||(bt&tt?null:x.contentMatch)}findWrapping(x){if(!this.match){if(!this.type)return[];let H=this.type.contentMatch.fillBefore(c.from(x));if(H)this.match=this.type.contentMatch.matchFragment(H);else{let le=this.type.contentMatch,Ce;return(Ce=le.findWrapping(x.type))?(this.match=le,Ce):null}}return this.match.findWrapping(x.type)}finish(x){if(!(this.options&Qe)){let le=this.content[this.content.length-1],Ce;if(le&&le.isText&&(Ce=/[ \t\r\n\u000c]+$/.exec(le.text))){let Ue=le;le.text.length==Ce[0].length?this.content.pop():this.content[this.content.length-1]=Ue.withText(Ue.text.slice(0,Ue.text.length-Ce[0].length))}}let H=c.from(this.content);return!x&&this.match&&(H=H.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,H,this.marks):H}popFromStashMark(x){for(let H=this.stashMarks.length-1;H>=0;H--)if(x.eq(this.stashMarks[H]))return this.stashMarks.splice(H,1)[0]}applyPending(x){for(let H=0,le=this.pendingMarks;H<le.length;H++){let Ce=le[H];(this.type?this.type.allowsMarkType(Ce.type):Pe(Ce.type,x))&&!Ce.isInSet(this.activeMarks)&&(this.activeMarks=Ce.addToSet(this.activeMarks),this.pendingMarks=Ce.removeFromSet(this.pendingMarks))}}inlineContext(x){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:x.parentNode&&!X.hasOwnProperty(x.parentNode.nodeName.toLowerCase())}}class rn{constructor(x,H,le){this.parser=x,this.options=H,this.isOpen=le,this.open=0;let Ce=H.topNode,Ue,Ve=Ft(null,H.preserveWhitespace,0)|(le?tt:0);Ce?Ue=new Lt(Ce.type,Ce.attrs,m.none,m.none,!0,H.topMatch||Ce.type.contentMatch,Ve):le?Ue=new Lt(null,null,m.none,m.none,!0,null,Ve):Ue=new Lt(x.schema.topNodeType,null,m.none,m.none,!0,null,Ve),this.nodes=[Ue],this.find=H.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(x){if(x.nodeType==3)this.addTextNode(x);else if(x.nodeType==1){let H=x.getAttribute("style");if(!H)this.addElement(x);else{let le=this.readStyles(Le(H));if(!le)return;let[Ce,Ue]=le,Ve=this.top;for(let bt=0;bt<Ue.length;bt++)this.removePendingMark(Ue[bt],Ve);for(let bt=0;bt<Ce.length;bt++)this.addPendingMark(Ce[bt]);this.addElement(x);for(let bt=0;bt<Ce.length;bt++)this.removePendingMark(Ce[bt],Ve);for(let bt=0;bt<Ue.length;bt++)this.addPendingMark(Ue[bt])}}}addTextNode(x){let H=x.nodeValue,le=this.top;if(le.options&Ze||le.inlineContext(x)||/[^ \t\r\n\u000c]/.test(H)){if(le.options&Qe)le.options&Ze?H=H.replace(/\r\n?/g,`
`):H=H.replace(/\r?\n|\r/g," ");else if(H=H.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(H)&&this.open==this.nodes.length-1){let Ce=le.content[le.content.length-1],Ue=x.previousSibling;(!Ce||Ue&&Ue.nodeName=="BR"||Ce.isText&&/[ \t\r\n\u000c]$/.test(Ce.text))&&(H=H.slice(1))}H&&this.insertNode(this.parser.schema.text(H)),this.findInText(x)}else this.findInside(x)}addElement(x,H){let le=x.nodeName.toLowerCase(),Ce;Ne.hasOwnProperty(le)&&this.parser.normalizeLists&&ht(x);let Ue=this.options.ruleFromNode&&this.options.ruleFromNode(x)||(Ce=this.parser.matchTag(x,this,H));if(Ue?Ue.ignore:q.hasOwnProperty(le))this.findInside(x),this.ignoreFallback(x);else if(!Ue||Ue.skip||Ue.closeParent){Ue&&Ue.closeParent?this.open=Math.max(0,this.open-1):Ue&&Ue.skip.nodeType&&(x=Ue.skip);let Ve,bt=this.top,yt=this.needsBlock;if(X.hasOwnProperty(le))bt.content.length&&bt.content[0].isInline&&this.open&&(this.open--,bt=this.top),Ve=!0,bt.type||(this.needsBlock=!0);else if(!x.firstChild){this.leafFallback(x);return}this.addAll(x),Ve&&this.sync(bt),this.needsBlock=yt}else this.addElementByRule(x,Ue,Ue.consuming===!1?Ce:void 0)}leafFallback(x){x.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(x.ownerDocument.createTextNode(`
`))}ignoreFallback(x){x.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(x){let H=m.none,le=m.none;e:for(let Ce=0;Ce<x.length;Ce+=2)for(let Ue=void 0;;){let Ve=this.parser.matchStyle(x[Ce],x[Ce+1],this,Ue);if(!Ve)continue e;if(Ve.ignore)return null;if(Ve.clearMark?this.top.pendingMarks.forEach(bt=>{Ve.clearMark(bt)&&(le=bt.addToSet(le))}):H=this.parser.schema.marks[Ve.mark].create(Ve.attrs).addToSet(H),Ve.consuming===!1)Ue=Ve;else break}return[H,le]}addElementByRule(x,H,le){let Ce,Ue,Ve;H.node?(Ue=this.parser.schema.nodes[H.node],Ue.isLeaf?this.insertNode(Ue.create(H.attrs))||this.leafFallback(x):Ce=this.enter(Ue,H.attrs||null,H.preserveWhitespace)):(Ve=this.parser.schema.marks[H.mark].create(H.attrs),this.addPendingMark(Ve));let bt=this.top;if(Ue&&Ue.isLeaf)this.findInside(x);else if(le)this.addElement(x,le);else if(H.getContent)this.findInside(x),H.getContent(x,this.parser.schema).forEach(yt=>this.insertNode(yt));else{let yt=x;typeof H.contentElement=="string"?yt=x.querySelector(H.contentElement):typeof H.contentElement=="function"?yt=H.contentElement(x):H.contentElement&&(yt=H.contentElement),this.findAround(x,yt,!0),this.addAll(yt)}Ce&&this.sync(bt)&&this.open--,Ve&&this.removePendingMark(Ve,bt)}addAll(x,H,le){let Ce=H||0;for(let Ue=H?x.childNodes[H]:x.firstChild,Ve=le==null?null:x.childNodes[le];Ue!=Ve;Ue=Ue.nextSibling,++Ce)this.findAtPoint(x,Ce),this.addDOM(Ue);this.findAtPoint(x,Ce)}findPlace(x){let H,le;for(let Ce=this.open;Ce>=0;Ce--){let Ue=this.nodes[Ce],Ve=Ue.findWrapping(x);if(Ve&&(!H||H.length>Ve.length)&&(H=Ve,le=Ue,!Ve.length)||Ue.solid)break}if(!H)return!1;this.sync(le);for(let Ce=0;Ce<H.length;Ce++)this.enterInner(H[Ce],null,!1);return!0}insertNode(x){if(x.isInline&&this.needsBlock&&!this.top.type){let H=this.textblockFromContext();H&&this.enterInner(H)}if(this.findPlace(x)){this.closeExtra();let H=this.top;H.applyPending(x.type),H.match&&(H.match=H.match.matchType(x.type));let le=H.activeMarks;for(let Ce=0;Ce<x.marks.length;Ce++)(!H.type||H.type.allowsMarkType(x.marks[Ce].type))&&(le=x.marks[Ce].addToSet(le));return H.content.push(x.mark(le)),!0}return!1}enter(x,H,le){let Ce=this.findPlace(x.create(H));return Ce&&this.enterInner(x,H,!0,le),Ce}enterInner(x,H=null,le=!1,Ce){this.closeExtra();let Ue=this.top;Ue.applyPending(x),Ue.match=Ue.match&&Ue.match.matchType(x);let Ve=Ft(x,Ce,Ue.options);Ue.options&tt&&Ue.content.length==0&&(Ve|=tt),this.nodes.push(new Lt(x,H,Ue.activeMarks,Ue.pendingMarks,le,null,Ve)),this.open++}closeExtra(x=!1){let H=this.nodes.length-1;if(H>this.open){for(;H>this.open;H--)this.nodes[H-1].content.push(this.nodes[H].finish(x));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(x){for(let H=this.open;H>=0;H--)if(this.nodes[H]==x)return this.open=H,!0;return!1}get currentPos(){this.closeExtra();let x=0;for(let H=this.open;H>=0;H--){let le=this.nodes[H].content;for(let Ce=le.length-1;Ce>=0;Ce--)x+=le[Ce].nodeSize;H&&x++}return x}findAtPoint(x,H){if(this.find)for(let le=0;le<this.find.length;le++)this.find[le].node==x&&this.find[le].offset==H&&(this.find[le].pos=this.currentPos)}findInside(x){if(this.find)for(let H=0;H<this.find.length;H++)this.find[H].pos==null&&x.nodeType==1&&x.contains(this.find[H].node)&&(this.find[H].pos=this.currentPos)}findAround(x,H,le){if(x!=H&&this.find)for(let Ce=0;Ce<this.find.length;Ce++)this.find[Ce].pos==null&&x.nodeType==1&&x.contains(this.find[Ce].node)&&H.compareDocumentPosition(this.find[Ce].node)&(le?2:4)&&(this.find[Ce].pos=this.currentPos)}findInText(x){if(this.find)for(let H=0;H<this.find.length;H++)this.find[H].node==x&&(this.find[H].pos=this.currentPos-(x.nodeValue.length-this.find[H].offset))}matchesContext(x){if(x.indexOf("|")>-1)return x.split(/\s*\|\s*/).some(this.matchesContext,this);let H=x.split("/"),le=this.options.context,Ce=!this.isOpen&&(!le||le.parent.type==this.nodes[0].type),Ue=-(le?le.depth+1:0)+(Ce?0:1),Ve=(bt,yt)=>{for(;bt>=0;bt--){let Qt=H[bt];if(Qt==""){if(bt==H.length-1||bt==0)continue;for(;yt>=Ue;yt--)if(Ve(bt-1,yt))return!0;return!1}else{let tn=yt>0||yt==0&&Ce?this.nodes[yt].type:le&&yt>=Ue?le.node(yt-Ue).type:null;if(!tn||tn.name!=Qt&&tn.groups.indexOf(Qt)==-1)return!1;yt--}}return!0};return Ve(H.length-1,this.open)}textblockFromContext(){let x=this.options.context;if(x)for(let H=x.depth;H>=0;H--){let le=x.node(H).contentMatchAt(x.indexAfter(H)).defaultType;if(le&&le.isTextblock&&le.defaultAttrs)return le}for(let H in this.parser.schema.nodes){let le=this.parser.schema.nodes[H];if(le.isTextblock&&le.defaultAttrs)return le}}addPendingMark(x){let H=de(x,this.top.pendingMarks);H&&this.top.stashMarks.push(H),this.top.pendingMarks=x.addToSet(this.top.pendingMarks)}removePendingMark(x,H){for(let le=this.open;le>=0;le--){let Ce=this.nodes[le];if(Ce.pendingMarks.lastIndexOf(x)>-1)Ce.pendingMarks=x.removeFromSet(Ce.pendingMarks);else{Ce.activeMarks=x.removeFromSet(Ce.activeMarks);let Ve=Ce.popFromStashMark(x);Ve&&Ce.type&&Ce.type.allowsMarkType(Ve.type)&&(Ce.activeMarks=Ve.addToSet(Ce.activeMarks))}if(Ce==H)break}}}function ht(Te){for(let x=Te.firstChild,H=null;x;x=x.nextSibling){let le=x.nodeType==1?x.nodeName.toLowerCase():null;le&&Ne.hasOwnProperty(le)&&H?(H.appendChild(x),x=H):le=="li"?H=x:le&&(H=null)}}function je(Te,x){return(Te.matches||Te.msMatchesSelector||Te.webkitMatchesSelector||Te.mozMatchesSelector).call(Te,x)}function Le(Te){let x=/\s*([\w-]+)\s*:\s*([^;]+)/g,H,le=[];for(;H=x.exec(Te);)le.push(H[1],H[2].trim());return le}function rt(Te){let x={};for(let H in Te)x[H]=Te[H];return x}function Pe(Te,x){let H=x.schema.nodes;for(let le in H){let Ce=H[le];if(!Ce.allowsMarkType(Te))continue;let Ue=[],Ve=bt=>{Ue.push(bt);for(let yt=0;yt<bt.edgeCount;yt++){let{type:Qt,next:tn}=bt.edge(yt);if(Qt==x||Ue.indexOf(tn)<0&&Ve(tn))return!0}};if(Ve(Ce.contentMatch))return!0}}function de(Te,x){for(let H=0;H<x.length;H++)if(Te.eq(x[H]))return x[H]}class be{constructor(x,H){this.nodes=x,this.marks=H}serializeFragment(x,H={},le){le||(le=ke(H).createDocumentFragment());let Ce=le,Ue=[];return x.forEach(Ve=>{if(Ue.length||Ve.marks.length){let bt=0,yt=0;for(;bt<Ue.length&&yt<Ve.marks.length;){let Qt=Ve.marks[yt];if(!this.marks[Qt.type.name]){yt++;continue}if(!Qt.eq(Ue[bt][0])||Qt.type.spec.spanning===!1)break;bt++,yt++}for(;bt<Ue.length;)Ce=Ue.pop()[1];for(;yt<Ve.marks.length;){let Qt=Ve.marks[yt++],tn=this.serializeMark(Qt,Ve.isInline,H);tn&&(Ue.push([Qt,Ce]),Ce.appendChild(tn.dom),Ce=tn.contentDOM||tn.dom)}}Ce.appendChild(this.serializeNodeInner(Ve,H))}),le}serializeNodeInner(x,H){let{dom:le,contentDOM:Ce}=be.renderSpec(ke(H),this.nodes[x.type.name](x));if(Ce){if(x.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(x.content,H,Ce)}return le}serializeNode(x,H={}){let le=this.serializeNodeInner(x,H);for(let Ce=x.marks.length-1;Ce>=0;Ce--){let Ue=this.serializeMark(x.marks[Ce],x.isInline,H);Ue&&((Ue.contentDOM||Ue.dom).appendChild(le),le=Ue.dom)}return le}serializeMark(x,H,le={}){let Ce=this.marks[x.type.name];return Ce&&be.renderSpec(ke(le),Ce(x,H))}static renderSpec(x,H,le=null){if(typeof H=="string")return{dom:x.createTextNode(H)};if(H.nodeType!=null)return{dom:H};if(H.dom&&H.dom.nodeType!=null)return H;let Ce=H[0],Ue=Ce.indexOf(" ");Ue>0&&(le=Ce.slice(0,Ue),Ce=Ce.slice(Ue+1));let Ve,bt=le?x.createElementNS(le,Ce):x.createElement(Ce),yt=H[1],Qt=1;if(yt&&typeof yt=="object"&&yt.nodeType==null&&!Array.isArray(yt)){Qt=2;for(let tn in yt)if(yt[tn]!=null){let Kn=tn.indexOf(" ");Kn>0?bt.setAttributeNS(tn.slice(0,Kn),tn.slice(Kn+1),yt[tn]):bt.setAttribute(tn,yt[tn])}}for(let tn=Qt;tn<H.length;tn++){let Kn=H[tn];if(Kn===0){if(tn<H.length-1||tn>Qt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:bt,contentDOM:bt}}else{let{dom:Ot,contentDOM:lt}=be.renderSpec(x,Kn,le);if(bt.appendChild(Ot),lt){if(Ve)throw new RangeError("Multiple content holes");Ve=lt}}}return{dom:bt,contentDOM:Ve}}static fromSchema(x){return x.cached.domSerializer||(x.cached.domSerializer=new be(this.nodesFromSchema(x),this.marksFromSchema(x)))}static nodesFromSchema(x){let H=Ie(x.nodes);return H.text||(H.text=le=>le.text),H}static marksFromSchema(x){return Ie(x.marks)}}function Ie(Te){let x={};for(let H in Te){let le=Te[H].spec.toDOM;le&&(x[H]=le)}return x}function ke(Te){return Te.document||window.document}},function($,n,t){"use strict";t.d(n,"d",function(){return E}),t.d(n,"a",function(){return S}),t.d(n,"c",function(){return P}),t.d(n,"b",function(){return D});var e=t(0),s=t(2),o=t(6),a=t.n(o),c=t(8),l=t(10),p=t(28),h={buttonBase:"frontend-pencraft-Button-module__buttonBase--2lTCc",button:"frontend-pencraft-Button-module__button--3hZ0m",grow:"frontend-pencraft-Button-module__grow--20uHO",size_small:"frontend-pencraft-Button-module__size_small--1Nmxp",size_medium:"frontend-pencraft-Button-module__size_medium--187Vn",size_large:"frontend-pencraft-Button-module__size_large--lsJrf",shadow_medium:"frontend-pencraft-Button-module__shadow_medium--TVeu6",iconButton:"frontend-pencraft-Button-module__iconButton--2gz9x frontend-pencraft-Button-module__buttonBase--2lTCc",size_24:"frontend-pencraft-Button-module__size_24--2fOAv",size_32:"frontend-pencraft-Button-module__size_32--ZLlEb",size_40:"frontend-pencraft-Button-module__size_40--16CJn",size_56:"frontend-pencraft-Button-module__size_56--37FVf",rounded:"frontend-pencraft-Button-module__rounded--2hE1H","color_primary-text":"frontend-pencraft-Button-module__color_primary-text--1PyLr",fill_borderless:"frontend-pencraft-Button-module__fill_borderless--3xuC6",priority_primary:"frontend-pencraft-Button-module__priority_primary--3Oxcs","priority_primary-theme":"frontend-pencraft-Button-module__priority_primary-theme--m5KFb",priority_secondary:"frontend-pencraft-Button-module__priority_secondary--2PmO7",priority_destructive:"frontend-pencraft-Button-module__priority_destructive--1rXc3",priority_media:"frontend-pencraft-Button-module__priority_media--BgqK2",fill_empty:"frontend-pencraft-Button-module__fill_empty--1gFds",fill_filled:"frontend-pencraft-Button-module__fill_filled--3mJTN",outline_none:"frontend-pencraft-Button-module__outline_none--3tbcW",fill_outline:"frontend-pencraft-Button-module__fill_outline--1D-T4",inverted:"frontend-pencraft-Button-module__inverted--3hKVN",full:"frontend-pencraft-Button-module__full--cLd5-"},m=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(W,B,f)=>B in W?m(W,B,{enumerable:!0,configurable:!0,writable:!0,value:f}):W[B]=f,d=(W,B)=>{for(var f in B||(B={}))u.call(B,f)&&i(W,f,B[f]);if(O)for(var f of O(B))r.call(B,f)&&i(W,f,B[f]);return W},b=(W,B)=>g(W,v(B)),w=(W,B)=>{var f={};for(var y in W)u.call(W,y)&&B.indexOf(y)<0&&(f[y]=W[y]);if(W!=null&&O)for(var y of O(W))B.indexOf(y)<0&&r.call(W,y)&&(f[y]=W[y]);return f};const E=Object(s.forwardRef)((W,B)=>{var f=W,{onClick:y,href:M,localNavigation:N,newTab:A,className:L,resetCss:C}=f,R=w(f,["onClick","href","localNavigation","newTab","className","resetCss"]);const U=M?Z=>{y&&(y.call(Z.target,Z),Z.defaultPrevented)||Object(c.redirect)(M,{event:Z,local_navigation:N,newTab:A})}:y;return Object(e.h)("button",b(d({tabIndex:0,type:"button"},R),{className:a()("pencraft",L,C&&h.buttonBase),ref:B,onClick:U,"data-href":M}))});E.displayName="UnstyledButton";const S=Object(s.forwardRef)(function(B,f){var y=B,{className:M,priority:N="primary",size:A="medium",fill:L="filled",outline:C,rounded:R,disabled:U,grow:Z,leftIcon:F,rightIcon:z,allCaps:G,children:V,full:k,hiddenInput:K,justifyContent:Y="center"}=y,ee=w(y,["className","priority","size","fill","outline","rounded","disabled","grow","leftIcon","rightIcon","allCaps","children","full","hiddenInput","justifyContent"]);return Object(e.h)(E,d({className:a()(M,h.buttonBase,h.button,h[`priority_${N}`],h[`size_${A}`],h[`fill_${L}`],C&&h.outline_none,R&&h.rounded,Z&&h.grow,F!=null&&h.hasLeftIcon,z!=null&&h.hasRightIcon,k&&h.full,Y&&p.a[`flex-justify-${Y}`]),disabled:U,ref:f},ee),F,G?Object(e.h)(l.b.Meta,null,V):V,z,K)}),P=Object(s.forwardRef)((W,B)=>{var f=W,{className:y,size:M=40,priority:N="secondary",color:A,fill:L="empty",rounded:C=!0,inverted:R,grow:U,shadow:Z}=f,F=w(f,["className","size","priority","color","fill","rounded","inverted","grow","shadow"]);return Object(e.h)(E,d({ref:B,className:a()(y,h.iconButton,M!=null&&h[`size_${M}`],N&&h[`priority_${N}`],A&&h[`color_${A}`],L&&h[`fill_${L}`],R&&h.inverted,U&&h.grow,C&&h.rounded,Z&&h[`shadow_${Z}`])},F))}),D=W=>{var B=W,{href:f,download:y,className:M,priority:N="primary",size:A="medium",fill:L="filled",outline:C,rounded:R,grow:U}=B,Z=w(B,["href","download","className","priority","size","fill","outline","rounded","grow"]);return Object(e.h)("a",d({href:f,download:y,className:a()(M,h.buttonBase,h.button,h[`priority_${N}`],h[`size_${A}`],h[`fill_${L}`],C&&h.outline_none,R&&h.rounded,U&&h.grow)},Z))}},function($,n,t){var e=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(O,u,r)=>u in O?e(O,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):O[u]=r,h=(O,u)=>{for(var r in u||(u={}))c.call(u,r)&&p(O,r,u[r]);if(a)for(var r of a(u))l.call(u,r)&&p(O,r,u[r]);return O},m=(O,u)=>s(O,o(u));const g=t(126);$.exports=g,g.extend(t(460)).extend(t(461)).extend(t(462)).extend(t(463)).extend(t(464)).extend(t(316)).extend(t(465)).extend(t(466)).extend(t(467)).extend(t(468)).extend(t(469)).extend(t(470)).extend(t(471)).extend(t(472)).extend(t(473)).extend(t(474)).extend(t(316)).extend(v);function v(O,u,r){u.prototype.standardDateOrTime=function({long:w=!1}={}){if(this.add(1,"day").isBeforeNow())return this.standardDate();{const{secondsToLargestUnit:E}=t(9),S=r().diff(this,"seconds");return S<60?"just now":`${E(S,{long:w})} ago`}},u.prototype.startOfLastWeekday=function(){return(this.day()>1?this.subtract(1,"day"):this.subtract(this.day()+2,"day")).utc().startOf("day")},u.prototype.readerDateTime=function(){const w=this.diff(r(),"day");let E;return w===0?E=this.format("h:mm a"):w===-1?E="Yesterday":w>-7?E=this.standardDate():E=this.standardDate(),E},u.prototype.standardDate=function({full:w=!1}={}){return!w&&this.isSame(r(),"year")?this.format("MMM D"):this.format("MMM D, YYYY")},u.prototype.standardTime=function(){return this.format("MM-DD-YYYY")===r().format("MM-DD-YYYY")?this.format("h:mm a"):this.standardDate()},u.prototype.standardTimeWithSeconds=function(){return this.format("MM-DD-YYYY")===r().format("MM-DD-YYYY")?this.format("h:mm:ss a"):this.standardDate()},u.prototype.standardDatetime=function(){return this.format("MMM D [at] h:mm a")},u.prototype.standardDatetimeWithYear=function(){const w=r().year();return this.year()!=w?this.format("MMM D, YYYY [at] h:mm a"):this.format("MMM D [at] h:mm a")},u.prototype.min=function(...w){let E=this;for(let S of w)S=r(S),E.isAfter(S)&&(E=S);return E},u.prototype.max=function(...w){let E=this;for(let S of w)S=r(S),E.isBefore(S)&&(E=S);return E},u.prototype.minNow=function(){return this.min(r())},u.prototype.maxNow=function(){return this.max(r())},u.prototype.isBeforeNow=function(w){return this.isBefore(r(),w)},u.prototype.isAfterNow=function(w){return this.isAfter(r(),w)},u.prototype.isSameNow=function(w){return this.isSame(r(),w)};const i=r.en,d=m(h({},i),{relativeTime:{future:"in %s",past:"%s",s:"just now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}}),b=r.locale();r.locale("enshort",d),r.locale(b),u.prototype.fromNowShort=function(){return i?this.locale("enshort").fromNow():this.fromNow()}}},function($,n,t){"use strict";t.r(n),function(e){t.d(n,"substackDomain",function(){return i}),t.d(n,"CDN_URL",function(){return d}),t.d(n,"_getUrl",function(){return b}),t.d(n,"substackBaseUrl",function(){return w}),t.d(n,"substackUrl",function(){return E}),t.d(n,"getHostname",function(){return S}),t.d(n,"serializeQuery",function(){return P}),t.d(n,"pathWithQuery",function(){return D}),t.d(n,"getBaseUrl",function(){return W}),t.d(n,"getSubstackUrl",function(){return B}),t.d(n,"getSubscribeUrl",function(){return f}),t.d(n,"getPresubscribeUrl",function(){return y}),t.d(n,"getWebChatUrl",function(){return M}),t.d(n,"getDonateSubscriptionUrl",function(){return N}),t.d(n,"getOfferSubscribeUrl",function(){return A}),t.d(n,"getLikelyLoggedInParam",function(){return L}),t.d(n,"getPubAccountSettingsUrl",function(){return C}),t.d(n,"getBillingDetailsUrl",function(){return R}),t.d(n,"getEmailTestUrl",function(){return U}),t.d(n,"getGiftsUrl",function(){return Z}),t.d(n,"getChangeEmailUrl",function(){return F}),t.d(n,"getPublishBaseUrl",function(){return z}),t.d(n,"getPublishSettingsUrl",function(){return G}),t.d(n,"getGroupManagementUrl",function(){return V}),t.d(n,"getDashboardUrl",function(){return k}),t.d(n,"getNewDashboardUrl",function(){return K}),t.d(n,"getSubscriberDashboardUrl",function(){return Y}),t.d(n,"getMeetingOrderUrl",function(){return ee}),t.d(n,"getMeetingsUrl",function(){return ae}),t.d(n,"getMeetingAdminUrl",function(){return he}),t.d(n,"getProfileUrlById",function(){return me}),t.d(n,"getEditProfileUrl",function(){return Ye}),t.d(n,"getReaderProfileUrl",function(){return se}),t.d(n,"getBaseAppLinkUrl",function(){return ie}),t.d(n,"getUserAppLinkUrl",function(){return Ee}),t.d(n,"getChatAppLinkUrl",function(){return Oe}),t.d(n,"getPublicationAppLinkUrl",function(){return ce}),t.d(n,"getPublicationChatAppLinkUrl",function(){return ue}),t.d(n,"getCommunityPostAppLinkUrl",function(){return pe}),t.d(n,"getThreadsLandingPageUrl",function(){return $e}),t.d(n,"getPodcastArchiveUrl",function(){return ne}),t.d(n,"cloudinary",function(){return X}),t.d(n,"uncloudinary",function(){return q}),t.d(n,"extractDimensionsFromImageUrl",function(){return Ne}),t.d(n,"getCustomPublicationThemePreviewUrl",function(){return Qe}),t.d(n,"getCustomPublicationThemeDisablePreviewUrl",function(){return Ze}),t.d(n,"CHAT_FAQ_URL",function(){return tt}),t.d(n,"CHAT_EXAMPLES_URL",function(){return Ft}),t.d(n,"parseUrl",function(){return Lt}),t.d(n,"getMentionsUrl",function(){return rn}),t.d(n,"parsePostUrl",function(){return ht}),t.d(n,"getPostTagUrl",function(){return je}),t.d(n,"getAddPodcastToSectionUrl",function(){return Le}),t.d(n,"getImportPodcastToSectionUrl",function(){return rt}),t.d(n,"getEditPubPodcastUrl",function(){return Pe}),t.d(n,"getEditSectionPodcastUrl",function(){return de}),t.d(n,"stripeBaseUrl",function(){return be}),t.d(n,"getStripePlanUrl",function(){return Ie}),t.d(n,"getStripeInvoiceUrl",function(){return ke}),t.d(n,"getPostUrl",function(){return Te}),t.d(n,"getFeedCommentUrl",function(){return x}),t.d(n,"getFeedShortPostUrl",function(){return H}),t.d(n,"getPostUrlBySlug",function(){return le}),t.d(n,"getEditPostUrlById",function(){return Ce}),t.d(n,"getCloudinariedFavicons",function(){return Ue}),t.d(n,"getFeedUrl",function(){return Ve}),t.d(n,"isHostedByUnsplash",function(){return bt}),t.d(n,"isHostedBySubstack",function(){return yt}),t.d(n,"isOpenSubstackPostUrl",function(){return Qt}),t.d(n,"getNavigationBarItemUrl",function(){return tn}),t.d(n,"getSectionUrl",function(){return Kn}),t.d(n,"getPubConnectTwitterUrl",function(){return Ot}),t.d(n,"getConnectTwitterUrl",function(){return lt}),t.d(n,"getReaderPostUrl",function(){return Be});var s=t(92),o=t.n(s),a=t(237),c=t.n(a),l=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(_e,Ae,fe)=>Ae in _e?l(_e,Ae,{enumerable:!0,configurable:!0,writable:!0,value:fe}):_e[Ae]=fe,u=(_e,Ae)=>{for(var fe in Ae||(Ae={}))g.call(Ae,fe)&&O(_e,fe,Ae[fe]);if(m)for(var fe of m(Ae))v.call(Ae,fe)&&O(_e,fe,Ae[fe]);return _e},r=(_e,Ae)=>p(_e,h(Ae));const i=a.REVIEW_ENV_SUBDOMAIN?`${a.REVIEW_ENV_SUBDOMAIN}.substack.info`:e.env.SUBSTACK_DOMAIN||"substack.com",d="https://substackcdn.com";function b(_e){let Ae="https://",fe="";return Ae+_e+fe}const w=b(i),E=new URL(w);function S(_e,{forceSubdomain:Ae=!1}={}){if(e.env.LOCAL_HOSTNAME)return e.env.LOCAL_HOSTNAME;if(_e&&_e.custom_domain&&!_e.custom_domain_optional&&!Ae)return _e.custom_domain;let fe=i;return _e&&_e.subdomain!=="www"&&(fe=`${_e.subdomain}.${fe}`),fe}function P(_e){return Object.keys(_e).filter(Ae=>typeof _e[Ae]!="undefined"&&_e[Ae]!==null).map(Ae=>`${encodeURIComponent(Ae)}=${encodeURIComponent(_e[Ae])}`).join("&")}function D(_e,Ae){if(!_e)return"";if(!Ae)return _e;const fe=P(Ae),ft=fe?_e.indexOf("?")===-1?"?":"&":"";return`${_e}${ft}${fe}`}function W(_e,{forceSubdomain:Ae=!1}={}){if(_e==null?void 0:_e.rss_website_url)try{return new URL(_e.rss_website_url).origin}catch(ft){return _e.rss_website_url}else if(_e==null?void 0:_e.base_url)return _e.base_url;const fe=S(_e,{forceSubdomain:Ae});return b(fe)}function B(){return W()}function f(_e,{root:Ae,user:fe,addBase:ft,params:nt={}}={}){return Ae?/[&?]$/.test(Ae)||(Ae.includes("?")||Ae.endsWith("%%")?Ae+="&":Ae+="?"):Ae=ft?`${W(_e)}/subscribe?`:"/subscribe?",(fe==null?void 0:fe.email)&&(nt.autoSubmit=!0,nt.email=fe==null?void 0:fe.email),Ae+P(nt)}function y(_e){return`/api/v1/presubscribe/${_e.id}`}function M({pubId:_e,postId:Ae,commentId:fe,params:ft}){return D(`${B()}/chat${_e?`/${_e}`:""}${Ae?`/post/${Ae}`:""}${fe?`/reply/${fe}`:""}`,ft)}function N(_e,{root:Ae,addBase:fe,params:ft={}}={}){return Ae?/[&?]$/.test(Ae)||(Ae.includes("?")||Ae.endsWith("%%")?Ae+="&":Ae+="?"):Ae=fe?`${W(_e)}/donate?`:"/donate?",Ae+P(ft)}function A(_e,{root:Ae,user:fe,addBase:ft,offerCode:nt,params:ct={}}){return Ae?/[&?]$/.test(Ae)||(Ae.includes("?")||Ae.endsWith("%%")?Ae+="&":Ae+="?"):Ae=ft?`${W(_e)}/subscribe/offer/${nt}?`:`/subscribe/offer/${nt}?`,(fe==null?void 0:fe.email)&&(ct.autoSubmit=!0,ct.email=fe==null?void 0:fe.email),Ae+P(ct)}function L(_e,Ae){return Ae.custom_domain&&_e?"1":void 0}function C(_e,{addBase:Ae,params:fe,signedIn:ft}={}){const nt=L(ft,_e),ct=Ae?W(_e):"";return D(`${ct}/account`,u({lli:nt},fe))}function R(_e,{utm_source:Ae}={}){return D(`${W(_e)}/account/billing?details`,{utm_source:Ae})}function U(_e,{utm_source:Ae}={}){return D(`${W(_e)}/account/email-test`,{utm_source:Ae})}function Z({pub:_e}){return`${W(_e)}/account/gifts`}function F({utm_source:_e}={}){return D(`${B()}/account/email`,{utm_source:_e})}function z(_e,{addBase:Ae,baseUrlOptions:fe}={}){return`${Ae?W(_e,fe):""}/publish`}function G(_e,{addBase:Ae=!1,baseUrlOptions:fe={},section:ft="",params:nt}={}){let ct=D(`${z(_e,{addBase:Ae,baseUrlOptions:fe})}/settings`,nt);return ft&&(ct+=`#${ft}`),ct}function V(_e,{addBase:Ae=!1,baseUrlOptions:fe={},params:ft}={}){return D(`${z(_e,{addBase:Ae,baseUrlOptions:fe})}/groups`,ft)}function k(_e,{addBase:Ae,params:fe}={}){const nt=`${Ae?W(_e):""}/publish`;return fe?D(nt,fe):nt}function K(_e,{addBase:Ae,params:fe}={}){const nt=`${Ae?W(_e):""}/publish/dashboard`;return fe?D(nt,fe):nt}function Y(_e,{addBase:Ae,params:fe}={}){const nt=`${Ae?W(_e):""}/publish/subscribers`;return fe?D(nt,fe):nt}function ee(_e,Ae,{addBase:fe,params:ft,referrer:nt}={}){const Xe=`${fe?W(_e):""}/meetings/book/${Ae}`,gt=r(u({},ft),{referrer:nt});return ft||nt?D(Xe,gt):Xe}function ae(_e,{addBase:Ae,params:fe,referrer:ft}={}){const ct=`${Ae?W(_e):""}/meetings`,Xe=r(u({},fe),{referrer:ft});return fe||ft?D(ct,Xe):ct}function he(_e,{addBase:Ae,params:fe,filter:ft}={}){const ct=`${Ae?W(_e):""}/publish/meetings/${ft!=null?ft:"upcoming"}`;return fe?D(ct,fe):ct}function me(_e,Ae,{searchParams:fe,noBase:ft}={}){let ct=`${ft?"":B()}/profile/${_e}`;const Xe=Object(s.cleanSlug)(Ae,{hashIfEmpty:!0});return Xe&&(ct+=`-${Xe}`),D(ct,fe)}function Ye(){return`${B()}/profile/edit`}function se(_e,{utm_source:Ae,noBase:fe}={}){const ft=Ae?{utm_source:Ae}:void 0;return me(_e.author_id||_e.user_id||_e.id,_e.user_profile_name||_e.author_name||_e.name,{noBase:fe,searchParams:ft})}function ie(){return b(`open.${i}`)}function Ee({user_id:_e,user_name:Ae,utm_source:fe,utm_campaign:ft,redirect:nt}){let ct=`${ie()}/users/${_e}`;const Xe=Object(s.cleanSlug)(Ae,{hashIfEmpty:!0});return Xe&&(ct+=`-${Xe}`),D(ct,{utm_source:fe,utm_campaign:ft,redirect:nt})}function Oe({utm_source:_e,utm_campaign:Ae}){return D(`${ie()}/chat`,{utm_source:_e,utm_campaign:Ae})}function ce({subdomain:_e,utm_source:Ae,utm_campaign:fe,redirect:ft}){return D(`${ie()}/pub/${_e}`,{utm_source:Ae,utm_campaign:fe,redirect:ft})}function ue({pubKey:_e,utm_source:Ae,utm_campaign:fe,redirect:ft,modal:nt}){return D(`${ie()}/pub/${_e}/chat`,{utm_source:Ae,utm_campaign:fe,redirect:ft,modal:nt})}function pe({postId:_e,utm_source:Ae,utm_campaign:fe,redirect:ft,modal:nt}){return D(`${ie()}/chat/posts/${_e}`,{utm_source:Ae,utm_campaign:fe,redirect:ft,modal:nt})}function $e({pub:_e,postId:Ae,modal:fe,query:ft}){return D(`${W(_e)}/chat${Ae?`/posts/${Ae}`:""}`,u({modal:fe},ft))}function ne({pub:_e,params:Ae,section:fe}){return D(fe?`${W(_e)}/listen/${fe.slug}/archive`:`${W(_e)}/podcast/archive`,Ae)}function X(_e,Ae,{quality:fe="auto:good",format:ft="auto",crop:nt="limit",lossy:ct=!1,gravity:Xe=null,height:gt=null,aspect:Tt=null,version:Ut=null,smartCrop:qt=!1,skipDomainValidation:sn=!1,leadingSegments:_n=[],trailingSegments:Hn=[]}={}){var wn;if(!_e)return _e;_e.startsWith("/")&&!_e.startsWith("//")&&(_e=B()+_e),_e=q(_e);try{if(new URL(_e).hostname.endsWith(".localhost"))return _e}catch(Un){}if(typeof window!="undefined"&&((wn=window==null?void 0:window.location)==null?void 0:wn.hostname)&&["subwit.com","herokuapp.com"].reduce((Un,bn)=>Un||window.location.hostname.endsWith(bn),!1)&&(_e=_e.replace("//substack.com",`//${window.location.hostname}`)),_e.startsWith("https://substackcdn.com")||_e.startsWith(d))return _e;if(_e.startsWith("https://d3b3sm9t19x0yd.cloudfront.net"))return _e.replace(/^https:\/\/d3b3sm9t19x0yd\.cloudfront\.net/,d);if(_e.startsWith("https://res.cloudinary.com"))return _e.replace(/^https:\/\/res\.cloudinary\.com\/[^/]+/,d);if(!sn&&!_e.match(/^https?:\/\/(bucketeer[^/]*\.s3\.amazonaws\.com|(.*\.)?substack\.com|substack-post-media\.s3\.amazonaws\.com|substack-post-media-staging\.s3\.amazonaws\.com|substack-video\.s3\.amazonaws\.com|substack-video-staging\.s3\.amazonaws\.com|substack-staging-pr-\d+\.herokuapp\.com|.*\.ngrok\.io|.*\.subwit\.com|www\.shatnerchatner\.com|cyberrisk\.news|proofofwork\.news|www\.trapital\.co|www\.truehoop\.com|www\.creditwritedowns\.com|sinocism\.com|nb\.sinocism\.com|popular\.info|robertcottrell\.com|pbs\.twimg\.com|www\.theupside\.us|www\.exponentialview\.co|storage\.opensea\.io).*/))return _e;if(qt&&Ae&&gt){const Un=Ne(_e);if(Un){const bn=Ae/gt,cr=Un.width/Un.height;(bn<1&&cr>=1||bn>=1&&cr<1)&&Math.abs(bn-cr)>=.5&&(nt="fill",Xe="auto")}}return`${d}/image/fetch/${_n.concat([[Ae&&`w_${Ae}`,gt&&`h_${gt}`,nt&&(Ae||gt)&&`c_${nt}`,ft&&`f_${ft}`,fe&&`q_${fe}`,`fl_${ct?"lossy":"progressive:steep"}`,Xe&&`g_${Xe}`,Tt&&`ar_${Tt}`].filter(Un=>Un).join(",")]).concat(Hn).join("/")}/${encodeURIComponent(_e+(Ut?`${_e.indexOf("?")!==-1?"&":"?"}version=${Ut}`:""))}`}function q(_e){if(!_e)return _e;const Ae=[/^https:\/\/substackcdn\.com\/image\/fetch\/[^/]+\/(.+)$/i,/^https:\/\/substackcdn\.net\/image\/fetch\/[^/]+\/(.+)$/i,/^https:\/\/cdn\.substack\.com\/image\/fetch\/[^/]+\/(.+)$/i,/^https:\/\/cdn\.substack\.info\/image\/fetch\/[^/]+\/(.+)$/i,/^https:\/\/d3b3sm9t19x0yd\.cloudfront\.net\/image\/fetch\/[^/]+\/(.+)$/i,/^https:\/\/res\.cloudinary\.com\/hhsslviub\/image\/fetch\/[^/]+\/(.+)$/i];for(const fe of Ae){const ft=fe.exec(_e);if(ft)return decodeURIComponent(ft[1])}return _e}function Ne(_e){const Ae=_e.match(/(\d+)x(\d+)\.\w+$/);return Ae?{width:+Ae[1],height:+Ae[2]}:null}function Qe(_e,Ae){return`${W(_e)}/api/v1/custom-publication-theme/${Ae.id}/preview`}function Ze(_e){return`${W(_e)}/api/v1/custom-publication-theme/disable-preview`}const tt="https://substack.link/chat-faq",Ft="https://substack.link/chat-examples";function Lt(_e){const Ae=_e.trim();if(/\s/.test(Ae))return null;try{const fe=new URL(Ae);return["http:","https:"].includes(fe.protocol)?fe:null}catch(fe){return null}}const rn=(_e,Ae,fe,ft)=>{switch(_e){case"user":default:return Ee({user_id:Ae,user_name:fe,utm_source:"mentions"});case"pub":return ft?D(ft,{utm_source:"mentions"}):""}};function ht(_e){var Ae;const fe=Lt(_e);if(!fe)return null;const ft=(Ae=fe.pathname.match(/^\/p\/([^\/]+)$/))==null?void 0:Ae[1];if(!ft)return null;let nt,ct;return fe.hostname.endsWith(`.${E.hostname}`)?nt=fe.hostname.split(".")[0]:ct=fe.hostname,{slug:ft,subdomain:nt,customDomain:ct}}function je(_e,Ae,{addBase:fe=!1,query:ft={}}={}){return D(`${fe?W(_e):""}/t/${Ae.slug}`,ft)}const Le=({section:_e})=>`/publish/settings/new_podcast/${_e.id}`,rt=({section:_e})=>_e?`/publish/import/podcast/${_e.id}`:"",Pe=({pub:_e,addBase:Ae})=>`${Ae?W(_e):""}/publish/settings/podcast/edit`,de=({pub:_e,section:Ae,addBase:fe,referrer:ft})=>Ae?`${fe?W(_e):""}/publish/settings/podcast/${Ae.id}${ft?`?referrer=${ft}`:""}`:(console.error("section is missing when passed to getEditSectionPodcastUrl"),""),be="https://dashboard.stripe.com",Ie=(_e,Ae)=>`${be}/${_e.stripe_user_id}/prices/${Ae}`,ke=(_e,Ae)=>`${be}/${_e.stripe_user_id}/invoices/${Ae}`;function Te(_e,Ae,{noBase:fe,edit:ft,email:nt,comments:ct,commentId:Xe,commentInput:gt,highlightComment:Tt,replyToComment:Ut,commentContextId:qt,uuid:sn,urlParams:_n,signedIn:Hn=!1,feedViewer:wn=!1}={}){if(_e&&(_e=[_e].concat(_e.child_publications||[]).find(cr=>cr.id===(Ae==null?void 0:Ae.publication_id))||_e),(_e==null?void 0:_e.type)==="rss"&&Ae)return Ae.canonical_url||_e.rss_website_url;const Un=Ae?sn?Ae.uuid:Ae.slug:null;if((ft||!Un)&&_e&&(Ae==null?void 0:Ae.id))return`${fe?"":W(_e)}${Ce(_e,Ae.id,_n)}`;if(wn||!_e||!Ae||!Un){const cr=fe?"":W(),fr=Xe||(qt?Number(qt):null);return fr!=null?x(fr,{noBase:fe,urlParams:_n}):D(Ae?`${cr}/feed/post/${Ae.id}`:`${cr}/feed`,_n)}const bn=L(Hn,_e);return le(_e,Un,{noBase:fe,email:nt,comments:ct,commentId:Xe,commentInput:gt,highlightComment:Tt,replyToComment:Ut,commentContextId:qt,urlParams:u({lli:bn},_n)})}function x(_e,{noBase:Ae,urlParams:fe}={}){const ft=Ae?"":W();return D(`${ft}/feed/comment/${_e}`,fe)}function H(_e,{noBase:Ae}={}){return`${Ae?"":W()}/feed/short/${_e}`}function le(_e,Ae,{noBase:fe,email:ft,comments:nt,commentId:ct,commentInput:Xe,highlightComment:gt,replyToComment:Tt,commentContextId:Ut,urlParams:qt}={}){let sn="";return fe||(sn+=W(_e)),sn+=`/p/${Ae}`,nt&&(!ct||gt)&&(sn+="/comments"),ct&&!gt&&!Ut&&(sn+=`/comment/${ct}`),ft&&(sn+="/email"),qt&&(sn=D(sn,qt)),ct&&(gt||Tt)?sn+=`#comment-${ct}${Tt?"-reply":""}`:Xe&&(sn+="#input"),ct&&Ut&&(sn+=`/comment/${Ut}#comment-${ct}`),sn}function Ce(_e,Ae,fe){return D(`/publish/post/${Ae}`,fe)}function Ue(_e){const Ae=_e.html.map(fe=>{var ft;const nt=(ft=fe.match(/href="([^"]+)"/))==null?void 0:ft[1];return nt?fe.replace(nt,X(nt)):fe});return r(u({},_e),{html:Ae})}function Ve(){let _e="/feed";const Ae=B();return(typeof window=="undefined"||!window.location.href.startsWith(Ae))&&(_e=Ae+_e),_e}function bt(_e){return _e?_e.startsWith("https://images.unsplash.com/"):!1}function yt(_e){if(_e){if(_e.startsWith(d)||_e.startsWith("https://res.cloudinary.com")||_e.startsWith("https://bucketeer"))return!0;const{SUBSTACK_POST_MEDIA_BUCKET_NAME:Ae}=t(9);if(_e.startsWith(`https://${Ae}.s3.amazonaws.com`))return!0}return!1}function Qt(_e){if(!_e)return!1;const{hostname:Ae,pathname:fe}=new URL(_e);return Ae.startsWith("open.substack.com")?fe.startsWith("/pub/")&&fe.includes("/p/"):!1}function tn(_e,Ae,{addBase:fe}={}){var ft,nt;return Ae.section?Kn(_e,{addBase:fe,section:Ae.section}):Ae.post?Te(_e,Ae.post,{noBase:!fe}):Ae.postTag?je(_e,Ae.postTag,{addBase:fe}):fe&&/^\/[^/]/.test((ft=Ae.link_url)!=null?ft:"")?`${W(_e)}${Ae.link_url}`:(nt=Ae.link_url)!=null?nt:""}function Kn(_e,{addBase:Ae,section:fe}={}){if(fe=fe||(_e==null?void 0:_e.section),!fe)throw new Error("Section not found");return`${Ae?W(_e):""}/s/${fe.slug||fe.id}`}const Ot=(_e,{addBase:Ae,params:fe}={})=>{const ft=Ae&&_e?su.getBaseUrl(_e):"";return lt(u({base:ft},fe))},lt=_e=>{var Ae;const fe=`${(Ae=_e==null?void 0:_e.base)!=null?Ae:""}/api/v1/twitter/authorize`;return _e?D(fe,_e):fe};function Be(_e){return`${W()}/inbox/post/${_e}`}}.call(this,t(169))},function($,n,t){"use strict";t.d(n,"a",function(){return w});var e=t(0),s=t(2),o=t(6),a=t.n(o),c=t(8),l=t.n(c),p=Object.defineProperty,h=Object.defineProperties,m=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,u=(E,S,P)=>S in E?p(E,S,{enumerable:!0,configurable:!0,writable:!0,value:P}):E[S]=P,r=(E,S)=>{for(var P in S||(S={}))v.call(S,P)&&u(E,P,S[P]);if(g)for(var P of g(S))O.call(S,P)&&u(E,P,S[P]);return E},i=(E,S)=>h(E,m(S)),d=(E,S)=>{var P={};for(var D in E)v.call(E,D)&&S.indexOf(D)<0&&(P[D]=E[D]);if(E!=null&&g)for(var D of g(E))S.indexOf(D)<0&&O.call(E,D)&&(P[D]=E[D]);return P};const b=E=>{var S=E,{children:P,className:D=void 0,disabled:W=void 0,loading:B=void 0,type:f="button",href:y=void 0,localNavigation:M=!1,onClick:N=void 0,forwardedRef:A=void 0,newTab:L=void 0}=S,C=d(S,["children","className","disabled","loading","type","href","localNavigation","onClick","forwardedRef","newTab"]);const R=U=>{if(W||B){U&&U.preventDefault();return}N?N(U):y?Object(c.redirect)(y,{event:U,local_navigation:M,newTab:L}):f!=="submit"&&console.log("No onClick set!")};return Object(e.h)("button",i(r({tabIndex:0},C),{type:f,className:a()("button",D,{disabled:W}),disabled:W||B,onClick:R,ref:A}),B?"Please wait...":P)};n.b=b;const w=Object(s.forwardRef)((E,S)=>{var P=E,{onClick:D,href:W,localNavigation:B,newTab:f}=P,y=d(P,["onClick","href","localNavigation","newTab"]);const M=W?N=>{D&&(D.call(N.target,N),N.defaultPrevented)||Object(c.redirect)(W,{event:N,local_navigation:B,newTab:f})}:D;return Object(e.h)("button",i(r({tabIndex:0},y),{ref:S,onClick:M}))})},function($,n,t){"use strict";t.r(n),t.d(n,"CommandManager",function(){return m}),t.d(n,"Editor",function(){return xo}),t.d(n,"Extension",function(){return ee}),t.d(n,"InputRule",function(){return N}),t.d(n,"Mark",function(){return ho}),t.d(n,"Node",function(){return Jo}),t.d(n,"NodeView",function(){return gi}),t.d(n,"PasteRule",function(){return U}),t.d(n,"Tracker",function(){return hi}),t.d(n,"callOrReturn",function(){return w}),t.d(n,"combineTransactionSteps",function(){return sn}),t.d(n,"createChainableState",function(){return h}),t.d(n,"createDocument",function(){return Ut}),t.d(n,"createNodeFromContent",function(){return Ie}),t.d(n,"createStyleTag",function(){return $o}),t.d(n,"defaultBlockAt",function(){return _n}),t.d(n,"deleteProps",function(){return _e}),t.d(n,"elementFromString",function(){return be}),t.d(n,"escapeForRegEx",function(){return ao}),t.d(n,"extensions",function(){return zr}),t.d(n,"findChildren",function(){return Hn}),t.d(n,"findChildrenInRange",function(){return wn}),t.d(n,"findDuplicates",function(){return G}),t.d(n,"findParentNode",function(){return bn}),t.d(n,"findParentNodeClosestToPos",function(){return Un}),t.d(n,"fromString",function(){return S}),t.d(n,"generateHTML",function(){return ur}),t.d(n,"generateJSON",function(){return er}),t.d(n,"generateText",function(){return wt}),t.d(n,"getAttributes",function(){return pt}),t.d(n,"getAttributesFromExtensions",function(){return u}),t.d(n,"getChangedRanges",function(){return Gt}),t.d(n,"getDebugJSON",function(){return mn}),t.d(n,"getExtensionField",function(){return v}),t.d(n,"getHTMLFromFragment",function(){return cr}),t.d(n,"getMarkAttributes",function(){return mt}),t.d(n,"getMarkRange",function(){return Ze}),t.d(n,"getMarkType",function(){return tt}),t.d(n,"getMarksBetween",function(){return Cn}),t.d(n,"getNodeAttributes",function(){return Fe}),t.d(n,"getNodeType",function(){return r}),t.d(n,"getRenderedAttributes",function(){return d}),t.d(n,"getSchema",function(){return fr}),t.d(n,"getSchemaByResolvedExtensions",function(){return W}),t.d(n,"getSchemaTypeByName",function(){return B}),t.d(n,"getSchemaTypeNameByName",function(){return Be}),t.d(n,"getSplittedAttributes",function(){return tr}),t.d(n,"getText",function(){return jr}),t.d(n,"getTextBetween",function(){return ae}),t.d(n,"getTextContentFromNodes",function(){return y}),t.d(n,"getTextSerializersFromSchema",function(){return he}),t.d(n,"injectExtensionAttributesToParseRule",function(){return P}),t.d(n,"inputRulesPlugin",function(){return C}),t.d(n,"isActive",function(){return At}),t.d(n,"isEmptyObject",function(){return E}),t.d(n,"isExtensionRulesEnabled",function(){return f}),t.d(n,"isFunction",function(){return b}),t.d(n,"isList",function(){return Xt}),t.d(n,"isMacOS",function(){return Ve}),t.d(n,"isMarkActive",function(){return Zn}),t.d(n,"isNodeActive",function(){return Qt}),t.d(n,"isNodeEmpty",function(){return en}),t.d(n,"isNodeSelection",function(){return $n}),t.d(n,"isNumber",function(){return R}),t.d(n,"isPlainObject",function(){return K}),t.d(n,"isRegExp",function(){return M}),t.d(n,"isString",function(){return Po}),t.d(n,"isTextSelection",function(){return rn}),t.d(n,"isiOS",function(){return Le}),t.d(n,"markInputRule",function(){return Vo}),t.d(n,"markPasteRule",function(){return ki}),t.d(n,"mergeAttributes",function(){return i}),t.d(n,"mergeDeep",function(){return Y}),t.d(n,"minMax",function(){return ht}),t.d(n,"nodeInputRule",function(){return Ti}),t.d(n,"nodePasteRule",function(){return qo}),t.d(n,"objectIncludes",function(){return q}),t.d(n,"pasteRulesPlugin",function(){return z}),t.d(n,"posToDOMRect",function(){return Xn}),t.d(n,"removeDuplicates",function(){return Dt}),t.d(n,"resolveFocusPosition",function(){return je}),t.d(n,"selectionToInsertionEnd",function(){return ke}),t.d(n,"splitExtensions",function(){return O}),t.d(n,"textInputRule",function(){return oi}),t.d(n,"textPasteRule",function(){return Ai}),t.d(n,"textblockTypeInputRule",function(){return Ho}),t.d(n,"wrappingInputRule",function(){return zo});var e=t(37),s=t(449),o=t(350),a=t(13),c=t(34),l=t(128),p=t(378);function h(ze){const{state:Re,transaction:We}=ze;let{selection:it}=We,{doc:Pt}=We,{storedMarks:Nt}=We;return Yo(vr({},Re),{apply:Re.apply.bind(Re),applyTransaction:Re.applyTransaction.bind(Re),filterTransaction:Re.filterTransaction,plugins:Re.plugins,schema:Re.schema,reconfigure:Re.reconfigure.bind(Re),toJSON:Re.toJSON.bind(Re),get storedMarks(){return Nt},get selection(){return it},get doc(){return Pt},get tr(){return it=We.selection,Pt=We.doc,Nt=We.storedMarks,We}})}class m{constructor(Re){this.editor=Re.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=Re.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:Re,editor:We,state:it}=this,{view:Pt}=We,{tr:Nt}=it,kt=this.buildProps(Nt);return Object.fromEntries(Object.entries(Re).map(([Ht,Bt])=>[Ht,(...an)=>{const En=Bt(...an)(kt);return!Nt.getMeta("preventDispatch")&&!this.hasCustomState&&Pt.dispatch(Nt),En}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(Re,We=!0){const{rawCommands:it,editor:Pt,state:Nt}=this,{view:kt}=Pt,Ht=[],Bt=!!Re,Yt=Re||Nt.tr,an=()=>(!Bt&&We&&!Yt.getMeta("preventDispatch")&&!this.hasCustomState&&kt.dispatch(Yt),Ht.every(vn=>vn===!0)),En=Yo(vr({},Object.fromEntries(Object.entries(it).map(([vn,ar])=>[vn,(...Dr)=>{const Lr=this.buildProps(Yt,We),no=ar(...Dr)(Lr);return Ht.push(no),En}]))),{run:an});return En}createCan(Re){const{rawCommands:We,state:it}=this,Pt=!1,Nt=Re||it.tr,kt=this.buildProps(Nt,Pt),Ht=Object.fromEntries(Object.entries(We).map(([Bt,Yt])=>[Bt,(...an)=>Yt(...an)(Yo(vr({},kt),{dispatch:void 0}))]));return Yo(vr({},Ht),{chain:()=>this.createChain(Nt,Pt)})}buildProps(Re,We=!0){const{rawCommands:it,editor:Pt,state:Nt}=this,{view:kt}=Pt;Nt.storedMarks&&Re.setStoredMarks(Nt.storedMarks);const Ht={tr:Re,editor:Pt,view:kt,state:h({state:Nt,transaction:Re}),dispatch:We?()=>{}:void 0,chain:()=>this.createChain(Re),can:()=>this.createCan(Re),get commands(){return Object.fromEntries(Object.entries(it).map(([Bt,Yt])=>[Bt,(...an)=>Yt(...an)(Ht)]))}};return Ht}}class g{constructor(){this.callbacks={}}on(Re,We){return this.callbacks[Re]||(this.callbacks[Re]=[]),this.callbacks[Re].push(We),this}emit(Re,...We){const it=this.callbacks[Re];return it&&it.forEach(Pt=>Pt.apply(this,We)),this}off(Re,We){const it=this.callbacks[Re];return it&&(We?this.callbacks[Re]=it.filter(Pt=>Pt!==We):delete this.callbacks[Re]),this}removeAllListeners(){this.callbacks={}}}function v(ze,Re,We){return ze.config[Re]===void 0&&ze.parent?v(ze.parent,Re,We):typeof ze.config[Re]=="function"?ze.config[Re].bind(Yo(vr({},We),{parent:ze.parent?v(ze.parent,Re,We):null})):ze.config[Re]}function O(ze){const Re=ze.filter(Pt=>Pt.type==="extension"),We=ze.filter(Pt=>Pt.type==="node"),it=ze.filter(Pt=>Pt.type==="mark");return{baseExtensions:Re,nodeExtensions:We,markExtensions:it}}function u(ze){const Re=[],{nodeExtensions:We,markExtensions:it}=O(ze),Pt=[...We,...it],Nt={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return ze.forEach(kt=>{const Ht={name:kt.name,options:kt.options,storage:kt.storage},Bt=v(kt,"addGlobalAttributes",Ht);if(!Bt)return;Bt().forEach(an=>{an.types.forEach(En=>{Object.entries(an.attributes).forEach(([vn,ar])=>{Re.push({type:En,name:vn,attribute:vr(vr({},Nt),ar)})})})})}),Pt.forEach(kt=>{const Ht={name:kt.name,options:kt.options,storage:kt.storage},Bt=v(kt,"addAttributes",Ht);if(!Bt)return;const Yt=Bt();Object.entries(Yt).forEach(([an,En])=>{const vn=vr(vr({},Nt),En);(En==null?void 0:En.isRequired)&&(En==null?void 0:En.default)===void 0&&delete vn.default,Re.push({type:kt.name,name:an,attribute:vn})})}),Re}function r(ze,Re){if(typeof ze=="string"){if(!Re.nodes[ze])throw Error(`There is no node type named '${ze}'. Maybe you forgot to add the extension?`);return Re.nodes[ze]}return ze}function i(...ze){return ze.filter(Re=>!!Re).reduce((Re,We)=>{const it=vr({},Re);return Object.entries(We).forEach(([Pt,Nt])=>{if(!it[Pt]){it[Pt]=Nt;return}Pt==="class"?it[Pt]=[it[Pt],Nt].join(" "):Pt==="style"?it[Pt]=[it[Pt],Nt].join("; "):it[Pt]=Nt}),it},{})}function d(ze,Re){return Re.filter(We=>We.attribute.rendered).map(We=>We.attribute.renderHTML?We.attribute.renderHTML(ze.attrs)||{}:{[We.name]:ze.attrs[We.name]}).reduce((We,it)=>i(We,it),{})}function b(ze){return typeof ze=="function"}function w(ze,Re=void 0,...We){return b(ze)?Re?ze.bind(Re)(...We):ze(...We):ze}function E(ze={}){return Object.keys(ze).length===0&&ze.constructor===Object}function S(ze){return typeof ze!="string"?ze:ze.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(ze):ze==="true"?!0:ze==="false"?!1:ze}function P(ze,Re){return ze.style?ze:Yo(vr({},ze),{getAttrs:We=>{const it=ze.getAttrs?ze.getAttrs(We):ze.attrs;if(it===!1)return!1;const Pt=Re.reduce((Nt,kt)=>{const Ht=kt.attribute.parseHTML?kt.attribute.parseHTML(We):S(We.getAttribute(kt.name));return Ht==null?Nt:Yo(vr({},Nt),{[kt.name]:Ht})},{});return vr(vr({},it),Pt)}})}function D(ze){return Object.fromEntries(Object.entries(ze).filter(([Re,We])=>Re==="attrs"&&E(We)?!1:We!=null))}function W(ze){var Re;const We=u(ze),{nodeExtensions:it,markExtensions:Pt}=O(ze),Nt=(Re=it.find(Bt=>v(Bt,"topNode")))===null||Re===void 0?void 0:Re.name,kt=Object.fromEntries(it.map(Bt=>{const Yt=We.filter(Lr=>Lr.type===Bt.name),an={name:Bt.name,options:Bt.options,storage:Bt.storage},En=ze.reduce((Lr,no)=>{const ko=v(no,"extendNodeSchema",an);return vr(vr({},Lr),ko?ko(Bt):{})},{}),vn=D(Yo(vr({},En),{content:w(v(Bt,"content",an)),marks:w(v(Bt,"marks",an)),group:w(v(Bt,"group",an)),inline:w(v(Bt,"inline",an)),atom:w(v(Bt,"atom",an)),selectable:w(v(Bt,"selectable",an)),draggable:w(v(Bt,"draggable",an)),code:w(v(Bt,"code",an)),defining:w(v(Bt,"defining",an)),isolating:w(v(Bt,"isolating",an)),attrs:Object.fromEntries(Yt.map(Lr=>{var no;return[Lr.name,{default:(no=Lr==null?void 0:Lr.attribute)===null||no===void 0?void 0:no.default}]}))})),ar=w(v(Bt,"parseHTML",an));ar&&(vn.parseDOM=ar.map(Lr=>P(Lr,Yt)));const Er=v(Bt,"renderHTML",an);Er&&(vn.toDOM=Lr=>Er({node:Lr,HTMLAttributes:d(Lr,Yt)}));const Dr=v(Bt,"renderText",an);return Dr&&(vn.toText=Dr),[Bt.name,vn]})),Ht=Object.fromEntries(Pt.map(Bt=>{const Yt=We.filter(Dr=>Dr.type===Bt.name),an={name:Bt.name,options:Bt.options,storage:Bt.storage},En=ze.reduce((Dr,Lr)=>{const no=v(Lr,"extendMarkSchema",an);return vr(vr({},Dr),no?no(Bt):{})},{}),vn=D(Yo(vr({},En),{inclusive:w(v(Bt,"inclusive",an)),excludes:w(v(Bt,"excludes",an)),group:w(v(Bt,"group",an)),spanning:w(v(Bt,"spanning",an)),code:w(v(Bt,"code",an)),attrs:Object.fromEntries(Yt.map(Dr=>{var Lr;return[Dr.name,{default:(Lr=Dr==null?void 0:Dr.attribute)===null||Lr===void 0?void 0:Lr.default}]}))})),ar=w(v(Bt,"parseHTML",an));ar&&(vn.parseDOM=ar.map(Dr=>P(Dr,Yt)));const Er=v(Bt,"renderHTML",an);return Er&&(vn.toDOM=Dr=>Er({mark:Dr,HTMLAttributes:d(Dr,Yt)})),[Bt.name,vn]}));return new a.Schema({topNode:Nt,nodes:kt,marks:Ht})}function B(ze,Re){return Re.nodes[ze]||Re.marks[ze]||null}function f(ze,Re){return Array.isArray(Re)?Re.some(We=>(typeof We=="string"?We:We.name)===ze.name):Re}const y=(ze,Re=500)=>{let We="";const it=ze.parentOffset;return ze.parent.nodesBetween(Math.max(0,it-Re),it,(Pt,Nt,kt,Ht)=>{var Bt,Yt;We+=(((Yt=(Bt=Pt.type.spec).toText)===null||Yt===void 0?void 0:Yt.call(Bt,{node:Pt,pos:Nt,parent:kt,index:Ht}))||Pt.textContent||"%leaf%").slice(0,Math.max(0,it-Nt))}),We};function M(ze){return Object.prototype.toString.call(ze)==="[object RegExp]"}class N{constructor(Re){this.find=Re.find,this.handler=Re.handler}}const A=(ze,Re)=>{if(M(Re))return Re.exec(ze);const We=Re(ze);if(!We)return null;const it=[We.text];return it.index=We.index,it.input=ze,it.data=We.data,We.replaceWith&&(We.text.includes(We.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),it.push(We.replaceWith)),it};function L(ze){var Re;const{editor:We,from:it,to:Pt,text:Nt,rules:kt,plugin:Ht}=ze,{view:Bt}=We;if(Bt.composing)return!1;const Yt=Bt.state.doc.resolve(it);if(Yt.parent.type.spec.code||!!((Re=Yt.nodeBefore||Yt.nodeAfter)===null||Re===void 0?void 0:Re.marks.find(vn=>vn.type.spec.code)))return!1;let an=!1;const En=y(Yt)+Nt;return kt.forEach(vn=>{if(an)return;const ar=A(En,vn.find);if(!ar)return;const Er=Bt.state.tr,Dr=h({state:Bt.state,transaction:Er}),Lr={from:it-(ar[0].length-Nt.length),to:Pt},{commands:no,chain:ko,can:bi}=new m({editor:We,state:Dr});vn.handler({state:Dr,range:Lr,match:ar,commands:no,chain:ko,can:bi})===null||!Er.steps.length||(Er.setMeta(Ht,{transform:Er,from:it,to:Pt,text:Nt}),Bt.dispatch(Er),an=!0)}),an}function C(ze){const{editor:Re,rules:We}=ze,it=new e.c({state:{init(){return null},apply(Pt,Nt){const kt=Pt.getMeta(it);return kt||(Pt.selectionSet||Pt.docChanged?null:Nt)}},props:{handleTextInput(Pt,Nt,kt,Ht){return L({editor:Re,from:Nt,to:kt,text:Ht,rules:We,plugin:it})},handleDOMEvents:{compositionend:Pt=>(setTimeout(()=>{const{$cursor:Nt}=Pt.state.selection;Nt&&L({editor:Re,from:Nt.pos,to:Nt.pos,text:"",rules:We,plugin:it})}),!1)},handleKeyDown(Pt,Nt){if(Nt.key!=="Enter")return!1;const{$cursor:kt}=Pt.state.selection;return kt?L({editor:Re,from:kt.pos,to:kt.pos,text:`
`,rules:We,plugin:it}):!1}},isInputRules:!0});return it}function R(ze){return typeof ze=="number"}class U{constructor(Re){this.find=Re.find,this.handler=Re.handler}}const Z=(ze,Re)=>{if(M(Re))return[...ze.matchAll(Re)];const We=Re(ze);return We?We.map(it=>{const Pt=[it.text];return Pt.index=it.index,Pt.input=ze,Pt.data=it.data,it.replaceWith&&(it.text.includes(it.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),Pt.push(it.replaceWith)),Pt}):[]};function F(ze){const{editor:Re,state:We,from:it,to:Pt,rule:Nt}=ze,{commands:kt,chain:Ht,can:Bt}=new m({editor:Re,state:We}),Yt=[];return We.doc.nodesBetween(it,Pt,(En,vn)=>{if(!En.isTextblock||En.type.spec.code)return;const ar=Math.max(it,vn),Er=Math.min(Pt,vn+En.content.size),Dr=En.textBetween(ar-vn,Er-vn,void 0,"\uFFFC");Z(Dr,Nt.find).forEach(no=>{if(no.index===void 0)return;const ko=ar+no.index+1,bi=ko+no[0].length,ei={from:We.tr.mapping.map(ko),to:We.tr.mapping.map(bi)},li=Nt.handler({state:We,range:ei,match:no,commands:kt,chain:Ht,can:Bt});Yt.push(li)})}),Yt.every(En=>En!==null)}function z(ze){const{editor:Re,rules:We}=ze;let it=null,Pt=!1,Nt=!1;return We.map(Ht=>new e.c({view(Bt){const Yt=an=>{var En;it=((En=Bt.dom.parentElement)===null||En===void 0?void 0:En.contains(an.target))?Bt.dom.parentElement:null};return window.addEventListener("dragstart",Yt),{destroy(){window.removeEventListener("dragstart",Yt)}}},props:{handleDOMEvents:{drop:Bt=>(Nt=it===Bt.dom.parentElement,!1),paste:(Bt,Yt)=>{var an;const En=(an=Yt.clipboardData)===null||an===void 0?void 0:an.getData("text/html");return Pt=!!(En==null?void 0:En.includes("data-pm-slice")),!1}}},appendTransaction:(Bt,Yt,an)=>{const En=Bt[0],vn=En.getMeta("uiEvent")==="paste"&&!Pt,ar=En.getMeta("uiEvent")==="drop"&&!Nt;if(!vn&&!ar)return;const Er=Yt.doc.content.findDiffStart(an.doc.content),Dr=Yt.doc.content.findDiffEnd(an.doc.content);if(!R(Er)||!Dr||Er===Dr.b)return;const Lr=an.tr,no=h({state:an,transaction:Lr});if(!(!F({editor:Re,state:no,from:Math.max(Er-1,0),to:Dr.b-1,rule:Ht})||!Lr.steps.length))return Lr}}))}function G(ze){const Re=ze.filter((We,it)=>ze.indexOf(We)!==it);return[...new Set(Re)]}class V{constructor(Re,We){this.splittableMarks=[],this.editor=We,this.extensions=V.resolve(Re),this.schema=W(this.extensions),this.extensions.forEach(it=>{var Pt;this.editor.extensionStorage[it.name]=it.storage;const Nt={name:it.name,options:it.options,storage:it.storage,editor:this.editor,type:B(it.name,this.schema)};it.type==="mark"&&((Pt=w(v(it,"keepOnSplit",Nt)))!==null&&Pt!==void 0?Pt:!0)&&this.splittableMarks.push(it.name);const kt=v(it,"onBeforeCreate",Nt);kt&&this.editor.on("beforeCreate",kt);const Ht=v(it,"onCreate",Nt);Ht&&this.editor.on("create",Ht);const Bt=v(it,"onUpdate",Nt);Bt&&this.editor.on("update",Bt);const Yt=v(it,"onSelectionUpdate",Nt);Yt&&this.editor.on("selectionUpdate",Yt);const an=v(it,"onTransaction",Nt);an&&this.editor.on("transaction",an);const En=v(it,"onFocus",Nt);En&&this.editor.on("focus",En);const vn=v(it,"onBlur",Nt);vn&&this.editor.on("blur",vn);const ar=v(it,"onDestroy",Nt);ar&&this.editor.on("destroy",ar)})}static resolve(Re){const We=V.sort(V.flatten(Re)),it=G(We.map(Pt=>Pt.name));return it.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${it.map(Pt=>`'${Pt}'`).join(", ")}]. This can lead to issues.`),We}static flatten(Re){return Re.map(We=>{const it={name:We.name,options:We.options,storage:We.storage},Pt=v(We,"addExtensions",it);return Pt?[We,...this.flatten(Pt())]:We}).flat(10)}static sort(Re){const We=100;return Re.sort((it,Pt)=>{const Nt=v(it,"priority")||We,kt=v(Pt,"priority")||We;return Nt>kt?-1:Nt<kt?1:0})}get commands(){return this.extensions.reduce((Re,We)=>{const it={name:We.name,options:We.options,storage:We.storage,editor:this.editor,type:B(We.name,this.schema)},Pt=v(We,"addCommands",it);return Pt?vr(vr({},Re),Pt()):Re},{})}get plugins(){const{editor:Re}=this,We=V.sort([...this.extensions].reverse()),it=[],Pt=[],Nt=We.map(kt=>{const Ht={name:kt.name,options:kt.options,storage:kt.storage,editor:Re,type:B(kt.name,this.schema)},Bt=[],Yt=v(kt,"addKeyboardShortcuts",Ht);let an={};if(kt.type==="mark"&&kt.config.exitable&&(an.ArrowRight=()=>ho.handleExit({editor:Re,mark:kt})),Yt){const Dr=Object.fromEntries(Object.entries(Yt()).map(([Lr,no])=>[Lr,()=>no({editor:Re})]));an=vr(vr({},an),Dr)}const En=Object(o.b)(an);Bt.push(En);const vn=v(kt,"addInputRules",Ht);f(kt,Re.options.enableInputRules)&&vn&&it.push(...vn());const ar=v(kt,"addPasteRules",Ht);f(kt,Re.options.enablePasteRules)&&ar&&Pt.push(...ar());const Er=v(kt,"addProseMirrorPlugins",Ht);if(Er){const Dr=Er();Bt.push(...Dr)}return Bt}).flat();return[C({editor:Re,rules:it}),...z({editor:Re,rules:Pt}),...Nt]}get attributes(){return u(this.extensions)}get nodeViews(){const{editor:Re}=this,{nodeExtensions:We}=O(this.extensions);return Object.fromEntries(We.filter(it=>!!v(it,"addNodeView")).map(it=>{const Pt=this.attributes.filter(Bt=>Bt.type===it.name),Nt={name:it.name,options:it.options,storage:it.storage,editor:Re,type:r(it.name,this.schema)},kt=v(it,"addNodeView",Nt);if(!kt)return[];const Ht=(Bt,Yt,an,En)=>{const vn=d(Bt,Pt);return kt()({editor:Re,node:Bt,getPos:an,decorations:En,HTMLAttributes:vn,extension:it})};return[it.name,Ht]}))}}function k(ze){return Object.prototype.toString.call(ze).slice(8,-1)}function K(ze){return k(ze)!=="Object"?!1:ze.constructor===Object&&Object.getPrototypeOf(ze)===Object.prototype}function Y(ze,Re){const We=vr({},ze);return K(ze)&&K(Re)&&Object.keys(Re).forEach(it=>{K(Re[it])?it in ze?We[it]=Y(ze[it],Re[it]):Object.assign(We,{[it]:Re[it]}):Object.assign(We,{[it]:Re[it]})}),We}class ee{constructor(Re={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=vr(vr({},this.config),Re),this.name=this.config.name,Re.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(v(this,"addOptions",{name:this.name}))),this.storage=w(v(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(Re={}){return new ee(Re)}configure(Re={}){const We=this.extend();return We.options=Y(this.options,Re),We.storage=w(v(We,"addStorage",{name:We.name,options:We.options})),We}extend(Re={}){const We=new ee(Re);return We.parent=this,this.child=We,We.name=Re.name?Re.name:We.parent.name,Re.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${We.name}".`),We.options=w(v(We,"addOptions",{name:We.name})),We.storage=w(v(We,"addStorage",{name:We.name,options:We.options})),We}}function ae(ze,Re,We){const{from:it,to:Pt}=Re,{blockSeparator:Nt=`

`,textSerializers:kt={}}=We||{};let Ht="",Bt=!0;return ze.nodesBetween(it,Pt,(Yt,an,En,vn)=>{var ar;const Er=kt==null?void 0:kt[Yt.type.name];Er?(Yt.isBlock&&!Bt&&(Ht+=Nt,Bt=!0),En&&(Ht+=Er({node:Yt,pos:an,parent:En,index:vn,range:Re}))):Yt.isText?(Ht+=(ar=Yt==null?void 0:Yt.text)===null||ar===void 0?void 0:ar.slice(Math.max(it,an)-an,Pt-an),Bt=!1):Yt.isBlock&&!Bt&&(Ht+=Nt,Bt=!0)}),Ht}function he(ze){return Object.fromEntries(Object.entries(ze.nodes).filter(([,Re])=>Re.spec.toText).map(([Re,We])=>[Re,We.spec.toText]))}const me=ee.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new e.c({key:new e.d("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:ze}=this,{state:Re,schema:We}=ze,{doc:it,selection:Pt}=Re,{ranges:Nt}=Pt,kt=Math.min(...Nt.map(an=>an.$from.pos)),Ht=Math.max(...Nt.map(an=>an.$to.pos)),Bt=he(We);return ae(it,{from:kt,to:Ht},{textSerializers:Bt})}}})]}}),Ye=()=>({editor:ze,view:Re})=>(requestAnimationFrame(()=>{var We;ze.isDestroyed||(Re.dom.blur(),(We=window==null?void 0:window.getSelection())===null||We===void 0||We.removeAllRanges())}),!0),se=(ze=!1)=>({commands:Re})=>Re.setContent("",ze),ie=()=>({state:ze,tr:Re,dispatch:We})=>{const{selection:it}=Re,{ranges:Pt}=it;return We&&Pt.forEach(({$from:Nt,$to:kt})=>{ze.doc.nodesBetween(Nt.pos,kt.pos,(Ht,Bt)=>{if(Ht.type.isText)return;const{doc:Yt,mapping:an}=Re,En=Yt.resolve(an.map(Bt)),vn=Yt.resolve(an.map(Bt+Ht.nodeSize)),ar=En.blockRange(vn);if(!ar)return;const Er=Object(c.liftTarget)(ar);if(Ht.type.isTextblock){const{defaultType:Dr}=En.parent.contentMatchAt(En.index());Re.setNodeMarkup(ar.start,Dr)}(Er||Er===0)&&Re.lift(ar,Er)})}),!0},Ee=ze=>Re=>ze(Re),Oe=()=>({state:ze,dispatch:Re})=>Object(l.c)(ze,Re),ce=()=>({tr:ze,dispatch:Re})=>{const{selection:We}=ze,it=We.$anchor.node();if(it.content.size>0)return!1;const Pt=ze.selection.$anchor;for(let Nt=Pt.depth;Nt>0;Nt-=1)if(Pt.node(Nt).type===it.type){if(Re){const Ht=Pt.before(Nt),Bt=Pt.after(Nt);ze.delete(Ht,Bt).scrollIntoView()}return!0}return!1},ue=ze=>({tr:Re,state:We,dispatch:it})=>{const Pt=r(ze,We.schema),Nt=Re.selection.$anchor;for(let kt=Nt.depth;kt>0;kt-=1)if(Nt.node(kt).type===Pt){if(it){const Bt=Nt.before(kt),Yt=Nt.after(kt);Re.delete(Bt,Yt).scrollIntoView()}return!0}return!1},pe=ze=>({tr:Re,dispatch:We})=>{const{from:it,to:Pt}=ze;return We&&Re.delete(it,Pt),!0},$e=()=>({state:ze,dispatch:Re})=>Object(l.d)(ze,Re),ne=()=>({commands:ze})=>ze.keyboardShortcut("Enter"),X=()=>({state:ze,dispatch:Re})=>Object(l.e)(ze,Re);function q(ze,Re,We={strict:!0}){const it=Object.keys(Re);return it.length?it.every(Pt=>We.strict?Re[Pt]===ze[Pt]:M(Re[Pt])?Re[Pt].test(ze[Pt]):Re[Pt]===ze[Pt]):!0}function Ne(ze,Re,We={}){return ze.find(it=>it.type===Re&&q(it.attrs,We))}function Qe(ze,Re,We={}){return!!Ne(ze,Re,We)}function Ze(ze,Re,We={}){if(!ze||!Re)return;let it=ze.parent.childAfter(ze.parentOffset);if(ze.parentOffset===it.offset&&it.offset!==0&&(it=ze.parent.childBefore(ze.parentOffset)),!it.node)return;const Pt=Ne([...it.node.marks],Re,We);if(!Pt)return;let Nt=it.index,kt=ze.start()+it.offset,Ht=Nt+1,Bt=kt+it.node.nodeSize;for(Ne([...it.node.marks],Re,We);Nt>0&&Pt.isInSet(ze.parent.child(Nt-1).marks);)Nt-=1,kt-=ze.parent.child(Nt).nodeSize;for(;Ht<ze.parent.childCount&&Qe([...ze.parent.child(Ht).marks],Re,We);)Bt+=ze.parent.child(Ht).nodeSize,Ht+=1;return{from:kt,to:Bt}}function tt(ze,Re){if(typeof ze=="string"){if(!Re.marks[ze])throw Error(`There is no mark type named '${ze}'. Maybe you forgot to add the extension?`);return Re.marks[ze]}return ze}const Ft=(ze,Re={})=>({tr:We,state:it,dispatch:Pt})=>{const Nt=tt(ze,it.schema),{doc:kt,selection:Ht}=We,{$from:Bt,from:Yt,to:an}=Ht;if(Pt){const En=Ze(Bt,Nt,Re);if(En&&En.from<=Yt&&En.to>=an){const vn=e.f.create(kt,En.from,En.to);We.setSelection(vn)}}return!0},Lt=ze=>Re=>{const We=typeof ze=="function"?ze(Re):ze;for(let it=0;it<We.length;it+=1)if(We[it](Re))return!0;return!1};function rn(ze){return ze instanceof e.f}function ht(ze=0,Re=0,We=0){return Math.min(Math.max(ze,Re),We)}function je(ze,Re=null){if(!Re)return null;const We=e.e.atStart(ze),it=e.e.atEnd(ze);if(Re==="start"||Re===!0)return We;if(Re==="end")return it;const Pt=We.from,Nt=it.to;return Re==="all"?e.f.create(ze,ht(0,Pt,Nt),ht(ze.content.size,Pt,Nt)):e.f.create(ze,ht(Re,Pt,Nt),ht(Re,Pt,Nt))}function Le(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const rt=(ze=null,Re={})=>({editor:We,view:it,tr:Pt,dispatch:Nt})=>{Re=vr({scrollIntoView:!0},Re);const kt=()=>{Le()&&it.dom.focus(),requestAnimationFrame(()=>{We.isDestroyed||(it.focus(),(Re==null?void 0:Re.scrollIntoView)&&We.commands.scrollIntoView())})};if(it.hasFocus()&&ze===null||ze===!1)return!0;if(Nt&&ze===null&&!rn(We.state.selection))return kt(),!0;const Ht=je(Pt.doc,ze)||We.state.selection,Bt=We.state.selection.eq(Ht);return Nt&&(Bt||Pt.setSelection(Ht),Bt&&Pt.storedMarks&&Pt.setStoredMarks(Pt.storedMarks),kt()),!0},Pe=(ze,Re)=>We=>ze.every((it,Pt)=>Re(it,Yo(vr({},We),{index:Pt}))),de=(ze,Re)=>({tr:We,commands:it})=>it.insertContentAt({from:We.selection.from,to:We.selection.to},ze,Re);function be(ze){const Re=`<body>${ze}</body>`;return new window.DOMParser().parseFromString(Re,"text/html").body}function Ie(ze,Re,We){if(We=vr({slice:!0,parseOptions:{}},We),typeof ze=="object"&&ze!==null)try{return Array.isArray(ze)&&ze.length>0?a.Fragment.fromArray(ze.map(it=>Re.nodeFromJSON(it))):Re.nodeFromJSON(ze)}catch(it){return console.warn("[tiptap warn]: Invalid content.","Passed value:",ze,"Error:",it),Ie("",Re,We)}if(typeof ze=="string"){const it=a.DOMParser.fromSchema(Re);return We.slice?it.parseSlice(be(ze),We.parseOptions).content:it.parse(be(ze),We.parseOptions)}return Ie("",Re,We)}function ke(ze,Re,We){const it=ze.steps.length-1;if(it<Re)return;const Pt=ze.steps[it];if(!(Pt instanceof c.ReplaceStep||Pt instanceof c.ReplaceAroundStep))return;const Nt=ze.mapping.maps[it];let kt=0;Nt.forEach((Ht,Bt,Yt,an)=>{kt===0&&(kt=an)}),ze.setSelection(e.e.near(ze.doc.resolve(kt),We))}const Te=ze=>ze.toString().startsWith("<"),x=(ze,Re,We)=>({tr:it,dispatch:Pt,editor:Nt})=>{if(Pt){We=vr({parseOptions:{},updateSelection:!0},We);const kt=Ie(Re,Nt.schema,{parseOptions:vr({preserveWhitespace:"full"},We.parseOptions)});if(kt.toString()==="<>")return!0;let{from:Ht,to:Bt}=typeof ze=="number"?{from:ze,to:ze}:ze,Yt=!0,an=!0;if((Te(kt)?kt:[kt]).forEach(vn=>{vn.check(),Yt=Yt?vn.isText&&vn.marks.length===0:!1,an=an?vn.isBlock:!1}),Ht===Bt&&an){const{parent:vn}=it.doc.resolve(Ht);vn.isTextblock&&!vn.type.spec.code&&!vn.childCount&&(Ht-=1,Bt+=1)}Yt?Array.isArray(Re)?it.insertText(Re.map(vn=>vn.text||"").join(""),Ht,Bt):typeof Re=="object"&&!!Re&&!!Re.text?it.insertText(Re.text,Ht,Bt):it.insertText(Re,Ht,Bt):it.replaceWith(Ht,Bt,kt),We.updateSelection&&ke(it,it.steps.length-1,-1)}return!0},H=()=>({state:ze,dispatch:Re})=>Object(l.i)(ze,Re),le=()=>({state:ze,dispatch:Re})=>Object(l.g)(ze,Re),Ce=()=>({state:ze,dispatch:Re})=>Object(l.f)(ze,Re),Ue=()=>({state:ze,dispatch:Re})=>Object(l.h)(ze,Re);function Ve(){return typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1}function bt(ze){const Re=ze.split(/-(?!$)/);let We=Re[Re.length-1];We==="Space"&&(We=" ");let it,Pt,Nt,kt;for(let Ht=0;Ht<Re.length-1;Ht+=1){const Bt=Re[Ht];if(/^(cmd|meta|m)$/i.test(Bt))kt=!0;else if(/^a(lt)?$/i.test(Bt))it=!0;else if(/^(c|ctrl|control)$/i.test(Bt))Pt=!0;else if(/^s(hift)?$/i.test(Bt))Nt=!0;else if(/^mod$/i.test(Bt))Le()||Ve()?kt=!0:Pt=!0;else throw new Error(`Unrecognized modifier name: ${Bt}`)}return it&&(We=`Alt-${We}`),Pt&&(We=`Ctrl-${We}`),kt&&(We=`Meta-${We}`),Nt&&(We=`Shift-${We}`),We}const yt=ze=>({editor:Re,view:We,tr:it,dispatch:Pt})=>{const Nt=bt(ze).split(/-(?!$)/),kt=Nt.find(Yt=>!["Alt","Ctrl","Meta","Shift"].includes(Yt)),Ht=new KeyboardEvent("keydown",{key:kt==="Space"?" ":kt,altKey:Nt.includes("Alt"),ctrlKey:Nt.includes("Ctrl"),metaKey:Nt.includes("Meta"),shiftKey:Nt.includes("Shift"),bubbles:!0,cancelable:!0}),Bt=Re.captureTransaction(()=>{We.someProp("handleKeyDown",Yt=>Yt(We,Ht))});return Bt==null||Bt.steps.forEach(Yt=>{const an=Yt.map(it.mapping);an&&Pt&&it.maybeStep(an)}),!0};function Qt(ze,Re,We={}){const{from:it,to:Pt,empty:Nt}=ze.selection,kt=Re?r(Re,ze.schema):null,Ht=[];ze.doc.nodesBetween(it,Pt,(En,vn)=>{if(En.isText)return;const ar=Math.max(it,vn),Er=Math.min(Pt,vn+En.nodeSize);Ht.push({node:En,from:ar,to:Er})});const Bt=Pt-it,Yt=Ht.filter(En=>kt?kt.name===En.node.type.name:!0).filter(En=>q(En.node.attrs,We,{strict:!1}));return Nt?!!Yt.length:Yt.reduce((En,vn)=>En+vn.to-vn.from,0)>=Bt}const tn=(ze,Re={})=>({state:We,dispatch:it})=>{const Pt=r(ze,We.schema);return Qt(We,Pt,Re)?Object(l.j)(We,it):!1},Kn=()=>({state:ze,dispatch:Re})=>Object(l.k)(ze,Re),Ot=ze=>({state:Re,dispatch:We})=>{const it=r(ze,Re.schema);return Object(p.a)(it)(Re,We)},lt=()=>({state:ze,dispatch:Re})=>Object(l.l)(ze,Re);function Be(ze,Re){return Re.nodes[ze]?"node":Re.marks[ze]?"mark":null}function _e(ze,Re){const We=typeof Re=="string"?[Re]:Re;return Object.keys(ze).reduce((it,Pt)=>(We.includes(Pt)||(it[Pt]=ze[Pt]),it),{})}const Ae=(ze,Re)=>({tr:We,state:it,dispatch:Pt})=>{let Nt=null,kt=null;const Ht=Be(typeof ze=="string"?ze:ze.name,it.schema);return Ht?(Ht==="node"&&(Nt=r(ze,it.schema)),Ht==="mark"&&(kt=tt(ze,it.schema)),Pt&&We.selection.ranges.forEach(Bt=>{it.doc.nodesBetween(Bt.$from.pos,Bt.$to.pos,(Yt,an)=>{Nt&&Nt===Yt.type&&We.setNodeMarkup(an,void 0,_e(Yt.attrs,Re)),kt&&Yt.marks.length&&Yt.marks.forEach(En=>{kt===En.type&&We.addMark(an,an+Yt.nodeSize,kt.create(_e(En.attrs,Re)))})})}),!0):!1},fe=()=>({tr:ze,dispatch:Re})=>(Re&&ze.scrollIntoView(),!0),ft=()=>({tr:ze,commands:Re})=>Re.setTextSelection({from:0,to:ze.doc.content.size}),nt=()=>({state:ze,dispatch:Re})=>Object(l.m)(ze,Re),ct=()=>({state:ze,dispatch:Re})=>Object(l.n)(ze,Re),Xe=()=>({state:ze,dispatch:Re})=>Object(l.o)(ze,Re),gt=()=>({state:ze,dispatch:Re})=>Object(l.p)(ze,Re),Tt=()=>({state:ze,dispatch:Re})=>Object(l.q)(ze,Re);function Ut(ze,Re,We={}){return Ie(ze,Re,{slice:!1,parseOptions:We})}const qt=(ze,Re=!1,We={})=>({tr:it,editor:Pt,dispatch:Nt})=>{const{doc:kt}=it,Ht=Ut(ze,Pt.schema,We);return Nt&&it.replaceWith(0,kt.content.size,Ht).setMeta("preventUpdate",!Re),!0};function sn(ze,Re){const We=new c.Transform(ze);return Re.forEach(it=>{it.steps.forEach(Pt=>{We.step(Pt)})}),We}function _n(ze){for(let Re=0;Re<ze.edgeCount;Re+=1){const{type:We}=ze.edge(Re);if(We.isTextblock&&!We.hasRequiredAttrs())return We}return null}function Hn(ze,Re){const We=[];return ze.descendants((it,Pt)=>{Re(it)&&We.push({node:it,pos:Pt})}),We}function wn(ze,Re,We){const it=[];return ze.nodesBetween(Re.from,Re.to,(Pt,Nt)=>{We(Pt)&&it.push({node:Pt,pos:Nt})}),it}function Un(ze,Re){for(let We=ze.depth;We>0;We-=1){const it=ze.node(We);if(Re(it))return{pos:We>0?ze.before(We):0,start:ze.start(We),depth:We,node:it}}}function bn(ze){return Re=>Un(Re.$from,ze)}function cr(ze,Re){const We=a.DOMSerializer.fromSchema(Re).serializeFragment(ze),Pt=document.implementation.createHTMLDocument().createElement("div");return Pt.appendChild(We),Pt.innerHTML}function fr(ze){const Re=V.resolve(ze);return W(Re)}function ur(ze,Re){const We=fr(Re),it=a.Node.fromJSON(We,ze);return cr(it.content,We)}function er(ze,Re){const We=fr(Re),it=be(ze);return a.DOMParser.fromSchema(We).parse(it).toJSON()}function jr(ze,Re){const We={from:0,to:ze.content.size};return ae(ze,We,Re)}function wt(ze,Re,We){const{blockSeparator:it=`

`,textSerializers:Pt={}}=We||{},Nt=fr(Re),kt=a.Node.fromJSON(Nt,ze);return jr(kt,{blockSeparator:it,textSerializers:vr(vr({},he(Nt)),Pt)})}function mt(ze,Re){const We=tt(Re,ze.schema),{from:it,to:Pt,empty:Nt}=ze.selection,kt=[];Nt?(ze.storedMarks&&kt.push(...ze.storedMarks),kt.push(...ze.selection.$head.marks())):ze.doc.nodesBetween(it,Pt,Bt=>{kt.push(...Bt.marks)});const Ht=kt.find(Bt=>Bt.type.name===We.name);return Ht?vr({},Ht.attrs):{}}function Fe(ze,Re){const We=r(Re,ze.schema),{from:it,to:Pt}=ze.selection,Nt=[];ze.doc.nodesBetween(it,Pt,Ht=>{Nt.push(Ht)});const kt=Nt.reverse().find(Ht=>Ht.type.name===We.name);return kt?vr({},kt.attrs):{}}function pt(ze,Re){const We=Be(typeof Re=="string"?Re:Re.name,ze.schema);return We==="node"?Fe(ze,Re):We==="mark"?mt(ze,Re):{}}function Dt(ze,Re=JSON.stringify){const We={};return ze.filter(it=>{const Pt=Re(it);return Object.prototype.hasOwnProperty.call(We,Pt)?!1:We[Pt]=!0})}function Jt(ze){const Re=Dt(ze);return Re.length===1?Re:Re.filter((We,it)=>!Re.filter((Nt,kt)=>kt!==it).some(Nt=>We.oldRange.from>=Nt.oldRange.from&&We.oldRange.to<=Nt.oldRange.to&&We.newRange.from>=Nt.newRange.from&&We.newRange.to<=Nt.newRange.to))}function Gt(ze){const{mapping:Re,steps:We}=ze,it=[];return Re.maps.forEach((Pt,Nt)=>{const kt=[];if(Pt.ranges.length)Pt.forEach((Ht,Bt)=>{kt.push({from:Ht,to:Bt})});else{const{from:Ht,to:Bt}=We[Nt];if(Ht===void 0||Bt===void 0)return;kt.push({from:Ht,to:Bt})}kt.forEach(({from:Ht,to:Bt})=>{const Yt=Re.slice(Nt).map(Ht,-1),an=Re.slice(Nt).map(Bt),En=Re.invert().map(Yt,-1),vn=Re.invert().map(an);it.push({oldRange:{from:En,to:vn},newRange:{from:Yt,to:an}})})}),Jt(it)}function mn(ze,Re=0){const it=ze.type===ze.type.schema.topNodeType?0:1,Pt=Re,Nt=Pt+ze.nodeSize,kt=ze.marks.map(Yt=>{const an={type:Yt.type.name};return Object.keys(Yt.attrs).length&&(an.attrs=vr({},Yt.attrs)),an}),Ht=vr({},ze.attrs),Bt={type:ze.type.name,from:Pt,to:Nt};return Object.keys(Ht).length&&(Bt.attrs=Ht),kt.length&&(Bt.marks=kt),ze.content.childCount&&(Bt.content=[],ze.forEach((Yt,an)=>{var En;(En=Bt.content)===null||En===void 0||En.push(mn(Yt,Re+an+it))})),ze.text&&(Bt.text=ze.text),Bt}function Cn(ze,Re,We){const it=[];return ze===Re?We.resolve(ze).marks().forEach(Pt=>{const Nt=We.resolve(ze-1),kt=Ze(Nt,Pt.type);!kt||it.push(vr({mark:Pt},kt))}):We.nodesBetween(ze,Re,(Pt,Nt)=>{it.push(...Pt.marks.map(kt=>({from:Nt,to:Nt+Pt.nodeSize,mark:kt})))}),it}function tr(ze,Re,We){return Object.fromEntries(Object.entries(We).filter(([it])=>{const Pt=ze.find(Nt=>Nt.type===Re&&Nt.name===it);return Pt?Pt.attribute.keepOnSplit:!1}))}function Zn(ze,Re,We={}){const{empty:it,ranges:Pt}=ze.selection,Nt=Re?tt(Re,ze.schema):null;if(it)return!!(ze.storedMarks||ze.selection.$from.marks()).filter(En=>Nt?Nt.name===En.type.name:!0).find(En=>q(En.attrs,We,{strict:!1}));let kt=0;const Ht=[];if(Pt.forEach(({$from:En,$to:vn})=>{const ar=En.pos,Er=vn.pos;ze.doc.nodesBetween(ar,Er,(Dr,Lr)=>{if(!Dr.isText&&!Dr.marks.length)return;const no=Math.max(ar,Lr),ko=Math.min(Er,Lr+Dr.nodeSize);kt+=ko-no,Ht.push(...Dr.marks.map(ei=>({mark:ei,from:no,to:ko})))})}),kt===0)return!1;const Bt=Ht.filter(En=>Nt?Nt.name===En.mark.type.name:!0).filter(En=>q(En.mark.attrs,We,{strict:!1})).reduce((En,vn)=>En+vn.to-vn.from,0),Yt=Ht.filter(En=>Nt?En.mark.type!==Nt&&En.mark.type.excludes(Nt):!0).reduce((En,vn)=>En+vn.to-vn.from,0);return(Bt>0?Bt+Yt:Bt)>=kt}function At(ze,Re,We={}){if(!Re)return Qt(ze,null,We)||Zn(ze,null,We);const it=Be(Re,ze.schema);return it==="node"?Qt(ze,Re,We):it==="mark"?Zn(ze,Re,We):!1}function Xt(ze,Re){const{nodeExtensions:We}=O(Re),it=We.find(kt=>kt.name===ze);if(!it)return!1;const Pt={name:it.name,options:it.options,storage:it.storage},Nt=w(v(it,"group",Pt));return typeof Nt!="string"?!1:Nt.split(" ").includes("list")}function en(ze){var Re;const We=(Re=ze.type.createAndFill())===null||Re===void 0?void 0:Re.toJSON(),it=ze.toJSON();return JSON.stringify(We)===JSON.stringify(it)}function $n(ze){return ze instanceof e.b}function Xn(ze,Re,We){const it=0,Pt=ze.state.doc.content.size,Nt=ht(Re,it,Pt),kt=ht(We,it,Pt),Ht=ze.coordsAtPos(Nt),Bt=ze.coordsAtPos(kt,-1),Yt=Math.min(Ht.top,Bt.top),an=Math.max(Ht.bottom,Bt.bottom),En=Math.min(Ht.left,Bt.left),vn=Math.max(Ht.right,Bt.right),ar=vn-En,Er=an-Yt,no={top:Yt,bottom:an,left:En,right:vn,width:ar,height:Er,x:En,y:Yt};return Yo(vr({},no),{toJSON:()=>no})}function Yn(ze,Re,We){var it;const{selection:Pt}=Re;let Nt=null;if(rn(Pt)&&(Nt=Pt.$cursor),Nt){const Ht=(it=ze.storedMarks)!==null&&it!==void 0?it:Nt.marks();return!!We.isInSet(Ht)||!Ht.some(Bt=>Bt.type.excludes(We))}const{ranges:kt}=Pt;return kt.some(({$from:Ht,$to:Bt})=>{let Yt=Ht.depth===0?ze.doc.inlineContent&&ze.doc.type.allowsMarkType(We):!1;return ze.doc.nodesBetween(Ht.pos,Bt.pos,(an,En,vn)=>{if(Yt)return!1;if(an.isInline){const ar=!vn||vn.type.allowsMarkType(We),Er=!!We.isInSet(an.marks)||!an.marks.some(Dr=>Dr.type.excludes(We));Yt=ar&&Er}return!Yt}),Yt})}const Sn=(ze,Re={})=>({tr:We,state:it,dispatch:Pt})=>{const{selection:Nt}=We,{empty:kt,ranges:Ht}=Nt,Bt=tt(ze,it.schema);if(Pt)if(kt){const Yt=mt(it,Bt);We.addStoredMark(Bt.create(vr(vr({},Yt),Re)))}else Ht.forEach(Yt=>{const an=Yt.$from.pos,En=Yt.$to.pos;it.doc.nodesBetween(an,En,(vn,ar)=>{const Er=Math.max(ar,an),Dr=Math.min(ar+vn.nodeSize,En);vn.marks.find(no=>no.type===Bt)?vn.marks.forEach(no=>{Bt===no.type&&We.addMark(Er,Dr,Bt.create(vr(vr({},no.attrs),Re)))}):We.addMark(Er,Dr,Bt.create(Re))})});return Yn(it,We,Bt)},nr=(ze,Re)=>({tr:We})=>(We.setMeta(ze,Re),!0),zt=(ze,Re={})=>({state:We,dispatch:it,chain:Pt})=>{const Nt=r(ze,We.schema);return Nt.isTextblock?Pt().command(({commands:kt})=>Object(l.r)(Nt,Re)(We)?!0:kt.clearNodes()).command(({state:kt})=>Object(l.r)(Nt,Re)(kt,it)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Kt=ze=>({tr:Re,dispatch:We})=>{if(We){const{doc:it}=Re,Pt=ht(ze,0,it.content.size),Nt=e.b.create(it,Pt);Re.setSelection(Nt)}return!0},$t=ze=>({tr:Re,dispatch:We})=>{if(We){const{doc:it}=Re,{from:Pt,to:Nt}=typeof ze=="number"?{from:ze,to:ze}:ze,kt=e.f.atStart(it).from,Ht=e.f.atEnd(it).to,Bt=ht(Pt,kt,Ht),Yt=ht(Nt,kt,Ht),an=e.f.create(it,Bt,Yt);Re.setSelection(an)}return!0},et=ze=>({state:Re,dispatch:We})=>{const it=r(ze,Re.schema);return Object(p.b)(it)(Re,We)};function Wt(ze,Re){const We=ze.storedMarks||ze.selection.$to.parentOffset&&ze.selection.$from.marks();if(We){const it=We.filter(Pt=>Re==null?void 0:Re.includes(Pt.type.name));ze.tr.ensureMarks(it)}}const Vt=({keepMarks:ze=!0}={})=>({tr:Re,state:We,dispatch:it,editor:Pt})=>{const{selection:Nt,doc:kt}=Re,{$from:Ht,$to:Bt}=Nt,Yt=Pt.extensionManager.attributes,an=tr(Yt,Ht.node().type.name,Ht.node().attrs);if(Nt instanceof e.b&&Nt.node.isBlock)return!Ht.parentOffset||!Object(c.canSplit)(kt,Ht.pos)?!1:(it&&(ze&&Wt(We,Pt.extensionManager.splittableMarks),Re.split(Ht.pos).scrollIntoView()),!0);if(!Ht.parent.isBlock)return!1;if(it){const En=Bt.parentOffset===Bt.parent.content.size;Nt instanceof e.f&&Re.deleteSelection();const vn=Ht.depth===0?void 0:_n(Ht.node(-1).contentMatchAt(Ht.indexAfter(-1)));let ar=En&&vn?[{type:vn,attrs:an}]:void 0,Er=Object(c.canSplit)(Re.doc,Re.mapping.map(Ht.pos),1,ar);if(!ar&&!Er&&Object(c.canSplit)(Re.doc,Re.mapping.map(Ht.pos),1,vn?[{type:vn}]:void 0)&&(Er=!0,ar=vn?[{type:vn,attrs:an}]:void 0),Er&&(Re.split(Re.mapping.map(Ht.pos),1,ar),vn&&!En&&!Ht.parentOffset&&Ht.parent.type!==vn)){const Dr=Re.mapping.map(Ht.before()),Lr=Re.doc.resolve(Dr);Ht.node(-1).canReplaceWith(Lr.index(),Lr.index()+1,vn)&&Re.setNodeMarkup(Re.mapping.map(Ht.before()),vn)}ze&&Wt(We,Pt.extensionManager.splittableMarks),Re.scrollIntoView()}return!0},cn=ze=>({tr:Re,state:We,dispatch:it,editor:Pt})=>{var Nt;const kt=r(ze,We.schema),{$from:Ht,$to:Bt}=We.selection,Yt=We.selection.node;if(Yt&&Yt.isBlock||Ht.depth<2||!Ht.sameParent(Bt))return!1;const an=Ht.node(-1);if(an.type!==kt)return!1;const En=Pt.extensionManager.attributes;if(Ht.parent.content.size===0&&Ht.node(-1).childCount===Ht.indexAfter(-1)){if(Ht.depth===2||Ht.node(-3).type!==kt||Ht.index(-2)!==Ht.node(-2).childCount-1)return!1;if(it){let Lr=a.Fragment.empty;const no=Ht.index(-1)?1:Ht.index(-2)?2:3;for(let Qi=Ht.depth-no;Qi>=Ht.depth-3;Qi-=1)Lr=a.Fragment.from(Ht.node(Qi).copy(Lr));const ko=Ht.indexAfter(-1)<Ht.node(-2).childCount?1:Ht.indexAfter(-2)<Ht.node(-3).childCount?2:3,bi=tr(En,Ht.node().type.name,Ht.node().attrs),ei=((Nt=kt.contentMatch.defaultType)===null||Nt===void 0?void 0:Nt.createAndFill(bi))||void 0;Lr=Lr.append(a.Fragment.from(kt.createAndFill(null,ei)||void 0));const li=Ht.before(Ht.depth-(no-1));Re.replace(li,Ht.after(-ko),new a.Slice(Lr,4-no,0));let Vi=-1;Re.doc.nodesBetween(li,Re.doc.content.size,(Qi,ua)=>{if(Vi>-1)return!1;Qi.isTextblock&&Qi.content.size===0&&(Vi=ua+1)}),Vi>-1&&Re.setSelection(e.f.near(Re.doc.resolve(Vi))),Re.scrollIntoView()}return!0}const vn=Bt.pos===Ht.end()?an.contentMatchAt(0).defaultType:null,ar=tr(En,an.type.name,an.attrs),Er=tr(En,Ht.node().type.name,Ht.node().attrs);Re.delete(Ht.pos,Bt.pos);const Dr=vn?[{type:kt,attrs:ar},{type:vn,attrs:Er}]:[{type:kt,attrs:ar}];if(!Object(c.canSplit)(Re.doc,Ht.pos,2))return!1;if(it){const{selection:Lr,storedMarks:no}=We,{splittableMarks:ko}=Pt.extensionManager,bi=no||Lr.$to.parentOffset&&Lr.$from.marks();if(Re.split(Ht.pos,2,Dr).scrollIntoView(),!bi||!it)return!0;const ei=bi.filter(li=>ko.includes(li.type.name));Re.ensureMarks(ei)}return!0},Tn=(ze,Re)=>{const We=bn(kt=>kt.type===Re)(ze.selection);if(!We)return!0;const it=ze.doc.resolve(Math.max(0,We.pos-1)).before(We.depth);if(it===void 0)return!0;const Pt=ze.doc.nodeAt(it);return We.node.type===(Pt==null?void 0:Pt.type)&&Object(c.canJoin)(ze.doc,We.pos)&&ze.join(We.pos),!0},pn=(ze,Re)=>{const We=bn(kt=>kt.type===Re)(ze.selection);if(!We)return!0;const it=ze.doc.resolve(We.start).after(We.depth);if(it===void 0)return!0;const Pt=ze.doc.nodeAt(it);return We.node.type===(Pt==null?void 0:Pt.type)&&Object(c.canJoin)(ze.doc,it)&&ze.join(it),!0};var yr=Object.freeze({__proto__:null,blur:Ye,clearContent:se,clearNodes:ie,command:Ee,createParagraphNear:Oe,deleteCurrentNode:ce,deleteNode:ue,deleteRange:pe,deleteSelection:$e,enter:ne,exitCode:X,extendMarkRange:Ft,first:Lt,focus:rt,forEach:Pe,insertContent:de,insertContentAt:x,joinUp:H,joinDown:le,joinBackward:Ce,joinForward:Ue,keyboardShortcut:yt,lift:tn,liftEmptyBlock:Kn,liftListItem:Ot,newlineInCode:lt,resetAttributes:Ae,scrollIntoView:fe,selectAll:ft,selectNodeBackward:nt,selectNodeForward:ct,selectParentNode:Xe,selectTextblockEnd:gt,selectTextblockStart:Tt,setContent:qt,setMark:Sn,setMeta:nr,setNode:zt,setNodeSelection:Kt,setTextSelection:$t,sinkListItem:et,splitBlock:Vt,splitListItem:cn,toggleList:(ze,Re,We)=>({editor:it,tr:Pt,state:Nt,dispatch:kt,chain:Ht,commands:Bt,can:Yt})=>{const{extensions:an,splittableMarks:En}=it.extensionManager,vn=r(ze,Nt.schema),ar=r(Re,Nt.schema),{selection:Er,storedMarks:Dr}=Nt,{$from:Lr,$to:no}=Er,ko=Lr.blockRange(no),bi=Dr||Er.$to.parentOffset&&Er.$from.marks();if(!ko)return!1;const ei=bn(li=>Xt(li.type.name,an))(Er);if(ko.depth>=1&&ei&&ko.depth-ei.depth<=1){if(ei.node.type===vn)return Bt.liftListItem(ar);if(Xt(ei.node.type.name,an)&&vn.validContent(ei.node.content)&&kt)return Ht().command(()=>(Pt.setNodeMarkup(ei.pos,vn),!0)).command(()=>Tn(Pt,vn)).command(()=>pn(Pt,vn)).run()}return!We||!bi||!kt?Ht().command(()=>Yt().wrapInList(vn)?!0:Bt.clearNodes()).wrapInList(vn).command(()=>Tn(Pt,vn)).command(()=>pn(Pt,vn)).run():Ht().command(()=>{const li=Yt().wrapInList(vn),Vi=bi.filter(Qi=>En.includes(Qi.type.name));return Pt.ensureMarks(Vi),li?!0:Bt.clearNodes()}).wrapInList(vn).command(()=>Tn(Pt,vn)).command(()=>pn(Pt,vn)).run()},toggleMark:(ze,Re={},We={})=>({state:it,commands:Pt})=>{const{extendEmptyMarkRange:Nt=!1}=We,kt=tt(ze,it.schema);return Zn(it,kt,Re)?Pt.unsetMark(kt,{extendEmptyMarkRange:Nt}):Pt.setMark(kt,Re)},toggleNode:(ze,Re,We={})=>({state:it,commands:Pt})=>{const Nt=r(ze,it.schema),kt=r(Re,it.schema);return Qt(it,Nt,We)?Pt.setNode(kt):Pt.setNode(Nt,We)},toggleWrap:(ze,Re={})=>({state:We,commands:it})=>{const Pt=r(ze,We.schema);return Qt(We,Pt,Re)?it.lift(Pt):it.wrapIn(Pt,Re)},undoInputRule:()=>({state:ze,dispatch:Re})=>{const We=ze.plugins;for(let it=0;it<We.length;it+=1){const Pt=We[it];let Nt;if(Pt.spec.isInputRules&&(Nt=Pt.getState(ze))){if(Re){const kt=ze.tr,Ht=Nt.transform;for(let Bt=Ht.steps.length-1;Bt>=0;Bt-=1)kt.step(Ht.steps[Bt].invert(Ht.docs[Bt]));if(Nt.text){const Bt=kt.doc.resolve(Nt.from).marks();kt.replaceWith(Nt.from,Nt.to,ze.schema.text(Nt.text,Bt))}else kt.delete(Nt.from,Nt.to)}return!0}}return!1},unsetAllMarks:()=>({tr:ze,dispatch:Re})=>{const{selection:We}=ze,{empty:it,ranges:Pt}=We;return it||Re&&Pt.forEach(Nt=>{ze.removeMark(Nt.$from.pos,Nt.$to.pos)}),!0},unsetMark:(ze,Re={})=>({tr:We,state:it,dispatch:Pt})=>{var Nt;const{extendEmptyMarkRange:kt=!1}=Re,{selection:Ht}=We,Bt=tt(ze,it.schema),{$from:Yt,empty:an,ranges:En}=Ht;if(!Pt)return!0;if(an&&kt){let{from:vn,to:ar}=Ht;const Er=(Nt=Yt.marks().find(Lr=>Lr.type===Bt))===null||Nt===void 0?void 0:Nt.attrs,Dr=Ze(Yt,Bt,Er);Dr&&(vn=Dr.from,ar=Dr.to),We.removeMark(vn,ar,Bt)}else En.forEach(vn=>{We.removeMark(vn.$from.pos,vn.$to.pos,Bt)});return We.removeStoredMark(Bt),!0},updateAttributes:(ze,Re={})=>({tr:We,state:it,dispatch:Pt})=>{let Nt=null,kt=null;const Ht=Be(typeof ze=="string"?ze:ze.name,it.schema);return Ht?(Ht==="node"&&(Nt=r(ze,it.schema)),Ht==="mark"&&(kt=tt(ze,it.schema)),Pt&&We.selection.ranges.forEach(Bt=>{const Yt=Bt.$from.pos,an=Bt.$to.pos;it.doc.nodesBetween(Yt,an,(En,vn)=>{Nt&&Nt===En.type&&We.setNodeMarkup(vn,void 0,vr(vr({},En.attrs),Re)),kt&&En.marks.length&&En.marks.forEach(ar=>{if(kt===ar.type){const Er=Math.max(vn,Yt),Dr=Math.min(vn+En.nodeSize,an);We.addMark(Er,Dr,kt.create(vr(vr({},ar.attrs),Re)))}})})}),!0):!1},wrapIn:(ze,Re={})=>({state:We,dispatch:it})=>{const Pt=r(ze,We.schema);return Object(l.t)(Pt,Re)(We,it)},wrapInList:(ze,Re={})=>({state:We,dispatch:it})=>{const Pt=r(ze,We.schema);return Object(p.d)(Pt,Re)(We,it)}});const br=ee.create({name:"commands",addCommands(){return vr({},yr)}}),Br=ee.create({name:"editable",addProseMirrorPlugins(){return[new e.c({key:new e.d("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Nr=ee.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:ze}=this;return[new e.c({key:new e.d("focusEvents"),props:{handleDOMEvents:{focus:(Re,We)=>{ze.isFocused=!0;const it=ze.state.tr.setMeta("focus",{event:We}).setMeta("addToHistory",!1);return Re.dispatch(it),!1},blur:(Re,We)=>{ze.isFocused=!1;const it=ze.state.tr.setMeta("blur",{event:We}).setMeta("addToHistory",!1);return Re.dispatch(it),!1}}}})]}}),lo=ee.create({name:"keymap",addKeyboardShortcuts(){const ze=()=>this.editor.commands.first(({commands:kt})=>[()=>kt.undoInputRule(),()=>kt.command(({tr:Ht})=>{const{selection:Bt,doc:Yt}=Ht,{empty:an,$anchor:En}=Bt,{pos:vn,parent:ar}=En,Er=e.e.atStart(Yt).from===vn;return!an||!Er||!ar.type.isTextblock||ar.textContent.length?!1:kt.clearNodes()}),()=>kt.deleteSelection(),()=>kt.joinBackward(),()=>kt.selectNodeBackward()]),Re=()=>this.editor.commands.first(({commands:kt})=>[()=>kt.deleteSelection(),()=>kt.deleteCurrentNode(),()=>kt.joinForward(),()=>kt.selectNodeForward()]),it={Enter:()=>this.editor.commands.first(({commands:kt})=>[()=>kt.newlineInCode(),()=>kt.createParagraphNear(),()=>kt.liftEmptyBlock(),()=>kt.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:ze,"Mod-Backspace":ze,"Shift-Backspace":ze,Delete:Re,"Mod-Delete":Re,"Mod-a":()=>this.editor.commands.selectAll()},Pt=vr({},it),Nt=Yo(vr({},it),{"Ctrl-h":ze,"Alt-Backspace":ze,"Ctrl-d":Re,"Ctrl-Alt-Backspace":Re,"Alt-Delete":Re,"Alt-d":Re,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return Le()||Ve()?Nt:Pt},addProseMirrorPlugins(){return[new e.c({key:new e.d("clearDocument"),appendTransaction:(ze,Re,We)=>{if(!(ze.some(Er=>Er.docChanged)&&!Re.doc.eq(We.doc)))return;const{empty:Pt,from:Nt,to:kt}=Re.selection,Ht=e.e.atStart(Re.doc).from,Bt=e.e.atEnd(Re.doc).to,Yt=Nt===Ht&&kt===Bt,an=We.doc.textBetween(0,We.doc.content.size," "," ").length===0;if(Pt||!Yt||!an)return;const En=We.tr,vn=h({state:We,transaction:En}),{commands:ar}=new m({editor:this.editor,state:vn});if(ar.clearNodes(),!!En.steps.length)return En}})]}}),Zr=ee.create({name:"tabindex",addProseMirrorPlugins(){return[new e.c({key:new e.d("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var zr=Object.freeze({__proto__:null,ClipboardTextSerializer:me,Commands:br,Editable:Br,FocusEvents:Nr,Keymap:lo,Tabindex:Zr});const wr=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function $o(ze,Re){const We=document.querySelector("style[data-tiptap-style]");if(We!==null)return We;const it=document.createElement("style");return Re&&it.setAttribute("nonce",Re),it.setAttribute("data-tiptap-style",""),it.innerHTML=ze,document.getElementsByTagName("head")[0].appendChild(it),it}class xo extends g{constructor(Re={}){super();this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(Re),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=$o(wr,this.options.injectNonce))}setOptions(Re={}){this.options=vr(vr({},this.options),Re),!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(Re,We=!0){this.setOptions({editable:Re}),We&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(Re,We){const it=b(We)?We(Re,[...this.state.plugins]):[...this.state.plugins,Re],Pt=this.state.reconfigure({plugins:it});this.view.updateState(Pt)}unregisterPlugin(Re){if(this.isDestroyed)return;const We=typeof Re=="string"?`${Re}$`:Re.key,it=this.state.reconfigure({plugins:this.state.plugins.filter(Pt=>!Pt.key.startsWith(We))});this.view.updateState(it)}createExtensionManager(){const We=[...this.options.enableCoreExtensions?Object.values(zr):[],...this.options.extensions].filter(it=>["extension","node","mark"].includes(it==null?void 0:it.type));this.extensionManager=new V(We,this)}createCommandManager(){this.commandManager=new m({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const Re=Ut(this.options.content,this.schema,this.options.parseOptions),We=je(Re,this.options.autofocus);this.view=new s.c(this.options.element,Yo(vr({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:e.a.create({doc:Re,selection:We||void 0})}));const it=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(it),this.createNodeViews();const Pt=this.view.dom;Pt.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(Re){this.isCapturingTransaction=!0,Re(),this.isCapturingTransaction=!1;const We=this.capturedTransaction;return this.capturedTransaction=null,We}dispatchTransaction(Re){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=Re;return}Re.steps.forEach(kt=>{var Ht;return(Ht=this.capturedTransaction)===null||Ht===void 0?void 0:Ht.step(kt)});return}const We=this.state.apply(Re),it=!this.state.selection.eq(We.selection);this.view.updateState(We),this.emit("transaction",{editor:this,transaction:Re}),it&&this.emit("selectionUpdate",{editor:this,transaction:Re});const Pt=Re.getMeta("focus"),Nt=Re.getMeta("blur");Pt&&this.emit("focus",{editor:this,event:Pt.event,transaction:Re}),Nt&&this.emit("blur",{editor:this,event:Nt.event,transaction:Re}),!(!Re.docChanged||Re.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:Re})}getAttributes(Re){return pt(this.state,Re)}isActive(Re,We){const it=typeof Re=="string"?Re:null,Pt=typeof Re=="string"?We:Re;return At(this.state,it,Pt)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cr(this.state.doc.content,this.schema)}getText(Re){const{blockSeparator:We=`

`,textSerializers:it={}}=Re||{};return jr(this.state.doc,{blockSeparator:We,textSerializers:vr(vr({},he(this.schema)),it)})}get isEmpty(){return en(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var Re;return!((Re=this.view)===null||Re===void 0?void 0:Re.docView)}}function Vo(ze){return new N({find:ze.find,handler:({state:Re,range:We,match:it})=>{const Pt=w(ze.getAttributes,void 0,it);if(Pt===!1||Pt===null)return null;const{tr:Nt}=Re,kt=it[it.length-1],Ht=it[0];let Bt=We.to;if(kt){const Yt=Ht.search(/\S/),an=We.from+Ht.indexOf(kt),En=an+kt.length;if(Cn(We.from,We.to,Re.doc).filter(ar=>ar.mark.type.excluded.find(Dr=>Dr===ze.type&&Dr!==ar.mark.type)).filter(ar=>ar.to>an).length)return null;En<We.to&&Nt.delete(En,We.to),an>We.from&&Nt.delete(We.from+Yt,an),Bt=We.from+Yt+kt.length,Nt.addMark(We.from+Yt,Bt,ze.type.create(Pt||{})),Nt.removeStoredMark(ze.type)}}})}function Ti(ze){return new N({find:ze.find,handler:({state:Re,range:We,match:it})=>{const Pt=w(ze.getAttributes,void 0,it)||{},{tr:Nt}=Re,kt=We.from;let Ht=We.to;if(it[1]){const Bt=it[0].lastIndexOf(it[1]);let Yt=kt+Bt;Yt>Ht?Yt=Ht:Ht=Yt+it[1].length;const an=it[0][it[0].length-1];Nt.insertText(an,kt+it[0].length-1),Nt.replaceWith(Yt,Ht,ze.type.create(Pt))}else it[0]&&Nt.replaceWith(kt,Ht,ze.type.create(Pt))}})}function Ho(ze){return new N({find:ze.find,handler:({state:Re,range:We,match:it})=>{const Pt=Re.doc.resolve(We.from),Nt=w(ze.getAttributes,void 0,it)||{};if(!Pt.node(-1).canReplaceWith(Pt.index(-1),Pt.indexAfter(-1),ze.type))return null;Re.tr.delete(We.from,We.to).setBlockType(We.from,We.from,ze.type,Nt)}})}function oi(ze){return new N({find:ze.find,handler:({state:Re,range:We,match:it})=>{let Pt=ze.replace,Nt=We.from;const kt=We.to;if(it[1]){const Ht=it[0].lastIndexOf(it[1]);Pt+=it[0].slice(Ht+it[1].length),Nt+=Ht;const Bt=Nt-kt;Bt>0&&(Pt=it[0].slice(Ht-Bt,Ht)+Pt,Nt=kt)}Re.tr.insertText(Pt,Nt,kt)}})}function zo(ze){return new N({find:ze.find,handler:({state:Re,range:We,match:it,chain:Pt})=>{const Nt=w(ze.getAttributes,void 0,it)||{},kt=Re.tr.delete(We.from,We.to),Bt=kt.doc.resolve(We.from).blockRange(),Yt=Bt&&Object(c.findWrapping)(Bt,ze.type,Nt);if(!Yt)return null;if(kt.wrap(Bt,Yt),ze.keepMarks&&ze.editor){const{selection:En,storedMarks:vn}=Re,{splittableMarks:ar}=ze.editor.extensionManager,Er=vn||En.$to.parentOffset&&En.$from.marks();if(Er){const Dr=Er.filter(Lr=>ar.includes(Lr.type.name));kt.ensureMarks(Dr)}}if(ze.keepAttributes){const En=ze.type.name==="bulletList"||ze.type.name==="orderedList"?"listItem":"taskList";Pt().updateAttributes(En,Nt).run()}const an=kt.doc.resolve(We.from-1).nodeBefore;an&&an.type===ze.type&&Object(c.canJoin)(kt.doc,We.from-1)&&(!ze.joinPredicate||ze.joinPredicate(it,an))&&kt.join(We.from-1)}})}class ho{constructor(Re={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=vr(vr({},this.config),Re),this.name=this.config.name,Re.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(v(this,"addOptions",{name:this.name}))),this.storage=w(v(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(Re={}){return new ho(Re)}configure(Re={}){const We=this.extend();return We.options=Y(this.options,Re),We.storage=w(v(We,"addStorage",{name:We.name,options:We.options})),We}extend(Re={}){const We=new ho(Re);return We.parent=this,this.child=We,We.name=Re.name?Re.name:We.parent.name,Re.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${We.name}".`),We.options=w(v(We,"addOptions",{name:We.name})),We.storage=w(v(We,"addStorage",{name:We.name,options:We.options})),We}static handleExit({editor:Re,mark:We}){const{tr:it}=Re.state,Pt=Re.state.selection.$from;if(Pt.pos===Pt.end()){const kt=Pt.marks();if(!!!kt.find(Yt=>(Yt==null?void 0:Yt.type.name)===We.name))return!1;const Bt=kt.find(Yt=>(Yt==null?void 0:Yt.type.name)===We.name);return Bt&&it.removeStoredMark(Bt),it.insertText(" ",Pt.pos),Re.view.dispatch(it),!0}return!1}}class Jo{constructor(Re={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=vr(vr({},this.config),Re),this.name=this.config.name,Re.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(v(this,"addOptions",{name:this.name}))),this.storage=w(v(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(Re={}){return new Jo(Re)}configure(Re={}){const We=this.extend();return We.options=Y(this.options,Re),We.storage=w(v(We,"addStorage",{name:We.name,options:We.options})),We}extend(Re={}){const We=new Jo(Re);return We.parent=this,this.child=We,We.name=Re.name?Re.name:We.parent.name,Re.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${We.name}".`),We.options=w(v(We,"addOptions",{name:We.name})),We.storage=w(v(We,"addStorage",{name:We.name,options:We.options})),We}}class gi{constructor(Re,We,it){this.isDragging=!1,this.component=Re,this.editor=We.editor,this.options=vr({stopEvent:null,ignoreMutation:null},it),this.extension=We.extension,this.node=We.node,this.decorations=We.decorations,this.getPos=We.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(Re){var We,it,Pt,Nt,kt,Ht,Bt;const{view:Yt}=this.editor,an=Re.target,En=an.nodeType===3?(We=an.parentElement)===null||We===void 0?void 0:We.closest("[data-drag-handle]"):an.closest("[data-drag-handle]");if(!this.dom||((it=this.contentDOM)===null||it===void 0?void 0:it.contains(an))||!En)return;let vn=0,ar=0;if(this.dom!==En){const Lr=this.dom.getBoundingClientRect(),no=En.getBoundingClientRect(),ko=(Pt=Re.offsetX)!==null&&Pt!==void 0?Pt:(Nt=Re.nativeEvent)===null||Nt===void 0?void 0:Nt.offsetX,bi=(kt=Re.offsetY)!==null&&kt!==void 0?kt:(Ht=Re.nativeEvent)===null||Ht===void 0?void 0:Ht.offsetY;vn=no.x-Lr.x+ko,ar=no.y-Lr.y+bi}(Bt=Re.dataTransfer)===null||Bt===void 0||Bt.setDragImage(this.dom,vn,ar);const Er=e.b.create(Yt.state.doc,this.getPos()),Dr=Yt.state.tr.setSelection(Er);Yt.dispatch(Dr)}stopEvent(Re){var We;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:Re});const it=Re.target;if(!(this.dom.contains(it)&&!((We=this.contentDOM)===null||We===void 0?void 0:We.contains(it))))return!1;const Nt=Re.type.startsWith("drag"),kt=Re.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(it.tagName)||it.isContentEditable)&&!kt&&!Nt)return!0;const{isEditable:Bt}=this.editor,{isDragging:Yt}=this,an=!!this.node.type.spec.draggable,En=e.b.isSelectable(this.node),vn=Re.type==="copy",ar=Re.type==="paste",Er=Re.type==="cut",Dr=Re.type==="mousedown";if(!an&&En&&Nt&&Re.preventDefault(),an&&Nt&&!Yt)return Re.preventDefault(),!1;if(an&&Bt&&!Yt&&Dr){const Lr=it.closest("[data-drag-handle]");Lr&&(this.dom===Lr||this.dom.contains(Lr))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(Yt||kt||vn||ar||Er||Dr&&En)}ignoreMutation(Re){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:Re}):this.node.isLeaf||this.node.isAtom?!0:Re.type==="selection"||this.dom.contains(Re.target)&&Re.type==="childList"&&Le()&&this.editor.isFocused&&[...Array.from(Re.addedNodes),...Array.from(Re.removedNodes)].every(it=>it.isContentEditable)?!1:this.contentDOM===Re.target&&Re.type==="attributes"?!0:!this.contentDOM.contains(Re.target)}updateAttributes(Re){this.editor.commands.command(({tr:We})=>{const it=this.getPos();return We.setNodeMarkup(it,void 0,vr(vr({},this.node.attrs),Re)),!0})}deleteNode(){const Re=this.getPos(),We=Re+this.node.nodeSize;this.editor.commands.deleteRange({from:Re,to:We})}}function ki(ze){return new U({find:ze.find,handler:({state:Re,range:We,match:it})=>{const Pt=w(ze.getAttributes,void 0,it);if(Pt===!1||Pt===null)return null;const{tr:Nt}=Re,kt=it[it.length-1],Ht=it[0];let Bt=We.to;if(kt){const Yt=Ht.search(/\S/),an=We.from+Ht.indexOf(kt),En=an+kt.length;if(Cn(We.from,We.to,Re.doc).filter(ar=>ar.mark.type.excluded.find(Dr=>Dr===ze.type&&Dr!==ar.mark.type)).filter(ar=>ar.to>an).length)return null;En<We.to&&Nt.delete(En,We.to),an>We.from&&Nt.delete(We.from+Yt,an),Bt=We.from+Yt+kt.length,Nt.addMark(We.from+Yt,Bt,ze.type.create(Pt||{})),Nt.removeStoredMark(ze.type)}}})}function ao(ze){return ze.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Po(ze){return typeof ze=="string"}function qo(ze){return new U({find:ze.find,handler({match:Re,chain:We,range:it}){const Pt=w(ze.getAttributes,void 0,Re);if(Pt===!1||Pt===null)return null;Re.input&&We().deleteRange(it).insertContentAt(it.from,{type:ze.type.name,attrs:Pt})}})}function Ai(ze){return new U({find:ze.find,handler:({state:Re,range:We,match:it})=>{let Pt=ze.replace,Nt=We.from;const kt=We.to;if(it[1]){const Ht=it[0].lastIndexOf(it[1]);Pt+=it[0].slice(Ht+it[1].length),Nt+=Ht;const Bt=Nt-kt;Bt>0&&(Pt=it[0].slice(Ht-Bt,Ht)+Pt,Nt=kt)}Re.tr.insertText(Pt,Nt,kt)}})}class hi{constructor(Re){this.transaction=Re,this.currentStep=this.transaction.steps.length}map(Re){let We=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((Pt,Nt)=>{const kt=Nt.getMap().mapResult(Pt);return kt.deleted&&(We=!0),kt.pos},Re),deleted:We}}}},function($,n,t){"use strict";t.r(n),t.d(n,"AllSelection",function(){return O}),t.d(n,"EditorState",function(){return B}),t.d(n,"NodeSelection",function(){return g}),t.d(n,"Plugin",function(){return y}),t.d(n,"PluginKey",function(){return A}),t.d(n,"Selection",function(){return a}),t.d(n,"SelectionRange",function(){return c}),t.d(n,"TextSelection",function(){return h}),t.d(n,"Transaction",function(){return E});var e=t(13),s=t(34);const o=Object.create(null);class a{constructor(C,R,U){this.$anchor=C,this.$head=R,this.ranges=U||[new c(C.min(R),C.max(R))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let C=this.ranges;for(let R=0;R<C.length;R++)if(C[R].$from.pos!=C[R].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(C,R=e.Slice.empty){let U=R.content.lastChild,Z=null;for(let G=0;G<R.openEnd;G++)Z=U,U=U.lastChild;let F=C.steps.length,z=this.ranges;for(let G=0;G<z.length;G++){let{$from:V,$to:k}=z[G],K=C.mapping.slice(F);C.replaceRange(K.map(V.pos),K.map(k.pos),G?e.Slice.empty:R),G==0&&i(C,F,(U?U.isInline:Z&&Z.isTextblock)?-1:1)}}replaceWith(C,R){let U=C.steps.length,Z=this.ranges;for(let F=0;F<Z.length;F++){let{$from:z,$to:G}=Z[F],V=C.mapping.slice(U),k=V.map(z.pos),K=V.map(G.pos);F?C.deleteRange(k,K):(C.replaceRangeWith(k,K,R),i(C,U,R.isInline?-1:1))}}static findFrom(C,R,U=!1){let Z=C.parent.inlineContent?new h(C):r(C.node(0),C.parent,C.pos,C.index(),R,U);if(Z)return Z;for(let F=C.depth-1;F>=0;F--){let z=R<0?r(C.node(0),C.node(F),C.before(F+1),C.index(F),R,U):r(C.node(0),C.node(F),C.after(F+1),C.index(F)+1,R,U);if(z)return z}return null}static near(C,R=1){return this.findFrom(C,R)||this.findFrom(C,-R)||new O(C.node(0))}static atStart(C){return r(C,C,0,0,1)||new O(C)}static atEnd(C){return r(C,C,C.content.size,C.childCount,-1)||new O(C)}static fromJSON(C,R){if(!R||!R.type)throw new RangeError("Invalid input for Selection.fromJSON");let U=o[R.type];if(!U)throw new RangeError(`No selection type ${R.type} defined`);return U.fromJSON(C,R)}static jsonID(C,R){if(C in o)throw new RangeError("Duplicate use of selection JSON ID "+C);return o[C]=R,R.prototype.jsonID=C,R}getBookmark(){return h.between(this.$anchor,this.$head).getBookmark()}}a.prototype.visible=!0;class c{constructor(C,R){this.$from=C,this.$to=R}}let l=!1;function p(L){!l&&!L.parent.inlineContent&&(l=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+L.parent.type.name+")"))}class h extends a{constructor(C,R=C){p(C),p(R);super(C,R)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(C,R){let U=C.resolve(R.map(this.head));if(!U.parent.inlineContent)return a.near(U);let Z=C.resolve(R.map(this.anchor));return new h(Z.parent.inlineContent?Z:U,U)}replace(C,R=e.Slice.empty){if(super.replace(C,R),R==e.Slice.empty){let U=this.$from.marksAcross(this.$to);U&&C.ensureMarks(U)}}eq(C){return C instanceof h&&C.anchor==this.anchor&&C.head==this.head}getBookmark(){return new m(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(C,R){if(typeof R.anchor!="number"||typeof R.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new h(C.resolve(R.anchor),C.resolve(R.head))}static create(C,R,U=R){let Z=C.resolve(R);return new this(Z,U==R?Z:C.resolve(U))}static between(C,R,U){let Z=C.pos-R.pos;if((!U||Z)&&(U=Z>=0?1:-1),!R.parent.inlineContent){let F=a.findFrom(R,U,!0)||a.findFrom(R,-U,!0);if(F)R=F.$head;else return a.near(R,U)}return C.parent.inlineContent||(Z==0?C=R:(C=(a.findFrom(C,-U,!0)||a.findFrom(C,U,!0)).$anchor,C.pos<R.pos!=Z<0&&(C=R))),new h(C,R)}}a.jsonID("text",h);class m{constructor(C,R){this.anchor=C,this.head=R}map(C){return new m(C.map(this.anchor),C.map(this.head))}resolve(C){return h.between(C.resolve(this.anchor),C.resolve(this.head))}}class g extends a{constructor(C){let R=C.nodeAfter,U=C.node(0).resolve(C.pos+R.nodeSize);super(C,U);this.node=R}map(C,R){let{deleted:U,pos:Z}=R.mapResult(this.anchor),F=C.resolve(Z);return U?a.near(F):new g(F)}content(){return new e.Slice(e.Fragment.from(this.node),0,0)}eq(C){return C instanceof g&&C.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new v(this.anchor)}static fromJSON(C,R){if(typeof R.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new g(C.resolve(R.anchor))}static create(C,R){return new g(C.resolve(R))}static isSelectable(C){return!C.isText&&C.type.spec.selectable!==!1}}g.prototype.visible=!1,a.jsonID("node",g);class v{constructor(C){this.anchor=C}map(C){let{deleted:R,pos:U}=C.mapResult(this.anchor);return R?new m(U,U):new v(U)}resolve(C){let R=C.resolve(this.anchor),U=R.nodeAfter;return U&&g.isSelectable(U)?new g(R):a.near(R)}}class O extends a{constructor(C){super(C.resolve(0),C.resolve(C.content.size))}replace(C,R=e.Slice.empty){if(R==e.Slice.empty){C.delete(0,C.doc.content.size);let U=a.atStart(C.doc);U.eq(C.selection)||C.setSelection(U)}else super.replace(C,R)}toJSON(){return{type:"all"}}static fromJSON(C){return new O(C)}map(C){return new O(C)}eq(C){return C instanceof O}getBookmark(){return u}}a.jsonID("all",O);const u={map(){return this},resolve(L){return new O(L)}};function r(L,C,R,U,Z,F=!1){if(C.inlineContent)return h.create(L,R);for(let z=U-(Z>0?0:1);Z>0?z<C.childCount:z>=0;z+=Z){let G=C.child(z);if(G.isAtom){if(!F&&g.isSelectable(G))return g.create(L,R-(Z<0?G.nodeSize:0))}else{let V=r(L,G,R+Z,Z<0?G.childCount:0,Z,F);if(V)return V}R+=G.nodeSize*Z}return null}function i(L,C,R){let U=L.steps.length-1;if(U<C)return;let Z=L.steps[U];if(!(Z instanceof s.ReplaceStep||Z instanceof s.ReplaceAroundStep))return;let F=L.mapping.maps[U],z;F.forEach((G,V,k,K)=>{z==null&&(z=K)}),L.setSelection(a.near(L.doc.resolve(z),R))}const d=1,b=2,w=4;class E extends s.Transform{constructor(C){super(C.doc);this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=C.selection,this.storedMarks=C.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(C){if(C.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=C,this.curSelectionFor=this.steps.length,this.updated=(this.updated|d)&~b,this.storedMarks=null,this}get selectionSet(){return(this.updated&d)>0}setStoredMarks(C){return this.storedMarks=C,this.updated|=b,this}ensureMarks(C){return e.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),C)||this.setStoredMarks(C),this}addStoredMark(C){return this.ensureMarks(C.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(C){return this.ensureMarks(C.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&b)>0}addStep(C,R){super.addStep(C,R),this.updated=this.updated&~b,this.storedMarks=null}setTime(C){return this.time=C,this}replaceSelection(C){return this.selection.replace(this,C),this}replaceSelectionWith(C,R=!0){let U=this.selection;return R&&(C=C.mark(this.storedMarks||(U.empty?U.$from.marks():U.$from.marksAcross(U.$to)||e.Mark.none))),U.replaceWith(this,C),this}deleteSelection(){return this.selection.replace(this),this}insertText(C,R,U){let Z=this.doc.type.schema;if(R==null)return C?this.replaceSelectionWith(Z.text(C),!0):this.deleteSelection();{if(U==null&&(U=R),U=U==null?R:U,!C)return this.deleteRange(R,U);let F=this.storedMarks;if(!F){let z=this.doc.resolve(R);F=U==R?z.marks():z.marksAcross(this.doc.resolve(U))}return this.replaceRangeWith(R,U,Z.text(C,F)),this.selection.empty||this.setSelection(a.near(this.selection.$to)),this}}setMeta(C,R){return this.meta[typeof C=="string"?C:C.key]=R,this}getMeta(C){return this.meta[typeof C=="string"?C:C.key]}get isGeneric(){for(let C in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=w,this}get scrolledIntoView(){return(this.updated&w)>0}}function S(L,C){return!C||!L?L:L.bind(C)}class P{constructor(C,R,U){this.name=C,this.init=S(R.init,U),this.apply=S(R.apply,U)}}const D=[new P("doc",{init(L){return L.doc||L.schema.topNodeType.createAndFill()},apply(L){return L.doc}}),new P("selection",{init(L,C){return L.selection||a.atStart(C.doc)},apply(L){return L.selection}}),new P("storedMarks",{init(L){return L.storedMarks||null},apply(L,C,R,U){return U.selection.$cursor?L.storedMarks:null}}),new P("scrollToSelection",{init(){return 0},apply(L,C){return L.scrolledIntoView?C+1:C}})];class W{constructor(C,R){this.schema=C,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=D.slice(),R&&R.forEach(U=>{if(this.pluginsByKey[U.key])throw new RangeError("Adding different instances of a keyed plugin ("+U.key+")");this.plugins.push(U),this.pluginsByKey[U.key]=U,U.spec.state&&this.fields.push(new P(U.key,U.spec.state,U))})}}class B{constructor(C){this.config=C}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(C){return this.applyTransaction(C).state}filterTransaction(C,R=-1){for(let U=0;U<this.config.plugins.length;U++)if(U!=R){let Z=this.config.plugins[U];if(Z.spec.filterTransaction&&!Z.spec.filterTransaction.call(Z,C,this))return!1}return!0}applyTransaction(C){if(!this.filterTransaction(C))return{state:this,transactions:[]};let R=[C],U=this.applyInner(C),Z=null;for(;;){let F=!1;for(let z=0;z<this.config.plugins.length;z++){let G=this.config.plugins[z];if(G.spec.appendTransaction){let V=Z?Z[z].n:0,k=Z?Z[z].state:this,K=V<R.length&&G.spec.appendTransaction.call(G,V?R.slice(V):R,k,U);if(K&&U.filterTransaction(K,z)){if(K.setMeta("appendedTransaction",C),!Z){Z=[];for(let Y=0;Y<this.config.plugins.length;Y++)Z.push(Y<z?{state:U,n:R.length}:{state:this,n:0})}R.push(K),U=U.applyInner(K),F=!0}Z&&(Z[z]={state:U,n:R.length})}}if(!F)return{state:U,transactions:R}}}applyInner(C){if(!C.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let R=new B(this.config),U=this.config.fields;for(let Z=0;Z<U.length;Z++){let F=U[Z];R[F.name]=F.apply(C,this[F.name],this,R)}return R}get tr(){return new E(this)}static create(C){let R=new W(C.doc?C.doc.type.schema:C.schema,C.plugins),U=new B(R);for(let Z=0;Z<R.fields.length;Z++)U[R.fields[Z].name]=R.fields[Z].init(C,U);return U}reconfigure(C){let R=new W(this.schema,C.plugins),U=R.fields,Z=new B(R);for(let F=0;F<U.length;F++){let z=U[F].name;Z[z]=this.hasOwnProperty(z)?this[z]:U[F].init(C,Z)}return Z}toJSON(C){let R={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(R.storedMarks=this.storedMarks.map(U=>U.toJSON())),C&&typeof C=="object")for(let U in C){if(U=="doc"||U=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let Z=C[U],F=Z.spec.state;F&&F.toJSON&&(R[U]=F.toJSON.call(Z,this[Z.key]))}return R}static fromJSON(C,R,U){if(!R)throw new RangeError("Invalid input for EditorState.fromJSON");if(!C.schema)throw new RangeError("Required config field 'schema' missing");let Z=new W(C.schema,C.plugins),F=new B(Z);return Z.fields.forEach(z=>{if(z.name=="doc")F.doc=e.Node.fromJSON(C.schema,R.doc);else if(z.name=="selection")F.selection=a.fromJSON(F.doc,R.selection);else if(z.name=="storedMarks")R.storedMarks&&(F.storedMarks=R.storedMarks.map(C.schema.markFromJSON));else{if(U)for(let G in U){let V=U[G],k=V.spec.state;if(V.key==z.name&&k&&k.fromJSON&&Object.prototype.hasOwnProperty.call(R,G)){F[z.name]=k.fromJSON.call(V,C,R[G],F);return}}F[z.name]=z.init(C,F)}}),F}}function f(L,C,R){for(let U in L){let Z=L[U];Z instanceof Function?Z=Z.bind(C):U=="handleDOMEvents"&&(Z=f(Z,C,{})),R[U]=Z}return R}class y{constructor(C){this.spec=C,this.props={},C.props&&f(C.props,this,this.props),this.key=C.key?C.key.key:N("plugin")}getState(C){return C[this.key]}}const M=Object.create(null);function N(L){return L in M?L+"$"+ ++M[L]:(M[L]=0,L+"$")}class A{constructor(C="key"){this.key=N(C)}get(C){return C.config.pluginsByKey[this.key]}getState(C){return C[this.key]}}},function($,n,t){"use strict";t.d(n,"a",function(){return e.a}),t.d(n,"A",function(){return s.d}),t.d(n,"b",function(){return s.a}),t.d(n,"k",function(){return s.c}),t.d(n,"e",function(){return s.b}),t.d(n,"h",function(){return a.a}),t.d(n,"j",function(){return a.c}),t.d(n,"i",function(){return a.b}),t.d(n,"l",function(){return c.a}),t.d(n,"p",function(){return l.d}),t.d(n,"n",function(){return l.b}),t.d(n,"m",function(){return l.a}),t.d(n,"o",function(){return l.c}),t.d(n,"s",function(){return p.a}),t.d(n,"t",function(){return h.b}),t.d(n,"z",function(){return m.a}),t.d(n,"y",function(){return g.c}),t.d(n,"B",function(){return g.e}),t.d(n,"q",function(){return v.d}),t.d(n,"f",function(){return A}),t.d(n,"c",function(){return ee}),t.d(n,"d",function(){return ae}),t.d(n,"g",function(){return me}),t.d(n,"r",function(){return Qe}),t.d(n,"w",function(){return be}),t.d(n,"v",function(){return Ie.a}),t.d(n,"u",function(){return ke}),t.d(n,"x",function(){return Te});var e=t(349),s=t(14),o=t(203),a=t(4),c=t(178),l=t(36),p=t(121),h=t(10),m=t(137),g=t(26),v=t(323),O=t(0),u=t(2),r=t(6),i=t.n(r),d=t(38),b=t(8),w={portalWrapper:"frontend-components-interactive_tooltip-module__portalWrapper--HAo23",contentWrapper:"frontend-components-interactive_tooltip-module__contentWrapper--3_6UI",contentWrapperShown:"frontend-components-interactive_tooltip-module__contentWrapperShown--a62Wc"},E=Object.defineProperty,S=(x,H,le)=>H in x?E(x,H,{enumerable:!0,configurable:!0,writable:!0,value:le}):x[H]=le,P=(x,H,le)=>(S(x,typeof H!="symbol"?H+"":H,le),le);const D=300,W=8,B=100;class f extends O.Component{constructor(H,le){super(H,le);this.cardRef=Object(O.createRef)(),this.state={isOpen:!1},this.hoverPid=null,this.closePid=null,this.wrapperRef=Object(O.createRef)(null)}onMouseEnter(){if(!this.props.disabled){if(this.closePid&&clearTimeout(this.closePid),this.setState({attachCard:!0}),this.props.delay===0){this.setIsShown(!0);return}this.hoverPid=setTimeout(()=>{this.setIsShown(!0),this.hoverPid=null},this.props.delay)}}onMouseLeave(){this.hoverPid&&clearTimeout(this.hoverPid),this.closePid=setTimeout(()=>{this.setIsShown(!1)},B)}setIsShown(H){this.setState({isOpen:H,attachCard:H})}onClick(H){H.stopPropagation()}render({content:H,preferPositionLeft:le,className:Ce,children:Ue},{attachCard:Ve,isOpen:bt}){var yt,Qt,tn;let Kn={},Ot=!1;if(Ve&&((yt=this.wrapperRef)==null?void 0:yt.current)){const{top:lt,left:Be}=this.wrapperRef.current.getBoundingClientRect(),{height:_e,width:Ae}=(tn=(Qt=this.cardRef.current)==null?void 0:Qt.getBoundingClientRect())!=null?tn:{};Ot=le&&Be-Ae>0,Ot?Kn={top:lt-W-_e,left:Be-Ae-W,"max-width":D}:Kn={top:lt-W-_e,"max-width":D,left:Be}}return Object(O.h)("div",{className:i()(w.portalWrapper,Ce),onMouseEnter:()=>this.onMouseEnter(),onMouseLeave:()=>this.onMouseLeave(),onClick:lt=>this.onClick(lt),ref:this.wrapperRef},typeof Ue=="function"?Ue({}):Ue,Ve&&Object(u.createPortal)(Object(O.h)("div",{className:i()(w.contentWrapper,{[w.contentWrapperShown]:bt,"animate-opacity":!Object(b.isSafari)(),"position-left":Ot}),ref:this.cardRef,style:Kn,onMouseEnter:()=>this.onMouseEnter(),onMouseLeave:()=>this.onMouseLeave()},H),document.body))}}P(f,"defaultProps",{delay:B}),P(f,"contextType",d.a);var y=f,M={learnMoreChip:"frontend-editor-post-settings-help_tooltip-module__learnMoreChip---EAlo"};const N=({content:x})=>Object(O.h)(y,{content:x},Object(O.h)("div",{className:M.learnMoreChip},"?")),A=Object(u.forwardRef)(({action:x,children:H,className:le,errors:Ce,helpText:Ue,details:Ve,label:bt,paddingBottom:yt,paddingTop:Qt,wrapWithLabel:tn},Kn)=>Object(O.h)(a.b,{ref:Kn,alignItems:"stretch",className:le,gap:8,paddingBottom:yt,paddingTop:Qt},Object(O.h)(a.b,{alignItems:"stretch",gap:8,as:tn?"label":"div"},bt&&Object(O.h)(a.c,{gap:8,alignItems:"center"},Object(O.h)(h.b.InputLabel,{as:tn?"div":"label"},bt),Ue&&Object(O.h)(N,{content:Ue}),x&&Object(O.h)(a.c,{flex:"grow",justifyContent:"end"},x)),Object(O.h)("div",null,H)),Ve&&!Array.isArray(Ve)&&Object(O.h)(h.b.Detail,{lineHeight:18},Ve),Ve&&Array.isArray(Ve)&&Ve.length>0&&Object(O.h)(a.b,{gap:4},Ve.map(Ot=>Object(O.h)(h.b.Detail,{lineHeight:18},Ot))),Ce&&Ce.map(Ot=>Object(O.h)(h.b.B4,{color:"error",key:Ot},Ot))));var L=t(196),C={container:"frontend-pencraft-form-Checkbox-module__container--1URb3",medium:"frontend-pencraft-form-Checkbox-module__medium--2UlJu",small:"frontend-pencraft-form-Checkbox-module__small--2GLmM",enabled:"frontend-pencraft-form-Checkbox-module__enabled--14rdi",unchecked:"frontend-pencraft-form-Checkbox-module__unchecked--2jGOx",error:"frontend-pencraft-form-Checkbox-module__error--1WCWl",checked:"frontend-pencraft-form-Checkbox-module__checked--36LQe",disabled:"frontend-pencraft-form-Checkbox-module__disabled--3kH8L"},R=Object.defineProperty,U=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,V=(x,H,le)=>H in x?R(x,H,{enumerable:!0,configurable:!0,writable:!0,value:le}):x[H]=le,k=(x,H)=>{for(var le in H||(H={}))z.call(H,le)&&V(x,le,H[le]);if(F)for(var le of F(H))G.call(H,le)&&V(x,le,H[le]);return x},K=(x,H)=>U(x,Z(H)),Y=(x,H)=>{var le={};for(var Ce in x)z.call(x,Ce)&&H.indexOf(Ce)<0&&(le[Ce]=x[Ce]);if(x!=null&&F)for(var Ce of F(x))H.indexOf(Ce)<0&&G.call(x,Ce)&&(le[Ce]=x[Ce]);return le};const ee=x=>{var H=x,{name:le,size:Ce="medium",checked:Ue,disabled:Ve=!1,error:bt=!1,onChange:yt,as:Qt="label"}=H,tn=Y(H,["name","size","checked","disabled","error","onChange","as"]);const Kn=Qt;return Object(O.h)(Kn,{className:i()(C.container,C[Ce],Ve?C.disabled:C.enabled,Ue?C.checked:C.unchecked,bt?C.error:"")},Ue&&Object(O.h)(L.a,{size:Ce==="small"?17:24}),Object(O.h)("input",K(k({},tn),{type:"checkbox",name:le,"data-testid":le,checked:Ue,disabled:Ve,onChange:()=>{!Ve&&yt(!Ue)}})))},ae=({contentBelow:x,details:H,disabled:le,label:Ce,paddingBottom:Ue,paddingTop:Ve,testid:bt,track:yt,value:Qt,onChange:tn})=>Object(O.h)(a.c,{as:"label",gap:8,paddingBottom:Ue,paddingTop:Ve},Object(O.h)(ee,{as:"div",checked:Qt,name:bt,"data-track-input":yt,disabled:le,size:"small",onChange:tn}),Object(O.h)(a.b,{flex:"grow"},Object(O.h)(h.b.B4,{as:"span",color:le?"secondary":"primary"},Ce),H&&Object(O.h)(h.b.Detail,null,H),x));var he={container:"frontend-pencraft-form-FieldGroup-module__container--jgXBe"};const me=({children:x,label:H})=>Object(O.h)(a.b,null,H&&Object(O.h)(h.b.Meta,{color:"primary",paddingBottom:4,paddingLeft:4},H),Object(O.h)(a.b,{className:he.container,padding:16,radius:12,gap:16},x));var Ye=t(1),se={container:"frontend-pencraft-form-Radio-module__container--1p9k7",containerMedium:"frontend-pencraft-form-Radio-module__containerMedium--1F8ES",containerLarge:"frontend-pencraft-form-Radio-module__containerLarge--2YOHv",radio:"frontend-pencraft-form-Radio-module__radio--1wez4"},ie=Object.defineProperty,Ee=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,$e=(x,H,le)=>H in x?ie(x,H,{enumerable:!0,configurable:!0,writable:!0,value:le}):x[H]=le,ne=(x,H)=>{for(var le in H||(H={}))ue.call(H,le)&&$e(x,le,H[le]);if(ce)for(var le of ce(H))pe.call(H,le)&&$e(x,le,H[le]);return x},X=(x,H)=>Ee(x,Oe(H)),q=(x,H)=>{var le={};for(var Ce in x)ue.call(x,Ce)&&H.indexOf(Ce)<0&&(le[Ce]=x[Ce]);if(x!=null&&ce)for(var Ce of ce(x))H.indexOf(Ce)<0&&pe.call(x,Ce)&&(le[Ce]=x[Ce]);return le};const Ne=x=>{var H=x,{size:le}=H,Ce=q(H,["size"]);return Object(O.h)("div",{className:i()(se.container,le==="medium"?se.containerMedium:se.containerLarge)},Object(O.h)("input",X(ne({},Ce),{type:"radio"})),Object(O.h)("span",{className:se.radio}))},Qe=({label:x,name:H,options:le,paddingBottom:Ce,paddingTop:Ue,size:Ve="medium",value:bt,onChange:yt})=>{const Qt=Object(Ye.a)(tn=>{yt(tn.target.value)},[yt]);return Object(O.h)(A,{label:x,paddingBottom:Ce,paddingTop:Ue},Object(O.h)(a.b,{gap:Ve==="medium"?8:16},le.map(({value:tn,label:Kn,disabled:Ot,track:lt,testid:Be})=>Object(O.h)(a.c,{as:"label",gap:8,alignItems:"center",paddingLeft:4},Object(O.h)(Ne,{checked:tn===bt,"data-testid":Be,"data-track-input":lt,disabled:Ot,name:H,size:Ve,value:tn,onClick:Qt}),Ve==="medium"?Object(O.h)(h.b.B4,{as:"span"},Kn):Object(O.h)(h.b.B3,null,Kn)))))};var Ze=t(118),tt=Object.defineProperty,Ft=Object.defineProperties,Lt=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Le=(x,H,le)=>H in x?tt(x,H,{enumerable:!0,configurable:!0,writable:!0,value:le}):x[H]=le,rt=(x,H)=>{for(var le in H||(H={}))ht.call(H,le)&&Le(x,le,H[le]);if(rn)for(var le of rn(H))je.call(H,le)&&Le(x,le,H[le]);return x},Pe=(x,H)=>Ft(x,Lt(H)),de=(x,H)=>{var le={};for(var Ce in x)ht.call(x,Ce)&&H.indexOf(Ce)<0&&(le[Ce]=x[Ce]);if(x!=null&&rn)for(var Ce of rn(x))H.indexOf(Ce)<0&&je.call(x,Ce)&&(le[Ce]=x[Ce]);return le};const be=x=>{var H=x,{ref:le,className:Ce,error:Ue=!1,font:Ve}=H,bt=de(H,["ref","className","error","font"]);return Object(O.h)("textarea",Pe(rt({ref:le,className:i()(Ce,Ze.a.input,Ze.a.textarea,{[Ze.a.error]:Ue},Ve&&Ze.a[`font-${Ve}`])},bt),{type:"text"}))};var Ie=t(267);const ke=({details:x,disabled:H,helpText:le,label:Ce,paddingBottom:Ue,paddingTop:Ve,value:bt,onChange:yt})=>{const Qt=Object(Ye.a)(tn=>{yt(tn.target.value)},[yt]);return Object(O.h)(A,{label:Ce,details:x,helpText:le,paddingTop:Ve,paddingBottom:Ue,wrapWithLabel:!0},Object(O.h)(Ie.a,{disabled:H,value:bt,onChange:Qt}))},Te=({details:x,disabled:H,helpText:le,label:Ce,paddingBottom:Ue,paddingTop:Ve,value:bt,onChange:yt})=>{const Qt=Object(Ye.a)(tn=>{yt(tn.target.value)},[yt]);return Object(O.h)(A,{details:x,helpText:le,label:Ce,paddingBottom:Ue,paddingTop:Ve,wrapWithLabel:!0},Object(O.h)(be,{disabled:H,value:bt,onChange:Qt}))}},function($,n,t){"use strict";t.d(n,"a",function(){return P}),t.d(n,"h",function(){return D}),t.d(n,"d",function(){return W}),t.d(n,"i",function(){return f}),t.d(n,"f",function(){return M}),t.d(n,"g",function(){return N}),t.d(n,"c",function(){return A}),t.d(n,"b",function(){return L}),t.d(n,"e",function(){return R});var e=t(1),s=t(129),o=t.n(s),a=t(252),c=t.n(a),l=t(11),p=t.n(l),h=t(8),m=t.n(h),g=Object.defineProperty,v=Object.defineProperties,O=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(U,Z,F)=>Z in U?g(U,Z,{enumerable:!0,configurable:!0,writable:!0,value:F}):U[Z]=F,b=(U,Z)=>{for(var F in Z||(Z={}))r.call(Z,F)&&d(U,F,Z[F]);if(u)for(var F of u(Z))i.call(Z,F)&&d(U,F,Z[F]);return U},w=(U,Z)=>v(U,O(Z)),E=(U,Z)=>{var F={};for(var z in U)r.call(U,z)&&Z.indexOf(z)<0&&(F[z]=U[z]);if(U!=null&&u)for(var z of u(U))Z.indexOf(z)<0&&i.call(U,z)&&(F[z]=U[z]);return F},S=(U,Z,F)=>new Promise((z,G)=>{var V=Y=>{try{K(F.next(Y))}catch(ee){G(ee)}},k=Y=>{try{K(F.throw(Y))}catch(ee){G(ee)}},K=Y=>Y.done?z(Y.value):Promise.resolve(Y.value).then(V,k);K((F=F.apply(U,Z)).next())});const P={result:null,isLoading:!1,hasLoadedOnce:!1,error:null,promise:null,refetch:()=>Promise.resolve(null),clearError:()=>{},setResult:()=>{}};function D(U,Z,{auto:F,initialResult:z}={}){const[G,V]=Object(e.k)({result:z||null,isLoading:Boolean(F),hasLoadedOnce:!1,error:null,promise:null}),k=()=>{V(w(b({},G),{error:null}))},K=(ee={})=>{var ae=ee,{abortController:he=new o.a}=ae,me=E(ae,["abortController"]);const Ye=U(w(b({},me),{signal:he.signal})).then(se=>{if(!he.signal.aborted)return V({isLoading:!1,hasLoadedOnce:!0,error:null,result:se,promise:null}),se},se=>{if(!he.signal.aborted)return V(ie=>w(b({},ie),{isLoading:!1,error:se,result:null,promise:null})),se});return V(se=>w(b({},se),{isLoading:!0,error:null,promise:Ye})),Ye},Y=ee=>{V(ae=>w(b({},ae),{error:null,result:ee,isLoading:!1,promise:null}))};return Object(e.d)(()=>{if(F){const ee=new o.a;return K({abortController:ee}),()=>{ee.abort()}}},Z||[]),w(b({},G),{refetch:K,setResult:Y,clearError:k})}function W(U,Z){switch(Z.type){case"page_reset":return[{isLoading:!0,error:null,result:null}];case"page_start":{const F=U.slice(),{page:z,id:G}=Z.payload;return F[z]={result:null,id:G,isLoading:!0,error:null},F}case"page_load":{const{id:F,result:z}=Z.payload;return U.map(G=>G.id===F?w(b({},G),{isLoading:!1,result:z,error:null}):G)}case"page_error":{const{id:F,error:z}=Z.payload;return U.map(G=>G.id===F?w(b({},G),{isLoading:!1,result:null,error:z}):G)}}return U}function B(U,Z,{auto:F,initialResult:z,pages:G,dispatch:V}={}){var k;const[K,Y]=Object(e.i)(W,[{result:z||null,isLoading:Boolean(F),error:null}]),ee=G!=null?G:K,ae=V!=null?V:Y,he=(Ee={})=>{var Oe=Ee,{abortController:ce=new o.a,page:ue=ee.length}=Oe,pe=E(Oe,["abortController","page"]);const $e=ee[ue-1],ne=c()();return ae({type:"page_start",payload:{page:ue,id:ne}}),U({options:pe,signal:ce.signal,page:ue,lastPage:$e}).then(X=>{if(!ce.signal.aborted)return ae({type:"page_load",payload:{page:ue,id:ne,result:X}}),X},X=>{if(!ce.signal.aborted)return ae({type:"page_error",payload:{page:ue,id:ne,error:X}}),X})},me=Ee=>(ae({type:"page_reset"}),he(w(b({},Ee),{page:0})));Object(e.d)(()=>{if(F){const Ee=new o.a;return me({abortController:Ee}),()=>{Ee.abort()}}},Z||[]);let Ye=!1;const se=()=>S(this,null,function*(){if(!Ye){const Ee=ee[ee.length-1];if(!Ee.isLoading&&!Ee.error)return Ye=!0,yield he()}}),ie=ee[ee.length-1];return{pages:ee,page:ee.length,lastPage:ie,fetchMore:se,canFetchMore:ie&&!ie.isLoading&&!ie.error,fetchFirstPage:me,hasLoadedOnce:Boolean((k=ee[0])==null?void 0:k.result)}}function f(U){var Z=U,{auto:F,initialResult:z,deps:G}=Z,V=E(Z,["auto","initialResult","deps"]);return D(k=>S(this,null,function*(){var K=k,{signal:Y}=K,ee=E(K,["signal"]);const{pathname:ae="",query:he,body:me,method:Ye="get"}=b(b({},V),ee),se=p()(Ye.toUpperCase(),ae);he&&se.query(he),me&&se.send(me),Y.addEventListener("abort",()=>{se.abort()});const ie=yield se;if(Y.aborted)return;const Ee=ie.error;if(Ee)throw Ee;return ie.body}),G||[],{auto:F,initialResult:z})}const y=new Map;function M(U){var Z=U,{pathname:F,auto:z,initialResult:G,deps:V,cacheTtl:k}=Z,K=E(Z,["pathname","auto","initialResult","deps","cacheTtl"]);return D(Y=>{var ee=Y,{pathname:ae}=ee,he=E(ee,["pathname"]);if(!F)throw new Error("useFetch requires a pathname");if(k){const Ye=y.get(F);if(Ye){const{ts:se,ttl:ie,promise:Ee}=Ye;if(se+ie>Date.now())return Ee}}const me=A(ae!=null?ae:F,b(b({},K),he));return k&&y.set(F,{ts:Date.now(),ttl:k,promise:me}),me},V||[],{auto:z,initialResult:G})}function N(U){var Z=U,{pathname:F,auto:z,initialResult:G,deps:V,getPageInit:k,pages:K,dispatch:Y}=Z,ee=E(Z,["pathname","auto","initialResult","deps","getPageInit","pages","dispatch"]);return B(({page:ae,lastPage:he,options:me})=>{if(!F)throw new Error("useFetch requires a pathname");const Ye=k({init:b(b({},ee),me),page:ae,lastPage:he});return A(F,Ye)},V||[],{auto:z,initialResult:G,pages:K,dispatch:Y})}function A(U){return S(this,arguments,function*(Z,F={}){var z;const V=b({cache:"no-cache"},F),{query:k,json:K}=V,Y=E(V,["query","json"]);let ee=Z;if(k){let he;k instanceof URLSearchParams?he=k:he=new URLSearchParams(Object.entries(k).filter(([Ye,se])=>se!==void 0));const me=he.toString();me&&(Z.indexOf("?")!==-1?ee+=`&${me}`:ee+=`?${me}`)}K&&(Y.body=JSON.stringify(K),Y.headers instanceof Headers||(Y.headers=new Headers(Y.headers)),Y.headers.set("Content-Type","application/json"));const ae=yield fetch(ee,Y);if(!ae.ok){let he;try{he=yield ae.json()}catch(me){he={}}throw new L(ae,he)}return["DELETE","HEAD"].includes((z=Y==null?void 0:Y.method)!=null?z:"")?{}:ae.json()})}class L extends Error{constructor(Z,F){super();this.response=Z,this.body=F}getMessage(Z){return Object(h.getNetworkErrorMessageFromResponse)(this.body,Z)}}function C(U,Z="Something went wrong."){return U instanceof L?U.getMessage():Z}function R(U,Z,F){const[z,G]=Object(e.k)(null);return Object(e.a)((...V)=>{clearTimeout(z),G(null),G(setTimeout(()=>U(...V),Z))},[z,...F])}},function($,n,t){"use strict";t.d(n,"b",function(){return E.a}),t.d(n,"a",function(){return S.a}),t.d(n,"x",function(){return C}),t.d(n,"u",function(){return R}),t.d(n,"C",function(){return U}),t.d(n,"l",function(){return Z}),t.d(n,"k",function(){return F}),t.d(n,"O",function(){return z}),t.d(n,"A",function(){return G}),t.d(n,"z",function(){return V}),t.d(n,"s",function(){return k}),t.d(n,"p",function(){return K}),t.d(n,"f",function(){return Y}),t.d(n,"I",function(){return ee}),t.d(n,"H",function(){return ae}),t.d(n,"G",function(){return he}),t.d(n,"t",function(){return me}),t.d(n,"h",function(){return Ye}),t.d(n,"n",function(){return ie}),t.d(n,"Q",function(){return Ee}),t.d(n,"P",function(){return Oe}),t.d(n,"B",function(){return ce}),t.d(n,"F",function(){return pe}),t.d(n,"w",function(){return $e}),t.d(n,"c",function(){return O.b}),t.d(n,"d",function(){return O.c}),t.d(n,"y",function(){return ne}),t.d(n,"q",function(){return X}),t.d(n,"v",function(){return q}),t.d(n,"r",function(){return Ne}),t.d(n,"m",function(){return Qe}),t.d(n,"N",function(){return Ze}),t.d(n,"L",function(){return tt}),t.d(n,"D",function(){return Ft}),t.d(n,"M",function(){return Lt}),t.d(n,"j",function(){return rn}),t.d(n,"i",function(){return ht}),t.d(n,"K",function(){return je}),t.d(n,"e",function(){return Le}),t.d(n,"J",function(){return rt}),t.d(n,"E",function(){return Pe}),t.d(n,"g",function(){return ke}),t.d(n,"o",function(){return Te});var e=t(0),s=t(2),o=t(1),a=t(6),c=t.n(a),l=t(804),p=t(805),h=t(105),m=t(16),g=t(379),v=t(8),O=t(4),u=t(10),r=t(49),i=t(69),d=t(42),b=t(132),w={pageStack:"frontend-reader2-Page-module__pageStack--1UE8v",gap_8:"frontend-reader2-Page-module__gap_8--29h05",gap_16:"frontend-reader2-Page-module__gap_16--96PAe",linkRow:"frontend-reader2-Page-module__linkRow--1QoCL",isPadded:"frontend-reader2-Page-module__isPadded--Gbh4N",linkRowA:"frontend-reader2-Page-module__linkRowA--1qCj1",isClickable:"frontend-reader2-Page-module__isClickable--2TZNy",isSelectable:"frontend-reader2-Page-module__isSelectable--2HsPv",isSelected:"frontend-reader2-Page-module__isSelected--hKXLf",zero:"frontend-reader2-Page-module__zero--26XB8",hoverLink:"frontend-reader2-Page-module__hoverLink--2Ojz_",placeholder:"frontend-reader2-Page-module__placeholder--3zL40",travel:"frontend-reader2-Page-module__travel--3lgjX",bar:"frontend-reader2-Page-module__bar--3vHHX",circle:"frontend-reader2-Page-module__circle--2CWSI",input:"frontend-reader2-Page-module__input--3nsda",error:"frontend-reader2-Page-module__error--3-vXQ",textarea:"frontend-reader2-Page-module__textarea--3xID-"},E=t(181),S=t(245),P=Object.defineProperty,D=Object.defineProperties,W=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,M=(x,H,le)=>H in x?P(x,H,{enumerable:!0,configurable:!0,writable:!0,value:le}):x[H]=le,N=(x,H)=>{for(var le in H||(H={}))f.call(H,le)&&M(x,le,H[le]);if(B)for(var le of B(H))y.call(H,le)&&M(x,le,H[le]);return x},A=(x,H)=>D(x,W(H)),L=(x,H)=>{var le={};for(var Ce in x)f.call(x,Ce)&&H.indexOf(Ce)<0&&(le[Ce]=x[Ce]);if(x!=null&&B)for(var Ce of B(x))H.indexOf(Ce)<0&&y.call(x,Ce)&&(le[Ce]=x[Ce]);return le};function C({children:x}){const H=Object(r.b)();return Object(e.h)(ne,null,H?Object(e.h)(u.b.H2,null,x):Object(e.h)(u.b.H1,null,x))}function R({className:x,children:H,title:le,hasTitle:Ce}){return Object(e.h)("div",{className:c()("reader2-page-section",(le||Ce)&&"withTitle",x)},le&&Object(e.h)(U,null,le),H)}function U({children:x,className:H,actions:le}){return Object(e.h)("div",{class:c()("reader2-section-title",H)},Object(e.h)("span",{className:"reader2-text-h3 reader2-section-title"},x),le&&Object(e.h)("div",{class:"reader2-header-actions"},le))}const Z=Object(s.forwardRef)((x,H)=>{var le=x,{isPadded:Ce=!0,className:Ue,linkClassName:Ve}=le,bt=L(le,["isPadded","className","linkClassName"]);return Object(e.h)("div",{ref:H,className:c()(w.linkRow,Ce&&w.isPadded,Ue)},Object(e.h)(F,A(N({},bt),{className:Ve})))});function F(x){var H=x,{children:le,className:Ce,href:Ue,newTab:Ve,onClick:bt,noAnchor:yt,native:Qt,utmCampaign:tn,utmSource:Kn,isSelected:Ot}=H,lt=L(H,["children","className","href","newTab","onClick","noAnchor","native","utmCampaign","utmSource","isSelected"]);const Be=typeof location!="undefined"?location.pathname:"",_e=!yt&&Ue!=null?"a":"div",Ae=Ue&&Object(m.pathWithQuery)(Ue,{utm_source:Kn||Be,utm_medium:"reader2",utm_campaign:tn}),fe=ft=>{bt&&bt(ft),!ft.defaultPrevented&&yt&&Ae&&Object(g.a)(ft,Ae,{native:Qt,newTab:Ve})};return Object(e.h)(O.a,N({as:_e,className:c()(w.linkRowA,Ce,(Ae||bt)&&Ot==null&&w.isClickable,Ot&&w.isSelected,Ot!=null&&w.isSelectable),"data-selected":Ot,href:Ae,target:Ve?"_blank":void 0,onClick:fe},lt),le)}function z({icon:x,title:H,text:le,action:Ce,className:Ue}){return Object(e.h)(O.b,{gap:16,className:c()(w.zero,Ue)},x,Object(e.h)(O.b,{gap:4},Object(e.h)(u.b.H4,{weight:"bold",color:"secondary"},H),Object(e.h)(u.b.B4,{color:"secondary"},le)),Ce)}function G({className:x,style:H,type:le,width:Ce,height:Ue,size:Ve,maxWidth:bt}){Ve!=null&&(Ce=Ve,Ue=Ve);const yt=le==="bar";return Object(e.h)("div",{className:c()(w.placeholder,x,yt&&w.bar,le==="circle"&&w.circle),style:A(N({},H),{width:Ce,height:Ue,maxWidth:bt})})}function V(x){var H=x,{className:le,variant:Ce,size:Ue,serif:Ve,isConstrained:bt,maxLines:yt=3}=H,Qt=L(H,["className","variant","size","serif","isConstrained","maxLines"]);return Object(e.h)("div",N({className:c()("reader2-paragraph",Ce&&`reader2-${Ce}`,Ue&&`reader2-font-${Ue}`,Ve&&"reader2-font-serif",bt&&`reader2-clamp-lines reader2-${yt}-lines`,le)},Qt))}function k({className:x,children:H}){return Object(e.h)("div",{className:c()("reader-nav-center",x)},Object(e.h)("div",{className:"reader2-page reader2-font-base"},H))}function K({className:x,scrollRef:H,children:le}){return Object(e.h)(me,{ref:H},Object(e.h)(k,{className:x},le))}function Y(x){var H=x,{scrollRef:le}=H,Ce=L(H,["scrollRef"]);return Object(e.h)(me,{ref:le},Object(e.h)(O.a,A(N({},Ce),{flex:"grow",paddingX:{mobile:0,desktop:20}})))}function ee(x){return Object(h.useMediaQuery)({minWidth:1100})?Object(e.h)(O.b,N({className:"reader2-inbox-sidebar",paddingTop:20},x)):null}function ae(x){return Object(e.h)(O.a,N({alignItems:"center",justifyContent:"space-between",paddingY:12,paddingX:8},x))}function he(x){return Object(e.h)(O.b,N({gap:16},x))}const me=Object(s.forwardRef)((x,H)=>{const{onPageScroll:le}=Object(b.b)();return Object(e.h)("div",N({id:"reader-nav-page-scroll",className:"reader-nav-page-scroll",onScroll:le,ref:H},x))}),Ye=Object(s.forwardRef)((x,H)=>{var le=x,{className:Ce,hasError:Ue}=le,Ve=L(le,["className","hasError"]);return Object(e.h)("input",A(N({className:c()(w.input,Ue&&w.error,Ce)},Ve),{ref:H}))});function se(x){var H=x,{className:le,hasError:Ce,textareaRef:Ue}=H,Ve=L(H,["className","hasError","textareaRef"]);return Object(e.h)("textarea",N({ref:Ue,className:c()(w.input,w.textarea,Ce&&w.error,le)},Ve))}function ie({error:x}){return Object(e.h)(Le,null,Object(v.getNetworkErrorMessage)(x))}const Ee=({header:x,icon:H,title:le,text:Ce,action:Ue})=>Object(e.h)(R,{title:x},Object(e.h)(Oe,{icon:H,title:le,text:Ce,action:Ue}));function Oe(x){return Object(e.h)(Ie,{className:"reader2-empty-section"},Object(e.h)(z,N({},x)))}function ce({tabs:x,value:H,onChange:le}){const[Ce,Ue]=Object(o.k)({showLeft:!1,showRight:!1}),Ve=Object(o.j)();Object(o.d)(()=>{const{current:yt}=Ve;if(yt){const Qt=()=>{Ue(tn=>{let Kn=tn;!Kn.showLeft&&yt.scrollLeft>0?Kn=A(N({},tn),{showLeft:!0}):Kn.showLeft&&yt.scrollLeft<=0&&(Kn=A(N({},tn),{showLeft:!1}));const Ot=yt.scrollWidth-yt.offsetWidth-4;return!Kn.showRight&&yt.scrollLeft<Ot?Kn=A(N({},tn),{showRight:!0}):Kn.showRight&&yt.scrollLeft>=Ot&&(Kn=A(N({},tn),{showRight:!1})),Kn})};return yt.addEventListener("scroll",Qt),setTimeout(()=>{Qt()},1e3),()=>{yt.removeEventListener("scroll",Qt)}}},[]);const bt=yt=>()=>{const{current:Qt}=Ve;Qt&&Qt.scrollBy({left:yt*Qt.offsetWidth,behavior:"smooth"})};return Object(e.h)(O.c,{className:"reader2-tab-bar-parent"},Ce.showLeft&&Object(e.h)("div",{className:"reader2-carousel-fade left"},Object(e.h)("div",{className:"bg"}),Object(e.h)(i.a,{look:"reset",className:"reader2-carousel-arrow left",onClick:bt(-1)},Object(e.h)(l.a,null))),Object(e.h)(O.c,{className:"reader2-tab-bar",ref:Ve},Object(e.h)(ue,{tabs:x,value:H,onChange:le})),Ce.showRight&&Object(e.h)("div",{className:"reader2-carousel-fade right"},Object(e.h)("div",{className:"bg"}),Object(e.h)(i.a,{look:"reset",className:"reader2-carousel-arrow",onClick:bt(1)},Object(e.h)(p.a,null))))}function ue({tabs:x,value:H,onChange:le}){return Object(e.h)(O.c,{gap:8},x.map(Ce=>Object(e.h)(i.c,{isActive:H===Ce.value,onClick:()=>le(Ce.value)},Ce.label)))}function pe({children:x}){const H=Object(o.j)();return Object(o.g)(()=>{const le=H.current;if(le&&le.parentElement){const Ce=le.parentElement.getBoundingClientRect(),Ue=20;Object.assign(le.style,{position:"fixed",top:`${Ce.top+Ue}px`,right:0,bottom:`${Ue}px`})}},[]),Object(e.h)(O.b,{className:"reader2-inbox-sidebar-fixed",ref:H},x)}function $e(x){var H=x,{gap:le=16}=H,Ce=L(H,["gap"]);return Object(e.h)(O.b,A(N({},Ce),{className:c()(w.pageStack,w[`gap_${le}`])}))}const ne=Object(d.a)("reader2-page-top"),X=Object(d.a)("reader2-page-body"),q=Object(d.a)(w.pageStack),Ne=Object(d.a)("reader2-page-center"),Qe=Object(d.a)("reader2-modal-title-text"),Ze=Object(d.a)("reader2-column tw-flex tw-flex-col tw-gap-4"),tt=Object(d.a)("reader2-text-h3"),Ft=Object(d.a)("reader2-text-h3 reader2-section-title"),Lt=Object(d.a)("reader2-text-h4"),rn=Object(d.a)("reader2-item-title"),ht=Object(d.a)("reader2-item-meta"),je=Object(d.a)("reader2-text-b4"),Le=Object(d.a)("reader2-form-error"),rt=Object(d.a)("reader2-subtitle"),Pe=Object(d.a)("reader2-separator","hr"),de=Object(d.a)("reader2-page-section withTitle"),be=Object(d.a)("reader2-row reader2-split-row"),Ie=Object(d.a)("reader2-emphasis-box"),ke=Object(d.a)(w.hoverLink,"a");function Te(x){return Object(e.h)(ke,N({target:"_blank"},x))}},,,,function($,n,t){"use strict";t.d(n,"c",function(){return b}),t.d(n,"a",function(){return w}),t.d(n,"b",function(){return E}),t.d(n,"d",function(){return N}),t.d(n,"e",function(){return A});var e=t(0),s=t(1),o=t(214),a=t(6),c=t.n(a),l=t(229),p=t(116),h=t(86),m=t(50),g=t(4),v=Object.defineProperty,O=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(L,C,R)=>C in L?v(L,C,{enumerable:!0,configurable:!0,writable:!0,value:R}):L[C]=R,d=(L,C)=>{for(var R in C||(C={}))u.call(C,R)&&i(L,R,C[R]);if(O)for(var R of O(C))r.call(C,R)&&i(L,R,C[R]);return L};function b({text:L,cta:C,onAccept:R,href:U,onClose:Z,Icon:F,className:z}){return Object(e.h)(P,{className:c()("tw-items-center",z)},Object(e.h)(g.c,{className:"tw-flex-1",gap:12},F&&Object(e.h)(f,{Icon:F}),Object(e.h)(D,null,L)),Object(e.h)(g.c,{className:"tw-flex-none",gap:12},C&&(typeof C=="string"?(U||R)&&Object(e.h)(m.a,{look:"flex",onClick:G=>{Z==null||Z(),R==null||R(G)},href:U},Object(e.h)(p.c,{className:"tw-text-dark-secondary"},C)):C),Object(e.h)("div",{className:"tw-w-px tw-self-stretch tw-bg-dark-detail"}),Object(e.h)(B,{onClick:Z})))}function w({title:L,body:C,buttons:R,onClose:U,Icon:Z}){return Object(e.h)(P,{className:"tw-max-w-md"},Z&&Object(e.h)(f,{Icon:Z}),Object(e.h)(g.b,{className:"tw-flex-0-5",gap:8},Object(e.h)(g.b,{className:"tw-flex-0-5",gap:4},Object(e.h)(D,null,L),Object(e.h)(W,null,C)),R&&Object(e.h)(g.c,{gap:24},R)),Object(e.h)(B,{onClick:U}))}function E(L){return Object(e.h)(m.a,d({look:"flex",className:"tw-h-9 tw-items-center"},L))}function S(L){return Object(e.h)("div",{className:y},Object(e.h)(b,d({},L)))}const P=Object(h.a)("tw-flex tw-gap-8 tw-rounded-lg tw-px-4 tw-py-4 tw-border tw-border-solid tw-border-tooltip-detail tw-bg-tooltip-bg tw-drop-shadow-md"),D=Object(h.a)("min-h-5 tw-flex-1-1 tw-font-medium tw-text-dark-primary",p.b),W=Object(h.a)("min-h-5 tw-flex-1 0 tw-text-dark-secondary",p.b);function B({onClick:L}){return Object(e.h)(m.a,{look:"flex",onClick:L},Object(e.h)(l.a,{className:"tw-stroke-dark-secondary",strokeWidth:1.5,size:20}))}function f({Icon:L}){return Object(e.h)(L,{className:"tw-shrink-0 tw-basis-5 tw-stroke-dark-primary",strokeWidth:1.5,size:20})}const y="tw-fixed tw-bottom-[66px] tw-right-2.5 tw-left-2.5 md:tw-left-auto md:tw-bottom-4 md:tw-right-4 md:tw-pl-4 tw-z-10",M=Object(e.createContext)({popToast:()=>{throw new Error("Popping toast requires a ToastProvider.")},addOffset:()=>{}});function N({children:L}){const[C,R]=Object(s.k)(null),[U,Z]=Object(s.k)("hidden"),[F,z]=Object(s.k)(0),G=Object(s.j)(null),V=()=>{Z("hidden")},k=(Y,{ttl:ee=5e3}={})=>{R({element:Y({onClose:V}),ttl:ee}),Z("visible"),G.current!=null&&clearTimeout(G.current),G.current=ee===null?null:setTimeout(V,ee)},K=Y=>{z(Math.min(F+Y,0))};return Object(e.h)(M.Provider,{value:{popToast:k,addOffset:K}},L,Object(e.h)("div",{className:y,style:{transform:`translateY(${F}px)`}},Object(e.h)(o.a,{appear:!0,show:Boolean(C)&&U==="visible",enter:"tw-transition-all tw-duration-500 transform-gpu",enterFrom:"tw-opacity-0 tw-translate-y-4",enterTo:"tw-opacity-100 tw-translate-y-0",leave:"tw-transition-all tw-duration-500 transform-gpu",leaveFrom:"tw-opacity-100 tw-translate-y-0",leaveTo:"tw-opacity-0 tw-translate-y-4",onMouseEnter:()=>G.current!=null&&clearTimeout(G.current),onMouseLeave:()=>{G.current!=null&&clearTimeout(G.current),C&&(G.current=C.ttl===null?null:setTimeout(V,C.ttl))}},C==null?void 0:C.element)))}function A(){return Object(s.b)(M)}},,function($,n,t){"use strict";n.a={"display-block":"frontend-pencraft-Box-module__display-block--39Xd2","display-inline":"frontend-pencraft-Box-module__display-inline--2JWms","display-inline-block":"frontend-pencraft-Box-module__display-inline-block--3Wt1u","display-flex":"frontend-pencraft-Box-module__display-flex--379wL","display-inline-flex":"frontend-pencraft-Box-module__display-inline-flex--2gC-m","flex-direction-column":"frontend-pencraft-Box-module__flex-direction-column--3WtIZ","flex-direction-row":"frontend-pencraft-Box-module__flex-direction-row--3t7pJ","flex-direction-row-reverse":"frontend-pencraft-Box-module__flex-direction-row-reverse--HOVh5","flex-direction-column-reverse":"frontend-pencraft-Box-module__flex-direction-column-reverse--1vclx","flex-wrap-nowrap":"frontend-pencraft-Box-module__flex-wrap-nowrap--1Z3Md","flex-wrap-wrap":"frontend-pencraft-Box-module__flex-wrap-wrap--GMSUr","flex-wrap-wrap-reverse":"frontend-pencraft-Box-module__flex-wrap-wrap-reverse--2RfIG","flex-justify-start":"frontend-pencraft-Box-module__flex-justify-start--1Hbg_","flex-justify-space-between":"frontend-pencraft-Box-module__flex-justify-space-between--2plan","flex-justify-center":"frontend-pencraft-Box-module__flex-justify-center--3_JWr","flex-justify-end":"frontend-pencraft-Box-module__flex-justify-end--19HdE","flex-align-start":"frontend-pencraft-Box-module__flex-align-start--1PeDC","flex-align-end":"frontend-pencraft-Box-module__flex-align-end--1De2X","flex-align-center":"frontend-pencraft-Box-module__flex-align-center--2Hbzh","flex-align-stretch":"frontend-pencraft-Box-module__flex-align-stretch--38ZSq","flex-align-baseline":"frontend-pencraft-Box-module__flex-align-baseline--3TJC1","flex-align-self-start":"frontend-pencraft-Box-module__flex-align-self-start--2tw-0","flex-align-self-end":"frontend-pencraft-Box-module__flex-align-self-end--2WqeM","flex-align-self-center":"frontend-pencraft-Box-module__flex-align-self-center--2fPjS","flex-align-self-stretch":"frontend-pencraft-Box-module__flex-align-self-stretch--IVKkq","flex-align-self-baseline":"frontend-pencraft-Box-module__flex-align-self-baseline--2pCNm","flex-gap-0":"frontend-pencraft-Box-module__flex-gap-0--1Gyo7","flex-gap-2":"frontend-pencraft-Box-module__flex-gap-2--2OiTM","flex-gap-4":"frontend-pencraft-Box-module__flex-gap-4--1yqLa","flex-gap-6":"frontend-pencraft-Box-module__flex-gap-6--iNjof","flex-gap-8":"frontend-pencraft-Box-module__flex-gap-8--9VnmZ","flex-gap-12":"frontend-pencraft-Box-module__flex-gap-12--2Ko3l","flex-gap-16":"frontend-pencraft-Box-module__flex-gap-16--1-GDy","flex-gap-20":"frontend-pencraft-Box-module__flex-gap-20--KN5df","flex-gap-24":"frontend-pencraft-Box-module__flex-gap-24--2OyIi","flex-gap-32":"frontend-pencraft-Box-module__flex-gap-32--NMRNY","flex-gap-36":"frontend-pencraft-Box-module__flex-gap-36--15TzN","flex-gap-40":"frontend-pencraft-Box-module__flex-gap-40--23vE6","flex-gap-48":"frontend-pencraft-Box-module__flex-gap-48--38CI6","flex-gap-56":"frontend-pencraft-Box-module__flex-gap-56--1u-W2","flex-gap-64":"frontend-pencraft-Box-module__flex-gap-64--hk7Zk","flex-gap-80":"frontend-pencraft-Box-module__flex-gap-80--3wMr7","flex-gap-120":"frontend-pencraft-Box-module__flex-gap-120--6Hvrz","padding-0":"frontend-pencraft-Box-module__padding-0--P370k","padding-4":"frontend-pencraft-Box-module__padding-4--39VMU","padding-6":"frontend-pencraft-Box-module__padding-6--YA7oi","padding-8":"frontend-pencraft-Box-module__padding-8--3vQWl","padding-12":"frontend-pencraft-Box-module__padding-12--3HXiR","padding-16":"frontend-pencraft-Box-module__padding-16--1RzFC","padding-20":"frontend-pencraft-Box-module__padding-20--urs7d","padding-24":"frontend-pencraft-Box-module__padding-24--V7N4U","padding-32":"frontend-pencraft-Box-module__padding-32--3jhS8","padding-40":"frontend-pencraft-Box-module__padding-40--1RQIv","padding-48":"frontend-pencraft-Box-module__padding-48--38CH3","padding-56":"frontend-pencraft-Box-module__padding-56--tcSvD","padding-64":"frontend-pencraft-Box-module__padding-64--2dxXx","padding-80":"frontend-pencraft-Box-module__padding-80--2kKfm","padding-120":"frontend-pencraft-Box-module__padding-120--2mkQP","padding-y-0":"frontend-pencraft-Box-module__padding-y-0--2ymhO","padding-y-4":"frontend-pencraft-Box-module__padding-y-4--1T7bE","padding-y-6":"frontend-pencraft-Box-module__padding-y-6--2J9qy","padding-y-8":"frontend-pencraft-Box-module__padding-y-8--1t28C","padding-y-12":"frontend-pencraft-Box-module__padding-y-12--1UlmF","padding-y-16":"frontend-pencraft-Box-module__padding-y-16--4Q7bU","padding-y-20":"frontend-pencraft-Box-module__padding-y-20--3YkKH","padding-y-24":"frontend-pencraft-Box-module__padding-y-24--2AsRz","padding-y-32":"frontend-pencraft-Box-module__padding-y-32--3q5sW","padding-y-40":"frontend-pencraft-Box-module__padding-y-40--2GjQO","padding-y-48":"frontend-pencraft-Box-module__padding-y-48--2uMHM","padding-y-56":"frontend-pencraft-Box-module__padding-y-56--3VTnU","padding-y-64":"frontend-pencraft-Box-module__padding-y-64--1M6fk","padding-y-80":"frontend-pencraft-Box-module__padding-y-80--1W1zw","padding-y-120":"frontend-pencraft-Box-module__padding-y-120--1FRDv","padding-x-0":"frontend-pencraft-Box-module__padding-x-0--135Mt","padding-x-4":"frontend-pencraft-Box-module__padding-x-4--1zGce","padding-x-6":"frontend-pencraft-Box-module__padding-x-6--2aKO3","padding-x-8":"frontend-pencraft-Box-module__padding-x-8--3TTvK","padding-x-12":"frontend-pencraft-Box-module__padding-x-12--3uh6d","padding-x-16":"frontend-pencraft-Box-module__padding-x-16--23f9P","padding-x-20":"frontend-pencraft-Box-module__padding-x-20--1WS25","padding-x-24":"frontend-pencraft-Box-module__padding-x-24--2PjgP","padding-x-32":"frontend-pencraft-Box-module__padding-x-32--csfJg","padding-x-40":"frontend-pencraft-Box-module__padding-x-40--1pihl","padding-x-48":"frontend-pencraft-Box-module__padding-x-48--1eHM3","padding-x-56":"frontend-pencraft-Box-module__padding-x-56--2h5sf","padding-x-64":"frontend-pencraft-Box-module__padding-x-64--r-gom","padding-x-80":"frontend-pencraft-Box-module__padding-x-80--VnWy1","padding-x-120":"frontend-pencraft-Box-module__padding-x-120--3e_9a","padding-top-0":"frontend-pencraft-Box-module__padding-top-0--1Glp3","padding-top-4":"frontend-pencraft-Box-module__padding-top-4--UXObJ","padding-top-6":"frontend-pencraft-Box-module__padding-top-6--kVTy-","padding-top-8":"frontend-pencraft-Box-module__padding-top-8--16qTe","padding-top-12":"frontend-pencraft-Box-module__padding-top-12--p11Aa","padding-top-16":"frontend-pencraft-Box-module__padding-top-16--3gY0Q","padding-top-20":"frontend-pencraft-Box-module__padding-top-20--3VUw_","padding-top-24":"frontend-pencraft-Box-module__padding-top-24--2UtjZ","padding-top-32":"frontend-pencraft-Box-module__padding-top-32--JhqOg","padding-top-36":"frontend-pencraft-Box-module__padding-top-36--3FqxL","padding-top-40":"frontend-pencraft-Box-module__padding-top-40--rwD_7","padding-top-48":"frontend-pencraft-Box-module__padding-top-48--32fmd","padding-top-56":"frontend-pencraft-Box-module__padding-top-56--241Jh","padding-top-64":"frontend-pencraft-Box-module__padding-top-64--2p1JX","padding-top-80":"frontend-pencraft-Box-module__padding-top-80--fkXMd","padding-top-120":"frontend-pencraft-Box-module__padding-top-120--1hA1Z","padding-bottom-0":"frontend-pencraft-Box-module__padding-bottom-0--1uL1U","padding-bottom-4":"frontend-pencraft-Box-module__padding-bottom-4--2_VKu","padding-bottom-6":"frontend-pencraft-Box-module__padding-bottom-6--2-6Ml","padding-bottom-8":"frontend-pencraft-Box-module__padding-bottom-8--3pjq7","padding-bottom-12":"frontend-pencraft-Box-module__padding-bottom-12--cjFfk","padding-bottom-16":"frontend-pencraft-Box-module__padding-bottom-16--26C97","padding-bottom-20":"frontend-pencraft-Box-module__padding-bottom-20--3WQxw","padding-bottom-24":"frontend-pencraft-Box-module__padding-bottom-24--3dqGM","padding-bottom-32":"frontend-pencraft-Box-module__padding-bottom-32--1JnW_","padding-bottom-40":"frontend-pencraft-Box-module__padding-bottom-40--3EHzL","padding-bottom-48":"frontend-pencraft-Box-module__padding-bottom-48--263rx","padding-bottom-56":"frontend-pencraft-Box-module__padding-bottom-56--3RZi7","padding-bottom-64":"frontend-pencraft-Box-module__padding-bottom-64--AfOf2","padding-bottom-80":"frontend-pencraft-Box-module__padding-bottom-80--3_eDO","padding-bottom-120":"frontend-pencraft-Box-module__padding-bottom-120--2ETfw","padding-left-0":"frontend-pencraft-Box-module__padding-left-0--1Y7MJ","padding-left-4":"frontend-pencraft-Box-module__padding-left-4--1twOt","padding-left-6":"frontend-pencraft-Box-module__padding-left-6--2dutO","padding-left-8":"frontend-pencraft-Box-module__padding-left-8--2kR3r","padding-left-12":"frontend-pencraft-Box-module__padding-left-12--1WZ26","padding-left-16":"frontend-pencraft-Box-module__padding-left-16--3z4sY","padding-left-20":"frontend-pencraft-Box-module__padding-left-20--2Qbru","padding-left-24":"frontend-pencraft-Box-module__padding-left-24--34w5e","padding-left-32":"frontend-pencraft-Box-module__padding-left-32--24CcK","padding-left-40":"frontend-pencraft-Box-module__padding-left-40--2PYmp","padding-left-48":"frontend-pencraft-Box-module__padding-left-48--12YG4","padding-left-56":"frontend-pencraft-Box-module__padding-left-56--Y0f6V","padding-left-64":"frontend-pencraft-Box-module__padding-left-64--2odlC","padding-left-80":"frontend-pencraft-Box-module__padding-left-80--1QwRj","padding-left-96":"frontend-pencraft-Box-module__padding-left-96--2ZCnC","padding-left-120":"frontend-pencraft-Box-module__padding-left-120--1XRA5","padding-right-0":"frontend-pencraft-Box-module__padding-right-0--373iP","padding-right-4":"frontend-pencraft-Box-module__padding-right-4--2ypo2","padding-right-6":"frontend-pencraft-Box-module__padding-right-6--3eyDL","padding-right-8":"frontend-pencraft-Box-module__padding-right-8--2T68r","padding-right-12":"frontend-pencraft-Box-module__padding-right-12--3oF3R","padding-right-16":"frontend-pencraft-Box-module__padding-right-16--3mUoM","padding-right-20":"frontend-pencraft-Box-module__padding-right-20--3wiOh","padding-right-24":"frontend-pencraft-Box-module__padding-right-24--1uS0z","padding-right-32":"frontend-pencraft-Box-module__padding-right-32--4PtjW","padding-right-40":"frontend-pencraft-Box-module__padding-right-40--26KiF","padding-right-48":"frontend-pencraft-Box-module__padding-right-48--7HqLs","padding-right-56":"frontend-pencraft-Box-module__padding-right-56--3g-Gx","padding-right-64":"frontend-pencraft-Box-module__padding-right-64--15qtR","padding-right-80":"frontend-pencraft-Box-module__padding-right-80--34ATA","padding-right-120":"frontend-pencraft-Box-module__padding-right-120--12Cad","flex-direction-mobile-column":"frontend-pencraft-Box-module__flex-direction-mobile-column--RXg7C","flex-direction-mobile-row":"frontend-pencraft-Box-module__flex-direction-mobile-row--16MvG","flex-direction-mobile-row-reverse":"frontend-pencraft-Box-module__flex-direction-mobile-row-reverse--2AAU0","flex-direction-mobile-column-reverse":"frontend-pencraft-Box-module__flex-direction-mobile-column-reverse--2Ymf1","flex-wrap-mobile-nowrap":"frontend-pencraft-Box-module__flex-wrap-mobile-nowrap--1XeqT","flex-wrap-mobile-wrap":"frontend-pencraft-Box-module__flex-wrap-mobile-wrap--2uWbE","flex-wrap-mobile-wrap-reverse":"frontend-pencraft-Box-module__flex-wrap-mobile-wrap-reverse--27LnP","flex-justify-mobile-start":"frontend-pencraft-Box-module__flex-justify-mobile-start--1I_vg","flex-justify-mobile-space-between":"frontend-pencraft-Box-module__flex-justify-mobile-space-between--3vAZB","flex-justify-mobile-center":"frontend-pencraft-Box-module__flex-justify-mobile-center--3q2f4","flex-justify-mobile-end":"frontend-pencraft-Box-module__flex-justify-mobile-end--202_Y","flex-align-mobile-start":"frontend-pencraft-Box-module__flex-align-mobile-start--2Z9vL","flex-align-mobile-end":"frontend-pencraft-Box-module__flex-align-mobile-end--1etR-","flex-align-mobile-center":"frontend-pencraft-Box-module__flex-align-mobile-center--gyf8Z","flex-align-mobile-stretch":"frontend-pencraft-Box-module__flex-align-mobile-stretch--3KD51","flex-align-mobile-baseline":"frontend-pencraft-Box-module__flex-align-mobile-baseline--18uuu","flex-gap-mobile-0":"frontend-pencraft-Box-module__flex-gap-mobile-0--AnV2e","flex-gap-mobile-2":"frontend-pencraft-Box-module__flex-gap-mobile-2--2O7l1","flex-gap-mobile-4":"frontend-pencraft-Box-module__flex-gap-mobile-4--E4h8F","flex-gap-mobile-6":"frontend-pencraft-Box-module__flex-gap-mobile-6--3OxLA","flex-gap-mobile-8":"frontend-pencraft-Box-module__flex-gap-mobile-8--EUV01","flex-gap-mobile-12":"frontend-pencraft-Box-module__flex-gap-mobile-12--3lZNV","flex-gap-mobile-16":"frontend-pencraft-Box-module__flex-gap-mobile-16--3Vn60","flex-gap-mobile-20":"frontend-pencraft-Box-module__flex-gap-mobile-20--2ssX8","flex-gap-mobile-24":"frontend-pencraft-Box-module__flex-gap-mobile-24--3Fe93","flex-gap-mobile-32":"frontend-pencraft-Box-module__flex-gap-mobile-32--hHXL-","flex-gap-mobile-40":"frontend-pencraft-Box-module__flex-gap-mobile-40--2yh-9","flex-gap-mobile-48":"frontend-pencraft-Box-module__flex-gap-mobile-48--SIYcu","flex-gap-mobile-56":"frontend-pencraft-Box-module__flex-gap-mobile-56--3NY_E","flex-gap-mobile-64":"frontend-pencraft-Box-module__flex-gap-mobile-64--3l2QD","flex-gap-mobile-80":"frontend-pencraft-Box-module__flex-gap-mobile-80--2c6KX","flex-gap-mobile-120":"frontend-pencraft-Box-module__flex-gap-mobile-120--2D8XO","padding-mobile-0":"frontend-pencraft-Box-module__padding-mobile-0--K9L7S","padding-mobile-4":"frontend-pencraft-Box-module__padding-mobile-4--26gBr","padding-mobile-6":"frontend-pencraft-Box-module__padding-mobile-6--3WGMe","padding-mobile-8":"frontend-pencraft-Box-module__padding-mobile-8--2TDp5","padding-mobile-12":"frontend-pencraft-Box-module__padding-mobile-12--3CpED","padding-mobile-16":"frontend-pencraft-Box-module__padding-mobile-16--1o3bQ","padding-mobile-20":"frontend-pencraft-Box-module__padding-mobile-20--2pccN","padding-mobile-24":"frontend-pencraft-Box-module__padding-mobile-24--2mxoO","padding-mobile-32":"frontend-pencraft-Box-module__padding-mobile-32--Jpu-1","padding-mobile-40":"frontend-pencraft-Box-module__padding-mobile-40--121l-","padding-mobile-48":"frontend-pencraft-Box-module__padding-mobile-48--1jT3P","padding-mobile-56":"frontend-pencraft-Box-module__padding-mobile-56--2kB-B","padding-mobile-64":"frontend-pencraft-Box-module__padding-mobile-64--26xZ6","padding-mobile-80":"frontend-pencraft-Box-module__padding-mobile-80--3-Xu-","padding-mobile-120":"frontend-pencraft-Box-module__padding-mobile-120--2ZKfS","padding-y-mobile-0":"frontend-pencraft-Box-module__padding-y-mobile-0--2Rqns","padding-y-mobile-4":"frontend-pencraft-Box-module__padding-y-mobile-4--17IgM","padding-y-mobile-6":"frontend-pencraft-Box-module__padding-y-mobile-6--alWTn","padding-y-mobile-8":"frontend-pencraft-Box-module__padding-y-mobile-8--3oscQ","padding-y-mobile-12":"frontend-pencraft-Box-module__padding-y-mobile-12--4MNsW","padding-y-mobile-16":"frontend-pencraft-Box-module__padding-y-mobile-16--8sjbU","padding-y-mobile-20":"frontend-pencraft-Box-module__padding-y-mobile-20--3n9Mt","padding-y-mobile-24":"frontend-pencraft-Box-module__padding-y-mobile-24--1CGua","padding-y-mobile-32":"frontend-pencraft-Box-module__padding-y-mobile-32--tM0K8","padding-y-mobile-40":"frontend-pencraft-Box-module__padding-y-mobile-40--1cx9e","padding-y-mobile-48":"frontend-pencraft-Box-module__padding-y-mobile-48--1mwmS","padding-y-mobile-56":"frontend-pencraft-Box-module__padding-y-mobile-56--S5V80","padding-y-mobile-64":"frontend-pencraft-Box-module__padding-y-mobile-64--I19tc","padding-y-mobile-80":"frontend-pencraft-Box-module__padding-y-mobile-80--2FhKH","padding-y-mobile-120":"frontend-pencraft-Box-module__padding-y-mobile-120--1Yr9F","padding-x-mobile-0":"frontend-pencraft-Box-module__padding-x-mobile-0--3ueG9","padding-x-mobile-4":"frontend-pencraft-Box-module__padding-x-mobile-4--3P3qD","padding-x-mobile-6":"frontend-pencraft-Box-module__padding-x-mobile-6--okEQC","padding-x-mobile-8":"frontend-pencraft-Box-module__padding-x-mobile-8--_SABq","padding-x-mobile-12":"frontend-pencraft-Box-module__padding-x-mobile-12--3CICo","padding-x-mobile-16":"frontend-pencraft-Box-module__padding-x-mobile-16--239Q1","padding-x-mobile-20":"frontend-pencraft-Box-module__padding-x-mobile-20--IP3D_","padding-x-mobile-24":"frontend-pencraft-Box-module__padding-x-mobile-24--V5s3b","padding-x-mobile-32":"frontend-pencraft-Box-module__padding-x-mobile-32--3H9xt","padding-x-mobile-40":"frontend-pencraft-Box-module__padding-x-mobile-40--G_Csd","padding-x-mobile-48":"frontend-pencraft-Box-module__padding-x-mobile-48--1abfu","padding-x-mobile-56":"frontend-pencraft-Box-module__padding-x-mobile-56--2Ptab","padding-x-mobile-64":"frontend-pencraft-Box-module__padding-x-mobile-64--1a9H7","padding-x-mobile-80":"frontend-pencraft-Box-module__padding-x-mobile-80--fsBQM","padding-x-mobile-120":"frontend-pencraft-Box-module__padding-x-mobile-120--ZGeXo","padding-top-mobile-0":"frontend-pencraft-Box-module__padding-top-mobile-0--2n5pS","padding-top-mobile-4":"frontend-pencraft-Box-module__padding-top-mobile-4--2NO3-","padding-top-mobile-6":"frontend-pencraft-Box-module__padding-top-mobile-6--3NIJT","padding-top-mobile-8":"frontend-pencraft-Box-module__padding-top-mobile-8--3wfd2","padding-top-mobile-12":"frontend-pencraft-Box-module__padding-top-mobile-12--vJTq-","padding-top-mobile-16":"frontend-pencraft-Box-module__padding-top-mobile-16--1PNNR","padding-top-mobile-20":"frontend-pencraft-Box-module__padding-top-mobile-20--2eAPY","padding-top-mobile-24":"frontend-pencraft-Box-module__padding-top-mobile-24--1y-oz","padding-top-mobile-32":"frontend-pencraft-Box-module__padding-top-mobile-32--1Z273","padding-top-mobile-40":"frontend-pencraft-Box-module__padding-top-mobile-40--MgzOj","padding-top-mobile-48":"frontend-pencraft-Box-module__padding-top-mobile-48--cLq3R","padding-top-mobile-56":"frontend-pencraft-Box-module__padding-top-mobile-56--2XHCg","padding-top-mobile-64":"frontend-pencraft-Box-module__padding-top-mobile-64--1_7nZ","padding-top-mobile-80":"frontend-pencraft-Box-module__padding-top-mobile-80--34vxM","padding-top-mobile-120":"frontend-pencraft-Box-module__padding-top-mobile-120--1A9fP","padding-bottom-mobile-0":"frontend-pencraft-Box-module__padding-bottom-mobile-0--214re","padding-bottom-mobile-4":"frontend-pencraft-Box-module__padding-bottom-mobile-4--1QC1M","padding-bottom-mobile-6":"frontend-pencraft-Box-module__padding-bottom-mobile-6--2N441","padding-bottom-mobile-8":"frontend-pencraft-Box-module__padding-bottom-mobile-8--TOav4","padding-bottom-mobile-12":"frontend-pencraft-Box-module__padding-bottom-mobile-12--2KWxX","padding-bottom-mobile-16":"frontend-pencraft-Box-module__padding-bottom-mobile-16--1svWR","padding-bottom-mobile-20":"frontend-pencraft-Box-module__padding-bottom-mobile-20--F4Zte","padding-bottom-mobile-24":"frontend-pencraft-Box-module__padding-bottom-mobile-24--q9G38","padding-bottom-mobile-32":"frontend-pencraft-Box-module__padding-bottom-mobile-32--2u5sN","padding-bottom-mobile-40":"frontend-pencraft-Box-module__padding-bottom-mobile-40--1H9BX","padding-bottom-mobile-48":"frontend-pencraft-Box-module__padding-bottom-mobile-48--2_icN","padding-bottom-mobile-56":"frontend-pencraft-Box-module__padding-bottom-mobile-56--2m3at","padding-bottom-mobile-64":"frontend-pencraft-Box-module__padding-bottom-mobile-64--3Gwv8","padding-bottom-mobile-80":"frontend-pencraft-Box-module__padding-bottom-mobile-80--1dcT5","padding-bottom-mobile-120":"frontend-pencraft-Box-module__padding-bottom-mobile-120--7B9PH","padding-left-mobile-0":"frontend-pencraft-Box-module__padding-left-mobile-0--GvbRN","padding-left-mobile-4":"frontend-pencraft-Box-module__padding-left-mobile-4--2lnoc","padding-left-mobile-6":"frontend-pencraft-Box-module__padding-left-mobile-6--3eeP3","padding-left-mobile-8":"frontend-pencraft-Box-module__padding-left-mobile-8--ArJuY","padding-left-mobile-12":"frontend-pencraft-Box-module__padding-left-mobile-12--3XNYl","padding-left-mobile-16":"frontend-pencraft-Box-module__padding-left-mobile-16--3e4br","padding-left-mobile-20":"frontend-pencraft-Box-module__padding-left-mobile-20--1nItr","padding-left-mobile-24":"frontend-pencraft-Box-module__padding-left-mobile-24--Pkhn1","padding-left-mobile-32":"frontend-pencraft-Box-module__padding-left-mobile-32--1O4jz","padding-left-mobile-40":"frontend-pencraft-Box-module__padding-left-mobile-40--2FeF4","padding-left-mobile-48":"frontend-pencraft-Box-module__padding-left-mobile-48--1RVDd","padding-left-mobile-56":"frontend-pencraft-Box-module__padding-left-mobile-56--3RHf6","padding-left-mobile-64":"frontend-pencraft-Box-module__padding-left-mobile-64--1SLNq","padding-left-mobile-80":"frontend-pencraft-Box-module__padding-left-mobile-80--2KWOt","padding-left-mobile-120":"frontend-pencraft-Box-module__padding-left-mobile-120--1I3aa","padding-right-mobile-0":"frontend-pencraft-Box-module__padding-right-mobile-0--3IMpl","padding-right-mobile-4":"frontend-pencraft-Box-module__padding-right-mobile-4--3pT6V","padding-right-mobile-6":"frontend-pencraft-Box-module__padding-right-mobile-6--1hxIC","padding-right-mobile-8":"frontend-pencraft-Box-module__padding-right-mobile-8--17pic","padding-right-mobile-12":"frontend-pencraft-Box-module__padding-right-mobile-12--1DgWT","padding-right-mobile-16":"frontend-pencraft-Box-module__padding-right-mobile-16--3JCjo","padding-right-mobile-20":"frontend-pencraft-Box-module__padding-right-mobile-20--IcxvB","padding-right-mobile-24":"frontend-pencraft-Box-module__padding-right-mobile-24--1qmin","padding-right-mobile-32":"frontend-pencraft-Box-module__padding-right-mobile-32--3_7rE","padding-right-mobile-40":"frontend-pencraft-Box-module__padding-right-mobile-40--2HJb9","padding-right-mobile-48":"frontend-pencraft-Box-module__padding-right-mobile-48--3mGLW","padding-right-mobile-56":"frontend-pencraft-Box-module__padding-right-mobile-56--2dNsb","padding-right-mobile-64":"frontend-pencraft-Box-module__padding-right-mobile-64--2HX5I","padding-right-mobile-80":"frontend-pencraft-Box-module__padding-right-mobile-80--3utNH","padding-right-mobile-120":"frontend-pencraft-Box-module__padding-right-mobile-120--3ozHR","border-transparent":"frontend-pencraft-Box-module__border-transparent--1o_UD","border-top-transparent":"frontend-pencraft-Box-module__border-top-transparent--2Y9ta","border-bottom-transparent":"frontend-pencraft-Box-module__border-bottom-transparent--3mrdH","border-left-transparent":"frontend-pencraft-Box-module__border-left-transparent--1yGtQ","border-right-transparent":"frontend-pencraft-Box-module__border-right-transparent--3i2Y9","border-detail":"frontend-pencraft-Box-module__border-detail--gYi3b","border-top-detail":"frontend-pencraft-Box-module__border-top-detail--kKAzF","border-bottom-detail":"frontend-pencraft-Box-module__border-bottom-detail--2_1TW","border-left-detail":"frontend-pencraft-Box-module__border-left-detail--26LjJ","border-right-detail":"frontend-pencraft-Box-module__border-right-detail--OfD_S","border-detail-themed":"frontend-pencraft-Box-module__border-detail-themed--108eH","border-top-detail-themed":"frontend-pencraft-Box-module__border-top-detail-themed--1lxH2","border-bottom-detail-themed":"frontend-pencraft-Box-module__border-bottom-detail-themed--2d6rB","border-radius-4":"frontend-pencraft-Box-module__border-radius-4--1SoI5","border-radius-8":"frontend-pencraft-Box-module__border-radius-8--1PL4v","border-radius-12":"frontend-pencraft-Box-module__border-radius-12--1SDq1","border-radius-16":"frontend-pencraft-Box-module__border-radius-16--1OkiY","border-radius-20":"frontend-pencraft-Box-module__border-radius-20--2MGxh","min-width-0":"frontend-pencraft-Box-module__min-width-0--a_eIa","shadow-sm":"frontend-pencraft-Box-module__shadow-sm--3Rx4c","shadow-md":"frontend-pencraft-Box-module__shadow-md--1Nk2-","shadow-lg":"frontend-pencraft-Box-module__shadow-lg--1e6fB","bg-primary":"frontend-pencraft-Box-module__bg-primary--1JROM","bg-utility-tooltip":"frontend-pencraft-Box-module__bg-utility-tooltip--2cooe","bg-secondary":"frontend-pencraft-Box-module__bg-secondary--rcll7","bg-elevated":"frontend-pencraft-Box-module__bg-elevated--31St0",flexGrow:"frontend-pencraft-Box-module__flexGrow--2TZzh",flexAuto:"frontend-pencraft-Box-module__flexAuto--2qHsC","overflowY-auto":"frontend-pencraft-Box-module__overflowY-auto--1k6Sh","overflowX-auto":"frontend-pencraft-Box-module__overflowX-auto--1YIem","overflowX-hidden":"frontend-pencraft-Box-module__overflowX-hidden--2Lmeo",ellipsis:"frontend-pencraft-Box-module__ellipsis--10P5d","sizing-border-box":"frontend-pencraft-Box-module__sizing-border-box--FkC1m","pullX-4":"frontend-pencraft-Box-module__pullX-4--3WlXF","pullX-6":"frontend-pencraft-Box-module__pullX-6--3YhQD","pullX-8":"frontend-pencraft-Box-module__pullX-8--3J2ME","pullX-12":"frontend-pencraft-Box-module__pullX-12--35GVI","pullX-16":"frontend-pencraft-Box-module__pullX-16--1zrpg","pullX-20":"frontend-pencraft-Box-module__pullX-20--1dIxs","pullX-24":"frontend-pencraft-Box-module__pullX-24--1n_oh","pullX-32":"frontend-pencraft-Box-module__pullX-32--1C9UI","pullX-40":"frontend-pencraft-Box-module__pullX-40--3YCiX","pullX-48":"frontend-pencraft-Box-module__pullX-48--sX1id","pullX-56":"frontend-pencraft-Box-module__pullX-56--1pnFb","pullX-64":"frontend-pencraft-Box-module__pullX-64--gK31s","pullX-80":"frontend-pencraft-Box-module__pullX-80--lOCAd","pullX-120":"frontend-pencraft-Box-module__pullX-120--1wGbl"}},function($,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return a}),t.d(n,"c",function(){return g}),t.d(n,"d",function(){return m}),t.d(n,"e",function(){return c});var e=t(2),s=t(52),o=(O=>(O[O.None=0]="None",O[O.RenderStrategy=1]="RenderStrategy",O[O.Static=2]="Static",O))(o||{}),a=(O=>(O[O.Unmount=0]="Unmount",O[O.Hidden=1]="Hidden",O))(a||{});function c({ourProps:O,theirProps:u,slot:r,defaultTag:i,features:d,visible:b=!0,name:w}){let E=h(u,O);if(b)return l(E,r,i,w);let S=d!=null?d:0;if(S&2){let P=E,{static:W=!1}=P,B=ha(P,["static"]);if(W)return l(B,r,i,w)}if(S&1){let D=E,{unmount:W=!0}=D,B=ha(D,["unmount"]);return Object(s.a)(W?0:1,{[0](){return null},[1](){return l(Yo(vr({},B),{hidden:!0,style:{display:"none"}}),r,i,w)}})}return l(E,r,i,w)}function l(O,u={},r,i){let W=v(O,["unmount","static"]),{as:d=r,children:b,refName:w="ref"}=W,E=ha(W,["as","children","refName"]),S=O.ref!==void 0?{[w]:O.ref}:{},P=typeof b=="function"?b(u):b;E.className&&typeof E.className=="function"&&(E.className=E.className(u));let D={};if(u){let B=!1,f=[];for(let[y,M]of Object.entries(u))typeof M=="boolean"&&(B=!0),M===!0&&f.push(y);B&&(D["data-headlessui-state"]=f.join(" "))}if(d===e.Fragment&&Object.keys(g(E)).length>0){if(!Object(e.isValidElement)(P)||Array.isArray(P)&&P.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(E).map(B=>`  - ${B}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(B=>`  - ${B}`).join(`
`)].join(`
`));return Object(e.cloneElement)(P,Object.assign({},h(P.props,g(v(E,["ref"]))),D,S,p(P.ref,S.ref)))}return Object(e.createElement)(d,Object.assign({},v(E,["ref"]),d!==e.Fragment&&S,d!==e.Fragment&&D),P)}function p(...O){return{ref:O.every(u=>u==null)?void 0:u=>{for(let r of O)r!=null&&(typeof r=="function"?r(u):r.current=u)}}}function h(...O){var u;if(O.length===0)return{};if(O.length===1)return O[0];let r={},i={};for(let d of O)for(let b in d)b.startsWith("on")&&typeof d[b]=="function"?((u=i[b])!=null||(i[b]=[]),i[b].push(d[b])):r[b]=d[b];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(i).map(d=>[d,void 0])));for(let d in i)Object.assign(r,{[d](b,...w){let E=i[d];for(let S of E){if((b instanceof Event||(b==null?void 0:b.nativeEvent)instanceof Event)&&b.defaultPrevented)return;S(b,...w)}}});return r}function m(O){var u;return Object.assign(Object(e.forwardRef)(O),{displayName:(u=O.displayName)!=null?u:O.name})}function g(O){let u=Object.assign({},O);for(let r in u)u[r]===void 0&&delete u[r];return u}function v(O,u=[]){let r=Object.assign({},O);for(let i of u)i in r&&delete r[i];return r}},function($,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return L}),t.d(n,"c",function(){return W}),t.d(n,"d",function(){return M});var e=t(310);function s(C,R){C.prototype=Object.create(R.prototype),C.prototype.constructor=C,Object(e.a)(C,R)}var o=t(2),a=t(248),c=t(405),l=!0;function p(C,R,U){var Z="";return U.split(" ").forEach(function(F){C[F]!==void 0?R.push(C[F]):Z+=F+" "}),Z}var h=function(R,U,Z){var F=R.key+"-"+U.name;if((Z===!1||l===!1&&R.compat!==void 0)&&R.registered[F]===void 0&&(R.registered[F]=U.styles),R.inserted[U.name]===void 0){var z=U;do{var G=R.insert("."+F,z,R.sheet,!0);z=z.next}while(z!==void 0)}},m=t(161),g=Object.prototype.hasOwnProperty,v=Object(o.createContext)(typeof HTMLElement!="undefined"?Object(a.a)():null),O=Object(o.createContext)({}),u=v.Provider,r=function(R){var U=function(F,z){return Object(o.createElement)(v.Consumer,null,function(G){return R(F,G,z)})};return Object(o.forwardRef)(U)},i=function(R){return R.replace(/\$/g,"-")},d="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",b="__EMOTION_LABEL_PLEASE_DO_NOT_USE__",w=function(R,U){var Z={};for(var F in U)g.call(U,F)&&(Z[F]=U[F]);if(Z[d]=R,!1)var z,G;return Z},E=function(R,U,Z,F){var z=Z===null?U.css:U.css(Z);typeof z=="string"&&R.registered[z]!==void 0&&(z=R.registered[z]);var G=U[d],V=[z],k="";typeof U.className=="string"?k=p(R.registered,V,U.className):U.className!=null&&(k=U.className+" ");var K=Object(m.a)(V);if(!1)var Y;var ee=h(R,K,typeof G=="string");k+=R.key+"-"+K.name;var ae={};for(var he in U)g.call(U,he)&&he!=="css"&&he!==d&&(ae[he]=U[he]);ae.ref=F,ae.className=k;var me=Object(o.createElement)(G,ae);return me},S=r(function(C,R,U){return typeof C.css=="function"?Object(o.createElement)(O.Consumer,null,function(Z){return E(R,C,Z,U)}):E(R,C,null,U)}),P=t(311),D=t(140),W=function(R,U){var Z=arguments;if(U==null||!g.call(U,"css"))return o.createElement.apply(void 0,Z);var F=Z.length,z=new Array(F);z[0]=S,z[1]=w(R,U);for(var G=2;G<F;G++)z[G]=Z[G];return o.createElement.apply(null,z)},B=!1,f=r(function(C,R){var U=C.styles;if(typeof U=="function")return Object(o.createElement)(O.Consumer,null,function(F){var z=Object(m.a)([U(F)]);return Object(o.createElement)(y,{serialized:z,cache:R})});var Z=Object(m.a)([U]);return Object(o.createElement)(y,{serialized:Z,cache:R})}),y=function(C){s(R,C);function R(Z,F,z){return C.call(this,Z,F,z)||this}var U=R.prototype;return U.componentDidMount=function(){this.sheet=new P.a({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var F=document.querySelector("style[data-emotion-"+this.props.cache.key+'="'+this.props.serialized.name+'"]');F!==null&&this.sheet.tags.push(F),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},U.componentDidUpdate=function(F){F.serialized.name!==this.props.serialized.name&&this.insertStyles()},U.insertStyles=function(){if(this.props.serialized.next!==void 0&&h(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var F=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=F,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},U.componentWillUnmount=function(){this.sheet.flush()},U.render=function(){return null},R}(o.Component),M=function(){var R=D.a.apply(void 0,arguments),U="animation-"+R.name;return{name:U,styles:"@keyframes "+U+"{"+R.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},N=function C(R){for(var U=R.length,Z=0,F="";Z<U;Z++){var z=R[Z];if(z!=null){var G=void 0;switch(typeof z){case"boolean":break;case"object":{if(Array.isArray(z))G=C(z);else{G="";for(var V in z)z[V]&&V&&(G&&(G+=" "),G+=V)}break}default:G=z}G&&(F&&(F+=" "),F+=G)}}return F};function A(C,R,U){var Z=[],F=p(C,Z,U);return Z.length<2?U:F+R(Z)}var L=r(function(C,R){return Object(o.createElement)(O.Consumer,null,function(U){var Z=!1,F=function(){for(var K=arguments.length,Y=new Array(K),ee=0;ee<K;ee++)Y[ee]=arguments[ee];var ae=Object(m.a)(Y,R.registered);return h(R,ae,!1),R.key+"-"+ae.name},z=function(){for(var K=arguments.length,Y=new Array(K),ee=0;ee<K;ee++)Y[ee]=arguments[ee];return A(R.registered,F,N(Y))},G={css:F,cx:z,theme:U},V=C.children(G);return Z=!0,V})})},function($,n,t){"use strict";t.d(n,"b",function(){return ke}),t.d(n,"f",function(){return Te}),t.d(n,"g",function(){return x}),t.d(n,"a",function(){return H}),t.d(n,"d",function(){return Ue}),t.d(n,"c",function(){return Ve}),t.d(n,"e",function(){return Qt});var e=t(0),s=t(6),o=t.n(s),a=t(331),c=t.n(a),l=t(590),p=t.n(l),h=t(356),m=t(59),g=t(3),v=t(16),O=t(9),u=t(336),r=t(112),i=t(42),d=t(74),b=t(1),w=t(204),E=t(101),S=t(33),P=t(10),D={footer:"frontend-email-shared-typed-module__footer--WmMp1",footerSection:"frontend-email-shared-typed-module__footerSection--9vwqp",divider:"frontend-email-shared-typed-module__divider--1oKOZ",meta:"frontend-email-shared-typed-module__meta--AAyPr",twitter:"frontend-email-shared-typed-module__twitter--1Kwtq",twitterText:"frontend-email-shared-typed-module__twitterText--3FKor",twitterImage:"frontend-email-shared-typed-module__twitterImage--1StJa"},W=Object.defineProperty,B=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,M=(Ot,lt,Be)=>lt in Ot?W(Ot,lt,{enumerable:!0,configurable:!0,writable:!0,value:Be}):Ot[lt]=Be,N=(Ot,lt)=>{for(var Be in lt||(lt={}))f.call(lt,Be)&&M(Ot,Be,lt[Be]);if(B)for(var Be of B(lt))y.call(lt,Be)&&M(Ot,Be,lt[Be]);return Ot},A=(Ot,lt)=>{var Be={};for(var _e in Ot)f.call(Ot,_e)&&lt.indexOf(_e)<0&&(Be[_e]=Ot[_e]);if(Ot!=null&&B)for(var _e of B(Ot))lt.indexOf(_e)<0&&y.call(Ot,_e)&&(Be[_e]=Ot[_e]);return Be};function L({pub:Ot,upsell:lt,unsubscribe_url:Be,unsubscribeOverrideText:_e,hasApp:Ae,hideStartWriting:fe}){return Object(e.h)(C,{upsell:lt,hasApp:Ae,hideStartWriting:fe},Object(e.h)(Z,{pub:Ot,unsubscribe_url:Be,unsubscribeOverrideText:_e}))}function C({upsell:Ot,children:lt,hasApp:Be,hideStartWriting:_e}){const{siteConfigValues:{show_email_app_install_button:Ae=!0}}=Object(b.b)(E.a),fe=`${Object(g.getSubstackUrl)()}/img/email/publish-button.png`;return Object(e.h)("div",{className:o()("footer",D.footer)},!Be&&Ot&&Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:D.footerSection},Ot),Object(e.h)("div",{className:D.divider})),lt&&Object(e.h)("div",{style:{paddingBottom:24}},lt),Object(e.h)("p",{className:o()(D.footerSection,"small powered-by-substack")},!Ot&&!Be&&Ae&&Object(e.h)(F,null),!_e&&Object(e.h)("a",{href:S.Substitutions.START_WRITING_URL},Object(e.h)(z,{alt:"Start writing",src:fe,pixelRatio:3,width:135,height:40}))))}function R({primary:Ot,secondary:lt}){return Object(e.h)(e.Fragment,null,Object(e.h)(P.b.H4,{as:"div",weight:"bold",style:{marginBottom:4}},Ot),Object(e.h)(P.b.B4,{color:"secondary",style:{marginBottom:16}},lt),Object(e.h)("div",null,Object(e.h)(G,{utm_source:"substack",utm_campaign:"app-marketing"}),Object(e.h)(V,{utm_source:"substack",utm_campaign:"app-marketing"})))}function U({children:Ot}){return Object(e.h)("div",{className:o()("footer")},Ot)}function Z({pub:Ot,unsubscribe_url:lt,unsubscribeOverrideText:Be}){const _e=Object(O.joinLines)(Ot.mailing_address,", ",36);return Object(e.h)(P.b,{as:"p",size:12,color:"secondary",className:o()("small",D.meta)},"\xA9 ",new Date().getFullYear()," ",Object(e.h)("span",null,Ot.copyright),_e&&_e.split(`
`).reduce((Ae,fe)=>(Ae.push(Object(e.h)("br",null),fe),Ae),[]),lt!==!1&&[" ",Object(e.h)(e.Fragment,null,Object(e.h)("br",null),Object(e.h)("a",{href:lt||S.Substitutions.UNSUBSCRIBE_URL},Object(e.h)("span",null,Be||"Unsubscribe")))])}function F(){return Object(e.h)("a",{href:Object(g.getAppStoreRedirectUrl)({utm_campaign:"app-marketing",utm_content:"email-footer-button"})},Object(e.h)(z,{alt:"Get the app",src:`${Object(g.getSubstackUrl)()}/img/email/generic-app-button.png`,pixelRatio:3,width:130,height:40}))}function z(Ot){var lt=Ot,{src:Be,pixelRatio:_e,width:Ae}=lt,fe=A(lt,["src","pixelRatio","width"]);let ft;const{isAmp:nt}=Object(b.b)(E.a);if(typeof URL=="undefined")ft=null;else{let ct;try{ct=new URL(Be)}catch(gt){ct=new URL(Object(g.getSubstackUrl)()+Be)}const Xe=Array(_e).fill(0).map((gt,Tt)=>{if(Tt===0)return Object(g.cloudinary)(Be,Ae);const Ut=new URL(ct),[qt,sn]=Ut.pathname.split("."),_n=Tt+1;return Ut.pathname=`${qt}@${_n}x.${sn}`,Object(g.cloudinary)(Ut.toString(),Ae*_n)});nt?Be=Xe[Xe.length-1]:(Be=Xe[1]||Xe[0],ft=Xe.map((gt,Tt)=>Tt===0?gt:`${gt} ${Tt+1}x`).join(", "))}return Object(e.h)(r.a,N({src:Be,srcset:ft,width:Ae},fe))}function G({utm_campaign:Ot,utm_source:lt}){return Object(e.h)("a",{className:"email-footer-button",href:Object(g.getAppStoreUrl)({utm_campaign:Ot,utm_source:lt})},Object(e.h)(r.a,{alt:"Get the iOS app",src:Object(g.cloudinary)("/img/app_page/app-store.png",123*2),width:123,height:40}))}function V({utm_campaign:Ot,utm_source:lt}){return Object(e.h)("a",{className:"email-footer-button",href:Object(g.getPlayStoreUrl)({utm_campaign:Ot,utm_source:lt})},Object(e.h)(r.a,{alt:"Get the Android app",src:Object(g.cloudinary)("/img/app_page/google-play.png?v=1",135*2),width:135,height:40}))}const k=({text:Ot="Tweet",href:lt})=>Object(e.h)("a",{className:D.twitter,href:lt},Object(e.h)("img",{className:D.twitterImage,src:Object(g.cloudinary)("/img/share_twitter.white.png",20),alt:""}),Object(e.h)("span",{className:D.twitterText},Ot));var K=Object.defineProperty,Y=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,he=(Ot,lt,Be)=>lt in Ot?K(Ot,lt,{enumerable:!0,configurable:!0,writable:!0,value:Be}):Ot[lt]=Be,me=(Ot,lt)=>{for(var Be in lt||(lt={}))ee.call(lt,Be)&&he(Ot,Be,lt[Be]);if(Y)for(var Be of Y(lt))ae.call(lt,Be)&&he(Ot,Be,lt[Be]);return Ot},Ye=(Ot,lt)=>{var Be={};for(var _e in Ot)ee.call(Ot,_e)&&lt.indexOf(_e)<0&&(Be[_e]=Ot[_e]);if(Ot!=null&&Y)for(var _e of Y(Ot))lt.indexOf(_e)<0&&ae.call(Ot,_e)&&(Be[_e]=Ot[_e]);return Be};const se="550",ie=Ot=>{var lt=Ot,{children:Be,className:_e}=lt,Ae=Ye(lt,["children","className"]);return Object(e.h)("table",me({role:"presentation",className:_e,width:"auto"},Ae),Be)},Ee=({children:Ot,className:lt,width:Be=se})=>Object(e.h)("table",{role:"presentation",className:"email-body-container",width:"100%",border:"0",cellspacing:"0",cellpadding:"0"},Object(e.h)("tr",null,Object(e.h)("td",null),Object(e.h)("td",{className:"content",width:Be}),Object(e.h)("td",null)),Object(e.h)("tr",null,Object(e.h)("td",null),Object(e.h)("td",{align:"left",className:lt?`content ${lt}`:"content",width:Be},Object(e.h)("div",null,Ot)),Object(e.h)("td",null))),Oe=({text:Ot})=>Object(e.h)("div",{className:"preview",style:"display:none;font-size:1px;color:#333333;line-height:1px;max-height:0px;max-width:0px;opacity:0;overflow:hidden;"},Ot," ","\xA0\u200C".repeat(200)),ce=({pub:Ot,post:lt,prelude:Be,body_html:_e,children:Ae,is_freemail:fe,dataForEmailRender:ft})=>Object(e.h)("div",{className:"post typography",dir:"auto"},Be,Object(e.h)(w.a,{html:_e,pub:Ot,post:lt,isStatic:!0,is_freemail:fe,dataForEmailRender:ft}),Ae),ue=({children:Ot,className:lt,description:Be,title:_e="Email from Substack"})=>Object(e.h)("html",null,Object(e.h)("head",null,Object(e.h)("title",null,_e)),Object(e.h)("body",{className:lt},Be&&Object(e.h)(Oe,{text:Be}),Ot)),pe=({title:Ot,description:lt,children:Be,bodyClassName:_e="email-body",className:Ae="",emailWidth:fe=""})=>{const{isAmp:ft}=Object(b.b)(E.a);return Object(e.h)("html",me({},{amp4email:ft?!0:void 0,"data-css-strict":ft?!0:void 0}),Object(e.h)("head",null,!ft&&Object(e.h)("title",null,Ot),ft&&Object(e.h)(e.Fragment,null,Object(e.h)("meta",{charset:"utf-8"}),Object(e.h)("script",{async:!0,src:"https://cdn.ampproject.org/v0.js"}),Object(e.h)("script",{async:!0,"custom-element":"amp-list",src:"https://cdn.ampproject.org/v0/amp-list-0.1.js"}),Object(e.h)("script",{async:!0,"custom-template":"amp-mustache",src:"https://cdn.ampproject.org/v0/amp-mustache-0.2.js"}),Object(e.h)("script",{async:!0,"custom-element":"amp-timeago",src:"https://cdn.ampproject.org/v0/amp-timeago-0.1.js"}))),Object(e.h)("body",{className:_e},lt&&Object(e.h)(Oe,{text:lt}),Object(e.h)(Ee,me({className:Ae},fe&&{width:fe}),Be)))},$e=({title:Ot,description:lt,children:Be,className:_e,width:Ae})=>Object(e.h)("html",null,Object(e.h)("head",null,Object(e.h)("title",null,Ot)),Object(e.h)("body",{className:"email-body"},lt&&Object(e.h)(Oe,{text:lt}),Object(e.h)(Ee,{className:_e,width:Ae},Be))),ne=()=>{const Ot=Math.random().toString().split(".")[1].substr(0,3);return Object(e.h)("div",{className:"signature-fold-breaker"},Ot)},X=({delta:Ot,className:lt,withPercent:Be})=>{const _e=Ot<0?"negative":Ot>0?"positive":"neutral";return _e==="neutral"?Object(e.h)("span",{className:`${lt} neutral`},"\u2013"):Object(e.h)("span",{className:`${lt} ${_e}`},_e==="positive"?`+${Object(O.numberToString)(Ot)}${Be?"%":""}`:`${Object(O.numberToString)(Ot)}${Be?"%":""}`)},q={EmailDocument:pe};var Ne={fullWidth:"frontend-email-system-basics-module__fullWidth--3vEKW",emailButtonTd:"frontend-email-system-basics-module__emailButtonTd--llcta",priority_primary:"frontend-email-system-basics-module__priority_primary--2Vmmf",emailButtonA:"frontend-email-system-basics-module__emailButtonA--1RUgF",priority_secondary:"frontend-email-system-basics-module__priority_secondary--2KZWB",avatar:"frontend-email-system-basics-module__avatar--1sRIo",framed:"frontend-email-system-basics-module__framed--3XkyR",emailSeparator:"frontend-email-system-basics-module__emailSeparator--3U_L4"},Qe=Object.defineProperty,Ze=Object.defineProperties,tt=Object.getOwnPropertyDescriptors,Ft=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,ht=(Ot,lt,Be)=>lt in Ot?Qe(Ot,lt,{enumerable:!0,configurable:!0,writable:!0,value:Be}):Ot[lt]=Be,je=(Ot,lt)=>{for(var Be in lt||(lt={}))Lt.call(lt,Be)&&ht(Ot,Be,lt[Be]);if(Ft)for(var Be of Ft(lt))rn.call(lt,Be)&&ht(Ot,Be,lt[Be]);return Ot},Le=(Ot,lt)=>Ze(Ot,tt(lt)),rt=(Ot,lt)=>{var Be={};for(var _e in Ot)Lt.call(Ot,_e)&&lt.indexOf(_e)<0&&(Be[_e]=Ot[_e]);if(Ot!=null&&Ft)for(var _e of Ft(Ot))lt.indexOf(_e)<0&&rn.call(Ot,_e)&&(Be[_e]=Ot[_e]);return Be};function Pe(Ot){return Object(e.h)(de,Le(je({},Ot),{unsubscribe_url:"%%unsubscribe_url%%"}))}function de({pub:Ot=p.a,description:lt,noPromo:Be,children:_e,noLogo:Ae,unsubscribe_url:fe}){const ft=(Ot.id===0||Boolean(Object(m.getLogo)(Ot)))&&!Ae;return Object(e.h)(yt,{description:lt},Object(e.h)(Ue,{gap:16},c()([ft&&Object(e.h)(d.a,{pub:Ot.id===0?Le(je({},Ot),{logo_url:`${Object(g.getSubstackUrl)()}/img/substack-system-email-align-left.png?v=2`}):Ot,size:40}),_e,Be?Object(e.h)(Ie,{pub:Ot,unsubscribe_url:fe}):Object(e.h)(be,{pub:Ot,unsubscribe_url:fe}),Object(e.h)(ne,null)])))}function be({pub:Ot,unsubscribe_url:lt}){return Ot?Object(e.h)(L,{pub:Ot,unsubscribe_url:lt==null?!1:lt}):null}function Ie({pub:Ot,unsubscribe_url:lt}){return Object(e.h)(U,null,Object(e.h)(Z,{pub:Ot,unsubscribe_url:lt==null?!1:lt}))}function ke({children:Ot,href:lt,testId:Be,tableClassName:_e,tdClassName:Ae,aClassName:fe,alt:ft,download:nt,target:ct,style:Xe}){return Object(e.h)(Qt,{className:_e,style:Xe},Object(e.h)("tr",null,Object(e.h)("td",{className:Ae,align:"center"},lt?Object(e.h)("a",{href:lt,className:fe,"data-test-id":Be,alt:ft,download:nt,target:ct},Ot):Object(e.h)("span",{className:fe,"data-test-id":Be},Ot))))}function Te(Ot){return Object(e.h)(ke,Le(je({},Ot),{aClassName:"email-button-a",tdClassName:"email-button-td"}))}function x(Ot){var lt=Ot,{fullWidth:Be,priority:_e="primary"}=lt,Ae=rt(lt,["fullWidth","priority"]);return Object(e.h)(ke,Le(je({},Ae),{tableClassName:Be?Ne.fullWidth:void 0,aClassName:Ne.emailButtonA,tdClassName:o()(Ne.emailButtonTd,Ne[`priority_${_e}`])}))}function H({src:Ot,size:lt,framed:Be}){return Object(e.h)("img",{src:Object(v.cloudinary)(Ot),className:o()(h.a.avatar,Ne.avatar,Be&&Ne.framed),style:{width:lt,height:lt,objectFit:"cover"},width:lt,height:lt})}const le=Object(i.a)("email-text-button","a"),Ce=Object(i.a)("email-text-b4 email-text-secondary","div");function Ue({children:Ot,gap:lt=0,style:Be}){const _e=Object(e.toChildArray)(Ot),Ae=[];for(const ft of _e.slice(0,-1))Ae.push(Object(e.h)("tr",null,Object(e.h)("td",null,ft))),lt>0&&Ae.push(Object(e.h)("tr",{height:lt},Object(e.h)("td",null)));const fe=_e[_e.length-1];return fe&&Ae.push(Object(e.h)("tr",null,Object(e.h)("td",null,fe))),Object(e.h)(Qt,{style:Be},Ae)}function Ve({children:Ot,gap:lt=0,style:Be,verticalAlign:_e="middle"}){const Ae=Object(e.toChildArray)(Ot),fe=[];for(const nt of Ae.slice(0,-1))fe.push(Object(e.h)("td",{style:{verticalAlign:_e}},nt)),lt>0&&fe.push(Object(e.h)("td",{width:lt,style:`min-width: ${lt}px`}));const ft=Ae[Ae.length-1];return ft&&fe.push(Object(e.h)("td",{style:{verticalAlign:_e}},ft)),Object(e.h)(Qt,{style:Be},Object(e.h)("tr",null,fe))}function bt({users:Ot,post:lt,pub:Be,user:_e}){return Object(e.h)(u.a,{array:Ot,limit:3,formatter:Ae=>Object(e.h)("a",{href:Object(g.getReaderProfileUrl)(Ae)},Object(O.anonymousName)(Ae,lt,Be,_e))})}function yt({children:Ot,description:lt}){return Object(e.h)(ue,{className:"email-text-base email-text-b3",description:lt},Object(e.h)(Qt,{width:"100%"},Object(e.h)("tr",null,Object(e.h)("td",{style:{color:"transparent"}},"\xA0"),Object(e.h)("td",{align:"center",width:468},Ot),Object(e.h)("td",{style:{color:"transparent"}},"\xA0"))))}function Qt(Ot){var lt=Ot,{children:Be}=lt,_e=rt(lt,["children"]);return Object(e.h)("table",je({role:"presentation",width:"auto",border:"0",cellspacing:"0",cellpadding:"0"},_e),Be)}function tn(Ot){var lt=Ot,{src:Be}=lt,_e=rt(lt,["src"]);return Object(e.h)(r.a,je({src:Object(g.getSubstackUrl)()+Be},_e))}function Kn(){return Object(e.h)("div",{className:Ne.emailSeparator})}},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(){return e=Object.assign||function(s){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(s[c]=a[c])}return s},e.apply(this,arguments)}},function($,n,t){"use strict";t.r(n),t.d(n,"Substitutions",function(){return e});const e={PLAY_ON_SUBSTACK:"%%play_on_substack_url%%",PLAY_ON_SUBSTACK_UFI:"%%play_on_substack_ufi_url%%",POST_URL:"%%post_url%%",POST_TITLE_URL:"%%post_title_url%%",NAME:"%%name%%",FIRST_NAME:"%%first_name%%",FIRST_NAME_NO_SPACE:"%%first_name_no_space%%",UNSUBSCRIBE_URL:"%%unsubscribe_url%%",ONE_CLICK_UNSUBSCRIBE_URL:"%%one_click_unsubscribe_url%%",CHECKOUT_URL:"%%checkout_url%%",FOUNDING_CHECKOUT_URL:"%%founding_checkout_url%%",ACCOUNT_URL:"%%account_url%%",ARCHIVE_URL:"%%archive_url%%",PUBLICATION_NAME:"%%publication_name%%",PUBLICATION_HERO_TEXT:"%%publication_hero_text%%",AUTHOR_NAME:"%%author_name%%",AUTHOR_FIRST_NAME:"%%author_first_name%%",AUTHOR_BIO:"%%author_bio%%",AUTHOR_PHOTO_URL:"%%author_photo_url%%",SHARE_URL:"%%share_url%%",SHARE_PUB_URL:"%%share_pub_url%%",PODCAST_SETUP_URL:"%%podcast_setup_url%%",PERSONAL_PODCAST_SETUP_URL:"%%personal_podcast_setup_url%%",ALL_PODCASTS_SETUP_URL:"%%all_podcasts_setup_url%%",HOME_LINK:"%%home_link%%",THREAD_URL:"%%thread_url%%",CHAT_URL:"%%chat_url%%",MEETINGS_URL:"%%meetings_url%%",DASHBOARD_URL:"%%dashboard_url%%",CONTINUE_URL:"%%continue_url%%",PAID_SUBSCRIPTION_BENEFITS_1:"%%paid_subscription_benefits_1%%",PAID_SUBSCRIPTION_BENEFITS_2:"%%paid_subscription_benefits_2%%",PAID_SUBSCRIPTION_BENEFITS_3:"%%paid_subscription_benefits_3%%",PAID_OR_FOUNDING_TIER_NAME:"%%paid_or_founding_tier_name%%",PUBLICATION_URL:"%%publication_url%%",MAGIC_UNLINK_URL:"%%magic_unlink_url%%",TWITTER_SCREEN_NAME:"%%twitter_screen_name%%",REFERRAL_URL:"%%referral_url%%",PRINTED_REFERRAL_URL:"%%printed_referral_url%%",COMMENTS_URL:"%%comments_url%%",HALF_MAGIC_COMMENTS_URL:"%%half_magic_comments_url%%",MAGIC_AMP_COMMENTS_URL:"%%magic_amp_comments_url%%",POST_APP_LINK_URL:"%%post_app_link_url%%",POST_APP_LINK_PLAY_URL:"%%post_app_link_play_url%%",SUBSCRIPTION_TYPE:"%%subscription_type%%",SUBSCRIPTION_DAYS_LEFT:"%%subscription_days_left%%",SUBSCRIPTION_DAYS_LEFT_LABEL:"%%subscription_days_left_label%%",SUBSCRIPTION_EXPIRY_DATE:"%%subscription_expiry_date%%",REACTION_URL:"%%reaction_url%%",HALF_POST_URL:"%%half_post_url%%",RELATED_PUB_URL:"%%related_pub_url%%",RELATED_PUB_DOMAIN:"%%related_pub_domain%%",REPLY_TO_AUTHOR:"%%reply_to_author%%",REPLY_TO_AUTHOR_PLUS:"%%reply_to_author_plus%%",REPLY_TO_FORUM:"%%reply_to_forum%%",REPLY_TO_FORUM_PLUS:"%%reply_to_forum_plus%%",SAVE_POST_URL:"%%save_post_url%%",RESTACK_URL:"%%restack_url%%",POST_UNSUBSCRIBE_URL:"%%post_unsubscribe_url%%",COMMENT_URL:"%%comment_url%%",COMMENTER_FROM_NAME:"%%commenter_from_name%%",COMMENTER_NAME:"%%commenter_name%%",COMMENT_REPLY_URL:"%%comment_reply_url%%",PARENT_COMMENT_URL:"%%parent_comment_url%%",REACTOR_FROM_NAMES:"%%reactor_from_names%%",REACTOR_NAMES:"%%reactor_names%%",FILE_DOWNLOAD_TOKEN:"%%file_download_token%%",COUPON_URL:"%%coupon_url%%",START_WRITING_URL:"%%start_writing_url%%",PREACT_COMPAT_HTML_COMMENT_OPEN:"<x_preact_compatible_html_comment_x>",PREACT_COMPAT_HTML_COMMENT_CLOSE:"</x_preact_compatible_html_comment_x>",USER_ID:"%%user_id%%",USER_ID_B36:"%%user_id_b36%%",USER_ID_JWT:"%%user_id_jwt%%"}},function($,n,t){"use strict";t.r(n),t.d(n,"AddMarkStep",function(){return w}),t.d(n,"AddNodeMarkStep",function(){return S}),t.d(n,"AttrStep",function(){return Ft}),t.d(n,"MapResult",function(){return v}),t.d(n,"Mapping",function(){return u}),t.d(n,"RemoveMarkStep",function(){return E}),t.d(n,"RemoveNodeMarkStep",function(){return P}),t.d(n,"ReplaceAroundStep",function(){return W}),t.d(n,"ReplaceStep",function(){return D}),t.d(n,"Step",function(){return i}),t.d(n,"StepMap",function(){return O}),t.d(n,"StepResult",function(){return d}),t.d(n,"Transform",function(){return rn}),t.d(n,"TransformError",function(){return Lt}),t.d(n,"canJoin",function(){return Y}),t.d(n,"canSplit",function(){return k}),t.d(n,"dropPoint",function(){return Ye}),t.d(n,"findWrapping",function(){return C}),t.d(n,"insertPoint",function(){return me}),t.d(n,"joinPoint",function(){return ae}),t.d(n,"liftTarget",function(){return A}),t.d(n,"replaceStep",function(){return se});var e=t(13);const s=65535,o=Math.pow(2,16);function a(ht,je){return ht+je*o}function c(ht){return ht&s}function l(ht){return(ht-(ht&s))/o}const p=1,h=2,m=4,g=8;class v{constructor(je,Le,rt){this.pos=je,this.delInfo=Le,this.recover=rt}get deleted(){return(this.delInfo&g)>0}get deletedBefore(){return(this.delInfo&(p|m))>0}get deletedAfter(){return(this.delInfo&(h|m))>0}get deletedAcross(){return(this.delInfo&m)>0}}class O{constructor(je,Le=!1){if(this.ranges=je,this.inverted=Le,!je.length&&O.empty)return O.empty}recover(je){let Le=0,rt=c(je);if(!this.inverted)for(let Pe=0;Pe<rt;Pe++)Le+=this.ranges[Pe*3+2]-this.ranges[Pe*3+1];return this.ranges[rt*3]+Le+l(je)}mapResult(je,Le=1){return this._map(je,Le,!1)}map(je,Le=1){return this._map(je,Le,!0)}_map(je,Le,rt){let Pe=0,de=this.inverted?2:1,be=this.inverted?1:2;for(let Ie=0;Ie<this.ranges.length;Ie+=3){let ke=this.ranges[Ie]-(this.inverted?Pe:0);if(ke>je)break;let Te=this.ranges[Ie+de],x=this.ranges[Ie+be],H=ke+Te;if(je<=H){let le=Te?je==ke?-1:je==H?1:Le:Le,Ce=ke+Pe+(le<0?0:x);if(rt)return Ce;let Ue=je==(Le<0?ke:H)?null:a(Ie/3,je-ke),Ve=je==ke?h:je==H?p:m;return(Le<0?je!=ke:je!=H)&&(Ve|=g),new v(Ce,Ve,Ue)}Pe+=x-Te}return rt?je+Pe:new v(je+Pe,0,null)}touches(je,Le){let rt=0,Pe=c(Le),de=this.inverted?2:1,be=this.inverted?1:2;for(let Ie=0;Ie<this.ranges.length;Ie+=3){let ke=this.ranges[Ie]-(this.inverted?rt:0);if(ke>je)break;let Te=this.ranges[Ie+de],x=ke+Te;if(je<=x&&Ie==Pe*3)return!0;rt+=this.ranges[Ie+be]-Te}return!1}forEach(je){let Le=this.inverted?2:1,rt=this.inverted?1:2;for(let Pe=0,de=0;Pe<this.ranges.length;Pe+=3){let be=this.ranges[Pe],Ie=be-(this.inverted?de:0),ke=be+(this.inverted?0:de),Te=this.ranges[Pe+Le],x=this.ranges[Pe+rt];je(Ie,Ie+Te,ke,ke+x),de+=x-Te}}invert(){return new O(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(je){return je==0?O.empty:new O(je<0?[0,-je,0]:[0,0,je])}}O.empty=new O([]);class u{constructor(je=[],Le,rt=0,Pe=je.length){this.maps=je,this.mirror=Le,this.from=rt,this.to=Pe}slice(je=0,Le=this.maps.length){return new u(this.maps,this.mirror,je,Le)}copy(){return new u(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(je,Le){this.to=this.maps.push(je),Le!=null&&this.setMirror(this.maps.length-1,Le)}appendMapping(je){for(let Le=0,rt=this.maps.length;Le<je.maps.length;Le++){let Pe=je.getMirror(Le);this.appendMap(je.maps[Le],Pe!=null&&Pe<Le?rt+Pe:void 0)}}getMirror(je){if(this.mirror){for(let Le=0;Le<this.mirror.length;Le++)if(this.mirror[Le]==je)return this.mirror[Le+(Le%2?-1:1)]}}setMirror(je,Le){this.mirror||(this.mirror=[]),this.mirror.push(je,Le)}appendMappingInverted(je){for(let Le=je.maps.length-1,rt=this.maps.length+je.maps.length;Le>=0;Le--){let Pe=je.getMirror(Le);this.appendMap(je.maps[Le].invert(),Pe!=null&&Pe>Le?rt-Pe-1:void 0)}}invert(){let je=new u;return je.appendMappingInverted(this),je}map(je,Le=1){if(this.mirror)return this._map(je,Le,!0);for(let rt=this.from;rt<this.to;rt++)je=this.maps[rt].map(je,Le);return je}mapResult(je,Le=1){return this._map(je,Le,!1)}_map(je,Le,rt){let Pe=0;for(let de=this.from;de<this.to;de++){let be=this.maps[de],Ie=be.mapResult(je,Le);if(Ie.recover!=null){let ke=this.getMirror(de);if(ke!=null&&ke>de&&ke<this.to){de=ke,je=this.maps[ke].recover(Ie.recover);continue}}Pe|=Ie.delInfo,je=Ie.pos}return rt?je:new v(je,Pe,null)}}const r=Object.create(null);class i{getMap(){return O.empty}merge(je){return null}static fromJSON(je,Le){if(!Le||!Le.stepType)throw new RangeError("Invalid input for Step.fromJSON");let rt=r[Le.stepType];if(!rt)throw new RangeError(`No step type ${Le.stepType} defined`);return rt.fromJSON(je,Le)}static jsonID(je,Le){if(je in r)throw new RangeError("Duplicate use of step JSON ID "+je);return r[je]=Le,Le.prototype.jsonID=je,Le}}class d{constructor(je,Le){this.doc=je,this.failed=Le}static ok(je){return new d(je,null)}static fail(je){return new d(null,je)}static fromReplace(je,Le,rt,Pe){try{return d.ok(je.replace(Le,rt,Pe))}catch(de){if(de instanceof e.ReplaceError)return d.fail(de.message);throw de}}}function b(ht,je,Le){let rt=[];for(let Pe=0;Pe<ht.childCount;Pe++){let de=ht.child(Pe);de.content.size&&(de=de.copy(b(de.content,je,de))),de.isInline&&(de=je(de,Le,Pe)),rt.push(de)}return e.Fragment.fromArray(rt)}class w extends i{constructor(je,Le,rt){super();this.from=je,this.to=Le,this.mark=rt}apply(je){let Le=je.slice(this.from,this.to),rt=je.resolve(this.from),Pe=rt.node(rt.sharedDepth(this.to)),de=new e.Slice(b(Le.content,(be,Ie)=>!be.isAtom||!Ie.type.allowsMarkType(this.mark.type)?be:be.mark(this.mark.addToSet(be.marks)),Pe),Le.openStart,Le.openEnd);return d.fromReplace(je,this.from,this.to,de)}invert(){return new E(this.from,this.to,this.mark)}map(je){let Le=je.mapResult(this.from,1),rt=je.mapResult(this.to,-1);return Le.deleted&&rt.deleted||Le.pos>=rt.pos?null:new w(Le.pos,rt.pos,this.mark)}merge(je){return je instanceof w&&je.mark.eq(this.mark)&&this.from<=je.to&&this.to>=je.from?new w(Math.min(this.from,je.from),Math.max(this.to,je.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(je,Le){if(typeof Le.from!="number"||typeof Le.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new w(Le.from,Le.to,je.markFromJSON(Le.mark))}}i.jsonID("addMark",w);class E extends i{constructor(je,Le,rt){super();this.from=je,this.to=Le,this.mark=rt}apply(je){let Le=je.slice(this.from,this.to),rt=new e.Slice(b(Le.content,Pe=>Pe.mark(this.mark.removeFromSet(Pe.marks)),je),Le.openStart,Le.openEnd);return d.fromReplace(je,this.from,this.to,rt)}invert(){return new w(this.from,this.to,this.mark)}map(je){let Le=je.mapResult(this.from,1),rt=je.mapResult(this.to,-1);return Le.deleted&&rt.deleted||Le.pos>=rt.pos?null:new E(Le.pos,rt.pos,this.mark)}merge(je){return je instanceof E&&je.mark.eq(this.mark)&&this.from<=je.to&&this.to>=je.from?new E(Math.min(this.from,je.from),Math.max(this.to,je.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(je,Le){if(typeof Le.from!="number"||typeof Le.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new E(Le.from,Le.to,je.markFromJSON(Le.mark))}}i.jsonID("removeMark",E);class S extends i{constructor(je,Le){super();this.pos=je,this.mark=Le}apply(je){let Le=je.nodeAt(this.pos);if(!Le)return d.fail("No node at mark step's position");let rt=Le.type.create(Le.attrs,null,this.mark.addToSet(Le.marks));return d.fromReplace(je,this.pos,this.pos+1,new e.Slice(e.Fragment.from(rt),0,Le.isLeaf?0:1))}invert(je){let Le=je.nodeAt(this.pos);if(Le){let rt=this.mark.addToSet(Le.marks);if(rt.length==Le.marks.length){for(let Pe=0;Pe<Le.marks.length;Pe++)if(!Le.marks[Pe].isInSet(rt))return new S(this.pos,Le.marks[Pe]);return new S(this.pos,this.mark)}}return new P(this.pos,this.mark)}map(je){let Le=je.mapResult(this.pos,1);return Le.deletedAfter?null:new S(Le.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(je,Le){if(typeof Le.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new S(Le.pos,je.markFromJSON(Le.mark))}}i.jsonID("addNodeMark",S);class P extends i{constructor(je,Le){super();this.pos=je,this.mark=Le}apply(je){let Le=je.nodeAt(this.pos);if(!Le)return d.fail("No node at mark step's position");let rt=Le.type.create(Le.attrs,null,this.mark.removeFromSet(Le.marks));return d.fromReplace(je,this.pos,this.pos+1,new e.Slice(e.Fragment.from(rt),0,Le.isLeaf?0:1))}invert(je){let Le=je.nodeAt(this.pos);return!Le||!this.mark.isInSet(Le.marks)?this:new S(this.pos,this.mark)}map(je){let Le=je.mapResult(this.pos,1);return Le.deletedAfter?null:new P(Le.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(je,Le){if(typeof Le.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new P(Le.pos,je.markFromJSON(Le.mark))}}i.jsonID("removeNodeMark",P);class D extends i{constructor(je,Le,rt,Pe=!1){super();this.from=je,this.to=Le,this.slice=rt,this.structure=Pe}apply(je){return this.structure&&B(je,this.from,this.to)?d.fail("Structure replace would overwrite content"):d.fromReplace(je,this.from,this.to,this.slice)}getMap(){return new O([this.from,this.to-this.from,this.slice.size])}invert(je){return new D(this.from,this.from+this.slice.size,je.slice(this.from,this.to))}map(je){let Le=je.mapResult(this.from,1),rt=je.mapResult(this.to,-1);return Le.deletedAcross&&rt.deletedAcross?null:new D(Le.pos,Math.max(Le.pos,rt.pos),this.slice)}merge(je){if(!(je instanceof D)||je.structure||this.structure)return null;if(this.from+this.slice.size==je.from&&!this.slice.openEnd&&!je.slice.openStart){let Le=this.slice.size+je.slice.size==0?e.Slice.empty:new e.Slice(this.slice.content.append(je.slice.content),this.slice.openStart,je.slice.openEnd);return new D(this.from,this.to+(je.to-je.from),Le,this.structure)}else if(je.to==this.from&&!this.slice.openStart&&!je.slice.openEnd){let Le=this.slice.size+je.slice.size==0?e.Slice.empty:new e.Slice(je.slice.content.append(this.slice.content),je.slice.openStart,this.slice.openEnd);return new D(je.from,this.to,Le,this.structure)}else return null}toJSON(){let je={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(je.slice=this.slice.toJSON()),this.structure&&(je.structure=!0),je}static fromJSON(je,Le){if(typeof Le.from!="number"||typeof Le.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new D(Le.from,Le.to,e.Slice.fromJSON(je,Le.slice),!!Le.structure)}}i.jsonID("replace",D);class W extends i{constructor(je,Le,rt,Pe,de,be,Ie=!1){super();this.from=je,this.to=Le,this.gapFrom=rt,this.gapTo=Pe,this.slice=de,this.insert=be,this.structure=Ie}apply(je){if(this.structure&&(B(je,this.from,this.gapFrom)||B(je,this.gapTo,this.to)))return d.fail("Structure gap-replace would overwrite content");let Le=je.slice(this.gapFrom,this.gapTo);if(Le.openStart||Le.openEnd)return d.fail("Gap is not a flat range");let rt=this.slice.insertAt(this.insert,Le.content);return rt?d.fromReplace(je,this.from,this.to,rt):d.fail("Content does not fit in gap")}getMap(){return new O([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(je){let Le=this.gapTo-this.gapFrom;return new W(this.from,this.from+this.slice.size+Le,this.from+this.insert,this.from+this.insert+Le,je.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(je){let Le=je.mapResult(this.from,1),rt=je.mapResult(this.to,-1),Pe=je.map(this.gapFrom,-1),de=je.map(this.gapTo,1);return Le.deletedAcross&&rt.deletedAcross||Pe<Le.pos||de>rt.pos?null:new W(Le.pos,rt.pos,Pe,de,this.slice,this.insert,this.structure)}toJSON(){let je={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(je.slice=this.slice.toJSON()),this.structure&&(je.structure=!0),je}static fromJSON(je,Le){if(typeof Le.from!="number"||typeof Le.to!="number"||typeof Le.gapFrom!="number"||typeof Le.gapTo!="number"||typeof Le.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new W(Le.from,Le.to,Le.gapFrom,Le.gapTo,e.Slice.fromJSON(je,Le.slice),Le.insert,!!Le.structure)}}i.jsonID("replaceAround",W);function B(ht,je,Le){let rt=ht.resolve(je),Pe=Le-je,de=rt.depth;for(;Pe>0&&de>0&&rt.indexAfter(de)==rt.node(de).childCount;)de--,Pe--;if(Pe>0){let be=rt.node(de).maybeChild(rt.indexAfter(de));for(;Pe>0;){if(!be||be.isLeaf)return!0;be=be.firstChild,Pe--}}return!1}function f(ht,je,Le,rt){let Pe=[],de=[],be,Ie;ht.doc.nodesBetween(je,Le,(ke,Te,x)=>{if(!ke.isInline)return;let H=ke.marks;if(!rt.isInSet(H)&&x.type.allowsMarkType(rt.type)){let le=Math.max(Te,je),Ce=Math.min(Te+ke.nodeSize,Le),Ue=rt.addToSet(H);for(let Ve=0;Ve<H.length;Ve++)H[Ve].isInSet(Ue)||(be&&be.to==le&&be.mark.eq(H[Ve])?be.to=Ce:Pe.push(be=new E(le,Ce,H[Ve])));Ie&&Ie.to==le?Ie.to=Ce:de.push(Ie=new w(le,Ce,rt))}}),Pe.forEach(ke=>ht.step(ke)),de.forEach(ke=>ht.step(ke))}function y(ht,je,Le,rt){let Pe=[],de=0;ht.doc.nodesBetween(je,Le,(be,Ie)=>{if(!be.isInline)return;de++;let ke=null;if(rt instanceof e.MarkType){let Te=be.marks,x;for(;x=rt.isInSet(Te);)(ke||(ke=[])).push(x),Te=x.removeFromSet(Te)}else rt?rt.isInSet(be.marks)&&(ke=[rt]):ke=be.marks;if(ke&&ke.length){let Te=Math.min(Ie+be.nodeSize,Le);for(let x=0;x<ke.length;x++){let H=ke[x],le;for(let Ce=0;Ce<Pe.length;Ce++){let Ue=Pe[Ce];Ue.step==de-1&&H.eq(Pe[Ce].style)&&(le=Ue)}le?(le.to=Te,le.step=de):Pe.push({style:H,from:Math.max(Ie,je),to:Te,step:de})}}}),Pe.forEach(be=>ht.step(new E(be.from,be.to,be.style)))}function M(ht,je,Le,rt=Le.contentMatch){let Pe=ht.doc.nodeAt(je),de=[],be=je+1;for(let Ie=0;Ie<Pe.childCount;Ie++){let ke=Pe.child(Ie),Te=be+ke.nodeSize,x=rt.matchType(ke.type);if(!x)de.push(new D(be,Te,e.Slice.empty));else{rt=x;for(let H=0;H<ke.marks.length;H++)Le.allowsMarkType(ke.marks[H].type)||ht.step(new E(be,Te,ke.marks[H]))}be=Te}if(!rt.validEnd){let Ie=rt.fillBefore(e.Fragment.empty,!0);ht.replace(be,be,new e.Slice(Ie,0,0))}for(let Ie=de.length-1;Ie>=0;Ie--)ht.step(de[Ie])}function N(ht,je,Le){return(je==0||ht.canReplace(je,ht.childCount))&&(Le==ht.childCount||ht.canReplace(0,Le))}function A(ht){let Le=ht.parent.content.cutByIndex(ht.startIndex,ht.endIndex);for(let rt=ht.depth;;--rt){let Pe=ht.$from.node(rt),de=ht.$from.index(rt),be=ht.$to.indexAfter(rt);if(rt<ht.depth&&Pe.canReplace(de,be,Le))return rt;if(rt==0||Pe.type.spec.isolating||!N(Pe,de,be))break}return null}function L(ht,je,Le){let{$from:rt,$to:Pe,depth:de}=je,be=rt.before(de+1),Ie=Pe.after(de+1),ke=be,Te=Ie,x=e.Fragment.empty,H=0;for(let Ue=de,Ve=!1;Ue>Le;Ue--)Ve||rt.index(Ue)>0?(Ve=!0,x=e.Fragment.from(rt.node(Ue).copy(x)),H++):ke--;let le=e.Fragment.empty,Ce=0;for(let Ue=de,Ve=!1;Ue>Le;Ue--)Ve||Pe.after(Ue+1)<Pe.end(Ue)?(Ve=!0,le=e.Fragment.from(Pe.node(Ue).copy(le)),Ce++):Te++;ht.step(new W(ke,Te,be,Ie,new e.Slice(x.append(le),H,Ce),x.size-H,!0))}function C(ht,je,Le=null,rt=ht){let Pe=U(ht,je),de=Pe&&Z(rt,je);return de?Pe.map(R).concat({type:je,attrs:Le}).concat(de.map(R)):null}function R(ht){return{type:ht,attrs:null}}function U(ht,je){let{parent:Le,startIndex:rt,endIndex:Pe}=ht,de=Le.contentMatchAt(rt).findWrapping(je);if(!de)return null;let be=de.length?de[0]:je;return Le.canReplaceWith(rt,Pe,be)?de:null}function Z(ht,je){let{parent:Le,startIndex:rt,endIndex:Pe}=ht,de=Le.child(rt),be=je.contentMatch.findWrapping(de.type);if(!be)return null;let ke=(be.length?be[be.length-1]:je).contentMatch;for(let Te=rt;ke&&Te<Pe;Te++)ke=ke.matchType(Le.child(Te).type);return!ke||!ke.validEnd?null:be}function F(ht,je,Le){let rt=e.Fragment.empty;for(let be=Le.length-1;be>=0;be--){if(rt.size){let Ie=Le[be].type.contentMatch.matchFragment(rt);if(!Ie||!Ie.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}rt=e.Fragment.from(Le[be].type.create(Le[be].attrs,rt))}let Pe=je.start,de=je.end;ht.step(new W(Pe,de,Pe,de,new e.Slice(rt,0,0),Le.length,!0))}function z(ht,je,Le,rt,Pe){if(!rt.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let de=ht.steps.length;ht.doc.nodesBetween(je,Le,(be,Ie)=>{if(be.isTextblock&&!be.hasMarkup(rt,Pe)&&G(ht.doc,ht.mapping.slice(de).map(Ie),rt)){ht.clearIncompatible(ht.mapping.slice(de).map(Ie,1),rt);let ke=ht.mapping.slice(de),Te=ke.map(Ie,1),x=ke.map(Ie+be.nodeSize,1);return ht.step(new W(Te,x,Te+1,x-1,new e.Slice(e.Fragment.from(rt.create(Pe,null,be.marks)),0,0),1,!0)),!1}})}function G(ht,je,Le){let rt=ht.resolve(je),Pe=rt.index();return rt.parent.canReplaceWith(Pe,Pe+1,Le)}function V(ht,je,Le,rt,Pe){let de=ht.doc.nodeAt(je);if(!de)throw new RangeError("No node at given position");Le||(Le=de.type);let be=Le.create(rt,null,Pe||de.marks);if(de.isLeaf)return ht.replaceWith(je,je+de.nodeSize,be);if(!Le.validContent(de.content))throw new RangeError("Invalid content for node type "+Le.name);ht.step(new W(je,je+de.nodeSize,je+1,je+de.nodeSize-1,new e.Slice(e.Fragment.from(be),0,0),1,!0))}function k(ht,je,Le=1,rt){let Pe=ht.resolve(je),de=Pe.depth-Le,be=rt&&rt[rt.length-1]||Pe.parent;if(de<0||Pe.parent.type.spec.isolating||!Pe.parent.canReplace(Pe.index(),Pe.parent.childCount)||!be.type.validContent(Pe.parent.content.cutByIndex(Pe.index(),Pe.parent.childCount)))return!1;for(let Te=Pe.depth-1,x=Le-2;Te>de;Te--,x--){let H=Pe.node(Te),le=Pe.index(Te);if(H.type.spec.isolating)return!1;let Ce=H.content.cutByIndex(le,H.childCount),Ue=rt&&rt[x]||H;if(Ue!=H&&(Ce=Ce.replaceChild(0,Ue.type.create(Ue.attrs))),!H.canReplace(le+1,H.childCount)||!Ue.type.validContent(Ce))return!1}let Ie=Pe.indexAfter(de),ke=rt&&rt[0];return Pe.node(de).canReplaceWith(Ie,Ie,ke?ke.type:Pe.node(de+1).type)}function K(ht,je,Le=1,rt){let Pe=ht.doc.resolve(je),de=e.Fragment.empty,be=e.Fragment.empty;for(let Ie=Pe.depth,ke=Pe.depth-Le,Te=Le-1;Ie>ke;Ie--,Te--){de=e.Fragment.from(Pe.node(Ie).copy(de));let x=rt&&rt[Te];be=e.Fragment.from(x?x.type.create(x.attrs,be):Pe.node(Ie).copy(be))}ht.step(new D(je,je,new e.Slice(de.append(be),Le,Le),!0))}function Y(ht,je){let Le=ht.resolve(je),rt=Le.index();return ee(Le.nodeBefore,Le.nodeAfter)&&Le.parent.canReplace(rt,rt+1)}function ee(ht,je){return!!(ht&&je&&!ht.isLeaf&&ht.canAppend(je))}function ae(ht,je,Le=-1){let rt=ht.resolve(je);for(let Pe=rt.depth;;Pe--){let de,be,Ie=rt.index(Pe);if(Pe==rt.depth?(de=rt.nodeBefore,be=rt.nodeAfter):Le>0?(de=rt.node(Pe+1),Ie++,be=rt.node(Pe).maybeChild(Ie)):(de=rt.node(Pe).maybeChild(Ie-1),be=rt.node(Pe+1)),de&&!de.isTextblock&&ee(de,be)&&rt.node(Pe).canReplace(Ie,Ie+1))return je;if(Pe==0)break;je=Le<0?rt.before(Pe):rt.after(Pe)}}function he(ht,je,Le){let rt=new D(je-Le,je+Le,e.Slice.empty,!0);ht.step(rt)}function me(ht,je,Le){let rt=ht.resolve(je);if(rt.parent.canReplaceWith(rt.index(),rt.index(),Le))return je;if(rt.parentOffset==0)for(let Pe=rt.depth-1;Pe>=0;Pe--){let de=rt.index(Pe);if(rt.node(Pe).canReplaceWith(de,de,Le))return rt.before(Pe+1);if(de>0)return null}if(rt.parentOffset==rt.parent.content.size)for(let Pe=rt.depth-1;Pe>=0;Pe--){let de=rt.indexAfter(Pe);if(rt.node(Pe).canReplaceWith(de,de,Le))return rt.after(Pe+1);if(de<rt.node(Pe).childCount)return null}return null}function Ye(ht,je,Le){let rt=ht.resolve(je);if(!Le.content.size)return je;let Pe=Le.content;for(let de=0;de<Le.openStart;de++)Pe=Pe.firstChild.content;for(let de=1;de<=(Le.openStart==0&&Le.size?2:1);de++)for(let be=rt.depth;be>=0;be--){let Ie=be==rt.depth?0:rt.pos<=(rt.start(be+1)+rt.end(be+1))/2?-1:1,ke=rt.index(be)+(Ie>0?1:0),Te=rt.node(be),x=!1;if(de==1)x=Te.canReplace(ke,ke,Pe);else{let H=Te.contentMatchAt(ke).findWrapping(Pe.firstChild.type);x=H&&Te.canReplaceWith(ke,ke,H[0])}if(x)return Ie==0?rt.pos:Ie<0?rt.before(be+1):rt.after(be+1)}return null}function se(ht,je,Le=je,rt=e.Slice.empty){if(je==Le&&!rt.size)return null;let Pe=ht.resolve(je),de=ht.resolve(Le);return ie(Pe,de,rt)?new D(je,Le,rt):new Ee(Pe,de,rt).fit()}function ie(ht,je,Le){return!Le.openStart&&!Le.openEnd&&ht.start()==je.start()&&ht.parent.canReplace(ht.index(),je.index(),Le.content)}class Ee{constructor(je,Le,rt){this.$from=je,this.$to=Le,this.unplaced=rt,this.frontier=[],this.placed=e.Fragment.empty;for(let Pe=0;Pe<=je.depth;Pe++){let de=je.node(Pe);this.frontier.push({type:de.type,match:de.contentMatchAt(je.indexAfter(Pe))})}for(let Pe=je.depth;Pe>0;Pe--)this.placed=e.Fragment.from(je.node(Pe).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let Te=this.findFittable();Te?this.placeNodes(Te):this.openMore()||this.dropNode()}let je=this.mustMoveInline(),Le=this.placed.size-this.depth-this.$from.depth,rt=this.$from,Pe=this.close(je<0?this.$to:rt.doc.resolve(je));if(!Pe)return null;let de=this.placed,be=rt.depth,Ie=Pe.depth;for(;be&&Ie&&de.childCount==1;)de=de.firstChild.content,be--,Ie--;let ke=new e.Slice(de,be,Ie);return je>-1?new W(rt.pos,je,this.$to.pos,this.$to.end(),ke,Le):ke.size||rt.pos!=this.$to.pos?new D(rt.pos,Pe.pos,ke):null}findFittable(){let je=this.unplaced.openStart;for(let Le=this.unplaced.content,rt=0,Pe=this.unplaced.openEnd;rt<je;rt++){let de=Le.firstChild;if(Le.childCount>1&&(Pe=0),de.type.spec.isolating&&Pe<=rt){je=rt;break}Le=de.content}for(let Le=1;Le<=2;Le++)for(let rt=Le==1?je:this.unplaced.openStart;rt>=0;rt--){let Pe,de=null;rt?(de=ue(this.unplaced.content,rt-1).firstChild,Pe=de.content):Pe=this.unplaced.content;let be=Pe.firstChild;for(let Ie=this.depth;Ie>=0;Ie--){let{type:ke,match:Te}=this.frontier[Ie],x,H=null;if(Le==1&&(be?Te.matchType(be.type)||(H=Te.fillBefore(e.Fragment.from(be),!1)):de&&ke.compatibleContent(de.type)))return{sliceDepth:rt,frontierDepth:Ie,parent:de,inject:H};if(Le==2&&be&&(x=Te.findWrapping(be.type)))return{sliceDepth:rt,frontierDepth:Ie,parent:de,wrap:x};if(de&&Te.matchType(de.type))break}}}openMore(){let{content:je,openStart:Le,openEnd:rt}=this.unplaced,Pe=ue(je,Le);return!Pe.childCount||Pe.firstChild.isLeaf?!1:(this.unplaced=new e.Slice(je,Le+1,Math.max(rt,Pe.size+Le>=je.size-rt?Le+1:0)),!0)}dropNode(){let{content:je,openStart:Le,openEnd:rt}=this.unplaced,Pe=ue(je,Le);if(Pe.childCount<=1&&Le>0){let de=je.size-Le<=Le+Pe.size;this.unplaced=new e.Slice(Oe(je,Le-1,1),Le-1,de?Le-1:rt)}else this.unplaced=new e.Slice(Oe(je,Le,1),Le,rt)}placeNodes({sliceDepth:je,frontierDepth:Le,parent:rt,inject:Pe,wrap:de}){for(;this.depth>Le;)this.closeFrontierNode();if(de)for(let Ve=0;Ve<de.length;Ve++)this.openFrontierNode(de[Ve]);let be=this.unplaced,Ie=rt?rt.content:be.content,ke=be.openStart-je,Te=0,x=[],{match:H,type:le}=this.frontier[Le];if(Pe){for(let Ve=0;Ve<Pe.childCount;Ve++)x.push(Pe.child(Ve));H=H.matchFragment(Pe)}let Ce=Ie.size+je-(be.content.size-be.openEnd);for(;Te<Ie.childCount;){let Ve=Ie.child(Te),bt=H.matchType(Ve.type);if(!bt)break;Te++,(Te>1||ke==0||Ve.content.size)&&(H=bt,x.push(pe(Ve.mark(le.allowedMarks(Ve.marks)),Te==1?ke:0,Te==Ie.childCount?Ce:-1)))}let Ue=Te==Ie.childCount;Ue||(Ce=-1),this.placed=ce(this.placed,Le,e.Fragment.from(x)),this.frontier[Le].match=H,Ue&&Ce<0&&rt&&rt.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Ve=0,bt=Ie;Ve<Ce;Ve++){let yt=bt.lastChild;this.frontier.push({type:yt.type,match:yt.contentMatchAt(yt.childCount)}),bt=yt.content}this.unplaced=Ue?je==0?e.Slice.empty:new e.Slice(Oe(be.content,je-1,1),je-1,Ce<0?be.openEnd:je-1):new e.Slice(Oe(be.content,je,Te),be.openStart,be.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let je=this.frontier[this.depth],Le;if(!je.type.isTextblock||!$e(this.$to,this.$to.depth,je.type,je.match,!1)||this.$to.depth==this.depth&&(Le=this.findCloseLevel(this.$to))&&Le.depth==this.depth)return-1;let{depth:rt}=this.$to,Pe=this.$to.after(rt);for(;rt>1&&Pe==this.$to.end(--rt);)++Pe;return Pe}findCloseLevel(je){e:for(let Le=Math.min(this.depth,je.depth);Le>=0;Le--){let{match:rt,type:Pe}=this.frontier[Le],de=Le<je.depth&&je.end(Le+1)==je.pos+(je.depth-(Le+1)),be=$e(je,Le,Pe,rt,de);if(!!be){for(let Ie=Le-1;Ie>=0;Ie--){let{match:ke,type:Te}=this.frontier[Ie],x=$e(je,Ie,Te,ke,!0);if(!x||x.childCount)continue e}return{depth:Le,fit:be,move:de?je.doc.resolve(je.after(Le+1)):je}}}}close(je){let Le=this.findCloseLevel(je);if(!Le)return null;for(;this.depth>Le.depth;)this.closeFrontierNode();Le.fit.childCount&&(this.placed=ce(this.placed,Le.depth,Le.fit)),je=Le.move;for(let rt=Le.depth+1;rt<=je.depth;rt++){let Pe=je.node(rt),de=Pe.type.contentMatch.fillBefore(Pe.content,!0,je.index(rt));this.openFrontierNode(Pe.type,Pe.attrs,de)}return je}openFrontierNode(je,Le=null,rt){let Pe=this.frontier[this.depth];Pe.match=Pe.match.matchType(je),this.placed=ce(this.placed,this.depth,e.Fragment.from(je.create(Le,rt))),this.frontier.push({type:je,match:je.contentMatch})}closeFrontierNode(){let Le=this.frontier.pop().match.fillBefore(e.Fragment.empty,!0);Le.childCount&&(this.placed=ce(this.placed,this.frontier.length,Le))}}function Oe(ht,je,Le){return je==0?ht.cutByIndex(Le,ht.childCount):ht.replaceChild(0,ht.firstChild.copy(Oe(ht.firstChild.content,je-1,Le)))}function ce(ht,je,Le){return je==0?ht.append(Le):ht.replaceChild(ht.childCount-1,ht.lastChild.copy(ce(ht.lastChild.content,je-1,Le)))}function ue(ht,je){for(let Le=0;Le<je;Le++)ht=ht.firstChild.content;return ht}function pe(ht,je,Le){if(je<=0)return ht;let rt=ht.content;return je>1&&(rt=rt.replaceChild(0,pe(rt.firstChild,je-1,rt.childCount==1?Le-1:0))),je>0&&(rt=ht.type.contentMatch.fillBefore(rt).append(rt),Le<=0&&(rt=rt.append(ht.type.contentMatch.matchFragment(rt).fillBefore(e.Fragment.empty,!0)))),ht.copy(rt)}function $e(ht,je,Le,rt,Pe){let de=ht.node(je),be=Pe?ht.indexAfter(je):ht.index(je);if(be==de.childCount&&!Le.compatibleContent(de.type))return null;let Ie=rt.fillBefore(de.content,!0,be);return Ie&&!ne(Le,de.content,be)?Ie:null}function ne(ht,je,Le){for(let rt=Le;rt<je.childCount;rt++)if(!ht.allowsMarks(je.child(rt).marks))return!0;return!1}function X(ht){return ht.spec.defining||ht.spec.definingForContent}function q(ht,je,Le,rt){if(!rt.size)return ht.deleteRange(je,Le);let Pe=ht.doc.resolve(je),de=ht.doc.resolve(Le);if(ie(Pe,de,rt))return ht.step(new D(je,Le,rt));let be=tt(Pe,ht.doc.resolve(Le));be[be.length-1]==0&&be.pop();let Ie=-(Pe.depth+1);be.unshift(Ie);for(let le=Pe.depth,Ce=Pe.pos-1;le>0;le--,Ce--){let Ue=Pe.node(le).type.spec;if(Ue.defining||Ue.definingAsContext||Ue.isolating)break;be.indexOf(le)>-1?Ie=le:Pe.before(le)==Ce&&be.splice(1,0,-le)}let ke=be.indexOf(Ie),Te=[],x=rt.openStart;for(let le=rt.content,Ce=0;;Ce++){let Ue=le.firstChild;if(Te.push(Ue),Ce==rt.openStart)break;le=Ue.content}for(let le=x-1;le>=0;le--){let Ce=Te[le].type,Ue=X(Ce);if(Ue&&Pe.node(ke).type!=Ce)x=le;else if(Ue||!Ce.isTextblock)break}for(let le=rt.openStart;le>=0;le--){let Ce=(le+x+1)%(rt.openStart+1),Ue=Te[Ce];if(!!Ue)for(let Ve=0;Ve<be.length;Ve++){let bt=be[(Ve+ke)%be.length],yt=!0;bt<0&&(yt=!1,bt=-bt);let Qt=Pe.node(bt-1),tn=Pe.index(bt-1);if(Qt.canReplaceWith(tn,tn,Ue.type,Ue.marks))return ht.replace(Pe.before(bt),yt?de.after(bt):Le,new e.Slice(Ne(rt.content,0,rt.openStart,Ce),Ce,rt.openEnd))}}let H=ht.steps.length;for(let le=be.length-1;le>=0&&(ht.replace(je,Le,rt),!(ht.steps.length>H));le--){let Ce=be[le];Ce<0||(je=Pe.before(Ce),Le=de.after(Ce))}}function Ne(ht,je,Le,rt,Pe){if(je<Le){let de=ht.firstChild;ht=ht.replaceChild(0,de.copy(Ne(de.content,je+1,Le,rt,de)))}if(je>rt){let de=Pe.contentMatchAt(0),be=de.fillBefore(ht).append(ht);ht=be.append(de.matchFragment(be).fillBefore(e.Fragment.empty,!0))}return ht}function Qe(ht,je,Le,rt){if(!rt.isInline&&je==Le&&ht.doc.resolve(je).parent.content.size){let Pe=me(ht.doc,je,rt.type);Pe!=null&&(je=Le=Pe)}ht.replaceRange(je,Le,new e.Slice(e.Fragment.from(rt),0,0))}function Ze(ht,je,Le){let rt=ht.doc.resolve(je),Pe=ht.doc.resolve(Le),de=tt(rt,Pe);for(let be=0;be<de.length;be++){let Ie=de[be],ke=be==de.length-1;if(ke&&Ie==0||rt.node(Ie).type.contentMatch.validEnd)return ht.delete(rt.start(Ie),Pe.end(Ie));if(Ie>0&&(ke||rt.node(Ie-1).canReplace(rt.index(Ie-1),Pe.indexAfter(Ie-1))))return ht.delete(rt.before(Ie),Pe.after(Ie))}for(let be=1;be<=rt.depth&&be<=Pe.depth;be++)if(je-rt.start(be)==rt.depth-be&&Le>rt.end(be)&&Pe.end(be)-Le!=Pe.depth-be)return ht.delete(rt.before(be),Le);ht.delete(je,Le)}function tt(ht,je){let Le=[],rt=Math.min(ht.depth,je.depth);for(let Pe=rt;Pe>=0;Pe--){let de=ht.start(Pe);if(de<ht.pos-(ht.depth-Pe)||je.end(Pe)>je.pos+(je.depth-Pe)||ht.node(Pe).type.spec.isolating||je.node(Pe).type.spec.isolating)break;(de==je.start(Pe)||Pe==ht.depth&&Pe==je.depth&&ht.parent.inlineContent&&je.parent.inlineContent&&Pe&&je.start(Pe-1)==de-1)&&Le.push(Pe)}return Le}class Ft extends i{constructor(je,Le,rt){super();this.pos=je,this.attr=Le,this.value=rt}apply(je){let Le=je.nodeAt(this.pos);if(!Le)return d.fail("No node at attribute step's position");let rt=Object.create(null);for(let de in Le.attrs)rt[de]=Le.attrs[de];rt[this.attr]=this.value;let Pe=Le.type.create(rt,null,Le.marks);return d.fromReplace(je,this.pos,this.pos+1,new e.Slice(e.Fragment.from(Pe),0,Le.isLeaf?0:1))}getMap(){return O.empty}invert(je){return new Ft(this.pos,this.attr,je.nodeAt(this.pos).attrs[this.attr])}map(je){let Le=je.mapResult(this.pos,1);return Le.deletedAfter?null:new Ft(Le.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(je,Le){if(typeof Le.pos!="number"||typeof Le.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ft(Le.pos,Le.attr,Le.value)}}i.jsonID("attr",Ft);let Lt=class extends Error{};Lt=function ht(je){let Le=Error.call(this,je);return Le.__proto__=ht.prototype,Le},Lt.prototype=Object.create(Error.prototype),Lt.prototype.constructor=Lt,Lt.prototype.name="TransformError";class rn{constructor(je){this.doc=je,this.steps=[],this.docs=[],this.mapping=new u}get before(){return this.docs.length?this.docs[0]:this.doc}step(je){let Le=this.maybeStep(je);if(Le.failed)throw new Lt(Le.failed);return this}maybeStep(je){let Le=je.apply(this.doc);return Le.failed||this.addStep(je,Le.doc),Le}get docChanged(){return this.steps.length>0}addStep(je,Le){this.docs.push(this.doc),this.steps.push(je),this.mapping.appendMap(je.getMap()),this.doc=Le}replace(je,Le=je,rt=e.Slice.empty){let Pe=se(this.doc,je,Le,rt);return Pe&&this.step(Pe),this}replaceWith(je,Le,rt){return this.replace(je,Le,new e.Slice(e.Fragment.from(rt),0,0))}delete(je,Le){return this.replace(je,Le,e.Slice.empty)}insert(je,Le){return this.replaceWith(je,je,Le)}replaceRange(je,Le,rt){return q(this,je,Le,rt),this}replaceRangeWith(je,Le,rt){return Qe(this,je,Le,rt),this}deleteRange(je,Le){return Ze(this,je,Le),this}lift(je,Le){return L(this,je,Le),this}join(je,Le=1){return he(this,je,Le),this}wrap(je,Le){return F(this,je,Le),this}setBlockType(je,Le=je,rt,Pe=null){return z(this,je,Le,rt,Pe),this}setNodeMarkup(je,Le,rt=null,Pe){return V(this,je,Le,rt,Pe),this}setNodeAttribute(je,Le,rt){return this.step(new Ft(je,Le,rt)),this}addNodeMark(je,Le){return this.step(new S(je,Le)),this}removeNodeMark(je,Le){if(!(Le instanceof e.Mark)){let rt=this.doc.nodeAt(je);if(!rt)throw new RangeError("No node at position "+je);if(Le=Le.isInSet(rt.marks),!Le)return this}return this.step(new P(je,Le)),this}split(je,Le=1,rt){return K(this,je,Le,rt),this}addMark(je,Le,rt){return f(this,je,Le,rt),this}removeMark(je,Le,rt){return y(this,je,Le,rt),this}clearIncompatible(je,Le,rt){return M(this,je,Le,rt),this}}},function($,n,t){"use strict";t.d(n,"c",function(){return F}),t.d(n,"d",function(){return z}),t.d(n,"a",function(){return G}),t.d(n,"b",function(){return V});var e=t(0),s=t(2),o=t(1),a=t(214),c=t(6),l=t.n(c),p=t(49),h=t(229),m=t(14),g=t(4),v=t(10),O={root:"frontend-pencraft-ActionSheet-module__root--1Ywrn",sheet:"frontend-pencraft-ActionSheet-module__sheet--1839-",items:"frontend-pencraft-ActionSheet-module__items--1hRVL",item:"frontend-pencraft-ActionSheet-module__item--2BzPZ",destructive:"frontend-pencraft-ActionSheet-module__destructive--385Hi"},u=Object.defineProperty,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,b=(k,K,Y)=>K in k?u(k,K,{enumerable:!0,configurable:!0,writable:!0,value:Y}):k[K]=Y,w=(k,K)=>{for(var Y in K||(K={}))i.call(K,Y)&&b(k,Y,K[Y]);if(r)for(var Y of r(K))d.call(K,Y)&&b(k,Y,K[Y]);return k},E=(k,K)=>{var Y={};for(var ee in k)i.call(k,ee)&&K.indexOf(ee)<0&&(Y[ee]=k[ee]);if(k!=null&&r)for(var ee of r(k))K.indexOf(ee)<0&&d.call(k,ee)&&(Y[ee]=k[ee]);return Y};const S=Object(s.forwardRef)(({title:k,subtitle:K,onClose:Y,children:ee,className:ae},he)=>Object(e.h)(g.b,{className:O.root,onClick:Y},Object(e.h)(a.a.Child,{appear:!0,enter:"tw-transition-all tw-ease-in-out tw-duration-300 transform-gpu",enterFrom:"tw-translate-y-full",enterTo:"tw-translate-y-0",leave:"tw-transition-all tw-ease-in-out tw-duration-200 transform-gpu",leaveFrom:"tw-translate-y-0",leaveTo:"tw-translate-y-full"},Object(e.h)(g.b,{className:l()(O.sheet,ae),ref:he,onClick:me=>{me.stopPropagation()}},Object(e.h)(g.a,{justifyContent:"space-between",alignItems:"center",borderBottom:"detail",paddingBottom:8},Object(e.h)(g.b,null,Object(e.h)(v.b,{font:"text",size:14,lineHeight:20,color:"primary",weight:"bold"},k),Object(e.h)(v.b,{font:"text",size:13,lineHeight:20,color:"secondary"},K)),Object(e.h)(m.c,{fill:"empty",onClick:()=>{Y()},color:"primary-text"},Object(e.h)(h.a,null))),Object(e.h)(g.b,{paddingTop:8,overflowY:"auto",className:O.items},ee)))));function P(k){var K=k,{children:Y,onClick:ee,closeMenu:ae,icon:he,className:me,priority:Ye,disabled:se}=K,ie=E(K,["children","onClick","closeMenu","icon","className","priority","disabled"]);const Ee=ie.href?"a":m.d;return Object(e.h)(Ee,w({className:l()(O.item,O[Ye],me,{[O.disabled]:!!se}),resetCss:!0,onClick:Oe=>{ee(Oe),ae()}},ie),he&&Object(e.cloneElement)(he,{size:20,stroke:"var(--color-primary)"}),he&&" ",Object(e.h)(v.b,{font:"text",size:14,lineHeight:20,weight:"semibold"},Y))}var D=t(216),W={menu:"frontend-pencraft-Menu-module__menu--JfPuq",menuItem:"frontend-pencraft-Menu-module__menuItem--aFwuG",disabled:"frontend-pencraft-Menu-module__disabled--hIoLL",destructive:"frontend-pencraft-Menu-module__destructive--22FaT",icon:"frontend-pencraft-Menu-module__icon--2sp58",text:"frontend-pencraft-Menu-module__text--2aQuP"},B=Object.defineProperty,f=Object.defineProperties,y=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,L=(k,K,Y)=>K in k?B(k,K,{enumerable:!0,configurable:!0,writable:!0,value:Y}):k[K]=Y,C=(k,K)=>{for(var Y in K||(K={}))N.call(K,Y)&&L(k,Y,K[Y]);if(M)for(var Y of M(K))A.call(K,Y)&&L(k,Y,K[Y]);return k},R=(k,K)=>f(k,y(K)),U=(k,K)=>{var Y={};for(var ee in k)N.call(k,ee)&&K.indexOf(ee)<0&&(Y[ee]=k[ee]);if(k!=null&&M)for(var ee of M(k))K.indexOf(ee)<0&&A.call(k,ee)&&(Y[ee]=k[ee]);return Y};function Z(k){return typeof k.type=="string"||k.type.$$typeof===Symbol.for("react.forward_ref")}const F=Object(s.forwardRef)((k,K)=>{var Y=k,{trigger:ee,children:ae,ariaLabel:he="View more",hideOnScroll:me,layerOptions:Ye,layerClassName:se,useMobileBottomSheet:ie=!1,mobileBottomSheetTitle:Ee,mobileBottomSheetSubtitle:Oe}=Y,ce=U(Y,["trigger","children","ariaLabel","hideOnScroll","layerOptions","layerClassName","useMobileBottomSheet","mobileBottomSheetTitle","mobileBottomSheetSubtitle"]);Z(ee)||console.error("Menu trigger must be a valid component that forwards a ref that react-laag uses, or a native dom element. See Button/IconButton for example, and preferably use those.");const ue=Object(p.b)(),{triggerProps:pe,layerProps:$e,renderLayer:ne,isOpen:X,setOpen:q}=Object(D.a)({layerOptions:C({auto:!0,possiblePlacements:["bottom-start","bottom-center","bottom-end","top-start","top-center","top-end"],preferY:"bottom"},Ye),hideOnScroll:me&&!(ie&&ue)}),[Ne,Qe]=Object(o.k)(!1),Ze=()=>{q(!1)},tt=Object(e.toChildArray)(ae).map(Ft=>Object(e.cloneElement)(Ft,{useMobileBottomSheet:ie,closeMenu:Ze}));return Object(e.h)(e.Fragment,null,Object(e.cloneElement)(ee,R(C({},pe),{ariaLabel:he,onClick:Ft=>{Ft.preventDefault(),q(!X)}})),(X||Ne)&&ne(Object(e.h)(a.a,{appear:!0,show:X,beforeEnter:()=>Qe(!0),afterLeave:()=>Qe(!1),enter:"tw-transition-all tw-ease-in-out tw-duration-100 transform-gpu",enterFrom:"tw-opacity-0",enterTo:"tw-opacity-100",leave:"tw-transition-all tw-ease-in-out tw-duration-200 transform-gpu",leaveFrom:"tw-opacity-100",leaveTo:"tw-opacity-0"},ie&&ue?Object(e.h)("div",C(C({},$e),ce),Object(e.h)(S,{title:Ee,subtitle:Oe,onClose:Ze,ref:K,className:se},tt)):Object(e.h)("div",C(C({},$e),ce),Object(e.h)(G,C({className:se,ref:K},!me&&{style:{maxHeight:295,overflowY:"scroll"}}),tt)))))}),z=k=>{var K=k,{useMobileBottomSheet:Y}=K,ee=U(K,["useMobileBottomSheet"]);const ae=Object(p.b)();return Y&&ae?Object(e.h)(P,C({},ee)):Object(e.h)(V,C({},ee))},G=Object(s.forwardRef)((k,K)=>{var Y=k,{className:ee}=Y,ae=U(Y,["className"]);return Object(e.h)(g.b,C({className:l()(W.menu,"elevated",ee),padding:8,gap:8,bg:"elevated",shadow:"md",border:"detail",radius:12,ref:K},ae))}),V=k=>{var K=k,{children:Y,onClick:ee,closeMenu:ae,icon:he,suffix:me,priority:Ye="primary",className:se,disabled:ie,href:Ee}=K,Oe=U(K,["children","onClick","closeMenu","icon","suffix","priority","className","disabled","href"]);const ce=Ee?"a":m.d;return Object(e.h)(ce,C({className:l()(W.menuItem,W[Ye],se,{[W.disabled]:!!ie}),resetCss:!0,onClick:ue=>{ie||(ee&&ee(ue),ae&&ae())},href:ie?"javascript:void(0)":Ee},Oe),he&&Object(e.cloneElement)(he,{size:24,className:l()(W.icon,he.props.className)}),Object(e.h)(v.b,{className:W.text,font:"text",size:16,lineHeight:24,align:"left"},Y),me)}},function($,n,t){"use strict";var e=t(304);t.d(n,"d",function(){return e.a}),t.d(n,"e",function(){return e.b});var s=t(305);t.d(n,"b",function(){return s.b}),t.d(n,"a",function(){return s.a});var o=t(382);t.d(n,"c",function(){return o.a})},function($,n,t){"use strict";var e=t(19);t.d(n,"a",function(){return e.EditorState}),t.d(n,"b",function(){return e.NodeSelection}),t.d(n,"c",function(){return e.Plugin}),t.d(n,"d",function(){return e.PluginKey}),t.d(n,"e",function(){return e.Selection}),t.d(n,"f",function(){return e.TextSelection})},function($,n,t){"use strict";t.d(n,"a",function(){return v}),t.d(n,"b",function(){return O}),t.d(n,"c",function(){return u}),t.d(n,"d",function(){return r});var e=t(0),s=t(1),o=Object.defineProperty,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(d,b,w)=>b in d?o(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,h=(d,b)=>{for(var w in b||(b={}))c.call(b,w)&&p(d,w,b[w]);if(a)for(var w of a(b))l.call(b,w)&&p(d,w,b[w]);return d},m;const g=typeof window!="undefined"?(m=window._preloads)==null?void 0:m.user:null,v=Object(e.createContext)({user:g,setUser:()=>{}});v.displayName="UserContext";function O({defaultValue:d,children:b}){const[w,E]=Object(s.k)(d||g),S=Object(s.h)(()=>({user:w,setUser:E}),[w]);return Object(e.h)(v.Provider,{value:S},b)}function u(){return Object(s.b)(v).user}function r(){return Object(s.b)(v)}const i=d=>{const b=w=>{const E=Object(s.b)(v);return Object(e.h)(d,h({user:E},w))};return b.displayName=`withUserContext(${d.name||d.displayName||"Anonymous"})`,b}},function($,n,t){"use strict";t.d(n,"a",function(){return P}),t.d(n,"b",function(){return ne}),t.d(n,"c",function(){return E}),t.d(n,"d",function(){return M}),t.d(n,"e",function(){return d}),t.d(n,"f",function(){return jr}),t.d(n,"g",function(){return S}),t.d(n,"h",function(){return K}),t.d(n,"i",function(){return X}),t.d(n,"j",function(){return Ue}),t.d(n,"k",function(){return be}),t.d(n,"l",function(){return Pe}),t.d(n,"m",function(){return Kn}),t.d(n,"n",function(){return ke}),t.d(n,"o",function(){return Qt}),t.d(n,"p",function(){return _e}),t.d(n,"q",function(){return Ze}),t.d(n,"r",function(){return Ye}),t.d(n,"s",function(){return ee}),t.d(n,"t",function(){return H}),t.d(n,"u",function(){return V}),t.d(n,"v",function(){return Ee}),t.d(n,"w",function(){return ct}),t.d(n,"x",function(){return Xe}),t.d(n,"y",function(){return gt}),t.d(n,"z",function(){return me}),t.d(n,"A",function(){return Hn}),t.d(n,"B",function(){return Un}),t.d(n,"C",function(){return cr}),t.d(n,"D",function(){return Ne}),t.d(n,"E",function(){return A}),t.d(n,"F",function(){return L}),t.d(n,"G",function(){return wt}),t.d(n,"H",function(){return w});var e=t(127),s=t(32),o=t(77),a=t(97),c=t(98),l=t(99),p=t(106),h=t(70),m=t(2),g=t(30);function v(mt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(pt){return typeof pt}:v=function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},v(mt)}var O=t(140);function u(mt,Fe){return Fe||(Fe=mt.slice(0)),Object.freeze(Object.defineProperties(mt,{raw:{value:Object.freeze(Fe)}}))}var r=t(353),i=t.n(r),d=function(){};function b(mt,Fe){return Fe?Fe[0]==="-"?mt+Fe:mt+"__"+Fe:mt}function w(mt,Fe,pt){var Dt=[pt];if(Fe&&mt)for(var Jt in Fe)Fe.hasOwnProperty(Jt)&&Fe[Jt]&&Dt.push("".concat(b(mt,Jt)));return Dt.filter(function(Gt){return Gt}).map(function(Gt){return String(Gt).trim()}).join(" ")}var E=function(Fe){return Array.isArray(Fe)?Fe.filter(Boolean):v(Fe)==="object"&&Fe!==null?[Fe]:[]};function S(mt,Fe,pt){if(pt){var Dt=pt(mt,Fe);if(typeof Dt=="string")return Dt}return mt}function P(mt){return[document.documentElement,document.body,window].indexOf(mt)>-1}function D(mt){return P(mt)?window.pageYOffset:mt.scrollTop}function W(mt,Fe){if(P(mt)){window.scrollTo(0,Fe);return}mt.scrollTop=Fe}function B(mt){var Fe=getComputedStyle(mt),pt=Fe.position==="absolute",Dt=/(auto|scroll)/,Jt=document.documentElement;if(Fe.position==="fixed")return Jt;for(var Gt=mt;Gt=Gt.parentElement;)if(Fe=getComputedStyle(Gt),!(pt&&Fe.position==="static")&&Dt.test(Fe.overflow+Fe.overflowY+Fe.overflowX))return Gt;return Jt}function f(mt,Fe,pt,Dt){return pt*((mt=mt/Dt-1)*mt*mt+1)+Fe}function y(mt,Fe){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,Dt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d,Jt=D(mt),Gt=Fe-Jt,mn=10,Cn=0;function tr(){Cn+=mn;var Zn=f(Cn,Jt,Gt,pt);W(mt,Zn),Cn<pt?window.requestAnimationFrame(tr):Dt(mt)}tr()}function M(mt,Fe){var pt=mt.getBoundingClientRect(),Dt=Fe.getBoundingClientRect(),Jt=Fe.offsetHeight/3;Dt.bottom+Jt>pt.bottom?W(mt,Math.min(Fe.offsetTop+Fe.clientHeight-mt.offsetHeight+Jt,mt.scrollHeight)):Dt.top-Jt<pt.top&&W(mt,Math.max(Fe.offsetTop-Jt,0))}function N(mt){var Fe=mt.getBoundingClientRect();return{bottom:Fe.bottom,height:Fe.height,left:Fe.left,right:Fe.right,top:Fe.top,width:Fe.width}}function A(){try{return document.createEvent("TouchEvent"),!0}catch(mt){return!1}}function L(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(mt){return!1}}function C(mt,Fe){var pt=Object.keys(mt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(mt);Fe&&(Dt=Dt.filter(function(Jt){return Object.getOwnPropertyDescriptor(mt,Jt).enumerable})),pt.push.apply(pt,Dt)}return pt}function R(mt){for(var Fe=1;Fe<arguments.length;Fe++){var pt=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?C(Object(pt),!0).forEach(function(Dt){Object(o.a)(mt,Dt,pt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(pt)):C(Object(pt)).forEach(function(Dt){Object.defineProperty(mt,Dt,Object.getOwnPropertyDescriptor(pt,Dt))})}return mt}function U(mt){var Fe=Z();return function(){var Dt=Object(h.a)(mt),Jt;if(Fe){var Gt=Object(h.a)(this).constructor;Jt=Reflect.construct(Dt,arguments,Gt)}else Jt=Dt.apply(this,arguments);return Object(p.a)(this,Jt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(mt){return!1}}function F(mt){var Fe=mt.maxHeight,pt=mt.menuEl,Dt=mt.minHeight,Jt=mt.placement,Gt=mt.shouldScroll,mn=mt.isFixedPosition,Cn=mt.theme,tr=Cn.spacing,Zn=B(pt),At={placement:"bottom",maxHeight:Fe};if(!pt||!pt.offsetParent)return At;var Xt=Zn.getBoundingClientRect(),en=Xt.height,$n=pt.getBoundingClientRect(),Xn=$n.bottom,Yn=$n.height,Sn=$n.top,nr=pt.offsetParent.getBoundingClientRect(),zt=nr.top,Kt=window.innerHeight,$t=D(Zn),et=parseInt(getComputedStyle(pt).marginBottom,10),Wt=parseInt(getComputedStyle(pt).marginTop,10),Vt=zt-Wt,cn=Kt-Sn,Tn=Vt+$t,pn=en-$t-Sn,Gn=Xn-Kt+$t+et,hr=$t+Sn-Wt,Rn=160;switch(Jt){case"auto":case"bottom":if(cn>=Yn)return{placement:"bottom",maxHeight:Fe};if(pn>=Yn&&!mn)return Gt&&y(Zn,Gn,Rn),{placement:"bottom",maxHeight:Fe};if(!mn&&pn>=Dt||mn&&cn>=Dt){Gt&&y(Zn,Gn,Rn);var pr=mn?cn-et:pn-et;return{placement:"bottom",maxHeight:pr}}if(Jt==="auto"||mn){var zn=Fe,Ar=mn?Vt:Tn;return Ar>=Dt&&(zn=Math.min(Ar-et-tr.controlHeight,Fe)),{placement:"top",maxHeight:zn}}if(Jt==="bottom")return W(Zn,Gn),{placement:"bottom",maxHeight:Fe};break;case"top":if(Vt>=Yn)return{placement:"top",maxHeight:Fe};if(Tn>=Yn&&!mn)return Gt&&y(Zn,hr,Rn),{placement:"top",maxHeight:Fe};if(!mn&&Tn>=Dt||mn&&Vt>=Dt){var Rr=Fe;return(!mn&&Tn>=Dt||mn&&Vt>=Dt)&&(Rr=mn?Vt-Wt:Tn-Wt),Gt&&y(Zn,hr,Rn),{placement:"top",maxHeight:Rr}}return{placement:"bottom",maxHeight:Fe};default:throw new Error('Invalid placement provided "'.concat(Jt,'".'))}return At}function z(mt){var Fe={bottom:"top",top:"bottom"};return mt?Fe[mt]:"bottom"}var G=function(Fe){return Fe==="auto"?"bottom":Fe},V=function(Fe){var pt,Dt=Fe.placement,Jt=Fe.theme,Gt=Jt.borderRadius,mn=Jt.spacing,Cn=Jt.colors;return pt={label:"menu"},Object(o.a)(pt,z(Dt),"100%"),Object(o.a)(pt,"backgroundColor",Cn.neutral0),Object(o.a)(pt,"borderRadius",Gt),Object(o.a)(pt,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Object(o.a)(pt,"marginBottom",mn.menuGutter),Object(o.a)(pt,"marginTop",mn.menuGutter),Object(o.a)(pt,"position","absolute"),Object(o.a)(pt,"width","100%"),Object(o.a)(pt,"zIndex",1),pt},k=Object(m.createContext)({getPortalPlacement:null}),K=function(mt){Object(l.a)(pt,mt);var Fe=U(pt);function pt(){var Dt;Object(a.a)(this,pt);for(var Jt=arguments.length,Gt=new Array(Jt),mn=0;mn<Jt;mn++)Gt[mn]=arguments[mn];return Dt=Fe.call.apply(Fe,[this].concat(Gt)),Dt.state={maxHeight:Dt.props.maxMenuHeight,placement:null},Dt.getPlacement=function(Cn){var tr=Dt.props,Zn=tr.minMenuHeight,At=tr.maxMenuHeight,Xt=tr.menuPlacement,en=tr.menuPosition,$n=tr.menuShouldScrollIntoView,Xn=tr.theme;if(!!Cn){var Yn=en==="fixed",Sn=$n&&!Yn,nr=F({maxHeight:At,menuEl:Cn,minHeight:Zn,placement:Xt,shouldScroll:Sn,isFixedPosition:Yn,theme:Xn}),zt=Dt.context.getPortalPlacement;zt&&zt(nr),Dt.setState(nr)}},Dt.getUpdatedProps=function(){var Cn=Dt.props.menuPlacement,tr=Dt.state.placement||G(Cn);return R(R({},Dt.props),{},{placement:tr,maxHeight:Dt.state.maxHeight})},Dt}return Object(c.a)(pt,[{key:"render",value:function(){var Jt=this.props.children;return Jt({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),pt}(m.Component);K.contextType=k;var Y=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.innerRef,Cn=Fe.innerProps;return Object(g.c)("div",Object(s.a)({css:Gt("menu",Fe),className:Jt({menu:!0},Dt)},Cn,{ref:mn}),pt)},ee=function(Fe){var pt=Fe.maxHeight,Dt=Fe.theme.spacing.baseUnit;return{maxHeight:pt,overflowY:"auto",paddingBottom:Dt,paddingTop:Dt,position:"relative",WebkitOverflowScrolling:"touch"}},ae=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.isMulti,Cn=Fe.innerRef,tr=Fe.innerProps;return Object(g.c)("div",Object(s.a)({css:Gt("menuList",Fe),className:Jt({"menu-list":!0,"menu-list--is-multi":mn},Dt),ref:Cn},tr),pt)},he=function(Fe){var pt=Fe.theme,Dt=pt.spacing.baseUnit,Jt=pt.colors;return{color:Jt.neutral40,padding:"".concat(Dt*2,"px ").concat(Dt*3,"px"),textAlign:"center"}},me=he,Ye=he,se=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.innerProps;return Object(g.c)("div",Object(s.a)({css:Gt("noOptionsMessage",Fe),className:Jt({"menu-notice":!0,"menu-notice--no-options":!0},Dt)},mn),pt)};se.defaultProps={children:"No options"};var ie=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.innerProps;return Object(g.c)("div",Object(s.a)({css:Gt("loadingMessage",Fe),className:Jt({"menu-notice":!0,"menu-notice--loading":!0},Dt)},mn),pt)};ie.defaultProps={children:"Loading..."};var Ee=function(Fe){var pt=Fe.rect,Dt=Fe.offset,Jt=Fe.position;return{left:pt.left,position:Jt,top:Dt,width:pt.width,zIndex:1}},Oe=function(mt){Object(l.a)(pt,mt);var Fe=U(pt);function pt(){var Dt;Object(a.a)(this,pt);for(var Jt=arguments.length,Gt=new Array(Jt),mn=0;mn<Jt;mn++)Gt[mn]=arguments[mn];return Dt=Fe.call.apply(Fe,[this].concat(Gt)),Dt.state={placement:null},Dt.getPortalPlacement=function(Cn){var tr=Cn.placement,Zn=G(Dt.props.menuPlacement);tr!==Zn&&Dt.setState({placement:tr})},Dt}return Object(c.a)(pt,[{key:"render",value:function(){var Jt=this.props,Gt=Jt.appendTo,mn=Jt.children,Cn=Jt.controlElement,tr=Jt.menuPlacement,Zn=Jt.menuPosition,At=Jt.getStyles,Xt=Zn==="fixed";if(!Gt&&!Xt||!Cn)return null;var en=this.state.placement||G(tr),$n=N(Cn),Xn=Xt?0:window.pageYOffset,Yn=$n[en]+Xn,Sn={offset:Yn,position:Zn,rect:$n},nr=Object(g.c)("div",{css:At("menuPortal",Sn)},mn);return Object(g.c)(k.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},Gt?Object(m.createPortal)(nr,Gt):nr)}}]),pt}(m.Component),ce=Array.isArray,ue=Object.keys,pe=Object.prototype.hasOwnProperty;function $e(mt,Fe){if(mt===Fe)return!0;if(mt&&Fe&&v(mt)=="object"&&v(Fe)=="object"){var pt=ce(mt),Dt=ce(Fe),Jt,Gt,mn;if(pt&&Dt){if(Gt=mt.length,Gt!=Fe.length)return!1;for(Jt=Gt;Jt--!=0;)if(!$e(mt[Jt],Fe[Jt]))return!1;return!0}if(pt!=Dt)return!1;var Cn=mt instanceof Date,tr=Fe instanceof Date;if(Cn!=tr)return!1;if(Cn&&tr)return mt.getTime()==Fe.getTime();var Zn=mt instanceof RegExp,At=Fe instanceof RegExp;if(Zn!=At)return!1;if(Zn&&At)return mt.toString()==Fe.toString();var Xt=ue(mt);if(Gt=Xt.length,Gt!==ue(Fe).length)return!1;for(Jt=Gt;Jt--!=0;)if(!pe.call(Fe,Xt[Jt]))return!1;for(Jt=Gt;Jt--!=0;)if(mn=Xt[Jt],!(mn==="_owner"&&mt.$$typeof)&&!$e(mt[mn],Fe[mn]))return!1;return!0}return mt!==mt&&Fe!==Fe}function ne(mt,Fe){try{return $e(mt,Fe)}catch(pt){if(pt.message&&pt.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",pt.name,pt.message),!1;throw pt}}var X=function(Fe){var pt=Fe.isDisabled,Dt=Fe.isRtl;return{label:"container",direction:Dt?"rtl":null,pointerEvents:pt?"none":null,position:"relative"}},q=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.innerProps,Cn=Fe.isDisabled,tr=Fe.isRtl;return Object(g.c)("div",Object(s.a)({css:Gt("container",Fe),className:Jt({"--is-disabled":Cn,"--is-rtl":tr},Dt)},mn),pt)},Ne=function(Fe){var pt=Fe.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(pt.baseUnit/2,"px ").concat(pt.baseUnit*2,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},Qe=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.isMulti,mn=Fe.getStyles,Cn=Fe.hasValue;return Object(g.c)("div",{css:mn("valueContainer",Fe),className:Jt({"value-container":!0,"value-container--is-multi":Gt,"value-container--has-value":Cn},Dt)},pt)},Ze=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},tt=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles;return Object(g.c)("div",{css:Gt("indicatorsContainer",Fe),className:Jt({indicators:!0},Dt)},pt)};function Ft(){var mt=u([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]);return Ft=function(){return mt},mt}function Lt(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var rn={name:"19bqh2r",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;"},ht=function(Fe){var pt=Fe.size,Dt=Object(e.a)(Fe,["size"]);return Object(g.c)("svg",Object(s.a)({height:pt,width:pt,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:rn},Dt))},je=function(Fe){return Object(g.c)(ht,Object(s.a)({size:20},Fe),Object(g.c)("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Le=function(Fe){return Object(g.c)(ht,Object(s.a)({size:20},Fe),Object(g.c)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},rt=function(Fe){var pt=Fe.isFocused,Dt=Fe.theme,Jt=Dt.spacing.baseUnit,Gt=Dt.colors;return{label:"indicatorContainer",color:pt?Gt.neutral60:Gt.neutral20,display:"flex",padding:Jt*2,transition:"color 150ms",":hover":{color:pt?Gt.neutral80:Gt.neutral40}}},Pe=rt,de=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.innerProps;return Object(g.c)("div",Object(s.a)({},mn,{css:Gt("dropdownIndicator",Fe),className:Jt({indicator:!0,"dropdown-indicator":!0},Dt)}),pt||Object(g.c)(Le,null))},be=rt,Ie=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.innerProps;return Object(g.c)("div",Object(s.a)({},mn,{css:Gt("clearIndicator",Fe),className:Jt({indicator:!0,"clear-indicator":!0},Dt)}),pt||Object(g.c)(je,null))},ke=function(Fe){var pt=Fe.isDisabled,Dt=Fe.theme,Jt=Dt.spacing.baseUnit,Gt=Dt.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:pt?Gt.neutral10:Gt.neutral20,marginBottom:Jt*2,marginTop:Jt*2,width:1}},Te=function(Fe){var pt=Fe.className,Dt=Fe.cx,Jt=Fe.getStyles,Gt=Fe.innerProps;return Object(g.c)("span",Object(s.a)({},Gt,{css:Jt("indicatorSeparator",Fe),className:Dt({"indicator-separator":!0},pt)}))},x=Object(g.d)(Ft()),H=function(Fe){var pt=Fe.isFocused,Dt=Fe.size,Jt=Fe.theme,Gt=Jt.colors,mn=Jt.spacing.baseUnit;return{label:"loadingIndicator",color:pt?Gt.neutral60:Gt.neutral20,display:"flex",padding:mn*2,transition:"color 150ms",alignSelf:"center",fontSize:Dt,lineHeight:1,marginRight:Dt,textAlign:"center",verticalAlign:"middle"}},le=function(Fe){var pt=Fe.delay,Dt=Fe.offset;return Object(g.c)("span",{css:Object(O.a)({animation:"".concat(x," 1s ease-in-out ").concat(pt,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:Dt?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"")})},Ce=function(Fe){var pt=Fe.className,Dt=Fe.cx,Jt=Fe.getStyles,Gt=Fe.innerProps,mn=Fe.isRtl;return Object(g.c)("div",Object(s.a)({},Gt,{css:Jt("loadingIndicator",Fe),className:Dt({indicator:!0,"loading-indicator":!0},pt)}),Object(g.c)(le,{delay:0,offset:mn}),Object(g.c)(le,{delay:160,offset:!0}),Object(g.c)(le,{delay:320,offset:!mn}))};Ce.defaultProps={size:4};var Ue=function(Fe){var pt=Fe.isDisabled,Dt=Fe.isFocused,Jt=Fe.theme,Gt=Jt.colors,mn=Jt.borderRadius,Cn=Jt.spacing;return{label:"control",alignItems:"center",backgroundColor:pt?Gt.neutral5:Gt.neutral0,borderColor:pt?Gt.neutral10:Dt?Gt.primary:Gt.neutral20,borderRadius:mn,borderStyle:"solid",borderWidth:1,boxShadow:Dt?"0 0 0 1px ".concat(Gt.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:Cn.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:Dt?Gt.primary:Gt.neutral30}}},Ve=function(Fe){var pt=Fe.children,Dt=Fe.cx,Jt=Fe.getStyles,Gt=Fe.className,mn=Fe.isDisabled,Cn=Fe.isFocused,tr=Fe.innerRef,Zn=Fe.innerProps,At=Fe.menuIsOpen;return Object(g.c)("div",Object(s.a)({ref:tr,css:Jt("control",Fe),className:Dt({control:!0,"control--is-disabled":mn,"control--is-focused":Cn,"control--menu-is-open":At},Gt)},Zn),pt)};function bt(mt,Fe){var pt=Object.keys(mt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(mt);Fe&&(Dt=Dt.filter(function(Jt){return Object.getOwnPropertyDescriptor(mt,Jt).enumerable})),pt.push.apply(pt,Dt)}return pt}function yt(mt){for(var Fe=1;Fe<arguments.length;Fe++){var pt=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?bt(Object(pt),!0).forEach(function(Dt){Object(o.a)(mt,Dt,pt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(pt)):bt(Object(pt)).forEach(function(Dt){Object.defineProperty(mt,Dt,Object.getOwnPropertyDescriptor(pt,Dt))})}return mt}var Qt=function(Fe){var pt=Fe.theme.spacing;return{paddingBottom:pt.baseUnit*2,paddingTop:pt.baseUnit*2}},tn=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.Heading,Cn=Fe.headingProps,tr=Fe.label,Zn=Fe.theme,At=Fe.selectProps;return Object(g.c)("div",{css:Gt("group",Fe),className:Jt({group:!0},Dt)},Object(g.c)(mn,Object(s.a)({},Cn,{selectProps:At,theme:Zn,getStyles:Gt,cx:Jt}),tr),Object(g.c)("div",null,pt))},Kn=function(Fe){var pt=Fe.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:pt.baseUnit*3,paddingRight:pt.baseUnit*3,textTransform:"uppercase"}},Ot=function(Fe){var pt=Fe.className,Dt=Fe.cx,Jt=Fe.getStyles,Gt=Fe.theme,mn=Fe.selectProps,Cn=Object(e.a)(Fe,["className","cx","getStyles","theme","selectProps"]);return Object(g.c)("div",Object(s.a)({css:Jt("groupHeading",yt({theme:Gt},Cn)),className:Dt({"group-heading":!0},pt)},Cn))};function lt(mt,Fe){var pt=Object.keys(mt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(mt);Fe&&(Dt=Dt.filter(function(Jt){return Object.getOwnPropertyDescriptor(mt,Jt).enumerable})),pt.push.apply(pt,Dt)}return pt}function Be(mt){for(var Fe=1;Fe<arguments.length;Fe++){var pt=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?lt(Object(pt),!0).forEach(function(Dt){Object(o.a)(mt,Dt,pt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(pt)):lt(Object(pt)).forEach(function(Dt){Object.defineProperty(mt,Dt,Object.getOwnPropertyDescriptor(pt,Dt))})}return mt}var _e=function(Fe){var pt=Fe.isDisabled,Dt=Fe.theme,Jt=Dt.spacing,Gt=Dt.colors;return{margin:Jt.baseUnit/2,paddingBottom:Jt.baseUnit/2,paddingTop:Jt.baseUnit/2,visibility:pt?"hidden":"visible",color:Gt.neutral80}},Ae=function(Fe){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:Fe?0:1,outline:0,padding:0,color:"inherit"}},fe=function(Fe){var pt=Fe.className,Dt=Fe.cx,Jt=Fe.getStyles,Gt=Fe.innerRef,mn=Fe.isHidden,Cn=Fe.isDisabled,tr=Fe.theme,Zn=Fe.selectProps,At=Object(e.a)(Fe,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]);return Object(g.c)("div",{css:Jt("input",Be({theme:tr},At))},Object(g.c)(i.a,Object(s.a)({className:Dt({input:!0},pt),inputRef:Gt,inputStyle:Ae(mn),disabled:Cn},At)))};function ft(mt,Fe){var pt=Object.keys(mt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(mt);Fe&&(Dt=Dt.filter(function(Jt){return Object.getOwnPropertyDescriptor(mt,Jt).enumerable})),pt.push.apply(pt,Dt)}return pt}function nt(mt){for(var Fe=1;Fe<arguments.length;Fe++){var pt=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?ft(Object(pt),!0).forEach(function(Dt){Object(o.a)(mt,Dt,pt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(pt)):ft(Object(pt)).forEach(function(Dt){Object.defineProperty(mt,Dt,Object.getOwnPropertyDescriptor(pt,Dt))})}return mt}var ct=function(Fe){var pt=Fe.theme,Dt=pt.spacing,Jt=pt.borderRadius,Gt=pt.colors;return{label:"multiValue",backgroundColor:Gt.neutral10,borderRadius:Jt/2,display:"flex",margin:Dt.baseUnit/2,minWidth:0}},Xe=function(Fe){var pt=Fe.theme,Dt=pt.borderRadius,Jt=pt.colors,Gt=Fe.cropWithEllipsis;return{borderRadius:Dt/2,color:Jt.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:Gt?"ellipsis":null,whiteSpace:"nowrap"}},gt=function(Fe){var pt=Fe.theme,Dt=pt.spacing,Jt=pt.borderRadius,Gt=pt.colors,mn=Fe.isFocused;return{alignItems:"center",borderRadius:Jt/2,backgroundColor:mn&&Gt.dangerLight,display:"flex",paddingLeft:Dt.baseUnit,paddingRight:Dt.baseUnit,":hover":{backgroundColor:Gt.dangerLight,color:Gt.danger}}},Tt=function(Fe){var pt=Fe.children,Dt=Fe.innerProps;return Object(g.c)("div",Dt,pt)},Ut=Tt,qt=Tt;function sn(mt){var Fe=mt.children,pt=mt.innerProps;return Object(g.c)("div",pt,Fe||Object(g.c)(je,{size:14}))}var _n=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.components,Gt=Fe.cx,mn=Fe.data,Cn=Fe.getStyles,tr=Fe.innerProps,Zn=Fe.isDisabled,At=Fe.removeProps,Xt=Fe.selectProps,en=Jt.Container,$n=Jt.Label,Xn=Jt.Remove;return Object(g.c)(g.b,null,function(Yn){var Sn=Yn.css,nr=Yn.cx;return Object(g.c)(en,{data:mn,innerProps:nt(nt({},tr),{},{className:nr(Sn(Cn("multiValue",Fe)),Gt({"multi-value":!0,"multi-value--is-disabled":Zn},Dt))}),selectProps:Xt},Object(g.c)($n,{data:mn,innerProps:{className:nr(Sn(Cn("multiValueLabel",Fe)),Gt({"multi-value__label":!0},Dt))},selectProps:Xt},pt),Object(g.c)(Xn,{data:mn,innerProps:nt({className:nr(Sn(Cn("multiValueRemove",Fe)),Gt({"multi-value__remove":!0},Dt))},At),selectProps:Xt}))})};_n.defaultProps={cropWithEllipsis:!0};var Hn=function(Fe){var pt=Fe.isDisabled,Dt=Fe.isFocused,Jt=Fe.isSelected,Gt=Fe.theme,mn=Gt.spacing,Cn=Gt.colors;return{label:"option",backgroundColor:Jt?Cn.primary:Dt?Cn.primary25:"transparent",color:pt?Cn.neutral20:Jt?Cn.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(mn.baseUnit*2,"px ").concat(mn.baseUnit*3,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!pt&&(Jt?Cn.primary:Cn.primary50)}}},wn=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.isDisabled,Cn=Fe.isFocused,tr=Fe.isSelected,Zn=Fe.innerRef,At=Fe.innerProps;return Object(g.c)("div",Object(s.a)({css:Gt("option",Fe),className:Jt({option:!0,"option--is-disabled":mn,"option--is-focused":Cn,"option--is-selected":tr},Dt),ref:Zn},At),pt)},Un=function(Fe){var pt=Fe.theme,Dt=pt.spacing,Jt=pt.colors;return{label:"placeholder",color:Jt.neutral50,marginLeft:Dt.baseUnit/2,marginRight:Dt.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},bn=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.innerProps;return Object(g.c)("div",Object(s.a)({css:Gt("placeholder",Fe),className:Jt({placeholder:!0},Dt)},mn),pt)},cr=function(Fe){var pt=Fe.isDisabled,Dt=Fe.theme,Jt=Dt.spacing,Gt=Dt.colors;return{label:"singleValue",color:pt?Gt.neutral40:Gt.neutral80,marginLeft:Jt.baseUnit/2,marginRight:Jt.baseUnit/2,maxWidth:"calc(100% - ".concat(Jt.baseUnit*2,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},fr=function(Fe){var pt=Fe.children,Dt=Fe.className,Jt=Fe.cx,Gt=Fe.getStyles,mn=Fe.isDisabled,Cn=Fe.innerProps;return Object(g.c)("div",Object(s.a)({css:Gt("singleValue",Fe),className:Jt({"single-value":!0,"single-value--is-disabled":mn},Dt)},Cn),pt)};function ur(mt,Fe){var pt=Object.keys(mt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(mt);Fe&&(Dt=Dt.filter(function(Jt){return Object.getOwnPropertyDescriptor(mt,Jt).enumerable})),pt.push.apply(pt,Dt)}return pt}function er(mt){for(var Fe=1;Fe<arguments.length;Fe++){var pt=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?ur(Object(pt),!0).forEach(function(Dt){Object(o.a)(mt,Dt,pt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(pt)):ur(Object(pt)).forEach(function(Dt){Object.defineProperty(mt,Dt,Object.getOwnPropertyDescriptor(pt,Dt))})}return mt}var jr={ClearIndicator:Ie,Control:Ve,DropdownIndicator:de,DownChevron:Le,CrossIcon:je,Group:tn,GroupHeading:Ot,IndicatorsContainer:tt,IndicatorSeparator:Te,Input:fe,LoadingIndicator:Ce,Menu:Y,MenuList:ae,MenuPortal:Oe,LoadingMessage:ie,NoOptionsMessage:se,MultiValue:_n,MultiValueContainer:Ut,MultiValueLabel:qt,MultiValueRemove:sn,Option:wn,Placeholder:bn,SelectContainer:q,SingleValue:fr,ValueContainer:Qe},wt=function(Fe){return er(er({},jr),Fe.components)}},function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(2),s=t(79);let o=function(a){let c=Object(s.a)(a);return e.default.useCallback((...l)=>c.current(...l),[c])}},function($,n,t){"use strict";t.r(n),t.d(n,"subscribers",function(){return u}),t.d(n,"getCurrentUrl",function(){return d}),t.d(n,"route",function(){return b}),t.d(n,"Router",function(){return y}),t.d(n,"Route",function(){return N}),t.d(n,"Link",function(){return M}),t.d(n,"exec",function(){return a});var e=t(0),s={};function o(A,L){for(var C in L)A[C]=L[C];return A}function a(A,L,C){var R=/(?:\?([^#]*))?(#.*)?$/,U=A.match(R),Z={},F;if(U&&U[1])for(var z=U[1].split("&"),G=0;G<z.length;G++){var V=z[G].split("=");Z[decodeURIComponent(V[0])]=decodeURIComponent(V.slice(1).join("="))}A=p(A.replace(R,"")),L=p(L||"");for(var k=Math.max(A.length,L.length),K=0;K<k;K++)if(L[K]&&L[K].charAt(0)===":"){var Y=L[K].replace(/(^:|[+*?]+$)/g,""),ee=(L[K].match(/[+*?]+$/)||s)[0]||"",ae=~ee.indexOf("+"),he=~ee.indexOf("*"),me=A[K]||"";if(!me&&!he&&(ee.indexOf("?")<0||ae)){F=!1;break}if(Z[Y]=decodeURIComponent(me),ae||he){Z[Y]=A.slice(K).map(decodeURIComponent).join("/");break}}else if(L[K]!==A[K]){F=!1;break}return C.default!==!0&&F===!1?!1:Z}function c(A,L){return A.rank<L.rank?1:A.rank>L.rank?-1:A.index-L.index}function l(A,L){return A.index=L,A.rank=g(A),A.props}function p(A){return A.replace(/(^\/+|\/+$)/g,"").split("/")}function h(A){return A.charAt(0)==":"?1+"*+?".indexOf(A.charAt(A.length-1))||4:5}function m(A){return p(A).map(h).join("")}function g(A){return A.props.default?0:m(A.props.path)}var v=null,O=[],u=[],r={};function i(A,L){L===void 0&&(L="push"),v&&v[L]?v[L](A):typeof history!="undefined"&&history[L+"State"]&&history[L+"State"](null,null,A)}function d(){var A;return v&&v.location?A=v.location:v&&v.getCurrentLocation?A=v.getCurrentLocation():A=typeof location!="undefined"?location:r,""+(A.pathname||"")+(A.search||"")}function b(A,L){return L===void 0&&(L=!1),typeof A!="string"&&A.url&&(L=A.replace,A=A.url),w(A)&&i(A,L?"replace":"push"),E(A)}function w(A){for(var L=O.length;L--;)if(O[L].canRoute(A))return!0;return!1}function E(A){for(var L=!1,C=0;C<O.length;C++)O[C].routeTo(A)===!0&&(L=!0);for(var R=u.length;R--;)u[R](A);return L}function S(A){if(!(!A||!A.getAttribute)){var L=A.getAttribute("href"),C=A.getAttribute("target");if(!(!L||!L.match(/^\//g)||C&&!C.match(/^_?self$/i)))return b(L)}}function P(A){if(!(A.ctrlKey||A.metaKey||A.altKey||A.shiftKey||A.button!==0))return S(A.currentTarget||A.target||this),D(A)}function D(A){return A&&(A.stopImmediatePropagation&&A.stopImmediatePropagation(),A.stopPropagation&&A.stopPropagation(),A.preventDefault()),!1}function W(A){if(!(A.ctrlKey||A.metaKey||A.altKey||A.shiftKey||A.button!==0)){var L=A.target;do if(String(L.nodeName).toUpperCase()==="A"&&L.getAttribute("href")){if(L.hasAttribute("native"))return;if(S(L))return D(A)}while(L=L.parentNode)}}var B=!1;function f(){B||(typeof addEventListener=="function"&&(v||addEventListener("popstate",function(){E(d())}),addEventListener("click",W)),B=!0)}var y=function(A){function L(C){A.call(this,C),C.history&&(v=C.history),this.state={url:C.url||d()},f()}return A&&(L.__proto__=A),L.prototype=Object.create(A&&A.prototype),L.prototype.constructor=L,L.prototype.shouldComponentUpdate=function(R){return R.static!==!0?!0:R.url!==this.props.url||R.onChange!==this.props.onChange},L.prototype.canRoute=function(R){var U=Object(e.toChildArray)(this.props.children);return this.getMatchingChildren(U,R,!1).length>0},L.prototype.routeTo=function(R){this.setState({url:R});var U=this.canRoute(R);return this.updating||this.forceUpdate(),U},L.prototype.componentWillMount=function(){O.push(this),this.updating=!0},L.prototype.componentDidMount=function(){var R=this;v&&(this.unlisten=v.listen(function(U){R.routeTo(""+(U.pathname||"")+(U.search||""))})),this.updating=!1},L.prototype.componentWillUnmount=function(){typeof this.unlisten=="function"&&this.unlisten(),O.splice(O.indexOf(this),1)},L.prototype.componentWillUpdate=function(){this.updating=!0},L.prototype.componentDidUpdate=function(){this.updating=!1},L.prototype.getMatchingChildren=function(R,U,Z){return R.filter(l).sort(c).map(function(F){var z=a(U,F.props.path,F.props);if(z){if(Z!==!1){var G={url:U,matches:z};return o(G,z),delete G.ref,delete G.key,Object(e.cloneElement)(F,G)}return F}}).filter(Boolean)},L.prototype.render=function(R,U){var Z=R.children,F=R.onChange,z=U.url,G=this.getMatchingChildren(Object(e.toChildArray)(Z),z,!0),V=G[0]||null,k=this.previousUrl;return z!==k&&(this.previousUrl=z,typeof F=="function"&&F({router:this,url:z,previous:k,active:G,current:V})),V},L}(e.Component),M=function(A){return Object(e.createElement)("a",o({onClick:P},A))},N=function(A){return Object(e.createElement)(A.component,A)};y.subscribers=u,y.getCurrentUrl=d,y.route=b,y.Router=y,y.Route=N,y.Link=M,y.exec=a,n.default=y},function($,n,t){"use strict";var e=t(86);t.d(n,"a",function(){return e.a})},,function($,n,t){"use strict";t.d(n,"b",function(){return d}),t.d(n,"a",function(){return b});var e=t(0),s=t(6),o=t.n(s),a=t(229),c=t(8),l=t.n(c),p=t(14),h=Object.defineProperty,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(w,E,S)=>E in w?h(w,E,{enumerable:!0,configurable:!0,writable:!0,value:S}):w[E]=S,u=(w,E)=>{for(var S in E||(E={}))g.call(E,S)&&O(w,S,E[S]);if(m)for(var S of m(E))v.call(E,S)&&O(w,S,E[S]);return w},r=(w,E,S)=>(O(w,typeof E!="symbol"?E+"":E,S),S),i=(w,E,S)=>new Promise((P,D)=>{var W=y=>{try{f(S.next(y))}catch(M){D(M)}},B=y=>{try{f(S.throw(y))}catch(M){D(M)}},f=y=>y.done?P(y.value):Promise.resolve(y.value).then(W,B);f((S=S.apply(w,E)).next())});class d extends e.Component{constructor(E,S){super(E,S);r(this,"onDocumentKeyDown",P=>{P.key==="Escape"&&!this.props.noExit&&!Object(c.isFocused)(this.base)&&this.close()}),this.open=this.open.bind(this),this.close=this.close.bind(this),this.popup=!1,this.state={open:!1,display:!1,callback:null}}componentDidMount(){document.addEventListener("keydown",this.onDocumentKeyDown),this.props.openByDefault&&this.openImmediately()}componentWillUnmount(){document.removeEventListener("keydown",this.onDocumentKeyDown),this._timeout&&clearTimeout(this._timeout)}openImmediately(E){E&&(this._callback=E);const S=document.getElementsByTagName("html")[0];Object(c.hasClass)(S,"modal-in")||Object(c.addClass)(S,"modal-in"),this.setState({display:!0,open:!0})}open(E){return i(this,null,function*(){E&&(this._callback=E);const S=document.getElementsByTagName("html")[0];Object(c.hasClass)(S,"modal-in")||Object(c.addClass)(S,"modal-in"),this.onBeforeOpen(),this.props.onBeforeOpen&&this.props.onBeforeOpen(),yield new Promise(P=>{this.setState({display:!0},()=>{this._timeout=setTimeout(()=>{this.setState({open:!0},()=>{this.onOpen(),this.props.onOpen&&this.props.onOpen(),P()})},50)})})})}close(E){return i(this,null,function*(){this.onBeforeClose(E)!==!1&&(this.props.onBeforeClose&&this.props.onBeforeClose(E)===!1||(Object(c.removeClass)(document.getElementsByTagName("html")[0],"modal-in"),yield new Promise(S=>{this.setState({open:!1},()=>{this._timeout=setTimeout(()=>{this.setState({display:!1},()=>{this.onClose(E),this.props.onClose&&this.props.onClose(E),this._callback&&this._callback(E),S()})},750)})})))})}isOpen(){return this.state.open}onClickOuter(E){var S,P;E.stopPropagation(),(P=(S=this.props).onClick)==null||P.call(S,E),!this.props.noExit&&!this.props.noExitOnClick&&this.popup&&(this.noFullscreen||window.innerWidth>540)&&E.target&&this.container&&this.close()}onClickInner(E){var S,P;E.stopPropagation(),(P=(S=this.props).onClick)==null||P.call(S,E)}render(){const E=this.state.open?"in":"out",S=this.state.display===!1?"gone":"",P=this.props.variant==="structured";return Object(e.h)("div",{className:o()("modal typography",E,S,this.props.className,this.getClassName(),{"has-close-pill":this.props.closePill,"structured-modal":P,popup:this.popup}),onClick:D=>this.onClickOuter(D),"data-testid":this.props.testID,role:"dialog"},Object(e.h)("div",{className:"modal-table"},Object(e.h)("div",{className:"modal-row"},Object(e.h)("div",{ref:D=>this.content=D,className:o()("modal-cell modal-content",{"no-fullscreen":this.noFullscreen})},Object(e.h)("div",u({className:o()({container:!P}),ref:D=>this.container=D,onClick:D=>this.onClickInner(D)},this.props.trackInputsID&&{"data-track-inputs":this.props.trackInputsID}),!this.props.noExit&&(!this.props.noCloseButton||Object(c.isMobileBrowser)())&&(P?Object(e.h)("div",{className:"structured-modal__close-button"},Object(e.h)(p.c,{"data-testid":"close-modal",variant:"secondary",look:"circle",onClick:()=>this.close()},Object(e.h)(a.a,{size:20,color:"secondary"}))):Object(e.h)(p.c,{"data-testid":"close-modal",className:o()("modal-btn modal-exit-btn no-margin",{"button btn btn-secondary btn-pill icon-only":this.props.closePill}),onClick:()=>this.close()},Object(e.h)(a.a,{size:20,color:"secondary"}))),P?Object(e.h)("div",{className:"structured-modal__wrapper"},Object(e.h)("div",{className:"structured-modal__header"},this.props.modalTitle?Object(e.h)("h3",null,this.props.modalTitle):Object(e.h)("h3",null,"\xA0")),Object(e.h)("div",{className:"structured-modal__body"},Object(e.h)("div",{className:"container"},this.renderChildren(this.props,this.state))),this.props.modalFooter&&Object(e.h)("div",{className:"structured-modal__footer"},this.props.modalFooter)):this.renderChildren(this.props,this.state))))))}getClassName(){}onBeforeOpen(){}onOpen(){}onBeforeClose(){}onClose(){}renderChildren({children:E},S){return E}}class b extends d{constructor(E,S){super(E,S);this.popup=!0}}},function($,n,t){"use strict";t.d(n,"d",function(){return c}),t.d(n,"a",function(){return l}),t.d(n,"b",function(){return p}),t.d(n,"c",function(){return h});var e=t(0),s=t(1),o;const a=typeof window!="undefined"?(o=window._preloads)==null?void 0:o.siteConfigs:{},c=m=>({allConfigs:m,getConfigFor:v=>{if(!v||!m)return null;const O=m[v];return O===void 0?null:O}}),l=Object(e.createContext)(c(a));l.displayName="SiteConfigsContext";function p({siteConfigs:m={},children:g}){const v=Object(s.h)(()=>c(m),[m]);return Object(e.h)(l.Provider,{value:v},g)}function h(){return Object(s.b)(l)}},function($,n,t){"use strict";t.d(n,"e",function(){return b}),t.d(n,"f",function(){return w}),t.d(n,"c",function(){return E}),t.d(n,"d",function(){return S}),t.d(n,"b",function(){return P}),t.d(n,"a",function(){return D}),t.d(n,"g",function(){return W});var e=t(0),s=t(6),o=t.n(s),a=t(11),c=t.n(a),l=t(9),p=t.n(l),h=t(7),m=Object.defineProperty,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,u=(B,f,y)=>f in B?m(B,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):B[f]=y,r=(B,f)=>{for(var y in f||(f={}))v.call(f,y)&&u(B,y,f[y]);if(g)for(var y of g(f))O.call(f,y)&&u(B,y,f[y]);return B},i=(B,f)=>{var y={};for(var M in B)v.call(B,M)&&f.indexOf(M)<0&&(y[M]=B[M]);if(B!=null&&g)for(var M of g(B))f.indexOf(M)<0&&O.call(B,M)&&(y[M]=B[M]);return y},d=(B,f,y)=>new Promise((M,N)=>{var A=R=>{try{C(y.next(R))}catch(U){N(U)}},L=R=>{try{C(y.throw(R))}catch(U){N(U)}},C=R=>R.done?M(R.value):Promise.resolve(R.value).then(A,L);C((y=y.apply(B,f)).next())});function b(B,f){if(typeof window=="undefined"||typeof window.Stripe=="undefined")return null;const y={};return f?l.NO_PLATFORM_CUSTOMER_CLONE_COUNTRIES.includes(f.stripe_country)&&(y.stripeAccount=f.stripe_user_id):console.warn("No publication passed for Stripe connection"),window.Stripe(B,y)}function w(B){return B.elements({locale:window._preloads&&window._preloads.language||"auto"}).create("card",{style:{base:{fontSize:"14px",lineHeight:"40px",fontFamily:'-apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'}}})}class E extends e.Component{componentDidMount(){this.props.card&&this.props.card.mount(this.cardElement)}componentWillUnmount(){if(this.props.card)try{this.props.card.unmount(this.cardElement)}catch(f){}}render({className:f,card:y}){if(!!y)return Object(e.h)("div",{className:`fancy-stripe ${f||""}`},Object(e.h)("div",{ref:M=>this.cardElement=M}))}}class S extends e.Component{constructor(f,y){super(f,y);if(f.stripe&&f.pub.stripe_country){Object(h.i)(h.a.APPLE_PAY_SETUP_STARTED);try{const M=this.props.stripe.paymentRequest({country:this.props.pub.stripe_country,currency:this.props.plan.currency,total:this.getPaymentTotal(),requestPayerName:!0,requestPayerEmail:!0}),N=this.props.stripe.elements().create("paymentRequestButton",{paymentRequest:M});this.state={paymentRequest:M,stripeButton:N}}catch(M){console.error(M),Object(h.i)(h.a.APPLE_PAY_SETUP_FINISHED,{success:!1})}}}componentDidMount(){return d(this,null,function*(){let f=!1;if(this.state.paymentRequest){try{const y=yield this.state.paymentRequest.canMakePayment();y&&y.applePay&&(f=!0)}catch(y){console.error(y)}Object(h.i)(h.a.APPLE_PAY_SETUP_FINISHED,{success:f})}yield this.setState({canMount:f}),f?(this.button||(yield new Promise(y=>setTimeout(y,0))),this.state.stripeButton.mount(this.button),this.state.paymentRequest.on("token",y=>this.onTokenReceived(y)),this.state.paymentRequest.update({currency:this.props.plan.currency,total:this.getPaymentTotal()})):this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!1)})}componentDidUpdate(f){let y=!1;for(const M of["pub","plan","quantity","coupon","notRecurring","variableAmount"])if(f[M]!==this.props[M]||M==="coupon"&&f[M]&&f[M].loading&&(!this.props[M]||!this.props[M].loading)){y=!0;break}!y||this.state.paymentRequest&&this.state.paymentRequest.update({currency:this.props.plan.currency,total:this.getPaymentTotal()})}componentWillUnmount(){if(this.state.paymentRequest&&this.state.paymentRequest.off("token"),this.state.stripeButton)try{this.state.stripeButton.unmount(this.button)}catch(f){}}onTokenReceived(f){return d(this,null,function*(){Object(h.i)(h.a.APPLE_PAY_ATTEMPED);try{yield this.props.onSuccess({email:f.payerEmail,name:f.payerName,stripe_token:f.token}),f.complete("success"),Object(h.i)(h.a.APPLE_PAY_SUCCEEDED)}catch(y){console.error("Apple Pay submission failed:",f,y),f.complete("fail"),Object(h.i)(h.a.APPLE_PAY_FAILED,{reason:y.message})}})}getPaymentTotal(){var f;const{pub:y,plan:M,quantity:N,coupon:A,notRecurring:L,variableAmount:C}=this.props;let R=0,U=Math.max(0,M.trial_period_days||0,A&&!A.error&&!A.loading&&A.trial_period_days||0,y.trial_end_override&&Math.ceil((y.trial_end_override-Date.now()/1e3)/60/60/24));L&&(U=0);const F=(((f=M.metadata)==null?void 0:f.founding)&&C||M.amount)*(N||1);let z=F;A&&!A.error&&!A.loading&&(A.percent_off?z=Math.round(z*(1-(A.percent_off_precise||A.percent_off)/100)):A.amount_off&&(z=Math.max(0,z-A.amount_off)),z<=0&&(z=F,A.duration==="once"?M.interval==="year"?R+=12*M.interval_count:R+=M.interval_count:A.duration==="repeating"&&(R+=A.duration_in_months)));let G;return L?G="one-time":(G=`${this.props.plan.interval}ly`,this.props.quantity>1&&(G+=" per person"),R?(U>15&&(R+=parseInt(U/30)),G+=` with ${R}-month trial`):U&&(G+=` with ${U}-day trial`)),{label:G,amount:z}}render({children:f,className:y,error:M},{canMount:N}){if(!(typeof N!="undefined"&&!N&&typeof window!="undefined"))return Object(e.h)("div",{className:"apple-pay-parent-container"},N?Object(e.h)("div",{className:`apple-pay-element ${y||""}`,ref:A=>this.button=A}):Object(e.h)("p",{className:`apple-pay-loader ${y||""}`},"Loading\u2026"),M&&Object(e.h)("div",{className:"error"},M),f)}}class P extends e.Component{render(f,y){var M=f,{children:N,ref:A}=M,L=i(M,["children","ref"]);return Object(e.h)("div",{className:"fancy-input"},Object(e.h)("input",r({ref:C=>this._input=C},L)),N)}blur(){this._input&&this._input.blur()}}class D extends Error{constructor(f){super(f);this.response={body:{error:this.message}}}}class W extends e.Component{constructor(f,y){super(f,y);this.state={_paramErrors:{},_otherErrors:[],_stripeError:null,loading:!1},this.props.stripe_publishable_key&&(this._stripe=b(this.props.stripe_publishable_key,this.props.pub),this._stripe&&(this._stripeCard=w(this._stripe)))}getInputs(){const f=[];if(this.base){const y=Array.from(this.base.getElementsByTagName("*"));for(const M of y)["INPUT","TEXTAREA","SELECT"].includes(M.nodeName)&&M.getAttribute("name")&&f.push(M)}return f}resetErrors(){this.setState({_paramErrors:{},_otherErrors:[]})}clear(){this.resetErrors();for(const f of this.getInputs())f.blur&&f.blur(),f.type==="checkbox"?f.checked=!1:f.type==="select"?f.selectedIndex=-1:f.type==="radio"?f.checked=!1:f.target?f.target.value="":f.value=""}handleStripeChange({error:f}){f?this.setState({_stripeError:f.message}):this.setState({_stripeError:null})}componentDidMount(){this._mountTime=new Date,this._stripeCard&&this._stripeCard.addEventListener("change",f=>this.handleStripeChange(f))}componentWillUnmount(){this._stripeCard&&this._stripeCard.destroy()}onInputBlur(f){!this.props.analyticsName||new Date().getTime()-this._mountTime>1e3&&f.target&&f.target.value&&!f.target._blurTracked&&(Object(h.i)(`${this.props.analyticsName} Input Filled`,{name:f.target.name}),f.target._blurTracked=!0)}onPaymentRequestAttempt(f){return d(this,null,function*(){const y=yield this.handleSubmitAsync(null,f);if(y)throw y})}handleSubmit(f){f&&f.preventDefault(),this.handleSubmitAsync(f).catch(y=>{console.error(y)})}handleSubmitAsync(f){return d(this,arguments,function*(y,M={}){if(y&&y.preventDefault(),this.props.analyticsName&&Object(h.i)(`${this.props.analyticsName} Submit Pressed`),this.props.loading||this.state.loading||this.props.disableSubmit)return;this.resetErrors(),this.setState({loading:!0});const N=this.props.method?this.props.method:"post";let A=null;if(this.stripeElement&&!M.stripe_token){const{token:U,error:Z}=this._stripe?yield this._stripe.createToken(this._stripeCard):{error:{message:""}};if(U)A=U;else{this.setState({loading:!1,_stripeError:Z&&Z.message}),this.props.analyticsName&&(console.log("error",Z),Object(h.i)(`${this.props.analyticsName} Missing Payment`,{type:Z&&Z.type,code:Z&&Z.code,decline_code:Z&&Z.decline_code,reason:Z&&Z.message}));return}}let L={};for(const U of this.getInputs())U.blur&&U.blur(),U.type=="checkbox"?L[U.name]=!!U.checked:U.type=="radio"?U.checked&&(L[U.name]=U.value):U.type==="select"?L[U.name]=U.options[U.selectedIndex].value:L[U.name]=U.value;if(Object.keys(M).forEach(U=>{!L[U]&&M[U]&&(L[U]=M[U])}),A&&(L.stripe_token=A),this.props.prepareData)try{const U=yield this.props.prepareData(L,y);U&&(L=U)}catch(U){throw this.setState({loading:!1}),U}this.props.onChangeLoadingState&&this.props.onChangeLoadingState(!0);let C,R;try{if(this.props.performSubmit)C=yield this.props.performSubmit(L);else if(this.props.action){const U=c.a[N](this.props.action);this.props.method&&this.props.method==="get"?C=yield U.query(L):C=yield U.send(L)}else this.props.onSubmit&&this.props.onSubmit(L)}catch(U){R=U}if(this.setState({loading:!1}),this.props.onChangeLoadingState&&this.props.onChangeLoadingState(!1),!R)this.props.onSuccess&&this.props.onSuccess(C,L);else if(this.processErrors(R.response),this.props.onError&&this.props.onError(R),!R.response)throw R;return R})}processErrors(f){const y={},M=[];if(f&&f.body&&f.body.errors){const N=this.getInputs();f.body.errors.forEach(A=>{this.props.noInlineErrors!==!0&&A.param&&N.filter(L=>L.getAttribute("name")===A.param).length>0?y[A.param]?(console.log("Discarding repeated error"),console.log(A)):y[A.param]=A:M.push(A)})}else f&&f.body&&typeof f.body.error=="string"?M.push({msg:f.body.error}):M.push({msg:"Something went wrong"});this.setState({_paramErrors:y,_otherErrors:M}),this.props.analyticsName&&Object(h.i)(`${this.props.analyticsName} Error`,{paramErrors:JSON.stringify(y),otherErrors:JSON.stringify(M)})}render(f,y){const M=f.autoLock&&y.loading||f.loading;let N=!1,A=!1;const L=C=>{const R=[];return Object(e.toChildArray)(C).forEach(U=>{if(!U)return null;if((U.type===P||U.type==="input"||U.type==="textarea"||U.type==="select")&&U.props&&U.props.name){const Z=U.props.name;if(R.push(Object(e.cloneElement)(U,{disabled:M||U.props.disabled,onChange:F=>{var z,G;const V=((z=U.props)==null?void 0:z.onChange)||((G=U.props)==null?void 0:G.onInput);V&&V(F),this.props.onChange&&this.props.onChange(F)},onInput:F=>{U.props&&U.props.onInput&&U.props.onInput(F),this.props.onInput&&this.props.onInput(F)},onBlur:F=>{this.onInputBlur(F),U.props&&U.props.onBlur&&U.props.onBlur(F)}})),y._paramErrors[Z]&&!M){const F=y._paramErrors[Z];F.msgHTML?R.push(Object(e.h)("div",{className:"error",name:Z,dangerouslySetInnerHTML:{__html:F.msgHTML}})):R.push(Object(e.h)("div",{className:"error",name:Z},F.msg||"Invalid"))}}else if(U.props&&U.props.type==="submit")R.push(Object(e.cloneElement)(U,{disabled:M||U.props.disabled,onClick:Z=>{U.props&&U.props.onClick&&U.props.onClick(Z)!==!1&&this.handleSubmit(Z)}}));else if(U.props&&U.props.id==="error-container"){if(y._otherErrors&&!M){const Z=y._otherErrors.map(F=>F.msgHTML?Object(e.h)("div",{className:"error other-error",dangerouslySetInnerHTML:{__html:F.msgHTML}}):Object(e.h)("div",{className:"error other-error"},F.msg)).concat(U.props&&U.props.children?Object(e.toChildArray)(U.props.children):[]);R.push(Object(e.cloneElement)(U,{},Z))}}else if(U.type===E){if(N)throw new Error("Can only handle one stripe element");N=!0,R.push(Object(e.cloneElement)(U,{ref:Z=>{U.props&&U.props.ref&&U.props.ref(Z),this.stripeElement=Z},card:this._stripeCard})),(y._stripeError||!this._stripeCard)&&!M&&typeof window!="undefined"&&R.push(Object(e.h)("div",{className:o()("error",f.stripeErrorClassName),role:"alert"},y._stripeError||"Stripe payments not loaded. Are there blocked scripts?"))}else if(U.type===S){if(A)throw new Error("Can only handle one stripe payment request button");A=!0,R.push(Object(e.cloneElement)(U,{ref:Z=>{U.props&&U.props.ref&&U.props.ref(Z),this.stripePaymentRequestButton=Z},stripe:this._stripe,onSuccess:Z=>(U.props&&U.props.onSuccess&&U.props.onSuccess(Z),this.onPaymentRequestAttempt(Z))}))}else U.props&&U.props.children?R.push(Object(e.cloneElement)(U,{},L(U.props.children))):R.push(U)}),R};return Object(e.h)("form",r({className:`form ${f.className||""}`,action:f.noJsAction||f.action,method:f.method&&["get","post"].includes(f.method.toLowerCase())&&f.method.toLowerCase()||"post",autoComplete:f.autoComplete,onSubmit:C=>this.handleSubmit(C),noValidate:!0},f.enctype&&{enctype:f.enctype}),L(f.children))}}},function($,n,t){"use strict";var e=t(0),s=Object.defineProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(g,v,O)=>v in g?s(g,v,{enumerable:!0,configurable:!0,writable:!0,value:O}):g[v]=O,p=(g,v)=>{for(var O in v||(v={}))a.call(v,O)&&l(g,O,v[O]);if(o)for(var O of o(v))c.call(v,O)&&l(g,O,v[O]);return g},h=(g,v)=>{var O={};for(var u in g)a.call(g,u)&&v.indexOf(u)<0&&(O[u]=g[u]);if(g!=null&&o)for(var u of o(g))v.indexOf(u)<0&&c.call(g,u)&&(O[u]=g[u]);return O};const m=g=>{var v=g,{children:O,href:u,onClick:r}=v,i=h(v,["children","href","onClick"]);return Object(e.h)("a",p(p({role:"button",tabIndex:0,href:u!=null?u:"javascript:void(0)"},r&&{onClick:d=>{d.stopPropagation(),r(d)}}),i),O)};n.a=m},function($,n,t){"use strict";t.r(n),t.d(n,"getConfigFor",function(){return o}),t.d(n,"SiteConfigGate",function(){return a});var e=t(0),s=t(45);function o(c){var l;if(!c||typeof window=="undefined"||!((l=window._preloads)==null?void 0:l.siteConfigs))return null;const p=window._preloads.siteConfigs[c];return p===void 0?null:p}n.default=o;function a({configKey:c,children:l,value:p=!0}){return Object(s.c)().getConfigFor(c)==p?Object(e.h)(e.Fragment,null,l):null}},function($,n,t){"use strict";t.d(n,"b",function(){return l}),t.d(n,"c",function(){return p}),t.d(n,"a",function(){return h});var e=t(1),s=t(105),o=t.n(s),a=t(8),c=t.n(a);function l(){return Object(s.useMediaQuery)({maxWidth:650})}function p(){return Object(s.useMediaQuery)({maxWidth:1400})}function h(){const[m,g]=Object(e.k)(!1);return Object(e.g)(()=>{g(Object(a.isIOs)())},[]),m}},function($,n,t){"use strict";t.d(n,"a",function(){return u});var e=t(0),s=t(6),o=t.n(s),a=t(14),c=t(116),l=Object.defineProperty,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(w,E,S)=>E in w?l(w,E,{enumerable:!0,configurable:!0,writable:!0,value:S}):w[E]=S,v=(w,E)=>{for(var S in E||(E={}))h.call(E,S)&&g(w,S,E[S]);if(p)for(var S of p(E))m.call(E,S)&&g(w,S,E[S]);return w},O=(w,E)=>{var S={};for(var P in w)h.call(w,P)&&E.indexOf(P)<0&&(S[P]=w[P]);if(w!=null&&p)for(var P of p(w))E.indexOf(P)<0&&m.call(w,P)&&(S[P]=w[P]);return S};function u(w){var E=w,{className:S,variant:P,look:D="button",fill:W="outline",fixedHeight:B=!0,size:f="medium",leftIcon:y,rightIcon:M,noPadding:N=!1,forwardedRef:A,children:L}=E,C=O(E,["className","variant","look","fill","fixedHeight","size","leftIcon","rightIcon","noPadding","forwardedRef","children"]);return Object(e.h)(a.d,v({className:o()(S,"tw-cursor-pointer tw-appearance-none tw-whitespace-nowrap tw-border-0 tw-border-solid disabled:tw-cursor-not-allowed",!b.includes(D)&&"tw-bg-transparent",i.includes(D)?[`tw-relative tw-flex tw-items-center tw-justify-center tw-gap-3 ${c.e}`,d.includes(D)&&!N&&"tw-px-5",B||D=="round"?f==="small"?"tw-h-8":"tw-h-button":"tw-py-[10px]"]:"tw-p-0",D==="button"&&"tw-rounded",D==="round"&&["tw-rounded-full tw-px-4",y&&"tw-pl-[10px]",M&&"tw-pr-[10px]"],D==="circle"&&["tw-justify-center tw-rounded-full",f==="small"?"tw-h-8 tw-w-8":"tw-h-button tw-w-button"],D==="text"&&`tw-inline ${r}`,D==="reset"&&`tw-inline-block ${r}`,D==="flex"&&`tw-flex ${r}`,P==="primary"?["hover:tw-opacity-80 disabled:tw-opacity-70",b.includes(D)?" tw-bg-substack-accent tw-text-substack-bg":"tw-bg-transparent tw-text-substack-accent"]:P==="themed-primary"?["hover:tw-opacity-80 disabled:tw-opacity-70",b.includes(D)?" tw-bg-pub-accent tw-text-pub-accent-inverse":"tw-bg-transparent tw-text-pub-accent"]:P==="secondary"?["tw-text-substack-secondary disabled:tw-opacity-70",b.includes(D)?W==="filled"?"tw-border tw-border-substack-detail tw-bg-substack-wash hover:tw-border-substack-tertiary hover:tw-bg-dark-primary hover:tw-text-substack-secondary":"tw-border tw-border-substack-detail tw-bg-substack-bg hover:tw-bg-substack-wash":"tw-bg-transparent"]:P==="themed-secondary"?["tw-border tw-border-pub-accent tw-bg-transparent tw-text-pub-accent hover:tw-bg-pub-detail-light disabled:tw-opacity-70"]:P==="tertiary"?["tw-text-substack-secondary disabled:tw-opacity-70",b.includes(D)&&"tw-border tw-border-substack-detail tw-bg-transparent hover:tw-bg-substack-wash"]:P==="destructive"?["hover:tw-opacity-80 disabled:tw-opacity-70",b.includes(D)?" tw-bg-error tw-text-substack-bg":" tw-bg-transparent tw-text-error"]:P==="twitter"&&["hover:tw-opacity-80 disabled:tw-opacity-70",b.includes(D)?"tw-bg-twitter tw-text-substack-bg":"tw-bg-transparent tw-text-twitter"]),ref:A},C),y,L,M)}const r="tw-text-[length:inherit] tw-text-[color:inherit] tw-font-[weight:inherit]",i=["button","borderless","circle","round"],d=["button","borderless"],b=["button","circle","round"]},function($,n,t){const e=t(168);n.getStoredValue=(s,o=null)=>typeof window!="undefined"?e.get(s,o):o,n.setStoredValue=(s,o)=>{if(typeof window!="undefined")return e.set(s,o)},n.removeStoredValue=s=>{if(typeof window!="undefined")return e.remove(s)}},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s,o,...a){if(s in o){let l=o[s];return typeof l=="function"?l(...a):l}let c=new Error(`Tried to handle "${s}" but there is no handler defined. Only defined handlers are: ${Object.keys(o).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,e),c}},function($,n,t){"use strict";n.a={page:"frontend-reader2-FeedPage2-module__page--2U6wP",miniInboxItem:"frontend-reader2-FeedPage2-module__miniInboxItem--1CmaJ",newPillContainer:"frontend-reader2-FeedPage2-module__newPillContainer--gmoh9",newPill:"frontend-reader2-FeedPage2-module__newPill--2SvFZ",hidden:"frontend-reader2-FeedPage2-module__hidden--JbEhE",facepile:"frontend-reader2-FeedPage2-module__facepile--3PfFy",feedItem:"frontend-reader2-FeedPage2-module__feedItem--41oKo",feedUnit:"frontend-reader2-FeedPage2-module__feedUnit--4Aa0c",showThreadGutter:"frontend-reader2-FeedPage2-module__showThreadGutter--3sFhu",hasAvatar:"frontend-reader2-FeedPage2-module__hasAvatar--2geOI",hasAction:"frontend-reader2-FeedPage2-module__hasAction--1nAgC",seeMoreFade:"frontend-reader2-FeedPage2-module__seeMoreFade--1l54H",seeMoreText:"frontend-reader2-FeedPage2-module__seeMoreText--1Pa7w",timestamp:"frontend-reader2-FeedPage2-module__timestamp--2yMk4",metaTimestamp:"frontend-reader2-FeedPage2-module__metaTimestamp--2twYB",feedPermalinkUnit:"frontend-reader2-FeedPage2-module__feedPermalinkUnit--2Xwbk",permalinkHeader:"frontend-reader2-FeedPage2-module__permalinkHeader--2zQY2",seeMoreReplies:"frontend-reader2-FeedPage2-module__seeMoreReplies--1pge4",seeMoreThread:"frontend-reader2-FeedPage2-module__seeMoreThread--405M7",seeMoreThreadSegment:"frontend-reader2-FeedPage2-module__seeMoreThreadSegment--_CBex",top:"frontend-reader2-FeedPage2-module__top--22SI-",quoteText:"frontend-reader2-FeedPage2-module__quoteText--29juv",quote:"frontend-reader2-FeedPage2-module__quote--1cNKC",quoteBottom:"frontend-reader2-FeedPage2-module__quoteBottom--3wDuk",quoteButton:"frontend-reader2-FeedPage2-module__quoteButton--k_C8g",feedCommentBody:"frontend-reader2-FeedPage2-module__feedCommentBody--ZTYdO",feedCommentBodyInner:"frontend-reader2-FeedPage2-module__feedCommentBodyInner--1RG4U",seeMore:"frontend-reader2-FeedPage2-module__seeMore--10e8X",contextRow:"frontend-reader2-FeedPage2-module__contextRow--32Nz5",contextIcon:"frontend-reader2-FeedPage2-module__contextIcon--3q0nK",dot:"frontend-reader2-FeedPage2-module__dot--1yQ8x",post:"frontend-reader2-FeedPage2-module__post--2xYJh",postImage:"frontend-reader2-FeedPage2-module__postImage--YpHXP",linkImage:"frontend-reader2-FeedPage2-module__linkImage--2nrxu",mobile:"frontend-reader2-FeedPage2-module__mobile--3UVVr",linkImagePlaceholder:"frontend-reader2-FeedPage2-module__linkImagePlaceholder--2xkNj",actionRow:"frontend-reader2-FeedPage2-module__actionRow--2yuai",actionButton:"frontend-reader2-FeedPage2-module__actionButton--2cEPA",permalink:"frontend-reader2-FeedPage2-module__permalink--3B9Df",heart:"frontend-reader2-FeedPage2-module__heart--2cEOU",shrink:"frontend-reader2-FeedPage2-module__shrink--FMwfZ",digit:"frontend-reader2-FeedPage2-module__digit--W9qrX",like:"frontend-reader2-FeedPage2-module__like--2BSgx",active:"frontend-reader2-FeedPage2-module__active--3VWA4",reply:"frontend-reader2-FeedPage2-module__reply--3cfye",restack:"frontend-reader2-FeedPage2-module__restack--mDyet",link:"frontend-reader2-FeedPage2-module__link--1acSo",shortPostText:"frontend-reader2-FeedPage2-module__shortPostText--2WUee",large:"frontend-reader2-FeedPage2-module__large--1iLis",stat:"frontend-reader2-FeedPage2-module__stat--21hld",reportModal:"frontend-reader2-FeedPage2-module__reportModal--2Dks8",likeButton:"frontend-reader2-FeedPage2-module__likeButton--3aKPX",heartWrapper:"frontend-reader2-FeedPage2-module__heartWrapper--woI6f",clickedOnce:"frontend-reader2-FeedPage2-module__clickedOnce--1d8OC",isLiked:"frontend-reader2-FeedPage2-module__isLiked--1SkIq","heart-bounce":"frontend-reader2-FeedPage2-module__heart-bounce--xp-SL",spark:"frontend-reader2-FeedPage2-module__spark--2uENk","spark-burst":"frontend-reader2-FeedPage2-module__spark-burst--1RB8f",sparks:"frontend-reader2-FeedPage2-module__sparks--37JmW",ripple:"frontend-reader2-FeedPage2-module__ripple--3LqbM",userBadge:"frontend-reader2-FeedPage2-module__userBadge--30ZqO"}},function($,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"a",function(){return i});var e=t(0),s=t(6),o=t.n(s),a=t(8),c=t.n(a),l=t(17),p=t(81),h=t(308);t.d(n,"c",function(){return h.a});var m=Object.defineProperty,g=(d,b,w)=>b in d?m(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,v=(d,b,w)=>(g(d,typeof b!="symbol"?b+"":b,w),w);const O="active",u=.7;class r extends e.Component{constructor(b,w){super(b,w);if(v(this,"onDocumentMouseUp",E=>{!Object(a.isRootOrChild)(E.target,this.base)&&this.state.active&&!this.blockToggle&&(this.close(),this.blockToggle=!0,setTimeout(()=>{this.blockToggle=!1},0))}),v(this,"onDocumentKeyDown",E=>{E.key==="Escape"&&this.close()}),v(this,"onWindowResize",()=>{this.placeDropdown()}),v(this,"placeDropdown",()=>{var E,S;if(!this.base||this.useDrawerStyle()||this.props.noPlace){this.setState({left:null,right:null});return}const P=this.base.getBoundingClientRect(),D=P.width/(this.state.active?1:u),W=P.right+(D-P.width)/2,B=P.left-(D-P.width)/2,f=typeof window!="undefined"&&window.innerWidth;if(D>=f)return;const y=typeof window!="undefined"&&window.getComputedStyle(this.base),M=!isNaN(parseFloat(y.left))&&parseFloat(y.left),N=!isNaN(parseFloat(y.right))&&parseFloat(y.right),A=(E=this.state.originalLeft)!=null?E:y.left,L=(S=this.state.originalRight)!=null?S:y.right;typeof this.state.originalLeft=="undefined"&&this.setState({originalLeft:A}),typeof this.state.originalRight=="undefined"&&this.setState({originalRight:L}),B<0?typeof this.state.left=="number"?this.setState({left:this.state.left-B,right:null}):typeof this.state.right=="number"?this.setState({left:null,right:this.state.right+B}):typeof N=="number"?this.setState({left:null,right:N+B}):this.setState({left:(M||0)-B,right:null}):W>=f&&(typeof this.state.left=="number"?this.setState({left:this.state.left-W+f,right:null}):typeof this.state.right=="number"?this.setState({left:null,right:this.state.right+W-f}):typeof M=="number"?this.setState({left:M-W+f,right:null}):this.setState({left:null,right:(N||0)+W-f}))}),typeof window!="undefined"&&(window==null?void 0:window.matchMedia)){const E=window.matchMedia("screen and (max-width: 650px)");this.state={isMobileWidth:E.matches};const S=P=>{this.setState({isMobileWidth:P.matches})};E.addEventListener?E.addEventListener("change",S):E.addListener&&E.addListener(S)}}componentDidMount(){document.addEventListener("mouseup",this.onDocumentMouseUp),document.addEventListener("keydown",this.onDocumentKeyDown),typeof window!="undefined"&&window.addEventListener("resize",this.onWindowResize),this.placeDropdown()}componentWillUnmount(){document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("keydown",this.onDocumentKeyDown),typeof window!="undefined"&&window.removeEventListener("resize",this.onWindowResize)}open(){this.toggle({active:!0})}close(){this.toggle({active:!1})}toggle({active:b=null}={}){this.blockToggle||Object(a.stateTransaction)(this,w=>{b===null&&(b=!w.active),this.props.preventScrollBehindDrawer&&this.useDrawerStyle()&&document.documentElement.classList[b?"add":"remove"]("modal-in"),this.setState({active:b},()=>{this.props.onToggle&&this.props.onToggle({active:b})})})}isOpen(){return Boolean(this.state.active)}useDrawerStyle(){return this.props.useDrawerOnMobile&&this.state.isMobileWidth}drawerBackdropClicked(){this.props.backdropDismiss&&this.close()}render({noTail:b,attachOnActive:w,noDrawerCloseButton:E},{active:S}){const P=Object(e.toChildArray)(this.props.children),D={},W={};typeof this.state.left=="number"?(D.left=`${this.state.left}px`,D.right="unset",W.right=`calc(50% + ${this.state.left-parseFloat(this.state.originalLeft)||0}px)`):typeof this.state.right=="number"&&(D.left="unset",D.right=`${this.state.right}px`,W.right=`calc(50% - ${this.state.right-parseFloat(this.state.originalRight)||0}px)`);const B=this.useDrawerStyle();return Object(e.h)(e.Fragment,null,B&&Object(e.h)("div",{className:o()("dropdown-drawer-backdrop",{[O]:S}),onclick:()=>this.drawerBackdropClicked()}),(!w||S||B)&&Object(e.h)("ul",{className:o()("dropdown-menu",this.props.className,{[O]:S,"no-rect":this.props.noRectWhenClosed,drawer:B,tooltip:!B,"no-place":!!this.props.noPlace}),style:D},!b&&!this.useDrawerStyle()&&Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"dropdown-menu-tail",style:W}),Object(e.h)("div",{className:"dropdown-menu-tail-shadow",style:W})),Object(e.h)("div",{className:o()("dropdown-menu-wrapper",this.props.wrapperClassName)},B&&!E&&Object(e.h)(l.a,{className:"drawer-close-button",onClick:()=>this.close()},Object(e.h)(p.default,{height:24,className:"drawer-close-icon"})),this.props.noList?P:P.map(f=>Object(e.h)("li",null,f)))))}}class i extends e.Component{constructor(b){super(b);v(this,"onDocumentMouseUp",w=>{!Object(a.isRootOrChild)(w.target,this.base)&&this.state.active&&!this.blockToggle&&(this.close(),this.blockToggle=!0,setTimeout(()=>{this.blockToggle=!1},0))}),v(this,"onDocumentKeyDown",w=>{w.key==="Escape"&&this.close()}),v(this,"onWindowResize",()=>{this.placeDropdown()})}componentDidMount(){document.addEventListener("mouseup",this.onDocumentMouseUp),document.addEventListener("keydown",this.onDocumentKeyDown)}componentWillUnmount(){document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("keydown",this.onDocumentKeyDown)}open(){this.toggle({active:!0})}close(){this.toggle({active:!1})}toggle({active:b=null}={}){this.blockToggle||Object(a.stateTransaction)(this,w=>{b===null&&(b=!w.active),this.setState({active:b},()=>{this.props.onToggle&&this.props.onToggle()})})}isOpen(){return Boolean(this.state.active)}render(){const b=Object(e.toChildArray)(this.props.children);return this.props.noList?Object(e.h)("div",{className:o()("dropdown-menu tooltip",this.props.className,{[O]:this.state.active}),ref:this.props.forwardedRef},Object(e.h)("div",{className:"dropdown-menu-wrapper"},b)):Object(e.h)("ul",{className:o()("dropdown-menu tooltip",this.props.className,{[O]:this.state.active}),ref:this.props.forwardedRef},!this.props.hideMenuTail&&Object(e.h)("div",{className:"dropdown-menu-tail"}),!this.props.hideMenuTail&&Object(e.h)("div",{className:"dropdown-menu-tail-shadow"}),Object(e.h)("div",{className:"dropdown-menu-wrapper"},b.map(w=>Object(e.h)("li",null,w))))}}},function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(2),s=t(150);let o=s.a?e.useEffect:e.useLayoutEffect},,function($,n,t){var e=t(220);function s(o,a,c){var l=o==null?void 0:e(o,a);return l===void 0?c:l}$.exports=s},function($,n,t){"use strict";t.r(n),t.d(n,"getAllAudiences",function(){return O}),t.d(n,"getAudiencesForPublicListing",function(){return u}),t.d(n,"getPaidAudiences",function(){return r}),t.d(n,"getFoundingAudiences",function(){return i}),t.d(n,"isPaidAudience",function(){return d}),t.d(n,"isFoundingAudience",function(){return b}),t.d(n,"userHasFullAccessToPost",function(){return S}),t.d(n,"subHasFullAccessToPost",function(){return D}),t.d(n,"subHasFullAccessToPostAudience",function(){return W}),t.d(n,"pubRoleHasFullAccessToPost",function(){return f}),t.d(n,"pubRolesHaveFullAccessToPost",function(){return y}),t.d(n,"previewSubHasFullAccessToPost",function(){return M}),t.d(n,"getPostAuthor",function(){return N}),t.d(n,"getCommentAuthor",function(){return A}),t.d(n,"getCoverImageUrl",function(){return L});var e=Object.defineProperty,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,c=(C,R,U)=>R in C?e(C,R,{enumerable:!0,configurable:!0,writable:!0,value:U}):C[R]=U,l=(C,R)=>{for(var U in R||(R={}))o.call(R,U)&&c(C,U,R[U]);if(s)for(var U of s(R))a.call(R,U)&&c(C,U,R[U]);return C},p=(C,R)=>{var U={};for(var Z in C)o.call(C,Z)&&R.indexOf(Z)<0&&(U[Z]=C[Z]);if(C!=null&&s)for(var Z of s(C))R.indexOf(Z)<0&&a.call(C,Z)&&(U[Z]=C[Z]);return U};const h=["founding","only_paid","everyone","only_free"],m=["founding","only_paid","everyone"],g=["founding","only_paid"],v=["founding"];function O(){return[...h]}function u(){return[...m]}function r(){return[...g]}function i(){return[...v]}function d(C){return r().includes(C)}function b(C){return i().includes(C)}function w(C,R,U){if(!R&&!U||(C==null?void 0:C.subscription_publication_id)===R||(C==null?void 0:C.subscription_publication_id)===U){if((C==null?void 0:C.is_founding)||(C==null?void 0:C.is_contributor))return"founding";if(C==null?void 0:C.is_subscribed)return"paid"}return"free"}function E(C){switch(C){case"founding":return["founding"];case"only_paid":return["paid","founding"];case"only_free":return["free"];case"everyone":return["free","paid","founding"];default:throw new Error(`Unknown audience: ${C}`)}}function S(C,R,U){if(!R)return!1;if(!R.audience)throw new Error("Post has no audience");const Z=w(C,R.publication_id,U==null?void 0:U.parent_publication_id);return E(R.audience).includes(Z)}function P(C,R){if(!R||(C==null?void 0:C.publication_id)===R){if((C==null?void 0:C.membership_state)==="subscribed"&&(C==null?void 0:C.is_founding))return"founding";if((C==null?void 0:C.membership_state)==="subscribed")return"paid"}return"free"}function D(C,R){if(!R)return!1;if(!R.audience)throw new Error("Post has no audience");const U=P(C,R.publication_id);return E(R.audience).includes(U)}function W(C,R){const U=P(C);return E(R).includes(U)}function B(C){return(C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="contributor"||(C==null?void 0:C.membership_state)==="subscribed"&&(C==null?void 0:C.is_founding)?"founding":(C==null?void 0:C.membership_state)==="subscribed"?"paid":"free"}function f(C,R){if(!R)return!1;if(!R.audience)throw new Error("Post has no audience");const U=B(C);return E(R.audience).includes(U)}function y(C,R){return!!(R&&(f(C==null?void 0:C[R.publication_id],R)||R.parent_publication_id&&f(C==null?void 0:C[R.parent_publication_id],R)))}function M(C,R){if(!R)return!1;if(!R.audience)throw new Error("Post has no audience");const U=C;return E(R.audience).includes(U)}function N(C,R){var U;const Z=(U=R==null?void 0:R.publishedBylines)==null?void 0:U[0];if(Z)return Z;const F=C.contributors.find(G=>G.owner);if(F){const G=F,{user_id:V}=G,k=p(G,["user_id"]);return l({id:V},k)}const z=C.contributors.find(G=>["admin","contributor"].includes(G.role));if(z){const G=z,{user_id:V}=G,k=p(G,["user_id"]);return l({id:V},k)}return{id:C.author_id,name:C.author_name,photo_url:C.author_photo_url,bio:C.author_bio}}function A(C){var R,U,Z;return{id:(R=C.user_id)!=null?R:-1,name:(U=C.name)!=null?U:"",photo_url:C.photo_url,bestseller_tier:(Z=C.user_bestseller_tier)!=null?Z:null,primary_publication:C.user_primary_publication}}function L(C){return!C.cover_image||/12634ced-0eb6-4238-a94a-70ab242c5ad8/.test(C.cover_image)||/fa15c776-f514-42fe-8ee0-4c94148a0a8a/.test(C.cover_image)||/8826edac-0d50-4ba0-b861-f3ed9336878b/.test(C.cover_image)||/49be2356-6491-4a6f-84a5-15e99d23b6d1/.test(C.cover_image)?null:C.cover_image}},function($,n){n.isMultiPub=a=>a?a.child_publications&&a.child_publications.length>0:!1,n.isSectionedPub=a=>{var c;return!!(a==null?void 0:a.sections)&&((c=a.sections)==null?void 0:c.length)>0},n.canAddSections=a=>{var c;return!(!a||((c=a.child_publications)==null?void 0:c.length)||a.parent_publication_id||a.parent_publication)},n.canEditNavigationBar=a=>{var c;return!(!a||((c=a.child_publications)==null?void 0:c.length)||a.parent_publication_id||a.parent_publication)},n.hasMultiplePodcasts=a=>t(a)>1;const t=a=>{let c=[];return n.isMultiPub(a)&&(c=n.getMultiPubChildPodcasts(a)),n.isSectionedPub(a)&&(c=n.getSectionPodcasts(a)),(a.podcast_enabled?1:0)+c.length};n.hasPodcast=a=>t(a)>0,n.hasOnePodcast=a=>t(a)===1,n.getMultiPubChildPodcasts=a=>n.isMultiPub(a)?a.child_publications.filter(c=>c.type==="podcast"):[],n.getSectionPodcasts=a=>n.isSectionedPub(a)?a.sections.filter(c=>c.is_podcast):[];const e=a=>a&&!a.includes("substack");n.pubCouldHavePublicPodcastUrl=a=>e(a.podcast_feed_url),n.sectionCouldHavePublicPodcastUrl=a=>{var c;return e((c=a.podcastSettings)==null?void 0:c.podcast_feed_url)},n.userCouldSeePublicPodcastUrls=a=>{if(n.pubCouldHavePublicPodcastUrl(a))return!0;if(n.hasMultiplePodcasts(a)){if(n.isMultiPub(a)){const c=n.getMultiPubChildPodcasts(a);for(const l of c)if(n.pubCouldHavePublicPodcastUrl(l))return!0}if(n.isSectionedPub(a)){const c=n.getSectionPodcasts(a);for(const l of c)if(n.sectionCouldHavePublicPodcastUrl(l))return!0}}return!1},n.userCouldSubscribeToPodcast=(a,c)=>c?n.isMultiPub(c)?!0:!n.hasPodcast(c)||c.hide_podcast_feed_link?!1:c.has_free_podcast?!0:c.has_subscriber_only_podcast?n.userIsPaidSubscriber(a):!1:!1,n.userIsFreeOnly=a=>a?!!(a.is_free_subscribed&&!a.is_subscribed):!1,n.userIsPaidSubscriber=a=>a?!!a.is_subscribed:!1,n.paymentsAreEnabled=a=>a?a.payments_state==="enabled":!1;const s=(a,{usePreview:c=!1,useDraft:l=!1}={})=>{switch(a==null?void 0:a.type){case"newsletter":return l?a.draftVoiceoverUpload:a.voiceoverUpload;case"podcast":return c?l?a.draftPodcastPreviewUpload:a.podcastPreviewUpload:l?a.draftPodcastUpload:a.podcastUpload;case"video":return l?a.draftVideoUpload:a.videoUpload;default:return null}};n.getMediaDuration=(a,{usePreview:c=!1,useDraft:l=!1}={})=>{var p;const h=s(a,{usePreview:c,useDraft:l});if(h)return(p=h.duration)!=null?p:null;if((a==null?void 0:a.type)==="podcast"&&!c){const m=l?a.draft_podcast_duration:a.podcast_duration;return m!=null?m:null}return null},n.getMediaFileSize=(a,{usePreview:c=!1,useDraft:l=!1}={})=>{var p,h;const m=s(a,{usePreview:c,useDraft:l});return m?(p=m.primary_file_size)!=null?p:null:(a==null?void 0:a.type)==="podcast"&&!c&&!l&&(h=a.legacy_podcast_file_size)!=null?h:null},n.podcastPostIsFreePreview=a=>!a||a.type!=="podcast"||!a.podcastUpload?!1:!!a.podcastUpload.is_free_preview,n.hasPodcastPreview=a=>!!a&&!!a.podcast_preview_upload_id,n.getLogo=a=>{var c;return a.logo_url||a.cover_photo_url||a.author_photo_url||((c=a.author)==null?void 0:c.photo_url)},n.getFoundingTierPlan=a=>{var c;return Array.isArray(a==null?void 0:a.plans)&&(c=a.plans.find(l=>{var p;return((p=l.metadata)==null?void 0:p.founding)==="yes"}))!=null?c:null},n.getFoundingTierName=a=>{var c,l;const p=n.getFoundingTierPlan(a);return(l=(c=p==null?void 0:p.metadata)==null?void 0:c.short_description)!=null?l:null},n.mediaUploadHasProblem=a=>!a||!a.state?!1:a.state==="error"||a.state==="cancelled",n.getPaidOrFoundingTierNameForPost=(a,c)=>(c==null?void 0:c.audience)==="founding"&&n.getFoundingTierName(a)||"paid",n.hasVoiceover=a=>!!a&&!!a.voiceover_upload_id,n.canSyndicateVoiceoverDraft=(a,c)=>!a||!c||!n.hasPodcast(a)?!1:!!c.draft_voiceover_upload_id;const o=/\/images\/[-0-9a-fA-F]+_(\d+)x(\d+)(\.png)?$/i;n.getAspectRatioFromBucketeerUrl=a=>{const c=a.match(o);return c?parseInt(c[1])/parseInt(c[2]):null},n.isBulwarkPub=(a,{checkParent:c=!0}={})=>{var l;return c&&a.subdomain==="thebulwark"||((l=a.parent_publication)==null?void 0:l.subdomain)==="thebulwark"}},function($,n,t){"use strict";t.d(n,"b",function(){return V}),t.d(n,"c",function(){return he}),t.d(n,"a",function(){return pe});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(196),l=t(2),p=t(11),h=t.n(p),m=t(92),g=t.n(m),v=t(3),O=t.n(v),u=t(16),r=t(89),i=t(9),d=t.n(i),b=t(45),w=t(38),E=t(7),S=t(297),P=t(14),D=t(4),W=t(201),B=t(10),f=t(71),y=t(74),M=t(170),N=t(538),A=t(93),L=Object.defineProperty,C=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,Z=(ne,X,q)=>X in ne?L(ne,X,{enumerable:!0,configurable:!0,writable:!0,value:q}):ne[X]=q,F=(ne,X)=>{for(var q in X||(X={}))R.call(X,q)&&Z(ne,q,X[q]);if(C)for(var q of C(X))U.call(X,q)&&Z(ne,q,X[q]);return ne};const z=3,G=1;function V(ne){var X,q,Ne,Qe,Ze,tt,Ft;const{loading:Lt,refetch:rn,viewerProfile:ht,subjectProfile:je}=ae(((X=ne.subject)==null?void 0:X.author_id)||((q=ne.subject)==null?void 0:q.user_id)||((Ne=ne.subject)==null?void 0:Ne.id),(Qe=ne.subject)==null?void 0:Qe.name),Le=ne.subject&&ht&&((Ze=ne.subject)==null?void 0:Ze.id)===ht.id,rt=((tt=je==null?void 0:je.publicationUsers)==null?void 0:tt.length)>0;return Object(l.useEffect)(()=>{var Pe;!Lt&&je&&Object(E.i)(E.a.ACCOUNT_CARD_SHOWN,{profile_user_id:(Pe=ne.subject)==null?void 0:Pe.id,is_self:!!Le,has_publication:!!rt})},[Lt,je,Le,rt,(Ft=ne.subject)==null?void 0:Ft.id]),Object(r.isMobile)()?ne.children:Object(e.h)(W.a,F({className:a()("profile-hover-card-target",A.a.profileHoverCardTarget),layerClassName:A.a.profileHoverCard,loading:Lt,onOpen:rn,hideOnScroll:!0,layerOptions:{placement:"right-center"},content:je&&Object(e.h)(pe,{profile:je,subject:ne.subject,viewerSubscriptions:me(ht),utmSource:ne.utmSource})},ne))}const k=new Map;let K=null;function Y(){K=null,k.clear()}const ee="account-card";function ae(ne,X){const q=Object(w.c)(),[Ne,Qe]=Object(s.k)(null),[Ze,tt]=Object(s.k)(null),[Ft,Lt]=Object(s.k)(!1),rn=Object(s.a)(()=>{if(Lt(!0),!K)if(q){const ht=Object(m.cleanSlug)(q.name,{hashIfEmpty:!0});K=h.a.get(`/api/v1/user/${q.id}-${ht}/public_profile/self`).then(je=>je.body)}else K=Promise.resolve(null);if(!k.has(ne)){const ht=Object(m.cleanSlug)(X,{hashIfEmpty:!0});k.set(ne,h.a.get(`/api/v1/user/${ne}-${ht}/public_profile`).then(je=>je.body))}Promise.all([K,k.get(ne)]).then(([ht,je])=>{Qe(ht),tt(je),Lt(!1)})},[Qe,Lt,tt,ne,X,q]);return{loading:Ft,viewerProfile:Ne,subjectProfile:Ze,refetch:rn}}function he(ne){k.delete(ne)}function me(ne){if(!ne)return new Set;let X=(ne.subscriptions||[]).filter(q=>!!q).map(q=>q.publication.id);return ne.publicationUsers&&(X=X.concat(ne.publicationUsers.filter(q=>q).map(q=>q.publication.id))),new Set(X)}function Ye(ne){let X=[];ne&&ne.subscriptions&&(X=Object(i.sortSubscriptions)(ne.subscriptions.filter(Ne=>!!Ne)));let q=null;return X.length>z&&(q=`See all (${Object(i.numberToString)(X.length)})`),X=X.slice(0,z),{subscriptions:X,moreSubsLabel:q}}function se(ne){let X=[];ne&&ne.publicationUsers&&(X=ne.publicationUsers.filter(Ne=>!!Ne),X=X&&Object(S.b)(X));let q=null;return X.length>G&&(q=`See all (${Object(i.numberToString)(X.length)})`),X=X.slice(0,G),{publications:X,morePubsLabel:q}}function ie(ne,X){var q;if(!ne||!X)return null;const Ne=(q=Object(S.b)(ne.publicationUsers.filter(Boolean))[0])==null?void 0:q.publication;return!Ne||X.has(Ne.id)?null:Ne}function Ee({pub:ne,isWrites:X,isFounding:q,isPaid:Ne,utmSource:Qe}){const Ze=Object(v.getPubUrl)(ne,{params:{utm_source:Qe||ee,utm_content:X?"writes":"reads"},signedIn:!!Object(w.c)()});return Object(e.h)("a",{href:Ze,target:"_blank",onClick:()=>{Object(E.i)(X?E.a.ACCOUNT_CARD_WRITES_LINK_CLICKED:E.a.ACCOUNT_CARD_READS_LINK_CLICKED),Object(E.l)(ne,"hover_profile")},className:A.a.hoverCardAvatar},Object(e.h)(y.a,{pub:ne,size:32,badgeType:q?"founder":Ne?"subscribed":null}),Object(e.h)(B.b,{font:"text",weight:"semibold",size:14,lineHeight:20,title:ne.name},ne.name))}function Oe({subject:ne,subscriptions:X,moreSubsLabel:q,utmSource:Ne}){return Object(e.h)(D.b,null,Object(e.h)(M.a,{sectionTitle:"Reads",seeAllLabel:q,link:$e(ne,{utmSource:Ne})}),Object(e.h)(D.b,null,X.map(Qe=>Object(e.h)(Ee,{pub:Qe.publication,isPaid:Qe.membership_state==="subscribed",isFounding:Qe.is_founding,utmSource:Ne}))))}function ce({subject:ne,publications:X,morePubsLabel:q,utmSource:Ne}){return Object(e.h)(D.b,null,Object(e.h)(M.a,{sectionTitle:"Writes",seeAllLabel:q,link:$e(ne,{utmSource:Ne})}),Object(e.h)(D.b,null,X.map(Qe=>Object(e.h)(Ee,{pub:Qe.publication,isWrites:!0,utmSource:Ne}))))}function ue({pub:ne,user:X,utmSource:q}){const Ne=ne?Object(v.getSubscribeUrl)(ne,{user:X,addBase:!0,utm_source:q||ee,utm_content:"subscribes",next:document.location.href}):null,Ze=Object(i.getSubscribeText)(ne)==="Subscribed";return ne&&(Ze?Object(e.h)(P.a,{priority:"secondary",fill:"outline",href:Ne,leftIcon:Object(e.h)(c.a,null),onClick:()=>{Object(E.i)(E.a.ACCOUNT_CARD_SUBSCRIBE_CLICKED),Object(E.l)(ne,"hover_profile")},title:ne.name},"Subscribed"):Object(e.h)(P.a,{priority:"primary",href:Ne,onClick:()=>{Object(E.i)(E.a.ACCOUNT_CARD_SUBSCRIBE_CLICKED),Object(E.l)(ne,"hover_profile")},title:ne.name},"Subscribe"))}function pe({profile:ne,subject:X,viewerSubscriptions:q,themed:Ne,className:Qe,utmSource:Ze,hideSubscribeButtons:tt}){const{getConfigFor:Ft}=Object(b.c)(),Lt=Object(w.c)();if(!ne)return null;const{subscriptions:rn,moreSubsLabel:ht}=Ye(ne),{publications:je,morePubsLabel:Le}=se(ne),rt=$e(X,{utmSource:Ze}),Pe=(X==null?void 0:X.name)||"",de=ie(ne,q),be=X&&X.id===(Lt==null?void 0:Lt.id),Ie=be&&ne&&!ne.profile_set_up_at,ke=je.length>0&&!Ie,Te=rn.length>0&&!Ie,x=je.length>0||ne.hasHiddenPublicationUsers,H=!tt&&!x&&!be&&Ft("enable_presubscriptions"),le=Lt?null:()=>{window.location.href=Object(v.getSigninUrl)({redirect:`${window.location.href}`})};return Object(e.h)("div",{className:Qe},Object(e.h)(D.b,null,Object(e.h)(D.c,{padding:8},Object(e.h)("a",{href:rt},Object(e.h)(f.a,{user:X,size:64,alt:Pe}))),Object(e.h)(D.b,{padding:8,gap:6},Object(e.h)(M.b,{themed:Ne,title:Pe,blurb:ne.bio,url:rt,userId:X.id,bestsellerTier:ne.bestseller_tier})),de&&!be&&!tt&&Object(e.h)(D.b,{padding:8},Object(e.h)(ue,{pub:de,user:Lt,subject:X,utmSource:Ze})),H&&Object(e.h)(D.b,{padding:8},Object(e.h)(N.a,{profile:ne,requireLogin:le,source:{type:"card",utmSource:Ze}})),Ie?Object(e.h)(D.b,{padding:8},Object(e.h)(P.a,{priority:"secondary",fill:"outline",href:Object(v.getProfileSetupUrl)({utm_source:Ze||ee})},"Set up your profile")):Object(e.h)(D.b,{paddingX:8,paddingBottom:8},Object(e.h)(P.a,{priority:"secondary",fill:"outline",href:rt,onClick:()=>{Object(E.i)(E.a.ACCOUNT_CARD_VIEW_PROFILE_LINK_CLICKED,{utm_source:Ze||ee})},title:Pe},"View profile")),ke&&Object(e.h)(e.Fragment,null,Object(e.h)(D.c,{padding:8},Object(e.h)("div",{className:A.a.hoverCardDivider})),Object(e.h)(ce,{subject:X,publications:je,morePubsLabel:Le,utmSource:Ze})),Te&&Object(e.h)(e.Fragment,null,Object(e.h)(D.c,{padding:8},Object(e.h)("div",{className:A.a.hoverCardDivider})),Object(e.h)(Oe,{subject:X,subscriptions:rn,moreSubsLabel:ht,utmSource:Ze}))))}function $e(ne,{utmSource:X}={}){return Object(v.getReaderProfileUrl)(ne,{noBase:typeof window!="undefined"&&window.location.href.startsWith(Object(u.getSubstackUrl)()),utm_source:X||ee})}},function($,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return c});var e=t(2),s=t(40);let o=Symbol();function a(l,p=!0){return Object.assign(l,{[o]:p})}function c(...l){let p=Object(e.useRef)(l);Object(e.useEffect)(()=>{p.current=l},[l]);let h=Object(s.a)(m=>{for(let g of p.current)g!=null&&(typeof g=="function"?g(m):g.current=m)});return l.every(m=>m==null||(m==null?void 0:m[o]))?void 0:h}},,,function($,n,t){"use strict";var e=t(0),s=t(6),o=t.n(s),a=t(3),c=t.n(a),l=t(9),p=t.n(l),h=t(72);function m({href:v,linkify:O,children:u,openInNewTab:r}){return O?r?Object(e.h)("a",{href:v,target:"_blank"},u):Object(e.h)("a",{href:v,native:!0},u):u}const g=({pub:v,href:O="",logo_url:u,showHover:r=!1,byline:i=null,proof:d=null,size:b=196,linkify:w=!0,title:E=null,className:S="",noMargin:P=!1,openInNewTab:D=!1,isStatic:W=!1,belowTheFold:B=!1})=>{var f;return Object(e.h)("div",{className:o()("pub-icon",!P&&"pub-icon-margin",S),title:E},r&&Object(e.h)("div",{className:"logo-hover"},Object(e.h)("div",{className:"logo-hover-title"},Object(e.h)("a",{href:O||v.base_url,native:!0},(v.name||v.subdomain)+(i?` by ${i}`:""))),Object(e.h)("div",{className:"logo-hover-proof"},d),Object(e.h)("div",{className:"logo-hover-description"},v.hero_text)),Object(e.h)(m,{href:O||v.base_url,linkify:w,openInNewTab:D},u?W?Object(e.h)("img",{src:Object(a.cloudinary)(u,b*2,{height:b*2,crop:"fill"}),width:b,height:b,className:"custom",alt:v.name}):Object(e.h)(h.a,{className:"custom",alt:v.name,imageProps:{height:b*2,crop:"fill"},maxWidth:b*2,src:u,width:b,height:b,loading:B?"lazy":null}):Object(e.h)("span",{className:"placeholder",style:v.theme_var_background_pop?`border-color:${Object(l.colorLightness)(v.theme_var_background_pop,.7)} ${v.theme_var_background_pop} ${v.theme_var_background_pop} ${Object(l.colorLightness)(v.theme_var_background_pop,.7)}`:""},(f=v.name||v.subdomain)==null?void 0:f[0])))};n.a=g},,,function($,n){$.exports={substack_color:"#FF6719",subscriber_green:"#318631",lifetime_lavender:"#792BA9",comped_salmon:"#E07F69",gifted_ocean:"#8BD1E0",free_trial_yellow:"#F7ED92",new_paid_cerulean:"#39a5f7",upgrades_teal:"#008080",downgrades_red:"#E06666",expirations_orange:"#FFB347",chart_line_color:"#444444",chart_grid_color:"#F4F4F4",chart_axis_label_color:"#AAAAAA",share_button_size_px:18,tweet_icon_size_px:48}},function($,n,t){"use strict";t.d(n,"c",function(){return b}),t.d(n,"f",function(){return S}),t.d(n,"a",function(){return P}),t.d(n,"b",function(){return D}),t.d(n,"d",function(){return W}),t.d(n,"e",function(){return B});var e=t(0),s=t(2),o=t(1),a=t(11),c=t.n(a),l=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(f,y,M)=>y in f?l(f,y,{enumerable:!0,configurable:!0,writable:!0,value:M}):f[y]=M,u=(f,y)=>{for(var M in y||(y={}))g.call(y,M)&&O(f,M,y[M]);if(m)for(var M of m(y))v.call(y,M)&&O(f,M,y[M]);return f},r=(f,y)=>p(f,h(y)),i=(f,y,M)=>new Promise((N,A)=>{var L=U=>{try{R(M.next(U))}catch(Z){A(Z)}},C=U=>{try{R(M.throw(U))}catch(Z){A(Z)}},R=U=>U.done?N(U.value):Promise.resolve(U.value).then(L,C);R((M=M.apply(f,y)).next())}),d;const b={variantOverrides:{},experimentFeatures:{},experimentExposures:{}},w=typeof window!="undefined"&&window._preloads||b,E=typeof window!="undefined"?(d=window._preloads)==null?void 0:d.siteConfigs:{},S=(f,y)=>{const M=C=>{if(!C||!f)return null;const R=f[C];return R===void 0?null:R},N=C=>{if(!C)return null;const R=M(C);if(R&&typeof R=="string"&&R!=="experiment")return{intendedVariant:R,shouldLog:!1};if(y.variantOverrides&&C in y.variantOverrides)return{intendedVariant:y.variantOverrides[C],shouldLog:!1};const U=y.experimentExposures||{};if(U[C])return{intendedVariant:U[C],shouldLog:!1};const Z=y.experimentFeatures||{};return Z[C]?{intendedVariant:Z[C],shouldLog:!0}:null};return{getExperimentVariant:C=>{const R=N(C);return R?R.intendedVariant:null},exposeExperiment:C=>i(void 0,null,function*(){const{intendedVariant:R,shouldLog:U}=N(C)||{};if(!U)return!1;if(typeof window!="undefined"){window._preloads.experimentExposures=window._preloads.experimentExposures||{};const Z=window._preloads.experimentExposures;Z[C]=R;try{yield c.a.post("/api/v1/experiment_exposure").send({experiment_name:C,variant_name:R})}catch(F){delete Z[C]}}return!0})}},P=Object(e.createContext)(S(E,w));P.displayName="ExperimentsContext";function D({siteConfigs:f={},experimentInfo:y,children:M}){const N=y||w,A=Object(o.h)(()=>S(f,N),[f,...Object.values(N)]);return Object(e.h)(P.Provider,{value:A},M)}function W(){return Object(o.b)(P)}const B=f=>{const y=Object(s.forwardRef)((M,N)=>{const A=W();return Object(e.h)(f,r(u(u({},A),M),{ref:N}))});return y.displayName=`withExperimentsContext(${f.displayName||f.name||"Anonymous"})`,y}},function($,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"c",function(){return r}),t.d(n,"b",function(){return i});var e=t(0),s=t(6),o=t.n(s),a=t(17),c=t(42),l=Object.defineProperty,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(d,b,w)=>b in d?l(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,v=(d,b)=>{for(var w in b||(b={}))h.call(b,w)&&g(d,w,b[w]);if(p)for(var w of p(b))m.call(b,w)&&g(d,w,b[w]);return d},O=(d,b)=>{var w={};for(var E in d)h.call(d,E)&&b.indexOf(E)<0&&(w[E]=d[E]);if(d!=null&&p)for(var E of p(d))b.indexOf(E)<0&&m.call(d,E)&&(w[E]=d[E]);return w};function u(d){var b=d,{className:w,variant:E,rounded:S,look:P="button",fixedHeight:D=!0,size:W="medium",hasLeftIcon:B,hasRightIcon:f,forwardedRef:y}=b,M=O(b,["className","variant","rounded","look","fixedHeight","size","hasLeftIcon","hasRightIcon","forwardedRef"]);return Object(e.h)(a.a,v({className:o()("reader2-button",w,`reader2-button-${P}`,D&&"fixedHeight",E&&(["text","borderless"].includes(P)?`reader2-button-text-${E}`:`reader2-button-${E}`),(S||P==="circle")&&"reader2-button-rounded",`reader2-button-${W}`,B&&"hasLeftIcon",f&&"hasRightIcon"),ref:y},M))}function r(d){var b=d,{isActive:w=!1,isSmall:E=!1}=b,S=O(b,["isActive","isSmall"]);return Object(e.h)("button",v({className:o()("reader2-button-reset reader2-tab",w&&"active",E&&"small")},S))}const i=Object(c.a)("reader2-button-row")},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},e(s)}},function($,n,t){"use strict";t.d(n,"a",function(){return p});var e=t(0),s=t(6),o=t.n(s),a=t(3),c=t(22),l={reader2Avatar:"frontend-reader2-Avatar-module__reader2Avatar--3bg03"};function p({user:h,size:m,className:g}){const v=Object(a.getUserPhotoUrl)(h);return v?Object(e.h)(c.a,{className:o()(l.reader2Avatar,g),src:v,size:m}):null}},function($,n,t){"use strict";t.d(n,"a",function(){return b});var e=t(0),s=t(6),o=t.n(s),a=t(3),c=t(16),l={img:"frontend-components-responsive_img-module__img--1l4UG"},p=Object.defineProperty,h=Object.defineProperties,m=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,u=(w,E,S)=>E in w?p(w,E,{enumerable:!0,configurable:!0,writable:!0,value:S}):w[E]=S,r=(w,E)=>{for(var S in E||(E={}))v.call(E,S)&&u(w,S,E[S]);if(g)for(var S of g(E))O.call(E,S)&&u(w,S,E[S]);return w},i=(w,E)=>h(w,m(E)),d=(w,E)=>{var S={};for(var P in w)v.call(w,P)&&E.indexOf(P)<0&&(S[P]=w[P]);if(w!=null&&g)for(var P of g(w))E.indexOf(P)<0&&O.call(w,P)&&(S[P]=w[P]);return S};function b(w){var E=w,{src:S,maxWidth:P,imageProps:D={},alt:W="",className:B}=E,f=d(E,["src","maxWidth","imageProps","alt","className"]);const y=A=>{if(D==null?void 0:D.height){const L=P/D.height;return{height:Math.floor(A/L),aspect:null}}return{}},M=a.WEB_RESPONSIVE_IMAGE_WIDTHS.map(A=>({width:A,src:Object(c.cloudinary)(S,A,r(r({},D),y(A)))})).filter(A=>A.width<=P),N=a.WEB_RESPONSIVE_IMAGE_WIDTHS.map(A=>({width:A,src:Object(c.cloudinary)(S,A,i(r(r({},D),y(A)),{format:"webp"}))})).filter(A=>A.width<=P);return Object(e.h)("picture",null,N.length>0?Object(e.h)("source",{type:"image/webp",srcset:N.map(A=>`${A.src} ${A.width}w`).join(", "),sizes:"100vw"}):Object(e.h)("source",{type:"image/webp",srcset:Object(c.cloudinary)(S,P,i(r({},D),{format:"webp"}))}),Object(e.h)("img",i(r({className:o()(l.img,B),src:Object(c.cloudinary)(S,P,D),sizes:"100vw",alt:W,srcset:M.map(A=>`${A.src} ${A.width}w`).join(", ")},f),{width:P,height:D==null?void 0:D.height})))}},function($,n){var t=Array.isArray;$.exports=t},function($,n,t){"use strict";t.d(n,"a",function(){return h});var e=t(0),s=t(6),o=t.n(s),a=t(59),c=t(568),l=t(245),p={root:"frontend-reader2-PubIcon-module__root--1N6Qk",custom:"frontend-reader2-PubIcon-module__custom--18GGc",hello:"frontend-reader2-PubIcon-module__hello--30PQZ",placeholder:"frontend-reader2-PubIcon-module__placeholder--VwKmQ"};function h({pub:m,logoUrl:g,publicationName:v,size:O=196,title:u,className:r,badgeType:i}){var d;return m&&!g&&(g=Object(a.getLogo)(m)),m&&!v&&(v=m.name||m.subdomain),Object(e.h)("div",{className:o()(p.root,r),title:u,style:{width:O,height:O}},g?Object(e.h)(l.a,{className:p.custom,src:g,size:O,alt:v}):Object(e.h)("span",{className:p.placeholder,style:{width:O,height:O,backgroundColor:m&&(m.is_www===!0?null:((d=m==null?void 0:m.theme)==null?void 0:d.background_pop_color)||(m==null?void 0:m.theme_var_background_pop)||null),color:null}},v==null?void 0:v[0]),i&&Object(e.h)(c.ReaderBadgeIcon,{className:"reader2-pub-badge",type:i,accentColor:m&&(m.is_www===!0?null:m.theme_var_background_pop)}))}},function($,n,t){"use strict";t.d(n,"a",function(){return d}),t.d(n,"d",function(){return b}),t.d(n,"b",function(){return w}),t.d(n,"c",function(){return E});var e=t(0),s=t(2),o=t(1),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(S,P,D)=>P in S?a(S,P,{enumerable:!0,configurable:!0,writable:!0,value:D}):S[P]=D,v=(S,P)=>{for(var D in P||(P={}))h.call(P,D)&&g(S,D,P[D]);if(p)for(var D of p(P))m.call(P,D)&&g(S,D,P[D]);return S},O=(S,P)=>c(S,l(P)),u;const r=typeof window!="undefined"?(u=window._preloads)==null?void 0:u.publicationSettings:{},i=S=>({getSettingFor:D=>{if(!D||!S)return null;const W=S[D];return W===void 0?null:W}}),d=Object(e.createContext)(i(r));d.displayName="PublicationSettingsContext";const b=S=>{const P=Object(s.forwardRef)((D,W)=>{const B=E();return Object(e.h)(S,O(v(v({},B),D),{ref:W}))});return P.displayName=`withPubSettingsContext(${S.displayName||S.name||"Anonymous"})`,P};function w({settings:S={},children:P}){const D=Object(o.h)(()=>i(S),[S]);return Object(e.h)(d.Provider,{value:D},P)}function E(){return Object(o.b)(d)}},function($,n,t){"use strict";t.d(n,"c",function(){return Ot}),t.d(n,"b",function(){return _e}),t.d(n,"m",function(){return fe}),t.d(n,"a",function(){return Tt}),t.d(n,"n",function(){return Ut}),t.d(n,"o",function(){return qt}),t.d(n,"h",function(){return sn}),t.d(n,"p",function(){return _n}),t.d(n,"f",function(){return jr}),t.d(n,"i",function(){return wt}),t.d(n,"j",function(){return mt}),t.d(n,"k",function(){return Fe}),t.d(n,"l",function(){return pt}),t.d(n,"g",function(){return Dt}),t.d(n,"d",function(){return Gt}),t.d(n,"e",function(){return mn});var e=t(0),s=t(2),o=t(1),a=t(6),c=t.n(a),l=t(156),p=t.n(l),h=t(273),m=t.n(h),g=t(812),v=t(784),O=t(647),u=t(820),r=t(644),i=t(821),d=t(809),b=t(11),w=t.n(b),E=t(33),S=t(15),P=t.n(S),D=t(58),W=t(3),B=t(16),f=t(9),y=t(146),M=t(45),N=t(211),A=t(31),L=t(7),C=t(21),R=t(337),U=t(288),Z=t(8),F=t(14),z=t(4),G=t(35),V=t(10),k=t(26),K=t(328),Y=t(357),ee=t(54),ae=t(409),he=t(344),me=t(155),Ye=t(120),se=t(208),ie=t(293),Ee=t(158),Oe=t(345),ce=t(238),ue=t(253),pe=t(60),$e=t(134),ne=t(68),X=t(36),q=t(264),Ne=t(64),Qe=t(160),Ze={textarea:"frontend-components-restack_modal-module__textarea--26C0e",postPreview:"frontend-components-restack_modal-module__postPreview--2tKF_",pubIcon:"frontend-components-restack_modal-module__pubIcon--1OnOs",modalWrap:"frontend-components-restack_modal-module__modalWrap--2cdPQ",select:"frontend-components-restack_modal-module__select--6RbuS"},tt=Object.defineProperty,Ft=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,ht=(At,Xt,en)=>Xt in At?tt(At,Xt,{enumerable:!0,configurable:!0,writable:!0,value:en}):At[Xt]=en,je=(At,Xt)=>{for(var en in Xt||(Xt={}))Lt.call(Xt,en)&&ht(At,en,Xt[en]);if(Ft)for(var en of Ft(Xt))rn.call(Xt,en)&&ht(At,en,Xt[en]);return At},Le=(At,Xt,en)=>new Promise(($n,Xn)=>{var Yn=zt=>{try{nr(en.next(zt))}catch(Kt){Xn(Kt)}},Sn=zt=>{try{nr(en.throw(zt))}catch(Kt){Xn(Kt)}},nr=zt=>zt.done?$n(zt.value):Promise.resolve(zt.value).then(Yn,Sn);nr((en=en.apply(At,Xt)).next())});const rt={AUDIENCE_SELECTION:"AUDIENCE_SELECTION",PREAMBLE:"PREAMBLE"},Pe={everyone:"Everyone",only_paid:"Paid subscribers",founding:"Founding members"},de={everyone:"Send via email to all subscribers",only_paid:"Send via email to all paid subscribers",founding:"Send via email to all founding members"},be=({pub:At,post:Xt,user:en,open:$n,setOpen:Xn})=>{const[Yn,Sn]=Object(o.k)(null),[nr,zt]=Object(o.k)(""),[Kt,$t]=Object(o.k)(!1),[et,Wt]=Object(o.k)(!0),[Vt,cn]=Object(o.k)(rt.PREAMBLE),[Tn,pn]=Object(o.k)(null),[Gn,hr]=Object(o.k)(null),[Rn,pr]=Object(o.k)(""),{exposeExperiment:zn,getExperimentVariant:Ar}=Object(ne.d)(),Rr=Yn==null?void 0:Yn.find(br=>br.id===Tn),ir=Object(k.e)();Object(o.d)(()=>{$n&&!Yn&&et&&(()=>Le(void 0,null,function*(){var Br;try{const Nr=yield w.a.get("/api/v1/restack/restackable-pubs"),lo=((Br=Nr==null?void 0:Nr.body)==null?void 0:Br.publications)||[];Sn(lo),Wt(!1),lo.length>0&&(pn(lo[0].id),hr("everyone"))}catch(Nr){console.error("Failed to load user profile for restacking: ",Nr)}}))()},[$n,en,et,Wt,Yn,Sn]),Object(o.d)(()=>{$n&&Yn&&Yn.length===0&&!et&&Object(Z.redirect)(Object(W.getStartPublishingUrl)())},[$n,Yn,et]);const Sr=(br,Br)=>{Xn(!$n),cn(rt.PREAMBLE),pr(null),Wt(!1),Br&&(zt(""),Object(L.i)(L.a.RESTACK_POST_SUBMITTED,{restacked_publication_id:At.id,restacked_post_id:Xt.id,restacking_user_id:en.id,restacking_publication_id:Rr.id,restacking_blurb:nr}),ir.popToast(Nr=>Object(e.h)(k.c,je({text:"This post was cross-posted to your subscribers"},Nr)))),Object(L.i)(L.a.CROSS_POST_MODAL_CLOSED,{didRestack:Br})},Pr=()=>Le(void 0,null,function*(){Object(L.i)(L.a.CROSS_POST_MODAL_SUBMIT_CLICKED),Wt(!0);try{yield w.a.post(`/api/v1/restack/${Xt.id}`).send({audience:Gn,restackingPubId:Rr.id,introText:nr}),Object(L.i)(L.a.CROSS_POST_MODAL_SUBMITTED),Sr({},!0);return}catch(br){if(Object(L.i)(L.a.CROSS_POST_MODAL_SUBMIT_FAILED),br instanceof TypeError)throw pr("An unknown error ocurred. This post was not recommended."),Wt(!1),br;pr("This post could not be recommended."),Wt(!1)}});Vt===rt.PREAMBLE&&$n&&zn("cross_posting_modal_intro_copy");const yr=Ar("cross_posting_modal_intro_copy")==="treatment";return Object(e.h)(X.a,{isOpen:$n,onClose:Sr},Object(e.h)(X.d,{includeClose:!0,onClose:Sr,title:"Cross-post to your Substack"}),Object(e.h)("div",{"data-testid":"modal-ref-id",className:Ze.modalWrap},Vt===rt.PREAMBLE?Object(e.h)(z.b,{gap:24},Object(e.h)(z.b,{gap:16,paddingTop:yr?0:12},yr&&Object(e.h)(V.b.B3,null,"Send this post by email to your subscribers, with your message at the top."," ",Object(e.h)("a",{target:"_blank",href:"https://support.substack.com/hc/en-us/articles/10522003894932-How-can-I-share-another-publication-s-post-with-my-subscribers-"},"Learn more")),Object(e.h)("textarea",je({className:Ze.textarea,placeholder:"Say why this post is worth reading...",onChange:br=>{Kt||($t(!0),Object(L.i)(L.a.CROSS_POST_MODAL_TYPING_STARTED)),zt(br.target.value)},value:nr,maxLength:"800"},Qe.b)),Object(e.h)(z.b,{gap:12,className:Ze.postPreview,paddingX:16,paddingY:16},Object(e.h)(z.c,{alignItems:"center",gap:8},Object(e.h)(Ne.a,{pub:At,size:24,logo_url:At.logo_url,linkify:!1,className:Ze.pubIcon,noMargin:!0}),Object(e.h)(V.b.B4,{color:"primary",weight:"semibold",size:14},At.name)),Object(e.h)(z.b,{gap:4},Object(e.h)(V.b.H4,{weight:"semibold"},Xt.title),Object(e.h)(V.b.B3,{color:"secondary"},Object(f.formatEllipsis)(((Xt.truncated_body_text||"").replace(E.Substitutions.PUBLICATION_NAME,At.name)||Xt.subtitle||"").substring(0,100)))))),Object(e.h)(F.a,{priority:"primary-theme",onClick:()=>{if(Object(L.i)(L.a.CROSS_POST_MODAL_CONTINUE_CLICKED),!nr){pr("Please write something to your subscribers to continue"),Object(L.i)(L.a.CROSS_POST_MODAL_CONTINUE_FAILED);return}pr(""),cn(rt.AUDIENCE_SELECTION),Object(L.i)(L.a.CROSS_POST_MODAL_CONTINUED)},disabled:et||!nr,className:"restack-modal-button "},"Choose audience")):Object(e.h)(z.b,{gap:24,paddingTop:12},Object(e.h)(z.b,{gap:20},Object(e.h)(z.b,{gap:8},Object(e.h)(V.b.B3,null,"Post to"),Object(e.h)(q.a,{value:Rr.id,onChange:br=>{hr("everyone"),pn(Number(br))},className:Ze.select},Yn.map(br=>Object(e.h)("option",{value:br.id},br.name)))),Object(e.h)(z.b,{gap:8},Object(e.h)(V.b.B3,null,"Send to"),Object(e.h)(q.a,{value:Gn,onChange:br=>hr(br),className:Ze.select},((Rr==null?void 0:Rr.payments_state)==="enabled"?Object(D.getAudiencesForPublicListing)():["everyone"]).map(br=>Object(e.h)("option",{value:br},Pe[br]))))),Object(e.h)(F.a,{priority:"primary-theme",onClick:Pr,disabled:et,className:"restack-modal-button "},de[Gn]))))};var Ie=t(145),ke=Object.defineProperty,Te=Object.defineProperties,x=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Ue=(At,Xt,en)=>Xt in At?ke(At,Xt,{enumerable:!0,configurable:!0,writable:!0,value:en}):At[Xt]=en,Ve=(At,Xt)=>{for(var en in Xt||(Xt={}))le.call(Xt,en)&&Ue(At,en,Xt[en]);if(H)for(var en of H(Xt))Ce.call(Xt,en)&&Ue(At,en,Xt[en]);return At},bt=(At,Xt)=>Te(At,x(Xt)),yt=(At,Xt,en)=>new Promise(($n,Xn)=>{var Yn=zt=>{try{nr(en.next(zt))}catch(Kt){Xn(Kt)}},Sn=zt=>{try{nr(en.throw(zt))}catch(Kt){Xn(Kt)}},nr=zt=>zt.done?$n(zt.value):Promise.resolve(zt.value).then(Yn,Sn);nr((en=en.apply(At,Xt)).next())});function Qt(At,Xt){return At==="button"&&Xt==="verbose"?16:At==="button"||At==="inline"?20:At==="tabs"?24:At==="compressed"?16:0}const tn=2,Kn=({isFullWidth:At,children:Xt})=>At?Object(e.h)(z.c,{className:"post-ufi-button-wrapper",gap:8},Xt):Xt;function Ot({post:At,pub:Xt,user:en,style:$n,justified:Xn,isStatic:Yn,postReactionToken:Sn,hideReactions:nr,hideComments:zt,hideShare:Kt,hideSavePost:$t,useShareLabel:et,allowEdit:Wt,editButtonIsLast:Vt,onChange:cn,addedPodcastComments:Tn,hidePinning:pn,showEmailSent:Gn,allowSendEmail:hr,footerHidden:Rn,onCommentsClick:pr,reactors:zn,labelStyle:Ar,showPreamble:Rr,preambleConfig:ir={},position:Sr,hideByDisabling:Pr,showRestackButton:yr,showRestackModal:br}){const Br=Object(N.b)(),{showPins:Nr,showAudience:lo,showDate:Zr,showDatetime:zr,showAuthor:wr,showPublicationName:$o}=ir;nr=nr||!Xt.community_enabled||!At.slug||At.is_draft;const xo=p()(Object.values((At==null?void 0:At.reactions)||{})),Vo=Gn?Boolean(At.email_sent_at):null,Ti=Wt&&(en==null?void 0:en.is_contributor),Ho=lt({post:At,pub:Xt,user:en,defaultOpen:br});Object(o.d)(()=>{br&&en&&Object(L.i)(L.a.RESTACK_POST_CLICKED,{restacked_publication_id:Xt.id,restacked_post_id:At.id,restacking_user_id:en.id,is_from_email:!0})},[br,Xt,At,en]);const oi=Object(e.h)(er,{style:$n,pub:Xt,post:At,user:en,hidePinning:pn,emailSent:Vo!=null?Vo:void 0,allowSendEmail:hr,footerHidden:Rn}),zo=yr&&!Rr&&(Pr||nr&&zt&&Kt&&!Ti),ho=Ar==="counts-or-none"&&xo?"count":Ar==="labels"?"cta":"none",Jo=Ar==="counts-or-none"&&At.comment_count?"count":Ar==="labels"?"cta":"none",gi=Sr==="post-footer-full-width";return Object(e.h)("div",{class:c()("post-ufi",`style-${$n}`,{justified:Xn,themed:Br,"single-full-width-button":zo})},Object(e.h)(Kn,{isFullWidth:gi},Rr&&ir&&Object(e.h)(Jt,{pub:Xt,post:At,showPins:Nr,showAudience:lo,showDate:Zr,showDatetime:zr,showEmailSent:Gn,showAuthor:wr,showPublicationName:$o}),Ti&&!Vt&&oi,(Pr||!nr)&&Object(e.h)(ft,{post:At,pub:Xt,user:en,labelStyle:Pr&&nr?"none":ho,style:$n,onChange:cn,isStatic:Yn,isDisabled:Pr&&nr}),(Pr||!zt)&&Object(e.h)(bn,{post:At,pub:Xt,isStatic:Yn,labelStyle:Pr&&zt?"none":Jo,style:$n,count:At.comment_count+(Tn||0),onClick:pr,isDisabled:Pr&&zt}),yr&&en&&Object(e.h)(nt,{pub:Xt,post:At,onChange:cn,style:$n}),!Kt&&Object(e.h)(cr,{post:At,pub:Xt,user:en,style:$n,labelStyle:et?"cta":"none",isStatic:Yn,postReactionToken:Sn,position:Sr})),Object(e.h)(Kn,{isFullWidth:gi},!$t&&!yr&&en&&Object(e.h)(wn,{post:At,labelStyle:Jo,style:$n,onChange:cn}),Ti&&Vt&&oi,yr&&!Ti&&Sr==="post-header"&&Object(e.h)(e.Fragment,null,Object(e.h)(G.c,{trigger:Object(e.h)(F.c,{"aria-label":"View more",size:40,fill:"outline"},Object(e.h)(g.a,{size:20}))},Object(e.h)(ur,{onClick:Ho.open,post:At,pub:Xt,user:en}),Object(e.h)(Un,{post:At,onChange:cn}))),yr&&!Ti&&gi&&Object(e.h)(e.Fragment,null,!$t&&Object(e.h)(wn,{post:At,labelStyle:"verbose",style:"button",onChange:cn}),Object(e.h)(fr,{onClick:Ho.open,post:At,pub:Xt,user:en,style:"button"}))),Ho.modal)}function lt({pub:At,user:Xt,post:en,defaultOpen:$n=!1}){const[Xn,Yn]=Object(o.k)($n);return{open:()=>Yn(!0),modal:Object(e.h)(be,{pub:At,user:Xt,post:en,open:Xn,setOpen:Yn})}}function Be(){const At=!1,Xt=typeof window=="undefined",en=250,[$n,Xn]=Object(o.k)(Xt?0:window.pageYOffset),[Yn,Sn]=Object(o.k)(At),nr=100,zt=Object(o.h)(()=>Date.now()+1e3,[]),Kt=Object(o.j)(0);return Object(o.d)(()=>{if(Xt)return;const $t=m()(()=>{const et=Date.now(),Wt=(et-Kt.current)/1e3,cn=($n-window.pageYOffset)/Wt;Kt.current=et,!(window.pageYOffset<0)&&(et<zt?Sn(At):-cn>nr?Sn(!0):cn>nr&&Sn(!1),Xn(window.pageYOffset))},en);return window.addEventListener("scroll",$t),()=>window.removeEventListener("scroll",$t)},[Xt,$n,Xn,Sn,zt,Kt,At]),Yn}function _e({post:At,pub:Xt,user:en,isStatic:$n,postReactionToken:Xn,onChange:Yn,allowEdit:Sn,hidePinning:nr,showEmailSent:zt,allowSendEmail:Kt,hideComments:$t,onCommentsClick:et,showRestackModal:Wt,setFooterShown:Vt}){const cn=Be(),Tn=Object(k.e)();return Object(o.d)(()=>{Tn.addOffset(64*(cn?1:-1)),Vt&&Vt(!cn)},[cn,Vt]),Object(e.h)("div",{class:c()("mobile-footer-ufi",{hidden:cn})},Object(e.h)(Ot,{post:At,pub:Xt,user:en,isStatic:$n,justified:!0,postReactionToken:Xn,style:"tabs",onChange:Yn,allowEdit:Sn,editButtonIsLast:!0,hidePinning:nr,showEmailSent:zt,allowSendEmail:Kt,footerHidden:cn,labelStyle:"counts-or-none",hideComments:$t,onCommentsClick:et,position:"mobile-toolbar",hideByDisabling:!0,showRestackModal:Wt,showRestackButton:!0}))}function Ae({post:At,pub:Xt,user:en,surface:$n,onChange:Xn,subscribePromptRef:Yn}){const Sn=!!(At==null?void 0:At.reaction),nr=Object(C.f)({pathname:`/api/v1/post/${At==null?void 0:At.id}/reaction`,method:"POST",deps:[At==null?void 0:At.id]}),zt=Object(R.a)({user:en,noBase:!1});return{isLiked:Sn,toggle:()=>yt(this,null,function*(){var Kt;if(nr.isLoading)return"error";Sn||!zt()&&en&&!Object(U.a)(en,Xt)&&!en.is_admin&&!en.is_contributor&&(Yn==null?void 0:Yn.current)&&Object(ce.c)()&&(Object(L.i)(L.a.LIKE_UPSELL_MODAL_SEEN,{source:"web",type:(en==null?void 0:en.is_free_subscribed)?"paid":"free"}),Yn.current.open(),Object(ce.d)(Xt));const{reaction:$t,reactions:et,reactor_names:Wt}=Object($e.e)(en,At);At.reaction=$t,At.reactions=et,At.reactor_names=Wt,Xn==null||Xn({post:At});const Vt=yield nr.refetch($t?{method:"POST",json:{reaction:"\u2764",surface:$n}}:{method:"DELETE"}),cn=(Kt=Vt==null?void 0:Vt.response)==null?void 0:Kt.status;if(cn){const{reaction:Tn,reactions:pn,reactor_names:Gn}=Object($e.e)(en,At);At.reaction=Tn,At.reactions=pn,At.reactor_names=Gn,Xn==null||Xn({post:At})}return cn===401?"unauthorized":cn?"error":$t?"liked":"unliked"})}}function fe(){const At=Hn();return(en,$n)=>yt(this,null,function*(){yield Object(C.c)(`/api/v1/post/${en}/reaction`,$n?{method:"POST",json:{reaction:"\u2764",surface:"reader"}}:{method:"DELETE"}),At($n)})}function ft({post:At,pub:Xt,user:en,style:$n,labelStyle:Xn,onChange:Yn,isStatic:Sn,isDisabled:nr}){const zt=p()(Object.values((At==null?void 0:At.reactions)||{})),Kt=Xn==="count"?Object(f.numberToString)(zt||0):Xn==="cta"?"Like":null;return Object(e.h)(Tt,{post:At,pub:Xt,user:en,onChange:Yn,isStatic:Sn,style:$n},({isLiked:$t,handleLike:et})=>Object(e.h)(jr,{style:$n,state:$t?"liked":void 0,icon:Object(e.h)(Ye.default,{className:"icon",height:Qt($n),strokeWidth:tn}),onClick:nr?()=>{}:et,noLabel:Xn==="none",isDisabled:nr},Kt))}function nt({pub:At,post:Xt,onChange:en,style:$n}){const{canRestack:Xn,isRestacked:Yn,restacks:Sn,menuItems:nr}=Object(K.a)({pub:At,post:Xt,onRestack:zt=>{en==null||en({post:bt(Ve({},Xt),{restacked:zt,restacks:Sn+(zt?1:-1)})})}});return Xn?Object(e.h)(G.c,{trigger:Object(e.h)(jr,{style:$n,state:Yn?"restacked":void 0,icon:Object(e.h)(Ee.default,{className:"icon",height:Qt($n),strokeWidth:tn}),noLabel:Sn===0,"aria-label":"menu"},Sn.toLocaleString(void 0,{maximumSignificantDigits:4}))},nr):null}function ct({post:At,pub:Xt,user:en,onChange:$n,showRestackModal:Xn}){const Yn="button",Sn=lt({pub:Xt,user:en,post:At,defaultOpen:Xn}),nr=()=>{Sn.open(),Object(L.i)(L.a.RESTACK_POST_CLICKED,{restacked_publication_id:Xt.id,restacked_post_id:At.id,restacking_user_id:en.id,is_from_email:!1})};return Object(e.h)(e.Fragment,null,Object(e.h)(G.c,{trigger:Object(e.h)(jr,{style:Yn,icon:Object(e.h)(g.a,{className:"icon edit-icon",size:Qt(Yn),strokeWidth:2}),noLabel:!0,"aria-label":"More"})},Object(e.h)(Un,{post:At,onChange:$n,showIcon:!0}),Object(e.h)(G.d,{icon:Object(e.h)(se.default,null),onClick:nr},"Cross post"),en&&Object(e.h)(G.d,{icon:Object(e.h)(v.a,null),href:Object(B.getReaderPostUrl)(At.id)},"Open on Substack")),Sn.modal)}function Xe(At){var Xt;const en=p()(Object.values(((Xt=At.post)==null?void 0:Xt.reactions)||{}));return Object(e.h)(ft,bt(Ve({},At),{labelStyle:en>0?"count":"none"}))}const gt=({pub:At,user:Xt})=>{const[en,$n]=Object(o.k)(Xt==null?void 0:Xt.email),[Xn,Yn]=Object(o.k)(!1);return Object(e.h)(z.b,{gap:20},Object(e.h)(z.b,{gap:4},Object(e.h)(V.b.H4,{weight:"semibold"},"Support ",At.name),Object(e.h)(V.b.B4,{color:"secondary"},"Since you liked this post, why not subscribe?")),Object(e.h)(z.b,{gap:12},Object(e.h)("input",{disabled:!!(Xt==null?void 0:Xt.email),value:en,onChange:Sn=>$n(Sn.currentTarget.value)}),Object(e.h)(F.a,{onClick:()=>yt(void 0,null,function*(){Object(L.i)(L.a.LIKE_UPSELL_FREE_SUBSCRIBED,{email:en}),Yn(!0);try{yield w.a.post("/api/v1/free").send({email:en,source:"like-button-upsell"}),Object(Z.redirect)(Object(B.getSubscribeUrl)(At,{params:{utm_source:"like-button-upsell",just_signed_up:!0}}),{local_navigation:!1})}catch(Sn){alert(Object(Z.getNetworkErrorMessage)(Sn))}}),grow:!0,disabled:Xn,priority:"primary-theme"},Xn?"Please wait...":"Subscribe")))};function Tt({post:At,pub:Xt,user:en,onChange:$n,isStatic:Xn,children:Yn,style:Sn}){const nr=Object(o.j)(),{isLiked:zt,toggle:Kt}=Ae({post:At,pub:Xt,user:en,subscribePromptRef:nr,onChange:$n}),$t=Object(o.j)(),[et,Wt]=Object(o.k)(!1),Vt=Object(o.a)(cn=>yt(this,null,function*(){var Tn;(Tn=cn==null?void 0:cn.stopPropagation)==null||Tn.call(cn),(yield Kt())==="unauthorized"&&Wt(!0)}),[Kt]);return Object(o.d)(()=>{!($t==null?void 0:$t.current)||!et||$t.current.open()},[et]),Object(e.h)("div",{className:"like-button-container"},Yn({isLiked:zt,handleLike:Vt}),!Xn&&et&&Object(e.h)($e.b,{modalRef:$t,user:en,pub:Xt,onClose:()=>Wt(!1),react:Kt}),en&&!Object(U.a)(en,Xt)&&!en.is_admin&&!en.is_contributor&&(Sn==="button"||Sn==="tabs"||Sn==="inline")&&Object(e.h)(ee.a,{ref:nr,className:c()("subscribe-prompt-dropdown",!(en==null?void 0:en.is_free_subscribed)&&"free"),hideMenuTail:!0},(en==null?void 0:en.is_free_subscribed)?Object(e.h)(ce.b,{pub:Xt}):Object(e.h)(gt,{pub:Xt,user:en})))}function Ut({post:At,defaultSaved:Xt,isSaved:en,trackSurface:$n}){var Xn;return qt({postId:At.id,defaultSaved:(Xn=Xt!=null?Xt:At.is_saved)!=null?Xn:!1,isSaved:en,trackSurface:$n})}function qt({postId:At,defaultSaved:Xt,isSaved:en,trackSurface:$n}){const[Xn,Yn]=Object(o.k)(Xt),Sn=en!=null?en:Xn,{refetch:nr,isLoading:zt,error:Kt}=Object(C.f)({pathname:"/api/v1/posts/saved",method:"POST",json:{post_id:At},deps:[At]}),$t=Object(y.c)(),et=_n();return{isSaved:Sn,onSave:()=>(zt||(nr({method:Sn?"DELETE":"POST"}).then(()=>{$t.refetch()}),Yn(!Sn),et(!Sn),Object(L.i)(L.a.POST_SAVED,{post_id:At,surface:$n})),!Sn)}}function sn(At,Xt,en){return yt(this,arguments,function*($n,Xn,{surface:Yn}){yield Object(C.c)("/api/v1/posts/saved",{method:Xn?"POST":"DELETE",json:{post_id:$n}}),Object(L.i)(L.a.POST_SAVED,{post_id:$n,surface:Yn,is_saved:Xn})})}function _n(){const At=Object(k.e)();return Xt=>{Xt?At.popToast(en=>Object(e.h)(k.c,bt(Ve({},en),{text:"Post saved",Icon:O.a}))):At.popToast(en=>Object(e.h)(k.c,bt(Ve({},en),{text:"Post unsaved",Icon:u.a})))}}function Hn(){const At=Object(k.e)();return Xt=>{Xt?At.popToast(en=>Object(e.h)(k.c,bt(Ve({},en),{text:"Post liked",Icon:r.a}))):At.popToast(en=>Object(e.h)(k.c,bt(Ve({},en),{text:"Post unliked",Icon:r.a})))}}function wn({style:At,post:Xt,isSaved:en,labelStyle:$n,onChange:Xn}){const{isSaved:Yn,onSave:Sn}=Ut({defaultSaved:en,post:Xt,isSaved:Xt.is_saved}),nr=()=>{const zt=Sn();Xn({post:bt(Ve({},Xt),{is_saved:zt})})};return Object(e.h)(jr,{state:Yn?"substack":void 0,style:At,icon:Object(e.h)(he.default,{className:"icon",height:Qt(At,$n==="verbose"?"verbose":null),strokeWidth:tn}),noLabel:$n==="none",verboseLabel:$n==="verbose",onClick:nr},$n==="cta"||$n==="verbose"?"Save":null)}function Un({post:At,isSaved:Xt,onChange:en,showIcon:$n}){const{onSave:Xn}=Ut({defaultSaved:Xt,post:At,isSaved:At.is_saved}),Yn=()=>{const nr=Xn();en({post:bt(Ve({},At),{is_saved:nr})})},Sn=At.is_saved?"var(--color-accent-substack)":void 0;return Object(e.h)(G.d,{icon:$n?Object(e.h)(O.a,{style:{stroke:Sn,fill:Sn}}):void 0,onClick:Yn},At.is_saved?"Unsave":"Save")}function bn({style:At,count:Xt,labelStyle:en,post:$n,pub:Xn,isStatic:Yn,onClick:Sn,isDisabled:nr}){let zt;return($n==null?void 0:$n.comment_url_override)?zt=$n.comment_url_override:Yn?zt=`${E.Substitutions.HALF_MAGIC_COMMENTS_URL}&utm_source=substack&utm_medium=email`:Xn&&(zt=Object(W.getPostUrl)(Xn,$n,{comments:!0})),Object(e.h)(jr,{style:At,icon:Object(e.h)(me.default,{className:"icon",height:Qt(At),strokeWidth:tn}),href:nr?null:zt,onClick:nr?()=>{}:Sn,noLabel:en==="none",className:"post-ufi-comment-button",isDisabled:nr},en==="cta"&&"Comment",en==="count"&&Object(f.numberToString)(Xt||0))}function cr({post:At,user:Xt,pub:en,style:$n,labelStyle:Xn,isStatic:Yn,postReactionToken:Sn,onChange:nr,position:zt}){const Kt=Object(o.j)(),$t=Object(o.a)(()=>{Object(L.i)(L.a.POST_SHARE_BUTTON_CLICKED,{position:zt}),Kt.current.open()},[]);let et;return At.share_url_override?et=At.share_url_override:Yn?At?et=E.Substitutions.SHARE_URL:et=E.Substitutions.SHARE_PUB_URL:et="javascript:void(0)",Object(e.h)(e.Fragment,null,Object(e.h)(jr,{style:$n,icon:Object(e.h)(i.a,{className:"icon",height:Qt($n),strokeWidth:tn}),onClick:$t,href:et,noLabel:Xn==="none"},Xn==="cta"&&"Share"),!Yn&&Object(e.h)(Ie.c,{ref:Kt,user:Xt,pub:en,post:At,reaction_token:Sn,onChange:nr}))}function fr({post:At,user:Xt,pub:en,onClick:$n,style:Xn}){return Object(e.h)(e.Fragment,null,Object(e.h)(jr,{style:Xn,icon:Object(e.h)(se.default,{className:"icon",height:Qt(Xn,"verbose"),strokeWidth:tn}),onClick:()=>{Object(L.i)(L.a.RESTACK_POST_CLICKED,{restacked_publication_id:en.id,restacked_post_id:At.id,restacking_user_id:Xt.id,is_from_email:!1}),$n()},noLabel:!1,verboseLabel:!0,title:"Cross-Post"},"Cross-post"))}function ur({post:At,user:Xt,pub:en,onClick:$n}){const Xn=()=>{Object(L.i)(L.a.RESTACK_POST_CLICKED,{restacked_publication_id:en.id,restacked_post_id:At.id,restacking_user_id:Xt.id,is_from_email:!1}),$n()};return Object(e.h)(e.Fragment,null,Object(e.h)(G.d,{onClick:Xn},"Cross-post"))}function er({style:At,pub:Xt,post:en,user:$n,hidePinning:Xn,emailSent:Yn,allowSendEmail:Sn,footerHidden:nr}){const zt=Object(o.j)();return nr&&zt.current&&zt.current.close(),Object(e.h)("div",{class:"edit-button-container"},Object(e.h)(jr,{onClick:()=>zt.current.open(),style:At,icon:Object(e.h)(g.a,{className:"icon edit-icon",size:Qt(At),strokeWidth:2}),noLabel:!0}),Object(e.h)(ue.b,{ref:zt,pub:Xt,post:en,user:$n,className:"post-ufi-edit-menu",useDrawerOnMobile:!0,hidePinning:Xn,emailSent:Yn,allowSendEmail:Sn}))}const jr=Object(s.forwardRef)(({icon:At,children:Xt,state:en,style:$n,onClick:Xn,href:Yn,noLabel:Sn,verboseLabel:nr,noBorder:zt,className:Kt,isDisabled:$t,iconPosition:et="left",title:Wt},Vt)=>Object(e.h)("a",{role:"button",className:c()("post-ufi-button",`style-${$n}`,Kt,en?`state-${en}`:void 0,$t?"state-disabled":void 0,Xt&&!Sn?"has-label":"no-label",zt?"no-border":"with-border",nr?"verbose-label":""),title:Wt,href:Yn,onClick:cn=>{Xn&&(cn.stopPropagation(),Xn(cn))},ref:Vt},et==="left"&&At,!Sn&&Xt&&Object(e.h)("div",{class:"label"},Xt),et==="right"&&At)),wt=({pub:At,post:Xt,showAuthor:en})=>Boolean(en&&At.bylines_enabled&&Object(f.getPrintedByline)(At,Xt)),mt=({pub:At,post:Xt,showAuthor:en,showPhoto:$n,isMobileWidth:Xn})=>wt({pub:At,post:Xt,showAuthor:en})&&!Fe({pub:At,post:Xt,showAuthor:en})&&!pt({pub:At,post:Xt,showAuthor:en,showPhoto:$n})&&!Xn,Fe=({pub:At,post:Xt,showAuthor:en})=>wt({pub:At,post:Xt,showAuthor:en})&&Object(f.getBylineUsers)(Xt).length>1,pt=({pub:At,post:Xt,showAuthor:en,showPhoto:$n})=>{var Xn;return wt({pub:At,post:Xt,showAuthor:en})&&$n&&((Xn=Object(f.getBylineUsers)(Xt)[0])==null?void 0:Xn.photo_url)&&At.byline_images_enabled};function Dt({post:At,showDatetime:Xt,isStatic:en,fromPostPage:$n,showReactions:Xn}){const Yn=At.reactions?Object.values(At.reactions).reduce((nr,zt)=>nr+zt,0):0,Sn=$n&&!en&&Xn&&Yn>=70&&Yn<100;return Xt&&Sn?P()(At.post_date).standardDatetimeWithYear():Xt&&!Sn?P()(At.post_date).standardDatetime():en?P()(At.post_date).standardDate():Sn?P()(At.post_date).standardDate({full:Sn}):P()(At.post_date).standardDateOrTime()}function Jt({pub:At,post:Xt,showPins:en,showAudience:$n,showDate:Xn,showDatetime:Yn,showEmailSent:Sn,showAuthor:nr,showPublicationName:zt}){const Kt=Object(N.b)(),$t=Boolean(nr&&At.bylines_enabled&&Object(f.getPrintedByline)(At,Xt)),et=!1,Wt=Xn&&Xt.post_date&&!Xt.is_draft,Vt=Sn?Boolean(Xt.email_sent_at):null;return Object(e.h)("div",{class:c()("ufi-preamble",{themed:Kt})},Sn&&Vt&&Xt.type!=="restack"&&Object(e.h)("div",{className:"email-sent",title:"This post was sent as an email"},Object(e.h)(d.a,{className:"post-ufi-preamble-icon",size:16})),en&&Xt.is_section_pinned&&Object(e.h)("div",{class:"pinned"},Object(e.h)(Oe.default,{className:"post-ufi-preamble-icon"})),Xt.type==="restack"&&Object(e.h)("div",{class:"restack"},Object(e.h)(se.default,{className:"post-ufi-preamble-icon",height:Qt("compressed"),strokeWidth:tn})),Xt.type==="adhoc_email"?Object(e.h)("div",{class:"audience-adhoc"},Object(e.h)(ae.default,{className:"post-ufi-preamble-icon"})):$n&&Object(D.isPaidAudience)(Xt.audience)&&Object(e.h)("div",{class:"audience-lock"},Object(e.h)(Y.a,{audience:Xt.audience,className:"lock-icon post-ufi-preamble-icon",size:16})),mt({pub:At,post:Xt,showAuthor:$t,isMobileWidth:et})&&Object(e.h)("div",{class:"ufi-preamble-label author"},Object(f.getBylineUsers)(Xt).length>0?Object(f.oxfordComma)(Object(f.getBylineUsers)(Xt).map(cn=>Object(e.h)(e.Fragment,null,Object(e.h)(pe.b,{subject:cn,utmSource:"byline"},Object(e.h)("a",{href:Object(W.getProfileUrl)(cn,At,{base:!0}),onClick:Tn=>Tn.stopPropagation()},cn.name))))):Object(f.getPrintedByline)(At,Xt)),zt&&Object(e.h)("div",{class:"post-publication-name"},At.name),Wt&&Object(e.h)("div",{class:"ufi-preamble-label post-date",title:P()(Xt.post_date).toISOString()},Object(e.h)("time",{dateTime:P()(Xt.post_date).toISOString()},Dt({post:Xt,showDatetime:Yn}))))}function Gt({post:At,pub:Xt,user:en,onChange:$n,onCommentsClick:Xn,postReactionToken:Yn,showRestackModal:Sn=!1}){const nr=Object(M.c)(),zt=en==null?void 0:en.is_contributor,Kt=nr.getConfigFor("like_posts_enabled")&&Xt.community_enabled,$t=Object(f.showCommentsOnPost)({publication:Xt,post:At}),{comment_count:et}=At;return Object(e.h)(z.a,{className:"post-ufi",alignItems:"center",borderTop:"detail-themed",borderBottom:"detail-themed",justifyContent:"space-between",gap:16,flex:"grow",paddingY:16},Object(e.h)(z.a,{gap:8},Kt&&Object(e.h)(Xe,{style:"button",post:At,pub:Xt,user:en,onChange:$n}),$t&&Object(e.h)(bn,{post:At,pub:Xt,labelStyle:et>0?"count":"none",style:"button",count:et,onClick:Xn}),Object(e.h)(nt,{pub:Xt,post:At,onChange:$n,style:"button"})),Object(e.h)(z.a,{gap:8},zt?Object(e.h)(er,{style:"button",pub:Xt,post:At,user:en}):Object(e.h)(ct,{post:At,pub:Xt,user:en,onChange:$n,showRestackModal:Sn}),Object(e.h)(cr,{post:At,pub:Xt,user:en,style:"button",labelStyle:"cta",postReactionToken:Yn})))}function mn({isFooter:At,customization:{showShare:Xt,showComments:en,showReactions:$n,showListen:Xn,showSave:Yn,showRestack:Sn}}){const nr=At?"email-ufi-2-bottom":"email-ufi-2-top",zt=!At&&(Sn||Xn||Yn),Kt=At;return!At&&!Xt&&!en&&!$n&&!Xn&&!Yn&&Sn?Object(e.h)(A.e,{className:"email-ufi-2-empty",width:"100%"},Object(e.h)("tr",{height:1},Object(e.h)("td",{height:1,style:{fontSize:0,lineHeight:0}},"\xA0"))):Object(e.h)(A.e,{className:nr,width:"100%"},Sn&&At&&Object(e.h)(e.Fragment,null,Object(e.h)(Cn,null),Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(A.e,{width:"100%",className:"email-ufi-2-row"},Object(e.h)("tr",null,Object(e.h)("td",{width:"95%"},Object(e.h)(A.b,{tableClassName:"email-button-outline-wrapper-full-width",aClassName:"email-button-outline full-width",href:E.Substitutions.RESTACK_URL},Object(e.h)(se.default,Ve({},tr)),Object(e.h)("span",{className:"email-button-text"},"Cross-post")))),Object(e.h)(Cn,null))))),Object(e.h)(Cn,null),Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(A.e,{width:"100%"},Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(A.c,{gap:8,style:zt?void 0:{margin:"0 auto"}},$n?Kt?Object(e.h)(A.b,{aClassName:"email-button-outline",href:E.Substitutions.REACTION_URL},Object(e.h)(Ye.default,Ve({},tr)),Object(e.h)("span",{className:"email-button-text"},"Like")):Object(e.h)(Zn,{href:E.Substitutions.REACTION_URL},Object(e.h)(Ye.default,Ve({},tr))):null,en?Kt?Object(e.h)(A.b,{aClassName:"email-button-outline",href:`${E.Substitutions.HALF_MAGIC_COMMENTS_URL}&utm_source=substack&utm_medium=email`},Object(e.h)(me.default,Ve({},tr)),Object(e.h)("span",{className:"email-button-text"},"Comment")):Object(e.h)(Zn,{href:`${E.Substitutions.HALF_MAGIC_COMMENTS_URL}&utm_source=substack&utm_medium=email`},Object(e.h)(me.default,Ve({},tr))):null,Xt?Kt?Object(e.h)(A.b,{aClassName:"email-button-outline",href:E.Substitutions.SHARE_URL},Object(e.h)(ie.default,Ve({},tr)),Object(e.h)("span",{className:"email-button-text"},"Share")):Object(e.h)(Zn,{href:E.Substitutions.SHARE_URL},Object(e.h)(ie.default,Ve({},tr))):null)),Object(e.h)("td",{align:"right"},Object(e.h)(A.c,{gap:8},Yn&&Object(e.h)(A.b,{aClassName:"email-button-outline",href:E.Substitutions.SAVE_POST_URL},Object(e.h)("div",{className:"email-button-spacer"}),Object(e.h)("span",{className:"email-button-text"},"Save")),Sn&&!At&&Object(e.h)(A.b,{aClassName:"email-button-outline",href:E.Substitutions.RESTACK_URL},Object(e.h)(se.default,Ve({},tr)),Object(e.h)("span",{className:"email-button-text"},"Cross-post")),Xn&&Object(e.h)(A.b,{aClassName:"email-button-outline",href:E.Substitutions.PLAY_ON_SUBSTACK_UFI},Object(e.h)("div",{className:"email-button-spacer"}),Object(e.h)("span",{className:"email-button-text"},"\u25B7\xA0\xA0Listen")))))))),Object(e.h)(Cn,null))}function Cn(){const At=16;return Object(e.h)("tr",{height:At},Object(e.h)("td",{height:At,style:{fontSize:0,lineHeight:0}},"\xA0"))}const tr={className:"icon",height:18,strokeWidth:1,isStatic:!0,stroke:"#808080",fill:"none"};function Zn({size:At=38,href:Xt,children:en}){return Object(e.h)(A.e,{width:At},Object(e.h)("tr",null,Object(e.h)("td",{align:"center"},Object(e.h)("a",{className:"email-icon-button",href:Xt,style:{width:At}},en))))}},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s,o,a){return o in s?Object.defineProperty(s,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[o]=a,s}},function($,n,t){"use strict";t.d(n,"d",function(){return u}),t.d(n,"g",function(){return r}),t.d(n,"c",function(){return i}),t.d(n,"i",function(){return d}),t.d(n,"f",function(){return E}),t.d(n,"e",function(){return S}),t.d(n,"a",function(){return P}),t.d(n,"b",function(){return D}),t.d(n,"j",function(){return B}),t.d(n,"h",function(){return f});var e=t(0),s=t(270),o=t.n(s),a=t(3),c=t.n(a),l=t(9),p=t.n(l),h=t(51),m=t.n(h);const g="comment-collapse-state",v=250,O=W(),u=()=>{if(typeof window!="undefined"&&window.location.hash){const y=/^#comment-(\d+)/.exec(window.location.hash);if(y)return Number(y[1])}return null},r=()=>typeof window!="undefined"&&window.location.hash==="#input",i=(y,M)=>{if(!y||!M||!M.length)return null;for(const N of M){if(N.id===y)return N;if(N.children&&N.children.length){const A=i(y,N.children);if(A)return A}}return null};function d(y,M){return y.map(N=>N.id===M.id?M:(N.children=d(N.children,M),N)).filter(N=>N)}function b(y,M,{recurse:N=!0}={}){var A,L,C,R;return!!(y.id!==M.id||((A=y==null?void 0:y.metadata)==null?void 0:A.is_author)!==((L=M==null?void 0:M.metadata)==null?void 0:L.is_author)||((C=y==null?void 0:y.metadata)==null?void 0:C.founding)!==((R=M==null?void 0:M.metadata)==null?void 0:R.founding)||(y==null?void 0:y.body)!==(M==null?void 0:M.body)||(y==null?void 0:y.status)!==(M==null?void 0:M.status)||y.reaction!==M.reaction||y.user_banned!==M.user_banned||y.reported_by_user!==M.reported_by_user||(y.reactor_names?y.reactor_names.length:0)!==(M.reactor_names?M.reactor_names.length:0)||Object.values(y.reactions).reduce((U,Z)=>U+Z,0)!==Object.values(M.reactions).reduce((U,Z)=>U+Z,0)||N&&w(y.children,M.children,{recurse:N}))}function w(y,M,{recurse:N=!0}={}){if((y?y.length:0)!==(M?M.length:0))return!0;if(y)for(const A of y){const L=M.find(C=>C.id===A.id);if(!L||N&&b(A,L,{recurse:N}))return!0}return!1}function E(y,M){return Object(a.getPostUrl)(M,y,{comments:!Object(l.shouldUseInlineComments)(M,y)})}function S(y,M,N){return Object(a.getPostCommentsUrl)(N,y,M)}function P(y){return(y||"").split(`
`).filter(M=>M.trim()).map(M=>Object(e.h)("p",null,Object(e.h)(o.a,{options:{validate:{url:N=>N&&!N.startsWith("/")},attributes:{rel:"nofollow ugc noopener"}}},M)))}const D=y=>{var M,N,A,L;return{id:y.user_id,photo_url:y.photo_url,name:y.name,bestseller_tier:y.user_bestseller_tier,primary_publication:y.user_primary_publication,is_free_subscribed:["free_signup, subscribed"].includes((M=y.metadata)==null?void 0:M.membership_state),is_subscribed:((N=y.metadata)==null?void 0:N.membership_state)==="subscribed",is_founding:(A=y.metadata)==null?void 0:A.founding,is_author:(L=y.metadata)==null?void 0:L.is_author}};function W(){try{return Object(h.getStoredValue)(g,[])}catch(y){return console.error("Failed to load comment collapse state:",y),[]}}function B(y,M){let N=!1;if(M)O.includes(y)||(N=!0,O.push(y),O.length>v&&O.splice(0,O.length-v));else{const A=O.indexOf(y);A>=0&&(N=!0,O.splice(A,1))}if(N)try{Object(h.setStoredValue)(g,O)}catch(A){console.error("Failed to store comment collapse state:",A)}}function f(y){return O.includes(y)}},function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(2),s=t(55);function o(a){let c=Object(e.useRef)(a);return Object(s.a)(()=>{c.current=a},[a]),c}},function($,n){$.exports=t=>(t||"").replace(/&#(\d+);/g,(e,s)=>String.fromCharCode(s))},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"CloseIcon",svgParams:{height:20,width:20,stroke:"#666666"}}),Object(e.h)("path",{d:"M15 5L5 15","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M5 5L15 15","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.r(n),t.d(n,"AudioFeature",function(){return y}),t.d(n,"AudioFeatureDescription",function(){return M}),t.d(n,"ProgressBarTheme",function(){return N}),t.d(n,"ProgressBar",function(){return A}),t.d(n,"PlaybackRateToggle",function(){return C}),t.d(n,"PlayButton",function(){return R}),t.d(n,"PlayerControls",function(){return U}),t.d(n,"AudioEmbedPlayer",function(){return Z}),t.d(n,"AudioEmbedPlayerStatic",function(){return F}),t.d(n,"VoiceoverPlayer",function(){return z}),t.d(n,"VoiceoverPlayerStatic",function(){return G}),t.d(n,"AudioUploadErrorModal",function(){return V});var e=t(0),s=t(6),o=t.n(s),a=t(105),c=t(33),l=t(50),p=t(36),h=t(9),m=t(7),g=t(153),v=t(254),O=t(255),u=t(346),r=t(164),i=t(408),d={themedSelectOption:"frontend-components-audio-module__themedSelectOption--298hw",noUnderline:"frontend-components-audio-module__noUnderline--18Qgy",podcastPaywallMenuButton:"frontend-components-audio-module__podcastPaywallMenuButton--3VjHF",paywallMenuDropdown:"frontend-components-audio-module__paywallMenuDropdown--1iouo",paywallMenuDropdownItem:"frontend-components-audio-module__paywallMenuDropdownItem--M2K5v",paywallMenuDropdownIcon:"frontend-components-audio-module__paywallMenuDropdownIcon--2IcLQ",paywallMenuDropdownItemTop:"frontend-components-audio-module__paywallMenuDropdownItemTop--1ulJo",paywallMenuDropdownDeleteItem:"frontend-components-audio-module__paywallMenuDropdownDeleteItem--20sub"},b=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,W=(k,K,Y)=>K in k?b(k,K,{enumerable:!0,configurable:!0,writable:!0,value:Y}):k[K]=Y,B=(k,K)=>{for(var Y in K||(K={}))P.call(K,Y)&&W(k,Y,K[Y]);if(S)for(var Y of S(K))D.call(K,Y)&&W(k,Y,K[Y]);return k},f=(k,K)=>w(k,E(K)),y;(function(k){k.Embed="Embed audio",k.Voiceover="Add voiceover",k.Podcast="Podcast",k.PodcastPreview="Podcast free version"})(y||(y={}));var M;(function(k){k.Embed="Upload or record an audio file embedded into the text.",k.Voiceover="Upload or record a new voiceover: an audio version of your post.",k.Podcast="Create a new podcast episode by uploading or recording an audio file.",k.PodcastPreview="Upload a file that will appear to free users on the website and in their feeds."})(M||(M={}));var N;(function(k){k[k.PubAccent=0]="PubAccent",k[k.PubFull=1]="PubFull",k[k.Substack=2]="Substack"})(N||(N={}));const A=({containerRef:k,currentTime:K,remainingTime:Y,progress:ee,onMouseDown:ae,shouldCollapseOnMobile:he=!1,theme:me=1})=>Object(e.h)("div",{className:"tw-flex tw-grow tw-items-center tw-gap-3 tw-font-meta tw-text-sm tw-text-pub-secondary-text sm:tw-gap-3"},Object(e.h)("div",{className:o()("tw-min-w-[40px] tw-text-right",{"tw-hidden sm:tw-block":he})},K),Object(e.h)("div",{ref:k,className:o()("tw-relative tw-h-5 tw-grow ",{"tw-ml-2 sm:tw-ml-0":he}),onMouseDown:ae},Object(e.h)("div",{className:o()("audio-progress-bar tw-absolute tw-top-2 tw-right-0 tw-left-0 tw-h-1 tw-rounded",{"tw-bg-pub-detail":me===1,"tw-bg-substack-detail":me!==1})}),Object(e.h)("div",{className:o()("tw-absolute tw-top-2 tw-left-0 tw-h-1 tw-rounded-l-full",{"tw-bg-pub-accent":me!==2,"tw-bg-substack-accent":me===2}),style:{width:`${ee*100}%`}}),Object(e.h)("div",{className:o()("audio-playhead tw-absolute tw-ml-[-10px] tw-h-4 tw-w-4 tw-rounded-full tw-border-2 tw-border-solid ",{"tw-border-pub-background":me===1,"tw-border-substack-bg":me!==1,"tw-bg-substack-accent":me===2,"tw-bg-pub-accent":me!==2}),style:{left:`${ee*100}%`}})),Object(e.h)("div",{className:"tw-min-w-[40px]"},Y)),L=[{value:1,display:"1"},{value:1.25,display:"1.25"},{value:1.5,display:"1.5"},{value:1.75,display:"1.75"},{value:2,display:"2"}],C=({onSetPlaybackRate:k,playbackRate:K,className:Y})=>{const ee=L.findIndex(({value:ae})=>ae===K);return Object(e.h)("div",{onClick:()=>{const ae=(ee+1)%L.length;k(L[ae].value)},className:Y},L[ee].display,"\xD7")},R=({togglePlayback:k,isPlaying:K,isDisabled:Y=!1})=>Object(e.h)("div",{onClick:()=>{Object(m.i)(m.a.AUDIO_MODAL_PLAYPAUSE_CLICKED,{is_disabled:Y}),Y||k()},className:"tw-flex tw-justify-center tw-pb-8"},K?Object(e.h)("div",{className:"tw-flex tw-h-7 tw-w-6 tw-justify-between"},Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"}),Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"})):Object(e.h)(r.default,{className:o()("tw-relative tw-left-1",{"tw-cursor-pointer":!Y,"tw-fill-pub-accent":!Y,"tw-fill-substack-detail":Y}),stroke:"none",height:28})),U=({isPlaying:k,onSkipBack:K,onSkipForward:Y,onTogglePlayback:ee})=>Object(e.h)("div",{className:"tw-flex tw-items-center tw-justify-center tw-gap-4"},Object(e.h)("div",{onClick:K,role:"button",className:"tw-cursor-pointer"},Object(e.h)(v.default,{className:"tw-block tw-fill-pub-primary-text tw-transition-opacity sm:tw-opacity-70 sm:hover:tw-opacity-100"})),Object(e.h)("div",{className:o()("tw-relative tw-flex tw-h-16 tw-w-16 tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-full tw-bg-pub-accent tw-transition-transform hover:tw-scale-105"),onClick:ee,role:"button"},k?Object(e.h)("div",{className:"tw-flex tw-h-6 tw-w-6 tw-justify-between"},Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent-inverse"}),Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent-inverse"})):Object(e.h)(r.default,{className:"tw-relative tw-left-0.5 tw-fill-pub-accent-inverse",stroke:"none",height:24})),Object(e.h)("div",{onClick:Y,role:"button",className:"tw-cursor-pointer"},Object(e.h)(O.default,{className:"tw-block tw-fill-pub-primary-text tw-transition-opacity sm:tw-opacity-70 sm:hover:tw-opacity-100"}))),Z=k=>Object(e.h)(g.a,f(B({},k),{metricsPost:k.post,feature:y.Embed,render:({currentTime:K,isPlaying:Y,progress:ee,progressBarRef:ae,progressBarOnMouseDown:he,remainingTime:me,playbackRate:Ye,setPlaybackRate:se,togglePlayback:ie})=>Object(e.h)("div",{className:"audio-embed tw-my-4 tw-box-border tw-flex tw-w-full tw-select-none tw-items-center tw-gap-4 tw-space-y-0 tw-rounded-full tw-bg-pub-wash tw-p-4 tw-font-sans sm:tw-gap-5"},Object(e.h)(C,{onSetPlaybackRate:se,playbackRate:Ye,className:"audio-button tw-w-12 tw-cursor-pointer tw-rounded-full tw-border tw-border-solid tw-border-pub-detail-light tw-py-1 tw-text-center tw-font-meta tw-text-sm tw-font-semibold tw-leading-none tw-text-pub-secondary-text hover:tw-border-pub-detail"}),Object(e.h)("div",{className:"tw-flex tw-w-full tw-flex-wrap"},k.label&&Object(e.h)("div",{className:"tw-basis-full tw-pb-2 tw-text-ssm tw-font-semibold tw-text-pub-primary-text"},k.label),Object(e.h)("div",{className:"tw-flex tw-w-full tw-items-center tw-justify-between tw-gap-2 sm:tw-gap-4"},Object(e.h)(A,{currentTime:K,remainingTime:me,containerRef:ae,progress:ee,onMouseDown:he}))),Object(e.h)("div",{className:"audio-embed-play-button tw-relative tw-flex tw-h-12 tw-w-12 tw-shrink-0 tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid tw-border-pub-detail tw-bg-pub-background tw-transition-transform hover:tw-scale-105",onClick:ie,role:"button"},Y?Object(e.h)("div",{className:"tw-flex tw-h-5 tw-w-5 tw-justify-between"},Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"}),Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"})):Object(e.h)(r.default,{className:"tw-relative tw-left-[.1rem] tw-fill-pub-accent ",stroke:"none",height:18})))})),F=({pub:k,post:K,duration:Y,label:ee})=>{var ae;return Object(e.h)("table",{className:"tw-w-full tw-rounded-full tw-bg-substack-wash"},Object(e.h)("tr",null,Object(e.h)("td",{className:"tw-text-center tw-font-meta tw-text-ssm tw-uppercase tw-text-substack-primary"},Object(e.h)("a",{href:K.canonical_url,className:o()("tw-block tw-w-full tw-p-4 tw-text-substack-primary",d.noUnderline)},Object(e.h)(u.default,{className:"tw-w-max-4 tw-mr-2 tw-inline-block tw-w-4 tw-align-middle",stroke:(ae=k.theme)==null?void 0:ae.background_pop_color,isStatic:!0}),Object(e.h)("span",{className:"tw-align-middle"},Object(h.truncateText)(ee,10)||"Listen now"," \xB7 ",Object(h.secondsToHHMMSS)(Y))))))},z=k=>{const K=Object(a.useMediaQuery)({maxWidth:631}),Y=`/api/v1/audio/upload/${k.mediaUploadId}/src`;return Object(e.h)(g.a,f(B({},k),{src:Y,feature:y.Voiceover,metricsPost:k.post,render:({isPaywalled:ee,currentTime:ae,isPlaying:he,progress:me,progressBarRef:Ye,progressBarOnMouseDown:se,remainingTime:ie,playbackRate:Ee,setPlaybackRate:Oe,togglePlayback:ce})=>Object(e.h)("div",{className:"tw-mb-6 tw-flex sm:tw-gap-1"},Object(e.h)("div",{className:"tw-hidden tw-h-20 tw-shrink-0 tw-basis-20 tw-items-center tw-justify-center tw-rounded-md tw-bg-pub-wash tw-fill-pub-primary-text tw-text-pub-primary-text sm:tw-flex"},Object(e.h)(i.default,{className:"tw-stroke-pub-secondary-text"})),Object(e.h)("div",{className:"tw-box-border tw-flex tw-h-20 tw-w-full tw-select-none tw-items-center tw-gap-3 tw-space-y-0 tw-rounded-l-md tw-rounded-r-[64px] tw-bg-pub-wash  tw-p-4 tw-font-sans"},ee?Object(e.h)("div",{className:"tw-flex tw-w-full tw-flex-wrap tw-justify-center tw-text-ssm tw-text-pub-secondary-text sm:tw-text-sm"},"Upgrade to paid to play voiceover"):Object(e.h)("div",{className:"tw-flex tw-w-full tw-flex-wrap"},Object(e.h)("div",{className:"tw-basis-full tw-pb-2 tw-text-ssm tw-font-semibold tw-uppercase tw-text-pub-secondary-text"},"Article voiceover"),Object(e.h)("div",{className:"tw-flex tw-w-full tw-items-center tw-justify-between tw-gap-2 "},Object(e.h)(C,{onSetPlaybackRate:Oe,playbackRate:Ee,className:"tw-w-12 tw-cursor-pointer tw-rounded-full tw-border tw-border-solid tw-border-pub-detail-light tw-py-1 tw-text-center tw-font-meta tw-text-sm tw-font-semibold tw-leading-none tw-text-pub-secondary-text hover:tw-border-pub-detail"}),Object(e.h)(A,{currentTime:ae,remainingTime:ie,containerRef:Ye,progress:me,onMouseDown:se,shouldCollapseOnMobile:!0}))),ee?Object(e.h)("div",{className:"tw-relative tw-flex tw-h-14 tw-w-14 tw-shrink-0 tw-cursor-not-allowed tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid tw-border-pub-detail tw-bg-pub-background tw-transition-transform"},Object(e.h)(r.default,{className:"tw-relative tw-left-[.15rem] tw-fill-pub-detail",stroke:"none",height:K?20:24})):Object(e.h)("div",{className:"tw-relative tw-flex tw-h-14 tw-w-14 tw-shrink-0 tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid  tw-border-pub-detail tw-bg-pub-background tw-transition-transform hover:tw-scale-105",onClick:ce,role:"button"},he?Object(e.h)("div",{className:"tw-flex tw-h-5 tw-w-5 tw-justify-between"},Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"}),Object(e.h)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"})):Object(e.h)(r.default,{className:"tw-relative tw-left-[.15rem] tw-fill-pub-accent",stroke:"none",height:20}))))}))},G=({pub:k,post:K,isPaywalled:Y})=>{var ee,ae,he;const me=Y?"Upgrade to paid for post voiceover":`Listen to post ${((ee=K.voiceoverUpload)==null?void 0:ee.duration)&&`\xB7 ${Object(h.secondsToHHMMSS)(K.voiceoverUpload.duration)}`}`;return Object(e.h)("table",{className:"voiceover-player-static tw-w-full tw-rounded-full tw-bg-substack-wash"},Object(e.h)("tr",null,Object(e.h)("td",{className:"tw-text-center tw-font-meta tw-text-ssm tw-uppercase tw-text-substack-primary"},Object(e.h)("a",{href:`${c.Substitutions.PLAY_ON_SUBSTACK}&utm_source=substack&utm_medium=email#play`,className:o()("tw-block tw-w-full tw-p-4 tw-text-substack-primary",d.noUnderline)},Object(e.h)(u.default,{className:"tw-w-max-4 tw-mr-2 tw-inline-block tw-h-auto tw-w-4 tw-align-middle",stroke:Y?(ae=k.theme)==null?void 0:ae.background_contrast_3:(he=k.theme)==null?void 0:he.background_pop_color,isStatic:!0}),Object(e.h)("span",{className:"voiceover-player-static-cta tw-align-middle"},me)))))},V=({isOpen:k,onDismiss:K,onDeleteAudio:Y})=>Object(e.h)(p.a,{isOpen:k,onClose:K},Object(e.h)(p.d,{includeClose:!1,title:"Something went wrong..."}),Object(e.h)(p.b,null,"Unfortunately, there was a problem with your audio file upload. We'll investigate, but in the meantime, please try again, and we apologize for the inconvenience."),Object(e.h)(p.c,{includeDivider:!1,alignment:"default",primaryButton:Object(e.h)(l.a,{onClick:Y,variant:"primary"},"Got it")}))},function($,n,t){"use strict";t.d(n,"d",function(){return p}),t.d(n,"c",function(){return h}),t.d(n,"b",function(){return m}),t.d(n,"a",function(){return g});var e=t(168),s=t.n(e);const o="substack_ref_url",a="substack_ref";let c,l;typeof window!="undefined"&&window.location&&window.location.href&&(c=window.location.href,l=document.referrer,s.a.get(o)||(s.a.set(o,c),s.a.set(a,l)));const p=s.a.get(o),h=s.a.get(a),m=c,g=l},function($,n,t){var e=t(317),s=typeof self=="object"&&self&&self.Object===Object&&self,o=e||s||Function("return this")();$.exports=o},function($,n,t){"use strict";t.d(n,"b",function(){return e}),t.d(n,"c",function(){return s}),t.d(n,"d",function(){return o}),t.d(n,"a",function(){return a}),t.d(n,"e",function(){return l});const e=({likesEnabled:p=!0}={})=>{const h=[];return h.push({key:"most_recent_first",text:"New First",description:"Newest first (good for live events)"}),p&&h.push({key:"best_first",text:"Top First",description:"Top ranked first"}),h.push({key:"oldest_first",text:"Chronological",description:"Chronological order (oldest first)"}),h},s=p=>e().find(h=>h.key===p).text,o=function(p,h){if(Symbol.iterator in Object(p)){for(const m of p)if(h(m)===!1||o(m.children||[],h)===!1)return!1}},a={review_required:"review_required",edit_review_required:"edit_review_required",published:"published",flagged:"flagged",deleted:"deleted",moderator_approved:"moderator_approved",moderator_removed:"moderator_removed",new_commenter_approval_required:"new_commenter_approval_required"},c=new Set([a.review_required,a.edit_review_required,a.published,a.moderator_approved,a.new_commenter_approval_required]),l=p=>p.deleted?!1:c.has(p.status)},function($,n,t){"use strict";t.d(n,"a",function(){return r});var e=t(0),s=t(2),o=t(6),a=t.n(o),c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(i,d,b)=>d in i?c(i,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):i[d]=b,O=(i,d)=>{for(var b in d||(d={}))m.call(d,b)&&v(i,b,d[b]);if(h)for(var b of h(d))g.call(d,b)&&v(i,b,d[b]);return i},u=(i,d)=>l(i,p(d));function r(i,d="div",b){return Object(s.forwardRef)((w,E)=>Object(e.createElement)(d,u(O(O({},b),w),{ref:E,className:a()(i,w==null?void 0:w.className)})))}},function($,n,t){var e=t(109),s=t(677),o=t(342),a="Expected a function",c=Math.max,l=Math.min;function p(h,m,g){var v,O,u,r,i,d,b=0,w=!1,E=!1,S=!0;if(typeof h!="function")throw new TypeError(a);m=o(m)||0,e(g)&&(w=!!g.leading,E="maxWait"in g,u=E?c(o(g.maxWait)||0,m):u,S="trailing"in g?!!g.trailing:S);function P(L){var C=v,R=O;return v=O=void 0,b=L,r=h.apply(R,C),r}function D(L){return b=L,i=setTimeout(f,m),w?P(L):r}function W(L){var C=L-d,R=L-b,U=m-C;return E?l(U,u-R):U}function B(L){var C=L-d,R=L-b;return d===void 0||C>=m||C<0||E&&R>=u}function f(){var L=s();if(B(L))return y(L);i=setTimeout(f,W(L))}function y(L){return i=void 0,S&&v?P(L):(v=O=void 0,r)}function M(){i!==void 0&&clearTimeout(i),b=0,v=d=O=i=void 0}function N(){return i===void 0?r:y(s())}function A(){var L=s(),C=B(L);if(v=arguments,O=this,d=L,C){if(i===void 0)return D(d);if(E)return clearTimeout(i),i=setTimeout(f,m),P(d)}return i===void 0&&(i=setTimeout(f,m)),r}return A.cancel=M,A.flush=N,A}$.exports=p},function($,n,t){"use strict";t.d(n,"a",function(){return ht}),t.d(n,"b",function(){return Le}),t.d(n,"c",function(){return ue});var e=t(2);function s(Pe,de){for(var be=0;be<de.length;be++){var Ie=de[be];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(Pe,Ie.key,Ie)}}function o(Pe,de,be){return de&&s(Pe.prototype,de),be&&s(Pe,be),Pe}function a(){return a=Object.assign||function(Pe){for(var de=1;de<arguments.length;de++){var be=arguments[de];for(var Ie in be)Object.prototype.hasOwnProperty.call(be,Ie)&&(Pe[Ie]=be[Ie])}return Pe},a.apply(this,arguments)}function c(Pe,de){Pe.prototype=Object.create(de.prototype),Pe.prototype.constructor=Pe,l(Pe,de)}function l(Pe,de){return l=Object.setPrototypeOf||function(Ie,ke){return Ie.__proto__=ke,Ie},l(Pe,de)}function p(Pe,de){if(Pe==null)return{};var be={},Ie=Object.keys(Pe),ke,Te;for(Te=0;Te<Ie.length;Te++)ke=Ie[Te],!(de.indexOf(ke)>=0)&&(be[ke]=Pe[ke]);return be}function h(Pe,de){if(!!Pe){if(typeof Pe=="string")return m(Pe,de);var be=Object.prototype.toString.call(Pe).slice(8,-1);if(be==="Object"&&Pe.constructor&&(be=Pe.constructor.name),be==="Map"||be==="Set")return Array.from(Pe);if(be==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(be))return m(Pe,de)}}function m(Pe,de){(de==null||de>Pe.length)&&(de=Pe.length);for(var be=0,Ie=new Array(de);be<de;be++)Ie[be]=Pe[be];return Ie}function g(Pe,de){var be=typeof Symbol!="undefined"&&Pe[Symbol.iterator]||Pe["@@iterator"];if(be)return(be=be.call(Pe)).next.bind(be);if(Array.isArray(Pe)||(be=h(Pe))||de&&Pe&&typeof Pe.length=="number"){be&&(Pe=be);var Ie=0;return function(){return Ie>=Pe.length?{done:!0}:{done:!1,value:Pe[Ie++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(Pe){var de=Object(e.useRef)(null);function be(Ie){!Ie||Ie===de.current||(de.current=Ie,Pe(Ie))}return be}function O(Pe){var de=Object(e.useRef)(Pe);return Object(e.useMemo)(function(){function be(ke){typeof ke=="function"?de.current=ke(de.current):de.current=ke}function Ie(){return de.current}return[Ie,be]},[])}function u(){var Pe=Object(e.useRef)([]);return Object(e.useMemo)(function(){function de(){return Pe.current.length>0}function be(){for(var ke=g(Pe.current),Te;!(Te=ke()).done;){var x=Te.value;x()}Pe.current=[]}function Ie(ke){Pe.current.push(ke)}return{hasEventSubscriptions:de,removeAllEventSubscriptions:be,addEventSubscription:Ie}},[])}var r=typeof window!="undefined"?e.useLayoutEffect:e.useEffect;function i(Pe,de){var be=Object(e.useRef)(Pe);return de?(be.current=Pe,be):(be.current=null,be)}var d={top:0,left:0,right:1,bottom:1,width:1,height:1};function b(Pe){var de=Pe===void 0?{}:Pe,be=de.enabled,Ie=be===void 0?!0:be,ke=de.preventDefault,Te=ke===void 0?!0:ke,x=Object(e.useRef)(null),H=Object(e.useState)(d),le=H[0],Ce=H[1];function Ue(){Ce(d)}var Ve=le!==d;function bt(yt){if(!!Ie){Te&&yt.preventDefault();var Qt=yt.clientX,tn=yt.clientY;Ce({top:tn,left:Qt,width:1,height:1,right:Qt+1,bottom:tn+1})}}return{hasMousePosition:Ve,resetMousePosition:Ue,handleMouseEvent:bt,trigger:{getBounds:function(){return le},getParent:x.current?function(){return x.current}:void 0},parentRef:x}}function w(Pe){return parseFloat(Pe.replace("px",""))}function E(Pe,de,be){return Pe<de?de:Pe>be?be:Pe}function S(Pe){return Pe!=null}function P(){for(var Pe=arguments.length,de=new Array(Pe),be=0;be<Pe;be++)de[be]=arguments[be];return function(Ie){for(var ke=g(de),Te;!(Te=ke()).done;){var x=Te.value;!x||(typeof x=="function"?x(Ie):x.current=Ie)}}}function D(Pe,de){if(typeof Pe!="undefined")return de||Pe.ResizeObserver}function W(Pe,de){var be=[];if(!Pe||!de||Pe===document.body)return be;var Ie=de.getComputedStyle(Pe),ke=Ie.overflow,Te=Ie.overflowX,x=Ie.overflowY;return[ke,Te,x].some(function(H){return["auto","scroll"].includes(H)})&&be.push(Pe),[].concat(be,W(Pe.parentElement,de))}function B(Pe){return"react-laag: Could not find a valid reference for the "+Pe+` element. There might be 2 causes:
   - Make sure that the 'ref' is set correctly on the `+Pe+` element when isOpen: true. Also make sure your component forwards the ref with "forwardRef()".
   - Make sure that you are actually rendering the `+Pe+" when the isOpen prop is set to true"}function f(Pe){var de=Pe.enabled,be=Pe.onChange,Ie=Pe.environment,ke=Pe.ResizeObserverPolyfill,Te=Pe.overflowContainer,x=Pe.triggerOption,H=D(Ie,ke);Object(e.useEffect)(function(){},[H]);var le=Object(e.useRef)(null),Ce=Boolean(x),Ue=O({scrollContainers:[],trigger:null,layer:null}),Ve=Ue[0],bt=Ue[1],yt=u(),Qt=yt.hasEventSubscriptions,tn=yt.addEventSubscription,Kn=yt.removeAllEventSubscriptions,Ot=Object(e.useCallback)(function(){var ct=Ve(),Xe=ct.layer,gt=ct.trigger,Tt=ct.scrollContainers,Ut=Tt[0];if(!Xe)throw new Error(B("layer"));if(!gt&&!Ce)throw new Error(B("trigger"));var qt={top:0,left:0};if(Ut){var sn=Ut.scrollLeft,_n=Ut.scrollTop;qt={top:_n,left:sn}}else{var Hn=Ie.scrollX,wn=Ie.scrollY;qt={top:wn,left:Hn}}var Un={left:0,top:0};if(Ut){var bn=Ie.getComputedStyle(Ut),cr=bn.borderLeftWidth,fr=bn.borderTopWidth;Un={left:w(cr)||0,top:w(fr)||0}}be({layer:Xe,trigger:gt,scrollContainers:Tt,arrow:le.current},qt,Un)},[Ve,be,Ie,le,Ce]),lt=Object(e.useCallback)(function(){var ct=Ve(),Xe=ct.trigger,gt=ct.layer,Tt=ct.scrollContainers;if(!gt)throw new Error(B("layer"));if(!Xe&&!Ce)throw new Error(B("trigger"));if(H){for(var Ut=!1,qt=function(){if(!Ut){Ut=!0;return}Ot()},sn=new H(qt),_n=0,Hn=[Xe,gt,document.body];_n<Hn.length;_n++){var wn=Hn[_n];wn&&sn.observe(wn)}tn(function(){for(var ur=0,er=[Xe,gt,document.body];ur<er.length;ur++){var jr=er[ur];jr&&sn.unobserve(jr)}sn.disconnect()})}for(var Un=[Ie].concat(Tt),bn=function(){var er=fr.value;er.addEventListener("scroll",Ot),tn(function(){return er.removeEventListener("scroll",Ot)})},cr=g(Un),fr;!(fr=cr()).done;)bn()},[Ve,tn,Ot,Ie,H,Ce]),Be=Object(e.useCallback)(function(nt,ct){de&&nt&&nt!==ct&&(Kn(),lt(),Ot())},[Kn,lt,Ot,de]),_e=v(Object(e.useCallback)(function(nt){var ct=Ve(),Xe=ct.layer;bt(function(gt){return a({},gt,{layer:nt})}),Be(Xe,nt)},[Ve,bt,Be])),Ae=Object(e.useCallback)(function(ct){var Xe=W(ct,Ie),gt=Xe[0];if(gt){var Tt=Ie.getComputedStyle(gt).position,Ut=["relative","absolute","fixed"].includes(Tt)||Te;Ut||(gt.style.position="relative")}return Xe},[Ie,Te]),fe=v(Object(e.useCallback)(function(nt){var ct=Ae(nt),Xe=Ve(),gt=Xe.trigger;bt(function(Tt){return a({},Tt,{trigger:nt,scrollContainers:ct})}),Be(gt,nt)},[Ve,bt,Be,Ae])),ft=x==null||x.getParent==null?void 0:x.getParent();return r(function(){!ft||bt(function(nt){return a({},nt,{scrollContainers:Ae(ft)})})},[ft,bt,Ae]),r(function(){return de&&(Qt()||lt()),function(){Qt()&&Kn()}},[de,Qt,lt,Kn]),r(function(){de&&Ot()}),{triggerRef:fe,layerRef:_e,arrowRef:le,closestScrollContainer:Ve().scrollContainers[0]||null}}var y=Object(e.createContext)({});function M(Pe){var de=Pe.children,be=Pe.registrations,Ie=Object(e.useCallback)(function(Te){return be.current.add(Te),function(){return be.current.delete(Te)}},[be]);return Object(e.createElement)(y.Provider,{value:Ie},de)}function N(Pe,de){for(var be=g(Pe),Ie;!(Ie=be()).done;){var ke=Ie.value.shouldCloseWhenClickedOutside;if(!ke(de))return!1}return!0}function A(Pe){var de=Pe.isOpen,be=Pe.onOutsideClick,Ie=Pe.onParentClose,ke=Object(e.useRef)(null),Te=Object(e.useRef)(null),x=Object(e.useRef)(new Set),H=Object(e.useContext)(y),le=Object(e.useCallback)(function(Ue){var Ve=Ue.target,bt=ke.current&&ke.current.contains(Ve),yt=Te.current&&Te.current.contains(Ve),Qt=N(x.current,Ue);return yt&&Qt&&x.current.forEach(function(tn){var Kn=tn.closeChild;return Kn()}),!bt&&!yt&&Qt},[ke,Te,x]);return Object(e.useEffect)(function(){if(typeof H=="function")return H({shouldCloseWhenClickedOutside:le,closeChild:function(){Ie&&Ie()}})},[H,le,Ie,x]),Object(e.useEffect)(function(){var Ce=typeof H=="function",Ue=!de||!be||Ce;if(Ue)return;function Ve(bt){le(bt)&&be()}return document.addEventListener("click",Ve,!0),function(){return document.removeEventListener("click",Ve,!0)}},[de,be,le,H]),Object(e.useEffect)(function(){de||x.current.forEach(function(Ce){var Ue=Ce.closeChild;return Ue()})},[de]),{closeOnOutsideClickRefs:{trigger:ke,layer:Te},registrations:x}}var L=["bottom-start","bottom-end","bottom-center","top-start","top-center","top-end","left-end","left-center","left-start","right-end","right-center","right-start","center"],C={top:"bottom",left:"right",bottom:"top",right:"left",center:"center"},R=function(){function Pe(be,Ie,ke,Te,x,H,le,Ce,Ue){this.prop=void 0,this.opposite=void 0,this.isHorizontal=void 0,this.sizeProp=void 0,this.oppositeSizeProp=void 0,this.cssProp=void 0,this.oppositeCssProp=void 0,this.isCenter=void 0,this.isPush=void 0,this.prop=be,this.opposite=Ie,this.isHorizontal=ke,this.sizeProp=Te,this.oppositeSizeProp=x,this.cssProp=H,this.oppositeCssProp=le,this.isCenter=Ce,this.isPush=Ue}var de=Pe.prototype;return de.factor=function(Ie){return Ie*(this.isPush?1:-1)},de.isOppositeDirection=function(Ie){return this.isHorizontal!==Ie.isHorizontal},Pe}();function U(Pe,de){de===void 0&&(de=!0);var be=["left","right"].includes(Pe);return new R(Pe,de?U(C[Pe],!1):null,be,be?"width":"height",be?"height":"width",be?"left":"top",be?"top":"left",Pe==="center",!["right","bottom"].includes(Pe))}var Z={top:U("top"),bottom:U("bottom"),left:U("left"),right:U("right")},F=a({},Z,{center:U("center")}),z=["top","left","bottom","right"],G=function(){function Pe(de){return this.top=void 0,this.left=void 0,this.right=void 0,this.bottom=void 0,Object.assign(this,de)}return Pe.mergeSmallestSides=function(be){var Ie=be[0],ke=be.slice(1);if(!Ie)throw new Error("Please provide at least 1 bounds objects in order to merge");for(var Te=Object.fromEntries(z.map(function(bt){return[bt,Ie[bt]]})),x=g(ke),H;!(H=x()).done;)for(var le=H.value,Ce=g(z),Ue;!(Ue=Ce()).done;){var Ve=Ue.value;Te[Ve]=Math.min(Te[Ve],le[Ve])}return new Pe(Te)},o(Pe,[{key:"allSidesArePositive",get:function(){var be=this;return z.every(function(Ie){return be[Ie]>=0})}},{key:"negativeSides",get:function(){var be=this;return Object.fromEntries(z.filter(function(Ie){return be[Ie]<0}).map(function(Ie){return[Ie,be[Ie]]}))}}]),Pe}();function V(){for(var Pe=arguments.length,de=new Array(Pe),be=0;be<Pe;be++)de[be]=arguments[be];return de.reduce(function(Ie,ke){return Ie+(ke?w(ke):0)},0)}function k(Pe){var de=Pe.top,be=Pe.left,Ie=Pe.right,ke=Pe.bottom,Te=Pe.width,x=Pe.height;return{top:de,left:be,right:Ie,bottom:ke,width:Te,height:x}}var K={top:0,left:0,right:0,bottom:0,width:0,height:0},Y=function(){Pe.create=function(Ie){return new Pe(Ie)},Pe.fromElement=function(Ie,ke){ke===void 0&&(ke={});var Te=ke,x=Te.withTransform,H=x===void 0?!0:x,le=Te.environment,Ce=le===void 0?window:le,Ue=Te.withScrollbars,Ve=Ue===void 0?!0:Ue,bt=k(Ie.getBoundingClientRect()),yt=new Pe(bt);if(!H){var Qt=Ce.getComputedStyle(Ie),tn=Qt.width,Kn=Qt.height,Ot=Qt.boxSizing,lt=Qt.borderLeft,Be=Qt.borderRight,_e=Qt.borderTop,Ae=Qt.borderBottom,fe=Qt.paddingLeft,ft=Qt.paddingRight,nt=Qt.paddingTop,ct=Qt.paddingBottom,Xe=Ot==="border-box"?w(tn):V(tn,lt,Be,fe,ft),gt=Ot==="border-box"?w(Kn):V(Kn,_e,Ae,nt,ct);yt=new Pe(a({},yt,{width:Xe,height:gt}))}if(!Ve){var Tt=yt.width-Ie.clientWidth,Ut=yt.height-Ie.clientHeight;return yt.substract({right:Tt,bottom:Ut})}return yt},Pe.empty=function(){return new Pe},Pe.fromWindow=function(Ie){var ke,Te=(ke=Ie==null?void 0:Ie.document.scrollingElement)!=null?ke:Ie==null?void 0:Ie.document.documentElement,x=Te!=null?Te:{},H=x.clientWidth,le=H===void 0?0:H,Ce=x.clientHeight,Ue=Ce===void 0?0:Ce;return new Pe({width:le,height:Ue,right:le,bottom:Ue})};function Pe(be){return be===void 0&&(be={}),this.top=void 0,this.left=void 0,this.right=void 0,this.bottom=void 0,this.width=void 0,this.height=void 0,Object.assign(this,K,be)}var de=Pe.prototype;return de.toObject=function(){return k(this)},de.merge=function(Ie){var ke=this.toObject();return new Pe(a({},ke,typeof Ie=="function"?Ie(ke):Ie))},de.substract=function(Ie){for(var ke=this.toObject(),Te=Object.entries(Ie),x=0,H=Te;x<H.length;x++){var le=H[x],Ce=le[0],Ue=le[1];if(Ce in Z){var Ve=Z[Ce];ke[Ce]+=Ve.factor(Ue),ke[Ve.isHorizontal?"width":"height"]-=Ue}else ke[Ce]-=Ue||0}return new Pe(ke)},de.offsetsTo=function(Ie){return new G({top:Ie.top-this.top,bottom:this.bottom-Ie.bottom,left:Ie.left-this.left,right:this.right-Ie.right})},de.mapSides=function(Ie){for(var ke=this.toObject(),Te=Object.values(Z),x=0,H=Te;x<H.length;x++){var le=H[x];ke[le.prop]=Ie(le,ke[le.prop])}return new Pe(ke)},o(Pe,[{key:"surface",get:function(){return this.width*this.height}}]),Pe}(),ee=function(){function Pe(be,Ie,ke,Te,x){this.primary=void 0,this.secondary=void 0,this.offsets=void 0,this.subjectsBounds=void 0,this._cachedLayerBounds=null,this._cachedContainerOffsets=null,this.primary=be,this.secondary=Ie,this.offsets=x,this.setSubjectsBounds(ke,Te)}var de=Pe.prototype;return de.setSubjectsBounds=function(Ie,ke){if(!ke){this.subjectsBounds=Ie;return}var Te=typeof ke=="function"?ke(this.primary.prop):ke;this.subjectsBounds=Ie.merge({layer:a({},Ie.layer,Te)})},de.getLayerBounds=function(Ie){if(Ie===void 0&&(Ie=0),this._cachedLayerBounds&&Ie===0)return this._cachedLayerBounds;var ke=this.primary,Te=this.secondary,x=this.subjectsBounds,H=x.trigger,le=x.layer,Ce=x.arrow,Ue=ke.isHorizontal,Ve=ke.oppositeCssProp,bt=ke.oppositeSizeProp,yt=ke.prop,Qt=ke.opposite,tn=Y.empty();tn[Qt.prop]=H[yt]-ke.factor(this.offsets.trigger),tn[yt]=tn[Qt.prop]-ke.factor(le[ke.sizeProp]);var Kn=this.offsets.arrow*2,Ot=H[Ve]-(le[bt]-Ce[bt])+Kn,lt=H[Ve]+(H[bt]-Ce[bt])-Kn;if(Te.isPush||(Ot+=le[bt],lt+=le[bt]),Te.isCenter){var Be=(Ue?Z.top:Z.left).prop,_e=(Ue?Z.bottom:Z.right).prop;tn[Be]=E(H[Be]+H[bt]/2-le[bt]/2+Ie,Ot,lt),tn[_e]=tn[Be]+le[bt]}else{var Ae=Te,fe=H[Ae.prop],ft=fe<Ot?Ot-fe:fe>lt?lt-fe:0;tn[Ae.prop]=E(fe+Ie+ft,Ot,lt),tn[Ae.opposite.prop]=tn[Ae.prop]+Te.factor(le[bt])}tn.width=tn.right-tn.left,tn.height=tn.bottom-tn.top;var nt=Y.create(tn);return Ie===0&&(this._cachedLayerBounds=nt),nt},de.getLayerCollisionBounds=function(){var Ie=this.offsets.container;return this.getLayerBounds().mapSides(function(ke,Te){return Te-=ke.factor(Ie)}).merge(function(ke){var Te=ke.width,x=ke.height;return{width:Te+Ie*2,height:x+Ie*2}})},de.getContainerOffsets=function(Ie){if(this._cachedContainerOffsets&&!Ie)return this._cachedContainerOffsets;var ke=this.subjectsBounds.merge({layer:Ie||this.getLayerCollisionBounds()}),Te=G.mergeSmallestSides(ke.layerOffsetsToScrollContainers);return Ie||(this._cachedContainerOffsets=Te),Te},o(Pe,[{key:"type",get:function(){return this.primary.prop+"-"+(this.secondary.prop==="center"?"center":["bottom","right"].includes(this.secondary.prop)?"end":"start")}},{key:"triggerIsBigger",get:function(){var Ie=this.secondary.isHorizontal,ke=this.subjectsBounds,Te=ke.triggerHasBiggerWidth,x=ke.triggerHasBiggerHeight;return Ie&&Te||!Ie&&x}},{key:"fitsContainer",get:function(){return this.getContainerOffsets().allSidesArePositive}},{key:"visibleSurface",get:function(){var Ie=this.getLayerBounds(),ke=this.getContainerOffsets(Ie),Te=ke.negativeSides;for(var x in Te)Te[x]=-Te[x];return Ie.substract(Te).surface}},{key:"secondaryOffsetSide",get:function(){var Ie,ke,Te=this,x=this.getContainerOffsets(),H=(Ie=(ke=Object.entries(x.negativeSides).map(function(Ce){var Ue=Ce[0],Ve=Ce[1];return[Z[Ue],Ve]}).filter(function(Ce){var Ue=Ce[0];return Te.primary.isOppositeDirection(Ue)}).sort(function(Ce,Ue){var Ve=Ce[1],bt=Ue[1];return bt-Ve}))==null?void 0:ke[0])!=null?Ie:[],le=H[0];return le||null}}]),Pe}(),ae=function(Pe){c(de,Pe);function de(){return Pe.apply(this,arguments)||this}var be=de.prototype;return be.getLayerBounds=function(){var ke=this.subjectsBounds,Te=ke.trigger,x=ke.layer,H=Y.empty();return H.top=Te.top+Te.height/2-x.height/2,H.bottom=H.top+x.height,H.left=Te.left+Te.width/2-x.width/2,H.right=H.left+x.width,H.width=H.right-H.left,H.height=H.bottom-H.top,H},de}(ee);function he(Pe,de,be){var Ie=Pe.layer,ke=Pe.trigger,Te=Pe.arrow,x=de.primary.oppositeSizeProp,H=de.primary.isHorizontal?["top","bottom"]:["left","right"],le=H[0],Ce=H[1],Ue=Ie[le]+Ie[x]/2-ke[le]-Te[x]/2-be,Ve=Ie[Ce]-Ie[x]/2-ke[Ce]+Te[x]/2+be;return(Ue<0?-Ue:0)+(Ve>0?-Ve:0)}var me={position:"absolute",willChange:"top, left",left:null,right:null,top:null,bottom:null};function Ye(Pe,de,be){var Ie;if(de.primary.isCenter)return me;var ke=Pe.layer,Te=Pe.trigger,x=Pe.arrow,H=de.primary.oppositeSizeProp,le=Te[H]>ke[H],Ce=be+x[H]/2,Ue=ke[H]-x[H]/2-be,Ve=he(Pe,de,be),bt=de.primary.prop,yt=de.primary.oppositeCssProp,Qt=le?ke[H]/2+Ve:Te[yt]+Te[H]/2-ke[yt];return a({},me,(Ie={},Ie[bt]="100%",Ie[yt]=E(Qt,Ce,Ue),Ie))}var se=function(){function Pe(be,Ie,ke){this.placements=void 0,this.config=void 0,this.subjectsBounds=void 0,this.placements=be,this.config=Ie,this.subjectsBounds=ke}Pe.getSidesFromPlacementType=function(Ie){var ke=Ie.split("-"),Te=ke[0],x=ke[1],H=Z[Te],le;return x==="center"?le=F.center:H.isHorizontal?le=x==="start"?F.top:F.bottom:le=x==="start"?F.left:F.right,[H,le]},Pe.create=function(Ie,ke){var Te={arrow:ke.arrowOffset,container:ke.containerOffset,trigger:ke.triggerOffset};function x(H){H===void 0&&(H=ke.placement);var le=Pe.getSidesFromPlacementType(H),Ce=le[0],Ue=le[1],Ve=Z[Ce.isHorizontal?ke.preferY:ke.preferX],bt=!Ce.isHorizontal&&Ie.triggerHasBiggerWidth||Ce.isHorizontal&&Ie.triggerHasBiggerHeight;function yt(tn,Kn){return new ee(tn,Kn,Ie,ke.layerDimensions,Te)}var Qt=[];return Qt[0]=yt(Ce,Ue),Qt[1]=yt(Ce,Ue.isCenter?Ve:F.center),Qt[2]=yt(Ce,F[(Ue.opposite.isCenter?Ve.opposite:Ue.opposite).prop]),Qt[3]=yt(Ve,bt?Ce:F[Ce.opposite.prop]),Qt[4]=yt(Ve,F.center),Qt[5]=yt(Ve,bt?F[Ce.opposite.prop]:Ce),Qt[6]=yt(Z[Ve.opposite.prop],bt?Ce:F[Ce.opposite.prop]),Qt[7]=yt(Z[Ve.opposite.prop],F.center),Qt[8]=yt(Z[Ve.opposite.prop],bt?F[Ce.opposite.prop]:Ce),Qt[9]=yt(Z[Ce.opposite.prop],Ue),Qt[10]=yt(Z[Ce.opposite.prop],Ue.isCenter?Ve:F.center),Qt[11]=yt(Z[Ce.opposite.prop],F[(Ue.opposite.isCenter?Ve.opposite:Ue.opposite).prop]),Qt=Qt.filter(function(tn){return tn.type===ke.placement||ke.possiblePlacements.includes(tn.type)}),Qt}return ke.placement==="center"?new Pe([new ae(F.center,F.center,Ie,ke.layerDimensions,Te)].concat(x(ke.preferY+"-"+ke.preferX)),ke,Ie):new Pe(x(),ke,Ie)};var de=Pe.prototype;return de.filterPlacementsBySide=function(Ie){return this.placements.filter(function(ke){return ke.primary===Ie})},de.findFirstPlacementThatFits=function(){return this.placements.find(function(Ie){return Ie.fitsContainer})},de.placementWithBiggestVisibleSurface=function(){var Ie=this.placements.map(function(Te){return{placement:Te,surface:Te.visibleSurface}}).sort(function(Te,x){return x.surface-Te.surface}),ke=Ie[0].placement;return ke},de.findSuitablePlacement=function(){return this.config.auto?this.findFirstPlacementThatFits()||this.placementWithBiggestVisibleSurface():this.placements[0]},de.getSecondaryOffset=function(Ie){var ke=this.config,Te=ke.auto,x=ke.snap;if(!Te||x||Ie instanceof ae)return 0;var H=this.filterPlacementsBySide(Ie.primary),le=H.indexOf(Ie)===0;if(le&&Ie.fitsContainer)return 0;var Ce=H.find(function(tn){return!tn.fitsContainer});if(!Ce)return 0;var Ue=Ce.secondaryOffsetSide;if(!Ue)return 0;var Ve=Ie.getContainerOffsets(),bt=Ie.secondary,yt;Ie.triggerIsBigger||Ce===Ie?yt=Ue.isPush?-1:1:yt=bt===F.left||[F.top,F.center].includes(bt)&&Ue.isPush?-1:1;var Qt=Ve[Ue.prop];return Qt*yt},de.getStyles=function(Ie,ke,Te,x){var H={willChange:"top, left, width, height"},le=Ye(this.subjectsBounds.merge({layer:Ie}),ke,this.config.arrowOffset),Ce=this.config.overflowContainer?a({},H,{position:"fixed",top:Ie.top,left:Ie.left}):a({},H,{position:"absolute",top:Ie.top-this.subjectsBounds.parent.top+Te.top-x.top,left:Ie.left-this.subjectsBounds.parent.left+Te.left-x.left});return{arrow:le,layer:Ce}},de.getHasDisappeared=function(Ie){var ke=this.config.overflowContainer?this.subjectsBounds.trigger:Ie,Te=G.mergeSmallestSides(this.subjectsBounds.offsetsToScrollContainers(ke,!0)),x=Object.entries(Te.negativeSides),H=x.some(function(le){var Ce=le[0],Ue=le[1],Ve=Z[Ce];return Ue<=-ke[Ve.sizeProp]});return H?"full":Te.allSidesArePositive?null:"partial"},de.result=function(Ie,ke){var Te=this.findSuitablePlacement(),x=this.getSecondaryOffset(Te),H=Te.getLayerBounds(x),le=this.getStyles(H,Te,Ie,ke),Ce=Te.primary.prop;return{styles:le,layerSide:Ce,placement:Te,layerBounds:H,hasDisappeared:this.getHasDisappeared(H)}},Pe}(),ie=function(){function Pe(be,Ie){this.overflowContainer=void 0,this.trigger=void 0,this.layer=void 0,this.arrow=void 0,this.parent=void 0,this.window=void 0,this.scrollContainers=void 0,this.overflowContainer=Ie,Object.assign(this,be)}Pe.create=function(Ie,ke,Te,x,H,le,Ce,Ue){var Ve=Y.fromWindow(Ie);return new Pe({layer:Y.fromElement(ke,{environment:Ie,withTransform:!1}),trigger:Ue?Y.create(k(Ue())):Y.fromElement(Te),arrow:H?Y.fromElement(H):Y.empty(),parent:x?Y.fromElement(x):Ve,window:Ve,scrollContainers:[Ve].concat(le.map(function(bt){return Y.fromElement(bt,{withScrollbars:!1})}))},Ce)};var de=Pe.prototype;return de.merge=function(Ie){return new Pe(a({},this,Ie),this.overflowContainer)},de.offsetsToScrollContainers=function(Ie,ke){ke===void 0&&(ke=!1);var Te=this.overflowContainer&&!ke?[this.window]:this.scrollContainers;return Te.map(function(x){return x.offsetsTo(Ie)})},o(Pe,[{key:"layerOffsetsToScrollContainers",get:function(){return this.offsetsToScrollContainers(this.layer)}},{key:"triggerHasBiggerWidth",get:function(){return this.trigger.width>this.layer.width}},{key:"triggerHasBiggerHeight",get:function(){return this.trigger.height>this.layer.height}}]),Pe}(),Ee=null;function Oe(Pe){typeof document!="undefined"&&(typeof Pe=="function"?Ee=Pe():typeof Pe=="string"?Ee=document.getElementById(Pe):Ee=Pe)}var ce={auto:!1,arrowOffset:0,containerOffset:10,triggerOffset:0,overflowContainer:!0,placement:"top-center",possiblePlacements:L,preferX:"right",preferY:"bottom",snap:!1,container:void 0,trigger:void 0};function ue(Pe){var de,be=Pe.isOpen,Ie=be===void 0?!1:be,ke=Pe.overflowContainer,Te=ke===void 0?ce.overflowContainer:ke,x=Pe.environment,H=x===void 0?typeof window!="undefined"?window:void 0:x,le=Pe.ResizeObserver,Ce=Pe.placement,Ue=Ce===void 0?ce.placement:Ce,Ve=Pe.possiblePlacements,bt=Ve===void 0?ce.possiblePlacements:Ve,yt=Pe.preferX,Qt=yt===void 0?ce.preferX:yt,tn=Pe.preferY,Kn=tn===void 0?ce.preferY:tn,Ot=Pe.auto,lt=Ot===void 0?ce.auto:Ot,Be=Pe.snap,_e=Be===void 0?ce.snap:Be,Ae=Pe.triggerOffset,fe=Ae===void 0?ce.triggerOffset:Ae,ft=Pe.containerOffset,nt=ft===void 0?ce.containerOffset:ft,ct=Pe.arrowOffset,Xe=ct===void 0?ce.arrowOffset:ct,gt=Pe.container,Tt=gt===void 0?ce.container:gt,Ut=Pe.layerDimensions,qt=Ut===void 0?null:Ut,sn=Pe.onDisappear,_n=Pe.onOutsideClick,Hn=Pe.onParentClose,wn=Pe.trigger,Un=Object(e.useState)(function(){return{layerSide:Ue==="center"?"center":se.getSidesFromPlacementType(Ue)[0].prop,styles:{layer:{position:Te?"fixed":"absolute",top:0,left:0},arrow:{position:"absolute",top:0,left:0}}}}),bn=Un[0],cr=Un[1],fr=Object(e.useRef)(null),ur=i(bn,Ie),er=Object(e.useRef)({cancelled:!1});Object(e.useEffect)(function(){return function(){er.current.cancelled=!0}},[]);var jr=Object(e.useCallback)(function(Zn,At,Xt){var en=Zn.arrow,$n=Zn.layer,Xn=Zn.scrollContainers,Yn=Zn.trigger,Sn=Xn[0],nr=ie.create(H,$n,Yn,Sn,en,Xn,Te,wn==null?void 0:wn.getBounds),zt={placement:Ue,possiblePlacements:bt,auto:lt,layerDimensions:qt,arrowOffset:Xe,containerOffset:nt,triggerOffset:fe,preferX:Qt,preferY:Kn,snap:_e,overflowContainer:Te},Kt=se.create(nr,zt).result(At,Xt),$t=Kt.hasDisappeared,et=Kt.layerSide,Wt=Kt.styles,Vt={layerSide:et,styles:Wt};if(!ur.current||pe(ur.current,Vt)){ur.current=Vt,er.current.cancelled=!0;var cn={cancelled:!1};er.current=cn,Promise.resolve().then(function(){cn.cancelled||cr(Vt)})}S($t)&&S(sn)&&sn($t)},[Xe,lt,nt,H,qt,sn,Te,Ue,bt,Qt,Kn,_e,fe,ur,wn]),wt=f({ResizeObserverPolyfill:le,environment:H,enabled:Ie,overflowContainer:Te,onChange:jr,triggerOption:wn}),mt=wt.triggerRef,Fe=wt.layerRef,pt=wt.arrowRef,Dt=wt.closestScrollContainer,Jt=A({isOpen:Ie,onOutsideClick:_n,onParentClose:Hn}),Gt=Jt.closeOnOutsideClickRefs,mn=Jt.registrations,Cn={triggerProps:Boolean(wn)?{}:{ref:P(mt,Gt.trigger,fr)},layerProps:{ref:P(Fe,Gt.layer),style:bn.styles.layer},arrowProps:{ref:pt,style:bn.styles.arrow,layerSide:bn.layerSide},layerSide:bn.layerSide,triggerBounds:Ie?wn?wn.getBounds():(de=fr.current)==null?void 0:de.getBoundingClientRect():null,renderLayer:function(Zn){return typeof document!="undefined"?Object(e.createPortal)(Object(e.createElement)(M,{registrations:mn,children:Zn}),Te||!Dt?ne(Tt):Dt):null}};return Cn}function pe(Pe,de){if(Pe.layerSide!==de.layerSide)return!0;for(var be=["position","top","left","right","bottom"],Ie=0,ke=be;Ie<ke.length;Ie++){var Te=ke[Ie];if(Pe.styles.layer[Te]!==de.styles.layer[Te]||Pe.styles.arrow[Te]!==de.styles.arrow[Te])return!0}return!1}var $e="layers";function ne(Pe){var de;if(typeof Pe=="function"){if(de=Pe(),!de||!(de instanceof HTMLElement))throw new Error("react-laag: You've passed a function to the 'container' prop, but it returned no valid HTMLElement")}else if(Pe instanceof HTMLElement)de=Pe;else if(typeof Pe=="string"){if(de=document.getElementById(Pe),!de)throw new Error("react-laag: You've passed element with id '"+Pe+"' to the 'container' prop, but it returned no valid HTMLElement")}else{if(Ee instanceof HTMLElement)return Ee;de=document.getElementById($e),de||(de=document.createElement("div"),de.id=$e,de.style.cssText=`
        position: absolute;
        top: 0px;
        left: 0px;
        right: 0px;
      `,document.body.appendChild(de))}return de}var X=["size","angle","borderWidth","borderColor","roundness","backgroundColor","layerSide","style"],q="left",Ne="top",Qe="bottom",Ze="right";function tt(Pe,de){return Math.tan(Pe*(Math.PI/180))*de}function Ft(Pe,de,be,Ie){var ke,Te=(ke={},ke[Qe]="0 "+-Ie+" "+de+" "+Pe,ke[Ne]="0 0 "+de+" "+(Pe+Ie),ke[Ze]=-Ie+" 0 "+Pe+" "+de,ke[q]="0 0 "+(Pe+Ie)+" "+de,ke);return Te[be.prop]}function Lt(Pe,de,be,Ie,ke){var Te,x,H,le=Ie/10*Pe*2,Ce=(Te={},Te[Qe]=[0,Pe],Te[Ne]=[0,0],Te[Ze]=[Pe,de],Te[q]=[0,de],Te)[be.prop].join(" "),Ue=be.isHorizontal?"V 0":"H "+de,Ve=de/2,bt=de/2+tt(ke,Pe/8),yt=Pe/8,Qt=(x={},x[Qe]=["C",bt,yt,Ve+le,0,Ve,0],x[Ne]=["C",bt,Pe-yt,Ve+le,Pe,Ve,Pe],x[Ze]=["C",yt,de-bt,0,Ve-le,0,Ve],x[q]=["C",Pe-yt,de-bt,Pe,Ve-le,Pe,Ve],x)[be.prop].join(" "),tn=de/2-tt(ke,Pe/8),Kn=Pe/8,Ot=(H={},H[Qe]=["C",Ve-le,0,tn,Kn,Ce],H[Ne]=["C",Ve-le,Pe,tn,Pe-Kn,Ce],H[Ze]=["C",0,Ve+le,Kn,de-tn,Ce],H[q]=["C",Pe,Ve+le,Pe-Kn,de-tn,Ce],H)[be.prop].join(" ");return["M",Ce,Ue,Qt,Ot].join(" ")}function rn(Pe,de,be,Ie,ke){var Te=tt(ke,be),x=Ie.isPush?[0,be]:[Pe,Pe-be],H=x[0],le=x[1];return Ie.isHorizontal?["M",H,be,"V",de-be,"L",le,de-be-Te,"V",Te+be,"Z"].join(" "):["M",be,H,"H",de-be,"L",de-be-Te,le,"H",Te+be,"Z"].join(" ")}var ht=Object(e.forwardRef)(function(de,be){var Ie=de.size,ke=Ie===void 0?8:Ie,Te=de.angle,x=Te===void 0?45:Te,H=de.borderWidth,le=H===void 0?0:H,Ce=de.borderColor,Ue=Ce===void 0?"black":Ce,Ve=de.roundness,bt=Ve===void 0?0:Ve,yt=de.backgroundColor,Qt=yt===void 0?"white":yt,tn=de.layerSide,Kn=tn===void 0?"top":tn,Ot=de.style,lt=Ot===void 0?{}:Ot,Be=p(de,X);if(Kn==="center")return null;var _e=Z[Kn],Ae=ke,fe=tt(x,ke)*2,ft=Math.max(Ae,fe);return Object(e.createElement)("svg",a({ref:be},Be,{style:a({},lt,{transform:"translate"+(_e.isHorizontal?"Y":"X")+"(-50%)"}),width:ft,height:ft,preserveAspectRatio:_e.isPush?"xMinYMin":"xMaxYMax",viewBox:Ft(Ae,fe,_e,le)}),Object(e.createElement)("path",{fill:Qt,strokeWidth:le,stroke:Ue,d:Lt(Ae,fe,_e,bt,x)}),Object(e.createElement)("path",{fill:Qt,d:rn(Ae,fe,le,_e,x)}))}),je;(function(Pe){Pe[Pe.ENTERING=0]="ENTERING",Pe[Pe.LEAVING=1]="LEAVING",Pe[Pe.IDLE=2]="IDLE"})(je||(je={}));function Le(Pe){var de=Pe===void 0?{}:Pe,be=de.delayEnter,Ie=be===void 0?0:be,ke=de.delayLeave,Te=ke===void 0?0:ke,x=de.hideOnScroll,H=x===void 0?!0:x,le=Object(e.useState)(!1),Ce=le[0],Ue=le[1],Ve=Object(e.useRef)(null),bt=Object(e.useRef)(je.IDLE),yt=Object(e.useRef)(!1),Qt=Object(e.useCallback)(function(){clearTimeout(Ve.current),Ve.current=null,bt.current=je.IDLE},[]);function tn(){bt.current===je.LEAVING&&Ve.current&&Qt(),!Ce&&(bt.current=je.ENTERING,Ve.current=window.setTimeout(function(){Ue(!0),Ve.current=null,bt.current=je.IDLE},Ie))}function Kn(lt,Be){if(bt.current===je.ENTERING&&Ve.current&&Qt(),!!Ce){if(Be){Ue(!1),Ve.current=null,bt.current=je.IDLE;return}bt.current=je.LEAVING,Ve.current=window.setTimeout(function(){Ue(!1),Ve.current=null,bt.current=je.IDLE},Te)}}Object(e.useEffect)(function(){function lt(){Ce&&H&&(Qt(),Ue(!1))}return window.addEventListener("scroll",lt,!0),function(){window.removeEventListener("scroll",lt,!0),Ve.current&&clearTimeout(Ve.current)}},[Ce,H,Qt]);var Ot={onMouseEnter:tn,onMouseLeave:Kn,onTouchStart:function(){yt.current=!1},onTouchMove:function(){yt.current=!0},onTouchEnd:function(){!yt.current&&!Ce&&Ue(!0),yt.current=!1}};return[Ce,Ot,function(){return Kn(null,!0)}]}function rt(Pe){var de=Pe.isOpen,be=Pe.children,Ie=Object(e.useState)({isOpenInternal:de,isLeaving:!1}),ke=Ie[0],Te=Ie[1],x=Object(e.useRef)(!1);return Object(e.useEffect)(function(){de?Te({isOpenInternal:!0,isLeaving:!1}):x.current&&Te({isOpenInternal:!1,isLeaving:!0})},[de,Te]),Object(e.useEffect)(function(){},[be]),Object(e.useEffect)(function(){x.current=!0},[]),!de&&!ke.isOpenInternal&&!ke.isLeaving?null:be(ke.isOpenInternal,function(){ke.isOpenInternal||Te(function(H){return a({},H,{isLeaving:!1})})},ke.isLeaving)}},function($,n,t){"use strict";t.r(n),t.d(n,"MOBILE_USER_AGENT_PATTERN",function(){return e}),t.d(n,"MOBILE_USER_AGENT_FIRST_4_PATTERN",function(){return s}),t.d(n,"isMobile",function(){return o}),t.d(n,"isMobileUserAgent",function(){return a}),t.d(n,"getIosVersion",function(){return c}),t.d(n,"isIos",function(){return l}),t.d(n,"isAndroidUserAgent",function(){return h}),t.d(n,"isAndroid",function(){return m});const e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;function o(g={}){let v=typeof navigator!="undefined"?navigator.userAgent||navigator.vendor:void 0;return!v&&typeof window!="undefined"&&(v=window.opera),v?a(v,g):!1}function a(g,{checkFirst4:v}={}){return e.lastIndex=0,s.lastIndex=0,!!(e.test(g)||v&&s.test(g.substr(0,4)))}function c(){if(typeof navigator=="undefined")return null;const g=navigator.userAgent;if(!g.match(/iPad/i)&&!g.match(/iPhone/i))return null;const v=g.indexOf("OS ");return v===-1?null:parseInt(g.substr(v+3,3).replace("_","."))||null}function l(){return!!c()}const p=/Android/i;function h(g){return p.lastIndex=0,!!g&&p.test(g)}function m(){return typeof navigator=="undefined"?!1:h(navigator.userAgent)}},function($,n,t){"use strict";t.d(n,"c",function(){return f}),t.d(n,"a",function(){return y}),t.d(n,"b",function(){return R});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(3),l=t.n(c),p=t(7),h=t(141),m=t(386),g=t(241),v=t(268),O=t(112),u=t(187),r=t(72),i=t(354),d=t(159),b=Object.defineProperty,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(U,Z,F)=>Z in U?b(U,Z,{enumerable:!0,configurable:!0,writable:!0,value:F}):U[Z]=F,D=(U,Z)=>{for(var F in Z||(Z={}))E.call(Z,F)&&P(U,F,Z[F]);if(w)for(var F of w(Z))S.call(Z,F)&&P(U,F,Z[F]);return U},W=(U,Z,F)=>(P(U,typeof Z!="symbol"?Z+"":Z,F),F);const B=33;class f extends e.Component{constructor(){super(...arguments);W(this,"onClick",Z=>{if(this.props.onClick)this.props.onClick(Z);else if(this.props.modalProfile)Z.preventDefault(),Z.stopPropagation(),this.profileShown||(this.profileShown=!0,Object(p.i)(p.a.USER_HEAD_CLICKED,{is_self:this.isSelf()})),this.state.includeProfile?this.profile.open():this.setState({includeProfile:!0},()=>this.profile.open());else return!1})}static getSubject(Z){return Z?Z.author_id?{id:Z.author_id,name:Z.author_name,photo_url:Object(c.getUserPhotoUrl)(Z,{preferAuthorPhoto:!0}),publications:Z.subdomain?[Z]:[]}:Z.user_id?{id:Z.user_id,name:Z.name,photo_url:Object(c.getUserPhotoUrl)(Z),publications:[]}:{id:Z.id,name:Z.name,photo_url:Object(c.getUserPhotoUrl)(Z),publications:[]}:{id:null,name:null,photo_url:c.DEFAULT_PHOTO_URL,publications:[]}}static hasCustomProfilePhoto(Z){return!!f.getSubject(Z).photo_url}isSelf(){return this.props.user&&this.props.user.id===f.getSubject(this.props.subject).id||!this.props.subject}profileUrl(){return this.props.isAuthor?Object(c.getProfileUrl)(f.getSubject(this.props.subject),this.props.pub,{base:this.props.isStatic}):Object(c.getReaderProfileUrl)(f.getSubject(this.props.subject))}onBeforeProfileClose(Z){if(!!Z)if(this.props.onEdit)this.props.onEdit();else return document.location.reload(),!1}render({subject:Z,pub:F,user:z,badge:G,freeSignup:V,freeSignupEmail:k,token:K,isStatic:Y,size:ee,modalProfile:ae,isBanned:he,lazy:me,tooltip:Ye,noLink:se,className:ie}){ee=ee||B;const Ee=f.getSubject(Z);return Object(e.h)("div",{className:a()("user-head",{banned:he},ie)},se?Object(e.h)(y,{photo_url:Ee.photo_url,size:ee,isStatic:Y,isBanned:he,lazy:me,badge:G,tooltip:Ye,className:"default-pointer"}):Object(e.h)("a",{href:Y||!ae?this.profileUrl():null,onClick:this.onClick},Object(e.h)(y,{photo_url:Ee.photo_url,size:ee,isStatic:Y,isBanned:he,lazy:me,badge:G,tooltip:Ye})),this.props.modalProfile&&!Y&&typeof window!="undefined"&&this.state.includeProfile&&(this.isSelf()?Object(e.h)(u.c,{ref:Oe=>this.profile=Oe,user:z,freeSignup:V,freeSignupEmail:k,needsPhoto:!0,token:K,onBeforeClose:Oe=>this.onBeforeProfileClose(Oe)}):Object(e.h)(d.a,{ref:Oe=>this.profile=Oe,profileUser:Ee,pub:F,isBanned:he})))}}const y=({photo_url:U,size:Z,isStatic:F,isBanned:z,lazy:G,badge:V,tooltip:k,style:K,expandable:Y,children:ee,className:ae})=>{const[he,me]=Object(s.k)(!1),Ye=!U&&!!ee,se={founding:v.default,author:m.default}[V];return Object(e.h)("div",{onClick:()=>{Y&&me(!0)},className:a()("profile-img-wrap",ae)},Ye?ee:G?Object(e.h)(A,D({},{photo_url:U,size:Z,isStatic:F,badge:V,style:K})):Object(e.h)(L,D({},{photo_url:U,size:Z,isStatic:F,badge:V,style:K})),se&&Object(e.h)("div",{className:"profile-img-badge",title:k},Object(e.h)(se,{height:14,width:14,stroke:"var(--print_on_pop)",title:k})),z&&Object(e.h)(g.default,null),Object(e.h)(h.a,{module:"./ImageViewerModal",resolve:ie=>ie.ImageViewerModal,onRequest:()=>Promise.all([t.e(15),t.e(16)]).then(t.bind(null,246)),showModal:he,modalContent:[{src:Ye?ee:U,attrs:{src:Ye?ee:U}}],onClose:()=>{me(!1)},step:0,includeDownloadButton:!1}))};function M(U){}const N=(U,Z)=>Object(c.cloudinary)(U,Z*2,{height:Z*2,crop:"fill"}),A=({photo_url:U,size:Z,isStatic:F,badge:z,style:G})=>{const[V,k]=Object(i.a)({}),K=!k||k.isIntersecting?U:c.DEFAULT_PHOTO_URL;return Object(e.h)(C,{url:N(K,Z),size:Z,ref:V,badge:z,isStatic:F,style:G})},L=({photo_url:U,size:Z,isStatic:F,badge:z,style:G})=>Object(e.h)(C,{url:N(U,Z),size:Z,badge:z,isStatic:F,style:G}),C=({url:U,size:Z,isStatic:F,ref:z,badge:G,className:V})=>F?Object(e.h)(O.a,{className:V,src:Object(c.cloudinary)(U,Z*2,{height:Z*2,crop:"fill"}),ref:z,height:Z,width:Z,alt:G||""}):Object(e.h)(r.a,{className:V,src:U,imageProps:{height:Z*2,crop:"fill"},maxWidth:Z*2,ref:z,alt:G||""}),R=({imageUrl:U,alt:Z,size:F,className:z})=>Object(e.h)(C,{className:`user-photo ${z||""}`,url:U,badge:Z,size:F})},function($,n,t){"use strict";t.d(n,"a",function(){return c}),t.d(n,"b",function(){return o}),t.d(n,"c",function(){return a});var e=t(2);let s=Object(e.createContext)(null);s.displayName="OpenClosedContext";var o=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(o||{});function a(){return Object(e.useContext)(s)}function c({value:l,children:p}){return e.default.createElement(s.Provider,{value:l},p)}},function($,n){n.cleanSlug=(t,{hashIfEmpty:e=!1,allowUnicode:s=!1}={})=>{const o=(t||"").toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(s?/[^\p{L}-]+/gu:/[^\w-]+/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");return t&&typeof t=="string"&&!o&&e?Array.from(t).map(a=>a.codePointAt(0)).map(a=>a.toString(16)).join("").substring(0,12):o}},function($,n,t){"use strict";n.a={publicationPopover:"frontend-reader2-ProfileAndPublicationHoverCard-module__publicationPopover--FP81S",hoverCardDivider:"frontend-reader2-ProfileAndPublicationHoverCard-module__hoverCardDivider--2jACG",hoverCardAvatar:"frontend-reader2-ProfileAndPublicationHoverCard-module__hoverCardAvatar--3ak__",hoverCardTitle:"frontend-reader2-ProfileAndPublicationHoverCard-module__hoverCardTitle--7fiVH",hoverCardSeeAll:"frontend-reader2-ProfileAndPublicationHoverCard-module__hoverCardSeeAll--84ePI",hoverCardClamp:"frontend-reader2-ProfileAndPublicationHoverCard-module__hoverCardClamp--PUBdi",profileHoverCardTarget:"frontend-reader2-ProfileAndPublicationHoverCard-module__profileHoverCardTarget--1uh2V",publicationHoverCardTarget:"frontend-reader2-ProfileAndPublicationHoverCard-module__publicationHoverCardTarget--3Krmf",profileHoverCard:"frontend-reader2-ProfileAndPublicationHoverCard-module__profileHoverCard--FZ6_9",publicationHoverCard:"frontend-reader2-ProfileAndPublicationHoverCard-module__publicationHoverCard--1mZ_F",profileHoverCardHeader:"frontend-reader2-ProfileAndPublicationHoverCard-module__profileHoverCardHeader--2J4bS",profileHoverCardNameRow:"frontend-reader2-ProfileAndPublicationHoverCard-module__profileHoverCardNameRow--31X3I"}},function($,n,t){"use strict";t.d(n,"a",function(){return m}),t.d(n,"c",function(){return g}),t.d(n,"b",function(){return v});var e=t(0),s=t(1),o=Object.defineProperty,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(O,u,r)=>u in O?o(O,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):O[u]=r,h=(O,u)=>{for(var r in u||(u={}))c.call(u,r)&&p(O,r,u[r]);if(a)for(var r of a(u))l.call(u,r)&&p(O,r,u[r]);return O};const m=Object(e.createContext)({publication:{},pub:{},setPublication:({pub:O,publication:u})=>{}});m.displayName="PublishContext";const g=O=>{const u=r=>{const i=v();return Object(e.h)(O,h(h({},i),r))};return u.displayName=`withPublishContext(${O.name||O.displayName||"Anonymous"})`,u},v=()=>Object(s.b)(m)},function($,n,t){"use strict";t.d(n,"a",function(){return p});var e=t(2),s=t(55),o=t(102),a;let c=0;function l(){return++c}let p=(a=e.default.useId)!=null?a:function(){let h=Object(o.a)(),[m,g]=e.default.useState(h?l:null);return Object(s.a)(()=>{m===null&&g(l())},[m]),m!=null?""+m:void 0}},function($,n,t){"use strict";t.d(n,"a",function(){return s});var e=t(151);function s(){let o=[],a=[],c={enqueue(l){a.push(l)},addEventListener(l,p,h,m){return l.addEventListener(p,h,m),c.add(()=>l.removeEventListener(p,h,m))},requestAnimationFrame(...l){let p=requestAnimationFrame(...l);return c.add(()=>cancelAnimationFrame(p))},nextFrame(...l){return c.requestAnimationFrame(()=>c.requestAnimationFrame(...l))},setTimeout(...l){let p=setTimeout(...l);return c.add(()=>clearTimeout(p))},microTask(...l){let p={current:!0};return Object(e.a)(()=>{p.current&&l[0]()}),c.add(()=>{p.current=!1})},add(l){return o.push(l),()=>{let p=o.indexOf(l);if(p>=0){let[h]=o.splice(p,1);h()}}},dispose(){for(let l of o.splice(0))l()},workQueue(){return Ac(this,null,function*(){for(let l of a.splice(0))yield l()})}};return c}},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}},function($,n,t){"use strict";t.d(n,"a",function(){return s});function e(o,a){for(var c=0;c<a.length;c++){var l=a[c];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}function s(o,a,c){return a&&e(o.prototype,a),c&&e(o,c),o}},function($,n,t){"use strict";t.d(n,"a",function(){return s});var e=t(310);function s(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),a&&Object(e.a)(o,a)}},,function($,n,t){"use strict";t.d(n,"a",function(){return a});var e=t(0),s=t(75),o=t(45);const a=Object(e.createContext)({isStatic:!1,isAmp:!1,isFreemail:!0,siteConfigValues:{},isPledged:!1});function c({isAmp:l,isFreemail:p,siteConfigValues:h,children:m,isPledged:g,publicationSettings:v}){return Object(e.h)(a.Provider,{value:{isStatic:!0,isAmp:l,isFreemail:p,siteConfigValues:h,isPledged:g}},Object(e.h)(o.b,{siteConfigs:h},Object(e.h)(s.b,{settings:v},m)))}},function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(2);let s={serverHandoffComplete:!1};function o(){let[a,c]=Object(e.useState)(s.serverHandoffComplete);return Object(e.useEffect)(()=>{a!==!0&&c(!0)},[a]),Object(e.useEffect)(()=>{s.serverHandoffComplete===!1&&(s.serverHandoffComplete=!0)},[]),a}},,,function($,n,t){(function(e,s){$.exports=s(t(2))})(typeof self!="undefined"?self:this,function(e){return function(s){function o(c){if(a[c])return a[c].exports;var l=a[c]={i:c,l:!1,exports:{}};return s[c].call(l.exports,l,l.exports,o),l.l=!0,l.exports}var a={};return o.m=s,o.c=a,o.d=function(c,l,p){o.o(c,l)||Object.defineProperty(c,l,{configurable:!1,enumerable:!0,get:p})},o.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return o.d(l,"a",l),l},o.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},o.p="",o(o.s=7)}([function(s,o,a){"use strict";function c(N,A){return g(N)||m(N,A)||p(N,A)||l()}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(N,A){if(N){if(typeof N=="string")return h(N,A);var L=Object.prototype.toString.call(N).slice(8,-1);return L==="Object"&&N.constructor&&(L=N.constructor.name),L==="Map"||L==="Set"?Array.from(N):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?h(N,A):void 0}}function h(N,A){(A==null||A>N.length)&&(A=N.length);for(var L=0,C=new Array(A);L<A;L++)C[L]=N[L];return C}function m(N,A){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(N)){var L=[],C=!0,R=!1,U=void 0;try{for(var Z,F=N[Symbol.iterator]();!(C=(Z=F.next()).done)&&(L.push(Z.value),!A||L.length!==A);C=!0);}catch(z){R=!0,U=z}finally{try{C||F.return==null||F.return()}finally{if(R)throw U}}return L}}function g(N){if(Array.isArray(N))return N}var v=a(1),O=a.n(v),u=a(8),r=a.n(u),i=a(2),d=a(10),b=a.n(d),w=a(3),E=a(6),S=function(N){return N.query||Object(w.a)(N)},P=function(N){if(!N)return null;var A=Object.keys(N);return A.length===0?null:A.reduce(function(L,C){return L[Object(i.a)(C)]=N[C],L},{})},D=function(){var N=O.a.useRef(!1);return O.a.useEffect(function(){N.current=!0},[]),N.current},W=function(N){var A=O.a.useContext(E.a),L=function(){return P(N)||P(A)},C=O.a.useState(L),R=c(C,2),U=R[0],Z=R[1];return O.a.useEffect(function(){var F=L();b()(U,F)||Z(F)},[N,A]),U},B=function(N){var A=function(){return S(N)},L=O.a.useState(A),C=c(L,2),R=C[0],U=C[1];return O.a.useEffect(function(){var Z=A();R!==Z&&U(Z)},[N]),R},f=function(N,A){var L=function(){return r()(N,A||{},!!A)},C=O.a.useState(L),R=c(C,2),U=R[0],Z=R[1],F=D();return O.a.useEffect(function(){return F&&Z(L()),function(){U.dispose()}},[N,A]),U},y=function(N){var A=O.a.useState(N.matches),L=c(A,2),C=L[0],R=L[1];return O.a.useEffect(function(){var U=function(){R(N.matches)};return N.addListener(U),U(),function(){N.removeListener(U)}},[N]),C},M=function(N,A,L){var C=W(A),R=B(N);if(!R)throw new Error("Invalid or missing MediaQuery!");var U=f(R,C),Z=y(U),F=D();return O.a.useEffect(function(){F&&L&&L(Z)},[Z]),Z};o.a=M},function(s,o){s.exports=e},function(s,o,a){"use strict";function c(g){return"-"+g.toLowerCase()}function l(g){if(m.hasOwnProperty(g))return m[g];var v=g.replace(p,c);return m[g]=h.test(v)?"-"+v:v}var p=/[A-Z]/g,h=/^ms-/,m={};o.a=l},function(s,o,a){"use strict";var c=a(2),l=a(11),p=function(v){return"not ".concat(v)},h=function(v,O){var u=Object(c.a)(v);return typeof O=="number"&&(O="".concat(O,"px")),O===!0?u:O===!1?p(u):"(".concat(u,": ").concat(O,")")},m=function(v){return v.join(" and ")},g=function(v){var O=[];return Object.keys(l.a.all).forEach(function(u){var r=v[u];r!=null&&O.push(h(u,r))}),m(O)};o.a=g},function(s,o,a){"use strict";s.exports=a(13)},function(s,o,a){"use strict";s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(s,o,a){"use strict";var c=a(1),l=a.n(c),p=l.a.createContext();o.a=p},function(s,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var c=a(0),l=a(17),p=a(3),h=a(6);a.d(o,"default",function(){return l.a}),a.d(o,"useMediaQuery",function(){return c.a}),a.d(o,"toQuery",function(){return p.a}),a.d(o,"Context",function(){return h.a})},function(s,o,a){"use strict";function c(m,g,v){function O(w){b&&b.addListener(w)}function u(w){b&&b.removeListener(w)}function r(w){d.matches=w.matches,d.media=w.media}function i(){b&&b.removeListener(r)}var d=this;if(h&&!v){var b=h.call(window,m);this.matches=b.matches,this.media=b.media,b.addListener(r)}else this.matches=p(m,g),this.media=m;this.addListener=O,this.removeListener=u,this.dispose=i}function l(m,g,v){return new c(m,g,v)}var p=a(9).match,h=typeof window!="undefined"?window.matchMedia:null;s.exports=l},function(s,o,a){"use strict";function c(i,d){return l(i).some(function(b){var w=b.inverse,E=b.type==="all"||d.type===b.type;if(E&&w||!E&&!w)return!1;var S=b.expressions.every(function(P){var D=P.feature,W=P.modifier,B=P.value,f=d[D];if(!f)return!1;switch(D){case"orientation":case"scan":return f.toLowerCase()===B.toLowerCase();case"width":case"height":case"device-width":case"device-height":B=m(B),f=m(f);break;case"resolution":B=h(B),f=h(f);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":B=p(B),f=p(f);break;case"grid":case"color":case"color-index":case"monochrome":B=parseInt(B,10)||1,f=parseInt(f,10)||0}switch(W){case"min":return f>=B;case"max":return f<=B;default:return f===B}});return S&&!w||!S&&w})}function l(i){return i.split(",").map(function(d){d=d.trim();var b=d.match(g),w=b[1],E=b[2],S=b[3]||"",P={};return P.inverse=!!w&&w.toLowerCase()==="not",P.type=E?E.toLowerCase():"all",S=S.match(/\([^\)]+\)/g)||[],P.expressions=S.map(function(D){var W=D.match(v),B=W[1].toLowerCase().match(O);return{modifier:B[1],feature:B[2],value:W[2]}}),P})}function p(i){var d,b=Number(i);return b||(d=i.match(/^(\d+)\s*\/\s*(\d+)$/),b=d[1]/d[2]),b}function h(i){var d=parseFloat(i);switch(String(i).match(r)[1]){case"dpcm":return d/2.54;case"dppx":return 96*d;default:return d}}function m(i){var d=parseFloat(i);switch(String(i).match(u)[1]){case"em":case"rem":return 16*d;case"cm":return 96*d/2.54;case"mm":return 96*d/2.54/10;case"in":return 96*d;case"pt":return 72*d;case"pc":return 72*d/12;default:return d}}o.match=c,o.parse=l;var g=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,v=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,O=/^(?:(min|max)-)?(.+)/,u=/(em|rem|px|cm|mm|in|pt|pc)?$/,r=/(dpi|dpcm|dppx)?$/},function(s,o,a){"use strict";function c(l,p){if(l===p)return!0;if(!l||!p)return!1;var h=Object.keys(l),m=Object.keys(p),g=h.length;if(m.length!==g)return!1;for(var v=0;v<g;v++){var O=h[v];if(l[O]!==p[O]||!Object.prototype.hasOwnProperty.call(p,O))return!1}return!0}s.exports=c},function(s,o,a){"use strict";function c(i,d){var b=Object.keys(i);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(i);d&&(w=w.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),b.push.apply(b,w)}return b}function l(i){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?c(Object(b),!0).forEach(function(w){p(i,w,b[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(b)):c(Object(b)).forEach(function(w){Object.defineProperty(i,w,Object.getOwnPropertyDescriptor(b,w))})}return i}function p(i,d,b){return d in i?Object.defineProperty(i,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):i[d]=b,i}var h=a(12),m=a.n(h),g=m.a.oneOfType([m.a.string,m.a.number]),v={orientation:m.a.oneOf(["portrait","landscape"]),scan:m.a.oneOf(["progressive","interlace"]),aspectRatio:m.a.string,deviceAspectRatio:m.a.string,height:g,deviceHeight:g,width:g,deviceWidth:g,color:m.a.bool,colorIndex:m.a.bool,monochrome:m.a.bool,resolution:g},O=l({minAspectRatio:m.a.string,maxAspectRatio:m.a.string,minDeviceAspectRatio:m.a.string,maxDeviceAspectRatio:m.a.string,minHeight:g,maxHeight:g,minDeviceHeight:g,maxDeviceHeight:g,minWidth:g,maxWidth:g,minDeviceWidth:g,maxDeviceWidth:g,minColor:m.a.number,maxColor:m.a.number,minColorIndex:m.a.number,maxColorIndex:m.a.number,minMonochrome:m.a.number,maxMonochrome:m.a.number,minResolution:g,maxResolution:g},v),u={all:m.a.bool,grid:m.a.bool,aural:m.a.bool,braille:m.a.bool,handheld:m.a.bool,print:m.a.bool,projection:m.a.bool,screen:m.a.bool,tty:m.a.bool,tv:m.a.bool,embossed:m.a.bool},r=l(l({},u),O);v.type=Object.keys(u),o.a={all:r,types:u,matchers:v,features:O}},function(s,o,a){var c=a(4);s.exports=a(14)(c.isElement,!0)},function(s,o,a){"use strict";(function(){function c(pe){return typeof pe=="string"||typeof pe=="function"||pe===W||pe===A||pe===f||pe===B||pe===C||pe===R||typeof pe=="object"&&pe!==null&&(pe.$$typeof===Z||pe.$$typeof===U||pe.$$typeof===y||pe.$$typeof===M||pe.$$typeof===L||pe.$$typeof===z||pe.$$typeof===G||pe.$$typeof===V||pe.$$typeof===F)}function l(pe){if(typeof pe=="object"&&pe!==null){var $e=pe.$$typeof;switch($e){case P:var ne=pe.type;switch(ne){case N:case A:case W:case f:case B:case C:return ne;default:var X=ne&&ne.$$typeof;switch(X){case M:case L:case Z:case U:case y:return X;default:return $e}}case D:return $e}}}function p(pe){return ue||(ue=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),h(pe)||l(pe)===N}function h(pe){return l(pe)===A}function m(pe){return l(pe)===M}function g(pe){return l(pe)===y}function v(pe){return typeof pe=="object"&&pe!==null&&pe.$$typeof===P}function O(pe){return l(pe)===L}function u(pe){return l(pe)===W}function r(pe){return l(pe)===Z}function i(pe){return l(pe)===U}function d(pe){return l(pe)===D}function b(pe){return l(pe)===f}function w(pe){return l(pe)===B}function E(pe){return l(pe)===C}var S=typeof Symbol=="function"&&Symbol.for,P=S?Symbol.for("react.element"):60103,D=S?Symbol.for("react.portal"):60106,W=S?Symbol.for("react.fragment"):60107,B=S?Symbol.for("react.strict_mode"):60108,f=S?Symbol.for("react.profiler"):60114,y=S?Symbol.for("react.provider"):60109,M=S?Symbol.for("react.context"):60110,N=S?Symbol.for("react.async_mode"):60111,A=S?Symbol.for("react.concurrent_mode"):60111,L=S?Symbol.for("react.forward_ref"):60112,C=S?Symbol.for("react.suspense"):60113,R=S?Symbol.for("react.suspense_list"):60120,U=S?Symbol.for("react.memo"):60115,Z=S?Symbol.for("react.lazy"):60116,F=S?Symbol.for("react.block"):60121,z=S?Symbol.for("react.fundamental"):60117,G=S?Symbol.for("react.responder"):60118,V=S?Symbol.for("react.scope"):60119,k=N,K=A,Y=M,ee=y,ae=P,he=L,me=W,Ye=Z,se=U,ie=D,Ee=f,Oe=B,ce=C,ue=!1;o.AsyncMode=k,o.ConcurrentMode=K,o.ContextConsumer=Y,o.ContextProvider=ee,o.Element=ae,o.ForwardRef=he,o.Fragment=me,o.Lazy=Ye,o.Memo=se,o.Portal=ie,o.Profiler=Ee,o.StrictMode=Oe,o.Suspense=ce,o.isAsyncMode=p,o.isConcurrentMode=h,o.isContextConsumer=m,o.isContextProvider=g,o.isElement=v,o.isForwardRef=O,o.isFragment=u,o.isLazy=r,o.isMemo=i,o.isPortal=d,o.isProfiler=b,o.isStrictMode=w,o.isSuspense=E,o.isValidElementType=c,o.typeOf=l})()},function(s,o,a){"use strict";function c(){return null}var l=a(4),p=a(15),h=a(5),m=a(16),g=Function.call.bind(Object.prototype.hasOwnProperty),v=function(){};v=function(O){var u="Warning: "+O;typeof console!="undefined"&&console.error(u);try{throw new Error(u)}catch(r){}},s.exports=function(O,u){function r(z){var G=z&&(R&&z[R]||z[U]);if(typeof G=="function")return G}function i(z,G){return z===G?z!==0||1/z==1/G:z!==z&&G!==G}function d(z){this.message=z,this.stack=""}function b(z){function G(Y,ee,ae,he,me,Ye,se){if(he=he||Z,Ye=Ye||ae,se!==h){if(u){var ie=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw ie.name="Invariant Violation",ie}if(typeof console!="undefined"){var Ee=he+":"+ae;!V[Ee]&&k<3&&(v("You are manually calling a React.PropTypes validation function for the `"+Ye+"` prop on `"+he+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),V[Ee]=!0,k++)}}return ee[ae]==null?Y?new d(ee[ae]===null?"The "+me+" `"+Ye+"` is marked as required in `"+he+"`, but its value is `null`.":"The "+me+" `"+Ye+"` is marked as required in `"+he+"`, but its value is `undefined`."):null:z(ee,ae,he,me,Ye)}var V={},k=0,K=G.bind(null,!1);return K.isRequired=G.bind(null,!0),K}function w(z){function G(V,k,K,Y,ee,ae){var he=V[k];return N(he)!==z?new d("Invalid "+Y+" `"+ee+"` of type `"+A(he)+"` supplied to `"+K+"`, expected `"+z+"`."):null}return b(G)}function E(z){function G(V,k,K,Y,ee){if(typeof z!="function")return new d("Property `"+ee+"` of component `"+K+"` has invalid PropType notation inside arrayOf.");var ae=V[k];if(!Array.isArray(ae))return new d("Invalid "+Y+" `"+ee+"` of type `"+N(ae)+"` supplied to `"+K+"`, expected an array.");for(var he=0;he<ae.length;he++){var me=z(ae,he,K,Y,ee+"["+he+"]",h);if(me instanceof Error)return me}return null}return b(G)}function S(z){function G(V,k,K,Y,ee){if(!(V[k]instanceof z)){var ae=z.name||Z;return new d("Invalid "+Y+" `"+ee+"` of type `"+C(V[k])+"` supplied to `"+K+"`, expected instance of `"+ae+"`.")}return null}return b(G)}function P(z){function G(V,k,K,Y,ee){for(var ae=V[k],he=0;he<z.length;he++)if(i(ae,z[he]))return null;var me=JSON.stringify(z,function(Ye,se){return A(se)==="symbol"?String(se):se});return new d("Invalid "+Y+" `"+ee+"` of value `"+String(ae)+"` supplied to `"+K+"`, expected one of "+me+".")}return Array.isArray(z)?b(G):(v(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),c)}function D(z){function G(V,k,K,Y,ee){if(typeof z!="function")return new d("Property `"+ee+"` of component `"+K+"` has invalid PropType notation inside objectOf.");var ae=V[k],he=N(ae);if(he!=="object")return new d("Invalid "+Y+" `"+ee+"` of type `"+he+"` supplied to `"+K+"`, expected an object.");for(var me in ae)if(g(ae,me)){var Ye=z(ae,me,K,Y,ee+"."+me,h);if(Ye instanceof Error)return Ye}return null}return b(G)}function W(z){function G(K,Y,ee,ae,he){for(var me=0;me<z.length;me++)if((0,z[me])(K,Y,ee,ae,he,h)==null)return null;return new d("Invalid "+ae+" `"+he+"` supplied to `"+ee+"`.")}if(!Array.isArray(z))return v("Invalid argument supplied to oneOfType, expected an instance of array."),c;for(var V=0;V<z.length;V++){var k=z[V];if(typeof k!="function")return v("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+L(k)+" at index "+V+"."),c}return b(G)}function B(z){function G(V,k,K,Y,ee){var ae=V[k],he=N(ae);if(he!=="object")return new d("Invalid "+Y+" `"+ee+"` of type `"+he+"` supplied to `"+K+"`, expected `object`.");for(var me in z){var Ye=z[me];if(Ye){var se=Ye(ae,me,K,Y,ee+"."+me,h);if(se)return se}}return null}return b(G)}function f(z){function G(V,k,K,Y,ee){var ae=V[k],he=N(ae);if(he!=="object")return new d("Invalid "+Y+" `"+ee+"` of type `"+he+"` supplied to `"+K+"`, expected `object`.");var me=p({},V[k],z);for(var Ye in me){var se=z[Ye];if(!se)return new d("Invalid "+Y+" `"+ee+"` key `"+Ye+"` supplied to `"+K+"`.\nBad object: "+JSON.stringify(V[k],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(z),null,"  "));var ie=se(ae,Ye,K,Y,ee+"."+Ye,h);if(ie)return ie}return null}return b(G)}function y(z){switch(typeof z){case"number":case"string":case"undefined":return!0;case"boolean":return!z;case"object":if(Array.isArray(z))return z.every(y);if(z===null||O(z))return!0;var G=r(z);if(!G)return!1;var V,k=G.call(z);if(G!==z.entries){for(;!(V=k.next()).done;)if(!y(V.value))return!1}else for(;!(V=k.next()).done;){var K=V.value;if(K&&!y(K[1]))return!1}return!0;default:return!1}}function M(z,G){return z==="symbol"||!!G&&(G["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&G instanceof Symbol)}function N(z){var G=typeof z;return Array.isArray(z)?"array":z instanceof RegExp?"object":M(G,z)?"symbol":G}function A(z){if(z==null)return""+z;var G=N(z);if(G==="object"){if(z instanceof Date)return"date";if(z instanceof RegExp)return"regexp"}return G}function L(z){var G=A(z);switch(G){case"array":case"object":return"an "+G;case"boolean":case"date":case"regexp":return"a "+G;default:return G}}function C(z){return z.constructor&&z.constructor.name?z.constructor.name:Z}var R=typeof Symbol=="function"&&Symbol.iterator,U="@@iterator",Z="<<anonymous>>",F={array:w("array"),bool:w("boolean"),func:w("function"),number:w("number"),object:w("object"),string:w("string"),symbol:w("symbol"),any:function(){return b(c)}(),arrayOf:E,element:function(){function z(G,V,k,K,Y){var ee=G[V];return O(ee)?null:new d("Invalid "+K+" `"+Y+"` of type `"+N(ee)+"` supplied to `"+k+"`, expected a single ReactElement.")}return b(z)}(),elementType:function(){function z(G,V,k,K,Y){var ee=G[V];return l.isValidElementType(ee)?null:new d("Invalid "+K+" `"+Y+"` of type `"+N(ee)+"` supplied to `"+k+"`, expected a single ReactElement type.")}return b(z)}(),instanceOf:S,node:function(){function z(G,V,k,K,Y){return y(G[V])?null:new d("Invalid "+K+" `"+Y+"` supplied to `"+k+"`, expected a ReactNode.")}return b(z)}(),objectOf:D,oneOf:P,oneOfType:W,shape:B,exact:f};return d.prototype=Error.prototype,F.checkPropTypes=m,F.resetWarningCache=m.resetWarningCache,F.PropTypes=F,F}},function(s,o,a){"use strict";function c(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;s.exports=function(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var g={},v=0;v<10;v++)g["_"+String.fromCharCode(v)]=v;if(Object.getOwnPropertyNames(g).map(function(u){return g[u]}).join("")!=="0123456789")return!1;var O={};return"abcdefghijklmnopqrst".split("").forEach(function(u){O[u]=u}),Object.keys(Object.assign({},O)).join("")==="abcdefghijklmnopqrst"}catch(u){return!1}}()?Object.assign:function(m,g){for(var v,O,u=c(m),r=1;r<arguments.length;r++){v=Object(arguments[r]);for(var i in v)p.call(v,i)&&(u[i]=v[i]);if(l){O=l(v);for(var d=0;d<O.length;d++)h.call(v,O[d])&&(u[O[d]]=v[O[d]])}}return u}},function(s,o,a){"use strict";function c(g,v,O,u,r){for(var i in g)if(m(g,i)){var d;try{if(typeof g[i]!="function"){var b=Error((u||"React class")+": "+O+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[i]+"`.");throw b.name="Invariant Violation",b}d=g[i](v,i,u,O,null,p)}catch(E){d=E}if(!d||d instanceof Error||l((u||"React class")+": type specification of "+O+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in h)){h[d.message]=!0;var w=r?r():"";l("Failed "+O+" type: "+d.message+(w!=null?w:""))}}}var l=function(){},p=a(5),h={},m=Function.call.bind(Object.prototype.hasOwnProperty);l=function(g){var v="Warning: "+g;typeof console!="undefined"&&console.error(v);try{throw new Error(v)}catch(O){}},c.resetWarningCache=function(){h={}},s.exports=c},function(s,o,a){"use strict";function c(m,g){if(m==null)return{};var v,O,u=l(m,g);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(m);for(O=0;O<r.length;O++)v=r[O],g.indexOf(v)>=0||Object.prototype.propertyIsEnumerable.call(m,v)&&(u[v]=m[v])}return u}function l(m,g){if(m==null)return{};var v,O,u={},r=Object.keys(m);for(O=0;O<r.length;O++)v=r[O],g.indexOf(v)>=0||(u[v]=m[v]);return u}function p(m){var g=m.children,v=m.device,O=m.onChange,u=c(m,["children","device","onChange"]),r=Object(h.a)(u,v,O);return typeof g=="function"?g(r):r?g:null}o.a=p;var h=a(0)}])})},function($,n,t){"use strict";t.d(n,"a",function(){return a});var e=t(352),s=t.n(e),o=t(262);function a(c,l){if(l&&(s()(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Object(o.a)(c)}},function($,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return a});var e=t(29);let s="div";var o=(c=>(c[c.None=1]="None",c[c.Focusable=2]="Focusable",c[c.Hidden=4]="Hidden",c))(o||{});let a=Object(e.d)(function(c,l){let g=c,{features:p=1}=g,h=ha(g,["features"]),m={ref:l,"aria-hidden":(p&2)==2?!0:void 0,style:vr({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},(p&4)==4&&(p&2)!=2&&{display:"none"})};return Object(e.e)({ourProps:m,theirProps:h,slot:{},defaultTag:s,name:"Hidden"})})},function($,n,t){"use strict";t.d(n,"d",function(){return rn}),t.d(n,"c",function(){return Ce}),t.d(n,"b",function(){return Ot}),t.d(n,"e",function(){return fr}),t.d(n,"a",function(){return ur});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(270),l=t.n(c),p=t(812),h=t(813),m=t(814),g=t(815),v=t(441),O=t(795),u=t(633),r=t(805),i=t(16),d=t(569),b=t(212),w=t(236),E=t(60),S=t(72),P=t(38),D=t(7),W=t(275),B=t(21),f=t(8),y=t(14),M=t(4),N=t(35),A=t(209),L=t(10),C=t(26),R=t(71),U=t(314),Z=t(22),F=t(2),z=t(570),G=t(20),V=t(181),k={avatarContainer:"frontend-community-Reaction-module__avatarContainer--1g08F",reactionsContainer:"frontend-community-Reaction-module__reactionsContainer--3jVht",reaction:"frontend-community-Reaction-module__reaction--19Jra",blue:"frontend-community-Reaction-module__blue--2mUqh",reactionToPick:"frontend-community-Reaction-module__reactionToPick--2sjNQ",pickIcon:"frontend-community-Reaction-module__pickIcon--Qghn2",emojiPicker:"frontend-community-Reaction-module__emojiPicker--3vBxq",emojiPickerLayer:"frontend-community-Reaction-module__emojiPickerLayer--okkj0",reactionSection:"frontend-community-Reaction-module__reactionSection--35zhK",count:"frontend-community-Reaction-module__count--TtfhX",show:"frontend-community-Reaction-module__show--3rWfr"};const K=3;function Y({reactions:wt,currentReaction:mt,onReactionClick:Fe,isReadOnly:pt}){const Dt=wt&&Object.keys(wt).some(Cn=>wt[Cn]>0),{result:Jt,isLoading:Gt}=Object(B.f)({pathname:"/api/v1/threads/reactions",method:"GET",cacheTtl:1e3*60*10,auto:!0}),mn=Object(F.useMemo)(()=>!wt||!(Jt==null?void 0:Jt.reactionTypes)?[]:Object.entries(wt).sort((tr,Zn)=>Zn[1]===tr[1]?tr[0].localeCompare(Zn[0]):Zn[1]-tr[1]).filter(([tr,Zn])=>Zn>0&&Jt.reactionTypes[tr]).slice(0,K),[wt,Jt]);return(Jt==null?void 0:Jt.reactionTypes)?Object(e.h)(G.i,null,Object(e.h)(G.j,{onClick:Oe,className:a()(k.reactionsContainer,{[k.show]:Dt})},mn.map(([Cn,tr])=>Object(e.h)(G.j,{key:Cn,className:a()(k.reaction,{[k.blue]:Cn===mt}),shadow:"sm",bg:"primary",gap:4,alignItems:"center",paddingX:6,onClick:()=>Fe&&Fe(Cn)},Object(e.h)(ie,{reaction:Jt.reactionTypes[Cn]}),Object(e.h)(se,{count:tr,textColor:Cn===mt?"bg-light":"primary"}))),!pt&&Object(e.h)(A.a,{content:Cn=>Object(e.h)(ae,{emojis:Jt,isLoading:Gt,currentReaction:mt,onPick:tr=>{Fe&&Fe(tr),Cn()}}),preferPlacement:"bottom-center",hideOnScroll:!0,layerClassName:k.emojiPickerLayer},Object(e.h)(ee,null)))):null}function ee(){return Object(e.h)(G.h,{className:k.pickIcon,shadow:"sm",bg:"primary",paddingX:4,alignItems:"center"},Object(e.h)(z.default,null))}function ae({emojis:wt,isLoading:mt,currentReaction:Fe,onPick:pt}){var Dt;return mt?Object(e.h)(V.a,null):Object(e.h)(G.i,{gap:12,className:k.emojiPicker,onClick:Oe,overflowY:"auto"},Object(e.h)(Ye,{reactions:wt.suggestedReactionTypes,currentReaction:Fe,onPick:pt,emojiMap:wt.reactionTypes,title:"Suggested Reactions"}),(Dt=wt.categories)==null?void 0:Dt.map(Jt=>Object(e.h)(Ye,{reactions:Jt.reactionTypes,currentReaction:Fe,onPick:pt,emojiMap:wt.reactionTypes,title:Jt.title})))}function he({title:wt}){return Object(e.h)(G.t,{size:12,lineHeight:20,color:"secondary",weight:"semibold",font:"text"},wt)}function me({reactions:wt,currentReaction:mt,onPick:Fe,emojiMap:pt}){return Object(e.h)(G.j,{className:k.reactionSection,gap:8},wt==null?void 0:wt.map(Dt=>Object(e.h)(G.h,{key:Dt,onClick:()=>Fe(Dt),className:a()(k.reactionToPick,{[k.blue]:Dt===mt}),bg:"primary",alignItems:"center"},Object(e.h)(Ee,{reaction:pt[Dt]}))))}function Ye({reactions:wt,currentReaction:mt,onPick:Fe,emojiMap:pt,title:Dt}){return Object(e.h)(G.i,{gap:12},Object(e.h)(he,{title:Dt}),Object(e.h)(me,{reactions:wt,currentReaction:mt,onPick:Fe,emojiMap:pt}))}function se({count:wt,textColor:mt}){return Object(e.h)(G.t,{className:k.count,color:mt,lineHeight:20},wt)}function ie({reaction:wt}){return Object(e.h)(G.t,{size:14,lineHeight:20,color:"primary",weight:"medium",font:"emoji"},wt)}function Ee({reaction:wt}){return Object(e.h)(G.t,{size:20,lineHeight:20,color:"primary",weight:"medium",font:"emoji"},wt)}const Oe=wt=>{wt.stopPropagation(),wt.preventDefault()};var ce={bubbleStack:"frontend-community-CommunityPostView-module__bubbleStack--fuau6",bubble:"frontend-community-CommunityPostView-module__bubble--1JsFx",linkBubble:"frontend-community-CommunityPostView-module__linkBubble--R327_",imageGroup:"frontend-community-CommunityPostView-module__imageGroup--2-Gyl",replyContainer:"frontend-community-CommunityPostView-module__replyContainer--1it0i",bubbleText:"frontend-community-CommunityPostView-module__bubbleText--3vH1P",authorName:"frontend-community-CommunityPostView-module__authorName--2seWH",facepileAvatar:"frontend-community-CommunityPostView-module__facepileAvatar--fy5KJ",facepile:"frontend-community-CommunityPostView-module__facepile--1vm_C",readMore:"frontend-community-CommunityPostView-module__readMore--1L4Pl",paywallBubble:"frontend-community-CommunityPostView-module__paywallBubble--3bNpN",pixels:"frontend-community-CommunityPostView-module__pixels--2xjDM",linkImg:"frontend-community-CommunityPostView-module__linkImg--2Anej",linkUrl:"frontend-community-CommunityPostView-module__linkUrl--35s-O",linkTitle:"frontend-community-CommunityPostView-module__linkTitle--3_F_s",ctaButton:"frontend-community-CommunityPostView-module__ctaButton--3zuZO",reactionsWrapper:"frontend-community-CommunityPostView-module__reactionsWrapper--cWCFG",actions:"frontend-community-CommunityPostView-module__actions--1esrr",actionButton:"frontend-community-CommunityPostView-module__actionButton--1XFw2",actionMenu:"frontend-community-CommunityPostView-module__actionMenu--2qDnX",actionMenuLayer:"frontend-community-CommunityPostView-module__actionMenuLayer--Q1mn8",avatarContainer:"frontend-community-CommunityPostView-module__avatarContainer--6oM6H",quoteBox:"frontend-community-CommunityPostView-module__quoteBox--1MyQY"},ue=Object.defineProperty,pe=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,Ne=(wt,mt,Fe)=>mt in wt?ue(wt,mt,{enumerable:!0,configurable:!0,writable:!0,value:Fe}):wt[mt]=Fe,Qe=(wt,mt)=>{for(var Fe in mt||(mt={}))X.call(mt,Fe)&&Ne(wt,Fe,mt[Fe]);if(ne)for(var Fe of ne(mt))q.call(mt,Fe)&&Ne(wt,Fe,mt[Fe]);return wt},Ze=(wt,mt)=>pe(wt,$e(mt)),tt=(wt,mt)=>{var Fe={};for(var pt in wt)X.call(wt,pt)&&mt.indexOf(pt)<0&&(Fe[pt]=wt[pt]);if(wt!=null&&ne)for(var pt of ne(wt))mt.indexOf(pt)<0&&q.call(wt,pt)&&(Fe[pt]=wt[pt]);return Fe},Ft=(wt,mt,Fe)=>new Promise((pt,Dt)=>{var Jt=Cn=>{try{mn(Fe.next(Cn))}catch(tr){Dt(tr)}},Gt=Cn=>{try{mn(Fe.throw(Cn))}catch(tr){Dt(tr)}},mn=Cn=>Cn.done?pt(Cn.value):Promise.resolve(Cn.value).then(Jt,Gt);mn((Fe=Fe.apply(wt,mt)).next())});const Lt="ffe5d072-ae52-11ed-afa1-0242ac120002";function rn({communityPost:wt,author:mt,extras:Fe,withAttribution:pt,flex:Dt,hideReply:Jt,isReadOnly:Gt,onReply:mn,onDelete:Cn}){const tr=Object(s.j)(null),Zn=Object(U.useDispatch)(),At=!(wt.type==="link"&&wt.link_url||wt.type==="media"&&wt.media_assets);return Object(e.h)(_e,{user:mt,flex:Dt,containerRef:tr},pt&&Object(e.h)(ur,{text:`From ${mt.name}\u2019s subscriber chat`}),Object(e.h)(ht,{actionMenuProps:{communityEntity:wt,onReply:mn,onDelete:Cn,isReadOnly:Gt},flex:Dt},Object(e.h)(qt,null,wt.type==="link"&&wt.link_url?Object(e.h)(je,{reactions:wt.reactions,currentReaction:wt.reaction,onReactionClick:Le(wt.id,"posts",Zn,wt.reaction),isReadOnly:Gt},Object(e.h)(cr,{linkUrl:wt.link_url})):wt.type==="media"&&wt.media_assets?Object(e.h)(je,{reactions:wt.reactions,currentReaction:wt.reaction,onReactionClick:Le(wt.id,"posts",Zn,wt.reaction),isReadOnly:Gt},Object(e.h)(b.a,{assets:wt.media_assets.map(Xt=>Xt.url),className:ce.imageGroup,readOnly:Gt})):null,wt.body&&Object(e.h)(je,{reactions:wt.reactions,currentReaction:wt.reaction,onReactionClick:Le(wt.id,"posts",Zn,wt.reaction),setReactions:At,isReadOnly:Gt},Object(e.h)(_n,{authorName:mt.name,communityEntity:wt})))),!Jt&&Object(e.h)(Ut,null,Object(e.h)(Un,{commenters:wt.recent_commenters,count:wt.comment_count})),Fe)}function ht({children:wt,actionMenuProps:mt,flex:Fe="grow"}){return Object(e.h)(M.c,{alignItems:"start",gap:12,flex:Fe},Object(e.h)(M.b,null,wt),Object(e.h)(fe,Qe({},mt)))}function je({children:wt,reactions:mt,currentReaction:Fe,setReactions:pt=!0,onReactionClick:Dt,isReadOnly:Jt}){return pt?Object(e.h)(M.c,{className:ce.reactionsWrapper},wt,Object(e.h)(Y,{reactions:mt,currentReaction:Fe,onReactionClick:Dt,isReadOnly:Jt})):Object(e.h)(e.Fragment,null,wt)}const Le=(wt,mt,Fe,pt)=>Dt=>Ft(void 0,null,function*(){Fe(pt===Dt?Pe(Dt,wt,mt):rt(Dt,wt,mt,pt))}),rt=(wt,mt,Fe,pt)=>(Dt,Jt)=>Ft(void 0,null,function*(){Dt({type:`${Fe}-new_reaction`,payload:{id:mt,reaction:wt}}),(yield H(wt,mt,Fe))instanceof Error&&Dt(pt?{type:`${Fe}-new_reaction`,payload:{id:mt,reaction:pt}}:{type:`${Fe}-remove_reaction`,payload:{id:mt,reaction:wt}})}),Pe=(wt,mt,Fe)=>(pt,Dt)=>Ft(void 0,null,function*(){pt({type:`${Fe}-remove_reaction`,payload:{id:mt,reaction:wt}}),(yield le(wt,mt,Fe))instanceof Error&&pt({type:`${Fe}-new_reaction`,payload:{id:mt,reaction:wt}})}),de=(wt,mt)=>(Fe,pt)=>Ft(void 0,null,function*(){Fe({type:"posts-delete_post",payload:{id:wt,publication_id:mt}});const Dt=yield x(wt);Dt instanceof Error&&console.warn("error deleting thread",Dt)}),be=(wt,mt,Fe)=>(pt,Dt)=>Ft(void 0,null,function*(){pt({type:"comments-delete_comment",payload:{id:wt,postId:mt}});const Jt=yield Ie(wt);if(Jt instanceof Error&&console.warn("error deleting comment",Jt),Fe){const mn=yield ke(Fe);mn instanceof Error||pt({type:"comments-update_comment",payload:{id:Fe,comment:mn.comment}})}const Gt=yield Te(mt);Gt instanceof Error||pt({type:"posts-update_post",payload:{id:mt,post:Gt.communityPost}})});function Ie(wt){return Ft(this,null,function*(){try{return yield Object(B.c)(`/api/v1/community/comments/${wt}`,{method:"DELETE",json:{commentId:wt}})}catch(mt){return mt}})}function ke(wt){return Ft(this,null,function*(){try{return yield Object(B.c)(`/api/v1/community/comments/${wt}`,{method:"GET"})}catch(mt){return console.warn(mt),mt}})}function Te(wt){return Ft(this,null,function*(){try{return yield Object(B.c)(`/api/v1/community/posts/${wt}`,{method:"GET"})}catch(mt){return console.warn(mt),mt}})}function x(wt){return Ft(this,null,function*(){try{return yield Object(B.c)(`/api/v1/community/posts/${wt}`,{method:"DELETE",json:{postId:wt}})}catch(mt){return mt}})}function H(wt,mt,Fe){return Ft(this,null,function*(){try{return yield Object(B.c)(`/api/v1/community/${Fe}/${mt}/reaction`,{method:"POST",json:{reaction:wt}})}catch(pt){return pt}})}function le(wt,mt,Fe){return Ft(this,null,function*(){try{return yield Object(B.c)(`/api/v1/community/${Fe}/${mt}/reaction`,{method:"DELETE",query:{reaction:wt}})}catch(pt){return pt}})}function Ce({author:wt,extras:mt,showReply:Fe=!0,analyticsParams:pt}){return Object(s.d)(()=>{pt&&Object(D.i)(D.a.THREAD_PAYWALL_SCREEN_VIEWED,pt)},[]),Object(e.h)(_e,{user:wt},Object(e.h)(qt,null,Object(e.h)(bn,null),Fe&&Object(e.h)(Un,{isLocked:!0})),mt)}function Ue(wt){return typeof wt.message=="string"}function Ve({text:wt,rawText:mt,mentionMap:Fe,limit:pt=600}){const[Dt,Jt]=Object(s.k)(!1);let Gt=[{characters:wt.length,message:wt}];mt&&Fe&&(Gt=Qt(mt,Fe));const{alwaysShow:mn,afterExpansion:Cn}=yt(Gt,pt),tr=Cn.length>0;return Object(e.h)(e.Fragment,null,mn.map(Zn=>Ue(Zn)?Object(e.h)(bt,null,Zn.message):Zn.message),tr&&!Dt&&Object(e.h)(e.Fragment,null,Object(e.h)("span",null," "),Object(e.h)(y.d,{resetCss:!0,className:ce.readMore,onClick:Zn=>{Zn.preventDefault(),Jt(!0)}},"Read more")),tr&&Dt&&Object(e.h)(e.Fragment,null,Cn.map(Zn=>Ue(Zn)?Object(e.h)(bt,null,Zn.message):Zn.message)))}function bt({children:wt}){return Object(e.h)(l.a,{options:{attributes:{rel:"nofollow ugc",onClick:mt=>mt.stopPropagation()}}},wt)}function yt(wt,mt){let Fe=0;const pt=[],Dt=[];for(const Jt of wt){let Gt=Jt;if(Fe<mt){if(Fe+Gt.characters>mt&&Ue(Gt)){const mn=mt-Fe,Cn={characters:mn,message:Gt.message.slice(0,mn)},tr={characters:Gt.characters-mn,message:Gt.message.slice(mn)};Gt=Cn,Dt.push(tr)}Fe+=Gt.characters,pt.push(Gt)}else Dt.push(Gt)}return{alwaysShow:pt,afterExpansion:Dt}}function Qt(wt,mt){const Fe=/\$\{(\d+)\}/g;let pt=Fe.exec(wt);const Dt=wt,Jt=[];let Gt=0;for(;pt;){const mn=Number(pt[1]),Cn=mt[mn];Cn?(pt.index>Gt&&Jt.push({characters:pt.index-Gt,message:Dt.slice(Gt,pt.index)}),Jt.push({characters:Cn.text.length,message:Kn(Cn.user_id,tn(Cn.text),Cn.text)})):Jt.push({characters:Fe.lastIndex-Gt,message:Dt.slice(Gt,Fe.lastIndex)}),Gt=Fe.lastIndex,pt=Fe.exec(wt)}return Gt<Dt.length&&Jt.push({characters:Dt.length-Gt,message:Dt.slice(Gt)}),Jt}function tn(wt){return wt.slice(1)}function Kn(wt,mt,Fe){return Object(e.h)(w.default,{name:mt,id:wt,mentionText:Fe,type:"user",uuid:Lt,isStatic:!1,isEditorContext:!1})}function Ot(wt){var mt=wt,{communityComment:Fe,quoteReply:pt}=mt,Dt=tt(mt,["communityComment","quoteReply"]);return Object(e.h)(lt,Qe({commentInfoArr:[{communityComment:Fe,quoteReply:pt}]},Dt))}function lt({commentInfoArr:wt,author:mt,hideReply:Fe,onReply:pt,onDelete:Dt}){const Jt=Object(U.useDispatch)(),Gt=wt[wt.length-1].communityComment,{reply_count:mn=0,recent_commenters:Cn=[]}=Gt!=null?Gt:{},tr=Object(s.j)(null);return Object(e.h)(_e,{user:mt,containerRef:tr},Object(e.h)(ht,{actionMenuProps:{communityEntity:wt[0].communityComment,onReply:pt,onDelete:Dt,isReadOnly:!1}},Object(e.h)(qt,null,wt.map(({communityComment:{id:Zn,body:At,quote_id:Xt,media_uploads:en,reactions:$n,reaction:Xn},quoteReply:Yn},Sn)=>Object(e.h)(e.Fragment,{key:Zn},en&&en.length>0&&Xt===null&&Object(e.h)(je,{reactions:$n,currentReaction:Xn,onReactionClick:Le(Zn,"comments",Jt,Xn)},Object(e.h)(b.a,{assets:en.map(nr=>nr.url),className:ce.imageGroup})," "),Xt&&Yn&&Object(e.h)(Hn,{authorName:Yn.user.name,communityEntity:Yn.comment}),At&&Object(e.h)(je,{reactions:$n,currentReaction:Xn,onReactionClick:Le(Zn,"comments",Jt,Xn),setReactions:!en||en.length===0},Object(e.h)(_n,{authorName:mt.name,communityEntity:wt[Sn].communityComment})))))),!Fe&&mn>0&&Object(e.h)(Ut,null,Object(e.h)(Un,{commenters:Cn,count:mn})))}function Be(wt){return wt.post_id===void 0}function _e({user:wt,children:mt,flex:Fe="grow",containerRef:pt}){return Object(e.h)(M.a,{alignItems:"start",gap:12,flex:Fe,ref:pt,className:a()(k.avatarContainer,ce.avatarContainer)},Object(e.h)(M.a,{paddingTop:4},wt?Object(e.h)(er,{user:wt,size:40}):Object(e.h)(Z.A,{type:"circle",size:40})),Object(e.h)(M.b,{flex:"grow",gap:4},mt))}function Ae(){return Object(e.h)(M.a,{className:ce.actionButton,paddingX:4,alignItems:"center"},Object(e.h)(p.a,null))}function fe({communityEntity:wt,onReply:mt,onDelete:Fe,isReadOnly:pt}){const Dt=Object(s.j)(!1),Jt=Gt=>{Dt.current=Gt};return Object(e.h)(M.a,{alignItems:"center",className:ce.actions},Object(e.h)(A.a,{content:Gt=>Object(e.h)(ft,{communityEntity:wt,onReply:mt,onDelete:Fe,closePopover:Gt,isReadOnly:pt}),preferPlacement:"bottom-center",hideOnScroll:!0,layerClassName:ce.actionMenuLayer,onOpen:()=>Jt&&Jt(!0),onClose:()=>Jt&&Jt(!1)},Object(e.h)(Ae,null)))}function ft({communityEntity:wt,onReply:mt,onDelete:Fe,isReadOnly:pt,closePopover:Dt}){const Jt=Object(P.c)();return Object(e.h)(M.b,{className:ce.actionMenu,bg:"primary",gap:12,overflowY:"auto"},!pt&&mt&&Object(e.h)(ct,{onReply:mt}),wt&&wt.body&&Object(e.h)(Xe,{communityEntity:wt,closePopover:Dt}),wt&&Be(wt)&&Object(e.h)(gt,{communityPost:wt,closePopover:Dt}),!pt&&wt&&Jt&&wt.user_id===Jt.id&&Object(e.h)(Tt,{communityEntity:wt,closePopover:Dt,onDelete:Fe}))}function nt({closePopover:wt}){return Object(e.h)(N.d,{icon:Object(e.h)(h.a,null),onClick:()=>{console.warn("Quote replies are not supported on web"),wt()}},"Quote")}function ct({onReply:wt}){return Object(e.h)(N.d,{icon:Object(e.h)(m.a,null),onClick:wt},"Reply")}function Xe({communityEntity:wt,closePopover:mt}){const Fe=Object(C.e)(),pt=()=>{if(wt){const{body:Dt}=wt;Object(f.copyToClipboard)(Dt),Fe.popToast(Jt=>Object(e.h)(C.c,Ze(Qe({},Jt),{text:"Text copied",Icon:g.a})))}mt()};return Object(e.h)(N.d,{icon:Object(e.h)(g.a,null),onClick:pt},"Copy Text")}function gt({communityPost:wt,closePopover:mt}){const Fe=Object(W.a)(),pt=()=>{if(wt){const{id:Dt}=wt,Jt=`${window.location.protocol}//open.${window.location.host}/chat/posts/${Dt}`;Fe(Jt)}mt()};return Object(e.h)(N.d,{icon:Object(e.h)(v.a,null),onClick:pt},"Copy Link")}function Tt({communityEntity:wt,closePopover:mt,onDelete:Fe}){const pt=Object(U.useDispatch)(),Dt=Be(wt),Jt=()=>Ft(this,null,function*(){const Gt=`Are you sure you want to delete this ${Dt?"thread":"comment"}?`;if(confirm(Gt)){const{id:mn}=wt;if(Dt){const{publication_id:Cn}=wt;pt(de(mn,Cn))}else{const{post_id:Cn,parent_id:tr}=wt;pt(be(mn,Cn,tr))}Fe&&setTimeout(Fe,500)}mt()});return Object(e.h)(N.d,{icon:Object(e.h)(O.a,null),onClick:Jt,priority:"destructive"},Dt?"Delete thread":"Delete reply")}function Ut(wt){return Object(e.h)(M.b,Qe({className:ce.replyContainer,alignItems:"start"},wt))}function qt(wt){return Object(e.h)(M.b,Qe({className:ce.bubbleStack,gap:4,alignItems:"start"},wt))}function sn(wt){return Object(e.h)(M.a,Qe({className:ce.bubble,padding:12,bg:"secondary",minWidth:0},wt))}function _n({authorName:wt,communityEntity:mt}){return Object(e.h)(sn,null,Object(e.h)(wn,{authorName:wt,communityEntity:mt}))}function Hn({authorName:wt,communityEntity:mt}){return Object(e.h)(M.a,{className:a()(ce.bubble,ce.quoteBox),padding:12,minWidth:0},Object(e.h)(wn,{authorName:wt,communityEntity:mt}))}function wn({authorName:wt,communityEntity:mt}){var Fe;return Object(e.h)(L.a,{isParagraph:!0,className:ce.bubbleText},Object(e.h)(L.a,{weight:"semibold",className:ce.authorName},wt)," ",mt.body&&Object(e.h)(Ve,{text:(Fe=mt.raw_body)!=null?Fe:mt.body,rawText:mt.raw_body,mentionMap:mt.mentions}))}function Un({isLocked:wt,count:mt=0,commenters:Fe}){const pt=wt?u.a:r.a;return Object(e.h)(sn,{alignSelf:"stretch"},Object(e.h)(M.a,{flex:"grow",justifyContent:"space-between",alignItems:"center",gap:12},Object(e.h)(M.a,{alignItems:"center",gap:8},Fe&&Object(e.h)(M.a,{className:ce.facepile,alignItems:"center"},Fe.map(Dt=>Object(e.h)(er,{className:ce.facepileAvatar,user:Dt,size:24}))),Object(e.h)(L.a,{color:"secondary"},mt>0?`${mt.toLocaleString()} replies...`:"Reply...")),Object(e.h)(pt,{size:20,stroke:"var(--color-secondary)"})))}function bn(){const wt=1e3,mt=160,Fe=8;return Object(e.h)(M.a,{className:ce.paywallBubble,alignSelf:"stretch",alignItems:"center",justifyContent:"center",bg:"secondary"},Object(e.h)("svg",{className:ce.pixels},[...jr(0,wt,Fe)].map(pt=>[...jr(0,mt,Fe)].map(Dt=>Object(e.h)("rect",{width:Fe,height:Fe,x:pt,y:Dt,fill:`rgba(0, 0, 0, ${(Math.random()*.1).toFixed(2)})`})))),Object(e.h)(M.a,{alignItems:"center",gap:4},Object(e.h)(u.a,{size:12,stroke:"var(--color-secondary)"}),Object(e.h)(L.b.Meta,null,"PAID SUBSCRIBERS ONLY")))}function cr({linkUrl:wt}){let mt;try{const Jt=new URL(wt);mt=`${Jt.host}${Jt.pathname}${Jt.search}${Jt.hash}`}catch(Jt){mt=wt}const{result:Fe,isLoading:pt,error:Dt}=Object(B.f)({pathname:"/api/v1/link-metadata",query:{url:wt},auto:!0,deps:[wt]});return Object(e.h)(sn,null,Object(e.h)(M.a,{as:"a",href:wt,target:"_blank",justifyContent:"space-between",gap:12,className:ce.linkBubble},Object(e.h)(M.b,{gap:4},(Fe==null?void 0:Fe.title)&&Object(e.h)(L.b,{font:"serif",weight:"semibold",className:ce.linkTitle},Fe.title),Object(e.h)(L.a,{size:13,color:"secondary",ellipsis:!0,className:ce.linkUrl},mt)),(Fe==null?void 0:Fe.image)&&Object(e.h)(S.a,{className:ce.linkImg,src:Fe.image,maxWidth:72})))}function fr(wt){return Object(e.h)(y.a,Qe({className:ce.ctaButton,priority:"primary-theme"},wt))}function ur({text:wt,isStatic:mt}){return Object(e.h)(M.a,{paddingX:8,paddingY:4},Object(e.h)(L.b,{color:"secondary",size:12,lineHeight:20,weight:"semibold",font:"text"},Object(e.h)(d.default,{strokeWidth:2,height:12,stroke:"#808080",fill:"transparent",isStatic:mt})," ",wt))}function er({user:wt,size:mt,className:Fe}){return Object(e.h)(M.a,{as:"a",flex:"auto",alignSelf:"start",href:Object(i.getReaderProfileUrl)(wt,{noBase:!0}),target:"_blank"},Object(e.h)(E.b,{subject:wt,dontStopPropagation:!0},Object(e.h)(R.a,{className:Fe,size:mt,user:wt})))}function*jr(wt,mt,Fe=1){for(let pt=wt;pt<mt;pt+=Fe)yield pt}},function($,n){function t(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}$.exports=t},function($,n,t){"use strict";t.d(n,"a",function(){return u});var e=t(0),s=t(1),o=t(11),a=t.n(o),c=t(15),l=t.n(c),p=t(9),h=t.n(p),m=t(7),g=t(244);const v=(d,{timeout:b=5e3,className:w,dismissable:E,beforeDismiss:S}={},P=document.body)=>{const D=document.createElement("div");D.setAttribute("id","toast"),D.setAttribute("role","alert"),w&&D.classList.add(w),P.appendChild(D);const W=()=>{S&&S(),D.classList.remove("in"),setTimeout(()=>{D.remove()},500)};Object(e.render)([Object(e.h)("p",null,d),E&&Object(e.h)("a",{className:"dismiss",onClick:W},"Dismiss")],D),setTimeout(()=>{D.classList.add("in")}),!E&&setTimeout(W,b)},O=({children:d,className:b,dismissKey:w,dismissDurationInSeconds:E,beforeDismiss:S,container:P})=>{const[D,W]=Object(g.a)(w,E,S);if(!D)return v(d,{className:b,beforeDismiss:W,dismissable:!0},P)},u=({user:d,pub:b,container:w})=>{if(!(!d||!b||!d.is_subscribed))return Object(e.h)(i,{pub:b,container:w})},r=d=>{if(d&&d.cardExpiresAt){const b=l()(d.expiry).subtract(p.GRACE_PERIOD_DAYS,"day"),w=l()(d.cardExpiresAt),E=l()().add(12,"day");return w.isBefore(b)&&b.isBefore(E)}return!1},i=({pub:d,container:b})=>{const[w,E]=Object(s.k)(null);if(Object(s.d)(()=>{a.a.get("/api/v1/subscription").then(S=>E(S.body)).catch(S=>{console.error("Failed to fetch subscription data: ",S)})},[]),r(w))return Object(e.h)(O,{className:"urgent",dismissKey:"card-expiring-toast.dismissed",dismissDurationInSeconds:1*p.WEEK_IN_SECONDS,beforeDismiss:()=>{Object(m.i)(m.a.CARD_EXPIRED_WARNING_DISMISSED,{type:"toast"})},container:b},"Your credit card is expiring soon."," ",Object(e.h)("a",{href:"/account/billing",native:!0,onClick:()=>{Object(m.i)(m.a.UPDATE_EXPIRED_CARD_LINK_CLICKED,{type:"toast"})}},"Update your card"),` before you lose access to ${d.name}`,".")};n.b=v},function($,n,t){"use strict";t.d(n,"b",function(){return O});var e=t(2),s=t(457),o=t(0),a=t(133),c=t(3),l=t(8),p=t(217);t(456);const h="entry",m="ajs_anonymous_id";let g;var v=n.a=function(w){var E,S;if(g)throw new Error("Cannot re-render the things");g=w,window._preloads&&(window._preloads.original_url=window.location.href),Object(p.a)((S=(E=window._preloads)==null?void 0:E.user)==null?void 0:S.id),d(),u(),r(),i(),b()};function O(w){let E=!1;if(typeof window._preloads=="object"&&window._preloads!==null)for(const S in w)(typeof w[S]=="object"&&w[S]!==null||w[S]!==window._preloads[S])&&(window._preloads[S]=w[S],E=!0);E&&i()}function u(){const w=Object(c.parseQuery)(window.location.href);if(!w.token&&!w.lli||!window.history.replaceState)return;delete w.token,delete w.lli;const E=`${Object(c.pathWithQuery)(window.location.pathname,w)}${window.location.hash}`;window.history.replaceState({},document.title,E)}function r(){if(!window.history||!window.history.pushState||!window.scrollTo)return;const w=window.history.pushState;history.pushState=function(E,S,P){const D=w.apply(history,arguments);return P.indexOf("#")===-1&&window.scrollTo(0,0),D}}function i(){if(!g)return;const w=document.getElementById(h);Object(o.render)(Object(o.h)(g,{initialData:window._preloads}),w||document.body)}function d(){if(typeof window._analyticsConfig=="object"&&window._analyticsConfig!==null&&!window._analyticsConfig.anonymousId){let w;try{w=JSON.parse(a.get(m))}catch(E){}w||(w=Object(l.uuidV4)(),a.set(m,JSON.stringify(w),{expires:365})),window._analyticsConfig.anonymousId=w}}function b(){var w;!(console==null?void 0:console.log)||window.location.hostname.includes(".localhost")||window.location.pathname.startsWith("/embed")||((w=window._preloads.user)==null?void 0:w.is_global_admin)||console.log(`%c
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 SUBSTACK WANTS YOU \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2592\u2592\u2592\u2592\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2592\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2592\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2592\u2592\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2592\u2592\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2593\u2593\u2593\u2593\u2592\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2592\u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2593\u2592\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2592\u2593\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 TO BUILD A BETTER BUSINESS MODEL FOR WRITING \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591
                   https://substack.com/jobs
`,"font-family:monospace")}},function($,n,t){"use strict";var e=t(0),s=t(1),o=t(101),a=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(O,u,r)=>u in O?a(O,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):O[u]=r,m=(O,u)=>{for(var r in u||(u={}))l.call(u,r)&&h(O,r,u[r]);if(c)for(var r of c(u))p.call(u,r)&&h(O,r,u[r]);return O},g=(O,u)=>{var r={};for(var i in O)l.call(O,i)&&u.indexOf(i)<0&&(r[i]=O[i]);if(O!=null&&c)for(var i of c(O))u.indexOf(i)<0&&p.call(O,i)&&(r[i]=O[i]);return r};const v=O=>{const u=O,{ampProps:r}=u,i=g(u,["ampProps"]);return Object(s.b)(o.a).isAmp?Object(e.h)("amp-img",m(m({},r),i)):Object(e.h)("img",m({},i))};n.a=v},function($,n){function t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){var e=t(496),s=t(501);function o(a,c){var l=s(a,c);return e(l)?l:void 0}$.exports=o},function($,n,t){"use strict";t.d(n,"a",function(){return c});var e=t(0),s=t(6),o=t.n(s),a=t(385);const c=({name:l,label:p,info:h,checked:m,disabled:g,onChange:v,isRow:O=!0,className:u})=>{const r=Object(e.h)(e.Fragment,null,Object(e.h)("span",{className:o()("big-checkbox",{checked:m,disabled:g}),onClick:()=>!g&&(v==null?void 0:v(!m)),onKeyDown:i=>{i.key===" "&&(v==null||v(!m))},role:"checkbox","aria-checked":m,"aria-label":p||l,tabIndex:0},Object(e.h)(a.default,{fill:"#ffffff"})));return Object(e.h)("label",{className:o()("big-checkbox-input",u,{"big-checkbox-input-row":O})},!O&&r,Object(e.h)("div",{onClick:()=>{(p||h)&&!g&&(v==null||v(!m))}},p,h&&Object(e.h)("div",{className:"info"},h)),O&&r,Object(e.h)("input",{type:"hidden",name:l,"data-testid":l,value:String(m)}))}},function($,n,t){"use strict";t.d(n,"d",function(){return d}),t.d(n,"b",function(){return b}),t.d(n,"a",function(){return w}),t.d(n,"e",function(){return E}),t.d(n,"c",function(){return S});var e=t(0),s=t(6),o=t.n(s),a=t(42),c={reset:"frontend-pencraft-common-module__reset--1p7T1","color-primary":"frontend-pencraft-common-module__color-primary--dX2PK","color-secondary":"frontend-pencraft-common-module__color-secondary--31o27"},l=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(P,D,W)=>D in P?l(P,D,{enumerable:!0,configurable:!0,writable:!0,value:W}):P[D]=W,u=(P,D)=>{for(var W in D||(D={}))g.call(D,W)&&O(P,W,D[W]);if(m)for(var W of m(D))v.call(D,W)&&O(P,W,D[W]);return P},r=(P,D)=>p(P,h(D)),i=(P,D)=>{var W={};for(var B in P)g.call(P,B)&&D.indexOf(B)<0&&(W[B]=P[B]);if(P!=null&&m)for(var B of m(P))D.indexOf(B)<0&&v.call(P,B)&&(W[B]=P[B]);return W};const d=Object(a.a)("tw-font-title tw-text-h2 tw-leading-h2 tw-tracking-h2 tw-font-bold"),b=Object(a.a)("tw-text-sm tw-leading-sm tw-tracking-sm tw-font-body");function w(P){var D=P,{className:W,color:B,as:f="span"}=D,y=i(D,["className","color","as"]);return Object(e.h)(f,r(u({},y),{className:o()(W,B&&c[`color-${B}`])}))}const E="tw-font-body tw-text-sm tw-leading-sm tw-tracking-sm tw-font-semibold",S=Object(a.a)(E,w)},function($,n){function t(e){return e!=null&&typeof e=="object"}$.exports=t},function($,n,t){"use strict";n.a={input:"frontend-pencraft-unstable-Input-module__input--1t1sf",error:"frontend-pencraft-unstable-Input-module__error--1QVCq",textarea:"frontend-pencraft-unstable-Input-module__textarea--2a8zL","font-text":"frontend-pencraft-unstable-Input-module__font-text--3915n","font-monospace":"frontend-pencraft-unstable-Input-module__font-monospace--ecAA4"}},,function($,n,t){"use strict";t.r(n);var e=t(0),s=t(644),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideHeart",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.d(n,"a",function(){return K});var e=t(0),s=t(2),o=t(29),a=t(95),c=t(221),l=t(281),p=t(55),h=t(61),m=t(40);let g=Object(s.createContext)(null);function v(){let ee=Object(s.useContext)(g);if(ee===null){let ae=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(ae,v),ae}return ee}function O(){let[ee,ae]=Object(s.useState)([]);return[ee.length>0?ee.join(" "):void 0,Object(s.useMemo)(()=>function(he){let me=Object(m.a)(se=>(ae(ie=>[...ie,se]),()=>ae(ie=>{let Ee=ie.slice(),Oe=Ee.indexOf(se);return Oe!==-1&&Ee.splice(Oe,1),Ee}))),Ye=Object(s.useMemo)(()=>({register:me,slot:he.slot,name:he.name,props:he.props}),[me,he.slot,he.name,he.props]);return s.default.createElement(g.Provider,{value:Ye},he.children)},[ae])]}let u="label",r=Object(o.d)(function(ee,ae){let Oe=ee,{passive:he=!1}=Oe,me=ha(Oe,["passive"]),Ye=v(),se=`headlessui-label-${Object(a.a)()}`,ie=Object(h.b)(ae);Object(p.a)(()=>Ye.register(se),[se,Ye.register]);let Ee=Yo(vr({ref:ie},Ye.props),{id:se});return he&&("onClick"in Ee&&delete Ee.onClick,"onClick"in me&&delete me.onClick),Object(o.e)({ourProps:Ee,theirProps:me,slot:Ye.slot||{},defaultTag:u,name:Ye.name||"Label"})});var i=t(189);function d(ee){var ae;if(ee.type)return ee.type;let he=(ae=ee.as)!=null?ae:"button";if(typeof he=="string"&&he.toLowerCase()==="button")return"button"}function b(ee,ae){let[he,me]=Object(s.useState)(()=>d(ee));return Object(p.a)(()=>{me(d(ee))},[ee.type,ee.as]),Object(p.a)(()=>{he||!ae.current||ae.current instanceof HTMLButtonElement&&!ae.current.hasAttribute("type")&&me("button")},[he,ae]),he}var w=t(107);function E(ee={},ae=null,he=[]){for(let[me,Ye]of Object.entries(ee))P(he,S(ae,me),Ye);return he}function S(ee,ae){return ee?ee+"["+ae+"]":ae}function P(ee,ae,he){if(Array.isArray(he))for(let[me,Ye]of he.entries())P(ee,S(ae,me.toString()),Ye);else he instanceof Date?ee.push([ae,he.toISOString()]):typeof he=="boolean"?ee.push([ae,he?"1":"0"]):typeof he=="string"?ee.push([ae,he]):typeof he=="number"?ee.push([ae,`${he}`]):he==null?ee.push([ae,""]):E(he,ae,ee)}function D(ee){var ae;let he=(ae=ee==null?void 0:ee.form)!=null?ae:ee.closest("form");if(he){for(let me of he.elements)if(me.tagName==="INPUT"&&me.type==="submit"||me.tagName==="BUTTON"&&me.type==="submit"||me.nodeName==="INPUT"&&me.type==="image"){me.click();return}}}function W(ee,ae,he){let[me,Ye]=Object(s.useState)(he),se=ee!==void 0,ie=Object(s.useRef)(se),Ee=Object(s.useRef)(!1),Oe=Object(s.useRef)(!1);return se&&!ie.current&&!Ee.current?(Ee.current=!0,ie.current=se,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!se&&ie.current&&!Oe.current&&(Oe.current=!0,ie.current=se,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[se?ee:me,Object(m.a)(ce=>(se||Ye(ce),ae==null?void 0:ae(ce)))]}let B=Object(s.createContext)(null);B.displayName="GroupContext";let f=s.Fragment;function y(ee){let[ae,he]=Object(s.useState)(null),[me,Ye]=O(),[se,ie]=Object(i.b)(),Ee=Object(s.useMemo)(()=>({switch:ae,setSwitch:he,labelledby:me,describedby:se}),[ae,he,me,se]),Oe={},ce=ee;return s.default.createElement(ie,{name:"Switch.Description"},s.default.createElement(Ye,{name:"Switch.Label",props:{onClick(){!ae||(ae.click(),ae.focus({preventScroll:!0}))}}},s.default.createElement(B.Provider,{value:Ee},Object(o.e)({ourProps:Oe,theirProps:ce,defaultTag:f,name:"Switch.Group"}))))}let M="button",N=Object(o.d)(function(ee,ae){let Ft=ee,{checked:he,defaultChecked:me=!1,onChange:Ye,name:se,value:ie}=Ft,Ee=ha(Ft,["checked","defaultChecked","onChange","name","value"]),Oe=`headlessui-switch-${Object(a.a)()}`,ce=Object(s.useContext)(B),ue=Object(s.useRef)(null),pe=Object(h.b)(ue,ae,ce===null?null:ce.setSwitch),[$e,ne]=W(he,Ye,me),X=Object(m.a)(()=>ne==null?void 0:ne(!$e)),q=Object(m.a)(Lt=>{if(Object(l.a)(Lt.currentTarget))return Lt.preventDefault();Lt.preventDefault(),X()}),Ne=Object(m.a)(Lt=>{Lt.key===c.a.Space?(Lt.preventDefault(),X()):Lt.key===c.a.Enter&&D(Lt.currentTarget)}),Qe=Object(m.a)(Lt=>Lt.preventDefault()),Ze=Object(s.useMemo)(()=>({checked:$e}),[$e]),tt={id:Oe,ref:pe,role:"switch",type:b(ee,ue),tabIndex:0,"aria-checked":$e,"aria-labelledby":ce==null?void 0:ce.labelledby,"aria-describedby":ce==null?void 0:ce.describedby,onClick:q,onKeyUp:Ne,onKeyPress:Qe};return s.default.createElement(s.default.Fragment,null,se!=null&&$e&&s.default.createElement(w.b,vr({features:w.a.Hidden},Object(o.c)({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:$e,name:se,value:ie}))),Object(o.e)({ourProps:tt,theirProps:Ee,slot:Ze,defaultTag:M,name:"Switch"}))}),A=Object.assign(N,{Group:y,Label:r,Description:i.a});var L=t(6),C=t.n(L),R=t(292),U=Object.defineProperty,Z=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,G=(ee,ae,he)=>ae in ee?U(ee,ae,{enumerable:!0,configurable:!0,writable:!0,value:he}):ee[ae]=he,V=(ee,ae)=>{for(var he in ae||(ae={}))F.call(ae,he)&&G(ee,he,ae[he]);if(Z)for(var he of Z(ae))z.call(ae,he)&&G(ee,he,ae[he]);return ee},k=(ee,ae)=>{var he={};for(var me in ee)F.call(ee,me)&&ae.indexOf(me)<0&&(he[me]=ee[me]);if(ee!=null&&Z)for(var me of Z(ee))ae.indexOf(me)<0&&z.call(ee,me)&&(he[me]=ee[me]);return he};const K=ee=>{var ae=ee,{color:he="default",accessibilityLabel:me="Toggle setting",classNames:Ye,checked:se,small:ie=!1,preflightClassName:Ee}=ae,Oe=k(ae,["color","accessibilityLabel","classNames","checked","small","preflightClassName"]);const ce=he==="default"?"tw-bg-accent-green":"tw-bg-pub-accent";return Object(e.h)(R.a,{className:Ee},Object(e.h)(A,V({className:C()(se?ce:"tw-bg-neutral-400",ie?"tw-h4 tw-w-7":"tw-h-6 tw-w-11","tw-relative tw-inline-flex tw-flex-shrink-0 tw-cursor-pointer tw-rounded-full tw-border-2 tw-border-transparent tw-transition-colors tw-duration-200 tw-ease-in-out disabled:tw-bg-neutral-200",Ye),checked:se},Oe),Object(e.h)("span",{className:"tw-sr-only"},me),Object(e.h)("span",{"aria-hidden":"true",className:C()(se?`${ie?"tw-translate-x-3":"tw-translate-x-5"}`:"tw-translate-x-0",ie?"tw-h-3 tw-w-3":"tw-h-5 tw-w-5","tw-pointer-events-none tw-inline-block tw-transform tw-rounded-full tw-bg-white tw-shadow tw-ring-0 tw-transition tw-duration-200 tw-ease-in-out")})))};var Y=n.b=K},function($,n,t){"use strict";t.d(n,"a",function(){return m}),t.d(n,"c",function(){return g}),t.d(n,"b",function(){return v});var e=t(0),s=t(1),o=Object.defineProperty,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(O,u,r)=>u in O?o(O,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):O[u]=r,h=(O,u)=>{for(var r in u||(u={}))c.call(u,r)&&p(O,r,u[r]);if(a)for(var r of a(u))l.call(u,r)&&p(O,r,u[r]);return O};const m=Object(e.createContext)({});m.displayName="WWWContext";const g=O=>{const u=r=>{const i=Object(s.b)(m);return Object(e.h)(O,h(h({},i),r))};return u.displayName=`withWWWContext(${O.name||O.displayName||"Anonymous"})`,u},v=()=>Object(s.b)(m)},,function($,n,t){"use strict";t.d(n,"a",function(){return M}),t.d(n,"b",function(){return N});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(88),l=t(332),p=t(421),h=t(7),m=t(4),g=t(10),v=t(137),O={inlineContainer:"frontend-pencraft-unstable-UserBadge-module__inlineContainer--1Iuel",container:"frontend-pencraft-unstable-UserBadge-module__container--1ZfxO",popover:"frontend-pencraft-unstable-UserBadge-module__popover--Eqqdr"},u=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(A,L,C)=>L in A?u(A,L,{enumerable:!0,configurable:!0,writable:!0,value:C}):A[L]=C,S=(A,L)=>{for(var C in L||(L={}))b.call(L,C)&&E(A,C,L[C]);if(d)for(var C of d(L))w.call(L,C)&&E(A,C,L[C]);return A},P=(A,L)=>r(A,i(L));const D=100,W={sm:16,md:20,lg:24},B={100:p.default,1e3:l.default,1e4:l.default},f={1e4:{fill:"var(--color-accent-purple)"}},y={100:"Hundreds",1e3:"Thousands",1e4:"Tens of thousands"},M=({className:A,isStatic:L=!1,inline:C=!1,size:R="lg",tier:U,tooltipOnHover:Z=!1,userId:F})=>{const[z,G]=Object(c.b)({delayEnter:D,delayLeave:D,hideOnScroll:!0}),V=z&&!Z,{triggerProps:k,layerProps:K,renderLayer:Y}=Object(c.c)({isOpen:V,overflowContainer:!1,auto:!0,snap:!0,possiblePlacements:["top-center","bottom-center","top-start","bottom-start","top-end","bottom-end"],placement:"top-center",containerOffset:10,triggerOffset:8}),ee=K.style;Object(s.d)(()=>{z&&Object(h.i)(h.a.BESTSELLER_INFO_SHOWN,{tier:U,form:Z?"tooltip":"popover",hovered_user_id:F})},[z,U,Z,F]);const ae=W[R];if(!U)return null;const he=B[U.toString()],me=f[U.toString()],Ye=a()(A,C?O.inlineContainer:O.container);return L&&U?Object(e.h)("div",{className:Ye},Object(e.h)(he,P(S({},me),{height:ae}))):Object(e.h)("div",P(S(S({},G),k),{className:Ye}),Object(e.h)(v.a,{text:`${y[U.toString()]} of paid subscribers`,dangerouslySetTooltipZIndex:103,disabled:!Z},Object(e.h)(he,P(S({},me),{height:ae}))),V&&Y(Object(e.h)("div",P(S(S({},K),G),{style:ee,className:O.popover}),Object(e.h)(m.b,{alignItems:"center",gap:16,padding:16,paddingBottom:32},Object(e.h)(he,P(S({},me),{height:40})),Object(e.h)(m.b,{alignItems:"center",gap:4},Object(e.h)(g.b.H3,null,"Bestseller"),Object(e.h)(g.b.B4,{align:"center"},y[U.toString()]," of paid subscribers"))))))},N=({tier:A})=>{if(!A)return null;const L=B[A.toString()],C=f[A.toString()];return Object(e.h)(L,P(S({},C),{height:W.sm}))}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(67),o=t.n(s),a=t(12),c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(d,b,w)=>b in d?c(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,O=(d,b)=>{for(var w in b||(b={}))m.call(b,w)&&v(d,w,b[w]);if(h)for(var w of h(b))g.call(b,w)&&v(d,w,b[w]);return d},u=(d,b)=>l(d,p(b)),r=(d,b)=>{var w={};for(var E in d)m.call(d,E)&&b.indexOf(E)<0&&(w[E]=d[E]);if(d!=null&&h)for(var E of h(d))b.indexOf(E)<0&&g.call(d,E)&&(w[E]=d[E]);return w};const i=d=>{var b=d,{color:w=s.substack_color}=b,E=r(b,["color"]);return Object(e.h)(a.a,u(O({},E),{name:"SubstackIconNoPadding",svgParams:{height:24,width:21,fill:w,stroke:"none"}}),Object(e.h)("path",{d:"M20.9991 5.40625H0V8.24275H20.9991V5.40625Z"}),Object(e.h)("path",{d:"M0 10.8125V24.0004L10.4991 18.1107L21 24.0004V10.8125H0Z"}),Object(e.h)("path",{d:"M20.9991 0H0V2.83603H20.9991V0Z"}))};n.default=i},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";var e="millisecond",s="second",o="minute",a="hour",c="day",l="week",p="month",h="quarter",m="year",g="date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},r=function(B,f,y){var M=String(B);return!M||M.length>=f?B:""+Array(f+1-M.length).join(y)+B},i={s:r,z:function(B){var f=-B.utcOffset(),y=Math.abs(f),M=Math.floor(y/60),N=y%60;return(f<=0?"+":"-")+r(M,2,"0")+":"+r(N,2,"0")},m:function B(f,y){if(f.date()<y.date())return-B(y,f);var M=12*(y.year()-f.year())+(y.month()-f.month()),N=f.clone().add(M,p),A=y-N<0,L=f.clone().add(M+(A?-1:1),p);return+(-(M+(y-N)/(A?N-L:L-N))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:p,y:m,w:l,d:c,D:g,h:a,m:o,s,ms:e,Q:h}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},d="en",b={};b[d]=u;var w=function(B){return B instanceof D},E=function(B,f,y){var M;if(!B)return d;if(typeof B=="string")b[B]&&(M=B),f&&(b[B]=f,M=B);else{var N=B.name;b[N]=B,M=N}return!y&&M&&(d=M),M||!y&&d},S=function(B,f){if(w(B))return B.clone();var y=typeof f=="object"?f:{};return y.date=B,y.args=arguments,new D(y)},P=i;P.l=E,P.i=w,P.w=function(B,f){return S(B,{locale:f.$L,utc:f.$u,x:f.$x,$offset:f.$offset})};var D=function(){function B(y){this.$L=E(y.locale,null,!0),this.parse(y)}var f=B.prototype;return f.parse=function(y){this.$d=function(M){var N=M.date,A=M.utc;if(N===null)return new Date(NaN);if(P.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var L=N.match(v);if(L){var C=L[2]-1||0,R=(L[7]||"0").substring(0,3);return A?new Date(Date.UTC(L[1],C,L[3]||1,L[4]||0,L[5]||0,L[6]||0,R)):new Date(L[1],C,L[3]||1,L[4]||0,L[5]||0,L[6]||0,R)}}return new Date(N)}(y),this.$x=y.x||{},this.init()},f.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},f.$utils=function(){return P},f.isValid=function(){return this.$d.toString()!=="Invalid Date"},f.isSame=function(y,M){var N=S(y);return this.startOf(M)<=N&&N<=this.endOf(M)},f.isAfter=function(y,M){return S(y)<this.startOf(M)},f.isBefore=function(y,M){return this.endOf(M)<S(y)},f.$g=function(y,M,N){return P.u(y)?this[M]:this.set(N,y)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(y,M){var N=this,A=!!P.u(M)||M,L=P.p(y),C=function(k,K){var Y=P.w(N.$u?Date.UTC(N.$y,K,k):new Date(N.$y,K,k),N);return A?Y:Y.endOf(c)},R=function(k,K){return P.w(N.toDate()[k].apply(N.toDate("s"),(A?[0,0,0,0]:[23,59,59,999]).slice(K)),N)},U=this.$W,Z=this.$M,F=this.$D,z="set"+(this.$u?"UTC":"");switch(L){case m:return A?C(1,0):C(31,11);case p:return A?C(1,Z):C(0,Z+1);case l:var G=this.$locale().weekStart||0,V=(U<G?U+7:U)-G;return C(A?F-V:F+(6-V),Z);case c:case g:return R(z+"Hours",0);case a:return R(z+"Minutes",1);case o:return R(z+"Seconds",2);case s:return R(z+"Milliseconds",3);default:return this.clone()}},f.endOf=function(y){return this.startOf(y,!1)},f.$set=function(y,M){var N,A=P.p(y),L="set"+(this.$u?"UTC":""),C=(N={},N[c]=L+"Date",N[g]=L+"Date",N[p]=L+"Month",N[m]=L+"FullYear",N[a]=L+"Hours",N[o]=L+"Minutes",N[s]=L+"Seconds",N[e]=L+"Milliseconds",N)[A],R=A===c?this.$D+(M-this.$W):M;if(A===p||A===m){var U=this.clone().set(g,1);U.$d[C](R),U.init(),this.$d=U.set(g,Math.min(this.$D,U.daysInMonth())).$d}else C&&this.$d[C](R);return this.init(),this},f.set=function(y,M){return this.clone().$set(y,M)},f.get=function(y){return this[P.p(y)]()},f.add=function(y,M){var N,A=this;y=Number(y);var L=P.p(M),C=function(Z){var F=S(A);return P.w(F.date(F.date()+Math.round(Z*y)),A)};if(L===p)return this.set(p,this.$M+y);if(L===m)return this.set(m,this.$y+y);if(L===c)return C(1);if(L===l)return C(7);var R=(N={},N[o]=6e4,N[a]=36e5,N[s]=1e3,N)[L]||1,U=this.$d.getTime()+y*R;return P.w(U,this)},f.subtract=function(y,M){return this.add(-1*y,M)},f.format=function(y){var M=this;if(!this.isValid())return"Invalid Date";var N=y||"YYYY-MM-DDTHH:mm:ssZ",A=P.z(this),L=this.$locale(),C=this.$H,R=this.$m,U=this.$M,Z=L.weekdays,F=L.months,z=function(K,Y,ee,ae){return K&&(K[Y]||K(M,N))||ee[Y].substr(0,ae)},G=function(K){return P.s(C%12||12,K,"0")},V=L.meridiem||function(K,Y,ee){var ae=K<12?"AM":"PM";return ee?ae.toLowerCase():ae},k={YY:String(this.$y).slice(-2),YYYY:this.$y,M:U+1,MM:P.s(U+1,2,"0"),MMM:z(L.monthsShort,U,F,3),MMMM:z(F,U),D:this.$D,DD:P.s(this.$D,2,"0"),d:String(this.$W),dd:z(L.weekdaysMin,this.$W,Z,2),ddd:z(L.weekdaysShort,this.$W,Z,3),dddd:Z[this.$W],H:String(C),HH:P.s(C,2,"0"),h:G(1),hh:G(2),a:V(C,R,!0),A:V(C,R,!1),m:String(R),mm:P.s(R,2,"0"),s:String(this.$s),ss:P.s(this.$s,2,"0"),SSS:P.s(this.$ms,3,"0"),Z:A};return N.replace(O,function(K,Y){return Y||k[K]||A.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(y,M,N){var A,L=P.p(M),C=S(y),R=6e4*(C.utcOffset()-this.utcOffset()),U=this-C,Z=P.m(this,C);return Z=(A={},A[m]=Z/12,A[p]=Z,A[h]=Z/3,A[l]=(U-R)/6048e5,A[c]=(U-R)/864e5,A[a]=U/36e5,A[o]=U/6e4,A[s]=U/1e3,A)[L]||U,N?Z:P.a(Z)},f.daysInMonth=function(){return this.endOf(p).$D},f.$locale=function(){return b[this.$L]},f.locale=function(y,M){if(!y)return this.$L;var N=this.clone(),A=E(y,M,!0);return A&&(N.$L=A),N},f.clone=function(){return P.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},B}(),W=D.prototype;return S.prototype=W,[["$ms",e],["$s",s],["$m",o],["$H",a],["$W",c],["$M",p],["$y",m],["$D",g]].forEach(function(B){W[B[1]]=function(f){return this.$g(f,B[0],B[1])}}),S.extend=function(B,f){return B.$i||(B(f,D,S),B.$i=!0),S},S.locale=E,S.isDayjs=w,S.unix=function(B){return S(1e3*B)},S.en=b[d],S.Ls=b,S.p={},S})},function($,n,t){"use strict";t.d(n,"a",function(){return s});function e(o,a){if(o==null)return{};var c={},l=Object.keys(o),p,h;for(h=0;h<l.length;h++)p=l[h],!(a.indexOf(p)>=0)&&(c[p]=o[p]);return c}function s(o,a){if(o==null)return{};var c=e(o,a),l,p;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);for(p=0;p<h.length;p++)l=h[p],!(a.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(o,l)||(c[l]=o[l]))}return c}},function($,n,t){"use strict";t.d(n,"a",function(){return se}),t.d(n,"b",function(){return Y}),t.d(n,"c",function(){return W}),t.d(n,"d",function(){return a}),t.d(n,"e",function(){return D}),t.d(n,"f",function(){return l}),t.d(n,"g",function(){return w}),t.d(n,"h",function(){return r}),t.d(n,"i",function(){return b}),t.d(n,"j",function(){return E}),t.d(n,"k",function(){return B}),t.d(n,"l",function(){return S}),t.d(n,"m",function(){return v}),t.d(n,"n",function(){return i}),t.d(n,"o",function(){return N}),t.d(n,"p",function(){return Z}),t.d(n,"q",function(){return U}),t.d(n,"r",function(){return z}),t.d(n,"s",function(){return V}),t.d(n,"t",function(){return F});var e=t(34),s=t(13),o=t(19);const a=(ie,Ee)=>ie.selection.empty?!1:(Ee&&Ee(ie.tr.deleteSelection().scrollIntoView()),!0);function c(ie,Ee){let{$cursor:Oe}=ie.selection;return!Oe||(Ee?!Ee.endOfTextblock("backward",ie):Oe.parentOffset>0)?null:Oe}const l=(ie,Ee,Oe)=>{let ce=c(ie,Oe);if(!ce)return!1;let ue=O(ce);if(!ue){let $e=ce.blockRange(),ne=$e&&Object(e.liftTarget)($e);return ne==null?!1:(Ee&&Ee(ie.tr.lift($e,ne).scrollIntoView()),!0)}let pe=ue.nodeBefore;if(!pe.type.spec.isolating&&C(ie,ue,Ee))return!0;if(ce.parent.content.size==0&&(g(pe,"end")||o.NodeSelection.isSelectable(pe))){let $e=Object(e.replaceStep)(ie.doc,ce.before(),ce.after(),s.Slice.empty);if($e&&$e.slice.size<$e.to-$e.from){if(Ee){let ne=ie.tr.step($e);ne.setSelection(g(pe,"end")?o.Selection.findFrom(ne.doc.resolve(ne.mapping.map(ue.pos,-1)),-1):o.NodeSelection.create(ne.doc,ue.pos-pe.nodeSize)),Ee(ne.scrollIntoView())}return!0}}return pe.isAtom&&ue.depth==ce.depth-1?(Ee&&Ee(ie.tr.delete(ue.pos-pe.nodeSize,ue.pos).scrollIntoView()),!0):!1},p=(ie,Ee,Oe)=>{let ce=c(ie,Oe);if(!ce)return!1;let ue=O(ce);return ue?m(ie,ue,Ee):!1},h=(ie,Ee,Oe)=>{let ce=u(ie,Oe);if(!ce)return!1;let ue=d(ce);return ue?m(ie,ue,Ee):!1};function m(ie,Ee,Oe){let ce=Ee.nodeBefore,ue=ce,pe=Ee.pos-1;for(;!ue.isTextblock;pe--){if(ue.type.spec.isolating)return!1;let Ne=ue.lastChild;if(!Ne)return!1;ue=Ne}let $e=Ee.nodeAfter,ne=$e,X=Ee.pos+1;for(;!ne.isTextblock;X++){if(ne.type.spec.isolating)return!1;let Ne=ne.firstChild;if(!Ne)return!1;ne=Ne}let q=Object(e.replaceStep)(ie.doc,pe,X,s.Slice.empty);if(!q||q.from!=pe||q.slice.size>=X-pe)return!1;if(Oe){let Ne=ie.tr.step(q);Ne.setSelection(o.TextSelection.create(Ne.doc,pe)),Oe(Ne.scrollIntoView())}return!0}function g(ie,Ee,Oe=!1){for(let ce=ie;ce;ce=Ee=="start"?ce.firstChild:ce.lastChild){if(ce.isTextblock)return!0;if(Oe&&ce.childCount!=1)return!1}return!1}const v=(ie,Ee,Oe)=>{let{$head:ce,empty:ue}=ie.selection,pe=ce;if(!ue)return!1;if(ce.parent.isTextblock){if(Oe?!Oe.endOfTextblock("backward",ie):ce.parentOffset>0)return!1;pe=O(ce)}let $e=pe&&pe.nodeBefore;return!$e||!o.NodeSelection.isSelectable($e)?!1:(Ee&&Ee(ie.tr.setSelection(o.NodeSelection.create(ie.doc,pe.pos-$e.nodeSize)).scrollIntoView()),!0)};function O(ie){if(!ie.parent.type.spec.isolating)for(let Ee=ie.depth-1;Ee>=0;Ee--){if(ie.index(Ee)>0)return ie.doc.resolve(ie.before(Ee+1));if(ie.node(Ee).type.spec.isolating)break}return null}function u(ie,Ee){let{$cursor:Oe}=ie.selection;return!Oe||(Ee?!Ee.endOfTextblock("forward",ie):Oe.parentOffset<Oe.parent.content.size)?null:Oe}const r=(ie,Ee,Oe)=>{let ce=u(ie,Oe);if(!ce)return!1;let ue=d(ce);if(!ue)return!1;let pe=ue.nodeAfter;if(C(ie,ue,Ee))return!0;if(ce.parent.content.size==0&&(g(pe,"start")||o.NodeSelection.isSelectable(pe))){let $e=Object(e.replaceStep)(ie.doc,ce.before(),ce.after(),s.Slice.empty);if($e&&$e.slice.size<$e.to-$e.from){if(Ee){let ne=ie.tr.step($e);ne.setSelection(g(pe,"start")?o.Selection.findFrom(ne.doc.resolve(ne.mapping.map(ue.pos)),1):o.NodeSelection.create(ne.doc,ne.mapping.map(ue.pos))),Ee(ne.scrollIntoView())}return!0}}return pe.isAtom&&ue.depth==ce.depth-1?(Ee&&Ee(ie.tr.delete(ue.pos,ue.pos+pe.nodeSize).scrollIntoView()),!0):!1},i=(ie,Ee,Oe)=>{let{$head:ce,empty:ue}=ie.selection,pe=ce;if(!ue)return!1;if(ce.parent.isTextblock){if(Oe?!Oe.endOfTextblock("forward",ie):ce.parentOffset<ce.parent.content.size)return!1;pe=d(ce)}let $e=pe&&pe.nodeAfter;return!$e||!o.NodeSelection.isSelectable($e)?!1:(Ee&&Ee(ie.tr.setSelection(o.NodeSelection.create(ie.doc,pe.pos)).scrollIntoView()),!0)};function d(ie){if(!ie.parent.type.spec.isolating)for(let Ee=ie.depth-1;Ee>=0;Ee--){let Oe=ie.node(Ee);if(ie.index(Ee)+1<Oe.childCount)return ie.doc.resolve(ie.after(Ee+1));if(Oe.type.spec.isolating)break}return null}const b=(ie,Ee)=>{let Oe=ie.selection,ce=Oe instanceof o.NodeSelection,ue;if(ce){if(Oe.node.isTextblock||!Object(e.canJoin)(ie.doc,Oe.from))return!1;ue=Oe.from}else if(ue=Object(e.joinPoint)(ie.doc,Oe.from,-1),ue==null)return!1;if(Ee){let pe=ie.tr.join(ue);ce&&pe.setSelection(o.NodeSelection.create(pe.doc,ue-ie.doc.resolve(ue).nodeBefore.nodeSize)),Ee(pe.scrollIntoView())}return!0},w=(ie,Ee)=>{let Oe=ie.selection,ce;if(Oe instanceof o.NodeSelection){if(Oe.node.isTextblock||!Object(e.canJoin)(ie.doc,Oe.to))return!1;ce=Oe.to}else if(ce=Object(e.joinPoint)(ie.doc,Oe.to,1),ce==null)return!1;return Ee&&Ee(ie.tr.join(ce).scrollIntoView()),!0},E=(ie,Ee)=>{let{$from:Oe,$to:ce}=ie.selection,ue=Oe.blockRange(ce),pe=ue&&Object(e.liftTarget)(ue);return pe==null?!1:(Ee&&Ee(ie.tr.lift(ue,pe).scrollIntoView()),!0)},S=(ie,Ee)=>{let{$head:Oe,$anchor:ce}=ie.selection;return!Oe.parent.type.spec.code||!Oe.sameParent(ce)?!1:(Ee&&Ee(ie.tr.insertText(`
`).scrollIntoView()),!0)};function P(ie){for(let Ee=0;Ee<ie.edgeCount;Ee++){let{type:Oe}=ie.edge(Ee);if(Oe.isTextblock&&!Oe.hasRequiredAttrs())return Oe}return null}const D=(ie,Ee)=>{let{$head:Oe,$anchor:ce}=ie.selection;if(!Oe.parent.type.spec.code||!Oe.sameParent(ce))return!1;let ue=Oe.node(-1),pe=Oe.indexAfter(-1),$e=P(ue.contentMatchAt(pe));if(!$e||!ue.canReplaceWith(pe,pe,$e))return!1;if(Ee){let ne=Oe.after(),X=ie.tr.replaceWith(ne,ne,$e.createAndFill());X.setSelection(o.Selection.near(X.doc.resolve(ne),1)),Ee(X.scrollIntoView())}return!0},W=(ie,Ee)=>{let Oe=ie.selection,{$from:ce,$to:ue}=Oe;if(Oe instanceof o.AllSelection||ce.parent.inlineContent||ue.parent.inlineContent)return!1;let pe=P(ue.parent.contentMatchAt(ue.indexAfter()));if(!pe||!pe.isTextblock)return!1;if(Ee){let $e=(!ce.parentOffset&&ue.index()<ue.parent.childCount?ce:ue).pos,ne=ie.tr.insert($e,pe.createAndFill());ne.setSelection(o.TextSelection.create(ne.doc,$e+1)),Ee(ne.scrollIntoView())}return!0},B=(ie,Ee)=>{let{$cursor:Oe}=ie.selection;if(!Oe||Oe.parent.content.size)return!1;if(Oe.depth>1&&Oe.after()!=Oe.end(-1)){let pe=Oe.before();if(Object(e.canSplit)(ie.doc,pe))return Ee&&Ee(ie.tr.split(pe).scrollIntoView()),!0}let ce=Oe.blockRange(),ue=ce&&Object(e.liftTarget)(ce);return ue==null?!1:(Ee&&Ee(ie.tr.lift(ce,ue).scrollIntoView()),!0)};function f(ie){return(Ee,Oe)=>{let{$from:ce,$to:ue}=Ee.selection;if(Ee.selection instanceof o.NodeSelection&&Ee.selection.node.isBlock)return!ce.parentOffset||!Object(e.canSplit)(Ee.doc,ce.pos)?!1:(Oe&&Oe(Ee.tr.split(ce.pos).scrollIntoView()),!0);if(!ce.parent.isBlock)return!1;if(Oe){let pe=ue.parentOffset==ue.parent.content.size,$e=Ee.tr;(Ee.selection instanceof o.TextSelection||Ee.selection instanceof o.AllSelection)&&$e.deleteSelection();let ne=ce.depth==0?null:P(ce.node(-1).contentMatchAt(ce.indexAfter(-1))),X=ie&&ie(ue.parent,pe),q=X?[X]:pe&&ne?[{type:ne}]:void 0,Ne=Object(e.canSplit)($e.doc,$e.mapping.map(ce.pos),1,q);if(!q&&!Ne&&Object(e.canSplit)($e.doc,$e.mapping.map(ce.pos),1,ne?[{type:ne}]:void 0)&&(ne&&(q=[{type:ne}]),Ne=!0),Ne&&($e.split($e.mapping.map(ce.pos),1,q),!pe&&!ce.parentOffset&&ce.parent.type!=ne)){let Qe=$e.mapping.map(ce.before()),Ze=$e.doc.resolve(Qe);ne&&ce.node(-1).canReplaceWith(Ze.index(),Ze.index()+1,ne)&&$e.setNodeMarkup($e.mapping.map(ce.before()),ne)}Oe($e.scrollIntoView())}return!0}}const y=f(),M=(ie,Ee)=>y(ie,Ee&&(Oe=>{let ce=ie.storedMarks||ie.selection.$to.parentOffset&&ie.selection.$from.marks();ce&&Oe.ensureMarks(ce),Ee(Oe)})),N=(ie,Ee)=>{let{$from:Oe,to:ce}=ie.selection,ue,pe=Oe.sharedDepth(ce);return pe==0?!1:(ue=Oe.before(pe),Ee&&Ee(ie.tr.setSelection(o.NodeSelection.create(ie.doc,ue))),!0)},A=(ie,Ee)=>(Ee&&Ee(ie.tr.setSelection(new o.AllSelection(ie.doc))),!0);function L(ie,Ee,Oe){let ce=Ee.nodeBefore,ue=Ee.nodeAfter,pe=Ee.index();return!ce||!ue||!ce.type.compatibleContent(ue.type)?!1:!ce.content.size&&Ee.parent.canReplace(pe-1,pe)?(Oe&&Oe(ie.tr.delete(Ee.pos-ce.nodeSize,Ee.pos).scrollIntoView()),!0):!Ee.parent.canReplace(pe,pe+1)||!(ue.isTextblock||Object(e.canJoin)(ie.doc,Ee.pos))?!1:(Oe&&Oe(ie.tr.clearIncompatible(Ee.pos,ce.type,ce.contentMatchAt(ce.childCount)).join(Ee.pos).scrollIntoView()),!0)}function C(ie,Ee,Oe){let ce=Ee.nodeBefore,ue=Ee.nodeAfter,pe,$e;if(ce.type.spec.isolating||ue.type.spec.isolating)return!1;if(L(ie,Ee,Oe))return!0;let ne=Ee.parent.canReplace(Ee.index(),Ee.index()+1);if(ne&&(pe=($e=ce.contentMatchAt(ce.childCount)).findWrapping(ue.type))&&$e.matchType(pe[0]||ue.type).validEnd){if(Oe){let Qe=Ee.pos+ue.nodeSize,Ze=s.Fragment.empty;for(let Lt=pe.length-1;Lt>=0;Lt--)Ze=s.Fragment.from(pe[Lt].create(null,Ze));Ze=s.Fragment.from(ce.copy(Ze));let tt=ie.tr.step(new e.ReplaceAroundStep(Ee.pos-1,Qe,Ee.pos,Qe,new s.Slice(Ze,1,0),pe.length,!0)),Ft=Qe+2*pe.length;Object(e.canJoin)(tt.doc,Ft)&&tt.join(Ft),Oe(tt.scrollIntoView())}return!0}let X=o.Selection.findFrom(Ee,1),q=X&&X.$from.blockRange(X.$to),Ne=q&&Object(e.liftTarget)(q);if(Ne!=null&&Ne>=Ee.depth)return Oe&&Oe(ie.tr.lift(q,Ne).scrollIntoView()),!0;if(ne&&g(ue,"start",!0)&&g(ce,"end")){let Qe=ce,Ze=[];for(;Ze.push(Qe),!Qe.isTextblock;)Qe=Qe.lastChild;let tt=ue,Ft=1;for(;!tt.isTextblock;tt=tt.firstChild)Ft++;if(Qe.canReplace(Qe.childCount,Qe.childCount,tt.content)){if(Oe){let Lt=s.Fragment.empty;for(let ht=Ze.length-1;ht>=0;ht--)Lt=s.Fragment.from(Ze[ht].copy(Lt));let rn=ie.tr.step(new e.ReplaceAroundStep(Ee.pos-Ze.length,Ee.pos+ue.nodeSize,Ee.pos+Ft,Ee.pos+ue.nodeSize-Ft,new s.Slice(Lt,Ze.length,0),0,!0));Oe(rn.scrollIntoView())}return!0}}return!1}function R(ie){return function(Ee,Oe){let ce=Ee.selection,ue=ie<0?ce.$from:ce.$to,pe=ue.depth;for(;ue.node(pe).isInline;){if(!pe)return!1;pe--}return ue.node(pe).isTextblock?(Oe&&Oe(Ee.tr.setSelection(o.TextSelection.create(Ee.doc,ie<0?ue.start(pe):ue.end(pe)))),!0):!1}}const U=R(-1),Z=R(1);function F(ie,Ee=null){return function(Oe,ce){let{$from:ue,$to:pe}=Oe.selection,$e=ue.blockRange(pe),ne=$e&&Object(e.findWrapping)($e,ie,Ee);return ne?(ce&&ce(Oe.tr.wrap($e,ne).scrollIntoView()),!0):!1}}function z(ie,Ee=null){return function(Oe,ce){let ue=!1;for(let pe=0;pe<Oe.selection.ranges.length&&!ue;pe++){let{$from:{pos:$e},$to:{pos:ne}}=Oe.selection.ranges[pe];Oe.doc.nodesBetween($e,ne,(X,q)=>{if(ue)return!1;if(!(!X.isTextblock||X.hasMarkup(ie,Ee)))if(X.type==ie)ue=!0;else{let Ne=Oe.doc.resolve(q),Qe=Ne.index();ue=Ne.parent.canReplaceWith(Qe,Qe+1,ie)}})}if(!ue)return!1;if(ce){let pe=Oe.tr;for(let $e=0;$e<Oe.selection.ranges.length;$e++){let{$from:{pos:ne},$to:{pos:X}}=Oe.selection.ranges[$e];pe.setBlockType(ne,X,ie,Ee)}ce(pe.scrollIntoView())}return!0}}function G(ie,Ee,Oe){for(let ce=0;ce<Ee.length;ce++){let{$from:ue,$to:pe}=Ee[ce],$e=ue.depth==0?ie.inlineContent&&ie.type.allowsMarkType(Oe):!1;if(ie.nodesBetween(ue.pos,pe.pos,ne=>{if($e)return!1;$e=ne.inlineContent&&ne.type.allowsMarkType(Oe)}),$e)return!0}return!1}function V(ie,Ee=null){return function(Oe,ce){let{empty:ue,$cursor:pe,ranges:$e}=Oe.selection;if(ue&&!pe||!G(Oe.doc,$e,ie))return!1;if(ce)if(pe)ie.isInSet(Oe.storedMarks||pe.marks())?ce(Oe.tr.removeStoredMark(ie)):ce(Oe.tr.addStoredMark(ie.create(Ee)));else{let ne=!1,X=Oe.tr;for(let q=0;!ne&&q<$e.length;q++){let{$from:Ne,$to:Qe}=$e[q];ne=Oe.doc.rangeHasMark(Ne.pos,Qe.pos,ie)}for(let q=0;q<$e.length;q++){let{$from:Ne,$to:Qe}=$e[q];if(ne)X.removeMark(Ne.pos,Qe.pos,ie);else{let Ze=Ne.pos,tt=Qe.pos,Ft=Ne.nodeAfter,Lt=Qe.nodeBefore,rn=Ft&&Ft.isText?/^\s*/.exec(Ft.text)[0].length:0,ht=Lt&&Lt.isText?/\s*$/.exec(Lt.text)[0].length:0;Ze+rn<tt&&(Ze+=rn,tt-=ht),X.addMark(Ze,tt,ie.create(Ee))}}ce(X.scrollIntoView())}return!0}}function k(ie,Ee){return Oe=>{if(!Oe.isGeneric)return ie(Oe);let ce=[];for(let pe=0;pe<Oe.mapping.maps.length;pe++){let $e=Oe.mapping.maps[pe];for(let ne=0;ne<ce.length;ne++)ce[ne]=$e.map(ce[ne]);$e.forEach((ne,X,q,Ne)=>ce.push(q,Ne))}let ue=[];for(let pe=0;pe<ce.length;pe+=2){let $e=ce[pe],ne=ce[pe+1],X=Oe.doc.resolve($e),q=X.sharedDepth(ne),Ne=X.node(q);for(let Qe=X.indexAfter(q),Ze=X.after(q+1);Ze<=ne;++Qe){let tt=Ne.maybeChild(Qe);if(!tt)break;if(Qe&&ue.indexOf(Ze)==-1){let Ft=Ne.child(Qe-1);Ft.type==tt.type&&Ee(Ft,tt)&&ue.push(Ze)}Ze+=tt.nodeSize}}ue.sort((pe,$e)=>pe-$e);for(let pe=ue.length-1;pe>=0;pe--)Object(e.canJoin)(Oe.doc,ue[pe])&&Oe.join(ue[pe]);ie(Oe)}}function K(ie,Ee){let Oe=Array.isArray(Ee)?ce=>Ee.indexOf(ce.type.name)>-1:Ee;return(ce,ue,pe)=>ie(ce,ue&&k(ue,Oe),pe)}function Y(...ie){return function(Ee,Oe,ce){for(let ue=0;ue<ie.length;ue++)if(ie[ue](Ee,Oe,ce))return!0;return!1}}let ee=Y(a,l,v),ae=Y(a,r,i);const he={Enter:Y(S,W,B,y),"Mod-Enter":D,Backspace:ee,"Mod-Backspace":ee,"Shift-Backspace":ee,Delete:ae,"Mod-Delete":ae,"Mod-a":A},me={"Ctrl-h":he.Backspace,"Alt-Backspace":he["Mod-Backspace"],"Ctrl-d":he.Delete,"Ctrl-Alt-Backspace":he["Mod-Delete"],"Alt-Delete":he["Mod-Delete"],"Alt-d":he["Mod-Delete"],"Ctrl-a":U,"Ctrl-e":Z};for(let ie in he)me[ie]=he[ie];const se=(typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform?os.platform()=="darwin":!1)?me:he},function($,n,t){"use strict";const{AbortController:e,AbortSignal:s}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;$.exports=e,$.exports.AbortSignal=s,$.exports.default=e},,function($,n,t){var e=t(138),s=t(497),o=t(498),a="[object Null]",c="[object Undefined]",l=e?e.toStringTag:void 0;function p(h){return h==null?h===void 0?c:a:l&&l in Object(h)?s(h):o(h)}$.exports=p},function($,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"c",function(){return a}),t.d(n,"b",function(){return c});var e=t(0),s=t(1);const o=Object(e.createContext)({setChildOptions:()=>{},addRssFeed:()=>{},onboardingModalRef:{current:null},isLoading:!1,subscriptions:[],publicationUsers:[],onPageScroll:()=>{},setPinTitle:()=>{},setDrawer:()=>null,checkFocus:()=>!1,requireLogin:null});function a(l,{shouldShowGetAppPill:p=!0,style:h,alwaysPinTitle:m,backAction:g}={}){const v=c();return Object(s.g)(()=>{v.setChildOptions({title:l,style:h,alwaysPinTitle:m,backAction:g,shouldShowGetAppPill:p})},[v,l,h,g,p]),Object(s.g)(()=>{v.setPinTitle(!1)},[]),v}function c(){return Object(s.b)(o)}},function($,n,t){var e,s;/*!
* JavaScript Cookie v2.2.0
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/(function(o){var a=!1;if(e=o,s=typeof e=="function"?e.call(n,t,n,$):e,s!==void 0&&($.exports=s),a=!0,$.exports=o(),a=!0,!a){var c=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=c,l}}})(function(){function o(){for(var c=0,l={};c<arguments.length;c++){var p=arguments[c];for(var h in p)l[h]=p[h]}return l}function a(c){function l(p,h,m){var g;if(typeof document!="undefined"){if(arguments.length>1){if(m=o({path:"/"},l.defaults,m),typeof m.expires=="number"){var v=new Date;v.setMilliseconds(v.getMilliseconds()+m.expires*864e5),m.expires=v}m.expires=m.expires?m.expires.toUTCString():"";try{g=JSON.stringify(h),/^[\{\[]/.test(g)&&(h=g)}catch(S){}c.write?h=c.write(h,p):h=encodeURIComponent(String(h)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),p=encodeURIComponent(String(p)),p=p.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),p=p.replace(/[\(\)]/g,escape);var O="";for(var u in m)!m[u]||(O+="; "+u,m[u]!==!0&&(O+="="+m[u]));return document.cookie=p+"="+h+O}p||(g={});for(var r=document.cookie?document.cookie.split("; "):[],i=/(%[0-9A-Z]{2})+/g,d=0;d<r.length;d++){var b=r[d].split("="),w=b.slice(1).join("=");!this.json&&w.charAt(0)==='"'&&(w=w.slice(1,-1));try{var E=b[0].replace(i,decodeURIComponent);if(w=c.read?c.read(w,E):c(w,E)||w.replace(i,decodeURIComponent),this.json)try{w=JSON.parse(w)}catch(S){}if(p===E){g=w;break}p||(g[E]=w)}catch(S){}}return g}}return l.set=l,l.get=function(p){return l.call(l,p)},l.getJSON=function(){return l.apply({json:!0},[].slice.call(arguments))},l.defaults={},l.remove=function(p,h){l(p,"",o(h,{expires:-1}))},l.withConverter=a,l}return a(function(){})})},function($,n,t){"use strict";t.d(n,"d",function(){return A}),t.d(n,"e",function(){return L}),t.d(n,"c",function(){return U}),t.d(n,"a",function(){return Z}),t.d(n,"b",function(){return F});var e=t(0),s=t(6),o=t.n(s),a=t(156),c=t.n(a),l=t(11),p=t.n(l),h=t(33),m=t(3),g=t.n(m),v=t(9),O=t.n(v),u=t(111),r=t(7),i=t(8),d=t.n(i),b=t(148),w=t(120),E=t(44),S=Object.defineProperty,P=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,B=(z,G,V)=>G in z?S(z,G,{enumerable:!0,configurable:!0,writable:!0,value:V}):z[G]=V,f=(z,G)=>{for(var V in G||(G={}))D.call(G,V)&&B(z,V,G[V]);if(P)for(var V of P(G))W.call(G,V)&&B(z,V,G[V]);return z},y=(z,G,V)=>(B(z,typeof G!="symbol"?G+"":G,V),V),M=(z,G,V)=>new Promise((k,K)=>{var Y=he=>{try{ae(V.next(he))}catch(me){K(me)}},ee=he=>{try{ae(V.throw(he))}catch(me){K(me)}},ae=he=>he.done?k(he.value):Promise.resolve(he.value).then(Y,ee);ae((V=V.apply(z,G)).next())});const N="\u2764",A=(z,G,V)=>{const{reaction:k,reactions:K,reactor_names:Y}=C(z,G,V);R(G,k,K,Y)},L=(z,G)=>C(z,G,!G.reaction),C=(z,G,V)=>{let{reaction:k,reactions:K={},reactor_names:Y=[]}=G;return K=f({},K),Y=[...Y],V&&!k?(k=N,K[k]=K[k]?K[k]+1:1,z&&z.is_public_admin&&Y.push(z.name||"author")):!V&&k&&(K[N]=K[N]?K[N]-1:0,z&&z.is_public_admin&&(Y=Y.filter(ee=>ee!==(z.name||"author"))),k=null),{reaction:k,reactions:K,reactor_names:Y}},R=(z,G,V,k)=>{z.reaction=G,z.reactions=V,z.reactor_names=k};function U(z,G,V,k){const K=Object(m.pathWithQuery)(`/api/v1/${G?"comment":"post"}/${z.id}/reaction`,{token:k});return V?p.a.post(K).send({reaction:N}):p.a.delete(K)}class Z extends e.Component{constructor(){super(...arguments);y(this,"state",{includeModal:!1}),y(this,"modalRef",Object(e.createRef)(null)),y(this,"react",G=>M(this,null,function*(){if(this.props.isStatic)return;G&&G.stopPropagation();const k=!(this.props.comment||this.props.post).reaction;if(this.props.onReactedChange&&this.props.onReactedChange(k),this.props.noSelfUpdate)return;const K=yield Object(i.stateLock)(this,"locked",(Y,ee)=>M(this,null,function*(){const ae=ee.comment||ee.post,he=U(ae,!!ee.comment,k,ee.token),{reaction:me,reactions:Ye,reactor_names:se}=L(ee.user,ae);this.notifyParent({reactions:Ye,reaction:me,reactor_names:se});let ie;try{yield he}catch(Ee){ie=Ee,this.notifyParent(ae)}return{error:ie,reaction:me}}));return K&&K.error&&(K.error.response&&K.error.response.statusCode===401?yield this.reactionRejected(K.reaction):alert(Object(i.getNetworkErrorMessage)(K.error))),!!K&&!K.error}))}notifyParent({reaction:G,reactions:V,reactor_names:k}){const K=f({},this.props.post),Y=this.props.comment&&f({},this.props.comment);R(Y||K,G,V,k),this.props.onChange&&this.props.onChange({post:K,comment:Y})}reactionRejected(G){return M(this,null,function*(){Object(r.i)(r.a.REACTION_REJECTED,{comment_id:this.props.comment&&this.props.comment.id,post_id:this.props.post&&this.props.post.id,reason:"Not logged in",unreact:!G}),yield new Promise(V=>{this.state.includeModal?this.modalRef.current.open(V):this.setState({includeModal:!0},()=>this.modalRef.current.open(V))})})}render({className:G,user:V,pub:k,comment:K,height:Y,isStatic:ee,post:ae,buttonStyle:he,hideReactionCount:me,countInParenthesesStyle:Ye}){const se=K||ae,ie=se.reaction,Ee=se.reactions||{},Oe=c()(Object.values(Ee));let ce;return ae&&ae.reaction_url_override?ce=ae.reaction_url_override:ee?ce=h.Substitutions.REACTION_URL:ce="javascript:void(0)",Object(e.h)("span",{className:G},this.props.render?this.props.render({liked:ie,numReactions:Oe>0?Object(v.numberToString)(Oe):null,onClick:ue=>{this.react(ue)}}):Object(e.h)("a",{href:ce,className:o()("like-button",{button:he,"post-meta-button":he,liked:ie}),onClick:ue=>this.react(ue)},ee?Object(e.h)(w.default,{ampProps:{layout:"fixed"},isStatic:!0,height:Y,stroke:"#757575",fill:"transparent"}):Object(e.h)("div",{className:"reaction-container"},Object(e.h)(w.default,{className:"animation"}),!ie&&Object(e.h)(w.default,{strokeWidth:1.5,height:Y,fill:"transparent",stroke:"#757575"}),ie&&Object(e.h)(w.default,{height:Y,strokeWidth:1.5})),Ye?Object(e.h)("span",{className:"like-count"},ie?"Liked":"Like",!me&&Oe>0?` (${Object(v.numberToString)(Oe)})`:""):!me&&Oe>0?Object(e.h)("span",{className:"like-count"},Object(v.numberToString)(Oe)):he?Object(e.h)("span",{className:"like-count"},"Like"):null),!ee&&this.state.includeModal&&Object(e.h)(F,{modalRef:this.modalRef,user:V,pub:k,comment:K,react:this.react}))}}function F({comment:z,pub:G,user:V,modalRef:k,onClose:K,react:Y}){return Object(e.h)(E.b,{className:"modal-free-signup",ref:k,onClose:K},Object(e.h)("h2",{className:"page-title"},"Subscribe to like this ",z?"comment":"post"),Object(e.h)(b.a,{user:V,pub:G,source:"like_button",onSuccess:ee=>M(this,null,function*(){const ae=ee&&ee.body&&ee.body.email;ee&&ee.body&&ee.body.prompt_to_login||!(yield Y())?window.location.href=Object(m.getSigninUrl)({for_pub:G.subdomain,email:ae}):(k==null?void 0:k.current)&&(Object(u.b)({freeSignup:!0,freeSignupEmail:ae}),yield k.current.close())})}))}},function($,n,t){"use strict";t.d(n,"b",function(){return c}),t.d(n,"a",function(){return l});var e=t(0),s=t(2),o=t(1);const a=Object(e.createContext)(null);function c({root:p,children:h}){const m=Object(o.j)(p);return Object(e.h)(a.Provider,{value:m},h,!p&&Object(e.h)("div",{ref:m}))}function l({children:p}){const h=Object(o.b)(a).current;return h?Object(s.createPortal)(p,h):null}},function($,n,t){"use strict";t.d(n,"a",function(){return g});var e=t(0),s=t(6),o=t.n(s),a=t(8),c=t.n(a),l=Object.defineProperty,p=(v,O,u)=>O in v?l(v,O,{enumerable:!0,configurable:!0,writable:!0,value:u}):v[O]=u,h=(v,O,u)=>(p(v,typeof O!="symbol"?O+"":O,u),u),m=(v,O,u)=>new Promise((r,i)=>{var d=E=>{try{w(u.next(E))}catch(S){i(S)}},b=E=>{try{w(u.throw(E))}catch(S){i(S)}},w=E=>E.done?r(E.value):Promise.resolve(E.value).then(d,b);w((u=u.apply(v,O)).next())});class g extends e.Component{constructor(){super(...arguments);h(this,"checkVisibility",()=>{if(!this.ref)return;const O=this.ref.getBoundingClientRect(),u=this.props.threshold||0,r=this.props.parent?this.props.parent.clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight),i=!(O.bottom<0-u||O.top>=r+u);Object(a.stateTransaction)(this,(d,b)=>m(this,null,function*(){if(d.isVisible!==i)this.setState({isVisible:i});else if(!b.noDedupe)return;const E=i?"hadFirstVisible":"hadFirstInvisible",S=!d[E];S&&this.setState({[E]:!0}),(yield Promise.all([i&&b.onVisible&&b.onVisible(),i&&b.onFirstVisible&&S&&b.onFirstVisible(),!i&&b.onInvisible&&b.onInvisible(),!i&&b.onFirstInvisible&&S&&b.onFirstInvisible()])).reduce((D,W)=>W===!0||D)&&this.checkVisibility()}))})}componentDidMount(){return m(this,null,function*(){typeof window!="undefined"&&(this.ref||(yield new Promise(O=>setTimeout(O,0))),this.checkVisibility(),(this.props.parent||window).addEventListener("scroll",this.checkVisibility))})}componentWillUnmount(){typeof window!="undefined"&&(this.props.parent||window).removeEventListener("scroll",this.checkVisibility)}render({className:O,children:u}){return Object(e.h)("div",{ref:r=>this.ref=r,className:o()("visibility-check",O)},u)}}},function($,n,t){"use strict";t.d(n,"a",function(){return b});var e=t(0),s=t(4),o=t(294),a={tooltip:"frontend-pencraft-Tooltip-module__tooltip--2HBYV",tooltipContent:"frontend-pencraft-Tooltip-module__tooltipContent--1Ntv2"},c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(E,S,P)=>S in E?c(E,S,{enumerable:!0,configurable:!0,writable:!0,value:P}):E[S]=P,O=(E,S)=>{for(var P in S||(S={}))m.call(S,P)&&v(E,P,S[P]);if(h)for(var P of h(S))g.call(S,P)&&v(E,P,S[P]);return E},u=(E,S)=>l(E,p(S)),r=(E,S)=>{var P={};for(var D in E)m.call(E,D)&&S.indexOf(D)<0&&(P[D]=E[D]);if(E!=null&&h)for(var D of h(E))S.indexOf(D)<0&&g.call(E,D)&&(P[D]=E[D]);return P};const i=["top-start","top-center","top-end","bottom-start","bottom-center","bottom-end"],d=["left-start","left-center","left-end","right-start","right-center","right-end"],b=E=>{var S=E,{children:P,text:D,as:W="span",icon:B,preferPlacement:f="bottom-center",disabled:y,dangerouslySetTooltipZIndex:M,maxWidth:N}=S,A=r(S,["children","text","as","icon","preferPlacement","disabled","dangerouslySetTooltipZIndex","maxWidth"]);const{layerProps:L,triggerProps:C,transitionProps:R,renderLayer:U,shouldShow:Z}=Object(o.b)({layerOptions:{placement:f,possiblePlacements:d.includes(f)?d:i}}),F=L,{style:z}=F,G=r(F,["style"]);return y?Object(e.h)(e.Fragment,null,P):Object(e.h)(e.Fragment,null,Object(e.h)(W,O(O({},C),A),P),Z&&U(Object(e.h)(w,{transitionProps:R,tooltipProps:u(O({},G),{style:u(O({},z),{maxWidth:N&&`${N}px`,zIndex:M||Number.MAX_SAFE_INTEGER})}),icon:B,text:D})))};function w({transitionProps:E,tooltipProps:S,icon:P,text:D}){return Object(e.h)(o.a,O({},E),Object(e.h)("div",O({className:a.tooltip},S),Object(e.h)(s.c,{alignItems:"center",gap:8,className:a.tooltipContent},P&&Object(e.cloneElement)(P,{size:20})," ",D)))}},function($,n,t){var e=t(84),s=e.Symbol;$.exports=s},,function($,n,t){"use strict";var e=t(161);function s(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return Object(e.a)(a)}n.a=s},function($,n,t){"use strict";t.d(n,"a",function(){return r});var e=t(0),s=t(21),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(E,S,P)=>S in E?o(E,S,{enumerable:!0,configurable:!0,writable:!0,value:P}):E[S]=P,g=(E,S)=>{for(var P in S||(S={}))p.call(S,P)&&m(E,P,S[P]);if(l)for(var P of l(S))h.call(S,P)&&m(E,P,S[P]);return E},v=(E,S)=>a(E,c(S)),O=(E,S)=>{var P={};for(var D in E)p.call(E,D)&&S.indexOf(D)<0&&(P[D]=E[D]);if(E!=null&&l)for(var D of l(E))S.indexOf(D)<0&&h.call(E,D)&&(P[D]=E[D]);return P},u=(E,S,P)=>new Promise((D,W)=>{var B=M=>{try{y(P.next(M))}catch(N){W(N)}},f=M=>{try{y(P.throw(M))}catch(N){W(N)}},y=M=>M.done?D(M.value):Promise.resolve(M.value).then(B,f);y((P=P.apply(E,S)).next())});function r(E){return Object(e.h)(i,v(g({},E),{key:E.module}))}function i(E){var S=E,{onRequest:P,resolve:D,module:W,whileLoading:B}=S,f=O(S,["onRequest","resolve","module","whileLoading"]);const y=b.has(W),M=Object(s.h)(()=>w(W,P),[],{auto:!y,initialResult:y?b.get(W):null});return M.error&&console.error(M.error),Object(e.h)(e.Fragment,null,M.error?"Error":M.isLoading||!M.result?B!=null?B:null:Object(e.h)(D(M.result),f))}function d(E){return Object(e.h)(r,v(g({},E),{resolve:S=>S.default}))}const b=new Map;function w(E,S){return u(this,null,function*(){let P=b.get(E);return P||(P=yield S(),b.set(E,P)),P})}},function($,n,t){"use strict";(function(e){t.d(n,"a",function(){return xd}),t.d(n,"b",function(){return Bd}),t.d(n,"c",function(){return Fd}),t.d(n,"d",function(){return Ud}),t.d(n,"e",function(){return Wd}),t.d(n,"f",function(){return $d}),t.d(n,"g",function(){return kd}),t.d(n,"h",function(){return Kd});var s=t(2);function o(Se){const we=new Error(Se);if(we.stack===void 0)try{throw we}catch(Ge){}return we}var a=o,c=a;function l(Se){return!!Se&&typeof Se.then=="function"}var p=l;function h(Se,we){if(Se!=null)return Se;throw c(we!=null?we:"Got unexpected null or undefined")}var m=h;function g(Se,we,Ge){return we in Se?Object.defineProperty(Se,we,{value:Ge,enumerable:!0,configurable:!0,writable:!0}):Se[we]=Ge,Se}class v{getValue(){throw c("BaseLoadable")}toPromise(){throw c("BaseLoadable")}valueMaybe(){throw c("BaseLoadable")}valueOrThrow(){throw c(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw c("BaseLoadable")}promiseOrThrow(){throw c(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw c("BaseLoadable")}errorOrThrow(){throw c(`Loadable expected error, but in "${this.state}" state`)}is(we){return we.state===this.state&&we.contents===this.contents}map(we){throw c("BaseLoadable")}}class O extends v{constructor(we){super();g(this,"state","hasValue"),g(this,"contents",void 0),this.contents=we}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(we){try{const Ge=we(this.contents);return p(Ge)?b(Ge):P(Ge)?Ge:i(Ge)}catch(Ge){return p(Ge)?b(Ge.next(()=>this.map(we))):d(Ge)}}}class u extends v{constructor(we){super();g(this,"state","hasError"),g(this,"contents",void 0),this.contents=we}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(we){return this}}class r extends v{constructor(we){super();g(this,"state","loading"),g(this,"contents",void 0),this.contents=we}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(we){return b(this.contents.then(Ge=>{const ut=we(Ge);if(P(ut)){const Et=ut;switch(Et.state){case"hasValue":return Et.contents;case"hasError":throw Et.contents;case"loading":return Et.contents}}return ut}).catch(Ge=>{if(p(Ge))return Ge.then(()=>this.map(we).contents);throw Ge}))}}function i(Se){return Object.freeze(new O(Se))}function d(Se){return Object.freeze(new u(Se))}function b(Se){return Object.freeze(new r(Se))}function w(){return Object.freeze(new r(new Promise(()=>{})))}function E(Se){return Se.every(we=>we.state==="hasValue")?i(Se.map(we=>we.contents)):Se.some(we=>we.state==="hasError")?d(m(Se.find(we=>we.state==="hasError"),"Invalid loadable passed to loadableAll").contents):b(Promise.all(Se.map(we=>we.contents)))}function S(Se){const Ge=(Array.isArray(Se)?Se:Object.getOwnPropertyNames(Se).map(Et=>Se[Et])).map(Et=>P(Et)?Et:p(Et)?b(Et):i(Et)),ut=E(Ge);return Array.isArray(Se)?ut:ut.map(Et=>Object.getOwnPropertyNames(Se).reduce((nn,hn,Fn)=>Yo(vr({},nn),{[hn]:Et[Fn]}),{}))}function P(Se){return Se instanceof v}var W={loadableWithValue:i,loadableWithError:d,loadableWithPromise:b,loadableLoading:w,loadableAll:S,isLoadable:P,RecoilLoadable:{of:Se=>p(Se)?b(Se):P(Se)?Se:i(Se),error:Se=>d(Se),loading:()=>w(),all:S,isLoadable:P}},B=W.loadableWithValue,f=W.loadableWithError,y=W.loadableWithPromise,M=W.loadableLoading,N=W.loadableAll,A=W.isLoadable,L=W.RecoilLoadable,C=Object.freeze({__proto__:null,loadableWithValue:B,loadableWithError:f,loadableWithPromise:y,loadableLoading:M,loadableAll:N,isLoadable:A,RecoilLoadable:L});const R=new Map().set("recoil_hamt_2020",!0).set("recoil_sync_external_store",!0).set("recoil_suppress_rerender_in_callback",!0).set("recoil_memory_managament_2020",!0);function U(Se){var we;return(we=R.get(Se))!==null&&we!==void 0?we:!1}U.setPass=Se=>{R.set(Se,!0)},U.setFail=Se=>{R.set(Se,!1)},U.clear=()=>{R.clear()};var Z=U;function F(Se,we,{error:Ge}={}){return null}var z=F,G=z,V,k,K;const Y=(V=s.default.createMutableSource)!==null&&V!==void 0?V:s.default.unstable_createMutableSource,ee=(k=s.default.useMutableSource)!==null&&k!==void 0?k:s.default.unstable_useMutableSource,ae=(K=s.default.useSyncExternalStore)!==null&&K!==void 0?K:s.default.unstable_useSyncExternalStore;let he=!1;function me(){var Se;const{ReactCurrentDispatcher:we,ReactCurrentOwner:Ge}=s.default.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Et=((Se=we==null?void 0:we.current)!==null&&Se!==void 0?Se:Ge.currentDispatcher).useSyncExternalStore!=null;return ae&&!Et&&!he&&(he=!0,G("A React renderer without React 18+ API support is being used with React 18+.")),Et}function Ye(){return Z("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Z("recoil_sync_external_store")&&ae!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Z("recoil_mutable_source")&&ee!=null&&typeof window!="undefined"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Z("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Z("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function se(){return!1}var ie={createMutableSource:Y,useMutableSource:ee,useSyncExternalStore:ae,currentRendererSupportsUseSyncExternalStore:me,reactMode:Ye,isFastRefreshEnabled:se};const Ee={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0};function Oe(){var Se,we,Ge;if(typeof e=="undefined"||((Se=e)===null||Se===void 0?void 0:Se.env)==null)return;const ut=(we=e.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED)===null||we===void 0||(Ge=we.toLowerCase())===null||Ge===void 0?void 0:Ge.trim();if(ut==null||ut==="")return;if(!["true","false"].includes(ut))throw c(`process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED value must be 'true', 'false', or empty: ${ut}`);Ee.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=ut==="true"}Oe();var ce=Ee;class ue{constructor(we){g(this,"key",void 0),this.key=we}toJSON(){return{key:this.key}}}class pe extends ue{}class $e extends ue{}function ne(Se){return Se instanceof pe||Se instanceof $e}var X={AbstractRecoilValue:ue,RecoilState:pe,RecoilValueReadOnly:$e,isRecoilValue:ne},q=X.AbstractRecoilValue,Ne=X.RecoilState,Qe=X.RecoilValueReadOnly,Ze=X.isRecoilValue,tt=Object.freeze({__proto__:null,AbstractRecoilValue:q,RecoilState:Ne,RecoilValueReadOnly:Qe,isRecoilValue:Ze});function Ft(Se,...we){let Ge=0;return Se.replace(/%s/g,()=>String(we[Ge++]))}var Lt=Ft;function rn(Se,...we){}var ht=rn,je=ht;function Le(Se,we){return function*(){let Ge=0;for(const ut of Se)yield we(ut,Ge++)}()}var rt=Le;const{isFastRefreshEnabled:Pe}=ie;class de{}const be=new de,Ie=new Map,ke=new Map;function Te(Se){return rt(Se,we=>m(ke.get(we)))}function x(Se){if(Ie.has(Se)){const we=`Duplicate atom key "${Se}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(we)}}function H(Se){ce.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&x(Se.key),Ie.set(Se.key,Se);const we=Se.set==null?new tt.RecoilValueReadOnly(Se.key):new tt.RecoilState(Se.key);return ke.set(Se.key,we),we}class le extends Error{}function Ce(Se){const we=Ie.get(Se);if(we==null)throw new le(`Missing definition for RecoilValue: "${Se}""`);return we}function Ue(Se){return Ie.get(Se)}const Ve=new Map;function bt(Se){var we;if(!Z("recoil_memory_managament_2020"))return;const Ge=Ie.get(Se);if(Ge!=null&&(we=Ge.shouldDeleteConfigOnRelease)!==null&&we!==void 0&&we.call(Ge)){var ut;Ie.delete(Se),(ut=Qt(Se))===null||ut===void 0||ut(),Ve.delete(Se)}}function yt(Se,we){!Z("recoil_memory_managament_2020")||(we===void 0?Ve.delete(Se):Ve.set(Se,we))}function Qt(Se){return Ve.get(Se)}var tn={nodes:Ie,recoilValues:ke,registerNode:H,getNode:Ce,getNodeMaybe:Ue,deleteNodeConfigIfPossible:bt,setConfigDeletionHandler:yt,getConfigDeletionHandler:Qt,recoilValuesForKeys:Te,NodeMissingError:le,DefaultValue:de,DEFAULT_VALUE:be};function Kn(Se,we){we()}var Ot={enqueueExecution:Kn};function lt(Se,we){return we={exports:{}},Se(we,we.exports),we.exports}var Be=lt(function(Se){var we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nn){return typeof Nn}:function(Nn){return Nn&&typeof Symbol=="function"&&Nn.constructor===Symbol&&Nn!==Symbol.prototype?"symbol":typeof Nn},Ge={},ut=5,Et=Math.pow(2,ut),nn=Et-1,hn=Et/2,Fn=Et/4,kn={},qn=function(Pn){return function(){return Pn}},Mr=Ge.hash=function(Nn){var Pn=typeof Nn=="undefined"?"undefined":we(Nn);if(Pn==="number")return Nn;Pn!=="string"&&(Nn+="");for(var Tr=0,Jr=0,Qr=Nn.length;Jr<Qr;++Jr){var io=Nn.charCodeAt(Jr);Tr=(Tr<<5)-Tr+io|0}return Tr},Vr=function(Pn){return Pn-=Pn>>1&1431655765,Pn=(Pn&858993459)+(Pn>>2&858993459),Pn=Pn+(Pn>>4)&252645135,Pn+=Pn>>8,Pn+=Pn>>16,Pn&127},wo=function(Pn,Tr){return Tr>>>Pn&nn},Fo=function(Pn){return 1<<Pn},to=function(Pn,Tr){return Vr(Pn&Tr-1)},Do=function(Pn,Tr,Jr,Qr){var io=Qr;if(!Pn){var Lo=Qr.length;io=new Array(Lo);for(var Io=0;Io<Lo;++Io)io[Io]=Qr[Io]}return io[Tr]=Jr,io},qi=function(Pn,Tr,Jr){var Qr=Jr.length-1,io=0,Lo=0,Io=Jr;if(Pn)io=Lo=Tr;else for(Io=new Array(Qr);io<Tr;)Io[Lo++]=Jr[io++];for(++io;io<=Qr;)Io[Lo++]=Jr[io++];return Pn&&(Io.length=Qr),Io},da=function(Pn,Tr,Jr,Qr){var io=Qr.length;if(Pn){for(var Lo=io;Lo>=Tr;)Qr[Lo--]=Qr[Lo];return Qr[Tr]=Jr,Qr}for(var Io=0,_o=0,ri=new Array(io+1);Io<Tr;)ri[_o++]=Qr[Io++];for(ri[Tr]=Jr;Io<io;)ri[++_o]=Qr[Io++];return ri},jo=1,fi=2,ea=3,Li=4,Gi={__hamt_isEmpty:!0},ta=function(Pn){return Pn===Gi||Pn&&Pn.__hamt_isEmpty},wa=function(Pn,Tr,Jr,Qr){return{type:jo,edit:Pn,hash:Tr,key:Jr,value:Qr,_modify:kl}},Ls=function(Pn,Tr,Jr){return{type:fi,edit:Pn,hash:Tr,children:Jr,_modify:Kl}},Ii=function(Pn,Tr,Jr){return{type:ea,edit:Pn,mask:Tr,children:Jr,_modify:vi}},Ta=function(Pn,Tr,Jr){return{type:Li,edit:Pn,size:Tr,children:Jr,_modify:ji}},gl=function(Pn){return Pn===Gi||Pn.type===jo||Pn.type===fi},ba=function(Pn,Tr,Jr,Qr,io){for(var Lo=[],Io=Qr,_o=0,ri=0;Io;++ri)Io&1&&(Lo[ri]=io[_o++]),Io>>>=1;return Lo[Tr]=Jr,Ta(Pn,_o+1,Lo)},Fa=function(Pn,Tr,Jr,Qr){for(var io=new Array(Tr-1),Lo=0,Io=0,_o=0,ri=Qr.length;_o<ri;++_o)if(_o!==Jr){var Ji=Qr[_o];Ji&&!ta(Ji)&&(io[Lo++]=Ji,Io|=1<<_o)}return Ii(Pn,Io,io)},Fl=function Nn(Pn,Tr,Jr,Qr,io,Lo){if(Jr===io)return Ls(Pn,Jr,[Lo,Qr]);var Io=wo(Tr,Jr),_o=wo(Tr,io);return Ii(Pn,Fo(Io)|Fo(_o),Io===_o?[Nn(Pn,Tr+ut,Jr,Qr,io,Lo)]:Io<_o?[Qr,Lo]:[Lo,Qr])},Wl=function(Pn,Tr,Jr,Qr,io,Lo,Io,_o){for(var ri=io.length,Ji=0;Ji<ri;++Ji){var Ia=io[Ji];if(Jr(Io,Ia.key)){var fa=Ia.value,Qa=Lo(fa);return Qa===fa?io:Qa===kn?(--_o.value,qi(Pn,Ji,io)):Do(Pn,Ji,wa(Tr,Qr,Io,Qa),io)}}var is=Lo();return is===kn?io:(++_o.value,Do(Pn,ri,wa(Tr,Qr,Io,is),io))},xs=function(Pn,Tr){return Pn===Tr.edit},kl=function(Pn,Tr,Jr,Qr,io,Lo,Io){if(Tr(Lo,this.key)){var _o=Qr(this.value);return _o===this.value?this:_o===kn?(--Io.value,Gi):xs(Pn,this)?(this.value=_o,this):wa(Pn,io,Lo,_o)}var ri=Qr();return ri===kn?this:(++Io.value,Fl(Pn,Jr,this.hash,this,io,wa(Pn,io,Lo,ri)))},Kl=function(Pn,Tr,Jr,Qr,io,Lo,Io){if(io===this.hash){var _o=xs(Pn,this),ri=Wl(_o,Pn,Tr,this.hash,this.children,Qr,Lo,Io);return ri===this.children?this:ri.length>1?Ls(Pn,this.hash,ri):ri[0]}var Ji=Qr();return Ji===kn?this:(++Io.value,Fl(Pn,Jr,this.hash,this,io,wa(Pn,io,Lo,Ji)))},vi=function(Pn,Tr,Jr,Qr,io,Lo,Io){var _o=this.mask,ri=this.children,Ji=wo(Jr,io),Ia=Fo(Ji),fa=to(_o,Ia),Qa=_o&Ia,is=Qa?ri[fa]:Gi,Vl=is._modify(Pn,Tr,Jr+ut,Qr,io,Lo,Io);if(is===Vl)return this;var Dc=xs(Pn,this),bc=_o,Oc=void 0;if(Qa&&ta(Vl)){if(bc&=~Ia,!bc)return Gi;if(ri.length<=2&&gl(ri[fa^1]))return ri[fa^1];Oc=qi(Dc,fa,ri)}else if(!Qa&&!ta(Vl)){if(ri.length>=hn)return ba(Pn,Ji,Vl,_o,ri);bc|=Ia,Oc=da(Dc,fa,Vl,ri)}else Oc=Do(Dc,fa,Vl,ri);return Dc?(this.mask=bc,this.children=Oc,this):Ii(Pn,bc,Oc)},ji=function(Pn,Tr,Jr,Qr,io,Lo,Io){var _o=this.size,ri=this.children,Ji=wo(Jr,io),Ia=ri[Ji],fa=(Ia||Gi)._modify(Pn,Tr,Jr+ut,Qr,io,Lo,Io);if(Ia===fa)return this;var Qa=xs(Pn,this),is=void 0;if(ta(Ia)&&!ta(fa))++_o,is=Do(Qa,Ji,fa,ri);else if(!ta(Ia)&&ta(fa)){if(--_o,_o<=Fn)return Fa(Pn,_o,Ji,ri);is=Do(Qa,Ji,Gi,ri)}else is=Do(Qa,Ji,fa,ri);return Qa?(this.size=_o,this.children=is,this):Ta(Pn,_o,is)};Gi._modify=function(Nn,Pn,Tr,Jr,Qr,io,Lo){var Io=Jr();return Io===kn?Gi:(++Lo.value,wa(Nn,Qr,io,Io))};function Vn(Nn,Pn,Tr,Jr,Qr){this._editable=Nn,this._edit=Pn,this._config=Tr,this._root=Jr,this._size=Qr}Vn.prototype.setTree=function(Nn,Pn){return this._editable?(this._root=Nn,this._size=Pn,this):Nn===this._root?this:new Vn(this._editable,this._edit,this._config,Nn,Pn)};var Wr=Ge.tryGetHash=function(Nn,Pn,Tr,Jr){for(var Qr=Jr._root,io=0,Lo=Jr._config.keyEq;;)switch(Qr.type){case jo:return Lo(Tr,Qr.key)?Qr.value:Nn;case fi:{if(Pn===Qr.hash)for(var Io=Qr.children,_o=0,ri=Io.length;_o<ri;++_o){var Ji=Io[_o];if(Lo(Tr,Ji.key))return Ji.value}return Nn}case ea:{var Ia=wo(io,Pn),fa=Fo(Ia);if(Qr.mask&fa){Qr=Qr.children[to(Qr.mask,fa)],io+=ut;break}return Nn}case Li:{if(Qr=Qr.children[wo(io,Pn)],Qr){io+=ut;break}return Nn}default:return Nn}};Vn.prototype.tryGetHash=function(Nn,Pn,Tr){return Wr(Nn,Pn,Tr,this)};var Yr=Ge.tryGet=function(Nn,Pn,Tr){return Wr(Nn,Tr._config.hash(Pn),Pn,Tr)};Vn.prototype.tryGet=function(Nn,Pn){return Yr(Nn,Pn,this)};var Ko=Ge.getHash=function(Nn,Pn,Tr){return Wr(void 0,Nn,Pn,Tr)};Vn.prototype.getHash=function(Nn,Pn){return Ko(Nn,Pn,this)};var Oo=Ge.get=function(Nn,Pn){return Wr(void 0,Pn._config.hash(Nn),Nn,Pn)};Vn.prototype.get=function(Nn,Pn){return Yr(Pn,Nn,this)};var ai=Ge.has=function(Nn,Pn,Tr){return Wr(kn,Nn,Pn,Tr)!==kn};Vn.prototype.hasHash=function(Nn,Pn){return ai(Nn,Pn,this)};var si=Ge.has=function(Nn,Pn){return ai(Pn._config.hash(Nn),Nn,Pn)};Vn.prototype.has=function(Nn){return si(Nn,this)};var Eo=function(Pn,Tr){return Pn===Tr};Ge.make=function(Nn){return new Vn(0,0,{keyEq:Nn&&Nn.keyEq||Eo,hash:Nn&&Nn.hash||Mr},Gi,0)},Ge.empty=Ge.make();var aa=Ge.isEmpty=function(Nn){return Nn&&!!ta(Nn._root)};Vn.prototype.isEmpty=function(){return aa(this)};var oa=Ge.modifyHash=function(Nn,Pn,Tr,Jr){var Qr={value:Jr._size},io=Jr._root._modify(Jr._editable?Jr._edit:NaN,Jr._config.keyEq,0,Nn,Pn,Tr,Qr);return Jr.setTree(io,Qr.value)};Vn.prototype.modifyHash=function(Nn,Pn,Tr){return oa(Tr,Nn,Pn,this)};var xi=Ge.modify=function(Nn,Pn,Tr){return oa(Nn,Tr._config.hash(Pn),Pn,Tr)};Vn.prototype.modify=function(Nn,Pn){return xi(Pn,Nn,this)};var Yi=Ge.setHash=function(Nn,Pn,Tr,Jr){return oa(qn(Tr),Nn,Pn,Jr)};Vn.prototype.setHash=function(Nn,Pn,Tr){return Yi(Nn,Pn,Tr,this)};var Ya=Ge.set=function(Nn,Pn,Tr){return Yi(Tr._config.hash(Nn),Nn,Pn,Tr)};Vn.prototype.set=function(Nn,Pn){return Ya(Nn,Pn,this)};var $l=qn(kn),Da=Ge.removeHash=function(Nn,Pn,Tr){return oa($l,Nn,Pn,Tr)};Vn.prototype.removeHash=Vn.prototype.deleteHash=function(Nn,Pn){return Da(Nn,Pn,this)};var Ja=Ge.remove=function(Nn,Pn){return Da(Pn._config.hash(Nn),Nn,Pn)};Vn.prototype.remove=Vn.prototype.delete=function(Nn){return Ja(Nn,this)};var qc=Ge.beginMutation=function(Nn){return new Vn(Nn._editable+1,Nn._edit+1,Nn._config,Nn._root,Nn._size)};Vn.prototype.beginMutation=function(){return qc(this)};var eu=Ge.endMutation=function(Nn){return Nn._editable=Nn._editable&&Nn._editable-1,Nn};Vn.prototype.endMutation=function(){return eu(this)};var Vd=Ge.mutate=function(Nn,Pn){var Tr=qc(Pn);return Nn(Tr),eu(Tr)};Vn.prototype.mutate=function(Nn){return Vd(Nn,this)};var Lc=function(Pn){return Pn&&tu(Pn[0],Pn[1],Pn[2],Pn[3],Pn[4])},tu=function(Pn,Tr,Jr,Qr,io){for(;Jr<Pn;){var Lo=Tr[Jr++];if(Lo&&!ta(Lo))return nu(Lo,Qr,[Pn,Tr,Jr,Qr,io])}return Lc(io)},nu=function(Pn,Tr,Jr){switch(Pn.type){case jo:return{value:Tr(Pn),rest:Jr};case fi:case Li:case ea:var Qr=Pn.children;return tu(Qr.length,Qr,0,Tr,Jr);default:return Lc(Jr)}},Hd={done:!0};function xc(Nn){this.v=Nn}xc.prototype.next=function(){if(!this.v)return Hd;var Nn=this.v;return this.v=Lc(Nn.rest),Nn},xc.prototype[Symbol.iterator]=function(){return this};var Bc=function(Pn,Tr){return new xc(nu(Pn._root,Tr))},zd=function(Pn){return[Pn.key,Pn.value]},Gd=Ge.entries=function(Nn){return Bc(Nn,zd)};Vn.prototype.entries=Vn.prototype[Symbol.iterator]=function(){return Gd(this)};var Yd=function(Pn){return Pn.key},Jd=Ge.keys=function(Nn){return Bc(Nn,Yd)};Vn.prototype.keys=function(){return Jd(this)};var Qd=function(Pn){return Pn.value},Xd=Ge.values=Vn.prototype.values=function(Nn){return Bc(Nn,Qd)};Vn.prototype.values=function(){return Xd(this)};var ru=Ge.fold=function(Nn,Pn,Tr){var Jr=Tr._root;if(Jr.type===jo)return Nn(Pn,Jr.value,Jr.key);for(var Qr=[Jr.children],io=void 0;io=Qr.pop();)for(var Lo=0,Io=io.length;Lo<Io;){var _o=io[Lo++];_o&&_o.type&&(_o.type===jo?Pn=Nn(Pn,_o.value,_o.key):Qr.push(_o.children))}return Pn};Vn.prototype.fold=function(Nn,Pn){return ru(Nn,Pn,this)};var Zd=Ge.forEach=function(Nn,Pn){return ru(function(Tr,Jr,Qr){return Nn(Jr,Qr,Pn)},null,Pn)};Vn.prototype.forEach=function(Nn){return Zd(Nn,this)};var qd=Ge.count=function(Nn){return Nn._size};Vn.prototype.count=function(){return qd(this)},Object.defineProperty(Vn.prototype,"size",{get:Vn.prototype.count}),Se.exports?Se.exports=Ge:(void 0).hamt=Ge});class _e{constructor(we){g(this,"_map",void 0),this._map=new Map(we==null?void 0:we.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(we){return this._map.get(we)}has(we){return this._map.has(we)}set(we,Ge){return this._map.set(we,Ge),this}delete(we){return this._map.delete(we),this}clone(){return fe(this)}toMap(){return new Map(this._map)}}class Ae{constructor(we){if(g(this,"_hamt",Be.empty.beginMutation()),we instanceof Ae){const Ge=we._hamt.endMutation();we._hamt=Ge.beginMutation(),this._hamt=Ge.beginMutation()}else if(we)for(const[Ge,ut]of we.entries())this._hamt.set(Ge,ut)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(we){return this._hamt.get(we)}has(we){return this._hamt.has(we)}set(we,Ge){return this._hamt.set(we,Ge),this}delete(we){return this._hamt.delete(we),this}clone(){return fe(this)}toMap(){return new Map(this._hamt)}}function fe(Se){return Z("recoil_hamt_2020")?new Ae(Se):new _e(Se)}var ft={persistentMap:fe},nt=ft.persistentMap,ct=Object.freeze({__proto__:null,persistentMap:nt});function Xe(Se,...we){const Ge=new Set;e:for(const ut of Se){for(const Et of we)if(Et.has(ut))continue e;Ge.add(ut)}return Ge}var gt=Xe;function Tt(Se,we){const Ge=new Map;return Se.forEach((ut,Et)=>{Ge.set(Et,we(ut,Et))}),Ge}var Ut=Tt;function qt(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function sn(Se){return{nodeDeps:Ut(Se.nodeDeps,we=>new Set(we)),nodeToNodeSubscriptions:Ut(Se.nodeToNodeSubscriptions,we=>new Set(we))}}function _n(Se,we,Ge,ut){const{nodeDeps:Et,nodeToNodeSubscriptions:nn}=Ge,hn=Et.get(Se);if(hn&&ut&&hn!==ut.nodeDeps.get(Se))return;Et.set(Se,we);const Fn=hn==null?we:gt(we,hn);for(const kn of Fn)nn.has(kn)||nn.set(kn,new Set),m(nn.get(kn)).add(Se);if(hn){const kn=gt(hn,we);for(const qn of kn){if(!nn.has(qn))return;const Mr=m(nn.get(qn));Mr.delete(Se),Mr.size===0&&nn.delete(qn)}}}function Hn(Se,we,Ge,ut){var Et,nn,hn,Fn;const kn=Ge.getState();ut===kn.currentTree.version||ut===((Et=kn.nextTree)===null||Et===void 0?void 0:Et.version)||ut===((nn=kn.previousTree)===null||nn===void 0?void 0:nn.version)||G("Tried to save dependencies to a discarded tree");const qn=Ge.getGraph(ut);if(_n(Se,we,qn),ut===((hn=kn.previousTree)===null||hn===void 0?void 0:hn.version)){const Vr=Ge.getGraph(kn.currentTree.version);_n(Se,we,Vr,qn)}if(ut===((Fn=kn.previousTree)===null||Fn===void 0?void 0:Fn.version)||ut===kn.currentTree.version){var Mr;const Vr=(Mr=kn.nextTree)===null||Mr===void 0?void 0:Mr.version;if(Vr!==void 0){const wo=Ge.getGraph(Vr);_n(Se,we,wo,qn)}}}var wn={cloneGraph:sn,graph:qt,saveDepsToStore:Hn};let Un=0;const bn=()=>Un++;let cr=0;const fr=()=>cr++;let ur=0;var jr={getNextTreeStateVersion:bn,getNextStoreID:fr,getNextComponentID:()=>ur++};const{persistentMap:wt}=ct,{graph:mt}=wn,{getNextTreeStateVersion:Fe}=jr;function pt(){const Se=Fe();return{version:Se,stateID:Se,transactionMetadata:{},dirtyAtoms:new Set,atomValues:wt(),nonvalidatedAtoms:wt()}}function Dt(){const Se=pt();return{currentTree:Se,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(Se.version,mt()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Jt={makeEmptyTreeState:pt,makeEmptyStoreState:Dt,getNextTreeStateVersion:Fe};class Gt{}function mn(){return new Gt}var Cn={RetentionZone:Gt,retentionZone:mn};function tr(Se,we){const Ge=new Set(Se);return Ge.add(we),Ge}function Zn(Se,we){const Ge=new Set(Se);return Ge.delete(we),Ge}function At(Se,we,Ge){const ut=new Map(Se);return ut.set(we,Ge),ut}function Xt(Se,we,Ge){const ut=new Map(Se);return ut.set(we,Ge(ut.get(we))),ut}function en(Se,we){const Ge=new Map(Se);return Ge.delete(we),Ge}function $n(Se,we){const Ge=new Map(Se);return we.forEach(ut=>Ge.delete(ut)),Ge}var Xn={setByAddingToSet:tr,setByDeletingFromSet:Zn,mapBySettingInMap:At,mapByUpdatingInMap:Xt,mapByDeletingFromMap:en,mapByDeletingMultipleFromMap:$n};function*Yn(Se,we){let Ge=0;for(const ut of Se)we(ut,Ge++)&&(yield ut)}var Sn=Yn;function nr(Se,we){return new Proxy(Se,{get:(ut,Et)=>(!(Et in ut)&&Et in we&&(ut[Et]=we[Et]()),ut[Et]),ownKeys:ut=>Object.keys(ut)})}var zt=nr;const{getNode:Kt,getNodeMaybe:$t,recoilValuesForKeys:et}=tn,{RetentionZone:Wt}=Cn,{setByAddingToSet:Vt}=Xn,cn=Object.freeze(new Set);class Tn extends Error{}function pn(Se,we,Ge){if(!Z("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:ut}=Se.getState().retention;function Et(nn){let hn=ut.get(nn);hn||ut.set(nn,hn=new Set),hn.add(we)}if(Ge instanceof Wt)Et(Ge);else if(Array.isArray(Ge))for(const nn of Ge)Et(nn);return()=>{if(!Z("recoil_memory_managament_2020"))return;const{retention:nn}=Se.getState();function hn(Fn){const kn=nn.nodesRetainedByZone.get(Fn);kn==null||kn.delete(we),kn&&kn.size===0&&nn.nodesRetainedByZone.delete(Fn)}if(Ge instanceof Wt)hn(Ge);else if(Array.isArray(Ge))for(const Fn of Ge)hn(Fn)}}function Gn(Se,we,Ge,ut){const Et=Se.getState();if(Et.nodeCleanupFunctions.has(Ge))return;const nn=Kt(Ge),hn=pn(Se,Ge,nn.retainedBy),Fn=nn.init(Se,we,ut);Et.nodeCleanupFunctions.set(Ge,()=>{Fn(),hn()})}function hr(Se,we,Ge){Gn(Se,Se.getState().currentTree,we,Ge)}function Rn(Se,we){var Ge;const ut=Se.getState();(Ge=ut.nodeCleanupFunctions.get(we))===null||Ge===void 0||Ge(),ut.nodeCleanupFunctions.delete(we)}function pr(Se,we,Ge){return Gn(Se,we,Ge,"get"),Kt(Ge).get(Se,we)}function zn(Se,we,Ge){return Kt(Ge).peek(Se,we)}function Ar(Se,we,Ge){var ut;const Et=$t(we);return Et==null||(ut=Et.invalidate)===null||ut===void 0||ut.call(Et,Se),Yo(vr({},Se),{atomValues:Se.atomValues.clone().delete(we),nonvalidatedAtoms:Se.nonvalidatedAtoms.clone().set(we,Ge),dirtyAtoms:Vt(Se.dirtyAtoms,we)})}function Rr(Se,we,Ge,ut){const Et=Kt(Ge);if(Et.set==null)throw new Tn(`Attempt to set read-only RecoilValue: ${Ge}`);const nn=Et.set;return Gn(Se,we,Ge,"set"),nn(Se,we,ut)}function ir(Se,we,Ge){const ut=Se.getState(),Et=Se.getGraph(we.version),nn=Kt(Ge).nodeType;return zt({type:nn},{loadable:()=>zn(Se,we,Ge),isActive:()=>ut.knownAtoms.has(Ge)||ut.knownSelectors.has(Ge),isSet:()=>nn==="selector"?!1:we.atomValues.has(Ge),isModified:()=>we.dirtyAtoms.has(Ge),deps:()=>{var hn;return et((hn=Et.nodeDeps.get(Ge))!==null&&hn!==void 0?hn:[])},subscribers:()=>{var hn,Fn;return{nodes:et(Sn(Sr(Se,we,new Set([Ge])),kn=>kn!==Ge)),components:rt((hn=(Fn=ut.nodeToComponentSubscriptions.get(Ge))===null||Fn===void 0?void 0:Fn.values())!==null&&hn!==void 0?hn:[],([kn])=>({name:kn}))}}})}function Sr(Se,we,Ge){const ut=new Set,Et=Array.from(Ge),nn=Se.getGraph(we.version);for(let Fn=Et.pop();Fn;Fn=Et.pop()){var hn;ut.add(Fn);const kn=(hn=nn.nodeToNodeSubscriptions.get(Fn))!==null&&hn!==void 0?hn:cn;for(const qn of kn)ut.has(qn)||Et.push(qn)}return ut}var Pr={getNodeLoadable:pr,peekNodeLoadable:zn,setNodeValue:Rr,initializeNode:hr,cleanUpNode:Rn,setUnvalidatedAtomValue_DEPRECATED:Ar,peekNodeInfo:ir,getDownstreamNodes:Sr};let yr=null;function br(Se){yr=Se}function Br(){var Se;(Se=yr)===null||Se===void 0||Se()}var Nr={setInvalidateMemoizedSnapshot:br,invalidateMemoizedSnapshot:Br};const{getDownstreamNodes:lo,getNodeLoadable:Zr,setNodeValue:zr}=Pr,{getNextComponentID:wr}=jr,{getNode:$o,getNodeMaybe:xo}=tn,{DefaultValue:Vo}=tn,{reactMode:Ti}=ie,{AbstractRecoilValue:Ho,RecoilState:oi,RecoilValueReadOnly:zo,isRecoilValue:ho}=tt,{invalidateMemoizedSnapshot:Jo}=Nr;function gi(Se,{key:we},Ge=Se.getState().currentTree){var ut,Et;const nn=Se.getState();Ge.version===nn.currentTree.version||Ge.version===((ut=nn.nextTree)===null||ut===void 0?void 0:ut.version)||Ge.version===((Et=nn.previousTree)===null||Et===void 0?void 0:Et.version)||G("Tried to read from a discarded tree");const hn=Zr(Se,Ge,we);return hn.state==="loading"&&hn.contents.catch(()=>{}),hn}function ki(Se,we){const Ge=Se.clone();return we.forEach((ut,Et)=>{ut.state==="hasValue"&&ut.contents instanceof Vo?Ge.delete(Et):Ge.set(Et,ut)}),Ge}function ao(Se,we,{key:Ge},ut){if(typeof ut=="function"){const Et=Zr(Se,we,Ge);if(Et.state==="loading"){const nn=`Tried to set atom or selector "${Ge}" using an updater function while the current state is pending, this is not currently supported.`;throw G(nn),c(nn)}else if(Et.state==="hasError")throw Et.contents;return ut(Et.contents)}else return ut}function Po(Se,we,Ge){if(Ge.type==="set"){const{recoilValue:Et,valueOrUpdater:nn}=Ge,hn=ao(Se,we,Et,nn),Fn=zr(Se,we,Et.key,hn);for(const[kn,qn]of Fn.entries())qo(we,kn,qn)}else if(Ge.type==="setLoadable"){const{recoilValue:{key:Et},loadable:nn}=Ge;qo(we,Et,nn)}else if(Ge.type==="markModified"){const{recoilValue:{key:Et}}=Ge;we.dirtyAtoms.add(Et)}else if(Ge.type==="setUnvalidated"){var ut;const{recoilValue:{key:Et},unvalidatedValue:nn}=Ge,hn=xo(Et);hn==null||(ut=hn.invalidate)===null||ut===void 0||ut.call(hn,we),we.atomValues.delete(Et),we.nonvalidatedAtoms.set(Et,nn),we.dirtyAtoms.add(Et)}else G(`Unknown action ${Ge.type}`)}function qo(Se,we,Ge){Ge.state==="hasValue"&&Ge.contents instanceof Vo?Se.atomValues.delete(we):Se.atomValues.set(we,Ge),Se.dirtyAtoms.add(we),Se.nonvalidatedAtoms.delete(we)}function Ai(Se,we){Se.replaceState(Ge=>{const ut=We(Ge);for(const Et of we)Po(Se,ut,Et);return it(Se,ut),Jo(),ut})}function hi(Se,we){if(ze.length){const Ge=ze[ze.length-1];let ut=Ge.get(Se);ut||Ge.set(Se,ut=[]),ut.push(we)}else Ai(Se,[we])}const ze=[];function Re(){const Se=new Map;return ze.push(Se),()=>{for(const[Ge,ut]of Se)Ai(Ge,ut);ze.pop()!==Se&&G("Incorrect order of batch popping")}}function We(Se){return Yo(vr({},Se),{atomValues:Se.atomValues.clone(),nonvalidatedAtoms:Se.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(Se.dirtyAtoms)})}function it(Se,we){const Ge=lo(Se,we,we.dirtyAtoms);for(const nn of Ge){var ut,Et;(ut=xo(nn))===null||ut===void 0||(Et=ut.invalidate)===null||Et===void 0||Et.call(ut,we)}}function Pt(Se,we,Ge){hi(Se,{type:"set",recoilValue:we,valueOrUpdater:Ge})}function Nt(Se,we,Ge){if(Ge instanceof Vo)return Pt(Se,we,Ge);hi(Se,{type:"setLoadable",recoilValue:we,loadable:Ge})}function kt(Se,we){hi(Se,{type:"markModified",recoilValue:we})}function Ht(Se,we,Ge){hi(Se,{type:"setUnvalidated",recoilValue:we,unvalidatedValue:Ge})}function Bt(Se,{key:we},Ge,ut=null){const Et=wr(),nn=Se.getState();nn.nodeToComponentSubscriptions.has(we)||nn.nodeToComponentSubscriptions.set(we,new Map),m(nn.nodeToComponentSubscriptions.get(we)).set(Et,[ut!=null?ut:"<not captured>",Ge]);const hn=Ti();if(hn.early&&(hn.mode==="LEGACY"||hn.mode==="MUTABLE_SOURCE")){const Fn=Se.getState().nextTree;Fn&&Fn.dirtyAtoms.has(we)&&Ge(Fn)}return{release:()=>{const Fn=Se.getState(),kn=Fn.nodeToComponentSubscriptions.get(we);if(kn===void 0||!kn.has(Et)){G(`Subscription missing at release time for atom ${we}. This is a bug in Recoil.`);return}kn.delete(Et),kn.size===0&&Fn.nodeToComponentSubscriptions.delete(we)}}}function Yt(Se,we){var Ge;const{currentTree:ut}=Se.getState(),Et=$o(we.key);(Ge=Et.clearCache)===null||Ge===void 0||Ge.call(Et,Se,ut)}var an={RecoilValueReadOnly:zo,AbstractRecoilValue:Ho,RecoilState:oi,getRecoilValueAsLoadable:gi,setRecoilValue:Pt,setRecoilValueLoadable:Nt,markRecoilValueModified:kt,setUnvalidatedRecoilValue:Ht,subscribeToRecoilValue:Bt,isRecoilValue:ho,applyAtomValueWrites:ki,batchStart:Re,writeLoadableToTreeState:qo,invalidateDownstreams:it,copyTreeState:We,refreshRecoilValue:Yt};function En(Se,we,Ge){const ut=Se.entries();let Et=ut.next();for(;!Et.done;){const nn=Et.value;if(we.call(Ge,nn[1],nn[0],Se))return!0;Et=ut.next()}return!1}var vn=En;const{cleanUpNode:ar}=Pr,{deleteNodeConfigIfPossible:Er,getNode:Dr}=tn,{RetentionZone:Lr}=Cn,no=12e4,ko=new Set;function bi(Se,we){const Ge=Se.getState(),ut=Ge.currentTree;if(Ge.nextTree){G("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}const Et=new Set;for(const hn of we)if(hn instanceof Lr)for(const Fn of Qi(Ge,hn))Et.add(Fn);else Et.add(hn);const nn=ei(Se,Et);for(const hn of nn)Vi(Se,ut,hn)}function ei(Se,we){const Ge=Se.getState(),ut=Ge.currentTree,Et=Se.getGraph(ut.version),nn=new Set,hn=new Set;return Fn(we),nn;function Fn(kn){const qn=new Set,Mr=li(Se,ut,kn,nn,hn);for(const to of Mr){var Vr;if(Dr(to).retainedBy==="recoilRoot"){hn.add(to);continue}if(((Vr=Ge.retention.referenceCounts.get(to))!==null&&Vr!==void 0?Vr:0)>0){hn.add(to);continue}if(ua(to).some(qi=>Ge.retention.referenceCounts.get(qi))){hn.add(to);continue}const Do=Et.nodeToNodeSubscriptions.get(to);if(Do&&vn(Do,qi=>hn.has(qi))){hn.add(to);continue}nn.add(to),qn.add(to)}const wo=new Set;for(const to of qn)for(const Do of(Fo=Et.nodeDeps.get(to))!==null&&Fo!==void 0?Fo:ko){var Fo;nn.has(Do)||wo.add(Do)}wo.size&&Fn(wo)}}function li(Se,we,Ge,ut,Et){const nn=Se.getGraph(we.version),hn=[],Fn=new Set;for(;Ge.size>0;)kn(m(Ge.values().next().value));return hn;function kn(qn){if(ut.has(qn)||Et.has(qn)){Ge.delete(qn);return}if(Fn.has(qn))return;const Mr=nn.nodeToNodeSubscriptions.get(qn);if(Mr)for(const Vr of Mr)kn(Vr);Fn.add(qn),Ge.delete(qn),hn.push(qn)}}function Vi(Se,we,Ge){if(!Z("recoil_memory_managament_2020"))return;ar(Se,Ge);const ut=Se.getState();ut.knownAtoms.delete(Ge),ut.knownSelectors.delete(Ge),ut.nodeTransactionSubscriptions.delete(Ge),ut.retention.referenceCounts.delete(Ge);const Et=ua(Ge);for(const kn of Et){var nn;(nn=ut.retention.nodesRetainedByZone.get(kn))===null||nn===void 0||nn.delete(Ge)}we.atomValues.delete(Ge),we.dirtyAtoms.delete(Ge),we.nonvalidatedAtoms.delete(Ge);const hn=ut.graphsByVersion.get(we.version);if(hn){const kn=hn.nodeDeps.get(Ge);if(kn!==void 0){hn.nodeDeps.delete(Ge);for(const qn of kn){var Fn;(Fn=hn.nodeToNodeSubscriptions.get(qn))===null||Fn===void 0||Fn.delete(Ge)}}hn.nodeToNodeSubscriptions.delete(Ge)}Er(Ge)}function Qi(Se,we){var Ge;return(Ge=Se.retention.nodesRetainedByZone.get(we))!==null&&Ge!==void 0?Ge:ko}function ua(Se){const we=Dr(Se).retainedBy;return we===void 0||we==="components"||we==="recoilRoot"?[]:we instanceof Lr?[we]:we}function Oi(Se,we){const Ge=Se.getState();Ge.nextTree?Ge.retention.retainablesToCheckForRelease.add(we):bi(Se,new Set([we]))}function _a(Se,we,Ge){var ut;if(!Z("recoil_memory_managament_2020"))return;const Et=Se.getState().retention.referenceCounts,nn=((ut=Et.get(we))!==null&&ut!==void 0?ut:0)+Ge;nn===0?pa(Se,we):Et.set(we,nn)}function pa(Se,we){if(!Z("recoil_memory_managament_2020"))return;Se.getState().retention.referenceCounts.delete(we),Oi(Se,we)}function Ra(Se){if(!Z("recoil_memory_managament_2020"))return;const we=Se.getState();bi(Se,we.retention.retainablesToCheckForRelease),we.retention.retainablesToCheckForRelease.clear()}function Si(Se){return Se===void 0?"recoilRoot":Se}var yi={SUSPENSE_TIMEOUT_MS:no,updateRetainCount:_a,updateRetainCountToZero:pa,releaseScheduledRetainablesNow:Ra,retainedByOptionWithDefault:Si};const{unstable_batchedUpdates:Wa}=s.default;var ot={unstable_batchedUpdates:Wa};const{unstable_batchedUpdates:at}=ot;var Ct={unstable_batchedUpdates:at};const{batchStart:ln}=an,{unstable_batchedUpdates:yn}=Ct;let Dn=yn;var Cr={getBatcher:()=>Dn,setBatcher:Se=>{Dn=Se},batchUpdates:Se=>{Dn(()=>{let we=()=>{};try{we=ln(),Se()}finally{we()}})}};function*sr(Se){for(const we of Se)for(const Ge of we)yield Ge}var mo=sr;const po=typeof Window=="undefined"||typeof window=="undefined",Hr=Se=>!po&&(Se===window||Se instanceof Window),Xr=typeof navigator!="undefined"&&navigator.product==="ReactNative";var Ir={isSSR:po,isReactNative:Xr,isWindow:Hr};function Ur(Se,we){let Ge;return(...Et)=>{Ge||(Ge={});const nn=we(...Et);return Object.hasOwnProperty.call(Ge,nn)||(Ge[nn]=Se(...Et)),Ge[nn]}}function mr(Se,we){let Ge,ut;return(...nn)=>{const hn=we(...nn);return Ge===hn||(Ge=hn,ut=Se(...nn)),ut}}function ro(Se,we){let Ge,ut;return[(...hn)=>{const Fn=we(...hn);return Ge===Fn||(Ge=Fn,ut=Se(...hn)),ut},()=>{Ge=null}]}var co={memoizeWithArgsHash:Ur,memoizeOneWithArgsHash:mr,memoizeOneWithArgsHashAndInvalidation:ro};const{batchUpdates:j}=Cr,{initializeNode:T,peekNodeInfo:_}=Pr,{graph:J}=wn,{getNextStoreID:oe}=jr,{DEFAULT_VALUE:ve,recoilValues:xe,recoilValuesForKeys:Ke}=tn,{AbstractRecoilValue:qe,getRecoilValueAsLoadable:vt,setRecoilValue:It,setUnvalidatedRecoilValue:un}=an,{updateRetainCount:On}=yi,{setInvalidateMemoizedSnapshot:dn}=Nr,{getNextTreeStateVersion:In,makeEmptyStoreState:Qn}=Jt,{isSSR:dr}=Ir,{memoizeOneWithArgsHashAndInvalidation:Gr}=co,Kr=`
Recoil Snapshots only last for the duration of the callback they are provided to. To keep a Snapshot longer, do this:

  const release = snapshot.retain();
  try {
    await doSomethingWithSnapshot(snapshot);
  } finally {
    release();
  }

This is currently a DEV-only warning but will become a thrown exception in the next release of Recoil.
`;class eo{constructor(we,Ge){g(this,"_store",void 0),g(this,"_refCount",1),g(this,"getLoadable",ut=>(this.checkRefCount_INTERNAL(),vt(this._store,ut))),g(this,"getPromise",ut=>(this.checkRefCount_INTERNAL(),this.getLoadable(ut).toPromise())),g(this,"getNodes_UNSTABLE",ut=>{if(this.checkRefCount_INTERNAL(),(ut==null?void 0:ut.isModified)===!0){if((ut==null?void 0:ut.isInitialized)===!1)return[];const hn=this._store.getState().currentTree;return Ke(hn.dirtyAtoms)}const Et=this._store.getState().knownAtoms,nn=this._store.getState().knownSelectors;return(ut==null?void 0:ut.isInitialized)==null?xe.values():ut.isInitialized===!0?Ke(mo([Et,nn])):Sn(xe.values(),({key:hn})=>!Et.has(hn)&&!nn.has(hn))}),g(this,"getInfo_UNSTABLE",({key:ut})=>(this.checkRefCount_INTERNAL(),_(this._store,this._store.getState().currentTree,ut))),g(this,"map",ut=>{this.checkRefCount_INTERNAL();const Et=new To(this,j);return ut(Et),Et}),g(this,"asyncMap",ut=>Ac(this,null,function*(){this.checkRefCount_INTERNAL();const Et=new To(this,j);return Et.retain(),yield ut(Et),Et.autoRelease_INTERNAL(),Et})),this._store={storeID:oe(),parentStoreID:Ge,getState:()=>we,replaceState:ut=>{we.currentTree=ut(we.currentTree)},getGraph:ut=>{const Et=we.graphsByVersion;if(Et.has(ut))return m(Et.get(ut));const nn=J();return Et.set(ut,nn),nn},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw c("Cannot subscribe to Snapshots")}};for(const ut of this._store.getState().knownAtoms)T(this._store,ut,"get"),On(this._store,ut,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0&&G("Attempt to retain() Snapshot that was already released."),this._refCount++;let we=!1;return()=>{we||(we=!0,this._release())}}autoRelease_INTERNAL(){dr||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(we=>we()),this._store.getState().nodeCleanupFunctions.clear(),!Z("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Z("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function qr(Se,we,Ge=!1){const ut=Se.getState(),Et=Ge?In():we.version;return{currentTree:{version:Ge?Et:we.version,stateID:Ge?Et:we.stateID,transactionMetadata:vr({},we.transactionMetadata),dirtyAtoms:new Set(we.dirtyAtoms),atomValues:we.atomValues.clone(),nonvalidatedAtoms:we.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(ut.knownAtoms),knownSelectors:new Set(ut.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(Et,Se.getGraph(we.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(rt(ut.nodeCleanupFunctions.entries(),([nn])=>[nn,()=>{}]))}}function so(Se){const we=new eo(Qn());return Se!=null?we.map(Se):we}const[oo,ti]=Gr((Se,we)=>{var Ge;const ut=Se.getState(),Et=we==="latest"?(Ge=ut.nextTree)!==null&&Ge!==void 0?Ge:ut.currentTree:m(ut.previousTree);return new eo(qr(Se,Et),Se.storeID)},(Se,we)=>{var Ge,ut;return String(we)+String(Se.storeID)+String((Ge=Se.getState().nextTree)===null||Ge===void 0?void 0:Ge.version)+String(Se.getState().currentTree.version)+String((ut=Se.getState().previousTree)===null||ut===void 0?void 0:ut.version)});dn(ti);function _r(Se,we="latest"){const Ge=oo(Se,we);return Ge.isRetained()?Ge:(ti(),oo(Se,we))}class To extends eo{constructor(we,Ge){super(qr(we.getStore_INTERNAL(),we.getStore_INTERNAL().getState().currentTree,!0),we.getStoreID());g(this,"_batch",void 0),g(this,"set",(ut,Et)=>{this.checkRefCount_INTERNAL();const nn=this.getStore_INTERNAL();this._batch(()=>{On(nn,ut.key,1),It(this.getStore_INTERNAL(),ut,Et)})}),g(this,"reset",ut=>{this.checkRefCount_INTERNAL();const Et=this.getStore_INTERNAL();this._batch(()=>{On(Et,ut.key,1),It(this.getStore_INTERNAL(),ut,ve)})}),g(this,"setUnvalidatedAtomValues_DEPRECATED",ut=>{this.checkRefCount_INTERNAL();const Et=this.getStore_INTERNAL();j(()=>{for(const[nn,hn]of ut.entries())On(Et,nn,1),un(Et,new qe(nn),hn)})}),this._batch=Ge}}var Co={Snapshot:eo,MutableSnapshot:To,freshSnapshot:so,cloneSnapshot:_r},Ei=Co.Snapshot,ni=Co.MutableSnapshot,pi=Co.freshSnapshot,Bi=Co.cloneSnapshot,_i=Object.freeze({__proto__:null,Snapshot:Ei,MutableSnapshot:ni,freshSnapshot:pi,cloneSnapshot:Bi});function Qo(...Se){const we=new Set;for(const Ge of Se)for(const ut of Ge)we.add(ut);return we}var ci=Qo;const{useRef:Xi}=s.default;function Ri(Se){const we=Xi(Se);return we.current===Se&&typeof Se=="function"&&(we.current=Se()),we}var yo=Ri;const{getNextTreeStateVersion:go,makeEmptyStoreState:Di}=Jt,{cleanUpNode:Ui,getDownstreamNodes:Ki,initializeNode:Mi,setNodeValue:ma,setUnvalidatedAtomValue_DEPRECATED:Fi}=Pr,{graph:Pa}=wn,{cloneGraph:Ca}=wn,{getNextStoreID:ka}=jr,{createMutableSource:sa,reactMode:Sa}=ie,{applyAtomValueWrites:Na}=an,{releaseScheduledRetainablesNow:Mn}=yi,{freshSnapshot:$r}=_i,{useCallback:uo,useContext:Bo,useEffect:Uo,useMemo:Hi,useRef:$i,useState:Oa}=s.default;function ya(){throw c("This component must be used inside a <RecoilRoot> component.")}const Ma=Object.freeze({storeID:ka(),getState:ya,replaceState:ya,getGraph:ya,subscribeToTransactions:ya,addTransactionMetadata:ya});let Xa=!1;function Za(Se){if(Xa)throw c("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const we=Se.getState();if(we.nextTree===null){Z("recoil_memory_managament_2020")&&Z("recoil_release_on_cascading_update_killswitch_2021")&&we.commitDepth>0&&Mn(Se);const Ge=we.currentTree.version,ut=go();we.nextTree=Yo(vr({},we.currentTree),{version:ut,stateID:ut,dirtyAtoms:new Set,transactionMetadata:{}}),we.graphsByVersion.set(ut,Ca(m(we.graphsByVersion.get(Ge))))}}const La=s.default.createContext({current:Ma}),as=()=>Bo(La),Ka=s.default.createContext(null);function ss(){const Se=Bo(Ka);return Se==null&&je("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),Se}function na(Se,we,Ge){const ut=Ki(Se,Ge,Ge.dirtyAtoms);for(const Et of ut){const nn=we.nodeToComponentSubscriptions.get(Et);if(nn)for(const[hn,[Fn,kn]]of nn)kn(Ge)}}function vl(Se){const we=Se.getState(),Ge=we.currentTree,ut=Ge.dirtyAtoms;if(ut.size){for(const[Et,nn]of we.nodeTransactionSubscriptions)if(ut.has(Et))for(const[hn,Fn]of nn)Fn(Se);for(const[Et,nn]of we.transactionSubscriptions)nn(Se);(!Sa().early||we.suspendedComponentResolvers.size>0)&&(na(Se,we,Ge),we.suspendedComponentResolvers.forEach(Et=>Et()),we.suspendedComponentResolvers.clear())}we.queuedComponentCallbacks_DEPRECATED.forEach(Et=>Et(Ge)),we.queuedComponentCallbacks_DEPRECATED.splice(0,we.queuedComponentCallbacks_DEPRECATED.length)}function ls(Se){const we=Se.getState();we.commitDepth++;try{const{nextTree:Ge}=we;if(Ge==null)return;we.previousTree=we.currentTree,we.currentTree=Ge,we.nextTree=null,vl(Se),we.previousTree!=null?we.graphsByVersion.delete(we.previousTree.version):G("Ended batch with no previous state, which is unexpected","recoil"),we.previousTree=null,Z("recoil_memory_managament_2020")&&Ge==null&&Mn(Se)}finally{we.commitDepth--}}function el({setNotifyBatcherOfChange:Se}){const we=as(),[,Ge]=Oa([]);return Se(()=>Ge({})),Uo(()=>(Se(()=>Ge({})),()=>{Se(()=>{})}),[Se]),Uo(()=>{Ot.enqueueExecution("Batcher",()=>{ls(we.current)})}),null}function ga(Se,we){const Ge=Di();return we({set:(ut,Et)=>{const nn=Ge.currentTree,hn=ma(Se,nn,ut.key,Et),Fn=new Set(hn.keys()),kn=nn.nonvalidatedAtoms.clone();for(const qn of Fn)kn.delete(qn);Ge.currentTree=Yo(vr({},nn),{dirtyAtoms:ci(nn.dirtyAtoms,Fn),atomValues:Na(nn.atomValues,hn),nonvalidatedAtoms:kn})},setUnvalidatedAtomValues:ut=>{ut.forEach((Et,nn)=>{Ge.currentTree=Fi(Ge.currentTree,nn,Et)})}}),Ge}function tl(Se){const we=$r(Se),Ge=we.getStore_INTERNAL().getState();return we.retain(),Ge.nodeCleanupFunctions.forEach(ut=>ut()),Ge.nodeCleanupFunctions.clear(),Ge}let ys=0;function nl({initializeState_DEPRECATED:Se,initializeState:we,store_INTERNAL:Ge,children:ut}){let Et;const nn=Fo=>{const to=Et.current.graphsByVersion;if(to.has(Fo))return m(to.get(Fo));const Do=Pa();return to.set(Fo,Do),Do},hn=(Fo,to)=>{if(to==null){const{transactionSubscriptions:Do}=Vr.current.getState(),qi=ys++;return Do.set(qi,Fo),{release:()=>{Do.delete(qi)}}}else{const{nodeTransactionSubscriptions:Do}=Vr.current.getState();Do.has(to)||Do.set(to,new Map);const qi=ys++;return m(Do.get(to)).set(qi,Fo),{release:()=>{const da=Do.get(to);da&&(da.delete(qi),da.size===0&&Do.delete(to))}}}},Fn=Fo=>{Za(Vr.current);for(const to of Object.keys(Fo))m(Vr.current.getState().nextTree).transactionMetadata[to]=Fo[to]},kn=Fo=>{Za(Vr.current);const to=m(Et.current.nextTree);let Do;try{Xa=!0,Do=Fo(to)}finally{Xa=!1}Do!==to&&(Et.current.nextTree=Do,Sa().early&&na(Vr.current,Et.current,Do),m(qn.current)())},qn=$i(null),Mr=uo(Fo=>{qn.current=Fo},[qn]),Vr=yo(()=>Ge!=null?Ge:{storeID:ka(),getState:()=>Et.current,replaceState:kn,getGraph:nn,subscribeToTransactions:hn,addTransactionMetadata:Fn});Ge!=null&&(Vr.current=Ge),Et=yo(()=>Se!=null?ga(Vr.current,Se):we!=null?tl(we):Di());const wo=Hi(()=>sa==null?void 0:sa(Et,()=>Et.current.currentTree.version),[Et]);return Uo(()=>{const Fo=Vr.current;for(const to of new Set(Fo.getState().knownAtoms))Mi(Fo,to,"get");return()=>{for(const to of Fo.getState().knownAtoms)Ui(Fo,to)}},[Vr]),s.default.createElement(La.Provider,{value:Vr},s.default.createElement(Ka.Provider,{value:wo},s.default.createElement(el,{setNotifyBatcherOfChange:Mr}),ut))}function Es(Se){const Et=Se,{override:we}=Et,Ge=ha(Et,["override"]),ut=as();return we===!1&&ut.current!==Ma?Se.children:s.default.createElement(nl,Ge)}function Ps(){return as().current.storeID}var xa={RecoilRoot:Es,useStoreRef:as,useRecoilMutableSource:ss,useRecoilStoreID:Ps,notifyComponents_FOR_TESTING:na,sendEndOfBatchNotifications_FOR_TESTING:vl};function cs(Se,we){if(Se===we)return!0;if(Se.length!==we.length)return!1;for(let Ge=0,ut=Se.length;Ge<ut;Ge++)if(Se[Ge]!==we[Ge])return!1;return!0}var Ba=cs;const{useEffect:bl,useRef:Hl}=s.default;function us(Se){const we=Hl();return bl(()=>{we.current=Se}),we.current}var Cs=us;const{useStoreRef:Ol}=xa,{SUSPENSE_TIMEOUT_MS:zl}=yi,{updateRetainCount:Ss}=yi,{RetentionZone:Bs}=Cn,{useEffect:yl,useRef:yc}=s.default,{isSSR:Gl}=Ir;function El(Se){if(!!Z("recoil_memory_managament_2020"))return Yl(Se)}function Yl(Se){const Ge=(Array.isArray(Se)?Se:[Se]).map(hn=>hn instanceof Bs?hn:hn.key),ut=Ol();yl(()=>{if(!Z("recoil_memory_managament_2020"))return;const hn=ut.current;if(Et.current&&!Gl)window.clearTimeout(Et.current),Et.current=null;else for(const Fn of Ge)Ss(hn,Fn,1);return()=>{for(const Fn of Ge)Ss(hn,Fn,-1)}},[ut,...Ge]);const Et=yc(),nn=Cs(Ge);if(!Gl&&(nn===void 0||!Ba(nn,Ge))){const hn=ut.current;for(const Fn of Ge)Ss(hn,Fn,1);if(nn)for(const Fn of nn)Ss(hn,Fn,-1);Et.current&&window.clearTimeout(Et.current),Et.current=window.setTimeout(()=>{Et.current=null;for(const Fn of Ge)Ss(hn,Fn,-1)},zl)}}var Us=El;function Pl(){return"<component name not available>"}var js=Pl;const{batchUpdates:Fs}=Cr,{DEFAULT_VALUE:rl}=tn,{currentRendererSupportsUseSyncExternalStore:Cl,reactMode:qa,useMutableSource:ds,useSyncExternalStore:Jl}=ie,{useRecoilMutableSource:Ql,useStoreRef:ja}=xa,{isRecoilValue:Xl}=tt,{AbstractRecoilValue:ol,getRecoilValueAsLoadable:Ts,setRecoilValue:Ws,setUnvalidatedRecoilValue:il,subscribeToRecoilValue:fs}=an,{useCallback:la,useEffect:$a,useMemo:Sl,useRef:Va,useState:al}=s.default,{setByAddingToSet:Zl}=Xn;function sl(Se,we,Ge){if(Se.state==="hasValue")return Se.contents;throw Se.state==="loading"?new Promise(Et=>{Ge.current.getState().suspendedComponentResolvers.add(Et)}):Se.state==="hasError"?Se.contents:c(`Invalid value of loadable atom "${we.key}"`)}function ql(Se,we){if(!Xl(Se))throw c(`Invalid argument to ${we}: expected an atom or selector but got ${String(Se)}`)}function ec(){const Se=js(),we=ja(),[,Ge]=al([]),ut=Va(new Set);ut.current=new Set;const Et=Va(new Set),nn=Va(new Map),hn=la(kn=>{const qn=nn.current.get(kn);qn&&(qn.release(),nn.current.delete(kn))},[nn]),Fn=la((kn,qn)=>{nn.current.has(qn)&&Ge([])},[]);return $a(()=>{const kn=we.current;gt(ut.current,Et.current).forEach(qn=>{if(nn.current.has(qn)){je(`Double subscription to RecoilValue "${qn}"`);return}const Mr=fs(kn,new ol(qn),wo=>Fn(wo,qn),Se);nn.current.set(qn,Mr),kn.getState().nextTree?kn.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{Fn(kn.getState(),qn)}):Fn(kn.getState(),qn)}),gt(Et.current,ut.current).forEach(qn=>{hn(qn)}),Et.current=ut.current}),$a(()=>{const kn=nn.current;return gt(ut.current,new Set(kn.keys())).forEach(qn=>{const Mr=fs(we.current,new ol(qn),Vr=>Fn(Vr,qn),Se);kn.set(qn,Mr)}),()=>kn.forEach((qn,Mr)=>hn(Mr))},[Se,we,hn,Fn]),Sl(()=>{function kn(to){return Do=>{Ws(we.current,to,Do)}}function qn(to){return()=>Ws(we.current,to,rl)}function Mr(to){var Do;ut.current.has(to.key)||(ut.current=Zl(ut.current,to.key));const qi=we.current.getState();return Ts(we.current,to,qa().early&&(Do=qi.nextTree)!==null&&Do!==void 0?Do:qi.currentTree)}function Vr(to){const Do=Mr(to);return sl(Do,to,we)}function wo(to){return[Vr(to),kn(to)]}function Fo(to){return[Mr(to),kn(to)]}return{getRecoilValue:Vr,getRecoilValueLoadable:Mr,getRecoilState:wo,getRecoilStateLoadable:Fo,getSetRecoilState:kn,getResetRecoilState:qn}},[ut,we])}const jl={current:0};function Tl(Se){const we=ja(),Ge=js(),ut=la(()=>{var Fn;const kn=we.current,qn=kn.getState(),Mr=qa().early&&(Fn=qn.nextTree)!==null&&Fn!==void 0?Fn:qn.currentTree;return{loadable:Ts(kn,Se,Mr),key:Se.key}},[we,Se]),Et=la(Fn=>{let kn;return()=>{var qn,Mr;const Vr=Fn();return(qn=kn)!==null&&qn!==void 0&&qn.loadable.is(Vr.loadable)&&((Mr=kn)===null||Mr===void 0?void 0:Mr.key)===Vr.key?kn:(kn=Vr,Vr)}},[]),nn=Sl(()=>Et(ut),[ut,Et]),hn=la(Fn=>{const kn=we.current;return fs(kn,Se,Fn,Ge).release},[we,Se,Ge]);return Jl(hn,nn,nn).loadable}function tc(Se){const we=ja(),Ge=la(()=>{var qn;const Mr=we.current,Vr=Mr.getState(),wo=qa().early&&(qn=Vr.nextTree)!==null&&qn!==void 0?qn:Vr.currentTree;return Ts(Mr,Se,wo)},[we,Se]),ut=la(()=>Ge(),[Ge]),Et=js(),nn=la((qn,Mr)=>{const Vr=we.current;return fs(Vr,Se,()=>{if(!Z("recoil_suppress_rerender_in_callback"))return Mr();const Fo=Ge();kn.current.is(Fo)||Mr(),kn.current=Fo},Et).release},[we,Se,Et,Ge]),hn=Ql();if(hn==null)throw c("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const Fn=ds(hn,ut,nn),kn=Va(Fn);return $a(()=>{kn.current=Fn}),Fn}function ll(Se){const we=ja(),Ge=js(),ut=la(()=>{var kn;const qn=we.current,Mr=qn.getState(),Vr=qa().early&&(kn=Mr.nextTree)!==null&&kn!==void 0?kn:Mr.currentTree;return Ts(qn,Se,Vr)},[we,Se]),Et=la(()=>({loadable:ut(),key:Se.key}),[ut,Se.key]),nn=la(kn=>{const qn=Et();return kn.loadable.is(qn.loadable)&&kn.key===qn.key?kn:qn},[Et]);$a(()=>{const kn=fs(we.current,Se,qn=>{Fn(nn)},Ge);return Fn(nn),kn.release},[Ge,Se,we,nn]);const[hn,Fn]=al(Et);return hn.key!==Se.key?Et().loadable:hn.loadable}function cl(Se){const we=ja(),[,Ge]=al([]),ut=js(),Et=la(()=>{var Fn;const kn=we.current,qn=kn.getState(),Mr=qa().early&&(Fn=qn.nextTree)!==null&&Fn!==void 0?Fn:qn.currentTree;return Ts(kn,Se,Mr)},[we,Se]),nn=Et(),hn=Va(nn);return $a(()=>{hn.current=nn}),$a(()=>{const Fn=we.current,kn=Fn.getState(),qn=fs(Fn,Se,Vr=>{var wo;if(!Z("recoil_suppress_rerender_in_callback"))return Ge([]);const Fo=Et();(wo=hn.current)!==null&&wo!==void 0&&wo.is(Fo)||Ge(Fo),hn.current=Fo},ut);if(kn.nextTree)Fn.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{hn.current=null,Ge([])});else{var Mr;if(!Z("recoil_suppress_rerender_in_callback"))return Ge([]);const Vr=Et();(Mr=hn.current)!==null&&Mr!==void 0&&Mr.is(Vr)||Ge(Vr),hn.current=Vr}return qn.release},[ut,Et,Se,we]),nn}function hs(Se){return Z("recoil_memory_managament_2020")&&Us(Se),{TRANSITION_SUPPORT:ll,SYNC_EXTERNAL_STORE:Cl()?Tl:ll,MUTABLE_SOURCE:tc,LEGACY:cl}[qa().mode](Se)}function ks(Se){const we=ja(),Ge=hs(Se);return sl(Ge,Se,we)}function ps(Se){const we=ja();return la(Ge=>{Ws(we.current,Se,Ge)},[we,Se])}function ul(Se){const we=ja();return la(()=>{Ws(we.current,Se,rl)},[we,Se])}function nc(Se){return[ks(Se),ps(Se)]}function rc(Se){return[hs(Se),ps(Se)]}function ms(){const Se=ja();return(we,Ge={})=>{Fs(()=>{Se.current.addTransactionMetadata(Ge),we.forEach((ut,Et)=>il(Se.current,new ol(Et),ut))})}}function Ds(Se){return Z("recoil_memory_managament_2020")&&Us(Se),ll(Se)}function Ua(Se){const we=ja(),Ge=Ds(Se);return sl(Ge,Se,we)}function Dl(Se){return[Ua(Se),ps(Se)]}var oc={recoilComponentGetRecoilValueCount_FOR_TESTING:jl,useRecoilInterface:ec,useRecoilState:nc,useRecoilStateLoadable:rc,useRecoilValue:ks,useRecoilValueLoadable:hs,useResetRecoilState:ul,useSetRecoilState:ps,useSetUnvalidatedAtomValues:ms,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Ds,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Ua,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Dl};function Ml(Se,we){const Ge=new Map;for(const[ut,Et]of Se)we(Et,ut)&&Ge.set(ut,Et);return Ge}var Al=Ml;function Ks(Se,we){const Ge=new Set;for(const ut of Se)we(ut)&&Ge.add(ut);return Ge}var Aa=Ks;function ic(...Se){const we=new Map;for(let Ge=0;Ge<Se.length;Ge++){const ut=Se[Ge].keys();let Et;for(;!(Et=ut.next()).done;)we.set(Et.value,Se[Ge].get(Et.value))}return we}var ac=ic;const{batchUpdates:$s}=Cr,{DEFAULT_VALUE:es,getNode:sc,nodes:wl}=tn,{useStoreRef:dl}=xa,{AbstractRecoilValue:fl,setRecoilValueLoadable:lc}=an,{SUSPENSE_TIMEOUT_MS:cc}=yi,{cloneSnapshot:Ha}=_i,{useCallback:Vs,useEffect:Il,useRef:Ms,useState:uc}=s.default,{isSSR:Hs}=Ir;function As(Se){const we=dl();Il(()=>we.current.subscribeToTransactions(Se).release,[Se,we])}function gs(Se){const we=Se.atomValues.toMap(),Ge=Ut(Al(we,(ut,Et)=>{const hn=sc(Et).persistence_UNSTABLE;return hn!=null&&hn.type!=="none"&&ut.state==="hasValue"}),ut=>ut.contents);return ac(Se.nonvalidatedAtoms.toMap(),Ge)}function dc(Se){As(Vs(we=>{let Ge=we.getState().previousTree;const ut=we.getState().currentTree;Ge||(G("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),Ge=we.getState().currentTree);const Et=gs(ut),nn=gs(Ge),hn=Ut(wl,kn=>{var qn,Mr,Vr,wo;return{persistence_UNSTABLE:{type:(qn=(Mr=kn.persistence_UNSTABLE)===null||Mr===void 0?void 0:Mr.type)!==null&&qn!==void 0?qn:"none",backButton:(Vr=(wo=kn.persistence_UNSTABLE)===null||wo===void 0?void 0:wo.backButton)!==null&&Vr!==void 0?Vr:!1}}}),Fn=Aa(ut.dirtyAtoms,kn=>Et.has(kn)||nn.has(kn));Se({atomValues:Et,previousAtomValues:nn,atomInfo:hn,modifiedAtoms:Fn,transactionMetadata:vr({},ut.transactionMetadata)})},[Se]))}function _l(Se){As(Vs(we=>{const Ge=Ha(we,"latest"),ut=Ha(we,"previous");Se({snapshot:Ge,previousSnapshot:ut})},[Se]))}function fc(){const Se=dl(),[we,Ge]=uc(()=>Ha(Se.current)),ut=Cs(we),Et=Ms(),nn=Ms();if(As(Vs(Fn=>Ge(Ha(Fn)),[])),Il(()=>{const Fn=we.retain();if(Et.current&&!Hs){var kn;window.clearTimeout(Et.current),Et.current=null,(kn=nn.current)===null||kn===void 0||kn.call(nn),nn.current=null}return()=>{window.setTimeout(Fn,10)}},[we]),ut!==we&&!Hs){if(Et.current){var hn;window.clearTimeout(Et.current),Et.current=null,(hn=nn.current)===null||hn===void 0||hn.call(nn),nn.current=null}nn.current=we.retain(),Et.current=window.setTimeout(()=>{var Fn;Et.current=null,(Fn=nn.current)===null||Fn===void 0||Fn.call(nn),nn.current=null},cc)}return we}function ws(Se,we){var Ge;const ut=Se.getState(),Et=(Ge=ut.nextTree)!==null&&Ge!==void 0?Ge:ut.currentTree,nn=we.getStore_INTERNAL().getState().currentTree;$s(()=>{const hn=new Set;for(const qn of[Et.atomValues.keys(),nn.atomValues.keys()])for(const Mr of qn){var Fn,kn;((Fn=Et.atomValues.get(Mr))===null||Fn===void 0?void 0:Fn.contents)!==((kn=nn.atomValues.get(Mr))===null||kn===void 0?void 0:kn.contents)&&sc(Mr).shouldRestoreFromSnapshots&&hn.add(Mr)}hn.forEach(qn=>{lc(Se,new fl(qn),nn.atomValues.has(qn)?m(nn.atomValues.get(qn)):es)}),Se.replaceState(qn=>Yo(vr({},qn),{stateID:we.getID()}))})}function hc(){const Se=dl();return Vs(we=>ws(Se.current,we),[Se])}var He={useRecoilSnapshot:fc,gotoSnapshot:ws,useGotoRecoilSnapshot:hc,useRecoilTransactionObserver:_l,useTransactionObservation_DEPRECATED:dc,useTransactionSubscription_DEPRECATED:As};const{peekNodeInfo:De}=Pr,{useStoreRef:Me}=xa;function st(){const Se=Me();return({key:we})=>De(Se.current,Se.current.getState().currentTree,we)}var dt=st;const{reactMode:Rt}=ie,{RecoilRoot:xt,useStoreRef:jt}=xa,{useMemo:_t}=s.default;function on(){Rt().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const Se=jt().current;return _t(()=>{function we({children:Ge}){return s.default.createElement(xt,{store_INTERNAL:Se},Ge)}return we},[Se])}var gn=on;const{loadableWithValue:Wn}=C,{initializeNode:or}=Pr,{DEFAULT_VALUE:lr,getNode:An}=tn,{copyTreeState:xn,getRecoilValueAsLoadable:Bn,invalidateDownstreams:fn,writeLoadableToTreeState:Or}=an;function kr(Se){return An(Se.key).nodeType==="atom"}class Mo{constructor(we,Ge){g(this,"_store",void 0),g(this,"_treeState",void 0),g(this,"_changes",void 0),g(this,"get",ut=>{if(this._changes.has(ut.key))return this._changes.get(ut.key);if(!kr(ut))throw c("Reading selectors within atomicUpdate is not supported");const Et=Bn(this._store,ut,this._treeState);if(Et.state==="hasValue")return Et.contents;throw Et.state==="hasError"?Et.contents:c(`Expected Recoil atom ${ut.key} to have a value, but it is in a loading state.`)}),g(this,"set",(ut,Et)=>{if(!kr(ut))throw c("Setting selectors within atomicUpdate is not supported");if(typeof Et=="function"){const nn=this.get(ut);this._changes.set(ut.key,Et(nn))}else or(this._store,ut.key,"set"),this._changes.set(ut.key,Et)}),g(this,"reset",ut=>{this.set(ut,lr)}),this._store=we,this._treeState=Ge,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const we=xn(this._treeState);for(const[Ge,ut]of this._changes)Or(we,Ge,Wn(ut));return fn(this._store,we),we}}function vo(Se){return we=>{Se.replaceState(Ge=>{const ut=new Mo(Se,Ge);return we(ut),ut.newTreeState_INTERNAL()})}}var ii={atomicUpdater:vo},Wo=ii.atomicUpdater,Go=Object.freeze({__proto__:null,atomicUpdater:Wo});function Ao(Se,we){if(!Se)throw new Error(we)}var ui=Ao,gr=ui;const{atomicUpdater:fo}=Go,{batchUpdates:So}=Cr,{DEFAULT_VALUE:mi}=tn,{useStoreRef:Ro}=xa,{refreshRecoilValue:Pi,setRecoilValue:Ci}=an,{cloneSnapshot:ra}=_i,{gotoSnapshot:ca}=He,{useCallback:va}=s.default;class za{}const Xo=new za;function ts(Se,we,Ge,ut){let Et=Xo,nn;if(So(()=>{const Fn="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof we!="function")throw c(Fn);const kn=zt(Yo(vr({},ut!=null?ut:{}),{set:(Mr,Vr)=>Ci(Se,Mr,Vr),reset:Mr=>Ci(Se,Mr,mi),refresh:Mr=>Pi(Se,Mr),gotoSnapshot:Mr=>ca(Se,Mr),transact_UNSTABLE:Mr=>fo(Se)(Mr)}),{snapshot:()=>{const Mr=ra(Se);return nn=Mr.retain(),Mr}}),qn=we(kn);if(typeof qn!="function")throw c(Fn);Et=qn(...Ge)}),Et instanceof za&&gr(!1),p(Et))Et.finally(()=>{var Fn;(Fn=nn)===null||Fn===void 0||Fn()});else{var hn;(hn=nn)===null||hn===void 0||hn()}return Et}function Ea(Se,we){const Ge=Ro();return va((...ut)=>ts(Ge.current,Se,ut),we!=null?[...we,Ge]:void 0)}var zi={recoilCallback:ts,useRecoilCallback:Ea};const{useStoreRef:vs}=xa,{refreshRecoilValue:zs}=an,{useCallback:Zi}=s.default;function ns(Se){const we=vs();return Zi(()=>{const Ge=we.current;zs(Ge,Se)},[Se,we])}var bs=ns;const{atomicUpdater:Is}=Go,{useStoreRef:Rl}=xa,{useMemo:hl}=s.default;function rs(Se,we){const Ge=Rl();return hl(()=>(...ut)=>{Is(Ge.current)(nn=>{Se(nn)(...ut)})},we!=null?[...we,Ge]:void 0)}var Ga=rs;class Gs{constructor(we){g(this,"value",void 0),this.value=we}}var _s={WrappedValue:Gs},di=_s.WrappedValue,Rs=Object.freeze({__proto__:null,WrappedValue:di});const{isFastRefreshEnabled:pc}=ie;class Ys extends Error{}class Nl{constructor(we){var Ge,ut,Et;g(this,"_name",void 0),g(this,"_numLeafs",void 0),g(this,"_root",void 0),g(this,"_onHit",void 0),g(this,"_onSet",void 0),g(this,"_mapNodeValue",void 0),this._name=we==null?void 0:we.name,this._numLeafs=0,this._root=null,this._onHit=(Ge=we==null?void 0:we.onHit)!==null&&Ge!==void 0?Ge:()=>{},this._onSet=(ut=we==null?void 0:we.onSet)!==null&&ut!==void 0?ut:()=>{},this._mapNodeValue=(Et=we==null?void 0:we.mapNodeValue)!==null&&Et!==void 0?Et:nn=>nn}size(){return this._numLeafs}root(){return this._root}get(we,Ge){var ut;return(ut=this.getLeafNode(we,Ge))===null||ut===void 0?void 0:ut.value}getLeafNode(we,Ge){if(this._root==null)return;let ut=this._root;for(;ut;){if(Ge==null||Ge.onNodeVisit(ut),ut.type==="leaf")return this._onHit(ut),ut;const Et=this._mapNodeValue(we(ut.nodeKey));ut=ut.branches.get(Et)}}set(we,Ge,ut){const Et=()=>{var nn,hn,Fn,kn;let qn,Mr;for(const[qi,da]of we){var Vr,wo,Fo;const jo=this._root;if((jo==null?void 0:jo.type)==="leaf")throw this.invalidCacheError();const fi=qn;if(qn=fi?fi.branches.get(Mr):jo,qn=(Vr=qn)!==null&&Vr!==void 0?Vr:{type:"branch",nodeKey:qi,parent:fi,branches:new Map,branchKey:Mr},qn.type!=="branch"||qn.nodeKey!==qi)throw this.invalidCacheError();fi==null||fi.branches.set(Mr,qn),ut==null||(wo=ut.onNodeVisit)===null||wo===void 0||wo.call(ut,qn),Mr=this._mapNodeValue(da),this._root=(Fo=this._root)!==null&&Fo!==void 0?Fo:qn}const to=qn?(nn=qn)===null||nn===void 0?void 0:nn.branches.get(Mr):this._root;if(to!=null&&(to.type!=="leaf"||to.branchKey!==Mr))throw this.invalidCacheError();const Do={type:"leaf",value:Ge,parent:qn,branchKey:Mr};(hn=qn)===null||hn===void 0||hn.branches.set(Mr,Do),this._root=(Fn=this._root)!==null&&Fn!==void 0?Fn:Do,this._numLeafs++,this._onSet(Do),ut==null||(kn=ut.onNodeVisit)===null||kn===void 0||kn.call(ut,Do)};try{Et()}catch(nn){if(nn instanceof Ys)this.clear(),Et();else throw nn}}delete(we){const Ge=this.root();if(!Ge)return!1;if(we===Ge)return this._root=null,this._numLeafs=0,!0;let ut=we.parent,Et=we.branchKey;for(;ut;){var nn;if(ut.branches.delete(Et),ut===Ge)return ut.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(ut.branches.size>0)break;Et=(nn=ut)===null||nn===void 0?void 0:nn.branchKey,ut=ut.parent}for(;ut!==Ge;ut=ut.parent)if(ut==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const we=pc()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw G(we+(this._name!=null?` - ${this._name}`:"")),new Ys}}var Js={TreeCache:Nl},Os=Js.TreeCache,pl=Object.freeze({__proto__:null,TreeCache:Os});class Qs{constructor(we){var Ge;g(this,"_maxSize",void 0),g(this,"_size",void 0),g(this,"_head",void 0),g(this,"_tail",void 0),g(this,"_map",void 0),g(this,"_keyMapper",void 0),this._maxSize=we.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(Ge=we.mapKey)!==null&&Ge!==void 0?Ge:ut=>ut}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(we){return this._map.has(this._keyMapper(we))}get(we){const Ge=this._keyMapper(we),ut=this._map.get(Ge);if(!!ut)return this.set(we,ut.value),ut.value}set(we,Ge){const ut=this._keyMapper(we);this._map.get(ut)&&this.delete(we);const nn=this.head(),hn={key:we,right:nn,left:null,value:Ge};nn?nn.left=hn:this._tail=hn,this._map.set(ut,hn),this._head=hn,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const we=this.tail();we&&this.delete(we.key)}delete(we){const Ge=this._keyMapper(we);if(!this._size||!this._map.has(Ge))return;const ut=m(this._map.get(Ge)),Et=ut.right,nn=ut.left;Et&&(Et.left=ut.left),nn&&(nn.right=ut.right),ut===this.head()&&(this._head=Et),ut===this.tail()&&(this._tail=nn),this._map.delete(Ge),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Xs={LRUCache:Qs},Q=Xs.LRUCache,te=Object.freeze({__proto__:null,LRUCache:Q});const{LRUCache:ge}=te,{TreeCache:re}=pl;function ye({name:Se,maxSize:we,mapNodeValue:Ge=ut=>ut}){const ut=new ge({maxSize:we}),Et=new re({name:Se,mapNodeValue:Ge,onHit:nn=>{ut.set(nn,!0)},onSet:nn=>{const hn=ut.tail();ut.set(nn,!0),hn&&Et.size()>we&&Et.delete(hn.key)}});return Et}var Je=ye;const St=15;function Mt(Se,we,Ge){if(typeof Se=="string"&&!Se.includes('"')&&!Se.includes("\\"))return`"${Se}"`;switch(typeof Se){case"undefined":return"";case"boolean":return Se?"true":"false";case"number":case"symbol":return String(Se);case"string":return JSON.stringify(Se);case"function":if((we==null?void 0:we.allowFunctions)!==!0)throw c("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${Se.name})__`}if(Se===null)return"null";if(typeof Se!="object"){var ut;return(ut=JSON.stringify(Se))!==null&&ut!==void 0?ut:""}if(p(Se))return"__PROMISE__";if(Array.isArray(Se))return`[${Se.map((Et,nn)=>Mt(Et,we,nn.toString()))}]`;if(typeof Se.toJSON=="function")return Mt(Se.toJSON(Ge),we,Ge);if(Se instanceof Map){const Et={};for(const[nn,hn]of Se)Et[typeof nn=="string"?nn:Mt(nn,we)]=hn;return Mt(Et,we,Ge)}return Se instanceof Set?Mt(Array.from(Se).sort((Et,nn)=>Mt(Et,we).localeCompare(Mt(nn,we))),we,Ge):Symbol!==void 0&&Se[Symbol.iterator]!=null&&typeof Se[Symbol.iterator]=="function"?Mt(Array.from(Se),we,Ge):`{${Object.keys(Se).filter(Et=>Se[Et]!==void 0).sort().map(Et=>`${Mt(Et,we)}:${Mt(Se[Et],we,Et)}`).join(",")}}`}function Zt(Se,we={allowFunctions:!1}){return Mt(Se,we)}var jn=Zt;const{TreeCache:xr}=pl,Fr={equality:"reference",eviction:"keep-all",maxSize:1/0};function bo({equality:Se=Fr.equality,eviction:we=Fr.eviction,maxSize:Ge=Fr.maxSize}=Fr,ut){const Et=Ni(Se);return wi(we,Ge,Et,ut)}function Ni(Se){switch(Se){case"reference":return we=>we;case"value":return we=>jn(we)}throw c(`Unrecognized equality policy ${Se}`)}function wi(Se,we,Ge,ut){switch(Se){case"keep-all":return new xr({name:ut,mapNodeValue:Ge});case"lru":return Je({name:ut,maxSize:m(we),mapNodeValue:Ge});case"most-recent":return Je({name:ut,maxSize:1,mapNodeValue:Ge})}throw c(`Unrecognized eviction policy ${Se}`)}var Wi=bo;function ia(Se){var we,Ge;if(typeof window=="undefined")return!1;const Et=(Ge=(Se!=null?(we=Se.ownerDocument)!==null&&we!==void 0?we:Se:document).defaultView)!==null&&Ge!==void 0?Ge:window;return Se!=null&&(typeof Et.Node=="function"?Se instanceof Et.Node:typeof Se=="object"&&typeof Se.nodeType=="number"&&typeof Se.nodeName=="string")}var No=ia;const{isReactNative:Ns,isWindow:Ll}=Ir;function lu(Se){if(Se===null||typeof Se!="object")return!0;switch(typeof Se.$$typeof){case"symbol":return!0;case"number":return!0}return!!(Se["@@__IMMUTABLE_ITERABLE__@@"]!=null||Se["@@__IMMUTABLE_KEYED__@@"]!=null||Se["@@__IMMUTABLE_INDEXED__@@"]!=null||Se["@@__IMMUTABLE_ORDERED__@@"]!=null||Se["@@__IMMUTABLE_RECORD__@@"]!=null||No(Se)||p(Se)||Se instanceof Error||ArrayBuffer.isView(Se)||!Ns&&Ll(Se))}function Uc(Se){if(!(typeof Se!="object"||lu(Se))){Object.freeze(Se);for(const we in Se)if(Object.prototype.hasOwnProperty.call(Se,we)){const Ge=Se[we];typeof Ge=="object"&&Ge!=null&&!Object.isFrozen(Ge)&&Uc(Ge)}Object.seal(Se)}}var af=Uc;function cu(Se){return()=>null}var uu={startPerfBlock:cu};const{isLoadable:du,loadableWithError:Ec,loadableWithPromise:fu,loadableWithValue:wc}=C,{WrappedValue:Fc}=Rs,{getNodeLoadable:Pc,peekNodeLoadable:hu,setNodeValue:pu}=Pr,{saveDepsToStore:mu}=wn,{DEFAULT_VALUE:gu,getConfigDeletionHandler:vu,getNode:bu,registerNode:Wc}=tn,{isRecoilValue:Ou}=tt,{markRecoilValueModified:kc}=an,{retainedByOptionWithDefault:yu}=yi,{recoilCallback:Eu}=zi,{startPerfBlock:Pu}=uu;class Kc{}const mc=new Kc,gc=[],Cc=new Map,Cu=(()=>{let Se=0;return()=>Se++})();function $c(Se){let we=null;const{key:Ge,get:ut,cachePolicy_UNSTABLE:Et}=Se,nn=Se.set!=null?Se.set:void 0,hn=new Set,Fn=Wi(Et!=null?Et:{equality:"reference",eviction:"keep-all"},Ge),kn=yu(Se.retainedBy_UNSTABLE),qn=new Map;let Mr=0;function Vr(){return!Z("recoil_memory_managament_2020")||Mr>0}function wo(Vn){return Vn.getState().knownSelectors.add(Ge),Mr++,()=>{Mr--}}function Fo(){return vu(Ge)!==void 0&&!Vr()}function to(Vn,Wr,Yr,Ko,Oo){Wl(Wr,Ko,Oo),Do(Vn,Yr)}function Do(Vn,Wr){Fa(Vn,Wr)&&ba(Vn),da(Wr,!0)}function qi(Vn,Wr){Fa(Vn,Wr)&&(m(Ii(Vn)).stateVersions.clear(),da(Wr,!1))}function da(Vn,Wr){const Yr=Cc.get(Vn);if(Yr!=null){for(const Ko of Yr)kc(Ko,m(we));Wr&&Cc.delete(Vn)}}function jo(Vn,Wr){let Yr=Cc.get(Wr);Yr==null&&Cc.set(Wr,Yr=new Set),Yr.add(Vn)}function fi(Vn,Wr,Yr,Ko,Oo,ai){return Wr.then(si=>{if(!Vr())throw ba(Vn),mc;const Eo=wc(si);return to(Vn,Yr,Oo,Eo,Ko),si}).catch(si=>{if(!Vr())throw ba(Vn),mc;if(p(si))return ea(Vn,si,Yr,Ko,Oo,ai);const Eo=Ec(si);throw to(Vn,Yr,Oo,Eo,Ko),si})}function ea(Vn,Wr,Yr,Ko,Oo,ai){return Wr.then(si=>{if(!Vr())throw ba(Vn),mc;ai.loadingDepKey!=null&&ai.loadingDepPromise===Wr?Yr.atomValues.set(ai.loadingDepKey,wc(si)):Vn.getState().knownSelectors.forEach(xi=>{Yr.atomValues.delete(xi)});const Eo=ta(Vn,Yr);if(Eo&&Eo.state!=="loading"){if((Fa(Vn,Oo)||Ii(Vn)==null)&&Do(Vn,Oo),Eo.state==="hasValue")return Eo.contents;throw Eo.contents}if(!Fa(Vn,Oo)){const xi=Ls(Vn,Yr);if(xi!=null)return xi.loadingLoadable.contents}const[aa,oa]=Gi(Vn,Yr,Oo);if(aa.state!=="loading"&&to(Vn,Yr,Oo,aa,oa),aa.state==="hasError")throw aa.contents;return aa.contents}).catch(si=>{if(si instanceof Kc)throw mc;if(!Vr())throw ba(Vn),mc;const Eo=Ec(si);throw to(Vn,Yr,Oo,Eo,Ko),si})}function Li(Vn,Wr,Yr,Ko){var Oo,ai,si,Eo;if(Fa(Vn,Ko)||Wr.version===((Oo=Vn.getState())===null||Oo===void 0||(ai=Oo.currentTree)===null||ai===void 0?void 0:ai.version)||Wr.version===((si=Vn.getState())===null||si===void 0||(Eo=si.nextTree)===null||Eo===void 0?void 0:Eo.version)){var aa,oa,xi;mu(Ge,Yr,Vn,(aa=(oa=Vn.getState())===null||oa===void 0||(xi=oa.nextTree)===null||xi===void 0?void 0:xi.version)!==null&&aa!==void 0?aa:Vn.getState().currentTree.version)}for(const Yi of Yr)hn.add(Yi)}function Gi(Vn,Wr,Yr){const Ko=Pu(Ge);let Oo=!0,ai=!0;const si=()=>{Ko(),ai=!1};let Eo,aa=!1,oa;const xi={loadingDepKey:null,loadingDepPromise:null},Yi=new Map;function Ya({key:Da}){const Ja=Pc(Vn,Wr,Da);switch(Yi.set(Da,Ja),Oo||(Li(Vn,Wr,new Set(Yi.keys()),Yr),qi(Vn,Yr)),Ja.state){case"hasValue":return Ja.contents;case"hasError":throw Ja.contents;case"loading":throw xi.loadingDepKey=Da,xi.loadingDepPromise=Ja.contents,Ja.contents}throw c("Invalid Loadable state")}const $l=Da=>(...Ja)=>{if(ai)throw c("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return we==null&&gr(!1),Eu(Vn,Da,Ja,{node:we})};try{Eo=ut({get:Ya,getCallback:$l}),Eo=Ou(Eo)?Ya(Eo):Eo,du(Eo)&&(Eo.state==="hasError"&&(aa=!0),Eo=Eo.contents),p(Eo)?Eo=fi(Vn,Eo,Wr,Yi,Yr,xi).finally(si):si(),Eo=Eo instanceof Fc?Eo.value:Eo}catch(Da){Eo=Da,p(Eo)?Eo=ea(Vn,Eo,Wr,Yi,Yr,xi).finally(si):(aa=!0,si())}return aa?oa=Ec(Eo):p(Eo)?oa=fu(Eo):oa=wc(Eo),Oo=!1,gl(Vn,Yr,Yi),Li(Vn,Wr,new Set(Yi.keys()),Yr),[oa,Yi]}function ta(Vn,Wr){let Yr=Wr.atomValues.get(Ge);if(Yr!=null)return Yr;const Ko=new Set;try{Yr=Fn.get(ai=>(typeof ai!="string"&&gr(!1),Pc(Vn,Wr,ai).contents),{onNodeVisit:ai=>{ai.type==="branch"&&ai.nodeKey!==Ge&&Ko.add(ai.nodeKey)}})}catch(ai){throw c(`Problem with cache lookup for selector "${Ge}": ${ai.message}`)}if(Yr){var Oo;Wr.atomValues.set(Ge,Yr),Li(Vn,Wr,Ko,(Oo=Ii(Vn))===null||Oo===void 0?void 0:Oo.executionID)}return Yr}function wa(Vn,Wr){const Yr=ta(Vn,Wr);if(Yr!=null)return ba(Vn),Yr;const Ko=Ls(Vn,Wr);if(Ko!=null){var Oo;return((Oo=Ko.loadingLoadable)===null||Oo===void 0?void 0:Oo.state)==="loading"&&jo(Vn,Ko.executionID),Ko.loadingLoadable}const ai=Cu(),[si,Eo]=Gi(Vn,Wr,ai);return si.state==="loading"?(Ta(Vn,ai,si,Eo,Wr),jo(Vn,ai)):(ba(Vn),Wl(Wr,si,Eo)),si}function Ls(Vn,Wr){const Yr=mo([qn.has(Vn)?[m(qn.get(Vn))]:[],rt(Sn(qn,([Oo])=>Oo!==Vn),([,Oo])=>Oo)]);function Ko(Oo){for(const[ai,si]of Oo)if(!Pc(Vn,Wr,ai).is(si))return!0;return!1}for(const Oo of Yr){if(Oo.stateVersions.get(Wr.version)||!Ko(Oo.depValuesDiscoveredSoFarDuringAsyncWork))return Oo.stateVersions.set(Wr.version,!0),Oo;Oo.stateVersions.set(Wr.version,!1)}}function Ii(Vn){return qn.get(Vn)}function Ta(Vn,Wr,Yr,Ko,Oo){qn.set(Vn,{depValuesDiscoveredSoFarDuringAsyncWork:Ko,executionID:Wr,loadingLoadable:Yr,stateVersions:new Map([[Oo.version,!0]])})}function gl(Vn,Wr,Yr){if(Fa(Vn,Wr)){const Ko=Ii(Vn);Ko!=null&&(Ko.depValuesDiscoveredSoFarDuringAsyncWork=Yr)}}function ba(Vn){qn.delete(Vn)}function Fa(Vn,Wr){var Yr;return Wr===((Yr=Ii(Vn))===null||Yr===void 0?void 0:Yr.executionID)}function Fl(Vn){return Array.from(Vn.entries()).map(([Wr,Yr])=>[Wr,Yr.contents])}function Wl(Vn,Wr,Yr){Vn.atomValues.set(Ge,Wr);try{Fn.set(Fl(Yr),Wr)}catch(Ko){throw c(`Problem with setting cache for selector "${Ge}": ${Ko.message}`)}}function xs(Vn){if(gc.includes(Ge)){const Wr=`Recoil selector has circular dependencies: ${gc.slice(gc.indexOf(Ge)).join(" \u2192 ")}`;return Ec(c(Wr))}gc.push(Ge);try{return Vn()}finally{gc.pop()}}function kl(Vn,Wr){const Yr=Wr.atomValues.get(Ge);return Yr!=null?Yr:Fn.get(Ko=>{var Oo;return typeof Ko!="string"&&gr(!1),(Oo=hu(Vn,Wr,Ko))===null||Oo===void 0?void 0:Oo.contents})}function Kl(Vn,Wr){return xs(()=>wa(Vn,Wr))}function vi(Vn){Vn.atomValues.delete(Ge)}function ji(Vn,Wr){we==null&&gr(!1);for(const Ko of hn){var Yr;const Oo=bu(Ko);(Yr=Oo.clearCache)===null||Yr===void 0||Yr.call(Oo,Vn,Wr)}hn.clear(),vi(Wr),Fn.clear(),kc(Vn,we)}return nn!=null?we=Wc({key:Ge,nodeType:"selector",peek:kl,get:Kl,set:(Wr,Yr,Ko)=>{let Oo=!1;const ai=new Map;function si({key:xi}){if(Oo)throw c("Recoil: Async selector sets are not currently supported.");const Yi=Pc(Wr,Yr,xi);if(Yi.state==="hasValue")return Yi.contents;if(Yi.state==="loading"){const Ya=`Getting value of asynchronous atom or selector "${xi}" in a pending state while setting selector "${Ge}" is not yet supported.`;throw G(Ya),c(Ya)}else throw Yi.contents}function Eo(xi,Yi){if(Oo){const Da="Recoil: Async selector sets are not currently supported.";throw G(Da),c(Da)}const Ya=typeof Yi=="function"?Yi(si(xi)):Yi;pu(Wr,Yr,xi.key,Ya).forEach((Da,Ja)=>ai.set(Ja,Da))}function aa(xi){Eo(xi,gu)}const oa=nn({set:Eo,get:si,reset:aa},Ko);if(oa!==void 0)throw p(oa)?c("Recoil: Async selector sets are not currently supported."):c("Recoil: selector set should be a void function.");return Oo=!0,ai},init:wo,invalidate:vi,clearCache:ji,shouldDeleteConfigOnRelease:Fo,dangerouslyAllowMutability:Se.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:kn}):we=Wc({key:Ge,nodeType:"selector",peek:kl,get:Kl,init:wo,invalidate:vi,clearCache:ji,shouldDeleteConfigOnRelease:Fo,dangerouslyAllowMutability:Se.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:kn})}$c.value=Se=>new Fc(Se);var xl=$c;const{isLoadable:Su,loadableWithError:Ic,loadableWithPromise:_c,loadableWithValue:Bl}=C,{WrappedValue:Vc}=Rs,{peekNodeInfo:ju}=Pr,{DEFAULT_VALUE:ml,DefaultValue:Zs,getConfigDeletionHandler:Hc,registerNode:Tu,setConfigDeletionHandler:Du}=tn,{isRecoilValue:Mu}=tt,{getRecoilValueAsLoadable:Au,markRecoilValueModified:wu,setRecoilValue:zc,setRecoilValueLoadable:Iu}=an,{retainedByOptionWithDefault:_u}=yi,vc=Se=>Se instanceof Vc?Se.value:Se;function Ru(Se){const{key:we,persistence_UNSTABLE:Ge}=Se,ut=_u(Se.retainedBy_UNSTABLE);let Et=0;function nn(jo){return _c(jo.then(fi=>(hn=Bl(fi),fi)).catch(fi=>{throw hn=Ic(fi),fi}))}let hn=p(Se.default)?nn(Se.default):Su(Se.default)?Se.default.state==="loading"?nn(Se.default.contents):Se.default:Bl(vc(Se.default));qn(hn.contents);let Fn;const kn=new Map;function qn(jo){return jo}function Mr(jo,fi){const ea=fi.then(Li=>{var Gi,ta;return((ta=((Gi=jo.getState().nextTree)!==null&&Gi!==void 0?Gi:jo.getState().currentTree).atomValues.get(we))===null||ta===void 0?void 0:ta.contents)===ea&&zc(jo,da,Li),Li}).catch(Li=>{var Gi,ta;throw((ta=((Gi=jo.getState().nextTree)!==null&&Gi!==void 0?Gi:jo.getState().currentTree).atomValues.get(we))===null||ta===void 0?void 0:ta.contents)===ea&&Iu(jo,da,Ic(Li)),Li});return ea}function Vr(jo,fi,ea){var Li;Et++;const Gi=()=>{var Ii;Et--,(Ii=kn.get(jo))===null||Ii===void 0||Ii.forEach(Ta=>Ta()),kn.delete(jo)};if(jo.getState().knownAtoms.add(we),hn.state==="loading"){const Ii=()=>{var Ta;((Ta=jo.getState().nextTree)!==null&&Ta!==void 0?Ta:jo.getState().currentTree).atomValues.has(we)||wu(jo,da)};hn.contents.finally(Ii)}const ta=(Li=Se.effects)!==null&&Li!==void 0?Li:Se.effects_UNSTABLE;if(ta!=null){let Fa=function(vi){if(Ta&&vi.key===we){const ji=Ii;return ji instanceof Zs?wo(jo,fi):p(ji)?_c(ji.then(Vn=>Vn instanceof Zs?hn.toPromise():Vn)):Bl(ji)}return Au(jo,vi)},Fl=function(vi){return Fa(vi).toPromise()},Wl=function(vi){var ji;const Vn=ju(jo,(ji=jo.getState().nextTree)!==null&&ji!==void 0?ji:jo.getState().currentTree,vi.key);return Ta&&vi.key===we&&!(Ii instanceof Zs)?Yo(vr({},Vn),{isSet:!0,loadable:Fa(vi)}):Vn},Ii=ml,Ta=!0,gl=!1,ba=null;const xs=vi=>ji=>{if(Ta){const Vn=Fa(da),Wr=Vn.state==="hasValue"?Vn.contents:ml;Ii=typeof ji=="function"?ji(Wr):ji,p(Ii)&&(Ii=Ii.then(Yr=>(ba={effect:vi,value:Yr},Yr)))}else{if(p(ji))throw c("Setting atoms to async values is not implemented.");typeof ji!="function"&&(ba={effect:vi,value:vc(ji)}),zc(jo,da,typeof ji=="function"?Vn=>{const Wr=vc(ji(Vn));return ba={effect:vi,value:Wr},Wr}:vc(ji))}},kl=vi=>()=>xs(vi)(ml),Kl=vi=>ji=>{var Vn;const{release:Wr}=jo.subscribeToTransactions(Yr=>{var Ko;let{currentTree:Oo,previousTree:ai}=Yr.getState();ai||(G("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),ai=Oo);const si=(Ko=Oo.atomValues.get(we))!==null&&Ko!==void 0?Ko:hn;if(si.state==="hasValue"){var Eo,aa,oa,xi;const Yi=si.contents,Ya=(Eo=ai.atomValues.get(we))!==null&&Eo!==void 0?Eo:hn,$l=Ya.state==="hasValue"?Ya.contents:ml;((aa=ba)===null||aa===void 0?void 0:aa.effect)!==vi||((oa=ba)===null||oa===void 0?void 0:oa.value)!==Yi?ji(Yi,$l,!Oo.atomValues.has(we)):((xi=ba)===null||xi===void 0?void 0:xi.effect)===vi&&(ba=null)}},we);kn.set(jo,[...(Vn=kn.get(jo))!==null&&Vn!==void 0?Vn:[],Wr])};for(const vi of ta)try{const ji=vi({node:da,storeID:jo.storeID,parentStoreID_UNSTABLE:jo.parentStoreID,trigger:ea,setSelf:xs(vi),resetSelf:kl(vi),onSet:Kl(vi),getPromise:Fl,getLoadable:Fa,getInfo_UNSTABLE:Wl});if(ji!=null){var wa;kn.set(jo,[...(wa=kn.get(jo))!==null&&wa!==void 0?wa:[],ji])}}catch(ji){Ii=ji,gl=!0}if(Ta=!1,!(Ii instanceof Zs)){var Ls;const vi=gl?Ic(Ii):p(Ii)?_c(Mr(jo,Ii)):Bl(vc(Ii));qn(vi.contents),fi.atomValues.set(we,vi),(Ls=jo.getState().nextTree)===null||Ls===void 0||Ls.atomValues.set(we,vi)}}return Gi}function wo(jo,fi){var ea,Li;return(ea=(Li=fi.atomValues.get(we))!==null&&Li!==void 0?Li:Fn)!==null&&ea!==void 0?ea:hn}function Fo(jo,fi){if(fi.atomValues.has(we))return m(fi.atomValues.get(we));if(fi.nonvalidatedAtoms.has(we)){if(Fn!=null)return Fn;if(Ge==null)return je(`Tried to restore a persisted value for atom ${we} but it has no persistence settings.`),hn;const ea=fi.nonvalidatedAtoms.get(we),Li=Ge.validator(ea,ml);return Fn=Li instanceof Zs?hn:Bl(Li),Fn}else return hn}function to(){Fn=void 0}function Do(jo,fi,ea){if(fi.atomValues.has(we)){const Li=m(fi.atomValues.get(we));if(Li.state==="hasValue"&&ea===Li.contents)return new Map}else if(!fi.nonvalidatedAtoms.has(we)&&ea instanceof Zs)return new Map;return qn(ea),Fn=void 0,new Map().set(we,Bl(ea))}function qi(){return Hc(we)!==void 0&&Et<=0}const da=Tu({key:we,nodeType:"atom",peek:wo,get:Fo,set:Do,init:Vr,invalidate:to,shouldDeleteConfigOnRelease:qi,dangerouslyAllowMutability:Se.dangerouslyAllowMutability,persistence_UNSTABLE:Se.persistence_UNSTABLE?{type:Se.persistence_UNSTABLE.type,backButton:Se.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:ut});return da}function Rc(Se){const we=ha(Se,[]),Ge="default"in Se?Se.default:new Promise(()=>{});return Mu(Ge)?Nu(Yo(vr({},we),{default:Ge})):Ru(Yo(vr({},we),{default:Ge}))}function Nu(Se){const we=Rc(Yo(vr({},Se),{default:ml,persistence_UNSTABLE:Se.persistence_UNSTABLE===void 0?void 0:Yo(vr({},Se.persistence_UNSTABLE),{validator:ut=>ut instanceof Zs?ut:m(Se.persistence_UNSTABLE).validator(ut,ml)}),effects:Se.effects,effects_UNSTABLE:Se.effects_UNSTABLE})),Ge=xl({key:`${Se.key}__withFallback`,get:({get:ut})=>{const Et=ut(we);return Et instanceof Zs?Se.default:Et},set:({set:ut},Et)=>ut(we,Et),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:Se.dangerouslyAllowMutability});return Du(Ge.key,Hc(Se.key)),Ge}Rc.value=Se=>new Vc(Se);var Gc=Rc;class Lu{constructor(we){var Ge;g(this,"_map",void 0),g(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(Ge=we==null?void 0:we.mapKey)!==null&&Ge!==void 0?Ge:ut=>ut}size(){return this._map.size}has(we){return this._map.has(this._keyMapper(we))}get(we){return this._map.get(this._keyMapper(we))}set(we,Ge){this._map.set(this._keyMapper(we),Ge)}delete(we){this._map.delete(this._keyMapper(we))}clear(){this._map.clear()}}var xu={MapCache:Lu},Bu=xu.MapCache,Uu=Object.freeze({__proto__:null,MapCache:Bu});const{LRUCache:Yc}=te,{MapCache:Fu}=Uu,Sc={equality:"reference",eviction:"none",maxSize:1/0};function Wu({equality:Se=Sc.equality,eviction:we=Sc.eviction,maxSize:Ge=Sc.maxSize}=Sc){const ut=ku(Se);return Ku(we,Ge,ut)}function ku(Se){switch(Se){case"reference":return we=>we;case"value":return we=>jn(we)}throw c(`Unrecognized equality policy ${Se}`)}function Ku(Se,we,Ge){switch(Se){case"keep-all":return new Fu({mapKey:Ge});case"lru":return new Yc({mapKey:Ge,maxSize:m(we)});case"most-recent":return new Yc({mapKey:Ge,maxSize:1})}throw c(`Unrecognized eviction policy ${Se}`)}var Jc=Wu;const{setConfigDeletionHandler:$u}=tn;function Vu(Se){var we,Ge;const ut=Jc({equality:(we=(Ge=Se.cachePolicyForParams_UNSTABLE)===null||Ge===void 0?void 0:Ge.equality)!==null&&we!==void 0?we:"value",eviction:"keep-all"});return Et=>{var nn,hn;const Fn=ut.get(Et);if(Fn!=null)return Fn;const wo=Se,{cachePolicyForParams_UNSTABLE:kn}=wo,qn=ha(wo,["cachePolicyForParams_UNSTABLE"]),Mr="default"in Se?Se.default:new Promise(()=>{}),Vr=Gc(Yo(vr({},qn),{key:`${Se.key}__${(nn=jn(Et))!==null&&nn!==void 0?nn:"void"}`,default:typeof Mr=="function"?Mr(Et):Mr,retainedBy_UNSTABLE:typeof Se.retainedBy_UNSTABLE=="function"?Se.retainedBy_UNSTABLE(Et):Se.retainedBy_UNSTABLE,effects:typeof Se.effects=="function"?Se.effects(Et):typeof Se.effects_UNSTABLE=="function"?Se.effects_UNSTABLE(Et):(hn=Se.effects)!==null&&hn!==void 0?hn:Se.effects_UNSTABLE}));return ut.set(Et,Vr),$u(Vr.key,()=>{ut.delete(Et)}),Vr}}var Hu=Vu;const{setConfigDeletionHandler:zu}=tn;let Gu=0;function Yu(Se){var we,Ge;const ut=Jc({equality:(we=(Ge=Se.cachePolicyForParams_UNSTABLE)===null||Ge===void 0?void 0:Ge.equality)!==null&&we!==void 0?we:"value",eviction:"keep-all"});return Et=>{var nn;let hn;try{hn=ut.get(Et)}catch(wo){throw c(`Problem with cache lookup for selector ${Se.key}: ${wo.message}`)}if(hn!=null)return hn;const Fn=`${Se.key}__selectorFamily/${(nn=jn(Et,{allowFunctions:!0}))!==null&&nn!==void 0?nn:"void"}/${Gu++}`,kn=wo=>Se.get(Et)(wo),qn=Se.cachePolicy_UNSTABLE,Mr=typeof Se.retainedBy_UNSTABLE=="function"?Se.retainedBy_UNSTABLE(Et):Se.retainedBy_UNSTABLE;let Vr;if(Se.set!=null){const wo=Se.set;Vr=xl({key:Fn,get:kn,set:(to,Do)=>wo(Et)(to,Do),cachePolicy_UNSTABLE:qn,dangerouslyAllowMutability:Se.dangerouslyAllowMutability,retainedBy_UNSTABLE:Mr})}else Vr=xl({key:Fn,get:kn,cachePolicy_UNSTABLE:qn,dangerouslyAllowMutability:Se.dangerouslyAllowMutability,retainedBy_UNSTABLE:Mr});return ut.set(Et,Vr),zu(Vr.key,()=>{ut.delete(Et)}),Vr}}var qs=Yu;const Ju=qs({key:"__constant",get:Se=>()=>Se,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Qu(Se){return Ju(Se)}var Xu=Qu;const Zu=qs({key:"__error",get:Se=>()=>{throw c(Se)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function qu(Se){return Zu(Se)}var ed=qu;function td(Se){return Se}var nd=td;const{loadableWithError:Qc,loadableWithPromise:Xc,loadableWithValue:Zc}=C;function jc(Se,we){const Ge=Array(we.length).fill(void 0),ut=Array(we.length).fill(void 0);for(const[Et,nn]of we.entries())try{Ge[Et]=Se(nn)}catch(hn){ut[Et]=hn}return[Ge,ut]}function rd(Se){return Se!=null&&!p(Se)}function Tc(Se){return Array.isArray(Se)?Se:Object.getOwnPropertyNames(Se).map(we=>Se[we])}function Nc(Se,we){return Array.isArray(Se)?we:Object.getOwnPropertyNames(Se).reduce((Ge,ut,Et)=>Yo(vr({},Ge),{[ut]:we[Et]}),{})}function Ul(Se,we,Ge){const ut=Ge.map((Et,nn)=>Et==null?Zc(we[nn]):p(Et)?Xc(Et):Qc(Et));return Nc(Se,ut)}function od(Se,we){return we.map((Ge,ut)=>Ge===void 0?Se[ut]:Ge)}const id=qs({key:"__waitForNone",get:Se=>({get:we})=>{const Ge=Tc(Se),[ut,Et]=jc(we,Ge);return Ul(Se,ut,Et)},dangerouslyAllowMutability:!0}),ad=qs({key:"__waitForAny",get:Se=>({get:we})=>{const Ge=Tc(Se),[ut,Et]=jc(we,Ge);return Et.some(nn=>!p(nn))?Ul(Se,ut,Et):new Promise(nn=>{for(const[hn,Fn]of Et.entries())p(Fn)&&Fn.then(kn=>{ut[hn]=kn,Et[hn]=void 0,nn(Ul(Se,ut,Et))}).catch(kn=>{Et[hn]=kn,nn(Ul(Se,ut,Et))})})},dangerouslyAllowMutability:!0}),sd=qs({key:"__waitForAll",get:Se=>({get:we})=>{const Ge=Tc(Se),[ut,Et]=jc(we,Ge);if(Et.every(hn=>hn==null))return Nc(Se,ut);const nn=Et.find(rd);if(nn!=null)throw nn;return Promise.all(Et).then(hn=>Nc(Se,od(ut,hn)))},dangerouslyAllowMutability:!0}),ld=qs({key:"__waitForAllSettled",get:Se=>({get:we})=>{const Ge=Tc(Se),[ut,Et]=jc(we,Ge);return Et.every(nn=>!p(nn))?Ul(Se,ut,Et):Promise.all(Et.map((nn,hn)=>p(nn)?nn.then(Fn=>{ut[hn]=Fn,Et[hn]=void 0}).catch(Fn=>{ut[hn]=void 0,Et[hn]=Fn}):null)).then(()=>Ul(Se,ut,Et))},dangerouslyAllowMutability:!0}),cd=qs({key:"__noWait",get:Se=>({get:we})=>{try{return xl.value(Zc(we(Se)))}catch(Ge){return xl.value(p(Ge)?Xc(Ge):Qc(Ge))}},dangerouslyAllowMutability:!0});var ud={waitForNone:id,waitForAny:ad,waitForAll:sd,waitForAllSettled:ld,noWait:cd};const{RecoilLoadable:dd}=C,{DefaultValue:fd}=tn,{RecoilRoot:hd,useRecoilStoreID:pd}=xa,{isRecoilValue:md}=tt,{retentionZone:gd}=Cn,{freshSnapshot:vd}=_i,{useRecoilState:bd,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Od,useRecoilStateLoadable:yd,useRecoilValue:Ed,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Pd,useRecoilValueLoadable:Cd,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Sd,useResetRecoilState:jd,useSetRecoilState:Td}=oc,{useGotoRecoilSnapshot:Dd,useRecoilSnapshot:Md,useRecoilTransactionObserver:Ad}=He,{useRecoilCallback:wd}=zi,{noWait:Id,waitForAll:_d,waitForAllSettled:Rd,waitForAny:Nd,waitForNone:Ld}=ud;var Zo={DefaultValue:fd,isRecoilValue:md,RecoilLoadable:dd,RecoilEnv:ce,RecoilRoot:hd,useRecoilStoreID:pd,useRecoilBridgeAcrossReactRoots_UNSTABLE:gn,atom:Gc,selector:xl,atomFamily:Hu,selectorFamily:qs,constSelector:Xu,errorSelector:ed,readOnlySelector:nd,noWait:Id,waitForNone:Ld,waitForAny:Nd,waitForAll:_d,waitForAllSettled:Rd,useRecoilValue:Ed,useRecoilValueLoadable:Cd,useRecoilState:bd,useRecoilStateLoadable:yd,useSetRecoilState:Td,useResetRecoilState:jd,useGetRecoilValueInfo_UNSTABLE:dt,useRecoilRefresher_UNSTABLE:bs,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Sd,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Pd,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Od,useRecoilCallback:wd,useRecoilTransaction_UNSTABLE:Ga,useGotoRecoilSnapshot:Dd,useRecoilSnapshot:Md,useRecoilTransactionObserver_UNSTABLE:Ad,snapshot_UNSTABLE:vd,useRetain:Us,retentionZone:gd},sf=Zo.DefaultValue,lf=Zo.isRecoilValue,cf=Zo.RecoilLoadable,uf=Zo.RecoilEnv,xd=Zo.RecoilRoot,df=Zo.useRecoilStoreID,ff=Zo.useRecoilBridgeAcrossReactRoots_UNSTABLE,Bd=Zo.atom,Ud=Zo.selector,Fd=Zo.atomFamily,Wd=Zo.selectorFamily,hf=Zo.constSelector,pf=Zo.errorSelector,mf=Zo.readOnlySelector,gf=Zo.noWait,vf=Zo.waitForNone,bf=Zo.waitForAny,Of=Zo.waitForAll,yf=Zo.waitForAllSettled,kd=Zo.useRecoilValue,Ef=Zo.useRecoilValueLoadable,Pf=Zo.useRecoilState,Cf=Zo.useRecoilStateLoadable,Kd=Zo.useSetRecoilState,Sf=Zo.useResetRecoilState,jf=Zo.useGetRecoilValueInfo_UNSTABLE,Tf=Zo.useRecoilRefresher_UNSTABLE,Df=Zo.useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE,Mf=Zo.useRecoilValue_TRANSITION_SUPPORT_UNSTABLE,Af=Zo.useRecoilState_TRANSITION_SUPPORT_UNSTABLE,$d=Zo.useRecoilCallback,wf=Zo.useRecoilTransaction_UNSTABLE,If=Zo.useGotoRecoilSnapshot,_f=Zo.useRecoilSnapshot,Rf=Zo.useRecoilTransactionObserver_UNSTABLE,Nf=Zo.snapshot_UNSTABLE,Lf=Zo.useRetain,xf=Zo.retentionZone,Bf=Zo}).call(this,t(169))},function($,n,t){var e=t(131),s=t(117),o="[object Symbol]";function a(c){return typeof c=="symbol"||s(c)&&e(c)==o}$.exports=a},function($,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){typeof window=="object"&&(t=window)}$.exports=t},function($,n,t){"use strict";t.d(n,"b",function(){return U}),t.d(n,"c",function(){return Z}),t.d(n,"a",function(){return z});var e=t(0),s=t(3),o=t.n(s),a=t(9),c=t.n(a),l=t(7),p=t(51),h=t.n(p),m=t(8),g=t.n(m),v=t(4),O=t(10),u=t(17),r=t(392),i=t(296),d=t(355),b=t(428),w=t(429),E=t(44),S=t(72),P=t(110),D=t(90),W=Object.defineProperty,B=Object.defineProperties,f=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,A=(G,V,k)=>V in G?W(G,V,{enumerable:!0,configurable:!0,writable:!0,value:k}):G[V]=k,L=(G,V)=>{for(var k in V||(V={}))M.call(V,k)&&A(G,k,V[k]);if(y)for(var k of y(V))N.call(V,k)&&A(G,k,V[k]);return G},C=(G,V)=>B(G,f(V)),R=(G,V,k)=>new Promise((K,Y)=>{var ee=me=>{try{he(k.next(me))}catch(Ye){Y(Ye)}},ae=me=>{try{he(k.throw(me))}catch(Ye){Y(Ye)}},he=me=>me.done?K(me.value):Promise.resolve(me.value).then(ee,ae);he((k=k.apply(G,V)).next())});const U=({pub:G,post:V,profile:k})=>{let K=typeof document!="undefined"?document.title:"",Y="",ee="";const ae=Object(s.getBaseUrl)(G).replace(/^https?:\/\//,"").replace(/\/$/);return V?(K=V.title||V.draft_title,Y=ae,ee=V.cover_image||null):G?(K=G.name,Y=ae,ee=G.logo_url):k&&(K=k.name,Y=k.bio,ee=Object(s.getUserPhotoUrl)(k)),Object(e.h)(v.c,{className:`social-preview-box ${V?"post":G?"pub":"user"}`,radius:8,border:"detail",padding:8},Object(e.h)("div",{class:"social-image-box"},(V||G)&&ee&&Object(e.h)(S.a,{className:"social-image",src:ee,alt:"",maxWidth:120,loading:"lazy"}),!V&&!G&&ee&&Object(e.h)(D.b,{className:"social-image",imageUrl:ee,size:52}),!ee&&Object(e.h)(r.default,{className:"social-image-default"})),Object(e.h)(v.b,{paddingLeft:12,paddingY:8},Object(e.h)(O.b.H4,null,K),Object(e.h)(O.b.B4,{color:"secondary"},Y)))};class Z extends E.a{constructor(V,k){super(V,k);this.noFullscreen=!0}open(){var V=k=>super[k];return R(this,null,function*(){const k="direct",K={title:this.shareName(),url:this.getShareUrl(k)};if(Object(m.isMobileBrowser)()&&navigator.share&&navigator.canShare&&navigator.canShare(K))try{yield navigator.share(K),Object(l.i)(l.a.NATIVE_SHARE_SUCCESS,{medium:this.state.medium||this.props.medium||"web",post_id:this.props.post?this.props.post.id:null,utm_campaign:this.state.utm_campaign||"default"}),Object(p.setStoredValue)(`${this.props.pub.subdomain} shared`,!0);return}catch(Y){if(Y.name==="AbortError")return;Object(l.i)(l.a.NATIVE_SHARE_FAILED,{errorName:Y.name,errorMessage:Y.message})}V("open").call(this)})}fromEmail(){this.setState({medium:"email"},()=>{this.open()})}getClassName(){return"share-dialog"}onBeforeOpen(){this.setState({showButtons:!0})}onOpen(){Object(l.i)(l.a.SHARE_DIALOG_OPENED,{medium:this.state.medium||this.props.medium||"web",post_id:this.props.post?this.props.post.id:null,utm_campaign:this.state.utm_campaign||"default"})}onClose(){this.setState({copied:!1,utm_campaign:null})}shareName(){const{post:V,pub:k,profile:K}=this.props;return V?V.title:k?k.name:K?`${K.name} on Substack`:document.title}getShareUrl(V){const{pub:k,post:K,profile:Y,user:ee,utm_campaign:ae}=this.props,he={r:(ee==null?void 0:ee.id)?ee.id.toString(36):null,utm_campaign:ae||(K?"post":Y?"profile":k?"pub":"unknown"),utm_medium:this.state.medium||"web",utm_source:V};return(k==null?void 0:k.subdomain)&&(K==null?void 0:K.slug)?Object(s.getPostAppLinkUrl)(k.subdomain,K.slug,{params:he}):Object(s.pathWithQuery)(`${K?Object(s.getPostUrl)(k,K):k?`${k.base_url}/`:typeof window!="undefined"?window.location.href.split("?")[0]:""}`,he)}renderChildren({post:V,pub:k,profile:K}){const Y=V?"post":k?"publication":K?"profile":null,ee=Y?`Share this ${Y}`:"Share";return Object(e.h)(e.Fragment,null,Object(e.h)("div",{class:"share-dialog-title"},ee),Object(e.h)(v.b,{gap:32,paddingX:24,paddingTop:32,paddingBottom:48},(V||k||K)&&Object(e.h)(U,{post:V,pub:k,profile:K}),Object(e.h)(z,C(L({utm_campaign:this.state.utm_campaign},this.props),{shareName:this.shareName(),shareUrl:this.getShareUrl()}))))}}class F extends e.Component{onShareViaTwitter(){const{pub:V,post:k,sharingSelfPub:K}=this.props,Y=(V==null?void 0:V.twitter_screen_name)||a.twitterScreenNames[V==null?void 0:V.subdomain];let ee=this.props.shareName;V&&K?ee="I just started a Substack! You can subscribe to it here":(V&&!k&&(ee=`Subscribe to ${ee}`),Y&&(!k||V&&(!k.publishedBylines.length||k.publishedBylines.some(ae=>ae.id===V.author_id)))&&(ee+=`, by @${Y}`)),this.triggerShare("twitter",ae=>Object(s.pathWithQuery)("https://twitter.com/share",{url:ae,text:ee}))}onShareViaCopyLink(){this.triggerShare("copy",V=>(Object(m.copyToClipboard)(V),!1)),Object(P.b)("Link copied to clipboard")}onShareViaEmail(){this.triggerShare("email",V=>Object(s.pathWithQuery)("mailto:",{subject:this.props.shareName,body:V}))}onShareViaFacebook(){this.triggerShare("facebook",V=>Object(s.pathWithQuery)("https://www.facebook.com/sharer/sharer.php",{u:V}))}triggerShare(V,k){const{post:K,pub:Y}=this.props;Object(l.i)(l.a.SHARE_LINK_CLICKED,{name:V,post_id:K?K.id:null});const ee=k(this.props.shareUrl);ee&&(ee.startsWith("http")?window.open(ee,"_blank"):document.location.href=ee),Object(p.setStoredValue)(`${Y.subdomain} shared`,!0)}}class z extends F{maybeOnChange(){const{onChange:V}=this.props;V&&V()}render({}){return Object(e.h)(v.c,{className:"share-dialog-buttons-wrapper",justifyContent:"space-between"},Object(e.h)(u.b,{onClick:()=>{this.onShareViaCopyLink(),this.maybeOnChange()},className:"share-action"},Object(e.h)("div",{className:"action-icon"},Object(e.h)(i.default,null)),Object(e.h)(O.b.B4,{color:"secondary"},"Copy link")),Object(e.h)(u.b,{className:"share-action",onClick:()=>{this.onShareViaTwitter(),this.maybeOnChange()}},Object(e.h)("div",{className:"action-icon"},Object(e.h)(w.default,null)),Object(e.h)(O.b.B4,{color:"secondary"},"Twitter")),Object(e.h)(u.b,{className:"share-action",onClick:()=>{this.onShareViaFacebook(),this.maybeOnChange()}},Object(e.h)("div",{className:"action-icon"},Object(e.h)(b.default,null)),Object(e.h)(O.b.B4,{color:"secondary"},"Facebook")),Object(e.h)(u.b,{className:"share-action",onClick:()=>{this.onShareViaEmail(),this.maybeOnChange()}},Object(e.h)("div",{className:"action-icon"},Object(e.h)(d.default,null)),Object(e.h)(O.b.B4,{color:"secondary"},"Email")))}}},function($,n,t){"use strict";t.d(n,"a",function(){return E}),t.d(n,"b",function(){return P}),t.d(n,"c",function(){return f});var e=t(0),s=t(1),o=t(11),a=t.n(o),c=t(406),l=t(21),p=t(8),h=t.n(p),m=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(M,N,A)=>N in M?m(M,N,{enumerable:!0,configurable:!0,writable:!0,value:A}):M[N]=A,d=(M,N)=>{for(var A in N||(N={}))u.call(N,A)&&i(M,A,N[A]);if(O)for(var A of O(N))r.call(N,A)&&i(M,A,N[A]);return M},b=(M,N)=>g(M,v(N)),w=(M,N,A)=>new Promise((L,C)=>{var R=F=>{try{Z(A.next(F))}catch(z){C(z)}},U=F=>{try{Z(A.throw(F))}catch(z){C(z)}},Z=F=>F.done?L(F.value):Promise.resolve(F.value).then(R,U);Z((A=A.apply(M,N)).next())});function E({defaultState:M,shouldLoad:N=!0,shouldPoll:A=!1,children:L}){return Object(e.h)(D,{defaultState:M==null?void 0:M.activity,shouldLoad:N,shouldPoll:A},Object(e.h)(y,{shouldLoad:N},L))}const S=Object(e.createContext)({lastViewedAt:null,activityUnreadCount:0,activityUnreadAtMax:!1,refetch:()=>w(void 0,null,function*(){return!0}),markAllAsRead:()=>w(void 0,null,function*(){}),hasLoadedOnce:!1});S.displayName="NotificationsContext";function P(){return Object(s.b)(S)}function D({defaultState:M,shouldLoad:N=!0,shouldPoll:A=!1,children:L}){const C=Object(l.f)({pathname:"/api/v1/activity/unread",deps:[],auto:N,initialResult:M}),R=()=>w(this,null,function*(){const U=yield a.a.post("/api/v1/activity/unread").send({after:new Date().toISOString()});C.setResult(U.body)});return Object(c.a)(()=>w(this,null,function*(){var U;if(A&&N&&Object(p.isWindowVisible)()){const Z=((U=C.result)==null?void 0:U.count)||0,F=yield C.refetch(),z=!(F instanceof Error)&&F.count||0;if(Z!==z)return!0}}),15e3,6e4),Object(e.h)(S.Provider,{value:{lastViewedAt:C.result!=null?C.result.lastViewedAt:null,activityUnreadCount:C.result!=null?C.result.count:0,activityUnreadAtMax:C.result!=null?C.result.max:!1,refetch:C.refetch,markAllAsRead:R,hasLoadedOnce:C.hasLoadedOnce}},L)}const W={count:0,max:!1,refetch:()=>w(void 0,null,function*(){return!0}),markAllAsRead:()=>w(void 0,null,function*(){}),hasLoadedOnce:!1},B=Object(e.createContext)(W);B.displayName="SavedPostsContext";function f(){return Object(s.b)(B)}function y({shouldLoad:M=!0,children:N}){const A=Object(l.f)({pathname:"/api/v1/posts/saved/unread-count",deps:[],auto:M,initialResult:W}),L=()=>A.refetch({method:"PUT"});return Object(e.h)(B.Provider,{value:b(d({},A.result),{refetch:A.refetch,markAllAsRead:L,hasLoadedOnce:A.hasLoadedOnce})},N)}},function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(2),s=t(55);function o(){let a=Object(e.useRef)(!1);return Object(s.a)(()=>(a.current=!0,()=>{a.current=!1}),[]),a}},function($,n,t){"use strict";t.d(n,"a",function(){return ee});var e=t(0),s=t(6),o=t.n(s),a=t(3),c=t(9),l=t(68),p=t(111),h=t(7),m=t(83),g=t(8),v=t(1),O=t(214),u=t(50),r=t(4),i=t(10),d={animationWrapper:"frontend-login-typo_handler-EmailTypoHandler-module__animationWrapper--1W2AP",wrapper:"frontend-login-typo_handler-EmailTypoHandler-module__wrapper--3KwYe",secondaryText:"frontend-login-typo_handler-EmailTypoHandler-module__secondaryText--1ffYG",primaryText:"frontend-login-typo_handler-EmailTypoHandler-module__primaryText--1iiny",typoHandler:"frontend-login-typo_handler-EmailTypoHandler-module__typoHandler--1EvKC",buttonFill:"frontend-login-typo_handler-EmailTypoHandler-module__buttonFill--1MXI5",buttonWrapper:"frontend-login-typo_handler-EmailTypoHandler-module__buttonWrapper--1KhOY"};const b=({emailSuggestions:ae,currentEmail:he,onAccept:me,onReject:Ye})=>{const se=Object(g.isMobileBrowser)(),[ie,Ee]=Object(v.k)(!1),[Oe,ce]=Object(v.k)(null),ue=Object(v.j)(null),pe=X=>{Ee(!1),Object(h.i)(h.a.EMAIL_TYPO_SUGGESTION_REJECTED,{email_provided:he,email_suggested:X}),Ye&&Ye()},$e=ae&&he&&ae[he]&&ae[he]!=he.trim(),ne=X=>{Ee(!1),Object(h.i)(h.a.EMAIL_TYPO_SUGGESTION_ACCEPTED,{email_provided:he,email_suggested:X}),me(X)};return Object(v.d)(()=>{if($e){const X=ae[he];Object(h.i)(h.a.EMAIL_TYPO_SUGGESTION_SHOWN,{email_provided:he,email_suggested:X}),ce(X),Ee(!0)}else Ee(!1)},[$e,ae,he]),Object(e.h)("div",{className:d.animationWrapper},Object(e.h)(O.a,{show:ie,enter:"tw-transition-all tw-duration-300 transform-gpu",enterFrom:"tw-opacity-0 tw-translate-y-[-40%]",enterTo:"tw-opacity-100 tw-translate-y-0",leave:"tw-transition-all tw-duration-300 transform-gpu",leaveFrom:"tw-opacity-100 tw-translate-y-0",leaveTo:"tw-opacity-0 tw-translate-y-[-40%]",ref:ue},Object(e.h)(r.a,{className:d.wrapper,paddingTop:16,paddingX:{mobile:16},alignItems:"start"},Object(e.h)(r.b,{className:d.typoHandler,border:"detail",paddingY:24,paddingX:20,radius:4,alignItems:"start",gap:20},Object(e.h)(i.b,{size:16,font:"display",className:d.secondaryText},"Did you mean",Object(e.h)("br",null),Object(e.h)(i.b,{as:"span",weight:"semibold",className:d.primaryText},Oe),"?"),Object(e.h)(r.c,{justifyContent:"space-between",flex:"grow",gap:12,className:d.buttonWrapper},Object(e.h)(u.a,{onClick:()=>ne(Oe),className:d.buttonFill,variant:"themed-primary"},se?"Yes":"Yes, Subscribe with correction"),Object(e.h)(u.a,{className:d.buttonFill,variant:"secondary",onClick:()=>pe(Oe)},"No"))))))};var w=t(87),E=t.n(w),S=t(11),P=t.n(S),D=t(451),W=t.n(D),B=(ae,he,me)=>new Promise((Ye,se)=>{var ie=ce=>{try{Oe(me.next(ce))}catch(ue){se(ue)}},Ee=ce=>{try{Oe(me.throw(ce))}catch(ue){se(ue)}},Oe=ce=>ce.done?Ye(ce.value):Promise.resolve(ce.value).then(ie,Ee);Oe((me=me.apply(ae,he)).next())});const f=(ae,he)=>B(void 0,null,function*(){const me=yield P.a.get("/api/v1/check-email").query({email:ae});he([ae,me.body])}),y=E()((ae,he)=>B(void 0,null,function*(){yield f(ae,he)}),200),M=ae=>B(void 0,null,function*(){return W()(ae)?new Promise((he,me)=>{y(ae,he)}):[]});var N=t(17),A=t(46),L=t(81),C=Object.defineProperty,R=Object.defineProperties,U=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,G=(ae,he,me)=>he in ae?C(ae,he,{enumerable:!0,configurable:!0,writable:!0,value:me}):ae[he]=me,V=(ae,he)=>{for(var me in he||(he={}))F.call(he,me)&&G(ae,me,he[me]);if(Z)for(var me of Z(he))z.call(he,me)&&G(ae,me,he[me]);return ae},k=(ae,he)=>R(ae,U(he)),K=(ae,he,me)=>(G(ae,typeof he!="symbol"?he+"":he,me),me),Y=(ae,he,me)=>new Promise((Ye,se)=>{var ie=ce=>{try{Oe(me.next(ce))}catch(ue){se(ue)}},Ee=ce=>{try{Oe(me.throw(ce))}catch(ue){se(ue)}},Oe=ce=>ce.done?Ye(ce.value):Promise.resolve(ce.value).then(ie,Ee);Oe((me=me.apply(ae,he)).next())});class ee extends e.Component{constructor(he){super(he);K(this,"handleEmailChange",()=>{const me=this.emailInput.value;!me||(this.setState({currentEmail:me}),!(this.state.emailSuggestions&&this.state.emailSuggestions.hasOwnProperty(me))&&M(me).then(Ye=>{const[se,ie]=Ye;this.setState({emailSuggestions:k(V({},this.state.emailSuggestions),{[se]:ie})})}))}),K(this,"_onSuccess",me=>Y(this,null,function*(){me.body.prompt_to_login||h.h(),me.body.requires_confirmation&&(this.props.onConfirmationRequired?yield this.props.onConfirmationRequired(me):alert(`Confirmation required: we sent an email to ${me.body.email}. Click the link there to finish subscribing.`)),this.props.freeSignupEmail&&this.props.freeSignupEmail!==me.body.email&&Object(p.b)({freeSignupEmail:me.body.email}),this.props.onSuccess&&(yield this.props.onSuccess(me))})),K(this,"onSuccess",me=>Y(this,null,function*(){typeof window!="undefined"&&window.campaign&&Object(a.getQueryItem)("referralCode")?window.campaign.identify({email:me.body.email},()=>this._onSuccess(me)):yield this._onSuccess(me)})),K(this,"onAcceptSuggestion",me=>{this.emailInput.value=me,this.form.handleSubmit(null,!0)}),this.state={emailSuggestions:{}}}getSavedEmail(){return this.props.user&&this.props.user.email||null}getPrefilledEmail(){return this.props.email||this.props.freeSignupEmail||this.getSavedEmail()}componentDidMount(){return Y(this,null,function*(){this.getPrefilledEmail()&&(this.emailInput.value=this.getPrefilledEmail()),this.context.exposeExperiment("free_email_form_placholder_text_v2")})}onLoadingState(he){this.setState({loading:he,requires_confirmation:!1})}onError(he){he.status===425&&this.setState({requires_confirmation:!0}),this.props.onError&&this.props.onError(he)}render({pub:he,className:me,referralCode:Ye,submitButtonText:se,showArchives:ie,hideLogin:Ee,hideTerms:Oe,contentLinks:ce,source:ue,loginRedirect:pe,autoFocus:$e,disabled:ne,onPrepareData:X,children:q,onMaybeLater:Ne,useSubscribeLink:Qe,user:Ze},{loading:tt,requires_confirmation:Ft}){var Lt,rn,ht,je,Le,rt;const Pe=ue==="treatment_bold_fade",de=((ht=(rn=(Lt=Object(a.getQueryItem)("referring_pub_ids"))==null?void 0:Lt.split)==null?void 0:rn.call(Lt,","))==null?void 0:ht[0])||void 0,be=((rt=(Le=(je=Object(a.getQueryItem)("referring_pub_ids"))==null?void 0:je.split)==null?void 0:Le.call(je,","))==null?void 0:rt.slice(1))||void 0,Ie=this.getPrefilledEmail();let ke=I`Type your email…`;switch(this.context.getExperimentVariant("free_email_form_placholder_text_v2")){case"treatment_tell":ke="Tell us your email";break;case"treatment_add":ke="Add your email here";break;case"treatment_never":ke="Never miss a post";break;case"treatment_what":ke="What's your email?";break;case"treatment_subscribe":ke="Subscribe with email";break;case"treatment_goes":ke="Your email goes here";break;case"treatment_proceed":ke="Add your email to proceed";break;case"treatment_signup":ke="Sign up with email";break;case"treatment_join":ke="Join with your email";break}return Object(e.h)(e.Fragment,null,Object(e.h)(A.g,{ref:Te=>this.form=Te,className:me,noInlineErrors:!0,action:Object(a.pathWithQuery)("/api/v1/free"),noJsAction:Object(a.pathWithQuery)("/api/v1/free",{nojs:!0}),prepareData:Te=>{Ft&&(Te.resend_confirmation=!0),X&&X(Te)},onChangeLoadingState:this.onLoadingState.bind(this),onError:Te=>this.onError(Te),onSuccess:Te=>this.onSuccess(Te),typoFound:Te=>this.setState({emailSuggestion:Te}),disableSubmit:Qe},Object(e.h)("input",{type:"hidden",name:"first_url",value:m.d}),Object(e.h)("input",{type:"hidden",name:"first_referrer",value:m.c}),Object(e.h)("input",{type:"hidden",name:"current_url",value:m.b}),Object(e.h)("input",{type:"hidden",name:"current_referrer",value:m.a}),Object(e.h)("input",{type:"hidden",name:"referral_code",value:Ye}),Object(e.h)("input",{type:"hidden",name:"source",value:ue}),Object(e.h)("input",{type:"hidden",name:"referring_pub_id",value:de}),Object(e.h)("input",{type:"hidden",name:"additional_referring_pub_ids",value:be}),Object(e.h)("div",{className:"sideBySideWrap"},!!Ie&&Object(g.inputPrefillHack)(),Object(e.h)("input",{onChange:this.handleEmailChange,onInput:this.handleEmailChange,ref:Te=>this.emailInput=Te,type:"email",name:Pe?"email-pop":"email",readOnly:!!(this.getSavedEmail()||tt||ne),disabled:!!(tt||ne),autoFocus:$e&&!(this.getPrefilledEmail()||ne)&&!Object(g.isMobileBrowser)(),placeholder:ke}),Object(e.h)(N.b,{className:`rightButton ${Pe?"pop":""} primary subscribe-btn`,type:"submit",disabled:!!(tt||ne),onClick:Te=>{Qe&&(location.href=Object(a.getSubscribeUrl)(he,{addBase:!0,user:Ze,utm_source:"substack",utm_medium:"web",utm_campaign:"reader2"}))}},Object(e.h)("b",{className:`button-text ${Pe?"pop":""}`},se||Object(c.getSubscribeText)(he)))),Ft?Object(e.h)("div",null,Object(e.h)("div",{className:"error other-error"},"This email address is not confirmed yet.",Object(e.h)("br",null),Object(e.h)("a",{href:"javascript:void(0)",onClick:()=>this.form.handleSubmit()},"Click here")," ","to resend the confirmation email.")):Object(e.h)("div",{id:"error-container"}),ce&&Object(e.h)("div",{className:"welcome-links-mobile"},Object(e.h)("div",null,this.getSavedEmail()?Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getSignoutUrl)({for_pub:he.subdomain}),native:!0},I`Not you?`):Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getSigninUrl)({for_pub:he.subdomain,redirect:pe}),native:!0},I`Login`),Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getAboutUrl)(he),onClick:this.props.markWelcomePageAsHidden,native:!0},I`About`),Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getArchiveUrl)(he),onClick:this.props.markWelcomePageAsHidden,native:!0},I`Archive`)),Ne&&Object(e.h)("button",{className:"button close-welcome-modal-mobile",onClick:Te=>{Te.preventDefault(),Ne()},"aria-label":"Close"},Object(e.h)(L.default,null))),Object(e.h)("div",{className:o()("subtle-help-text below-input",{"welcome-modal":ce})},!Ee&&(this.getSavedEmail()?Object(e.h)("a",{className:"login-button",href:Object(a.getSignoutUrl)({for_pub:he.subdomain}),native:!0},I`Not you?`):Object(e.h)("a",{className:"login-button",href:Object(a.getSigninUrl)({for_pub:he.subdomain,redirect:pe}),native:!0},I`Login`)),ie&&Object(e.h)("a",{className:"legal",href:Object(a.getBaseArchiveUrl)(he),native:!0},"Archives"),!Oe&&[Object(e.h)("a",{className:"legal",href:Object(a.getPrivacyUrl)(he),target:"_blank",native:!0},I`Privacy`),Object(e.h)("a",{className:"legal",href:"/tos",target:"_blank",native:!0},I`Terms`),Object(e.h)("a",{className:"legal",href:`${Object(a.getSubstackUrl)()}/ccpa#personal-data-collected`,target:"_blank",native:!0},"Information collection notice")],ce&&[Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getArchiveUrl)(he,{params:{sort:"top"}}),onClick:this.props.markWelcomePageAsHidden},I`Top posts`),Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getAboutUrl)(he),onClick:this.props.markWelcomePageAsHidden,native:!0},I`About`),Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getArchiveUrl)(he),onClick:this.props.markWelcomePageAsHidden,native:!0},I`Archive`),Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getAboutUrl)(he,{params:{sort:"people"}}),onClick:this.props.markWelcomePageAsHidden,native:!0},I`Authors`),this.getSavedEmail()?Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getSignoutUrl)({for_pub:he.subdomain}),native:!0},I`Not you?`):Object(e.h)("a",{className:"welcome-content-link",href:Object(a.getSigninUrl)({for_pub:he.subdomain,redirect:pe}),native:!0},I`Login`)],q)),Object(e.h)(b,{emailSuggestions:this.state.emailSuggestions,currentEmail:this.state.currentEmail,onAccept:this.onAcceptSuggestion}))}}K(ee,"contextType",l.a)},,function($,n,t){"use strict";t.d(n,"a",function(){return e});const e=typeof window=="undefined"||typeof document=="undefined"},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s){typeof queueMicrotask=="function"?queueMicrotask(s):Promise.resolve().then(s).catch(o=>setTimeout(()=>{throw o}))}},function($,n,t){"use strict";t.r(n),t.d(n,"CommandManager",function(){return e.CommandManager}),t.d(n,"Extension",function(){return e.Extension}),t.d(n,"InputRule",function(){return e.InputRule}),t.d(n,"Mark",function(){return e.Mark}),t.d(n,"Node",function(){return e.Node}),t.d(n,"NodeView",function(){return e.NodeView}),t.d(n,"PasteRule",function(){return e.PasteRule}),t.d(n,"Tracker",function(){return e.Tracker}),t.d(n,"callOrReturn",function(){return e.callOrReturn}),t.d(n,"combineTransactionSteps",function(){return e.combineTransactionSteps}),t.d(n,"createChainableState",function(){return e.createChainableState}),t.d(n,"createDocument",function(){return e.createDocument}),t.d(n,"createNodeFromContent",function(){return e.createNodeFromContent}),t.d(n,"createStyleTag",function(){return e.createStyleTag}),t.d(n,"defaultBlockAt",function(){return e.defaultBlockAt}),t.d(n,"deleteProps",function(){return e.deleteProps}),t.d(n,"elementFromString",function(){return e.elementFromString}),t.d(n,"escapeForRegEx",function(){return e.escapeForRegEx}),t.d(n,"extensions",function(){return e.extensions}),t.d(n,"findChildren",function(){return e.findChildren}),t.d(n,"findChildrenInRange",function(){return e.findChildrenInRange}),t.d(n,"findDuplicates",function(){return e.findDuplicates}),t.d(n,"findParentNode",function(){return e.findParentNode}),t.d(n,"findParentNodeClosestToPos",function(){return e.findParentNodeClosestToPos}),t.d(n,"fromString",function(){return e.fromString}),t.d(n,"generateHTML",function(){return e.generateHTML}),t.d(n,"generateJSON",function(){return e.generateJSON}),t.d(n,"generateText",function(){return e.generateText}),t.d(n,"getAttributes",function(){return e.getAttributes}),t.d(n,"getAttributesFromExtensions",function(){return e.getAttributesFromExtensions}),t.d(n,"getChangedRanges",function(){return e.getChangedRanges}),t.d(n,"getDebugJSON",function(){return e.getDebugJSON}),t.d(n,"getExtensionField",function(){return e.getExtensionField}),t.d(n,"getHTMLFromFragment",function(){return e.getHTMLFromFragment}),t.d(n,"getMarkAttributes",function(){return e.getMarkAttributes}),t.d(n,"getMarkRange",function(){return e.getMarkRange}),t.d(n,"getMarkType",function(){return e.getMarkType}),t.d(n,"getMarksBetween",function(){return e.getMarksBetween}),t.d(n,"getNodeAttributes",function(){return e.getNodeAttributes}),t.d(n,"getNodeType",function(){return e.getNodeType}),t.d(n,"getRenderedAttributes",function(){return e.getRenderedAttributes}),t.d(n,"getSchema",function(){return e.getSchema}),t.d(n,"getSchemaByResolvedExtensions",function(){return e.getSchemaByResolvedExtensions}),t.d(n,"getSchemaTypeByName",function(){return e.getSchemaTypeByName}),t.d(n,"getSchemaTypeNameByName",function(){return e.getSchemaTypeNameByName}),t.d(n,"getSplittedAttributes",function(){return e.getSplittedAttributes}),t.d(n,"getText",function(){return e.getText}),t.d(n,"getTextBetween",function(){return e.getTextBetween}),t.d(n,"getTextContentFromNodes",function(){return e.getTextContentFromNodes}),t.d(n,"getTextSerializersFromSchema",function(){return e.getTextSerializersFromSchema}),t.d(n,"injectExtensionAttributesToParseRule",function(){return e.injectExtensionAttributesToParseRule}),t.d(n,"inputRulesPlugin",function(){return e.inputRulesPlugin}),t.d(n,"isActive",function(){return e.isActive}),t.d(n,"isEmptyObject",function(){return e.isEmptyObject}),t.d(n,"isExtensionRulesEnabled",function(){return e.isExtensionRulesEnabled}),t.d(n,"isFunction",function(){return e.isFunction}),t.d(n,"isList",function(){return e.isList}),t.d(n,"isMacOS",function(){return e.isMacOS}),t.d(n,"isMarkActive",function(){return e.isMarkActive}),t.d(n,"isNodeActive",function(){return e.isNodeActive}),t.d(n,"isNodeEmpty",function(){return e.isNodeEmpty}),t.d(n,"isNodeSelection",function(){return e.isNodeSelection}),t.d(n,"isNumber",function(){return e.isNumber}),t.d(n,"isPlainObject",function(){return e.isPlainObject}),t.d(n,"isRegExp",function(){return e.isRegExp}),t.d(n,"isString",function(){return e.isString}),t.d(n,"isTextSelection",function(){return e.isTextSelection}),t.d(n,"isiOS",function(){return e.isiOS}),t.d(n,"markInputRule",function(){return e.markInputRule}),t.d(n,"markPasteRule",function(){return e.markPasteRule}),t.d(n,"mergeAttributes",function(){return e.mergeAttributes}),t.d(n,"mergeDeep",function(){return e.mergeDeep}),t.d(n,"minMax",function(){return e.minMax}),t.d(n,"nodeInputRule",function(){return e.nodeInputRule}),t.d(n,"nodePasteRule",function(){return e.nodePasteRule}),t.d(n,"objectIncludes",function(){return e.objectIncludes}),t.d(n,"pasteRulesPlugin",function(){return e.pasteRulesPlugin}),t.d(n,"posToDOMRect",function(){return e.posToDOMRect}),t.d(n,"removeDuplicates",function(){return e.removeDuplicates}),t.d(n,"resolveFocusPosition",function(){return e.resolveFocusPosition}),t.d(n,"selectionToInsertionEnd",function(){return e.selectionToInsertionEnd}),t.d(n,"splitExtensions",function(){return e.splitExtensions}),t.d(n,"textInputRule",function(){return e.textInputRule}),t.d(n,"textPasteRule",function(){return e.textPasteRule}),t.d(n,"textblockTypeInputRule",function(){return e.textblockTypeInputRule}),t.d(n,"wrappingInputRule",function(){return e.wrappingInputRule}),t.d(n,"BubbleMenu",function(){return v}),t.d(n,"Editor",function(){return O}),t.d(n,"EditorContent",function(){return f}),t.d(n,"FloatingMenu",function(){return u}),t.d(n,"NodeViewContent",function(){return M}),t.d(n,"NodeViewWrapper",function(){return y}),t.d(n,"PureEditorContent",function(){return B}),t.d(n,"ReactNodeViewRenderer",function(){return D}),t.d(n,"ReactRenderer",function(){return w}),t.d(n,"useEditor",function(){return i});var e=t(18),s=t(2),o=t(19),a=t(247);class c{constructor({editor:A,element:L,view:C,tippyOptions:R={},shouldShow:U}){this.preventHide=!1,this.shouldShow=({view:Z,state:F,from:z,to:G})=>{const{doc:V,selection:k}=F,{empty:K}=k,Y=!V.textBetween(z,G).length&&Object(e.isTextSelection)(F.selection);return!(!Z.hasFocus()||K||Y)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:Z})=>{var F;if(this.preventHide){this.preventHide=!1;return}(Z==null?void 0:Z.relatedTarget)&&((F=this.element.parentNode)===null||F===void 0?void 0:F.contains(Z.relatedTarget))||this.hide()},this.editor=A,this.element=L,this.view=C,U&&(this.shouldShow=U),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=R,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:A}=this.editor.options,L=!!A.parentElement;this.tippy||!L||(this.tippy=Object(a.default)(A,vr({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",C=>{this.blurHandler({event:C})}))}update(A,L){var C,R;const{state:U,composing:Z}=A,{doc:F,selection:z}=U,G=L&&L.doc.eq(F)&&L.selection.eq(z);if(Z||G)return;this.createTooltip();const{ranges:V}=z,k=Math.min(...V.map(ee=>ee.$from.pos)),K=Math.max(...V.map(ee=>ee.$to.pos));if(!((C=this.shouldShow)===null||C===void 0?void 0:C.call(this,{editor:this.editor,view:A,state:U,oldState:L,from:k,to:K}))){this.hide();return}(R=this.tippy)===null||R===void 0||R.setProps({getReferenceClientRect:()=>{if(Object(e.isNodeSelection)(U.selection)){const ee=A.nodeDOM(k);if(ee)return ee.getBoundingClientRect()}return Object(e.posToDOMRect)(A,k,K)}}),this.show()}show(){var A;(A=this.tippy)===null||A===void 0||A.show()}hide(){var A;(A=this.tippy)===null||A===void 0||A.hide()}destroy(){var A;(A=this.tippy)===null||A===void 0||A.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const l=N=>new o.Plugin({key:typeof N.pluginKey=="string"?new o.PluginKey(N.pluginKey):N.pluginKey,view:A=>new c(vr({view:A},N))}),p=e.Extension.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[l({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});class h{constructor({editor:A,element:L,view:C,tippyOptions:R={},shouldShow:U}){this.preventHide=!1,this.shouldShow=({view:Z,state:F})=>{const{selection:z}=F,{$anchor:G,empty:V}=z,k=G.depth===1,K=G.parent.isTextblock&&!G.parent.type.spec.code&&!G.parent.textContent;return!(!Z.hasFocus()||!V||!k||!K)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:Z})=>{var F;if(this.preventHide){this.preventHide=!1;return}(Z==null?void 0:Z.relatedTarget)&&((F=this.element.parentNode)===null||F===void 0?void 0:F.contains(Z.relatedTarget))||this.hide()},this.editor=A,this.element=L,this.view=C,U&&(this.shouldShow=U),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=R,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:A}=this.editor.options,L=!!A.parentElement;this.tippy||!L||(this.tippy=Object(a.default)(A,vr({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",C=>{this.blurHandler({event:C})}))}update(A,L){var C,R;const{state:U}=A,{doc:Z,selection:F}=U,{from:z,to:G}=F;if(L&&L.doc.eq(Z)&&L.selection.eq(F))return;if(this.createTooltip(),!((C=this.shouldShow)===null||C===void 0?void 0:C.call(this,{editor:this.editor,view:A,state:U,oldState:L}))){this.hide();return}(R=this.tippy)===null||R===void 0||R.setProps({getReferenceClientRect:()=>Object(e.posToDOMRect)(A,z,G)}),this.show()}show(){var A;(A=this.tippy)===null||A===void 0||A.show()}hide(){var A;(A=this.tippy)===null||A===void 0||A.hide()}destroy(){var A;(A=this.tippy)===null||A===void 0||A.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const m=N=>new o.Plugin({key:typeof N.pluginKey=="string"?new o.PluginKey(N.pluginKey):N.pluginKey,view:A=>new h(vr({view:A},N))}),g=e.Extension.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[m({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}}),v=N=>{const[A,L]=Object(s.useState)(null);return Object(s.useEffect)(()=>{if(!A||N.editor.isDestroyed)return;const{pluginKey:C="bubbleMenu",editor:R,tippyOptions:U={},shouldShow:Z=null}=N,F=l({pluginKey:C,editor:R,element:A,tippyOptions:U,shouldShow:Z});return R.registerPlugin(F),()=>R.unregisterPlugin(C)},[N.editor,A]),s.default.createElement("div",{ref:L,className:N.className,style:{visibility:"hidden"}},N.children)};class O extends e.Editor{constructor(){super(...arguments);this.contentComponent=null}}const u=N=>{const[A,L]=Object(s.useState)(null);return Object(s.useEffect)(()=>{if(!A||N.editor.isDestroyed)return;const{pluginKey:C="floatingMenu",editor:R,tippyOptions:U={},shouldShow:Z=null}=N,F=m({pluginKey:C,editor:R,element:A,tippyOptions:U,shouldShow:Z});return R.registerPlugin(F),()=>R.unregisterPlugin(C)},[N.editor,A]),s.default.createElement("div",{ref:L,className:N.className,style:{visibility:"hidden"}},N.children)};function r(){const[,N]=Object(s.useState)(0);return()=>N(A=>A+1)}const i=(N={},A=[])=>{const[L,C]=Object(s.useState)(null),R=r();return Object(s.useEffect)(()=>{const U=new O(N);return C(U),U.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{R()})})}),()=>{U.destroy()}},A),L};function d(N){return!!(typeof N=="function"&&N.prototype&&N.prototype.isReactComponent)}function b(N){var A;return typeof N=="object"&&((A=N.$$typeof)===null||A===void 0?void 0:A.toString())==="Symbol(react.forward_ref)"}class w{constructor(A,{editor:L,props:C={},as:R="div",className:U=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=A,this.editor=L,this.props=C,this.element=document.createElement(R),this.element.classList.add("react-renderer"),U&&this.element.classList.add(...U.split(" ")),this.render()}render(){var A;const L=this.component,C=this.props;(d(L)||b(L))&&(C.ref=R=>{this.ref=R}),this.reactElement=s.default.createElement(L,vr({},C)),((A=this.editor)===null||A===void 0?void 0:A.contentComponent)&&this.editor.contentComponent.setState({renderers:this.editor.contentComponent.state.renderers.set(this.id,this)})}updateProps(A={}){this.props=vr(vr({},this.props),A),this.render()}destroy(){var A;if((A=this.editor)===null||A===void 0?void 0:A.contentComponent){const{renderers:L}=this.editor.contentComponent.state;L.delete(this.id),this.editor.contentComponent.setState({renderers:L})}}}const E=Object(s.createContext)({onDragStart:void 0}),S=()=>Object(s.useContext)(E);class P extends e.NodeView{mount(){const A={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(R={})=>this.updateAttributes(R),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const R=U=>U.charAt(0).toUpperCase()+U.substring(1);this.component.displayName=R(this.extension.name)}const L=R=>{const U=this.component,Z=this.onDragStart.bind(this),F=z=>{z&&this.contentDOMElement&&z.firstChild!==this.contentDOMElement&&z.appendChild(this.contentDOMElement)};return s.default.createElement(E.Provider,{value:{onDragStart:Z,nodeViewContentRef:F}},s.default.createElement(U,vr({},R)))};L.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let C=this.node.isInline?"span":"div";this.options.as&&(C=this.options.as),this.renderer=new w(L,{editor:this.editor,props:A,as:C,className:`node-${this.node.type.name}`})}get dom(){var A;if(this.renderer.element.firstElementChild&&!((A=this.renderer.element.firstElementChild)===null||A===void 0?void 0:A.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}update(A,L){const C=R=>{this.renderer.updateProps(R)};if(A.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const R=this.node,U=this.decorations;return this.node=A,this.decorations=L,this.options.update({oldNode:R,oldDecorations:U,newNode:A,newDecorations:L,updateProps:()=>C({node:A,decorations:L})})}return A===this.node&&this.decorations===L||(this.node=A,this.decorations=L,C({node:A,decorations:L})),!0}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy(),this.contentDOMElement=null}}function D(N,A){return L=>L.editor.contentComponent?new P(N,L,A):{}}const W=({renderers:N})=>s.default.createElement(s.default.Fragment,null,Array.from(N).map(([A,L])=>s.default.createPortal(L.reactElement,L.element,A)));class B extends s.default.Component{constructor(A){super(A);this.editorContentRef=s.default.createRef(),this.state={renderers:new Map}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:A}=this.props;if(A&&A.options.element){if(A.contentComponent)return;const L=this.editorContentRef.current;L.append(...A.options.element.childNodes),A.setOptions({element:L}),A.contentComponent=this,A.createNodeViews()}}componentWillUnmount(){const{editor:A}=this.props;if(!A||(A.isDestroyed||A.view.setProps({nodeViews:{}}),A.contentComponent=null,!A.options.element.firstChild))return;const L=document.createElement("div");L.append(...A.options.element.childNodes),A.setOptions({element:L})}render(){const C=this.props,{editor:A}=C,L=ha(C,["editor"]);return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",vr({ref:this.editorContentRef},L)),s.default.createElement(W,{renderers:this.state.renderers}))}}const f=s.default.memo(B),y=s.default.forwardRef((N,A)=>{const{onDragStart:L}=S(),C=N.as||"div";return s.default.createElement(C,Yo(vr({},N),{ref:A,"data-node-view-wrapper":"",onDragStart:L,style:Yo(vr({},N.style),{whiteSpace:"normal"})}))}),M=N=>{const A=N.as||"div",{nodeViewContentRef:L}=S();return s.default.createElement(A,Yo(vr({},N),{ref:L,"data-node-view-content":"",style:Yo(vr({},N.style),{whiteSpace:"pre-wrap"})}))}},function($,n,t){"use strict";t.d(n,"a",function(){return z});var e=t(0),s=t(6),o=t.n(s),a=t(59),c=t.n(a),l=t(3),p=t.n(l),h=t(9),m=t.n(h),g=t(7),v=t(51),O=t.n(v),u=t(8),r=t.n(u),i=t(17),d=t(254),b=t(255),w=t(407),E=t(571),S=t(125),P=Object.defineProperty,D=Object.defineProperties,W=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,M=(G,V,k)=>V in G?P(G,V,{enumerable:!0,configurable:!0,writable:!0,value:k}):G[V]=k,N=(G,V)=>{for(var k in V||(V={}))f.call(V,k)&&M(G,k,V[k]);if(B)for(var k of B(V))y.call(V,k)&&M(G,k,V[k]);return G},A=(G,V)=>D(G,W(V)),L=(G,V,k)=>(M(G,typeof V!="symbol"?V+"":V,k),k),C=(G,V,k)=>new Promise((K,Y)=>{var ee=me=>{try{he(k.next(me))}catch(Ye){Y(Ye)}},ae=me=>{try{he(k.throw(me))}catch(Ye){Y(Ye)}},he=me=>me.done?K(me.value):Promise.resolve(me.value).then(ee,ae);he((k=k.apply(G,V)).next())});const R="AudioPlayer.playbackRate",U=5,Z={utm_source:"twitter",utm_medium:"social",utm_campaign:"twitter-embed"};class F extends e.Component{constructor(V){super(V)}shouldComponentUpdate(V){return this.props.currentPlaybackRate!==V.currentPlaybackRate||this.props.setPlaybackRate!==V.setPlaybackRate}render(){const{currentPlaybackRate:V,setPlaybackRate:k}=this.props;return Object(e.h)("select",{className:"audio-player-playback-rate",dir:"rtl",onInput:K=>k(Number(K.target.value))},Object(e.h)("option",{value:"1",selected:V===1},"1x"),Object(e.h)("option",{value:"1.25",selected:V===1.25},"1.25x"),Object(e.h)("option",{value:"1.5",selected:V===1.5},"1.5x"),Object(e.h)("option",{value:"1.75",selected:V===1.75},"1.75x"),Object(e.h)("option",{value:"2",selected:V===2},"2x"))}}class z extends e.Component{constructor(V,k){super(V,k);L(this,"setPlaybackRate",K=>{this.state.playbackRate!==K&&(this.player&&(this.player.playbackRate=K),this.setState({playbackRate:K}),Object(v.setStoredValue)(R,K))}),L(this,"maybeAppendIframeVisitId",K=>{var Y;const ee=(Y=Object(g.b)())==null?void 0:Y.id;return ee&&(K=Object(l.updateQuery)(K,{src_iid:ee})),K}),L(this,"openEpisodePage",()=>{let K=this.props.post.canonical_url;K=this.maybeAppendIframeVisitId(K),K=Object(l.updateQuery)(K,Z),window.open(K,"_blank")}),this._onGlobalPlay=this.onGlobalPlay.bind(this),this._onUnload=this.onUnload.bind(this),this._onMouseMove=this.onMouseMove.bind(this),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onDragEnd=this.onDragEnd.bind(this),this._onCanPlay=this.onCanPlay.bind(this),this._onPlay=this.onPlay.bind(this),this._onPause=this.onPause.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onRateChange=this.onRateChange.bind(this),this._onWaiting=this.onWaiting.bind(this),this._onPlaying=this.onPlaying.bind(this),this.state={playbackRate:V.playbackRate||Object(v.getStoredValue)(R,1),currentTime:0,waiting:!0,duration:V.duration||void 0,lastDragClearedAt:null}}componentDidMount(){var V,k;(V=u.globalPlaybackNotifier)==null||V.on("play",this._onGlobalPlay),typeof window!="undefined"&&window.addEventListener("beforeunload",this._onUnload,!1),document.body&&(document.body.addEventListener("mousemove",this._onMouseMove,!1),document.body.addEventListener("mouseup",this._onDragEnd,!1),document.body.addEventListener("touchmove",this._onTouchMove,{passive:!1}),document.body.addEventListener("touchend",this._onDragEnd,!1),document.body.addEventListener("touchcancel",this._onDragEnd,!1)),this.player&&(this.player.volume=1,this.player.playbackRate=this.state.playbackRate,this.player.addEventListener("canplay",this._onCanPlay),this.player.addEventListener("play",this._onPlay),this.player.addEventListener("pause",this._onPause),this.player.addEventListener("timeupdate",this._onTimeUpdate),this.player.addEventListener("ratechange",this._onRateChange),this.player.addEventListener("waiting",this._onWaiting),this.player.addEventListener("playing",this._onPlaying)),this.progressBar&&this.progressBar.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.onTimeUpdate(),this.props.onGetDuration&&!isNaN((k=this.player)==null?void 0:k.duration)&&this.props.onGetDuration(this.player.duration),Object(u.preloadImage)(Object(l.cloudinary)("/img/audio-player-pause.png",96))}componentWillUnmount(){var V;(V=u.globalPlaybackNotifier)==null||V.off("play",this._onGlobalPlay),typeof window!="undefined"&&window.removeEventListener("beforeunload",this._onUnload,!1),document.body&&(document.body.removeEventListener("mousemove",this._onMouseMove,!1),document.body.removeEventListener("mouseup",this._onDragEnd,!1),document.body.removeEventListener("touchmove",this._onTouchMove,!1),document.body.removeEventListener("touchend",this._onDragEnd,!1),document.body.removeEventListener("touchcancel",this._onDragEnd,!1)),this.player&&(this.player.removeEventListener("canplay",this._onCanPlay),this.player.removeEventListener("play",this._onPlay),this.player.removeEventListener("pause",this._onPause),this.player.removeEventListener("timeupdate",this._onTimeUpdate),this.player.removeEventListener("ratechange",this._onRateChange),this.player.removeEventListener("waiting",this._onWaiting),this.player.removeEventListener("playing",this._onPlaying)),this.progressBar&&this.progressBar.removeEventListener("touchstart",this._onTouchStart)}componentDidUpdate(V,k){!this.state.playing&&typeof this.state.waiting=="number"&&typeof k.waiting!="number"&&this.track(g.a.AUDIO_BUFFERING_STARTED),this.state.playing&&!k.playing&&!this.state.waiting&&typeof k.waiting=="number"&&this.track(g.a.AUDIO_BUFFERING_COMPLETED,{buffering_duration:Date.now()-k.waiting}),this.state.playing&&Math.floor(this.state.currentTime)!==Math.floor(k.currentTime)&&Math.floor(this.state.currentTime)%U==0&&this.track(g.a.AUDIO_PLAYBACK_CONTINUED,{current_time:Math.floor(this.state.currentTime),feature:this.props.feature}),!this.state.playing&&k.playing&&this.player&&this.player.ended&&this.track(g.a.AUDIO_PLAYBACK_COMPLETE)}onCanPlay(){this.props.onGetDuration&&this.props.onGetDuration(this.player.duration),this.onTimeUpdate()}onPlay(){var V;(V=u.globalPlaybackNotifier)==null||V.emit("play",this),this.setState({playing:!0})}onPause(){this.setState({playing:!1,waiting:!1})}onTimeUpdate(){if(!(!this.player||!isFinite(this.player.duration))){if(this.player.currentTime>this.player.duration){this.player.currentTime=this.player.duration;return}this.state.duration!==this.player.duration||this.state.currentTime!==this.player.currentTime?(this.setState({duration:this.player.duration||this.props.duration,currentTime:this.player.currentTime,waiting:!1}),this.props.onTimeUpdate&&this.props.onTimeUpdate({duration:Math.max(this.state.duration||0,this.player.duration||this.props.duration||0),currentTime:this.player.currentTime})):this.setState({waiting:!1})}}onRateChange(){this.player&&this.state.playbackRate!==this.player.playbackRate&&this.setState({playbackRate:this.player.playbackRate})}onWaiting(){this.setState({waiting:Date.now()})}onPlaying(){this.setState({playing:!0,waiting:!1})}onMouseDown(V){this.onDragStart(V.clientX)}onMouseMove(V){this.onDragMove(V.clientX)}onTouchStart(V){V.touches&&V.touches.length>0&&this.onDragStart(V.touches[0].pageX)}onTouchMove(V){typeof this.state.dragTime=="number"&&V.preventDefault(),V.touches&&V.touches.length>0&&this.onDragMove(V.touches[0].pageX)}onDragStart(V){typeof this.state.dragTime!="number"&&this.setDragTime(V)}onDragMove(V){typeof this.state.dragTime=="number"&&this.setDragTime(V)}onDragEnd(){this.clearDragTime()}onUnload(V){this.state.playing&&(V.returnValue="If you close this the audio will stop. Are you sure you want to navigate away from this page?")}onGlobalPlay(V){this!==V&&this.player&&(this.track(g.a.CLICKED_PAUSE_BUTTON,{implicit:!0,feature:this.props.feature}),this.player.pause())}togglePlayback(){return C(this,null,function*(){if(this.player)if(this.player.paused){this.track(g.a.CLICKED_PLAY_BUTTON,{feature:this.props.feature});try{yield this.player.play()}catch(V){if(V.name==="NotSupportedError")alert("Failed to play this media: it may not be supported by this browser.");else throw V}}else this.track(g.a.CLICKED_PAUSE_BUTTON,{feature:this.props.feature}),yield this.player.pause()})}skipBack(){if(this.player){const V=Math.max(0,this.state.currentTime-15);this.track(g.a.SEEKED_AUDIO,{new_time:V,source:"skip"}),this.player.currentTime=V}}skipForward(){if(this.player){const V=Math.min(this.state.duration,this.state.currentTime+30);this.track(g.a.SEEKED_AUDIO,{new_time:V,source:"skip"}),this.player.currentTime=V}}setDragTime(V){if(!this.props.src||!this.state.duration||!this.player||!document.body||!document.body.getBoundingClientRect)return;const k=document.body.getBoundingClientRect(),K=this.progressBar.getBoundingClientRect(),Y=K.left-k.left,ee=K.right;let he=(Math.max(Y,Math.min(ee,V))-Y)/(ee-Y)*this.state.duration;this.isDragTimeCloseToCurrentTime(he)&&(he=this.state.currentTime),this.setState({dragTime:he})}clearDragTime(){if(typeof this.state.dragTime!="number")return;const V=this.state.dragTime;this.track(g.a.SEEKED_AUDIO,{new_time:V,source:"slider"}),this.isDragTimeCloseToCurrentTime(V)?this.setState({dragTime:null}):(this.setState({currentTime:V,dragTime:null,lastDragClearedAt:performance.now()}),this.player&&(this.player.currentTime=V))}isDragTimeCloseToCurrentTime(V){if(typeof this.state.currentTime!="number")return!1;let k;return this.state.duration<10?k=0:this.state.duration<30?k=3:k=5,Math.abs(this.state.currentTime-V)<k}track(V,k={}){const K=this.props.metricsPost;!K||Object(g.i)(V,Object.assign({post_id:K.id,publication_id:K.publication_id,is_podcast_free_preview:Object(a.podcastPostIsFreePreview)(K),current_time:this.state.currentTime?Math.floor(this.state.currentTime):0,duration:this.state.duration?Math.floor(this.state.duration):0,playback_rate:this.state.playbackRate},k))}render({src:V,autoPlay:k,pub:K,post:Y,isFancy:ee,showCTAs:ae,metricsPost:he,addToPodcastLink:me,isPaywalled:Ye,render:se}){if(se){const{dragTime:ie,duration:Ee,currentTime:Oe,playbackRate:ce}=this.state;return Object(e.h)(e.Fragment,null,se({isPaywalled:Ye,progress:Ee?(typeof ie=="number"?ie:Oe)/Ee:0,currentTime:Ee?Object(h.secondsToHHMMSS)(Oe):"--:--",remainingTime:Ee?`-${Object(h.secondsToHHMMSS)(Ee-Math.min(Oe,Ee))}`:"--:--",isPlaying:this.state.playing,playbackRate:ce,progressBarOnMouseDown:ue=>{this.onMouseDown(ue)},progressBarRef:ue=>{this.progressBar=ue},setPlaybackRate:ue=>{this.setPlaybackRate(ue)},skipBack:()=>{this.skipBack()},skipForward:()=>{this.skipForward()},togglePlayback:()=>{this.togglePlayback()}}),V&&!Ye&&Object(e.h)("audio",{ref:ue=>{this.player=ue},src:V,autoPlay:k},"Audio playback is not supported on your browser. Please upgrade."))}return ee?this.renderFancy({src:V,autoPlay:k,pub:K,post:Y,metricsPost:he,showCTAs:ae}):this.renderOriginal({src:V,autoPlay:k,pub:K,metricsPost:he,addToPodcastLink:me})}renderFancy({src:V,autoPlay:k,pub:K,post:Y,showCTAs:ee}){const ae=Object(u.getPodcastEpisodeImageUrl)(K,Y);return Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"audio-player-wrapper-fancy"},Object(e.h)("div",{className:"audio-player"},Object(e.h)("div",{className:"audio-player-substack-logo audio-player-clickable",onClick:this.openEpisodePage},Object(e.h)(S.default,{color:"#F8F8F8"})),Object(e.h)("div",{className:"audio-player-hero-image-container audio-player-clickable",onClick:this.openEpisodePage},ae&&Object(e.h)("img",{className:"audio-player-hero-image audio-player-clickable",src:Object(l.cloudinary)(ae,500,{height:500,crop:"fill"}),onClick:this.openEpisodePage})),Object(e.h)("div",{className:"audio-player-title audio-player-clickable",onClick:this.openEpisodePage},Y.title),Object(e.h)("div",{className:"audio-player-subtitle audio-player-clickable",onClick:this.openEpisodePage},Y.subtitle),V&&Object(e.h)("audio",{"data-testid":"audio-element",ref:he=>this.player=he,src:V,autoPlay:k},"Audio playback is not supported on your browser. Please upgrade."),this.renderProgressFancy(this.props,this.state),this.renderButtonsFancy(this.props,this.state),ee&&Object(e.h)("div",{className:"btn-group"},Object(e.h)(i.b,{className:"bold text-gray-foreground",newTab:!0,onClick:this.openEpisodePage},"View post"),Object(e.h)(i.b,{className:"primary bold subscribe-btn",href:this.maybeAppendIframeVisitId(Object(l.getSubscribeUrl)(K,A(N({},Z),{simple:!0,next:Object(l.getPostUrl)(K,Y)}))),newTab:!0},Object(h.getSubscribeText)(K))))))}renderOriginal({src:V,autoPlay:k,pub:K,addToPodcastLink:Y}){return Object(e.h)("div",{className:"audio-player-wrapper"},Object(e.h)("div",{className:"audio-player"},V&&Object(e.h)("audio",{ref:ee=>this.player=ee,src:V,autoPlay:k},"Audio playback is not supported on your browser. Please upgrade."),this.renderButtons(this.props,this.state),this.renderProgress(this.props,this.state)),Y&&!K.hide_podcast_feed_link&&Object(e.h)("div",{className:"audio-player-add-to-podcast-link",href:Y},Object(e.h)("a",{href:Y,target:"_blank",rel:"noopener"},"Listen in podcast app")))}renderButtonsFancy({src:V,href:k},{playing:K,waiting:Y,playbackRate:ee}){return Object(e.h)("div",{className:"audio-player-buttons"},Object(e.h)("button",{className:"audio-player-backward","aria-pressed":"false",onClick:()=>this.skipBack()},Object(e.h)(d.default,{className:"skip-icon"})),Object(e.h)("button",{className:o()("audio-player-play",{pause:"playing",waiting:Y}),"aria-pressed":"false",onClick:()=>this.togglePlayback()},K?Object(e.h)(w.default,{className:"playback-icon pause",fill:"#1C110B"}):Object(e.h)(E.default,{className:"playback-icon play",fill:"#1C110B"})),Object(e.h)("button",{className:"audio-player-forward","aria-pressed":"false",onClick:()=>this.skipForward()},Object(e.h)(b.default,{className:"skip-icon"})))}renderButtons({src:V,href:k,isStatic:K},{playing:Y,waiting:ee,playbackRate:ae}){return Object(e.h)("div",{className:"audio-player-buttons"},Object(e.h)("table",{className:"custom"},Object(e.h)("tr",null,Object(e.h)("td",{className:"audio-player-buttons-spacing"},"\xA0"),Object(e.h)("td",{className:"audio-player-backward"},Object(e.h)("a",{role:"button",className:"button",tabIndex:"0","aria-pressed":"false",href:k||"javascript:void(0)",onClick:()=>this.skipBack()},Object(e.h)(d.default,{className:"skip-icon",fill:"#3c3c3c",height:"30",isStatic:K}))),Object(e.h)("td",{className:`audio-player-play ${Y?"pause":""} ${ee?"waiting":""}`},Object(e.h)("a",{className:"button",role:"button",tabIndex:"0","aria-pressed":"false",href:k||"javascript:void(0)",onClick:()=>this.togglePlayback()},Object(e.h)("img",{src:Object(l.cloudinary)(Y?"/img/audio-player-pause.png":"/img/audio-player-play.png",96)}))),Object(e.h)("td",{className:"audio-player-forward"},Object(e.h)("a",{role:"button",className:"button",tabIndex:"0","aria-pressed":"false",href:k||"javascript:void(0)",onClick:()=>this.skipForward()},Object(e.h)(b.default,{className:"skip-icon",fill:"#3c3c3c",height:"30",isStatic:K}))),Object(e.h)("td",{className:"audio-player-buttons-spacing"},"\xA0"))),V&&Object(e.h)(F,{currentPlaybackRate:ae,setPlaybackRate:this.setPlaybackRate}))}renderProgress({},{duration:V,currentTime:k,dragTime:K}){return Object(e.h)("div",{className:"audio-player-progress"},Object(e.h)("table",{className:"custom"},Object(e.h)("tr",null,Object(e.h)("td",{className:"audio-player-progress-past"},V?Object(h.secondsToHHMMSS)(k):"--:--"),Object(e.h)("td",{ref:Y=>this.progressBar=Y,className:"audio-player-progress-bar",onMouseDown:Y=>this.onMouseDown(Y)},Object(e.h)("div",{className:"audio-player-progress-bar-track"}),Object(e.h)("div",{className:"audio-player-progress-bar-filled",style:`width:${V?100*(typeof K=="number"?K:k)/V:0}%`}),Object(e.h)("div",{className:"audio-player-progress-bar-current",style:`left:${V?100*k/V:0}%`}),Object(e.h)("div",{className:"audio-player-progress-bar-button",style:`left:${V?100*(typeof K=="number"?K:k)/V:0}%`}),typeof K=="number"&&Object(e.h)("div",{className:"audio-player-progress-bar-popup",style:`left:${V?100*K/V:0}%`},Object(h.secondsToHHMMSS)(K))),Object(e.h)("td",{className:"audio-player-progress-left"},V?`-${Object(h.secondsToHHMMSS)(V-Math.min(k,V))}`:"--:--"))))}renderProgressFancy({},{duration:V,currentTime:k,dragTime:K,lastDragClearedAt:Y}){const ee=typeof K=="number",ae=Y?performance.now()-Y<50:!1;return Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"audio-player-progress"},Object(e.h)("div",{ref:he=>this.progressBar=he,className:"audio-player-progress-bar",onMouseDown:he=>this.onMouseDown(he)},Object(e.h)("div",{className:"audio-player-progress-bar-track"}),Object(e.h)("div",{className:"audio-player-progress-bar-filled",style:{width:`${V?100*(ee?K:k)/V:0}%`}}),Object(e.h)("div",{className:o()("audio-player-progress-bar-current",{"audio-player-progress-bar-current-placeholder":ee,"audio-player-progress-bar-current-disable-animations":ae}),style:`left:${V?100*k/V:0}%`}),ee&&Object(e.h)("div",{className:"audio-player-progress-bar-current audio-player-progress-bar-current-dragging",style:`left:${V?100*K/V:0}%`}),ee&&Object(e.h)("div",{className:"audio-player-progress-bar-popup",style:`left:${V?100*K/V:0}%`},Object(h.secondsToHHMMSS)(K)))),Object(e.h)("div",{className:"audio-player-time-wrapper"},Object(e.h)("div",{className:"audio-player-progress-past"},V?Object(h.secondsToHHMMSS)(k):"--:--"),Object(e.h)("div",{className:"audio-player-progress-left"},V?`-${Object(h.secondsToHHMMSS)(V-Math.min(k,V))}`:"--:--")))}}},function($,n,t){"use strict";t.d(n,"a",function(){return A});var e=t(0),s=t(6),o=t.n(s),a=t(3),c=t.n(a),l=t(9),p=t.n(l),h=t(7),m=t(51),g=t.n(m),v=t(8),O=t.n(v),u=t(17),r=t(302),i=Object.defineProperty,d=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(L,C,R)=>C in L?i(L,C,{enumerable:!0,configurable:!0,writable:!0,value:R}):L[C]=R,S=(L,C)=>{for(var R in C||(C={}))b.call(C,R)&&E(L,R,C[R]);if(d)for(var R of d(C))w.call(C,R)&&E(L,R,C[R]);return L};const P=5,D="video:playback_location:",W=4*60,B=60,f=60,y=3,M=60,N={hls:"application/x-mpegURL",mp4:"video/mp4"};class A extends e.Component{constructor(C,R){super(C,R);this.player=null,this.previewHiddingTimeout=null,this.onLoadedMetadata=()=>{this.state.playbackRestoreLocation&&(this.player&&(this.player.currentTime=this.state.playbackRestoreLocation),this.previewHiddingTimeout=window.setTimeout(()=>this.setState({playbackRestoreLocation:null,previewHidden:!0}),3*1e3))},this.onLoadedData=()=>{this.state.playbackRestoreLocation&&(this.previewHiddingTimeout&&clearTimeout(this.previewHiddingTimeout),this.setState({playbackRestoreLocation:null,previewHidden:!0}))},this.onCanPlay=()=>{this.onTimeUpdate()},this.onPlay=()=>{var F;(F=v.globalPlaybackNotifier)==null||F.emit("play",this),this.setState({playing:!0})},this.onPause=()=>{this.setPlaybackRestoreLocation(),this.setState({playing:!1,waiting:!1}),this.player&&this.player.currentTime>this.player.duration-.1&&this.onVideoReachEnd()},this.onTimeUpdate=()=>{!this.player||!isFinite(this.player.duration)||(!this.props.duration&&this.state.duration!==this.player.duration||this.state.currentTime!==this.player.currentTime?this.setState({duration:this.props.duration||this.player.duration,currentTime:this.player.currentTime,waiting:!1}):this.setState({waiting:!1}))},this.onWaiting=()=>{this.setState({waiting:Date.now()})},this.onPlaying=()=>{this.previewHiddingTimeout&&clearTimeout(this.previewHiddingTimeout),this.setState({playing:!0,waiting:!1,previewHidden:!0,attemptingToPlay:!1,autoPlay:!1,hasPlayed:!0})},this.onVideoReachEnd=({resetTime:F=!0}={})=>{this.player&&!this.player.paused&&this.player.pause(),this.state.previewHidden&&this.setState({previewHidden:!1,attemptingToPlay:!1,hasReachedEnd:!0}),F&&this.player&&!Object(v.isIOs)()&&(this.player.currentTime=0),Object(v.exitFullscreen)(),Object(v.exitPictureInPicture)()},this.onPreviewClick=()=>{var F,z;this.state.previewHidden||this.href()||!this.playbackEnabled()||(this.state.attemptingToPlay?(this.setState({attemptingToPlay:!1,autoPlay:!1}),(F=this.player)==null||F.pause(),this.previewHiddingTimeout&&clearTimeout(this.previewHiddingTimeout)):(this.setState({attemptingToPlay:!0}),(z=this.player)==null||z.play(),this.previewHiddingTimeout=window.setTimeout(()=>this.setState({previewHidden:!0}),3*1e3)))},this.onContextMenu=F=>{F.preventDefault()},this.onAllSourcesFailed=()=>{var F,z;console.error("Failed to load all video sources, falling back to preview image"),this.setState({previewHidden:!1,attemptingToPlay:!1,autoPlay:!1,allSourcesFailed:!0}),(z=(F=this.props).onPlaybackFailed)==null||z.call(F)},this.onBeforeUnload=()=>{this.setPlaybackRestoreLocation(),this.state.previewHidden&&this.setState({previewHidden:!1,attemptingToPlay:!1}),this.player&&!this.player.paused&&this.player.pause()},this.onGlobalPlay=F=>{this!==F&&this.player&&(this.track(h.a.VIDEO_PAUSE_BUTTON_CLICKED,{implicit:!0}),this.player.pause())},this.onGlobalKeyDown=F=>{var z;this.props.noKeyboardShortcuts||F.metaKey||F.altKey||F.ctrlKey||document.activeElement!==document.body||!this.player||((z=v.globalPlaybackNotifier)==null?void 0:z.listenerCount("play"))>1&&this.player.paused||(F.key==="f"?Object(v.isFullscreen)()?Object(v.exitFullscreen)()&&F.preventDefault():(Object(v.goFullscreen)(this.player)&&F.preventDefault(),this.player.paused&&this.player.play()):F.key===" "&&!Object(v.isFullscreen)()?(F.preventDefault(),this.player.paused?this.player.play():this.player.pause()):F.key==="ArrowRight"?this.player.currentTime+5>this.player.duration?this.onVideoReachEnd():(this.player.currentTime+=5,this.state.previewHidden||this.setState({previewHidden:!0,attemptingToPlay:!1})):F.key==="ArrowLeft"&&(this.player.currentTime-=5))},this.cta=()=>"",this.href=()=>this.props.href,this.playbackEnabled=()=>!0;var U;const Z=this.getPlaybackRestoreLocation();this.state={playbackRestoreLocation:Z,currentTime:0,waiting:!0,duration:(U=C.mediaUpload.duration)!=null?U:null,autoPlay:C.autoPlay,playing:!1,attemptingToPlay:C.autoPlay,previewHidden:Z!==null&&Z>0,hasPlayed:!1,hasReachedEnd:!1,browserCanPlayHLS:!1,useHLSJS:!0,HLSerrored:!1,allSourcesFailed:!1}}componentDidMount(){var C;this._initHlsjs(),(C=v.globalPlaybackNotifier)==null||C.on("play",this.onGlobalPlay),typeof window!="undefined"&&(document.addEventListener("keydown",this.onGlobalKeyDown,!1),window.addEventListener("beforeunload",this.onBeforeUnload,!1)),this.player&&(this.player.volume=1,this.player.addEventListener("loadedmetadata",this.onLoadedMetadata),this.player.addEventListener("loadeddata",this.onLoadedData),this.player.addEventListener("canplay",this.onCanPlay),this.player.addEventListener("play",this.onPlay),this.player.addEventListener("pause",this.onPause),this.player.addEventListener("timeupdate",this.onTimeUpdate),this.player.addEventListener("waiting",this.onWaiting),this.player.addEventListener("playing",this.onPlaying),this.player.addEventListener("contextmenu",this.onContextMenu)),this.onTimeUpdate()}componentWillUnmount(){var C;this.setPlaybackRestoreLocation(),(C=v.globalPlaybackNotifier)==null||C.off("play",this.onGlobalPlay),typeof window!="undefined"&&(document.removeEventListener("keydown",this.onGlobalKeyDown,!1),window.removeEventListener("beforeunload",this.onBeforeUnload,!1)),this.player&&(this.player.removeEventListener("loadedmetadata",this.onLoadedMetadata),this.player.removeEventListener("loadeddata",this.onLoadedData),this.player.removeEventListener("canplay",this.onCanPlay),this.player.removeEventListener("play",this.onPlay),this.player.removeEventListener("pause",this.onPause),this.player.removeEventListener("timeupdate",this.onTimeUpdate),this.player.removeEventListener("waiting",this.onWaiting),this.player.removeEventListener("playing",this.onPlaying),this.player.removeEventListener("contextmenu",this.onContextMenu)),this.onVideoReachEnd({resetTime:!1}),this.hls!=null&&this.hls.destroy()}componentDidUpdate(C,R){var U;if(!this.state.playing&&typeof this.state.waiting=="number"&&typeof R.waiting!="number"){const{useHLSJS:Z,browserCanPlayHLS:F,HLSerrored:z}=this.state;this.track(h.a.VIDEO_BUFFERING_STARTED,{use_hlsjs:Z,browser_can_play_hls:F,hls_errored:z})}this.state.playing&&!R.playing&&!this.state.waiting&&typeof R.waiting=="number"&&this.track(h.a.VIDEO_BUFFERING_COMPLETED,{buffering_duration:Date.now()-R.waiting}),this.state.playing&&Math.floor(this.state.currentTime)!==Math.floor(R.currentTime)&&Math.floor(this.state.currentTime)%P==0&&this.track(h.a.VIDEO_PLAYBACK_CONTINUED,{current_time:Math.floor(this.state.currentTime)}),!this.state.playing&&R.playing&&((U=this.player)==null?void 0:U.ended)&&this.track(h.a.VIDEO_PLAYBACK_COMPLETED)}getPlaybackLocationKey(){return`${D}${this.props.mediaUpload.id}`}getPlaybackRestoreLocation(){if(this.playbackEnabled()&&this.props.restorePlaybackLocation&&this.props.mediaUpload.duration&&this.props.mediaUpload.duration>W){const C=Object(m.getStoredValue)(this.getPlaybackLocationKey());if((C==null?void 0:C.currentTime)>B&&this.props.duration!==null&&this.props.duration!==void 0&&this.props.duration-C.currentTime>f){const R=Date.now()-C.watchedAt>M?y:0,U=Math.max(0,C.currentTime-R);if(U)return U}}return null}setPlaybackRestoreLocation(){var C;this.playbackEnabled()&&((C=this.player)==null?void 0:C.currentTime)&&Object(m.setStoredValue)(this.getPlaybackLocationKey(),{currentTime:this.player.currentTime,watchedAt:Date.now()})}track(C,R={}){const U=this.props.post;!U||Object(h.i)(C,Object.assign({post_id:U.id,current_time:this.state.currentTime?Math.floor(this.state.currentTime):0,duration:this.state.duration?Math.floor(this.state.duration):0},R))}render(C,R){const{height:U,width:Z}=Object(l.videoPlayerDimensions)(C.mediaUpload,{isStatic:C.isStatic}),F={paddingBottom:`${Math.min(100,100*U/Z).toFixed(4)}%`};return Object(e.h)("div",{className:o()("video-player-wrapper",{"with-preview":!R.previewHidden,"is-static":C.isStatic,"full-width":Z>=960}),onClick:this.onPreviewClick},this.href()?Object(e.h)("a",{className:"video-player",href:this.href(),style:F},this.renderPlayer(this.props,this.state)):Object(e.h)("div",{className:"video-player",style:F},this.renderPlayer(this.props,this.state)))}renderPlayer({mediaUpload:C,pub:R,reaction_token:U=null,isStatic:Z,noControls:F,noPreview:z},{autoPlay:G,attemptingToPlay:V,previewHidden:k,useHLSJS:K,browserCanPlayHLS:Y,HLSerrored:ee}){const ae=!z&&!k,he=Z||!this.playbackEnabled(),me=Object(a.updateQuery)(`/api/v1/video/upload/${C.id}/src`,{token:U,override_publication_id:R==null?void 0:R.id});let Ye=[];return Object(v.isAndroid)()?Ye=["mp4"]:Y?Ye=["hls","mp4"]:K?Ye=[]:ee?Ye=["mp4"]:Ye=["hls","mp4"],[this.playbackEnabled()&&!Z&&typeof window!="undefined"&&Object(e.h)("video",{ref:se=>this.player=se,controls:!F&&!ae,controlsList:"nodownload",autoPlay:G&&this.playbackEnabled(),poster:Object(a.getMediaUploadThumbnailUrlForPlayer)(C)},Ye.map((se,ie)=>Object(e.h)("source",{src:Object(a.updateQuery)(me,{type:se}),type:N[se],onError:ie===Ye.length-1?this.onAllSourcesFailed:void 0}))),ae&&[he&&Object(e.h)("img",{className:"video-player-preview","data-testid":Z?"video-player-static-preview-image":"",width:550,src:Object(a.getMediaUploadThumbnailUrlForPlayer)(C,{pub:R,isStatic:Z})}),!he&&Object(e.h)("div",{className:o()("video-player-button",{"no-text":!this.cta()})},Object(e.h)("a",{className:"primary",href:this.href(),native:!0},Object(e.h)(u.b,{className:o()({loading:V&&this.playbackEnabled()})},Object(e.h)(r.default,{alt:"play",stroke:"#FFFFFF",fill:"#FFFFFF"}),Object(e.h)("span",null,this.cta()))))]]}_initHlsjs(){const C=!!(this.player&&this.player.canPlayType("application/vnd.apple.mpegurl"));if(C){this.setState({browserCanPlayHLS:C});return}t.e(21).then(t.t.bind(null,941,7)).then(R=>{this._initHlsjsWrapped(R.default)})}_initHlsjsWrapped(C){const R=this,U=C.isSupported();if(!C.isSupported()){this.setState({useHLSJS:U});return}this.hls!=null&&this.hls.destroy();const Z={},F=new C(S({enableWorker:!1},Z));this.player!=null&&F.attachMedia(this.player);const{mediaUpload:z,pub:G,reaction_token:V=null}=this.props,k=Object(a.updateQuery)(`/api/v1/video/upload/${z.id}/src`,{token:V,override_publication_id:G==null?void 0:G.id,type:"hls"});F.on(C.Events.MEDIA_ATTACHED,()=>{F.loadSource(k),F.on(C.Events.MANIFEST_PARSED,()=>{var K;this.state.autoPlay&&((K=this.player)==null||K.play().catch(()=>console.log("Unable to autoplay prior to user interaction with the dom.")))})}),F.on(C.Events.ERROR,function(K,Y){if(Y.fatal)switch(Y.type){case C.ErrorTypes.NETWORK_ERROR:R.setState({useHLSJS:!1}),R.hls.destroy(),F.startLoad();break;case C.ErrorTypes.MEDIA_ERROR:F.recoverMediaError();break;default:this._initHlsjs();break}}),this.hls=F}}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(440),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideComments",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){var e=t(725),s=t(180);function o(a){return a&&a.length?e(a,s):0}$.exports=o},function($,n,t){var e=t(143),s=1/0;function o(a){if(typeof a=="string"||e(a))return a;var c=a+"";return c=="0"&&1/a==-s?"-0":c}$.exports=o},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"NoteForwardIcon",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return B}),t.d(n,"b",function(){return y});var e=t(0),s=t(6),o=t.n(s),a=t(11),c=t.n(a),l=t(15),p=t.n(l),h=t(3),m=t.n(h),g=t(9),v=t.n(g),O=t(241),u=t(44),r=Object.defineProperty,i=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(M,N,A)=>N in M?r(M,N,{enumerable:!0,configurable:!0,writable:!0,value:A}):M[N]=A,E=(M,N)=>{for(var A in N||(N={}))d.call(N,A)&&w(M,A,N[A]);if(i)for(var A of i(N))b.call(N,A)&&w(M,A,N[A]);return M},S=(M,N)=>{var A={};for(var L in M)d.call(M,L)&&N.indexOf(L)<0&&(A[L]=M[L]);if(M!=null&&i)for(var L of i(M))N.indexOf(L)<0&&b.call(M,L)&&(A[L]=M[L]);return A},P=(M,N,A)=>new Promise((L,C)=>{var R=F=>{try{Z(A.next(F))}catch(z){C(z)}},U=F=>{try{Z(A.throw(F))}catch(z){C(z)}},Z=F=>F.done?L(F.value):Promise.resolve(F.value).then(R,U);Z((A=A.apply(M,N)).next())});const D=92;class W extends e.Component{componentDidMount(){this.props.manualLoad||this.loadProfileUser()}componentDidUpdate(N){!this.props.manualLoad&&N.profileUser.id!==this.props.profileUser.id&&(this.setState({profileUser:null}),this.loadProfileUser())}loadProfileUser(){return P(this,null,function*(){if(!this.state.loadingProfile){this.setState({loadingProfile:!0});try{const N=yield c.a.get(`/api/v1/user/${this.props.profileUser.id}/profile`);this.setState({profileUser:N.body})}catch(N){console.error("Failed to load profile:",N)}this.setState({loadingProfile:!1})}})}getProfileUser(){return this.state.profileUser||this.props.profileUser}render({pub:N}){var A;const L=((A=this.getProfileUser().publications)==null?void 0:A.filter(C=>C.id!==N.id))||[];return Object(e.h)("div",{className:`user-profile ${this.props.isBanned?"banned":""}`},Object(e.h)(y,{photo_url:Object(h.getUserPhotoUrl)(this.getProfileUser()),banned:this.props.isBanned,email:this.getProfileUser().email,pub:N}),Object(e.h)("div",{className:"user-profile-name"},this.getProfileUser().name),Object(e.h)("div",{className:"user-profile-status"},this.getProfileUser().id===N.author_id?Object(e.h)("b",null,"Author of ",N.name):this.getProfileUser().subscribed_at?`Subscriber to ${N.name} since ${p()(this.getProfileUser().subscribed_at).standardDate()}`:"\xA0"),L.length>0&&Object(e.h)("div",{className:"user-profile-publication"},"Author of"," ",Object(g.oxfordComma)(L.map(C=>Object(e.h)("a",{href:C.base_url,native:!0},C.name)))),this.props.isBanned&&Object(e.h)("div",{className:"user-profile-banned"},"Banned from commenting on ",N.name))}}class B extends u.a{onBeforeOpen(){this.profile.loadProfileUser()}renderChildren(){const N=this.props,{ref:A}=N,L=S(N,["ref"]);return Object(e.h)("div",{className:"user-profile-modal"},Object(e.h)(W,E({ref:C=>this.profile=C,manualLoad:!0},L)))}}const f=({children:M,email:N,pub:A})=>Object(e.h)("a",{target:"_blank",href:Object(h.getSubscriberDetailsUrl)(A,N)},M),y=({photo_url:M,size:N=D,banned:A=!1,email:L="",className:C="",pub:R=null,children:U=void 0})=>{const Z=Object(e.h)("img",{className:"user-profile-head",height:N,width:N,src:Object(h.cloudinary)(M,N*2,{height:N*2,crop:"fill"})});return Object(e.h)("div",{className:o()(C,"profile-image-wrapper")},L&&R?Object(e.h)(f,{email:L,pub:R},Z):Z,A&&Object(e.h)(O.default,{height:N}),U)}},function($,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"a",function(){return i});var e=t(0),s=t(9),o=t.n(s),a=t(8),c=t.n(a),l=Object.defineProperty,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(d,b,w)=>b in d?l(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,v=(d,b)=>{for(var w in b||(b={}))h.call(b,w)&&g(d,w,b[w]);if(p)for(var w of p(b))m.call(b,w)&&g(d,w,b[w]);return d},O=(d,b)=>{var w={};for(var E in d)h.call(d,E)&&b.indexOf(E)<0&&(w[E]=d[E]);if(d!=null&&p)for(var E of p(d))b.indexOf(E)<0&&m.call(d,E)&&(w[E]=d[E]);return w},u=(d,b,w)=>(g(d,typeof b!="symbol"?b+"":b,w),w);const r={"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"};class i extends e.Component{constructor(){super(...arguments);u(this,"onWindowResize",b=>{this.setAutoHeight()}),u(this,"onKeyDown",b=>(this.props.inline&&b.key==="Enter"&&b.preventDefault(),this.props.onKeyDown&&this.props.onKeyDown(b))),u(this,"onInput",b=>(this.setAutoHeight(),this.props.onInput&&this.props.onInput(b))),u(this,"onBlur",()=>{var b;if(this.props.inline){const w=(b=this.base)==null?void 0:b.value,E=Object(s.sanitizeInlineText)(w);w&&w!==E&&(this.base.value=E,this.props.onInput&&this.props.onInput(event))}})}componentDidMount(){this.setAutoHeight(),window.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}componentDidUpdate(b,w,E){b.value!==this.props.value&&this.setAutoHeight()}get value(){return this.base?this.base.value:""}setAutoHeight(){!this.props.autoHeight||!this.base||typeof window=="undefined"||!window.getComputedStyle||Object(a.stateTransaction)(this,b=>{this.base.style.height="";const w=window.getComputedStyle(this.base),E=parseInt(w.getPropertyValue("height")),S=parseInt(w.getPropertyValue("padding-top"))+parseInt(w.getPropertyValue("padding-bottom")),P=parseInt(w.getPropertyValue("line-height")),D=Math.min(Math.round((this.base.scrollHeight-S)/P),this.props.maxLines||1/0);this.base.style.height=`${Math.max(D*P+S,E)}px`,this.base.style.height!==b.height&&this.setState({height:this.base.style.height})})}render(b,{height:w}){var E=b,{children:S,ref:P,style:D,onKeyDown:W,onInput:B,inline:f,autoHeight:y,maxLines:M}=E,N=O(E,["children","ref","style","onKeyDown","onInput","inline","autoHeight","maxLines"]);return y&&(D=Object.assign({},D,{height:w})),Object(e.h)("textarea",v(v({style:D,onKeyDown:this.onKeyDown,onInput:this.onInput,onBlur:this.onBlur},r),N),S)}}},function($,n,t){"use strict";t.d(n,"a",function(){return M});function e(N){for(var A=0,L,C=0,R=N.length;R>=4;++C,R-=4)L=N.charCodeAt(C)&255|(N.charCodeAt(++C)&255)<<8|(N.charCodeAt(++C)&255)<<16|(N.charCodeAt(++C)&255)<<24,L=(L&65535)*1540483477+((L>>>16)*59797<<16),L^=L>>>24,A=(L&65535)*1540483477+((L>>>16)*59797<<16)^(A&65535)*1540483477+((A>>>16)*59797<<16);switch(R){case 3:A^=(N.charCodeAt(C+2)&255)<<16;case 2:A^=(N.charCodeAt(C+1)&255)<<8;case 1:A^=N.charCodeAt(C)&255,A=(A&65535)*1540483477+((A>>>16)*59797<<16)}return A^=A>>>13,A=(A&65535)*1540483477+((A>>>16)*59797<<16),((A^A>>>15)>>>0).toString(36)}var s=e,o={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},a=o;function c(N){var A={};return function(L){return A[L]===void 0&&(A[L]=N(L)),A[L]}}var l=c,p=`You have illegal escape sequence in your template literal, most likely inside content's property value.
Because you write your CSS inside a JavaScript string you actually have to do double escaping, so for example "content: '\\00d7';" should become "content: '\\\\00d7';".
You can read more about this here:
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences`,h="You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).",m=/[A-Z]|^ms/g,g=/_EMO_([^_]+?)_([^]*?)_EMO_/g,v=function(A){return A.charCodeAt(1)===45},O=function(A){return A!=null&&typeof A!="boolean"},u=l(function(N){return v(N)?N:N.replace(m,"-$&").toLowerCase()}),r=function(A,L){switch(A){case"animation":case"animationName":if(typeof L=="string")return L.replace(g,function(C,R,U){return y={name:R,styles:U,next:y},R})}return a[A]!==1&&!v(A)&&typeof L=="number"&&L!==0?L+"px":L};if(!1)var i,d,b,w,E,S;var P=!0;function D(N,A,L,C){if(L==null)return"";if(L.__emotion_styles!==void 0)return L;switch(typeof L){case"boolean":return"";case"object":{if(L.anim===1)return y={name:L.name,styles:L.styles,next:y},L.name;if(L.styles!==void 0){var R=L.next;if(R!==void 0)for(;R!==void 0;)y={name:R.name,styles:R.styles,next:y},R=R.next;var U=L.styles+";";return U}return W(N,A,L)}case"function":{if(N!==void 0){var Z=y,F=L(N);return y=Z,D(N,A,F,C)}break}case"string":if(!1)var z,G;break}if(A==null)return L;var V=A[L];return V!==void 0&&!C?V:L}function W(N,A,L){var C="";if(Array.isArray(L))for(var R=0;R<L.length;R++)C+=D(N,A,L[R],!1);else for(var U in L){var Z=L[U];if(typeof Z!="object")A!=null&&A[Z]!==void 0?C+=U+"{"+A[Z]+"}":O(Z)&&(C+=u(U)+":"+r(U,Z)+";");else if(Array.isArray(Z)&&typeof Z[0]=="string"&&(A==null||A[Z[0]]===void 0))for(var F=0;F<Z.length;F++)O(Z[F])&&(C+=u(U)+":"+r(U,Z[F])+";");else{var z=D(N,A,Z,!1);switch(U){case"animation":case"animationName":{C+=u(U)+":"+z+";";break}default:C+=U+"{"+z+"}"}}}return C}var B=/label:\s*([^\s;\n{]+)\s*;/g,f,y,M=function(A,L,C){if(A.length===1&&typeof A[0]=="object"&&A[0]!==null&&A[0].styles!==void 0)return A[0];var R=!0,U="";y=void 0;var Z=A[0];Z==null||Z.raw===void 0?(R=!1,U+=D(C,L,Z,!1)):U+=Z[0];for(var F=1;F<A.length;F++)U+=D(C,L,A[F],U.charCodeAt(U.length-1)===46),R&&(U+=Z[F]);var z;B.lastIndex=0;for(var G="",V;(V=B.exec(U))!==null;)G+="-"+V[1];var k=s(U)+G;return{name:k,styles:U,next:y}}},,function($,n,t){"use strict";t.r(n);var e=t(0),s=t(67),o=t.n(s),a=t(12),c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(i,d,b)=>d in i?c(i,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):i[d]=b,O=(i,d)=>{for(var b in d||(d={}))m.call(d,b)&&v(i,b,d[b]);if(h)for(var b of h(d))g.call(d,b)&&v(i,b,d[b]);return i},u=(i,d)=>l(i,p(d));const r=i=>Object(e.h)(a.a,u(O({},i),{name:"SubstackIcon",svgParams:{height:1e3,width:1e3,fill:s.substack_color,stroke:"none"}}),Object(e.h)("path",{d:"M764.166 348.371H236.319V419.402H764.166V348.371Z"}),Object(e.h)("path",{d:"M236.319 483.752V813.999L500.231 666.512L764.19 813.999V483.752H236.319Z"}),Object(e.h)("path",{d:"M764.166 213H236.319V284.019H764.166V213Z"}));n.default=r},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PlayIconRounded",svgParams:{height:16,width:15}}),Object(e.h)("path",{d:"M14 7.13397C14.6667 7.51887 14.6667 8.48112 14 8.86602L2 15.7942C1.33333 16.1791 0.499999 15.698 0.499999 14.9282L0.5 1.0718C0.5 0.301996 1.33333 -0.17913 2 0.20577L14 7.13397Z"}));n.default=O},function($,n,t){"use strict";t.d(n,"e",function(){return u}),t.d(n,"a",function(){return r}),t.d(n,"d",function(){return i}),t.d(n,"b",function(){return d}),t.d(n,"c",function(){return b});var e=t(0),s=t(1),o=t(21),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(E,S,P)=>S in E?a(E,S,{enumerable:!0,configurable:!0,writable:!0,value:P}):E[S]=P,v=(E,S)=>{for(var P in S||(S={}))h.call(S,P)&&g(E,P,S[P]);if(p)for(var P of p(S))m.call(S,P)&&g(E,P,S[P]);return E},O=(E,S)=>c(E,l(S));function u(E){const S=Object(o.f)({pathname:"/api/v1/subscriptions",auto:E,deps:[]});return Object(s.h)(()=>O(v({},S),{result:S.result?O(v({},S.result),{publicationMap:new Map(S.result.publications.map(D=>[D.id,D])),subscriptionMap:new Map(S.result.subscriptions.map(D=>[D.publication_id,D])),publicationUserMap:new Map(S.result.publicationUsers.map(D=>[D.publication_id,D]))}):null}),[S])}const r=Object(e.createContext)(o.a);function i(){return Object(s.b)(r)}function d(E){var S;const{subscriptionMap:P,publicationUserMap:D,publicationsWithPledges:W}=(S=i().result)!=null?S:{subscriptionMap:new Map,publicationUserMap:new Map,publicationsWithPledges:[]},B=P.get(E),f=D.get(E);return{subscription:B,publicationUser:f,is_pledged:!!(W==null?void 0:W.includes(E))}}function b(E){const{subscription:S,publicationUser:P,is_pledged:D}=d(E),W=(S==null?void 0:S.membership_state)==="free_signup",B=(S==null?void 0:S.membership_state)==="subscribed",f=!!(S==null?void 0:S.is_founding),y=Boolean(P&&["contributor","admin"].includes(P.role));return{subscription:S,publicationUser:P,isFreeSubscribed:W,isPaid:B,isAuthor:y,isFounding:f,isPledged:D}}function w(){var E,S,P;const{publicationUsers:D,publicationMap:W}=(E=i().result)!=null?E:{publicationMap:new Map,publicationUsers:[]},B=(P=(S=D.find(f=>f.is_primary))!=null?S:D.find(f=>f.role==="admin"))!=null?P:D.find(f=>f.role==="contributor");return B&&W.get(B.publication_id)}},function($,n,t){"use strict";t.d(n,"a",function(){return A}),t.d(n,"b",function(){return L});var e=t(0),s=t(6),o=t.n(s),a=t(196),c=t(33),l=t(3),p=t.n(l),h=t(9),m=t.n(h),g=t(555),v=t(75),O=t(101),u=t(67),r=t.n(u),i=t(50),d=t(148),b=t(448),w=Object.defineProperty,E=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,B=(C,R,U)=>R in C?w(C,R,{enumerable:!0,configurable:!0,writable:!0,value:U}):C[R]=U,f=(C,R)=>{for(var U in R||(R={}))D.call(R,U)&&B(C,U,R[U]);if(P)for(var U of P(R))W.call(R,U)&&B(C,U,R[U]);return C},y=(C,R)=>E(C,S(R));const M=["Subscribe","Subscribe now","Sign up","Sign up now"];function N({isStatic:C,pub:R,user:U,freeSignup:Z,children:F,pledgesEnabled:z}){if(C)return Object(e.h)(O.a.Consumer,null,({isFreemail:K,isPledged:Y})=>F({isFreeSubscribed:!0,isSubscribed:!K,isFullySubscribed:R.plans?!K:!z||Y,isForPaidSubscription:!!R.plans&&K,isPledged:Y}));const G=Z||(U==null?void 0:U.is_free_subscribed),V=U==null?void 0:U.is_subscribed,k=U==null?void 0:U.is_pledged;return F({isFreeSubscribed:G,isSubscribed:V,isFullySubscribed:R.plans?V:G&&(!z||k),isForPaidSubscription:!!R.plans&&G&&!V,isPledged:k})}function A({pub:C,user:R,now:U,isStatic:Z}){return Object(e.h)(v.a.Consumer,null,({getSettingFor:F})=>{const z=C.payments_state==="disabled"&&!C.invite_only&&F("payment_pledges_enabled");return Object(e.h)(N,{isStatic:Z,user:R,pub:C,pledgesEnabled:z},({isFreeSubscribed:G,isPledged:V})=>Object(h.getSubscribeText)(C,{now:U,isFreeSubscribed:G,isPledged:V,pledgesEnabled:z}))})}class L extends e.Component{onSignup(R){this.setState({loading:!0}),this.props.onSignup?this.props.onSignup(R):!this.props.forceEmailInput&&(this.props.pub.plans||this.props.pub.has_recommendations)?document.location.href=Object(l.getSubscribeUrl)(this.props.pub,y(f({addBase:!0,utm_medium:"web",utm_source:this.props.source||"subscribe-widget",utm_content:this.props.post&&this.props.post.id,just_signed_up:!0,requires_confirmation:R.body.requires_confirmation?"true":""},R.body.subscription_id&&{subscription_id:R.body.subscription_id}),{next:this.props.next||document.location.href})):document.location.reload()}getHref(R){const{pub:U,subscribeButtonAttrs:Z,isStatic:F,source:z,post:G,next:V}=this.props,k={utm_medium:F?"email":"web",utm_source:z||"subscribe-widget",utm_content:G&&G.id,next:V,referring_pub_ids:F?void 0:Object(l.getQueryItem)("referring_pub_ids")};return R?F?c.Substitutions.ACCOUNT_URL:Object(l.getPubAccountSettingsUrl)(U,{params:k}):Object(l.getSubscribeUrl)(U,f({addBase:!0,root:Z?Z.url:F&&c.Substitutions.CHECKOUT_URL},k))}getButtonLabel(R,U,{isPledged:Z,pledgesEnabled:F}){if(R||Z)return"Subscribed";const{pub:z,subscribeButtonAttrs:G}=this.props,V=G&&G.text;if(V&&!M.includes(V))return V;const k=U;return Object(h.getSubscribeText)(z,{now:!k,isFreeSubscribed:k,isPledged:Z,pledgesEnabled:F})}render({pub:R,user:U,freeSignup:Z,freeSignupEmail:F,source:z,isStatic:G,forceEmailInput:V,onPrepareData:k,onError:K},{loading:Y}){return Object(e.h)(v.a.Consumer,null,({getSettingFor:ee})=>Object(e.h)(g.a.Consumer,null,ae=>Object(e.h)(N,{pub:R,user:U,isStatic:G,freeSignup:Z,pledgesEnabled:R.payments_state==="disabled"&&!R.invite_only&&ee("payment_pledges_enabled")},({isFreeSubscribed:he,isSubscribed:me,isFullySubscribed:Ye,isPledged:se})=>{var ie;const Ee=this.getButtonLabel(me,he,{isPledged:se,pledgesEnabled:R.payments_state==="disabled"&&!R.invite_only&&ee("payment_pledges_enabled")}),Oe=he||me;return Object(e.h)("div",{className:o()("subscribe-widget",{"is-signed-up":Oe,"is-fully-subscribed":Ye})},!V&&(Oe||G)?Object(e.h)("p",{className:"button-wrapper"},G?Object(e.h)("a",{className:o()("button subscribe-btn",Ye?"outline":"primary"),href:this.getHref(Ye),native:!G},Ye&&Object(e.h)(b.default,{stroke:((ie=R==null?void 0:R.theme)==null?void 0:ie.background_pop_color)||(R==null?void 0:R.theme_var_background_pop)||u.substack_color,fill:"transparent",isStatic:!0,className:"check-icon static",height:20}),Object(e.h)("span",null,Ee)):Object(e.h)(i.a,{className:"subscribe-btn",href:this.getHref(Ye),localNavigation:!1,variant:Ye?"themed-secondary":"themed-primary",leftIcon:Ye?Object(e.h)(a.a,{size:20}):null},Object(e.h)("span",null,Ee))):Object(e.h)(d.a,{source:z||"subscribe-widget",user:U,pub:R,freeSignup:Z,freeSignupEmail:F,onPrepareData:k,onSuccess:ce=>this.onSignup(ce),onConfirmationRequired:(R==null?void 0:R.payments_state)==="enabled"?()=>null:void 0,onError:K,hideTerms:!0,hideLogin:!0,disabled:Oe||Y,submitButtonText:Oe?"\u2713":Object(h.getSubscribeText)(R),useSubscribeLink:ae==null?void 0:ae.isSubstack}))})))}}},,function($,n,t){var e=t(258),s=[t(259),t(668),t(669),t(260)],o=[];$.exports=e.createStore(s,o)},function($,n){var t=$.exports={},e,s;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=o}catch(i){e=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=a}catch(i){s=a}})();function c(i){if(e===setTimeout)return setTimeout(i,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(i,0);try{return e(i,0)}catch(d){try{return e.call(null,i,0)}catch(b){return e.call(this,i,0)}}}function l(i){if(s===clearTimeout)return clearTimeout(i);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(i);try{return s(i)}catch(d){try{return s.call(null,i)}catch(b){return s.call(this,i)}}}var p=[],h=!1,m,g=-1;function v(){!h||!m||(h=!1,m.length?p=m.concat(p):g=-1,p.length&&O())}function O(){if(!h){var i=c(v);h=!0;for(var d=p.length;d;){for(m=p,p=[];++g<d;)m&&m[g].run();g=-1,d=p.length}m=null,h=!1,l(i)}}t.nextTick=function(i){var d=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)d[b-1]=arguments[b];p.push(new u(i,d)),p.length===1&&!h&&c(O)};function u(i,d){this.fun=i,this.array=d}u.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function r(){}t.on=r,t.addListener=r,t.once=r,t.off=r,t.removeListener=r,t.removeAllListeners=r,t.emit=r,t.prependListener=r,t.prependOnceListener=r,t.listeners=function(i){return[]},t.binding=function(i){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(i){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function($,n,t){"use strict";t.d(n,"c",function(){return y}),t.d(n,"b",function(){return R}),t.d(n,"a",function(){return U});var e=t(0),s=t(196),o=t(3),a=t.n(o),c=t(9),l=t.n(c),p=t(38),h=t(21),m=t(14),g=t(4),v=t(201),O=t(10),u=t(124),r=t(71),i=t(22),d=t(74),b=t(298),w=t(93),E=Object.defineProperty,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,W=(Z,F,z)=>F in Z?E(Z,F,{enumerable:!0,configurable:!0,writable:!0,value:z}):Z[F]=z,B=(Z,F)=>{for(var z in F||(F={}))P.call(F,z)&&W(Z,z,F[z]);if(S)for(var z of S(F))D.call(F,z)&&W(Z,z,F[z]);return Z},f=(Z,F)=>{var z={};for(var G in Z)P.call(Z,G)&&F.indexOf(G)<0&&(z[G]=Z[G]);if(Z!=null&&S)for(var G of S(Z))F.indexOf(G)<0&&D.call(Z,G)&&(z[G]=Z[G]);return z};const y=Z=>{var F=Z,{publication_id:z,utmSource:G}=F,V=f(F,["publication_id","utmSource"]);const{result:k,refetch:K}=Object(h.f)({pathname:`/api/v1/publication/public/${z}`,auto:!1,deps:[z]}),Y=Object(p.c)();return Object(e.h)(v.a,B({className:w.a.publicationHoverCardTarget,content:k?Object(e.h)(M,{result:k,user:Y,utmSource:G}):Object(e.h)(C,null),onFetch:K,layerClassName:w.a.publicationHoverCard},V))};function M({result:Z,user:F,utmSource:z}){let G=Z==null?void 0:Z.pub.contributors,V=null;G&&G.length>3&&(V=`See all (${Object(c.numberToString)(G.length)})`,G=G.slice(0,3));const k=`${Z.pub.base_url}?utm_source=${z}`;return Object(e.h)(g.b,null,Object(e.h)(g.c,{padding:8},Object(e.h)("a",{href:k},Object(e.h)(d.a,{pub:Z.pub,size:56}))),Object(e.h)(g.b,{padding:8,gap:6},Object(e.h)(R,{title:Z.pub.name,blurb:Z.pub.hero_text,url:Z.pub.base_url}),Z.pub.rankingDetail&&Object(e.h)(O.b,{font:"meta",color:"secondary",size:12,weight:"medium",lineHeight:20},Z.pub.rankingDetail.toUpperCase())),Object(e.h)(g.b,{padding:8},Object(e.h)(N,{isContr:Z.isContributor,isSubs:Z.isSubscribed,pub:Z.pub,user:F,dashboardUrl:Z.pub.base_url,utmSource:z})),Object(e.h)(g.c,{padding:8},Object(e.h)("div",{className:w.a.hoverCardDivider})),Object(e.h)(g.b,null,Object(e.h)(A,{contributors:G,seeAllLabel:V,redirLink:Z.pub.base_url,utmSource:z})))}function N({isContr:Z,isSubs:F,pub:z,user:G,dashboardUrl:V,utmSource:k}){const K=Object(b.i)("profile");return Object(e.h)(g.b,null,Z?Object(e.h)(e.Fragment,null,Object(e.h)(m.a,{priority:"secondary",fill:"outline",href:`${V}/publish`},"Dashboard")):F?Object(e.h)(m.a,{priority:"secondary",fill:"outline",href:Object(o.getSubscribeUrl)(z,{user:G,addBase:!0,utm_source:k||"pub_hover_card",utm_medium:"web",utm_campaign:"profile_page"}),leftIcon:Object(e.h)(s.a,null)},"Subscribed"):Object(e.h)(m.a,{priority:"primary",href:Object(o.getSubscribeUrl)(z,{user:G,addBase:!0,utm_source:k|"pub_hover_card",utm_medium:"web",utm_campaign:"profile_page"}),onClick:K(z)},"Subscribe"))}function A({contributors:Z,seeAllLabel:F,redirLink:z,utmSource:G}){return Object(e.h)(g.b,null,Object(e.h)(U,{sectionTitle:"Written by",seeAllLabel:F,link:`${z}/about?sort=people`}),Object(e.h)(g.b,null,Z.map(V=>Object(e.h)(L,{profile:V,utmSource:G}))))}function L({profile:Z,utmSource:F}){return Object(e.h)("a",{href:Object(o.getProfileUrlById)(Z.user_id,Z.name,{searchParams:{utm_source:F}}),className:w.a.hoverCardAvatar},Object(e.h)(r.a,{user:Z,size:32}),Object(e.h)(O.b,{font:"text",weight:"semibold",size:14,lineHeight:20},Z.name))}function C(){return Object(e.h)(g.b,{padding:8,gap:8},Object(e.h)(i.A,{size:56,style:{borderRadius:4}}),Object(e.h)(i.A,{type:"bar",width:"100%",height:20}),Object(e.h)(i.A,{type:"bar",width:"20%",height:20}),Object(e.h)(i.A,{type:"bar",width:"60%",height:20}))}function R({title:Z,blurb:F,url:z,themed:G,bestsellerTier:V,userId:k}){return Object(e.h)(e.Fragment,null,Object(e.h)("a",{style:{textDecoration:"none"},href:z},Object(e.h)(O.b,{color:G?"pub-primary-text":"primary",weight:"bold",font:"display",className:w.a.hoverCardTitle,size:24,lineHeight:30},Z,!!V&&!!k&&Object(e.h)("span",{style:{whiteSpace:"nowrap",position:"relative",top:2,left:2}},"\xA0",Object(e.h)(u.a,{inline:!0,tier:V,userId:k,tooltipOnHover:!0,size:"md"})))),Object(e.h)("div",{className:w.a.hoverCardClamp},Object(e.h)(O.b,{font:"text",color:G?"pub-secondary-text":"secondary",size:16,lineHeight:24,weight:"normal"},F)))}function U({sectionTitle:Z,seeAllLabel:F,link:z}){return Object(e.h)(g.c,{padding:8,justifyContent:"space-between"},Object(e.h)(O.b,{font:"text",color:"primary",weight:"bold",size:16,lineHeight:20},Z),F&&Object(e.h)("a",{className:w.a.hoverCardSeeAll,href:z},Object(e.h)(O.b,{font:"text",color:"secondary",size:14,weight:"semibold",lineHeight:20},F)))}},function($,n,t){"use strict";var e=t(0),s=t(2),o=t(6),a=t.n(o),c=t(87),l=t.n(c),p=t(185),h=t.n(p),m=t(8),g=t.n(m),v=Object.defineProperty,O=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(E,S,P)=>S in E?v(E,S,{enumerable:!0,configurable:!0,writable:!0,value:P}):E[S]=P,d=(E,S)=>{for(var P in S||(S={}))u.call(S,P)&&i(E,P,S[P]);if(O)for(var P of O(S))r.call(S,P)&&i(E,P,S[P]);return E},b=(E,S,P)=>(i(E,typeof S!="symbol"?S+"":S,P),P);class w extends e.Component{constructor(S,P){super(S,P);b(this,"open",()=>{this.updateCoords(),this.createScrollListeners(),document.addEventListener("mouseup",this.onDocumentMouseUp),document.addEventListener("keydown",this.onDocumentKeyDown),this.props.onOpen&&this.props.onOpen()}),b(this,"close",()=>{this.removeScrollListeners(),document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("keydown",this.onDocumentKeyDown),this.props.onClose&&this.props.onClose()}),b(this,"onDocumentMouseUp",D=>{var W;!Object(m.isRootOrChild)(D.target,this.portalRef.current,((W=this.props.baseRef)==null?void 0:W.current)||this.props.baseRef)&&this.state.open&&(this.close(),this.setState({open:!1}))}),b(this,"onDocumentKeyDown",D=>{D.key==="Escape"&&this.state.open&&(this.close(),this.setState({open:!1}))}),this.onResize=l()(this.updateCoords.bind(this)),this.scrollListenersToRemove=[],this.state={coords:{},open:!1},this.portalRef=Object(e.createRef)()}toggle(){const S=!this.state.open;S?(this.removeScrollListeners(),this.open()):this.close(),this.setState({open:S})}updateCoords(){var S,P,D,W,B,f,y;const M=(W=(P=((S=this.props.baseRef)==null?void 0:S.current)||this.props.baseRef)==null?void 0:P.getBoundingClientRect)==null?void 0:W.call(((D=this.props.baseRef)==null?void 0:D.current)||this.props.baseRef);if(M){let N=0,A=((B=this.props.baseRef)==null?void 0:B.current)||this.props.baseRef;for(;A=A==null?void 0:A.parentElement;)N+=A.scrollTop;this.setState({coords:{left:M.x+(this.props.rightAlign?M.width:0)+(typeof window!="undefined"?window.scrollX:0)+(((f=this.props.offset)==null?void 0:f.x)||0),top:M.y+N+(((y=this.props.offset)==null?void 0:y.y)||0),width:M.width,height:M.height}})}}componentDidMount(){typeof window!="undefined"&&window.addEventListener("resize",this.onResize),this.updateCoords(),this.props.hoverToggle&&this.createMouseListeners()}createMouseListeners(){var S,P,D,W;(P=((S=this.props.baseRef)==null?void 0:S.current)||this.props.baseRef)==null||P.addEventListener("mouseenter",this.open),(W=((D=this.props.baseRef)==null?void 0:D.current)||this.props.baseRef)==null||W.addEventListener("mouseleave",this.close)}removeMouseListeners(){var S,P,D,W;(P=((S=this.props.baseRef)==null?void 0:S.current)||this.props.baseRef)==null||P.removeEventListener("mouseenter",this.open),(W=((D=this.props.baseRef)==null?void 0:D.current)||this.props.baseRef)==null||W.removeEventListener("mouseleave",this.close)}componentDidUnmount(){typeof window!="undefined"&&window.removeEventListener("resize",this.onResize),this.removeScrollListeners(),this.removeMouseListeners()}onScroll(S){var P,D;const W=S==null?void 0:S.getBoundingClientRect(),B=(D=((P=this.props.baseRef)==null?void 0:P.current)||this.props.baseRef)==null?void 0:D.getBoundingClientRect();if(!W||!B)return;const f=({x:L,y:C})=>N<=L&&L<=A&&y<=C&&C<=M,{top:y,bottom:M,left:N,right:A}=W;f({x:B.left,y:B.top})||f({x:B.right,y:B.top})||f({x:B.left,y:B.bottom})||f({x:B.right,y:B.bottom})?(this.updateCoords(),this.props.hoverToggle?this.createMouseListeners():this.state.open&&this.props.onOpen&&this.props.onOpen()):(this.removeMouseListeners(),this.props.onClose&&this.props.onClose())}removeScrollListeners(){this.scrollListenersToRemove.forEach(S=>S())}createScrollListeners(){this.scrollListenersToRemove=this.props.scrollContainers.map(S=>{const P=(S==null?void 0:S.current)||S,D=l()(()=>this.onScroll(P),10);return P==null||P.addEventListener("scroll",D),()=>P==null?void 0:P.removeEventListener("scroll",D)})}componentShouldUpdate(S,P){return!h()(this.props,S)||!h()(this.state,P)}componentDidUpdate(S){var P,D,W,B;!h()(S.scrollContainers,this.props.scrollContainers)&&this.scrollListenersToRemove.length>0&&(this.removeScrollListeners(),this.createScrollListeners()),h()(S.baseRef,this.props.baseRef)||((D=((P=S.baseRef)==null?void 0:P.current)||S.baseRef)==null||D.removeEventListener("mouseenter",this.open),(B=((W=S.baseRef)==null?void 0:W.current)||S.baseRef)==null||B.removeEventListener("mouseleave",this.close),this.props.hoverToggle&&this.createMouseListeners())}render({children:S,rootElement:P,className:D},{coords:W}){return typeof window=="undefined"?null:Object(s.createPortal)(Object(e.h)("div",{style:d({},W),className:a()("tooltip-portal",D),ref:this.portalRef},S),P||document.body)}}w.defaultProps={scrollContainers:[]},n.a=w},function($,n,t){"use strict";t.d(n,"b",function(){return L}),t.d(n,"a",function(){return Z}),t.d(n,"c",function(){return F}),t.d(n,"d",function(){return z});var e=t(0),s=t(11),o=t.n(s),a=t(33),c=t(59),l=t.n(c),p=t(3),h=t.n(p),m=t(9),g=t.n(m),v=t(68),O=t(7),u=t(83),r=t(153),i=t(17),d=t(148),b=t(302),w=t(44),E=t(166),S=t(154),P=Object.defineProperty,D=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,f=(V,k,K)=>k in V?P(V,k,{enumerable:!0,configurable:!0,writable:!0,value:K}):V[k]=K,y=(V,k)=>{for(var K in k||(k={}))W.call(k,K)&&f(V,K,k[K]);if(D)for(var K of D(k))B.call(k,K)&&f(V,K,k[K]);return V},M=(V,k)=>{var K={};for(var Y in V)W.call(V,Y)&&k.indexOf(Y)<0&&(K[Y]=V[Y]);if(V!=null&&D)for(var Y of D(V))k.indexOf(Y)<0&&B.call(V,Y)&&(K[Y]=V[Y]);return K},N=(V,k,K)=>(f(V,typeof k!="symbol"?k+"":k,K),K),A=(V,k,K)=>new Promise((Y,ee)=>{var ae=Ye=>{try{me(K.next(Ye))}catch(se){ee(se)}},he=Ye=>{try{me(K.throw(Ye))}catch(se){ee(se)}},me=Ye=>Ye.done?Y(Ye.value):Promise.resolve(Ye.value).then(ae,he);me((K=K.apply(V,k)).next())});const L=({className:V=null,title:k,subtitle:K=null,reauthenticationTitle:Y,publication:ee,post:ae,user:he,freeSignup:me=null,freeSignupEmail:Ye=null,email_form:se=!1,autoFocus:ie=!1,isStatic:Ee=!1,coupon:Oe=null})=>{const ce=he&&he.email||Ye||null,ue=Boolean((he==null?void 0:he.is_subscribed)&&(he==null?void 0:he.is_magic)),pe=Boolean((ae==null?void 0:ae.audience)==="founding"),$e=Boolean((he==null?void 0:he.is_free_subscribed)||me),ne=Object(p.getPostUrl)(ee,ae),X=Oe&&Oe.id&&!pe;let q;X?(ae==null?void 0:ae.type)==="podcast"?q="Listen to this episode with a 7-day free trial":(ae==null?void 0:ae.type)==="video"?q="Watch with a 7-day free trial":q=`Keep ${Object(m.getPostCtaPresentParticiple)(ae==null?void 0:ae.type)} with a 7-day free trial`:ue?q=Y:q=k;let Ne;return X&&((ae==null?void 0:ae.type)==="podcast"?Ne="listen to this episode":(ae==null?void 0:ae.type)==="video"?Ne="watch this video":Ne=`keep ${Object(m.getPostCtaPresentParticiple)(ae==null?void 0:ae.type)} this ${Object(m.getPrintedPostType)(ae==null?void 0:ae.type)}`),Object(e.h)("div",{className:`paywall ${V||""}`,"data-testid":"paywall"},ce&&Object(e.h)("div",{className:"paywall-intro"},"Hi ",Object(e.h)("b",null,ce)),Object(e.h)("h2",{className:"paywall-title"},q),K&&!X&&Object(e.h)("p",{className:"paywall-subtitle"},K),X&&Object(e.h)("div",{className:"paywall-free-trial-subtitle"},Object(e.h)("p",{className:"paywall-subtitle"},"Subscribe to"," ",Object(e.h)("b",null,Object(e.h)("i",null,ee.name))," ","to ",Ne," and get 7 days of free access to the full post archives.")),se?!$e&&Object(e.h)("div",{className:"paywall-cta"},Object(e.h)(d.a,{source:"post-unlock",email:ce,user:he,pub:ee,freeSignup:me,freeSignupEmail:Ye,onSuccess:()=>document.location.reload(),hideLogin:!0,hideTerms:!0,autoFocus:ie!=null?ie:!0,submitButtonText:`Start ${Object(m.getPostCtaPresentParticiple)(ae==null?void 0:ae.type,{isFinalWord:!0})}`})):Object(e.h)(C,{coupon:Oe,email:ce,isStatic:Ee,post:ae,postUrl:ne,publication:ee,useCoupon:X,user:he}),!ue&&!Ee&&Object(e.h)("div",{className:"paywall-login"},Object(e.h)("a",{href:Object(p.getSigninUrl)({for_pub:ee.subdomain,change_user:!!ce}),native:!0},G({post:ae,publication:ee,isPaid:!se})," ",Object(e.h)("b",null,ce?"Switch accounts":"Sign in"))))},C=({coupon:V,email:k,isStatic:K,post:Y,postUrl:ee,publication:ae,useCoupon:he,user:me})=>{const Ye=Boolean(me==null?void 0:me.is_founding),se=Boolean(me==null?void 0:me.is_subscribed),ie=Boolean((me==null?void 0:me.is_subscribed)&&(me==null?void 0:me.is_magic)),Ee=(Y==null?void 0:Y.audience)==="founding",{exposeExperiment:Oe,getExperimentVariant:ce}=Object(v.d)(),ue=ce("autosubscribe_from_paywall")==="treatment";if(K){if(!ae.plans)return null;const pe=Ee?a.Substitutions.FOUNDING_CHECKOUT_URL:a.Substitutions.CHECKOUT_URL,$e=he?`&coupon=${V.id}`:"",ne=Ee?`Upgrade to ${Object(c.getFoundingTierName)(ae)}`:he?"Start trial":Object(e.h)(E.a,{pub:ae,user:me,isStatic:K});return Object(e.h)(R,{href:`${pe}simple=true&utm_source=paywall&utm_medium=email&utm_content=${Y.id}&next=${ee}${$e}`},ne)}return!Ye&&Ee?ae.plans?Object(e.h)(U,{href:Object(p.getCheckoutUrl)(ae,{simple:!0,next:document.location.href,utm_source:"paywall",utm_medium:"web",utm_content:Y?Y.id:null,plan:"founding"})},`Upgrade to ${Object(c.getFoundingTierName)(ae)}`):null:se?ie?Object(e.h)(U,{href:Object(p.getSigninUrl)({for_pub:ae.subdomain,email:k})},"Click here to sign in"):null:ae.plans?(me==null?void 0:me.email)&&!he?Object(e.h)(U,{onClick:()=>A(void 0,null,function*(){if(yield Oe("autosubscribe_from_paywall"),ue)try{yield o.a.post("/api/v1/free").send({source:"paywall",email:k,first_url:u.d,first_referrer:u.c,current_url:u.b,current_referrer:u.a})}catch(pe){Object(O.i)(O.a.PAYWALL_FREE_SIGNUP_FAILED,{reason:pe.message})}window.location.href=Object(p.getCheckoutUrl)(ae,{simple:!0,next:document.location.href,utm_source:"paywall",utm_medium:K?"email":"web",utm_content:Y?Y.id:null,just_signed_up:ue})})},Object(e.h)(E.a,{pub:ae,user:me,isStatic:K})):Object(e.h)(U,{href:Object(p.getCheckoutUrl)(ae,{simple:!0,next:document.location.href,utm_source:he?"paywall-free-trial":"paywall",utm_medium:K?"email":"web",utm_content:Y?Y.id:null,coupon:he?V.id:null})},he?"Start trial":Object(e.h)(E.a,{pub:ae,user:me,isStatic:K})):null},R=({children:V,href:k})=>Object(e.h)("div",{className:"paywall-cta"},Object(e.h)("a",{className:"button primary subscribe-btn",href:k},Object(e.h)("span",null,V))),U=({children:V,href:k,onClick:K})=>Object(e.h)("div",{className:"paywall-cta"},Object(e.h)("a",{href:k,onClick:K,native:!0},Object(e.h)(i.b,{className:"subscribe-btn"},V)));class Z extends w.a{renderChildren(){const k=this.props,{ref:K}=k,Y=M(k,["ref"]);return Object(e.h)(L,y({className:"modal-paywall"},Y))}}class F extends r.a{renderButtons({pub:k,post:K,isStatic:Y,paywallAudience:ee}){return Object(e.h)("div",{className:"audio-player-buttons audio-player-paywall"},Object(e.h)("a",{className:"primary",href:Object(p.getCheckoutUrl)(k,{simple:!0,next:document.location.href,utm_source:"paywall",utm_medium:"web",utm_content:K?K.id:null}),native:!0},Object(e.h)(i.b,null,Object(e.h)(b.default,{alt:"play",isStatic:Y,stroke:"#000000",fill:"#000000"}),`This episode is for ${ee!=null?ee:"paid subscribers"}`)))}}class z extends S.a{constructor(){super(...arguments);N(this,"playbackEnabled",()=>this.props.mediaUpload.preview_duration>0),N(this,"cta",()=>this.playbackEnabled()&&!this.state.allSourcesFailed&&!this.state.hasReachedEnd?"":this.playbackEnabled()?"Subscribe for full video":"Subscribe and watch"),N(this,"href",()=>{var k;return this.playbackEnabled()&&!this.state.allSourcesFailed&&!this.state.hasReachedEnd?this.props.href:this.props.href||Object(p.getCheckoutUrl)(this.props.pub,{simple:!0,next:document.location.href,utm_source:"paywall",utm_medium:"web",utm_content:(k=this.props.post)==null?void 0:k.id})})}}function G({post:V,publication:k,isPaid:K=!0}={}){var Y;return K?(V==null?void 0:V.audience)==="founding"?`Already in the ${(Y=Object(c.getFoundingTierName)(k))!=null?Y:"Founding Member"} plan?`:"Already a paid subscriber?":"Already a subscriber?"}},function($,n,t){var e=t(301),s=t(234);function o(a){return a!=null&&s(a.length)&&!e(a)}$.exports=o},function($,n,t){var e=t(486),s=t(487),o=t(488),a=t(489),c=t(490);function l(p){var h=-1,m=p==null?0:p.length;for(this.clear();++h<m;){var g=p[h];this.set(g[0],g[1])}}l.prototype.clear=e,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=c,$.exports=l},function($,n,t){var e=t(215);function s(o,a){for(var c=o.length;c--;)if(e(o[c][0],a))return c;return-1}$.exports=s},function($,n,t){var e=t(114),s=e(Object,"create");$.exports=s},function($,n,t){var e=t(510);function s(o,a){var c=o.__data__;return e(a)?c[typeof a=="string"?"string":"hash"]:c.map}$.exports=s},function($,n,t){"use strict";t.d(n,"a",function(){return O});var e=t(0),s=t(6),o=t.n(s),a={circularLoader:"frontend-pencraft-Loader-module__circularLoader--F9L-K",rotate:"frontend-pencraft-Loader-module__rotate--2B5sD",size_sm:"frontend-pencraft-Loader-module__size_sm--3FowA",size_md:"frontend-pencraft-Loader-module__size_md--1hR4s",size_lg:"frontend-pencraft-Loader-module__size_lg--2wXI8"},c=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?c(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const O=r=>{var i=r,{type:d="circular"}=i,b=v(i,["type"]);if(d==="circular")return Object(e.h)(u,g({},b));throw new Error("not implemented")},u=({className:r,size:i="md",dataTestId:d})=>Object(e.h)("div",{"data-testid":d,className:o()(a.circularLoader,a[`size_${i}`],r)})},function($,n,t){"use strict";t.d(n,"c",function(){return Ze}),t.d(n,"b",function(){return tt}),t.d(n,"a",function(){return je}),t.d(n,"d",function(){return Le});var e=t(0),s=t(1),o=t(18),a=t(6),c=t.n(a),l=t(87),p=t.n(l),h=t(229),m=t(806),g=t(804),v=t(811),O=t(182),u=t(591),r=t.n(u);function i(de){return r()(de).length}var d=t(549),b=t(16),w=t(38),E=t(347),S=t(51),P=t(21),D=t(8),W=t(14),B=t(4),f=t(36),y=t(10),M=t(26),N=t(71),A=t(184),L=t(141),C=Object.defineProperty,R=Object.defineProperties,U=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,G=(de,be,Ie)=>be in de?C(de,be,{enumerable:!0,configurable:!0,writable:!0,value:Ie}):de[be]=Ie,V=(de,be)=>{for(var Ie in be||(be={}))F.call(be,Ie)&&G(de,Ie,be[Ie]);if(Z)for(var Ie of Z(be))z.call(be,Ie)&&G(de,Ie,be[Ie]);return de},k=(de,be)=>R(de,U(be));function K(de){return Object(e.h)(L.a,k(V({},de),{module:"./TextEditor",resolve:be=>be.TextEditor,onRequest:()=>Promise.all([t.e(17),t.e(18)]).then(t.bind(null,1735))}))}var Y=t(49),ee={avatarLink:"frontend-reader2-NewPost-module__avatarLink--4qABb",inlineComposer:"frontend-reader2-NewPost-module__inlineComposer--3_sDn",disabled:"frontend-reader2-NewPost-module__disabled--1A0mF",mobile:"frontend-reader2-NewPost-module__mobile--1n9Yo",floatingComposer:"frontend-reader2-NewPost-module__floatingComposer--1uxci",inputSpacer:"frontend-reader2-NewPost-module__inputSpacer--18hF8",wordCountIndicator:"frontend-reader2-NewPost-module__wordCountIndicator--1el0e",exceded:"frontend-reader2-NewPost-module__exceded--2a2wM",composerModal:"frontend-reader2-NewPost-module__composerModal--3hSk_",footerMeta:"frontend-reader2-NewPost-module__footerMeta--1WFr_",modalColumn:"frontend-reader2-NewPost-module__modalColumn--1BJMP",cta:"frontend-reader2-NewPost-module__cta--1E49Q",dropdownIcon:"frontend-reader2-NewPost-module__dropdownIcon--2OZFn",dropdownMenu:"frontend-reader2-NewPost-module__dropdownMenu--1H1uH",pubRow:"frontend-reader2-NewPost-module__pubRow--lNUy_",pubName:"frontend-reader2-NewPost-module__pubName--Te-mW",linkImage:"frontend-reader2-NewPost-module__linkImage--mf4aS",imageContainer:"frontend-reader2-NewPost-module__imageContainer--3983l",attachmentContainer:"frontend-reader2-NewPost-module__attachmentContainer--rE8YF",removeImage:"frontend-reader2-NewPost-module__removeImage--31VQW",removeAttachment:"frontend-reader2-NewPost-module__removeAttachment--3MxzN"},ae=Object.defineProperty,he=Object.defineProperties,me=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,Ee=(de,be,Ie)=>be in de?ae(de,be,{enumerable:!0,configurable:!0,writable:!0,value:Ie}):de[be]=Ie,Oe=(de,be)=>{for(var Ie in be||(be={}))se.call(be,Ie)&&Ee(de,Ie,be[Ie]);if(Ye)for(var Ie of Ye(be))ie.call(be,Ie)&&Ee(de,Ie,be[Ie]);return de},ce=(de,be)=>he(de,me(be)),ue=(de,be)=>{var Ie={};for(var ke in de)se.call(de,ke)&&be.indexOf(ke)<0&&(Ie[ke]=de[ke]);if(de!=null&&Ye)for(var ke of Ye(de))be.indexOf(ke)<0&&ie.call(de,ke)&&(Ie[ke]=de[ke]);return Ie},pe=(de,be,Ie)=>new Promise((ke,Te)=>{var x=Ce=>{try{le(Ie.next(Ce))}catch(Ue){Te(Ue)}},H=Ce=>{try{le(Ie.throw(Ce))}catch(Ue){Te(Ue)}},le=Ce=>Ce.done?ke(Ce.value):Promise.resolve(Ce.value).then(x,H);le((Ie=Ie.apply(de,be)).next())});const $e="unsent_composer_content_v3",ne=10,X={content:null,attachments:[]};function q({editComment:de}={}){const be=Object(P.f)({pathname:de?`/api/v1/feed/comment/${de.id}`:"/api/v1/comment/feed"});return{create:Ie=>pe(this,[Ie],function*({bodyJson:ke,parentPostId:Te,parentPubId:x,parent_id:H,attachmentIds:le}){return yield be.refetch({pathname:de?`/api/v1/feed/comment/${de.id}`:Te?`/api/v1/post/${Te}/comment`:"/api/v1/comment/feed",method:de?"PATCH":"POST",json:{bodyJson:ke,parent_id:H,publication_id:x,attachmentIds:le}})}),error:be.error,isLoading:be.isLoading}}function Ne({onSuccess:de,onError:be,onClose:Ie,editComment:ke,restackUrl:Te,parentPostId:x,parentPubId:H,parentCommentId:le}){var Ce,Ue,Ve,bt,yt,Qt,tn;const Kn=Object(w.c)(),Ot={postId:(Ce=ke==null?void 0:ke.post_id)!=null?Ce:x,commentId:(Ue=ke==null?void 0:ke.id)!=null?Ue:le},lt=ke?X:rt(Ot),[Be,_e]=Object(s.k)((bt=(Ve=ke==null?void 0:ke.body_json)!=null?Ve:(ke==null?void 0:ke.body)?Object(o.generateJSON)(ke.body,O.a):null)!=null?bt:lt.content),Ae=Be?Object(o.generateText)(Be,O.a):"",[fe,ft]=Object(s.k)(((yt=ke==null?void 0:ke.attachments)!=null?yt:lt.attachments).filter(Gt=>Gt.type==="image").map(Gt=>{const mn={url:Gt.imageUrl,attachment:Gt};return mn.promise=Promise.resolve(mn),mn})),[nt,ct]=Object(s.k)(!1),Xe=Object(s.a)(Gt=>{_e(Gt)},[Ot.postId,Ot.commentId]),gt=4200,Tt=i(Ae),Ut=Tt>gt,qt=Gt=>{const mn=Gt.filter(Cn=>Cn.type.startsWith("image/"));if((mn==null?void 0:mn.length)>0){const Cn=[...mn].map(tr=>{const Zn={file:tr,url:URL.createObjectURL(tr)};return Zn.promise=Object(D.getDataUrlFromFile)(tr).then(At=>pe(this,null,function*(){const Xt=yield Object(P.c)("/api/v1/image",{method:"POST",json:{image:At}}),en=yield Object(P.c)("/api/v1/comment/attachment",{method:"POST",json:{url:Xt.url,type:"image"}});return ce(Oe({},Zn),{attachment:en})})).catch(At=>ce(Oe({},Zn),{error:At})).then(At=>(ft(Xt=>Xt.map(en=>en===Zn?At:en)),At)),Zn});ft(tr=>[...tr,...Cn])}},sn=Gt=>{if(nt)return;const{files:mn}=Gt.currentTarget;qt(Array.from(mn))},_n=Gt=>{ft(mn=>mn.filter(Cn=>Cn!==Gt))},Hn=((Qt=ke==null?void 0:ke.attachments)!=null?Qt:lt.attachments).find(Gt=>Gt.type!=="missing"&&Gt.type!=="image"),wn=Te!=null?Te:(tn=Object(d.parseLastValidLink)(Ae))==null?void 0:tn.href,Un=Object(P.f)({pathname:"/api/v1/comment/attachment",method:"POST",initialResult:Hn,deps:[]}),bn=Object(s.h)(()=>{let Gt=null,mn=Hn?Promise.resolve(Hn):null;return Cn=>(Cn!==Gt&&(Gt=Cn,Cn&&(mn=Un.refetch({json:{url:Cn,type:"link"}}))),mn)},[]),cr=Object(s.h)(()=>p()(bn,500),[bn]);Object(s.d)(()=>{cr(wn!=null?wn:null)},[wn]);const fr=Un.result;Object(s.d)(()=>{const Gt=[];for(const mn of fe)mn.attachment&&Gt.push(mn.attachment);fr&&Gt.push(fr),Pe({content:Be,attachments:Gt},Ot)},[Be,fe,fr]);const ur=Object(M.e)(),{create:er,isLoading:jr,error:wt}=q({editComment:ke}),mt=le||x,Fe=nt||Ut||jr||!(Ae||fe.length>0||fr),pt=()=>pe(this,null,function*(){if(Fe)return;ct(!0);const Gt=!Un.result&&!Un.isLoading?null:yield bn(wn!=null?wn:null),mn=Gt instanceof Error?null:Gt,Cn=yield Promise.all(fe.map(At=>At.promise)),tr=[];for(const At of Cn)if(At){const{attachment:Xt}=At;Xt&&Xt.type!=="missing"&&tr.push(Xt.id)}mn&&mn.type!=="missing"&&tr.push(mn.id);const Zn=yield er({bodyJson:Be,parentPostId:x,parentPubId:H,parent_id:le,attachmentIds:tr.length>0?tr:void 0});Zn instanceof Error?(ur.popToast(At=>Object(e.h)(M.c,ce(Oe({},At),{text:"Failed to share"}))),console.error(Zn),be&&be(Zn)):(Pe(null,Ot),ur.popToast(At=>Object(e.h)(M.c,ce(Oe({},At),{text:ke?"Note edited":`${mt?"Reply":Te?"Restack":"Note"} sent`,cta:"View",href:mt?Object(b.getFeedCommentUrl)(Zn.id):Object(b.getFeedUrl)()}))),de(Zn)),ct(!1)}),Dt=Gt=>{Gt.preventDefault(),pt()},Jt=Gt=>{Gt.stopPropagation(),Ie()};return Kn?Object(e.h)(Ft,{onClose:Jt,title:ke?"Edit":mt?"Reply":Te?"Restack":"New note",postLabel:ke?"Done":"Send",onSubmit:Dt,disabled:Fe,onImageChange:sn},Object(e.h)(B.b,{flex:"grow"},Object(e.h)(B.a,{gap:12},Object(e.h)(N.a,{size:48,user:Kn}),Object(e.h)(K,{defaultValue:Be,placeholder:"Start writing...",onChange:Xe,onReturn:pt,onAddFiles:qt,disabled:nt})),Object(e.h)(B.c,{gap:8,wrap:"wrap"},fe.map(Gt=>Object(e.h)(B.a,{className:ee.imageContainer,key:Gt.url},Object(e.h)("img",{className:ee.image,src:Gt.url}),Object(e.h)(W.c,{className:ee.removeImage,size:32,priority:"media",onClick:()=>_n(Gt)},Object(e.h)(h.a,{size:20})))))),(Ut||wt)&&Object(e.h)(B.c,{className:ee.footerMeta,direction:"row-reverse",justifyContent:"space-between"},Ut&&Object(e.h)(y.b.Meta,{color:Ut?"error":void 0},gt-Tt),wt&&Object(e.h)(y.b.B4,{weight:"medium",color:"error"},Object(D.getNetworkErrorMessage)(wt))),(fr||Un.isLoading)&&Object(e.h)(B.b,{className:ee.attachmentContainer},fr?Object(e.h)(e.Fragment,null,Object(e.h)(E.a,{attachments:[fr],readOnly:!0}),Object(e.h)(W.c,{className:ee.removeImage,size:32,priority:"media",onClick:()=>Un.setResult(null)},Object(e.h)(h.a,{size:20}))):Object(e.h)(E.a,{attachments:[{id:"",type:"link",linkMetadata:{title:" ",description:" ",host:" "}}],readOnly:!0}))):null}function Qe(de){var be=de,{isOpen:Ie}=be,ke=ue(be,["isOpen"]);return Object(e.h)(f.a,{className:ee.composerModal,isOpen:Ie,onClose:ke.onClose,fullscreenMobile:!0},Object(e.h)(Ne,Oe({},ke)))}function Ze({disabled:de,parentPubId:be,parentPostId:Ie,parentCommentId:ke,placeholder:Te}){var x;const H=Le(),le=Object(w.c)(),Ce=Object(Y.b)(),Ue=()=>{de||H.open({parentPubId:be,parentPostId:Ie,parentCommentId:ke})};return((x=le==null?void 0:le.dashboard_pubs)==null?void 0:x.length)?Object(e.h)(B.b,null,Object(e.h)(B.c,{gap:12,alignItems:"center",className:c()({[ee.disabled]:de})},le&&Object(e.h)(B.a,{as:"a",flex:"auto",href:Object(b.getReaderProfileUrl)(le,{noBase:!0})},Object(e.h)(N.a,{size:Ce?40:48,user:le})),Object(e.h)(W.d,{className:c()(ee.inlineComposer,{[ee.mobile]:Ce}),onClick:Ue,disabled:de,resetCss:!0},Object(e.h)(y.b.B3,{size:Ce?14:16,align:"left",color:"secondary"},!de&&Te?Te:"Write a note...")),!Ce&&Object(e.h)(W.a,{disabled:!0,rounded:!0},"Send"))):null}function tt(){var de;const be=Le(),Ie=Object(w.c)(),ke=()=>{be.open({})};return((de=Ie==null?void 0:Ie.dashboard_pubs)==null?void 0:de.length)?Object(e.h)(W.c,{className:ee.floatingComposer,priority:"primary",fill:"filled",size:56,onClick:ke,shadow:"medium"},Object(e.h)(m.a,{size:24})):null}function Ft({title:de,postLabel:be,disabled:Ie,onImageChange:ke,onSubmit:Te,onClose:x,children:H}){const le=Object(Y.b)();return Object(e.h)(B.b,{className:ee.modalColumn},Object(e.h)(B.c,{borderBottom:"detail",alignItems:"center",paddingY:12,paddingX:16,justifyContent:"space-between"},Object(e.h)(B.a,{alignItems:"center",gap:8},le&&Object(e.h)(W.c,{size:40,"aria-label":"Back",onClick:x},Object(e.h)(g.a,{size:20})),Object(e.h)(y.b.H3,null,de)),le?Object(e.h)(W.a,{rounded:!0,disabled:Ie,onClick:Te},"Post"):Object(e.h)(W.c,{size:40,"aria-label":"Close",onClick:x},Object(e.h)(h.a,{size:20,"aria-hidden":"true"}))),Object(e.h)(B.b,{padding:16,flex:"grow",gap:12},H),le?Object(e.h)(B.b,{paddingX:16,flex:"grow"},Object(e.h)(B.c,{alignItems:"start",justifyContent:"start",paddingX:4,paddingY:12,style:{height:350},borderTop:"detail"},ke&&Object(e.h)(Lt,{onChange:ke}))):Object(e.h)(B.c,{borderTop:"detail",padding:16,justifyContent:"space-between"},ke&&Object(e.h)(Lt,{onChange:ke}),Object(e.h)(W.a,{className:ee.cta,disabled:Ie,onClick:Te},be)))}function Lt({onChange:de}){const be=Object(s.j)(),Ie=()=>{var Te;(Te=be.current)==null||Te.click()},ke=Te=>{de(Te),be.current.value=""};return Object(e.h)(W.c,{onClick:Ie},Object(e.h)(v.a,{size:20}),Object(e.h)("input",{type:"file",accept:"image/*",multiple:!0,onChange:ke,ref:be,style:{display:"none"}}))}const rn={isOpen:!1},ht=Object(e.createContext)({state:rn,open:()=>pe(void 0,null,function*(){throw new Error("Not implemented")})});function je({children:de}){const be=Object(A.e)(),[Ie,ke]=Object(s.k)(rn),Te=Object(s.h)(()=>({state:Ie,open:H=>new Promise((le,Ce)=>{ke(ce(Oe({},H),{isOpen:!0,resolve:le,reject:Ce}))})}),[Ie]),x=()=>{var H,le;(le=(H=document.activeElement)==null?void 0:H.blur)==null||le.call(H),ke({isOpen:!1})};return Object(e.h)(ht.Provider,{value:Te},de,Object(e.h)(Qe,ce(Oe({},Ie),{onClose:x,onSuccess:H=>{var le,Ce;x(),be({type:Ie.editComment?"edit_comment":"new_comment",payload:{comment:H}}),(le=Ie.onCompose)==null||le.call(Ie,H),(Ce=Ie.resolve)==null||Ce.call(Ie,H)},onError:Ie.reject})))}function Le(){return Object(s.b)(ht)}function rt({postId:de,commentId:be}={}){var Ie,ke,Te;const x=be?`c:${be}`:de?`p:${de}`:"default";return(Te=(ke=((Ie=Object(S.getStoredValue)($e))!=null?Ie:[]).find(([le])=>le===x))==null?void 0:ke[1])!=null?Te:X}function Pe(de,{postId:be,commentId:Ie}={}){var ke;const Te=Ie?`c:${Ie}`:be?`p:${be}`:"default",x=(ke=Object(S.getStoredValue)($e))!=null?ke:[],H=x.findIndex(([le])=>le===Te);H>=0&&x.splice(H,1),de&&(x.unshift([Te,de]),x.splice(ne)),Object(S.setStoredValue)($e,x)}},function($,n){function t(e){return e}$.exports=t},function($,n,t){"use strict";t.d(n,"a",function(){return u});var e=t(0),s=t(6),o=t.n(s),a=t(4),c={container:"frontend-reader2-DrunkSpinner-module__container--2ZTeC",drunkSpinner:"frontend-reader2-DrunkSpinner-module__drunkSpinner--gxqKi",drunkSpin:"frontend-reader2-DrunkSpinner-module__drunkSpin--1a9jP"},l=Object.defineProperty,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?l(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>{var d={};for(var b in r)h.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&p)for(var b of p(r))i.indexOf(b)<0&&m.call(r,b)&&(d[b]=r[b]);return d};function u(r){var i=r,{className:d}=i,b=O(i,["className"]);return Object(e.h)(a.a,v({justifyContent:"center",alignItems:"center",className:o()(c.container,d)},b),Object(e.h)("div",{className:c.drunkSpinner}))}},function($,n,t){"use strict";var e=t(541),s=t(423),o=t(542),a=t(543),c=t(544),l=t(424),p=t(545),h=t(425),m=t(445),g=t(546),v=t(547),O=t(426),u=t(548),r=t(427),i=t(0),d=t(18),b=t(551),w=t(37),E=t(152),S=t(16),P=(A,L,C)=>new Promise((R,U)=>{var Z=G=>{try{z(C.next(G))}catch(V){U(V)}},F=G=>{try{z(C.throw(G))}catch(V){U(V)}},z=G=>G.done?R(G.value):Promise.resolve(G.value).then(Z,F);z((C=C.apply(A,L)).next())});const W=b.default.extend({name:"substack_mention",addAttributes(){return{id:f("id"),label:f("label"),mentionType:f("mentionType")}},renderHTML({node:A,HTMLAttributes:L}){return["substack-mention",Object(d.mergeAttributes)({class:"substack-mention","data-type":this.name},this.options.HTMLAttributes,L),this.options.renderLabel({options:this.options,node:A})]},addNodeView(){return Object(E.ReactNodeViewRenderer)(B)}}).configure({HTMLAttributes:{class:"substack-mention"},suggestion:{char:"@",pluginKey:new w.d("substack_mention"),decorationClass:"substack-mention",allowSpaces:!0,startOfLine:!1,items:A=>P(void 0,[A],function*({editor:L,query:C}){const{mentionsSearch:R}=t(236);return C.length<1?[]:yield R(C,{pathname:"/api/v1/reader/comments/mention"})}),render:()=>{const A=t(422),L=A.prototype.stopCallback;let C,R;const U=(Z,F=!1)=>({items:Z.items,query:Z.query,isLoading:F,selectItem:z=>z&&Z.command({id:z.id,label:z.name}),placeholderText:"Mention a person...",noResultsText:"No people found",minQueryLength:3});return{onStart:Z=>{const{AutocompleteResults:F}=t(643),z=t(247).default;C=new E.ReactRenderer(F,{props:U(Z),editor:Z.editor}),R=z("body",{getReferenceClientRect:Z.clientRect,appendTo:()=>document.getElementsByClassName("editor-scroll")[0]||document.body,content:C.element,popperOptions:{strategy:"absolute",modifiers:[{name:"preventOverflow",options:{altAxis:!0}}]},showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}),A.prototype.stopCallback=function(G,V,k){return k==="esc"?!0:L(G,V,k)}},onBeforeUpdate(Z){R&&R[0].show(),C&&C.updateProps(U(Z,!0)),!!Z.clientRect&&R&&R[0].setProps({getReferenceClientRect:Z.clientRect})},onUpdate(Z){C&&C.updateProps(U(Z,!1)),R&&R[0].setProps({getReferenceClientRect:Z.clientRect})},onKeyDown(Z){var F;return Z.event.key==="Escape"?(R&&R[0]&&R[0].destroy(),R=null,C&&C.destroy(),C=null,setTimeout(()=>{A.prototype.stopCallback=L},0),!0):(F=C==null?void 0:C.ref)==null?void 0:F.onKeyDown(Z)},onExit(Z){A.prototype.stopCallback=L,R&&R[0]&&R[0].destroy(),R=null,C&&C.destroy(),C=null}}}}});function B({node:{attrs:{id:A,label:L}}}){return Object(i.h)(E.NodeViewWrapper,{as:"a",href:Object(S.getProfileUrlById)(A,L),className:"substack-mention"},["@",L])}function f(A){return{default:null,parseHTML:L=>L.getAttribute(`data-${A}`),renderHTML:L=>L[A]?{[`data-${A}`]:L[A]}:{}}}const y=l.default.extend({addAttributes(){return{schemaVersion:{default:"v1"}}}}),M=[s.default,o.default,a.default,c.default,p.default,h.default,g.default,v.default,O.default,u.default,r.default,y,e.default,m.default.configure({openOnClick:!1,HTMLAttributes:{class:"note-link",rel:"nofollow ugc noopener",target:"_blank"}}),W];var N=n.a=M},function($,n,t){var e=t(598),s=t(638),o=t(639),a=t(580),c=o(function(l,p){if(l==null)return[];var h=p.length;return h>1&&a(l,p[0],p[1])?p=[]:h>2&&a(p[0],p[1],p[2])&&(p=[p[0]]),s(l,e(p,1),[])});$.exports=c},function($,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"e",function(){return d}),t.d(n,"c",function(){return b}),t.d(n,"b",function(){return w}),t.d(n,"f",function(){return E}),t.d(n,"d",function(){return S});var e=t(0),s=t(1),o=t(21),a=t(8),c=t.n(a),l=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(f,y,M)=>y in f?l(f,y,{enumerable:!0,configurable:!0,writable:!0,value:M}):f[y]=M,u=(f,y)=>{for(var M in y||(y={}))g.call(y,M)&&O(f,M,y[M]);if(m)for(var M of m(y))v.call(y,M)&&O(f,M,y[M]);return f},r=(f,y)=>p(f,h(y));const i=Object(e.createContext)({dispatch:()=>{}});function d(){return Object(s.b)(i).dispatch}const b={isSigningIn:!1,pages:[],posts:new Map,publications:new Map,comments:new Map},w=Object(e.createContext)(b);function E(){return Object(s.b)(w)}function S(f,y){var M,N,A,L;switch(y.type){case"sign_in":return r(u({},f),{lastDispatchType:y.type,isSigningIn:y.payload.isSigningIn});case"page_load":{const{result:C}=y.payload;return r(u({},f),{lastDispatchType:y.type,pages:Object(o.d)(f.pages,y),posts:new Map([...f.posts].concat(C.items.filter(R=>R.post).map(({post:R})=>[R.id,R])).concat(C.items.map(R=>{var U;return(U=R.comment)==null?void 0:U.attachments}).filter(Boolean).flatMap(R=>R.filter(U=>(U==null?void 0:U.type)==="post").map(U=>[U.post.id,U.post])))),publications:new Map([...f.publications].concat(C.items.filter(R=>R.publication).map(({publication:R})=>[R.id,R])).concat(C.items.map(R=>{var U;return(U=R.comment)==null?void 0:U.attachments}).filter(Boolean).flatMap(R=>R.filter(U=>(U==null?void 0:U.type)==="post").map(U=>[U.publication.id,U.publication])))),comments:new Map([...f.comments].concat(C.items.filter(R=>R.comment).map(({comment:R})=>[R.id,R])).concat(C.items.map(R=>R.parentComments||[]).flat().filter(Boolean).map(R=>[R.id,R])))})}case"post_load":{const{post:C,publication:R}=y.payload,U=new Map(f.posts);U.set(C.id,u(u({},U.get(C.id)),C));const Z=new Map(f.publications);return Z.set(R.id,u(u({},Z.get(R.id)),R)),r(u({},f),{posts:U})}case"post_like":{const{postId:C,isLiked:R}=y.payload,U=f.posts.get(C);return P(f,y.type,C,D(U,R))}case"post_restack":{const{postId:C,isRestacked:R}=y.payload,U=f.posts.get(C);return U?P(f,y.type,C,W(U,R)):f}case"post_delete":{const{post:C}=y.payload,R=new Map(f.posts);R.delete(C.id);const U=new Map([...f.comments].filter(([Z,F])=>F.post_id!==C.id));return[`/feed/post/${C.id}`,`/feed/short/${C.id}`].includes(window.location.pathname)&&Object(a.redirect)("/feed",{replace:!0}),r(u({},f),{lastDispatchType:y.type,posts:R,comments:U,pages:f.pages.map(Z=>r(u({},Z),{result:Z.result?r(u({},Z.result),{items:Z.result.items.filter(F=>{var z;return((z=F.post)==null?void 0:z.id)!==C.id})}):Z.result}))})}case"post_save":{const{postId:C,isSaved:R}=y.payload;return f.posts.get(C)?P(f,y.type,C,{is_saved:R}):f}case"comment_like":{const{commentId:C,isLiked:R}=y.payload,U=f.comments.get(C);return r(u({},f),{lastDispatchType:y.type,comments:B(f.comments,C,r(u({},U),{reaction:R?"\u2764":void 0,reactions:r(u({},U.reactions),{"\u2764":(((M=U.reactions)==null?void 0:M["\u2764"])||0)+(R?1:-1)}),reaction_count:(U.reaction_count||0)+(R?1:-1)}))})}case"comment_restack":{const{commentId:C,isRestacked:R}=y.payload,U=f.comments.get(C);return r(u({},f),{lastDispatchType:y.type,comments:U?B(f.comments,C,r(u({},U),{restacked:R,restacks:(U.restacks||0)+(R?1:-1)})):f.comments})}case"comment_delete":{const{comment:C}=y.payload,R=new Map(f.posts),U=new Map([...f.comments].filter(([z,G])=>G.id!==C.id&&!new RegExp(`(^|.)${C.id}(.|$)`).test(G.ancestor_path))),Z=R.get(C.post_id),F=C.ancestor_path&&U.get(Number(C.ancestor_path.split(".").pop()));return F?U.set(F.id,r(u({},F),{children_count:(F.children_count||1)-1,children:(F.children||[]).filter(z=>z.id!==C.id)})):Z&&R.set(Z.id,r(u({},Z),{child_comment_count:(Z.child_comment_count||1)-1})),[`/feed/comment/${C.id}`].includes(window.location.pathname)&&Object(a.redirect)("/feed",{replace:!0}),r(u({},f),{lastDispatchType:y.type,posts:R,comments:U,pages:f.pages.map(z=>r(u({},z),{result:z.result?r(u({},z.result),{items:z.result.items.filter(G=>{var V;return((V=G.comment)==null?void 0:V.id)!==C.id&&!(G.parentComments||[]).filter(Boolean).map(k=>k.id).includes(C.id)})}):z.result}))})}case"new_post":return r(u({},f),{lastDispatchType:y.type,publications:new Map([...f.publications].concat([[y.payload.publication.id,y.payload.publication]])),posts:new Map([...f.posts].concat([[y.payload.post.id,y.payload.post]])),pages:[{error:null,isLoading:!1,result:{items:[{type:"post",entity_key:`post-${y.payload.post.id}`,publication:y.payload.publication,post:y.payload.post,context:y.payload.context||{}}]}},...f.pages]});case"new_comment":{const{comment:C}=y.payload,R=new Map(f.posts),U=R.get(C.post_id);U&&R.set(U.id,r(u({},U),{child_comment_count:(U.child_comment_count||0)+1}));const Z=new Map(f.comments);Z.set(C.id,C);const F=(((N=C.ancestor_path)==null?void 0:N.split("."))||[]).map(Number).filter(Boolean).map(k=>Z.get(k)||null),z=(A=F[F.length-1])!=null?A:null;z&&Z.set(z.id,r(u({},z),{children_count:(z.children_count||0)+1,children:[C].concat(z.children||[])}));const G={type:"comment",entity_key:`comment-${C.id}`,comment:C,parentComments:F,publication:null,post:null,context:{type:"comment",timestamp:new Date().toISOString(),users:[],publications:[],tags:[],fallbackReason:"",fallbackUrl:null}},V=[{error:null,isLoading:!1,result:{items:[G]}},...f.pages];return r(u({},f),{lastDispatchType:y.type,posts:R,comments:Z,pages:V})}case"edit_comment":{const{comment:C}=y.payload,R=new Map(f.comments);return R.set(C.id,C),r(u({},f),{lastDispatchType:y.type,comments:R})}case"set_composer":return r(u({},f),{lastDispatchType:y.type,composer:y.payload});case"comments_load":{const{comments:C}=y.payload,R=[],U=C.slice();for(;U.length>0;){const Z=U.pop();R.push(Z),U.push(...Z.children||[])}return r(u({},f),{lastDispatchType:y.type,comments:new Map([...f.comments].concat(R.map(Z=>[Z.id,Z])))})}case"item_load":{const{item:C}=y.payload;return r(u({},f),{lastDispatchType:y.type,posts:C.post?B(f.posts,C.post.id,C.post):f.posts,publications:C.publication?B(f.publications,C.publication.id,C.publication):f.publications,comments:new Map([...f.comments].concat([C.comment,...(L=C.parentComments)!=null?L:[]].filter(Boolean).map(R=>[R.id,R])))})}case"new_feed_items":{const C=[...f.pages];if(y.payload.insertLocation){const R={error:null,isLoading:!1,result:{items:y.payload.feedItems}};y.payload.insertLocation==="prepend"?C.unshift(R):y.payload.insertLocation==="append"&&C.push(R)}return r(u({},f),{lastDispatchType:y.type,publications:new Map([...f.publications].concat(y.payload.feedItems.map(R=>R.publication).filter(Boolean).map(R=>[R.id,R]))),posts:new Map([...f.posts].concat(y.payload.feedItems.map(R=>R.post).filter(Boolean).map(R=>[R.id,R]))),comments:new Map([...f.comments].concat(y.payload.feedItems.map(R=>R.comment).filter(Boolean).map(R=>[R.id,R])).concat(y.payload.feedItems.map(R=>R.parentComments||[]).flat().filter(Boolean).map(R=>[R.id,R]))),pages:C})}}return r(u({},f),{lastDispatchType:y.type,pages:Object(o.d)(f.pages,y)})}function P(f,y,M,N){const A=new Map(f.posts),L=A.get(M);return L&&A.set(L.id,u(u({},L),N)),r(u({},f),{lastDispatchType:y,posts:A})}function D(f,y){var M;const N=y!=null?y:!f.reaction,A="\u2764";return{reaction:N,reactions:{[A]:(((M=f.reactions)==null?void 0:M[A])||0)+(y?1:-1)}}}function W(f,y){return{restacked:y,restacks:(f.restacks||0)+(y?1:-1)}}function B(f,y,M){const N=new Map(f);return N.set(y,M),N}},function($,n,t){var e=t(284);function s(o,a){return e(o,a)}$.exports=s},function($,n,t){var e=t(484),s=t(528),o=t(180),a=t(73),c=t(534);function l(p){return typeof p=="function"?p:p==null?o:typeof p=="object"?a(p)?s(p[0],p[1]):e(p):c(p)}$.exports=l},function($,n,t){"use strict";t.d(n,"a",function(){return R}),t.d(n,"b",function(){return U}),t.d(n,"c",function(){return Z});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(11),l=t.n(c),p=t(3),h=t(9),m=t(7),g=t(8),v=t(115),O=t(17),u=t(269),r=(z,G,V)=>new Promise((k,K)=>{var Y=he=>{try{ae(V.next(he))}catch(me){K(me)}},ee=he=>{try{ae(V.throw(he))}catch(me){K(me)}},ae=he=>he.done?k(he.value):Promise.resolve(he.value).then(Y,ee);ae((V=V.apply(z,G)).next())}),d=({photoUrl:z,newPhotoUrl:G,newPhotoOrientation:V,updatePhoto:k})=>{const K=Object(s.j)(null),Y=()=>r(void 0,null,function*(){const ee=K.current.files[0];if(K.current.value="",!ee){k({newPhotoUrl:null,newPhotoOrientation:null});return}let ae;try{ae=yield Object(g.getDataUrlFromFile)(ee)}catch(me){console.error("Failed to get data URL from file:",me),alert(me.message);return}let he;try{he=yield Object(g.getExifOrientationFromFile)(ee)}catch(me){console.error("Failed to extract EXIF data from file:",me)}k({newPhotoUrl:ae,newPhotoOrientation:he})});return Object(e.h)("div",{className:"profile-photo-wrap"},z&&Object(e.h)("div",{className:"profile-photo-image",style:{backgroundImage:`url(${G||Object(p.cloudinary)(z,144)})`,transform:Object(g.transformExifOrientation)(V)}}),!z&&Object(e.h)("div",{className:"profile-photo-image",style:{backgroundImage:`url(${Object(p.cloudinary)(p.DEFAULT_PHOTO_URL,144)})`,transform:Object(g.transformExifOrientation)(V)}}),Object(e.h)(O.b,{onClick:()=>{(Object(g.isIE)()||Object(g.isFirefox)())&&K.current.click()}},Object(e.h)("input",{ref:K,type:"file",name:"photo",accept:"image/*",onChange:Y}),Object(e.h)("div",{class:"add-photo-fab",onClick:ee=>{ee.preventDefault(),K.current.click()}},Object(e.h)("div",{class:"add-photo-fab-inner"},Object(e.h)(u.default,{height:12,width:12,stroke:"#fff",fill:"#fff"})))))},b=t(46),w=t(44),E=t(64),S=Object.defineProperty,P=Object.defineProperties,D=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,y=(z,G,V)=>G in z?S(z,G,{enumerable:!0,configurable:!0,writable:!0,value:V}):z[G]=V,M=(z,G)=>{for(var V in G||(G={}))B.call(G,V)&&y(z,V,G[V]);if(W)for(var V of W(G))f.call(G,V)&&y(z,V,G[V]);return z},N=(z,G)=>P(z,D(G)),A=(z,G)=>{var V={};for(var k in z)B.call(z,k)&&G.indexOf(k)<0&&(V[k]=z[k]);if(z!=null&&W)for(var k of W(z))G.indexOf(k)<0&&f.call(z,k)&&(V[k]=z[k]);return V},L=(z,G,V)=>new Promise((k,K)=>{var Y=he=>{try{ae(V.next(he))}catch(me){K(me)}},ee=he=>{try{ae(V.throw(he))}catch(me){K(me)}},ae=he=>he.done?k(he.value):Promise.resolve(he.value).then(Y,ee);ae((V=V.apply(z,G)).next())});const C=({sub:z,onSetVisibility:G,source:V})=>{const k=z.publication;return Object(e.h)("div",{className:"edit-sub-visibility-row"},Object(e.h)("div",{className:"left"},Object(e.h)(E.a,{pub:k,logo_url:k.logo_url||k.author_photo_url}),Object(e.h)("span",null,k.name)),Object(e.h)("div",{className:"right"},Object(e.h)(v.a,{checked:z.visibility==="public",onChange:()=>G(z.visibility==="public"?"private":"public")})))},R=({profile:z,onFinalizeVisibility:G,onSetVisibility:V,source:k})=>{if(!z)return;const K=z.subscriptions.every(({visibility:he})=>he==="public"),Y=()=>{V(z.subscriptions.reduce((he,{publication:me})=>N(M({},he),{[me.id]:K?"private":"public"}),{})),Object(m.i)(m.a.PROFILE_EDITED,{type:"visibility_toggled_all",for:"reads",count:z.subscriptions.length})},ee=he=>me=>{V(z.subscriptions.reduce((Ye,{visibility:se,publication:ie})=>N(M({},Ye),{[ie.id]:ie.id===he.id?me:se}),{})),Object(m.i)(m.a.PROFILE_EDITED,{type:"read_visibility_toggled",visibility:me})},ae=Object(e.h)("button",{className:"small",onClick:Y},K?"Hide all":"Show all");return Object(e.h)("div",{className:"edit-sub-visibility-form"},Object(e.h)("div",{className:"bulk-action-row"},ae),Object(e.h)("div",{className:"edit-sub-visibility-frame"},z.subscriptions.map(he=>Object(e.h)(C,{sub:he,onSetVisibility:ee(he.publication),source:k}))),Object(e.h)("div",{className:"modal-ctas"},Object(e.h)(O.b,{className:"primary",onClick:G},"Done")))};class U extends e.Component{constructor(G,V){super(G,V);var k;this.formRef=Object(e.createRef)(),this.state={newName:null,newBio:null,newEmail:G.user&&G.user.is_magic?G.user.email:null},G.isPostInvite&&!((k=G.user)==null?void 0:k.has_publication)&&(this.state.createPublication=!0)}componentDidMount(){var G,V,k;this.props.autoSubmit&&(this.isComplete()?(G=this.formRef.current)==null||G.handleSubmit():(k=(V=this.props).onAutoSubmitFailed)==null||k.call(V))}isComplete(){const{user:G,needsPhoto:V}=this.props;return G&&!G.is_magic&&G.name&&(!V||G.photo_url)}onFileInputChanged(){return L(this,null,function*(){const G=this.fileInput.files[0];if(this.fileInput.value="",!G){this.setState({newPhotoUrl:null,newPhotoOrientation:null});return}let V;try{V=yield Object(g.getDataUrlFromFile)(G)}catch(K){console.error("Failed to get data URL from file:",K),alert(K.message);return}let k;try{k=yield Object(g.getExifOrientationFromFile)(G)}catch(K){console.error("Failed to extract EXIF data from file:",K)}this.setState({newPhotoUrl:V,newPhotoOrientation:k})})}onError(G){var V,k;this.props.autoSubmit&&!this.state.autoSubmitFailed&&(this.setState({autoSubmitFailed:!0}),(k=(V=this.props).onAutoSubmitFailed)==null||k.call(V)),this.setState({sentLoginEmail:!1}),G.status===401&&this.sendLoginEmail()}createDefaultPublication(G,V){return L(this,null,function*(){try{const k=yield l.a.get("/api/v1/publication/suggestion"),K=V||`${G} on Substack`;yield l.a.post("/api/v1/publication").send({name:G,subdomain:k.body.subdomain,hero_text:K,tos:!0})}catch(k){Object(m.i)(m.a.DEFAULT_PUBLICATION_CREATION_FAILED),console.log("couldn't set up a default publication",k)}})}sendLoginEmail(){return L(this,null,function*(){const G=this.state.newEmail||this.props.freeSignupEmail;if(!(this.state.loading||!G)){this.setState({loading:!0});try{yield l.a.post("/api/v1/email-login").send({email:G,redirect:document.location.href}),this.setState({sentLoginEmail:!0})}catch(V){console.error("Failed send login email:",V)}this.setState({loading:!1})}})}render({user:G,numVisibleSubscriptions:V,numSubscriptions:k,freeSignup:K,freeSignupEmail:Y,initialPhotoUrl:ee,needsPhoto:ae,optionalPhoto:he,token:me,text:Ye,onSuccess:se,prepareData:ie,pageTitle:Ee,primaryEligiblePublications:Oe,isPostInvite:ce,complete:ue,profileExists:pe,onSkip:$e,onEditReadVisibility:ne,barebones:X,onEditRecommendations:q,numRecommendationsToMake:Ne,style:Qe},{newPhotoUrl:Ze,newPhotoOrientation:tt,newName:Ft,newEmail:Lt,loading:rn,sentLoginEmail:ht,newBio:je,createPublication:Le}){const rt=Ze||ee||Object(p.getUserPhotoUrl)(G,{noFallbackToSignedOut:!0}),Pe=typeof Ee=="string"?Ee:`${this.isComplete()?"Update":"Create"} your profile`,de=Ft||G&&G.name||"",be=typeof je=="string"?je:G&&G.bio||"",Ie=(ke,Te)=>L(this,null,function*(){Le&&(yield this.createDefaultPublication(de,be)),se(ke,Te)});return Object(e.h)("div",{className:"profile-updater",style:Qe},Object(e.h)("h2",{className:"page-title profile-updater-title"},Pe),(rt||ae||he)&&Object(e.h)(d,{photoUrl:rt,newPhotoUrl:Ze,newPhotoOrientation:tt,updatePhoto:({newPhotoOrientation:ke,newPhotoUrl:Te})=>this.setState({newPhotoOrientation:ke,newPhotoUrl:Te}),onFileInputChanged:()=>this.onFileInputChanged()}),Object(e.h)(b.g,{ref:this.formRef,method:"put",action:"/api/v1/user/profile",prepareData:ie,onSuccess:Ie,onError:ke=>this.onError(ke),noInlineErrors:!0,loading:rn,autoLock:!0},Object(e.h)("label",{htmlFor:"name"},"Your name"),Object(e.h)("input",{autoFocus:!0,type:"text",className:"profile-name",placeholder:"Your name\u2026",name:"name",id:"name",value:de,onInput:ke=>this.setState({newName:ke.target.value})}),!X&&Object(e.h)("label",{htmlFor:"bio"},"Your bio"),!X&&Object(e.h)("textarea",{className:"profile-bio",placeholder:"Say something about yourself\u2026",name:"bio",id:"bio",value:be,onInput:ke=>this.setState({newBio:ke.target.value})}),ce&&Object(e.h)("input",{type:"hidden",name:"needs_bio",value:"true"}),ce&&Object(e.h)("div",{class:"bio-guest-tip"},"Tip: this will be shown at the bottom of your guest post"),ce&&Oe&&(G==null?void 0:G.has_publication)&&Oe.length>1&&Object(e.h)(e.Fragment,null,Object(e.h)("label",null,"Publication to display"),Object(e.h)("div",{class:"primary-publication-selector"},Oe.map((ke,Te)=>Object(e.h)("label",{class:"publication-selector-row",for:`primary-radio-${ke.id}`},Object(e.h)("input",{id:`primary-radio-${ke.id}`,type:"radio",name:"primary_publication_user_id",value:ke.id,checked:Te===0}),Object(e.h)(E.a,{pub:ke.publication,logo_url:Object(p.cloudinary)(ke.publication.logo_url,28*2,{height:28*2,crop:"fill"}),linkify:!1,size:28,title:ke.publication.name}),Object(e.h)("div",{class:"primary-publication-name"},ke.publication.name))))),(!G||G.is_magic)&&!Y&&!ce&&Object(e.h)("input",{type:"email",className:"profile-email",placeholder:"Your email\u2026",name:"email",value:Lt,onInput:ke=>this.setState({newEmail:ke.target.value})}),!(G&&(G.is_subscribed||G.is_free_subscribed)||K)&&Object(e.h)("label",{className:"profile-signup-checkbox"},Object(e.h)("input",{type:"checkbox",name:"free_signup",defaultChecked:!0})," Subscribe to the newsletter"),ce&&!(G==null?void 0:G.has_publication)&&Object(e.h)("label",{className:"profile-signup-checkbox"},Object(e.h)("input",{type:"checkbox",name:"create_publication",id:"create-publication-checkbox",checked:Le,onChange:ke=>this.setState({createPublication:ke.target.checked})}),"Create a Substack publication for me"),Object(e.h)("input",{type:"hidden",name:"photo_url",value:rt}),Object(e.h)("input",{type:"hidden",name:"user_id",value:(G==null?void 0:G.id)||""}),Object(e.h)("input",{type:"hidden",name:"needs_photo",value:!!ae}),Object(e.h)("input",{type:"hidden",name:"token",value:me}),ue&&Object(e.h)("input",{type:"hidden",name:"complete",value:!0}),Object(e.h)("div",{id:"error-container"},ht&&Object(e.h)("div",{className:"error other-error"},"If you have an account with us, we've sent an email to ",Object(e.h)("b",null,Lt)," with a link that you can use to sign in.")),Object(e.h)("p",{className:a()("left",{hidden:!(typeof V=="number"&&k>0&&ne)})},Object(h.pluralize)(V||0,"subscription")," ",pe?"are":"will be"," displayed on your profile (",Object(e.h)("a",{onClick:ne},"edit"),")"),!pe&&q&&Ne>0&&Object(e.h)("p",{className:"left second"},Object(h.pluralize)(Ne||0,"recommendation")," will be made on your publication (",Object(e.h)("a",{onClick:q},"edit"),")"),Object(e.h)("div",{className:"modal-ctas"},Object(e.h)("p",{className:a()("skip",{hidden:!$e})},Object(e.h)("a",{className:"small",onClick:$e||(()=>{})},"Skip for now")),Object(e.h)(O.b,{className:"primary",type:"submit"},Ye||"Update profile"),ce&&Object(e.h)(e.Fragment,null,Object(e.h)("input",{type:"hidden",name:"accept_tos",value:"true"}),Object(e.h)("div",{class:"agreement-note"},"By signing up you agree to Substack\u2019s"," ",Object(e.h)("a",{href:`${Object(p.getSubstackUrl)()}/pa`,target:"_blank",rel:"noopener"},"publisher agreement"))))))}}class Z extends w.a{renderChildren(){const G=this.props,{ref:V,onBeforeClose:k,contributor:K}=G,Y=A(G,["ref","onBeforeClose","contributor"]);return Object(e.h)("div",{className:"profile-updater-modal"},K?Object(e.h)(F,N(M({},Y),{onSuccess:()=>this.close(!0)})):Object(e.h)(U,N(M({},Y),{onSuccess:()=>this.close(!0)})))}}const F=({profile:z,user:G,pub:V,onSuccess:k,isOwnProfile:K})=>{const Y=Object(s.j)(),[ee,ae]=Object(s.k)(null),[he,me]=Object(s.k)(null),Ye=ee||z&&z.photo_url,[se,ie]=Object(s.k)(z.name),[Ee,Oe]=Object(s.k)(z.bio),ce=()=>L(void 0,null,function*(){var ue;const pe=((ue=Y.current)==null?void 0:ue.files)?Y.current.files[0]:null;if(Y.value="",!pe){ae(null),me(null);return}let $e;try{$e=yield Object(g.getDataUrlFromFile)(pe)}catch(X){console.error("Failed to get data URL from file:",X),alert(X.message);return}let ne;try{ne=yield Object(g.getExifOrientationFromFile)(pe)}catch(X){console.error("Failed to extract EXIF data from file:",X)}ae($e),me(ne)});return Object(e.h)("div",{className:"profile-updater"},Object(e.h)("h2",{className:"page-title profile-updater-title"},"Edit contributor profile"),Object(e.h)("div",{className:"profile-photo-wrap"},Ye&&Object(e.h)("div",{className:"profile-photo-image",style:{backgroundImage:`url(${ee||Object(p.cloudinary)(z.photo_url,144)})`,transform:Object(g.transformExifOrientation)(he)}}),Object(e.h)(O.b,{onClick:()=>{(Object(g.isIE)()||Object(g.isFirefox)())&&Y.click()}},!Ye&&"Set photo",Object(e.h)("input",{ref:Y,type:"file",name:"photo",accept:"image/*",onChange:()=>ce()}))),Object(e.h)(b.g,{method:"patch",action:`/api/v1/publication/users/${z.id}`,onSuccess:k,autoLock:!0},Object(e.h)("input",{type:"text",className:"profile-name",placeholder:"Contributor's name\u2026",name:"name",value:se,onInput:ue=>ie(ue.target.value)}),Object(e.h)("textarea",{className:"profile-bio",placeholder:"Contributor's bio\u2026",name:"bio",value:Ee,onInput:ue=>Oe(ue.target.value)}),Object(e.h)("input",{type:"hidden",name:"photo_url",value:Ye}),Object(e.h)("span",{className:"notice"},Object(e.h)("p",null,Object(e.h)("b",null,"Note:")," This is a contributor profile, viewable by ",V.name,"'s readers."),K&&Object(e.h)("p",null,"You may also edit your"," ",Object(e.h)("a",{native:!0,href:`${Object(p.getReaderProfileUrl)(G)}`},"personal profile"),".")),Object(e.h)(O.b,{className:"primary",type:"submit"},"Update profile")))}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"TwitterIcon",svgParams:{height:24,width:24}}),Object(e.h)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return v}),t.d(n,"b",function(){return m});var e=t(2),s=t(95),o=t(29),a=t(55),c=t(61),l=t(40);let p=Object(e.createContext)(null);function h(){let O=Object(e.useContext)(p);if(O===null){let u=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(u,h),u}return O}function m(){let[O,u]=Object(e.useState)([]);return[O.length>0?O.join(" "):void 0,Object(e.useMemo)(()=>function(r){let i=Object(l.a)(b=>(u(w=>[...w,b]),()=>u(w=>{let E=w.slice(),S=E.indexOf(b);return S!==-1&&E.splice(S,1),E}))),d=Object(e.useMemo)(()=>({register:i,slot:r.slot,name:r.name,props:r.props}),[i,r.slot,r.name,r.props]);return e.default.createElement(p.Provider,{value:d},r.children)},[u])]}let g="p",v=Object(o.d)(function(O,u){let r=h(),i=`headlessui-description-${Object(s.a)()}`,d=Object(c.b)(u);Object(a.a)(()=>r.register(i),[i,r.register]);let b=O,w=Yo(vr({ref:d},r.props),{id:i});return Object(o.e)({ourProps:w,theirProps:b,slot:r.slot||{},defaultTag:g,name:r.name||"Description"})})},function($,n,t){"use strict";t.d(n,"b",function(){return O}),t.d(n,"a",function(){return u}),t.d(n,"c",function(){return r});var e=t(0),s=t(16),o=t(60),a=t(53),c=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(i,d,b)=>d in i?c(i,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):i[d]=b,g=(i,d)=>{for(var b in d||(d={}))p.call(d,b)&&m(i,b,d[b]);if(l)for(var b of l(d))h.call(d,b)&&m(i,b,d[b]);return i},v=(i,d)=>{var b={};for(var w in i)p.call(i,w)&&d.indexOf(w)<0&&(b[w]=i[w]);if(i!=null&&l)for(var w of l(i))d.indexOf(w)<0&&h.call(i,w)&&(b[w]=i[w]);return b};function O(i){var d=i,{user:b}=d,w=v(d,["user"]);return Object(e.h)(u,g({user:b},w),b.name)}function u(i){var d=i,{user:b}=d,w=v(d,["user"]);return Object(e.h)(o.b,{subject:b,dontStopPropagation:!0,utmSource:"feed"},Object(e.h)(r,g({href:Object(s.getReaderProfileUrl)(b,{noBase:!0})},w)))}function r(i){return Object(e.h)("a",g({className:a.a.link},i))}},,,function($,n,t){"use strict";t.d(n,"a",function(){return Yt}),t.d(n,"b",function(){return vn}),t.d(n,"c",function(){return po});var e=t(19),s=t(13),o=t(34);const a=function(j){for(var T=0;;T++)if(j=j.previousSibling,!j)return T},c=function(j){let T=j.assignedSlot||j.parentNode;return T&&T.nodeType==11?T.host:T};let l=null;const p=function(j,T,_){let J=l||(l=document.createRange());return J.setEnd(j,_==null?j.nodeValue.length:_),J.setStart(j,T||0),J},h=function(j,T,_,J){return _&&(g(j,T,_,J,-1)||g(j,T,_,J,1))},m=/^(img|br|input|textarea|hr)$/i;function g(j,T,_,J,oe){for(;;){if(j==_&&T==J)return!0;if(T==(oe<0?0:v(j))){let ve=j.parentNode;if(!ve||ve.nodeType!=1||u(j)||m.test(j.nodeName)||j.contentEditable=="false")return!1;T=a(j)+(oe<0?0:1),j=ve}else if(j.nodeType==1){if(j=j.childNodes[T+(oe<0?-1:0)],j.contentEditable=="false")return!1;T=oe<0?v(j):0}else return!1}}function v(j){return j.nodeType==3?j.nodeValue.length:j.childNodes.length}function O(j,T,_){for(let J=T==0,oe=T==v(j);J||oe;){if(j==_)return!0;let ve=a(j);if(j=j.parentNode,!j)return!1;J=J&&ve==0,oe=oe&&ve==v(j)}}function u(j){let T;for(let _=j;_&&!(T=_.pmViewDesc);_=_.parentNode);return T&&T.node&&T.node.isBlock&&(T.dom==j||T.contentDOM==j)}const r=function(j){return j.focusNode&&h(j.focusNode,j.focusOffset,j.anchorNode,j.anchorOffset)};function i(j,T){let _=document.createEvent("Event");return _.initEvent("keydown",!0,!0),_.keyCode=j,_.key=_.code=T,_}function d(j){let T=j.activeElement;for(;T&&T.shadowRoot;)T=T.shadowRoot.activeElement;return T}const b=typeof navigator!="undefined"?navigator:null,w=typeof document!="undefined"?document:null,E=b&&b.userAgent||"",S=/Edge\/(\d+)/.exec(E),P=/MSIE \d/.exec(E),D=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(E),W=!!(P||D||S),B=P?document.documentMode:D?+D[1]:S?+S[1]:0,f=!W&&/gecko\/(\d+)/i.test(E);f&&+(/Firefox\/(\d+)/.exec(E)||[0,0])[1];const y=!W&&/Chrome\/(\d+)/.exec(E),M=!!y,N=y?+y[1]:0,A=!W&&!!b&&/Apple Computer/.test(b.vendor),L=A&&(/Mobile\/\w+/.test(E)||!!b&&b.maxTouchPoints>2),C=L||(b?/Mac/.test(b.platform):!1),R=/Android \d/.test(E),U=!!w&&"webkitFontSmoothing"in w.documentElement.style,Z=U?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function F(j){return{left:0,right:j.documentElement.clientWidth,top:0,bottom:j.documentElement.clientHeight}}function z(j,T){return typeof j=="number"?j:j[T]}function G(j){let T=j.getBoundingClientRect(),_=T.width/j.offsetWidth||1,J=T.height/j.offsetHeight||1;return{left:T.left,right:T.left+j.clientWidth*_,top:T.top,bottom:T.top+j.clientHeight*J}}function V(j,T,_){let J=j.someProp("scrollThreshold")||0,oe=j.someProp("scrollMargin")||5,ve=j.dom.ownerDocument;for(let xe=_||j.dom;xe;xe=c(xe)){if(xe.nodeType!=1)continue;let Ke=xe,qe=Ke==ve.body,vt=qe?F(ve):G(Ke),It=0,un=0;if(T.top<vt.top+z(J,"top")?un=-(vt.top-T.top+z(oe,"top")):T.bottom>vt.bottom-z(J,"bottom")&&(un=T.bottom-vt.bottom+z(oe,"bottom")),T.left<vt.left+z(J,"left")?It=-(vt.left-T.left+z(oe,"left")):T.right>vt.right-z(J,"right")&&(It=T.right-vt.right+z(oe,"right")),It||un)if(qe)ve.defaultView.scrollBy(It,un);else{let On=Ke.scrollLeft,dn=Ke.scrollTop;un&&(Ke.scrollTop+=un),It&&(Ke.scrollLeft+=It);let In=Ke.scrollLeft-On,Qn=Ke.scrollTop-dn;T={left:T.left-In,top:T.top-Qn,right:T.right-In,bottom:T.bottom-Qn}}if(qe)break}}function k(j){let T=j.dom.getBoundingClientRect(),_=Math.max(0,T.top),J,oe;for(let ve=(T.left+T.right)/2,xe=_+1;xe<Math.min(innerHeight,T.bottom);xe+=5){let Ke=j.root.elementFromPoint(ve,xe);if(!Ke||Ke==j.dom||!j.dom.contains(Ke))continue;let qe=Ke.getBoundingClientRect();if(qe.top>=_-20){J=Ke,oe=qe.top;break}}return{refDOM:J,refTop:oe,stack:K(j.dom)}}function K(j){let T=[],_=j.ownerDocument;for(let J=j;J&&(T.push({dom:J,top:J.scrollTop,left:J.scrollLeft}),j!=_);J=c(J));return T}function Y({refDOM:j,refTop:T,stack:_}){let J=j?j.getBoundingClientRect().top:0;ee(_,J==0?0:J-T)}function ee(j,T){for(let _=0;_<j.length;_++){let{dom:J,top:oe,left:ve}=j[_];J.scrollTop!=oe+T&&(J.scrollTop=oe+T),J.scrollLeft!=ve&&(J.scrollLeft=ve)}}let ae=null;function he(j){if(j.setActive)return j.setActive();if(ae)return j.focus(ae);let T=K(j);j.focus(ae==null?{get preventScroll(){return ae={preventScroll:!0},!0}}:void 0),ae||(ae=!1,ee(T,0))}function me(j,T){let _,J=2e8,oe,ve=0,xe=T.top,Ke=T.top;for(let qe=j.firstChild,vt=0;qe;qe=qe.nextSibling,vt++){let It;if(qe.nodeType==1)It=qe.getClientRects();else if(qe.nodeType==3)It=p(qe).getClientRects();else continue;for(let un=0;un<It.length;un++){let On=It[un];if(On.top<=xe&&On.bottom>=Ke){xe=Math.max(On.bottom,xe),Ke=Math.min(On.top,Ke);let dn=On.left>T.left?On.left-T.left:On.right<T.left?T.left-On.right:0;if(dn<J){_=qe,J=dn,oe=dn&&_.nodeType==3?{left:On.right<T.left?On.right:On.left,top:T.top}:T,qe.nodeType==1&&dn&&(ve=vt+(T.left>=(On.left+On.right)/2?1:0));continue}}!_&&(T.left>=On.right&&T.top>=On.top||T.left>=On.left&&T.top>=On.bottom)&&(ve=vt+1)}}return _&&_.nodeType==3?Ye(_,oe):!_||J&&_.nodeType==1?{node:j,offset:ve}:me(_,oe)}function Ye(j,T){let _=j.nodeValue.length,J=document.createRange();for(let oe=0;oe<_;oe++){J.setEnd(j,oe+1),J.setStart(j,oe);let ve=pe(J,1);if(ve.top!=ve.bottom&&se(T,ve))return{node:j,offset:oe+(T.left>=(ve.left+ve.right)/2?1:0)}}return{node:j,offset:0}}function se(j,T){return j.left>=T.left-1&&j.left<=T.right+1&&j.top>=T.top-1&&j.top<=T.bottom+1}function ie(j,T){let _=j.parentNode;return _&&/^li$/i.test(_.nodeName)&&T.left<j.getBoundingClientRect().left?_:j}function Ee(j,T,_){let{node:J,offset:oe}=me(T,_),ve=-1;if(J.nodeType==1&&!J.firstChild){let xe=J.getBoundingClientRect();ve=xe.left!=xe.right&&_.left>(xe.left+xe.right)/2?1:-1}return j.docView.posFromDOM(J,oe,ve)}function Oe(j,T,_,J){let oe=-1;for(let ve=T;ve!=j.dom;){let xe=j.docView.nearestDesc(ve,!0);if(!xe)return null;if(xe.dom.nodeType==1&&(xe.node.isBlock&&xe.parent||!xe.contentDOM)){let Ke=xe.dom.getBoundingClientRect();if(xe.node.isBlock&&xe.parent&&(Ke.left>J.left||Ke.top>J.top?oe=xe.posBefore:(Ke.right<J.left||Ke.bottom<J.top)&&(oe=xe.posAfter)),!xe.contentDOM&&oe<0)return(xe.node.isBlock?J.top<(Ke.top+Ke.bottom)/2:J.left<(Ke.left+Ke.right)/2)?xe.posBefore:xe.posAfter}ve=xe.dom.parentNode}return oe>-1?oe:j.docView.posFromDOM(T,_,-1)}function ce(j,T,_){let J=j.childNodes.length;if(J&&_.top<_.bottom)for(let oe=Math.max(0,Math.min(J-1,Math.floor(J*(T.top-_.top)/(_.bottom-_.top))-2)),ve=oe;;){let xe=j.childNodes[ve];if(xe.nodeType==1){let Ke=xe.getClientRects();for(let qe=0;qe<Ke.length;qe++){let vt=Ke[qe];if(se(T,vt))return ce(xe,T,vt)}}if((ve=(ve+1)%J)==oe)break}return j}function ue(j,T){let _=j.dom.ownerDocument,J,oe=0;if(_.caretPositionFromPoint)try{let qe=_.caretPositionFromPoint(T.left,T.top);qe&&({offsetNode:J,offset:oe}=qe)}catch(qe){}if(!J&&_.caretRangeFromPoint){let qe=_.caretRangeFromPoint(T.left,T.top);qe&&({startContainer:J,startOffset:oe}=qe)}let ve=(j.root.elementFromPoint?j.root:_).elementFromPoint(T.left,T.top),xe;if(!ve||!j.dom.contains(ve.nodeType!=1?ve.parentNode:ve)){let qe=j.dom.getBoundingClientRect();if(!se(T,qe)||(ve=ce(j.dom,T,qe),!ve))return null}if(A)for(let qe=ve;J&&qe;qe=c(qe))qe.draggable&&(J=void 0);if(ve=ie(ve,T),J){if(f&&J.nodeType==1&&(oe=Math.min(oe,J.childNodes.length),oe<J.childNodes.length)){let qe=J.childNodes[oe],vt;qe.nodeName=="IMG"&&(vt=qe.getBoundingClientRect()).right<=T.left&&vt.bottom>T.top&&oe++}J==j.dom&&oe==J.childNodes.length-1&&J.lastChild.nodeType==1&&T.top>J.lastChild.getBoundingClientRect().bottom?xe=j.state.doc.content.size:(oe==0||J.nodeType!=1||J.childNodes[oe-1].nodeName!="BR")&&(xe=Oe(j,J,oe,T))}xe==null&&(xe=Ee(j,ve,T));let Ke=j.docView.nearestDesc(ve,!0);return{pos:xe,inside:Ke?Ke.posAtStart-Ke.border:-1}}function pe(j,T){let _=j.getClientRects();return _.length?_[T<0?0:_.length-1]:j.getBoundingClientRect()}const $e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ne(j,T,_){let{node:J,offset:oe,atom:ve}=j.docView.domFromPos(T,_<0?-1:1),xe=U||f;if(J.nodeType==3)if(xe&&($e.test(J.nodeValue)||(_<0?!oe:oe==J.nodeValue.length))){let qe=pe(p(J,oe,oe),_);if(f&&oe&&/\s/.test(J.nodeValue[oe-1])&&oe<J.nodeValue.length){let vt=pe(p(J,oe-1,oe-1),-1);if(vt.top==qe.top){let It=pe(p(J,oe,oe+1),-1);if(It.top!=qe.top)return X(It,It.left<vt.left)}}return qe}else{let qe=oe,vt=oe,It=_<0?1:-1;return _<0&&!oe?(vt++,It=-1):_>=0&&oe==J.nodeValue.length?(qe--,It=1):_<0?qe--:vt++,X(pe(p(J,qe,vt),1),It<0)}if(!j.state.doc.resolve(T-(ve||0)).parent.inlineContent){if(ve==null&&oe&&(_<0||oe==v(J))){let qe=J.childNodes[oe-1];if(qe.nodeType==1)return q(qe.getBoundingClientRect(),!1)}if(ve==null&&oe<v(J)){let qe=J.childNodes[oe];if(qe.nodeType==1)return q(qe.getBoundingClientRect(),!0)}return q(J.getBoundingClientRect(),_>=0)}if(ve==null&&oe&&(_<0||oe==v(J))){let qe=J.childNodes[oe-1],vt=qe.nodeType==3?p(qe,v(qe)-(xe?0:1)):qe.nodeType==1&&(qe.nodeName!="BR"||!qe.nextSibling)?qe:null;if(vt)return X(pe(vt,1),!1)}if(ve==null&&oe<v(J)){let qe=J.childNodes[oe];for(;qe.pmViewDesc&&qe.pmViewDesc.ignoreForCoords;)qe=qe.nextSibling;let vt=qe?qe.nodeType==3?p(qe,0,xe?0:1):qe.nodeType==1?qe:null:null;if(vt)return X(pe(vt,-1),!0)}return X(pe(J.nodeType==3?p(J):J,-_),_>=0)}function X(j,T){if(j.width==0)return j;let _=T?j.left:j.right;return{top:j.top,bottom:j.bottom,left:_,right:_}}function q(j,T){if(j.height==0)return j;let _=T?j.top:j.bottom;return{top:_,bottom:_,left:j.left,right:j.right}}function Ne(j,T,_){let J=j.state,oe=j.root.activeElement;J!=T&&j.updateState(T),oe!=j.dom&&j.focus();try{return _()}finally{J!=T&&j.updateState(J),oe!=j.dom&&oe&&oe.focus()}}function Qe(j,T,_){let J=T.selection,oe=_=="up"?J.$from:J.$to;return Ne(j,T,()=>{let{node:ve}=j.docView.domFromPos(oe.pos,_=="up"?-1:1);for(;;){let Ke=j.docView.nearestDesc(ve,!0);if(!Ke)break;if(Ke.node.isBlock){ve=Ke.contentDOM||Ke.dom;break}ve=Ke.dom.parentNode}let xe=ne(j,oe.pos,1);for(let Ke=ve.firstChild;Ke;Ke=Ke.nextSibling){let qe;if(Ke.nodeType==1)qe=Ke.getClientRects();else if(Ke.nodeType==3)qe=p(Ke,0,Ke.nodeValue.length).getClientRects();else continue;for(let vt=0;vt<qe.length;vt++){let It=qe[vt];if(It.bottom>It.top+1&&(_=="up"?xe.top-It.top>(It.bottom-xe.top)*2:It.bottom-xe.bottom>(xe.bottom-It.top)*2))return!1}}return!0})}const Ze=/[\u0590-\u08ac]/;function tt(j,T,_){let{$head:J}=T.selection;if(!J.parent.isTextblock)return!1;let oe=J.parentOffset,ve=!oe,xe=oe==J.parent.content.size,Ke=j.domSelection();return!Ze.test(J.parent.textContent)||!Ke.modify?_=="left"||_=="backward"?ve:xe:Ne(j,T,()=>{let{focusNode:qe,focusOffset:vt,anchorNode:It,anchorOffset:un}=j.domSelectionRange(),On=Ke.caretBidiLevel;Ke.modify("move",_,"character");let dn=J.depth?j.docView.domAfterPos(J.before()):j.dom,{focusNode:In,focusOffset:Qn}=j.domSelectionRange(),dr=In&&!dn.contains(In.nodeType==1?In:In.parentNode)||qe==In&&vt==Qn;try{Ke.collapse(It,un),qe&&(qe!=It||vt!=un)&&Ke.extend&&Ke.extend(qe,vt)}catch(Gr){}return On!=null&&(Ke.caretBidiLevel=On),dr})}let Ft=null,Lt=null,rn=!1;function ht(j,T,_){return Ft==T&&Lt==_?rn:(Ft=T,Lt=_,rn=_=="up"||_=="down"?Qe(j,T,_):tt(j,T,_))}const je=0,Le=1,rt=2,Pe=3;class de{constructor(T,_,J,oe){this.parent=T,this.children=_,this.dom=J,this.contentDOM=oe,this.dirty=je,J.pmViewDesc=this}matchesWidget(T){return!1}matchesMark(T){return!1}matchesNode(T,_,J){return!1}matchesHack(T){return!1}parseRule(){return null}stopEvent(T){return!1}get size(){let T=0;for(let _=0;_<this.children.length;_++)T+=this.children[_].size;return T}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let T=0;T<this.children.length;T++)this.children[T].destroy()}posBeforeChild(T){for(let _=0,J=this.posAtStart;;_++){let oe=this.children[_];if(oe==T)return J;J+=oe.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(T,_,J){if(this.contentDOM&&this.contentDOM.contains(T.nodeType==1?T:T.parentNode))if(J<0){let ve,xe;if(T==this.contentDOM)ve=T.childNodes[_-1];else{for(;T.parentNode!=this.contentDOM;)T=T.parentNode;ve=T.previousSibling}for(;ve&&!((xe=ve.pmViewDesc)&&xe.parent==this);)ve=ve.previousSibling;return ve?this.posBeforeChild(xe)+xe.size:this.posAtStart}else{let ve,xe;if(T==this.contentDOM)ve=T.childNodes[_];else{for(;T.parentNode!=this.contentDOM;)T=T.parentNode;ve=T.nextSibling}for(;ve&&!((xe=ve.pmViewDesc)&&xe.parent==this);)ve=ve.nextSibling;return ve?this.posBeforeChild(xe):this.posAtEnd}let oe;if(T==this.dom&&this.contentDOM)oe=_>a(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))oe=T.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(_==0)for(let ve=T;;ve=ve.parentNode){if(ve==this.dom){oe=!1;break}if(ve.previousSibling)break}if(oe==null&&_==T.childNodes.length)for(let ve=T;;ve=ve.parentNode){if(ve==this.dom){oe=!0;break}if(ve.nextSibling)break}}return(oe==null?J>0:oe)?this.posAtEnd:this.posAtStart}nearestDesc(T,_=!1){for(let J=!0,oe=T;oe;oe=oe.parentNode){let ve=this.getDesc(oe),xe;if(ve&&(!_||ve.node))if(J&&(xe=ve.nodeDOM)&&!(xe.nodeType==1?xe.contains(T.nodeType==1?T:T.parentNode):xe==T))J=!1;else return ve}}getDesc(T){let _=T.pmViewDesc;for(let J=_;J;J=J.parent)if(J==this)return _}posFromDOM(T,_,J){for(let oe=T;oe;oe=oe.parentNode){let ve=this.getDesc(oe);if(ve)return ve.localPosFromDOM(T,_,J)}return-1}descAt(T){for(let _=0,J=0;_<this.children.length;_++){let oe=this.children[_],ve=J+oe.size;if(J==T&&ve!=J){for(;!oe.border&&oe.children.length;)oe=oe.children[0];return oe}if(T<ve)return oe.descAt(T-J-oe.border);J=ve}}domFromPos(T,_){if(!this.contentDOM)return{node:this.dom,offset:0,atom:T+1};let J=0,oe=0;for(let ve=0;J<this.children.length;J++){let xe=this.children[J],Ke=ve+xe.size;if(Ke>T||xe instanceof le){oe=T-ve;break}ve=Ke}if(oe)return this.children[J].domFromPos(oe-this.children[J].border,_);for(let ve;J&&!(ve=this.children[J-1]).size&&ve instanceof be&&ve.side>=0;J--);if(_<=0){let ve,xe=!0;for(;ve=J?this.children[J-1]:null,!(!ve||ve.dom.parentNode==this.contentDOM);J--,xe=!1);return ve&&_&&xe&&!ve.border&&!ve.domAtom?ve.domFromPos(ve.size,_):{node:this.contentDOM,offset:ve?a(ve.dom)+1:0}}else{let ve,xe=!0;for(;ve=J<this.children.length?this.children[J]:null,!(!ve||ve.dom.parentNode==this.contentDOM);J++,xe=!1);return ve&&xe&&!ve.border&&!ve.domAtom?ve.domFromPos(0,_):{node:this.contentDOM,offset:ve?a(ve.dom):this.contentDOM.childNodes.length}}}parseRange(T,_,J=0){if(this.children.length==0)return{node:this.contentDOM,from:T,to:_,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let oe=-1,ve=-1;for(let xe=J,Ke=0;;Ke++){let qe=this.children[Ke],vt=xe+qe.size;if(oe==-1&&T<=vt){let It=xe+qe.border;if(T>=It&&_<=vt-qe.border&&qe.node&&qe.contentDOM&&this.contentDOM.contains(qe.contentDOM))return qe.parseRange(T,_,It);T=xe;for(let un=Ke;un>0;un--){let On=this.children[un-1];if(On.size&&On.dom.parentNode==this.contentDOM&&!On.emptyChildAt(1)){oe=a(On.dom)+1;break}T-=On.size}oe==-1&&(oe=0)}if(oe>-1&&(vt>_||Ke==this.children.length-1)){_=vt;for(let It=Ke+1;It<this.children.length;It++){let un=this.children[It];if(un.size&&un.dom.parentNode==this.contentDOM&&!un.emptyChildAt(-1)){ve=a(un.dom);break}_+=un.size}ve==-1&&(ve=this.contentDOM.childNodes.length);break}xe=vt}return{node:this.contentDOM,from:T,to:_,fromOffset:oe,toOffset:ve}}emptyChildAt(T){if(this.border||!this.contentDOM||!this.children.length)return!1;let _=this.children[T<0?0:this.children.length-1];return _.size==0||_.emptyChildAt(T)}domAfterPos(T){let{node:_,offset:J}=this.domFromPos(T,0);if(_.nodeType!=1||J==_.childNodes.length)throw new RangeError("No node after pos "+T);return _.childNodes[J]}setSelection(T,_,J,oe=!1){let ve=Math.min(T,_),xe=Math.max(T,_);for(let On=0,dn=0;On<this.children.length;On++){let In=this.children[On],Qn=dn+In.size;if(ve>dn&&xe<Qn)return In.setSelection(T-dn-In.border,_-dn-In.border,J,oe);dn=Qn}let Ke=this.domFromPos(T,T?-1:1),qe=_==T?Ke:this.domFromPos(_,_?-1:1),vt=J.getSelection(),It=!1;if((f||A)&&T==_){let{node:On,offset:dn}=Ke;if(On.nodeType==3){if(It=!!(dn&&On.nodeValue[dn-1]==`
`),It&&dn==On.nodeValue.length)for(let In=On,Qn;In;In=In.parentNode){if(Qn=In.nextSibling){Qn.nodeName=="BR"&&(Ke=qe={node:Qn.parentNode,offset:a(Qn)+1});break}let dr=In.pmViewDesc;if(dr&&dr.node&&dr.node.isBlock)break}}else{let In=On.childNodes[dn-1];It=In&&(In.nodeName=="BR"||In.contentEditable=="false")}}if(f&&vt.focusNode&&vt.focusNode!=qe.node&&vt.focusNode.nodeType==1){let On=vt.focusNode.childNodes[vt.focusOffset];On&&On.contentEditable=="false"&&(oe=!0)}if(!(oe||It&&A)&&h(Ke.node,Ke.offset,vt.anchorNode,vt.anchorOffset)&&h(qe.node,qe.offset,vt.focusNode,vt.focusOffset))return;let un=!1;if((vt.extend||T==_)&&!It){vt.collapse(Ke.node,Ke.offset);try{T!=_&&vt.extend(qe.node,qe.offset),un=!0}catch(On){}}if(!un){if(T>_){let dn=Ke;Ke=qe,qe=dn}let On=document.createRange();On.setEnd(qe.node,qe.offset),On.setStart(Ke.node,Ke.offset),vt.removeAllRanges(),vt.addRange(On)}}ignoreMutation(T){return!this.contentDOM&&T.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(T,_){for(let J=0,oe=0;oe<this.children.length;oe++){let ve=this.children[oe],xe=J+ve.size;if(J==xe?T<=xe&&_>=J:T<xe&&_>J){let Ke=J+ve.border,qe=xe-ve.border;if(T>=Ke&&_<=qe){this.dirty=T==J||_==xe?rt:Le,T==Ke&&_==qe&&(ve.contentLost||ve.dom.parentNode!=this.contentDOM)?ve.dirty=Pe:ve.markDirty(T-Ke,_-Ke);return}else ve.dirty=ve.dom==ve.contentDOM&&ve.dom.parentNode==this.contentDOM&&!ve.children.length?rt:Pe}J=xe}this.dirty=rt}markParentsDirty(){let T=1;for(let _=this.parent;_;_=_.parent,T++){let J=T==1?rt:Le;_.dirty<J&&(_.dirty=J)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class be extends de{constructor(T,_,J,oe){let ve,xe=_.type.toDOM;if(typeof xe=="function"&&(xe=xe(J,()=>{if(!ve)return oe;if(ve.parent)return ve.parent.posBeforeChild(ve)})),!_.type.spec.raw){if(xe.nodeType!=1){let Ke=document.createElement("span");Ke.appendChild(xe),xe=Ke}xe.contentEditable="false",xe.classList.add("ProseMirror-widget")}super(T,[],xe,null);this.widget=_,this.widget=_,ve=this}matchesWidget(T){return this.dirty==je&&T.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(T){let _=this.widget.spec.stopEvent;return _?_(T):!1}ignoreMutation(T){return T.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ie extends de{constructor(T,_,J,oe){super(T,[],_,null);this.textDOM=J,this.text=oe}get size(){return this.text.length}localPosFromDOM(T,_){return T!=this.textDOM?this.posAtStart+(_?this.size:0):this.posAtStart+_}domFromPos(T){return{node:this.textDOM,offset:T}}ignoreMutation(T){return T.type==="characterData"&&T.target.nodeValue==T.oldValue}}class ke extends de{constructor(T,_,J,oe){super(T,[],J,oe);this.mark=_}static create(T,_,J,oe){let ve=oe.nodeViews[_.type.name],xe=ve&&ve(_,oe,J);return(!xe||!xe.dom)&&(xe=s.DOMSerializer.renderSpec(document,_.type.spec.toDOM(_,J))),new ke(T,_,xe.dom,xe.contentDOM||xe.dom)}parseRule(){return this.dirty&Pe||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(T){return this.dirty!=Pe&&this.mark.eq(T)}markDirty(T,_){if(super.markDirty(T,_),this.dirty!=je){let J=this.parent;for(;!J.node;)J=J.parent;J.dirty<this.dirty&&(J.dirty=this.dirty),this.dirty=je}}slice(T,_,J){let oe=ke.create(this.parent,this.mark,!0,J),ve=this.children,xe=this.size;_<xe&&(ve=Xe(ve,_,xe,J)),T>0&&(ve=Xe(ve,0,T,J));for(let Ke=0;Ke<ve.length;Ke++)ve[Ke].parent=oe;return oe.children=ve,oe}}class Te extends de{constructor(T,_,J,oe,ve,xe,Ke,qe,vt){super(T,[],ve,xe);this.node=_,this.outerDeco=J,this.innerDeco=oe,this.nodeDOM=Ke,xe&&this.updateChildren(qe,vt)}static create(T,_,J,oe,ve,xe){let Ke=ve.nodeViews[_.type.name],qe,vt=Ke&&Ke(_,ve,()=>{if(!qe)return xe;if(qe.parent)return qe.parent.posBeforeChild(qe)},J,oe),It=vt&&vt.dom,un=vt&&vt.contentDOM;if(_.isText){if(!It)It=document.createTextNode(_.text);else if(It.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else It||({dom:It,contentDOM:un}=s.DOMSerializer.renderSpec(document,_.type.spec.toDOM(_)));!un&&!_.isText&&It.nodeName!="BR"&&(It.hasAttribute("contenteditable")||(It.contentEditable="false"),_.type.spec.draggable&&(It.draggable=!0));let On=It;return It=Kn(It,J,_),vt?qe=new Ce(T,_,J,oe,It,un||null,On,vt,ve,xe+1):_.isText?new H(T,_,J,oe,It,On,ve):new Te(T,_,J,oe,It,un||null,On,ve,xe+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let T={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(T.preserveWhitespace="full"),!this.contentDOM)T.getContent=()=>this.node.content;else if(!this.contentLost)T.contentElement=this.contentDOM;else{for(let _=this.children.length-1;_>=0;_--){let J=this.children[_];if(this.dom.contains(J.dom.parentNode)){T.contentElement=J.dom.parentNode;break}}T.contentElement||(T.getContent=()=>s.Fragment.empty)}return T}matchesNode(T,_,J){return this.dirty==je&&T.eq(this.node)&&Ot(_,this.outerDeco)&&J.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(T,_){let J=this.node.inlineContent,oe=_,ve=T.composing?this.localCompositionInfo(T,_):null,xe=ve&&ve.pos>-1?ve:null,Ke=ve&&ve.pos<0,qe=new Be(this,xe&&xe.node,T);fe(this.node,this.innerDeco,(vt,It,un)=>{vt.spec.marks?qe.syncToMarks(vt.spec.marks,J,T):vt.type.side>=0&&!un&&qe.syncToMarks(It==this.node.childCount?s.Mark.none:this.node.child(It).marks,J,T),qe.placeWidget(vt,T,oe)},(vt,It,un,On)=>{qe.syncToMarks(vt.marks,J,T);let dn;qe.findNodeMatch(vt,It,un,On)||Ke&&T.state.selection.from>oe&&T.state.selection.to<oe+vt.nodeSize&&(dn=qe.findIndexWithChild(ve.node))>-1&&qe.updateNodeAt(vt,It,un,dn,T)||qe.updateNextNode(vt,It,un,T,On)||qe.addNode(vt,It,un,T,oe),oe+=vt.nodeSize}),qe.syncToMarks([],J,T),this.node.isTextblock&&qe.addTextblockHacks(),qe.destroyRest(),(qe.changed||this.dirty==rt)&&(xe&&this.protectLocalComposition(T,xe),Ue(this.contentDOM,this.children,T),L&&ft(this.dom))}localCompositionInfo(T,_){let{from:J,to:oe}=T.state.selection;if(!(T.state.selection instanceof e.TextSelection)||J<_||oe>_+this.node.content.size)return null;let ve=T.domSelectionRange(),xe=nt(ve.focusNode,ve.focusOffset);if(!xe||!this.dom.contains(xe.parentNode))return null;if(this.node.inlineContent){let Ke=xe.nodeValue,qe=ct(this.node.content,Ke,J-_,oe-_);return qe<0?null:{node:xe,pos:qe,text:Ke}}else return{node:xe,pos:-1,text:""}}protectLocalComposition(T,{node:_,pos:J,text:oe}){if(this.getDesc(_))return;let ve=_;for(;ve.parentNode!=this.contentDOM;ve=ve.parentNode){for(;ve.previousSibling;)ve.parentNode.removeChild(ve.previousSibling);for(;ve.nextSibling;)ve.parentNode.removeChild(ve.nextSibling);ve.pmViewDesc&&(ve.pmViewDesc=void 0)}let xe=new Ie(this,ve,_,oe);T.input.compositionNodes.push(xe),this.children=Xe(this.children,J,J+oe.length,T,xe)}update(T,_,J,oe){return this.dirty==Pe||!T.sameMarkup(this.node)?!1:(this.updateInner(T,_,J,oe),!0)}updateInner(T,_,J,oe){this.updateOuterDeco(_),this.node=T,this.innerDeco=J,this.contentDOM&&this.updateChildren(oe,this.posAtStart),this.dirty=je}updateOuterDeco(T){if(Ot(T,this.outerDeco))return;let _=this.nodeDOM.nodeType!=1,J=this.dom;this.dom=Qt(this.dom,this.nodeDOM,yt(this.outerDeco,this.node,_),yt(T,this.node,_)),this.dom!=J&&(J.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=T}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function x(j,T,_,J,oe){return Kn(J,T,j),new Te(void 0,j,T,_,J,J,J,oe,0)}class H extends Te{constructor(T,_,J,oe,ve,xe,Ke){super(T,_,J,oe,ve,null,xe,Ke,0)}parseRule(){let T=this.nodeDOM.parentNode;for(;T&&T!=this.dom&&!T.pmIsDeco;)T=T.parentNode;return{skip:T||!0}}update(T,_,J,oe){return this.dirty==Pe||this.dirty!=je&&!this.inParent()||!T.sameMarkup(this.node)?!1:(this.updateOuterDeco(_),(this.dirty!=je||T.text!=this.node.text)&&T.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=T.text,oe.trackWrites==this.nodeDOM&&(oe.trackWrites=null)),this.node=T,this.dirty=je,!0)}inParent(){let T=this.parent.contentDOM;for(let _=this.nodeDOM;_;_=_.parentNode)if(_==T)return!0;return!1}domFromPos(T){return{node:this.nodeDOM,offset:T}}localPosFromDOM(T,_,J){return T==this.nodeDOM?this.posAtStart+Math.min(_,this.node.text.length):super.localPosFromDOM(T,_,J)}ignoreMutation(T){return T.type!="characterData"&&T.type!="selection"}slice(T,_,J){let oe=this.node.cut(T,_),ve=document.createTextNode(oe.text);return new H(this.parent,oe,this.outerDeco,this.innerDeco,ve,ve,J)}markDirty(T,_){super.markDirty(T,_),this.dom!=this.nodeDOM&&(T==0||_==this.nodeDOM.nodeValue.length)&&(this.dirty=Pe)}get domAtom(){return!1}}class le extends de{parseRule(){return{ignore:!0}}matchesHack(T){return this.dirty==je&&this.dom.nodeName==T}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Ce extends Te{constructor(T,_,J,oe,ve,xe,Ke,qe,vt,It){super(T,_,J,oe,ve,xe,Ke,vt,It);this.spec=qe}update(T,_,J,oe){if(this.dirty==Pe)return!1;if(this.spec.update){let ve=this.spec.update(T,_,J);return ve&&this.updateInner(T,_,J,oe),ve}else return!this.contentDOM&&!T.isLeaf?!1:super.update(T,_,J,oe)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(T,_,J,oe){this.spec.setSelection?this.spec.setSelection(T,_,J):super.setSelection(T,_,J,oe)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(T){return this.spec.stopEvent?this.spec.stopEvent(T):!1}ignoreMutation(T){return this.spec.ignoreMutation?this.spec.ignoreMutation(T):super.ignoreMutation(T)}}function Ue(j,T,_){let J=j.firstChild,oe=!1;for(let ve=0;ve<T.length;ve++){let xe=T[ve],Ke=xe.dom;if(Ke.parentNode==j){for(;Ke!=J;)J=lt(J),oe=!0;J=J.nextSibling}else oe=!0,j.insertBefore(Ke,J);if(xe instanceof ke){let qe=J?J.previousSibling:j.lastChild;Ue(xe.contentDOM,xe.children,_),J=qe?qe.nextSibling:j.firstChild}}for(;J;)J=lt(J),oe=!0;oe&&_.trackWrites==j&&(_.trackWrites=null)}const Ve=function(j){j&&(this.nodeName=j)};Ve.prototype=Object.create(null);const bt=[new Ve];function yt(j,T,_){if(j.length==0)return bt;let J=_?bt[0]:new Ve,oe=[J];for(let ve=0;ve<j.length;ve++){let xe=j[ve].type.attrs;if(!!xe){xe.nodeName&&oe.push(J=new Ve(xe.nodeName));for(let Ke in xe){let qe=xe[Ke];qe!=null&&(_&&oe.length==1&&oe.push(J=new Ve(T.isInline?"span":"div")),Ke=="class"?J.class=(J.class?J.class+" ":"")+qe:Ke=="style"?J.style=(J.style?J.style+";":"")+qe:Ke!="nodeName"&&(J[Ke]=qe))}}}return oe}function Qt(j,T,_,J){if(_==bt&&J==bt)return T;let oe=T;for(let ve=0;ve<J.length;ve++){let xe=J[ve],Ke=_[ve];if(ve){let qe;Ke&&Ke.nodeName==xe.nodeName&&oe!=j&&(qe=oe.parentNode)&&qe.nodeName.toLowerCase()==xe.nodeName||(qe=document.createElement(xe.nodeName),qe.pmIsDeco=!0,qe.appendChild(oe),Ke=bt[0]),oe=qe}tn(oe,Ke||bt[0],xe)}return oe}function tn(j,T,_){for(let J in T)J!="class"&&J!="style"&&J!="nodeName"&&!(J in _)&&j.removeAttribute(J);for(let J in _)J!="class"&&J!="style"&&J!="nodeName"&&_[J]!=T[J]&&j.setAttribute(J,_[J]);if(T.class!=_.class){let J=T.class?T.class.split(" ").filter(Boolean):[],oe=_.class?_.class.split(" ").filter(Boolean):[];for(let ve=0;ve<J.length;ve++)oe.indexOf(J[ve])==-1&&j.classList.remove(J[ve]);for(let ve=0;ve<oe.length;ve++)J.indexOf(oe[ve])==-1&&j.classList.add(oe[ve]);j.classList.length==0&&j.removeAttribute("class")}if(T.style!=_.style){if(T.style){let J=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,oe;for(;oe=J.exec(T.style);)j.style.removeProperty(oe[1])}_.style&&(j.style.cssText+=_.style)}}function Kn(j,T,_){return Qt(j,j,bt,yt(T,_,j.nodeType!=1))}function Ot(j,T){if(j.length!=T.length)return!1;for(let _=0;_<j.length;_++)if(!j[_].type.eq(T[_].type))return!1;return!0}function lt(j){let T=j.nextSibling;return j.parentNode.removeChild(j),T}class Be{constructor(T,_,J){this.lock=_,this.view=J,this.index=0,this.stack=[],this.changed=!1,this.top=T,this.preMatch=_e(T.node.content,T)}destroyBetween(T,_){if(T!=_){for(let J=T;J<_;J++)this.top.children[J].destroy();this.top.children.splice(T,_-T),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(T,_,J){let oe=0,ve=this.stack.length>>1,xe=Math.min(ve,T.length);for(;oe<xe&&(oe==ve-1?this.top:this.stack[oe+1<<1]).matchesMark(T[oe])&&T[oe].type.spec.spanning!==!1;)oe++;for(;oe<ve;)this.destroyRest(),this.top.dirty=je,this.index=this.stack.pop(),this.top=this.stack.pop(),ve--;for(;ve<T.length;){this.stack.push(this.top,this.index+1);let Ke=-1;for(let qe=this.index;qe<Math.min(this.index+3,this.top.children.length);qe++){let vt=this.top.children[qe];if(vt.matchesMark(T[ve])&&!this.isLocked(vt.dom)){Ke=qe;break}}if(Ke>-1)Ke>this.index&&(this.changed=!0,this.destroyBetween(this.index,Ke)),this.top=this.top.children[this.index];else{let qe=ke.create(this.top,T[ve],_,J);this.top.children.splice(this.index,0,qe),this.top=qe,this.changed=!0}this.index=0,ve++}}findNodeMatch(T,_,J,oe){let ve=-1,xe;if(oe>=this.preMatch.index&&(xe=this.preMatch.matches[oe-this.preMatch.index]).parent==this.top&&xe.matchesNode(T,_,J))ve=this.top.children.indexOf(xe,this.index);else for(let Ke=this.index,qe=Math.min(this.top.children.length,Ke+5);Ke<qe;Ke++){let vt=this.top.children[Ke];if(vt.matchesNode(T,_,J)&&!this.preMatch.matched.has(vt)){ve=Ke;break}}return ve<0?!1:(this.destroyBetween(this.index,ve),this.index++,!0)}updateNodeAt(T,_,J,oe,ve){let xe=this.top.children[oe];return xe.dirty==Pe&&xe.dom==xe.contentDOM&&(xe.dirty=rt),xe.update(T,_,J,ve)?(this.destroyBetween(this.index,oe),this.index++,!0):!1}findIndexWithChild(T){for(;;){let _=T.parentNode;if(!_)return-1;if(_==this.top.contentDOM){let J=T.pmViewDesc;if(J){for(let oe=this.index;oe<this.top.children.length;oe++)if(this.top.children[oe]==J)return oe}return-1}T=_}}updateNextNode(T,_,J,oe,ve){for(let xe=this.index;xe<this.top.children.length;xe++){let Ke=this.top.children[xe];if(Ke instanceof Te){let qe=this.preMatch.matched.get(Ke);if(qe!=null&&qe!=ve)return!1;let vt=Ke.dom;if(!(this.isLocked(vt)&&!(T.isText&&Ke.node&&Ke.node.isText&&Ke.nodeDOM.nodeValue==T.text&&Ke.dirty!=Pe&&Ot(_,Ke.outerDeco)))&&Ke.update(T,_,J,oe))return this.destroyBetween(this.index,xe),Ke.dom!=vt&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(T,_,J,oe,ve){this.top.children.splice(this.index++,0,Te.create(this.top,T,_,J,oe,ve)),this.changed=!0}placeWidget(T,_,J){let oe=this.index<this.top.children.length?this.top.children[this.index]:null;if(oe&&oe.matchesWidget(T)&&(T==oe.widget||!oe.widget.type.toDOM.parentNode))this.index++;else{let ve=new be(this.top,T,_,J);this.top.children.splice(this.index++,0,ve),this.changed=!0}}addTextblockHacks(){let T=this.top.children[this.index-1],_=this.top;for(;T instanceof ke;)_=T,T=_.children[_.children.length-1];(!T||!(T instanceof H)||/\n$/.test(T.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(T.node.text))&&((A||M)&&T&&T.dom.contentEditable=="false"&&this.addHackNode("IMG",_),this.addHackNode("BR",this.top))}addHackNode(T,_){if(_==this.top&&this.index<_.children.length&&_.children[this.index].matchesHack(T))this.index++;else{let J=document.createElement(T);T=="IMG"&&(J.className="ProseMirror-separator",J.alt=""),T=="BR"&&(J.className="ProseMirror-trailingBreak");let oe=new le(this.top,[],J,null);_!=this.top?_.children.push(oe):_.children.splice(this.index++,0,oe),this.changed=!0}}isLocked(T){return this.lock&&(T==this.lock||T.nodeType==1&&T.contains(this.lock.parentNode))}}function _e(j,T){let _=T,J=_.children.length,oe=j.childCount,ve=new Map,xe=[];e:for(;oe>0;){let Ke;for(;;)if(J){let vt=_.children[J-1];if(vt instanceof ke)_=vt,J=vt.children.length;else{Ke=vt,J--;break}}else{if(_==T)break e;J=_.parent.children.indexOf(_),_=_.parent}let qe=Ke.node;if(!!qe){if(qe!=j.child(oe-1))break;--oe,ve.set(Ke,oe),xe.push(Ke)}}return{index:oe,matched:ve,matches:xe.reverse()}}function Ae(j,T){return j.type.side-T.type.side}function fe(j,T,_,J){let oe=T.locals(j),ve=0;if(oe.length==0){for(let vt=0;vt<j.childCount;vt++){let It=j.child(vt);J(It,oe,T.forChild(ve,It),vt),ve+=It.nodeSize}return}let xe=0,Ke=[],qe=null;for(let vt=0;;){if(xe<oe.length&&oe[xe].to==ve){let In=oe[xe++],Qn;for(;xe<oe.length&&oe[xe].to==ve;)(Qn||(Qn=[In])).push(oe[xe++]);if(Qn){Qn.sort(Ae);for(let dr=0;dr<Qn.length;dr++)_(Qn[dr],vt,!!qe)}else _(In,vt,!!qe)}let It,un;if(qe)un=-1,It=qe,qe=null;else if(vt<j.childCount)un=vt,It=j.child(vt++);else break;for(let In=0;In<Ke.length;In++)Ke[In].to<=ve&&Ke.splice(In--,1);for(;xe<oe.length&&oe[xe].from<=ve&&oe[xe].to>ve;)Ke.push(oe[xe++]);let On=ve+It.nodeSize;if(It.isText){let In=On;xe<oe.length&&oe[xe].from<In&&(In=oe[xe].from);for(let Qn=0;Qn<Ke.length;Qn++)Ke[Qn].to<In&&(In=Ke[Qn].to);In<On&&(qe=It.cut(In-ve),It=It.cut(0,In-ve),On=In,un=-1)}let dn=It.isInline&&!It.isLeaf?Ke.filter(In=>!In.inline):Ke.slice();J(It,dn,T.forChild(ve,It),un),ve=On}}function ft(j){if(j.nodeName=="UL"||j.nodeName=="OL"){let T=j.style.cssText;j.style.cssText=T+"; list-style: square !important",window.getComputedStyle(j).listStyle,j.style.cssText=T}}function nt(j,T){for(;;){if(j.nodeType==3)return j;if(j.nodeType==1&&T>0){if(j.childNodes.length>T&&j.childNodes[T].nodeType==3)return j.childNodes[T];j=j.childNodes[T-1],T=v(j)}else if(j.nodeType==1&&T<j.childNodes.length)j=j.childNodes[T],T=0;else return null}}function ct(j,T,_,J){for(let oe=0,ve=0;oe<j.childCount&&ve<=J;){let xe=j.child(oe++),Ke=ve;if(ve+=xe.nodeSize,!xe.isText)continue;let qe=xe.text;for(;oe<j.childCount;){let vt=j.child(oe++);if(ve+=vt.nodeSize,!vt.isText)break;qe+=vt.text}if(ve>=_){let vt=Ke<J?qe.lastIndexOf(T,J-Ke-1):-1;if(vt>=0&&vt+T.length+Ke>=_)return Ke+vt;if(_==J&&qe.length>=J+T.length-Ke&&qe.slice(J-Ke,J-Ke+T.length)==T)return J}}return-1}function Xe(j,T,_,J,oe){let ve=[];for(let xe=0,Ke=0;xe<j.length;xe++){let qe=j[xe],vt=Ke,It=Ke+=qe.size;vt>=_||It<=T?ve.push(qe):(vt<T&&ve.push(qe.slice(0,T-vt,J)),oe&&(ve.push(oe),oe=void 0),It>_&&ve.push(qe.slice(_-vt,qe.size,J)))}return ve}function gt(j,T=null){let _=j.domSelectionRange(),J=j.state.doc;if(!_.focusNode)return null;let oe=j.docView.nearestDesc(_.focusNode),ve=oe&&oe.size==0,xe=j.docView.posFromDOM(_.focusNode,_.focusOffset,1);if(xe<0)return null;let Ke=J.resolve(xe),qe,vt;if(r(_)){for(qe=Ke;oe&&!oe.node;)oe=oe.parent;let It=oe.node;if(oe&&It.isAtom&&e.NodeSelection.isSelectable(It)&&oe.parent&&!(It.isInline&&O(_.focusNode,_.focusOffset,oe.dom))){let un=oe.posBefore;vt=new e.NodeSelection(xe==un?Ke:J.resolve(un))}}else{let It=j.docView.posFromDOM(_.anchorNode,_.anchorOffset,1);if(It<0)return null;qe=J.resolve(It)}if(!vt){let It=T=="pointer"||j.state.selection.head<Ke.pos&&!ve?1:-1;vt=fr(j,qe,Ke,It)}return vt}function Tt(j){return j.editable?j.hasFocus():er(j)&&document.activeElement&&document.activeElement.contains(j.dom)}function Ut(j,T=!1){let _=j.state.selection;if(bn(j,_),!!Tt(j)){if(!T&&j.input.mouseDown&&j.input.mouseDown.allowDefault&&M){let J=j.domSelectionRange(),oe=j.domObserver.currentSelection;if(J.anchorNode&&oe.anchorNode&&h(J.anchorNode,J.anchorOffset,oe.anchorNode,oe.anchorOffset)){j.input.mouseDown.delayedSelectionSync=!0,j.domObserver.setCurSelection();return}}if(j.domObserver.disconnectSelection(),j.cursorWrapper)Un(j);else{let{anchor:J,head:oe}=_,ve,xe;qt&&!(_ instanceof e.TextSelection)&&(_.$from.parent.inlineContent||(ve=sn(j,_.from)),!_.empty&&!_.$from.parent.inlineContent&&(xe=sn(j,_.to))),j.docView.setSelection(J,oe,j.root,T),qt&&(ve&&Hn(ve),xe&&Hn(xe)),_.visible?j.dom.classList.remove("ProseMirror-hideselection"):(j.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&wn(j))}j.domObserver.setCurSelection(),j.domObserver.connectSelection()}}const qt=A||M&&N<63;function sn(j,T){let{node:_,offset:J}=j.docView.domFromPos(T,0),oe=J<_.childNodes.length?_.childNodes[J]:null,ve=J?_.childNodes[J-1]:null;if(A&&oe&&oe.contentEditable=="false")return _n(oe);if((!oe||oe.contentEditable=="false")&&(!ve||ve.contentEditable=="false")){if(oe)return _n(oe);if(ve)return _n(ve)}}function _n(j){return j.contentEditable="true",A&&j.draggable&&(j.draggable=!1,j.wasDraggable=!0),j}function Hn(j){j.contentEditable="false",j.wasDraggable&&(j.draggable=!0,j.wasDraggable=null)}function wn(j){let T=j.dom.ownerDocument;T.removeEventListener("selectionchange",j.input.hideSelectionGuard);let _=j.domSelectionRange(),J=_.anchorNode,oe=_.anchorOffset;T.addEventListener("selectionchange",j.input.hideSelectionGuard=()=>{(_.anchorNode!=J||_.anchorOffset!=oe)&&(T.removeEventListener("selectionchange",j.input.hideSelectionGuard),setTimeout(()=>{(!Tt(j)||j.state.selection.visible)&&j.dom.classList.remove("ProseMirror-hideselection")},20))})}function Un(j){let T=j.domSelection(),_=document.createRange(),J=j.cursorWrapper.dom,oe=J.nodeName=="IMG";oe?_.setEnd(J.parentNode,a(J)+1):_.setEnd(J,0),_.collapse(!1),T.removeAllRanges(),T.addRange(_),!oe&&!j.state.selection.visible&&W&&B<=11&&(J.disabled=!0,J.disabled=!1)}function bn(j,T){if(T instanceof e.NodeSelection){let _=j.docView.descAt(T.from);_!=j.lastSelectedViewDesc&&(cr(j),_&&_.selectNode(),j.lastSelectedViewDesc=_)}else cr(j)}function cr(j){j.lastSelectedViewDesc&&(j.lastSelectedViewDesc.parent&&j.lastSelectedViewDesc.deselectNode(),j.lastSelectedViewDesc=void 0)}function fr(j,T,_,J){return j.someProp("createSelectionBetween",oe=>oe(j,T,_))||e.TextSelection.between(T,_,J)}function ur(j){return j.editable&&!j.hasFocus()?!1:er(j)}function er(j){let T=j.domSelectionRange();if(!T.anchorNode)return!1;try{return j.dom.contains(T.anchorNode.nodeType==3?T.anchorNode.parentNode:T.anchorNode)&&(j.editable||j.dom.contains(T.focusNode.nodeType==3?T.focusNode.parentNode:T.focusNode))}catch(_){return!1}}function jr(j){let T=j.docView.domFromPos(j.state.selection.anchor,0),_=j.domSelectionRange();return h(T.node,T.offset,_.anchorNode,_.anchorOffset)}function wt(j,T){let{$anchor:_,$head:J}=j.selection,oe=T>0?_.max(J):_.min(J),ve=oe.parent.inlineContent?oe.depth?j.doc.resolve(T>0?oe.after():oe.before()):null:oe;return ve&&e.Selection.findFrom(ve,T)}function mt(j,T){return j.dispatch(j.state.tr.setSelection(T).scrollIntoView()),!0}function Fe(j,T,_){let J=j.state.selection;if(J instanceof e.TextSelection){if(!J.empty||_.indexOf("s")>-1)return!1;if(j.endOfTextblock(T>0?"right":"left")){let oe=wt(j.state,T);return oe&&oe instanceof e.NodeSelection?mt(j,oe):!1}else if(!(C&&_.indexOf("m")>-1)){let oe=J.$head,ve=oe.textOffset?null:T<0?oe.nodeBefore:oe.nodeAfter,xe;if(!ve||ve.isText)return!1;let Ke=T<0?oe.pos-ve.nodeSize:oe.pos;return ve.isAtom||(xe=j.docView.descAt(Ke))&&!xe.contentDOM?e.NodeSelection.isSelectable(ve)?mt(j,new e.NodeSelection(T<0?j.state.doc.resolve(oe.pos-ve.nodeSize):oe)):U?mt(j,new e.TextSelection(j.state.doc.resolve(T<0?Ke:Ke+ve.nodeSize))):!1:!1}}else{if(J instanceof e.NodeSelection&&J.node.isInline)return mt(j,new e.TextSelection(T>0?J.$to:J.$from));{let oe=wt(j.state,T);return oe?mt(j,oe):!1}}}function pt(j){return j.nodeType==3?j.nodeValue.length:j.childNodes.length}function Dt(j){let T=j.pmViewDesc;return T&&T.size==0&&(j.nextSibling||j.nodeName!="BR")}function Jt(j){let T=j.domSelectionRange(),_=T.focusNode,J=T.focusOffset;if(!_)return;let oe,ve,xe=!1;for(f&&_.nodeType==1&&J<pt(_)&&Dt(_.childNodes[J])&&(xe=!0);;)if(J>0){if(_.nodeType!=1)break;{let Ke=_.childNodes[J-1];if(Dt(Ke))oe=_,ve=--J;else if(Ke.nodeType==3)_=Ke,J=_.nodeValue.length;else break}}else{if(mn(_))break;{let Ke=_.previousSibling;for(;Ke&&Dt(Ke);)oe=_.parentNode,ve=a(Ke),Ke=Ke.previousSibling;if(Ke)_=Ke,J=pt(_);else{if(_=_.parentNode,_==j.dom)break;J=0}}}xe?Cn(j,_,J):oe&&Cn(j,oe,ve)}function Gt(j){let T=j.domSelectionRange(),_=T.focusNode,J=T.focusOffset;if(!_)return;let oe=pt(_),ve,xe;for(;;)if(J<oe){if(_.nodeType!=1)break;let Ke=_.childNodes[J];if(Dt(Ke))ve=_,xe=++J;else break}else{if(mn(_))break;{let Ke=_.nextSibling;for(;Ke&&Dt(Ke);)ve=Ke.parentNode,xe=a(Ke)+1,Ke=Ke.nextSibling;if(Ke)_=Ke,J=0,oe=pt(_);else{if(_=_.parentNode,_==j.dom)break;J=oe=0}}}ve&&Cn(j,ve,xe)}function mn(j){let T=j.pmViewDesc;return T&&T.node&&T.node.isBlock}function Cn(j,T,_){let J=j.domSelection();if(r(J)){let ve=document.createRange();ve.setEnd(T,_),ve.setStart(T,_),J.removeAllRanges(),J.addRange(ve)}else J.extend&&J.extend(T,_);j.domObserver.setCurSelection();let{state:oe}=j;setTimeout(()=>{j.state==oe&&Ut(j)},50)}function tr(j,T,_){let J=j.state.selection;if(J instanceof e.TextSelection&&!J.empty||_.indexOf("s")>-1||C&&_.indexOf("m")>-1)return!1;let{$from:oe,$to:ve}=J;if(!oe.parent.inlineContent||j.endOfTextblock(T<0?"up":"down")){let xe=wt(j.state,T);if(xe&&xe instanceof e.NodeSelection)return mt(j,xe)}if(!oe.parent.inlineContent){let xe=T<0?oe:ve,Ke=J instanceof e.AllSelection?e.Selection.near(xe,T):e.Selection.findFrom(xe,T);return Ke?mt(j,Ke):!1}return!1}function Zn(j,T){if(!(j.state.selection instanceof e.TextSelection))return!0;let{$head:_,$anchor:J,empty:oe}=j.state.selection;if(!_.sameParent(J))return!0;if(!oe)return!1;if(j.endOfTextblock(T>0?"forward":"backward"))return!0;let ve=!_.textOffset&&(T<0?_.nodeBefore:_.nodeAfter);if(ve&&!ve.isText){let xe=j.state.tr;return T<0?xe.delete(_.pos-ve.nodeSize,_.pos):xe.delete(_.pos,_.pos+ve.nodeSize),j.dispatch(xe),!0}return!1}function At(j,T,_){j.domObserver.stop(),T.contentEditable=_,j.domObserver.start()}function Xt(j){if(!A||j.state.selection.$head.parentOffset>0)return!1;let{focusNode:T,focusOffset:_}=j.domSelectionRange();if(T&&T.nodeType==1&&_==0&&T.firstChild&&T.firstChild.contentEditable=="false"){let J=T.firstChild;At(j,J,"true"),setTimeout(()=>At(j,J,"false"),20)}return!1}function en(j){let T="";return j.ctrlKey&&(T+="c"),j.metaKey&&(T+="m"),j.altKey&&(T+="a"),j.shiftKey&&(T+="s"),T}function $n(j,T){let _=T.keyCode,J=en(T);return _==8||C&&_==72&&J=="c"?Zn(j,-1)||Jt(j):_==46||C&&_==68&&J=="c"?Zn(j,1)||Gt(j):_==13||_==27?!0:_==37||C&&_==66&&J=="c"?Fe(j,-1,J)||Jt(j):_==39||C&&_==70&&J=="c"?Fe(j,1,J)||Gt(j):_==38||C&&_==80&&J=="c"?tr(j,-1,J)||Jt(j):_==40||C&&_==78&&J=="c"?Xt(j)||tr(j,1,J)||Gt(j):J==(C?"m":"c")&&(_==66||_==73||_==89||_==90)}function Xn(j,T){j.someProp("transformCopied",dn=>{T=dn(T,j)});let _=[],{content:J,openStart:oe,openEnd:ve}=T;for(;oe>1&&ve>1&&J.childCount==1&&J.firstChild.childCount==1;){oe--,ve--;let dn=J.firstChild;_.push(dn.type.name,dn.attrs!=dn.type.defaultAttrs?dn.attrs:null),J=dn.content}let xe=j.someProp("clipboardSerializer")||s.DOMSerializer.fromSchema(j.state.schema),Ke=Tn(),qe=Ke.createElement("div");qe.appendChild(xe.serializeFragment(J,{document:Ke}));let vt=qe.firstChild,It,un=0;for(;vt&&vt.nodeType==1&&(It=Vt[vt.nodeName.toLowerCase()]);){for(let dn=It.length-1;dn>=0;dn--){let In=Ke.createElement(It[dn]);for(;qe.firstChild;)In.appendChild(qe.firstChild);qe.appendChild(In),un++}vt=qe.firstChild}vt&&vt.nodeType==1&&vt.setAttribute("data-pm-slice",`${oe} ${ve}${un?` -${un}`:""} ${JSON.stringify(_)}`);let On=j.someProp("clipboardTextSerializer",dn=>dn(T,j))||T.content.textBetween(0,T.content.size,`

`);return{dom:qe,text:On}}function Yn(j,T,_,J,oe){let ve=oe.parent.type.spec.code,xe,Ke;if(!_&&!T)return null;let qe=T&&(J||ve||!_);if(qe){if(j.someProp("transformPastedText",On=>{T=On(T,ve||J,j)}),ve)return T?new s.Slice(s.Fragment.from(j.state.schema.text(T.replace(/\r\n?/g,`
`))),0,0):s.Slice.empty;let un=j.someProp("clipboardTextParser",On=>On(T,oe,J,j));if(un)Ke=un;else{let On=oe.marks(),{schema:dn}=j.state,In=s.DOMSerializer.fromSchema(dn);xe=document.createElement("div"),T.split(/(?:\r\n?|\n)+/).forEach(Qn=>{let dr=xe.appendChild(document.createElement("p"));Qn&&dr.appendChild(In.serializeNode(dn.text(Qn,On)))})}}else j.someProp("transformPastedHTML",un=>{_=un(_,j)}),xe=pn(_),U&&Gn(xe);let vt=xe&&xe.querySelector("[data-pm-slice]"),It=vt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(vt.getAttribute("data-pm-slice")||"");if(It&&It[3])for(let un=+It[3];un>0;un--){let On=xe.firstChild;for(;On&&On.nodeType!=1;)On=On.nextSibling;if(!On)break;xe=On}if(Ke||(Ke=(j.someProp("clipboardParser")||j.someProp("domParser")||s.DOMParser.fromSchema(j.state.schema)).parseSlice(xe,{preserveWhitespace:!!(qe||It),context:oe,ruleFromNode(On){return On.nodeName=="BR"&&!On.nextSibling&&On.parentNode&&!Sn.test(On.parentNode.nodeName)?{ignore:!0}:null}})),It)Ke=hr(Wt(Ke,+It[1],+It[2]),It[4]);else if(Ke=s.Slice.maxOpen(nr(Ke.content,oe),!0),Ke.openStart||Ke.openEnd){let un=0,On=0;for(let dn=Ke.content.firstChild;un<Ke.openStart&&!dn.type.spec.isolating;un++,dn=dn.firstChild);for(let dn=Ke.content.lastChild;On<Ke.openEnd&&!dn.type.spec.isolating;On++,dn=dn.lastChild);Ke=Wt(Ke,un,On)}return j.someProp("transformPasted",un=>{Ke=un(Ke,j)}),Ke}const Sn=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function nr(j,T){if(j.childCount<2)return j;for(let _=T.depth;_>=0;_--){let oe=T.node(_).contentMatchAt(T.index(_)),ve,xe=[];if(j.forEach(Ke=>{if(!xe)return;let qe=oe.findWrapping(Ke.type),vt;if(!qe)return xe=null;if(vt=xe.length&&ve.length&&Kt(qe,ve,Ke,xe[xe.length-1],0))xe[xe.length-1]=vt;else{xe.length&&(xe[xe.length-1]=$t(xe[xe.length-1],ve.length));let It=zt(Ke,qe);xe.push(It),oe=oe.matchType(It.type),ve=qe}}),xe)return s.Fragment.from(xe)}return j}function zt(j,T,_=0){for(let J=T.length-1;J>=_;J--)j=T[J].create(null,s.Fragment.from(j));return j}function Kt(j,T,_,J,oe){if(oe<j.length&&oe<T.length&&j[oe]==T[oe]){let ve=Kt(j,T,_,J.lastChild,oe+1);if(ve)return J.copy(J.content.replaceChild(J.childCount-1,ve));if(J.contentMatchAt(J.childCount).matchType(oe==j.length-1?_.type:j[oe+1]))return J.copy(J.content.append(s.Fragment.from(zt(_,j,oe+1))))}}function $t(j,T){if(T==0)return j;let _=j.content.replaceChild(j.childCount-1,$t(j.lastChild,T-1)),J=j.contentMatchAt(j.childCount).fillBefore(s.Fragment.empty,!0);return j.copy(_.append(J))}function et(j,T,_,J,oe,ve){let xe=T<0?j.firstChild:j.lastChild,Ke=xe.content;return oe<J-1&&(Ke=et(Ke,T,_,J,oe+1,ve)),oe>=_&&(Ke=T<0?xe.contentMatchAt(0).fillBefore(Ke,j.childCount>1||ve<=oe).append(Ke):Ke.append(xe.contentMatchAt(xe.childCount).fillBefore(s.Fragment.empty,!0))),j.replaceChild(T<0?0:j.childCount-1,xe.copy(Ke))}function Wt(j,T,_){return T<j.openStart&&(j=new s.Slice(et(j.content,-1,T,j.openStart,0,j.openEnd),T,j.openEnd)),_<j.openEnd&&(j=new s.Slice(et(j.content,1,_,j.openEnd,0,0),j.openStart,_)),j}const Vt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let cn=null;function Tn(){return cn||(cn=document.implementation.createHTMLDocument("title"))}function pn(j){let T=/^(\s*<meta [^>]*>)*/.exec(j);T&&(j=j.slice(T[0].length));let _=Tn().createElement("div"),J=/<([a-z][^>\s]+)/i.exec(j),oe;if((oe=J&&Vt[J[1].toLowerCase()])&&(j=oe.map(ve=>"<"+ve+">").join("")+j+oe.map(ve=>"</"+ve+">").reverse().join("")),_.innerHTML=j,oe)for(let ve=0;ve<oe.length;ve++)_=_.querySelector(oe[ve])||_;return _}function Gn(j){let T=j.querySelectorAll(M?"span:not([class]):not([style])":"span.Apple-converted-space");for(let _=0;_<T.length;_++){let J=T[_];J.childNodes.length==1&&J.textContent=="\xA0"&&J.parentNode&&J.parentNode.replaceChild(j.ownerDocument.createTextNode(" "),J)}}function hr(j,T){if(!j.size)return j;let _=j.content.firstChild.type.schema,J;try{J=JSON.parse(T)}catch(Ke){return j}let{content:oe,openStart:ve,openEnd:xe}=j;for(let Ke=J.length-2;Ke>=0;Ke-=2){let qe=_.nodes[J[Ke]];if(!qe||qe.hasRequiredAttrs())break;oe=s.Fragment.from(qe.create(J[Ke+1],oe)),ve++,xe++}return new s.Slice(oe,ve,xe)}const Rn={},pr={},zn={touchstart:!0,touchmove:!0};class Ar{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Rr(j){for(let T in Rn){let _=Rn[T];j.dom.addEventListener(T,j.input.eventHandlers[T]=J=>{br(j,J)&&!yr(j,J)&&(j.editable||!(J.type in pr))&&_(j,J)},zn[T]?{passive:!0}:void 0)}A&&j.dom.addEventListener("input",()=>null),Pr(j)}function ir(j,T){j.input.lastSelectionOrigin=T,j.input.lastSelectionTime=Date.now()}function Sr(j){j.domObserver.stop();for(let T in j.input.eventHandlers)j.dom.removeEventListener(T,j.input.eventHandlers[T]);clearTimeout(j.input.composingTimeout),clearTimeout(j.input.lastIOSEnterFallbackTimeout)}function Pr(j){j.someProp("handleDOMEvents",T=>{for(let _ in T)j.input.eventHandlers[_]||j.dom.addEventListener(_,j.input.eventHandlers[_]=J=>yr(j,J))})}function yr(j,T){return j.someProp("handleDOMEvents",_=>{let J=_[T.type];return J?J(j,T)||T.defaultPrevented:!1})}function br(j,T){if(!T.bubbles)return!0;if(T.defaultPrevented)return!1;for(let _=T.target;_!=j.dom;_=_.parentNode)if(!_||_.nodeType==11||_.pmViewDesc&&_.pmViewDesc.stopEvent(T))return!1;return!0}function Br(j,T){!yr(j,T)&&Rn[T.type]&&(j.editable||!(T.type in pr))&&Rn[T.type](j,T)}pr.keydown=(j,T)=>{let _=T;if(j.input.shiftKey=_.keyCode==16||_.shiftKey,!Jo(j,_)&&(j.input.lastKeyCode=_.keyCode,j.input.lastKeyCodeTime=Date.now(),!(R&&M&&_.keyCode==13)))if(_.keyCode!=229&&j.domObserver.forceFlush(),L&&_.keyCode==13&&!_.ctrlKey&&!_.altKey&&!_.metaKey){let J=Date.now();j.input.lastIOSEnter=J,j.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{j.input.lastIOSEnter==J&&(j.someProp("handleKeyDown",oe=>oe(j,i(13,"Enter"))),j.input.lastIOSEnter=0)},200)}else j.someProp("handleKeyDown",J=>J(j,_))||$n(j,_)?_.preventDefault():ir(j,"key")},pr.keyup=(j,T)=>{T.keyCode==16&&(j.input.shiftKey=!1)},pr.keypress=(j,T)=>{let _=T;if(Jo(j,_)||!_.charCode||_.ctrlKey&&!_.altKey||C&&_.metaKey)return;if(j.someProp("handleKeyPress",oe=>oe(j,_))){_.preventDefault();return}let J=j.state.selection;if(!(J instanceof e.TextSelection)||!J.$from.sameParent(J.$to)){let oe=String.fromCharCode(_.charCode);!/[\r\n]/.test(oe)&&!j.someProp("handleTextInput",ve=>ve(j,J.$from.pos,J.$to.pos,oe))&&j.dispatch(j.state.tr.insertText(oe).scrollIntoView()),_.preventDefault()}};function Nr(j){return{left:j.clientX,top:j.clientY}}function lo(j,T){let _=T.x-j.clientX,J=T.y-j.clientY;return _*_+J*J<100}function Zr(j,T,_,J,oe){if(J==-1)return!1;let ve=j.state.doc.resolve(J);for(let xe=ve.depth+1;xe>0;xe--)if(j.someProp(T,Ke=>xe>ve.depth?Ke(j,_,ve.nodeAfter,ve.before(xe),oe,!0):Ke(j,_,ve.node(xe),ve.before(xe),oe,!1)))return!0;return!1}function zr(j,T,_){j.focused||j.focus();let J=j.state.tr.setSelection(T);_=="pointer"&&J.setMeta("pointer",!0),j.dispatch(J)}function wr(j,T){if(T==-1)return!1;let _=j.state.doc.resolve(T),J=_.nodeAfter;return J&&J.isAtom&&e.NodeSelection.isSelectable(J)?(zr(j,new e.NodeSelection(_),"pointer"),!0):!1}function $o(j,T){if(T==-1)return!1;let _=j.state.selection,J,oe;_ instanceof e.NodeSelection&&(J=_.node);let ve=j.state.doc.resolve(T);for(let xe=ve.depth+1;xe>0;xe--){let Ke=xe>ve.depth?ve.nodeAfter:ve.node(xe);if(e.NodeSelection.isSelectable(Ke)){J&&_.$from.depth>0&&xe>=_.$from.depth&&ve.before(_.$from.depth+1)==_.$from.pos?oe=ve.before(_.$from.depth):oe=ve.before(xe);break}}return oe!=null?(zr(j,e.NodeSelection.create(j.state.doc,oe),"pointer"),!0):!1}function xo(j,T,_,J,oe){return Zr(j,"handleClickOn",T,_,J)||j.someProp("handleClick",ve=>ve(j,T,J))||(oe?$o(j,_):wr(j,_))}function Vo(j,T,_,J){return Zr(j,"handleDoubleClickOn",T,_,J)||j.someProp("handleDoubleClick",oe=>oe(j,T,J))}function Ti(j,T,_,J){return Zr(j,"handleTripleClickOn",T,_,J)||j.someProp("handleTripleClick",oe=>oe(j,T,J))||Ho(j,_,J)}function Ho(j,T,_){if(_.button!=0)return!1;let J=j.state.doc;if(T==-1)return J.inlineContent?(zr(j,e.TextSelection.create(J,0,J.content.size),"pointer"),!0):!1;let oe=J.resolve(T);for(let ve=oe.depth+1;ve>0;ve--){let xe=ve>oe.depth?oe.nodeAfter:oe.node(ve),Ke=oe.before(ve);if(xe.inlineContent)zr(j,e.TextSelection.create(J,Ke+1,Ke+1+xe.content.size),"pointer");else if(e.NodeSelection.isSelectable(xe))zr(j,e.NodeSelection.create(J,Ke),"pointer");else continue;return!0}}function oi(j){return qo(j)}const zo=C?"metaKey":"ctrlKey";Rn.mousedown=(j,T)=>{let _=T;j.input.shiftKey=_.shiftKey;let J=oi(j),oe=Date.now(),ve="singleClick";oe-j.input.lastClick.time<500&&lo(_,j.input.lastClick)&&!_[zo]&&(j.input.lastClick.type=="singleClick"?ve="doubleClick":j.input.lastClick.type=="doubleClick"&&(ve="tripleClick")),j.input.lastClick={time:oe,x:_.clientX,y:_.clientY,type:ve};let xe=j.posAtCoords(Nr(_));!xe||(ve=="singleClick"?(j.input.mouseDown&&j.input.mouseDown.done(),j.input.mouseDown=new ho(j,xe,_,!!J)):(ve=="doubleClick"?Vo:Ti)(j,xe.pos,xe.inside,_)?_.preventDefault():ir(j,"pointer"))};class ho{constructor(T,_,J,oe){this.view=T,this.pos=_,this.event=J,this.flushed=oe,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=T.state.doc,this.selectNode=!!J[zo],this.allowDefault=J.shiftKey;let ve,xe;if(_.inside>-1)ve=T.state.doc.nodeAt(_.inside),xe=_.inside;else{let It=T.state.doc.resolve(_.pos);ve=It.parent,xe=It.depth?It.before():0}const Ke=oe?null:J.target,qe=Ke?T.docView.nearestDesc(Ke,!0):null;this.target=qe?qe.dom:null;let{selection:vt}=T.state;(J.button==0&&ve.type.spec.draggable&&ve.type.spec.selectable!==!1||vt instanceof e.NodeSelection&&vt.from<=xe&&vt.to>xe)&&(this.mightDrag={node:ve,pos:xe,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&f&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),T.root.addEventListener("mouseup",this.up=this.up.bind(this)),T.root.addEventListener("mousemove",this.move=this.move.bind(this)),ir(T,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ut(this.view)),this.view.input.mouseDown=null}up(T){if(this.done(),!this.view.dom.contains(T.target))return;let _=this.pos;this.view.state.doc!=this.startDoc&&(_=this.view.posAtCoords(Nr(T))),this.updateAllowDefault(T),this.allowDefault||!_?ir(this.view,"pointer"):xo(this.view,_.pos,_.inside,T,this.selectNode)?T.preventDefault():T.button==0&&(this.flushed||A&&this.mightDrag&&!this.mightDrag.node.isAtom||M&&!this.view.state.selection.visible&&Math.min(Math.abs(_.pos-this.view.state.selection.from),Math.abs(_.pos-this.view.state.selection.to))<=2)?(zr(this.view,e.Selection.near(this.view.state.doc.resolve(_.pos)),"pointer"),T.preventDefault()):ir(this.view,"pointer")}move(T){this.updateAllowDefault(T),ir(this.view,"pointer"),T.buttons==0&&this.done()}updateAllowDefault(T){!this.allowDefault&&(Math.abs(this.event.x-T.clientX)>4||Math.abs(this.event.y-T.clientY)>4)&&(this.allowDefault=!0)}}Rn.touchstart=j=>{j.input.lastTouch=Date.now(),oi(j),ir(j,"pointer")},Rn.touchmove=j=>{j.input.lastTouch=Date.now(),ir(j,"pointer")},Rn.contextmenu=j=>oi(j);function Jo(j,T){return j.composing?!0:A&&Math.abs(T.timeStamp-j.input.compositionEndedAt)<500?(j.input.compositionEndedAt=-2e8,!0):!1}const gi=R?5e3:-1;pr.compositionstart=pr.compositionupdate=j=>{if(!j.composing){j.domObserver.flush();let{state:T}=j,_=T.selection.$from;if(T.selection.empty&&(T.storedMarks||!_.textOffset&&_.parentOffset&&_.nodeBefore.marks.some(J=>J.type.spec.inclusive===!1)))j.markCursor=j.state.storedMarks||_.marks(),qo(j,!0),j.markCursor=null;else if(qo(j),f&&T.selection.empty&&_.parentOffset&&!_.textOffset&&_.nodeBefore.marks.length){let J=j.domSelectionRange();for(let oe=J.focusNode,ve=J.focusOffset;oe&&oe.nodeType==1&&ve!=0;){let xe=ve<0?oe.lastChild:oe.childNodes[ve-1];if(!xe)break;if(xe.nodeType==3){j.domSelection().collapse(xe,xe.nodeValue.length);break}else oe=xe,ve=-1}}j.input.composing=!0}ki(j,gi)},pr.compositionend=(j,T)=>{j.composing&&(j.input.composing=!1,j.input.compositionEndedAt=T.timeStamp,ki(j,20))};function ki(j,T){clearTimeout(j.input.composingTimeout),T>-1&&(j.input.composingTimeout=setTimeout(()=>qo(j),T))}function ao(j){for(j.composing&&(j.input.composing=!1,j.input.compositionEndedAt=Po());j.input.compositionNodes.length>0;)j.input.compositionNodes.pop().markParentsDirty()}function Po(){let j=document.createEvent("Event");return j.initEvent("event",!0,!0),j.timeStamp}function qo(j,T=!1){if(!(R&&j.domObserver.flushingSoon>=0)){if(j.domObserver.forceFlush(),ao(j),T||j.docView&&j.docView.dirty){let _=gt(j);return _&&!_.eq(j.state.selection)?j.dispatch(j.state.tr.setSelection(_)):j.updateState(j.state),!0}return!1}}function Ai(j,T){if(!j.dom.parentNode)return;let _=j.dom.parentNode.appendChild(document.createElement("div"));_.appendChild(T),_.style.cssText="position: fixed; left: -10000px; top: 10px";let J=getSelection(),oe=document.createRange();oe.selectNodeContents(T),j.dom.blur(),J.removeAllRanges(),J.addRange(oe),setTimeout(()=>{_.parentNode&&_.parentNode.removeChild(_),j.focus()},50)}const hi=W&&B<15||L&&Z<604;Rn.copy=pr.cut=(j,T)=>{let _=T,J=j.state.selection,oe=_.type=="cut";if(J.empty)return;let ve=hi?null:_.clipboardData,xe=J.content(),{dom:Ke,text:qe}=Xn(j,xe);ve?(_.preventDefault(),ve.clearData(),ve.setData("text/html",Ke.innerHTML),ve.setData("text/plain",qe)):Ai(j,Ke),oe&&j.dispatch(j.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ze(j){return j.openStart==0&&j.openEnd==0&&j.content.childCount==1?j.content.firstChild:null}function Re(j,T){if(!j.dom.parentNode)return;let _=j.input.shiftKey||j.state.selection.$from.parent.type.spec.code,J=j.dom.parentNode.appendChild(document.createElement(_?"textarea":"div"));_||(J.contentEditable="true"),J.style.cssText="position: fixed; left: -10000px; top: 10px",J.focus(),setTimeout(()=>{j.focus(),J.parentNode&&J.parentNode.removeChild(J),_?We(j,J.value,null,j.input.shiftKey,T):We(j,J.textContent,J.innerHTML,j.input.shiftKey,T)},50)}function We(j,T,_,J,oe){let ve=Yn(j,T,_,J,j.state.selection.$from);if(j.someProp("handlePaste",qe=>qe(j,oe,ve||s.Slice.empty)))return!0;if(!ve)return!1;let xe=ze(ve),Ke=xe?j.state.tr.replaceSelectionWith(xe,j.input.shiftKey):j.state.tr.replaceSelection(ve);return j.dispatch(Ke.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}pr.paste=(j,T)=>{let _=T;if(j.composing&&!R)return;let J=hi?null:_.clipboardData;J&&We(j,J.getData("text/plain"),J.getData("text/html"),j.input.shiftKey,_)?_.preventDefault():Re(j,_)};class it{constructor(T,_){this.slice=T,this.move=_}}const Pt=C?"altKey":"ctrlKey";Rn.dragstart=(j,T)=>{let _=T,J=j.input.mouseDown;if(J&&J.done(),!_.dataTransfer)return;let oe=j.state.selection,ve=oe.empty?null:j.posAtCoords(Nr(_));if(!(ve&&ve.pos>=oe.from&&ve.pos<=(oe instanceof e.NodeSelection?oe.to-1:oe.to))){if(J&&J.mightDrag)j.dispatch(j.state.tr.setSelection(e.NodeSelection.create(j.state.doc,J.mightDrag.pos)));else if(_.target&&_.target.nodeType==1){let vt=j.docView.nearestDesc(_.target,!0);vt&&vt.node.type.spec.draggable&&vt!=j.docView&&j.dispatch(j.state.tr.setSelection(e.NodeSelection.create(j.state.doc,vt.posBefore)))}}let xe=j.state.selection.content(),{dom:Ke,text:qe}=Xn(j,xe);_.dataTransfer.clearData(),_.dataTransfer.setData(hi?"Text":"text/html",Ke.innerHTML),_.dataTransfer.effectAllowed="copyMove",hi||_.dataTransfer.setData("text/plain",qe),j.dragging=new it(xe,!_[Pt])},Rn.dragend=j=>{let T=j.dragging;window.setTimeout(()=>{j.dragging==T&&(j.dragging=null)},50)},pr.dragover=pr.dragenter=(j,T)=>T.preventDefault(),pr.drop=(j,T)=>{let _=T,J=j.dragging;if(j.dragging=null,!_.dataTransfer)return;let oe=j.posAtCoords(Nr(_));if(!oe)return;let ve=j.state.doc.resolve(oe.pos),xe=J&&J.slice;xe?j.someProp("transformPasted",In=>{xe=In(xe,j)}):xe=Yn(j,_.dataTransfer.getData(hi?"Text":"text/plain"),hi?null:_.dataTransfer.getData("text/html"),!1,ve);let Ke=!!(J&&!_[Pt]);if(j.someProp("handleDrop",In=>In(j,_,xe||s.Slice.empty,Ke))){_.preventDefault();return}if(!xe)return;_.preventDefault();let qe=xe?Object(o.dropPoint)(j.state.doc,ve.pos,xe):ve.pos;qe==null&&(qe=ve.pos);let vt=j.state.tr;Ke&&vt.deleteSelection();let It=vt.mapping.map(qe),un=xe.openStart==0&&xe.openEnd==0&&xe.content.childCount==1,On=vt.doc;if(un?vt.replaceRangeWith(It,It,xe.content.firstChild):vt.replaceRange(It,It,xe),vt.doc.eq(On))return;let dn=vt.doc.resolve(It);if(un&&e.NodeSelection.isSelectable(xe.content.firstChild)&&dn.nodeAfter&&dn.nodeAfter.sameMarkup(xe.content.firstChild))vt.setSelection(new e.NodeSelection(dn));else{let In=vt.mapping.map(qe);vt.mapping.maps[vt.mapping.maps.length-1].forEach((Qn,dr,Gr,Kr)=>In=Kr),vt.setSelection(fr(j,dn,vt.doc.resolve(In)))}j.focus(),j.dispatch(vt.setMeta("uiEvent","drop"))},Rn.focus=j=>{j.input.lastFocus=Date.now(),j.focused||(j.domObserver.stop(),j.dom.classList.add("ProseMirror-focused"),j.domObserver.start(),j.focused=!0,setTimeout(()=>{j.docView&&j.hasFocus()&&!j.domObserver.currentSelection.eq(j.domSelectionRange())&&Ut(j)},20))},Rn.blur=(j,T)=>{let _=T;j.focused&&(j.domObserver.stop(),j.dom.classList.remove("ProseMirror-focused"),j.domObserver.start(),_.relatedTarget&&j.dom.contains(_.relatedTarget)&&j.domObserver.currentSelection.clear(),j.focused=!1)},Rn.beforeinput=(j,T)=>{if(M&&R&&T.inputType=="deleteContentBackward"){j.domObserver.flushSoon();let{domChangeCount:J}=j.input;setTimeout(()=>{if(j.input.domChangeCount!=J||(j.dom.blur(),j.focus(),j.someProp("handleKeyDown",ve=>ve(j,i(8,"Backspace")))))return;let{$cursor:oe}=j.state.selection;oe&&oe.pos>0&&j.dispatch(j.state.tr.delete(oe.pos-1,oe.pos).scrollIntoView())},50)}};for(let j in pr)Rn[j]=pr[j];function Nt(j,T){if(j==T)return!0;for(let _ in j)if(j[_]!==T[_])return!1;for(let _ in T)if(!(_ in j))return!1;return!0}class kt{constructor(T,_){this.toDOM=T,this.spec=_||En,this.side=this.spec.side||0}map(T,_,J,oe){let{pos:ve,deleted:xe}=T.mapResult(_.from+oe,this.side<0?-1:1);return xe?null:new Yt(ve-J,ve-J,this)}valid(){return!0}eq(T){return this==T||T instanceof kt&&(this.spec.key&&this.spec.key==T.spec.key||this.toDOM==T.toDOM&&Nt(this.spec,T.spec))}destroy(T){this.spec.destroy&&this.spec.destroy(T)}}class Ht{constructor(T,_){this.attrs=T,this.spec=_||En}map(T,_,J,oe){let ve=T.map(_.from+oe,this.spec.inclusiveStart?-1:1)-J,xe=T.map(_.to+oe,this.spec.inclusiveEnd?1:-1)-J;return ve>=xe?null:new Yt(ve,xe,this)}valid(T,_){return _.from<_.to}eq(T){return this==T||T instanceof Ht&&Nt(this.attrs,T.attrs)&&Nt(this.spec,T.spec)}static is(T){return T.type instanceof Ht}destroy(){}}class Bt{constructor(T,_){this.attrs=T,this.spec=_||En}map(T,_,J,oe){let ve=T.mapResult(_.from+oe,1);if(ve.deleted)return null;let xe=T.mapResult(_.to+oe,-1);return xe.deleted||xe.pos<=ve.pos?null:new Yt(ve.pos-J,xe.pos-J,this)}valid(T,_){let{index:J,offset:oe}=T.content.findIndex(_.from),ve;return oe==_.from&&!(ve=T.child(J)).isText&&oe+ve.nodeSize==_.to}eq(T){return this==T||T instanceof Bt&&Nt(this.attrs,T.attrs)&&Nt(this.spec,T.spec)}destroy(){}}class Yt{constructor(T,_,J){this.from=T,this.to=_,this.type=J}copy(T,_){return new Yt(T,_,this.type)}eq(T,_=0){return this.type.eq(T.type)&&this.from+_==T.from&&this.to+_==T.to}map(T,_,J){return this.type.map(T,this,_,J)}static widget(T,_,J){return new Yt(T,T,new kt(_,J))}static inline(T,_,J,oe){return new Yt(T,_,new Ht(J,oe))}static node(T,_,J,oe){return new Yt(T,_,new Bt(J,oe))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ht}}const an=[],En={};class vn{constructor(T,_){this.local=T.length?T:an,this.children=_.length?_:an}static create(T,_){return _.length?ei(_,T,0,En):ar}find(T,_,J){let oe=[];return this.findInner(T==null?0:T,_==null?1e9:_,oe,0,J),oe}findInner(T,_,J,oe,ve){for(let xe=0;xe<this.local.length;xe++){let Ke=this.local[xe];Ke.from<=_&&Ke.to>=T&&(!ve||ve(Ke.spec))&&J.push(Ke.copy(Ke.from+oe,Ke.to+oe))}for(let xe=0;xe<this.children.length;xe+=3)if(this.children[xe]<_&&this.children[xe+1]>T){let Ke=this.children[xe]+1;this.children[xe+2].findInner(T-Ke,_-Ke,J,oe+Ke,ve)}}map(T,_,J){return this==ar||T.maps.length==0?this:this.mapInner(T,_,0,0,J||En)}mapInner(T,_,J,oe,ve){let xe;for(let Ke=0;Ke<this.local.length;Ke++){let qe=this.local[Ke].map(T,J,oe);qe&&qe.type.valid(_,qe)?(xe||(xe=[])).push(qe):ve.onRemove&&ve.onRemove(this.local[Ke].spec)}return this.children.length?Dr(this.children,xe||[],T,_,J,oe,ve):xe?new vn(xe.sort(li),an):ar}add(T,_){return _.length?this==ar?vn.create(T,_):this.addInner(T,_,0):this}addInner(T,_,J){let oe,ve=0;T.forEach((Ke,qe)=>{let vt=qe+J,It;if(!!(It=ko(_,Ke,vt))){for(oe||(oe=this.children.slice());ve<oe.length&&oe[ve]<qe;)ve+=3;oe[ve]==qe?oe[ve+2]=oe[ve+2].addInner(Ke,It,vt+1):oe.splice(ve,0,qe,qe+Ke.nodeSize,ei(It,Ke,vt+1,En)),ve+=3}});let xe=Lr(ve?bi(_):_,-J);for(let Ke=0;Ke<xe.length;Ke++)xe[Ke].type.valid(T,xe[Ke])||xe.splice(Ke--,1);return new vn(xe.length?this.local.concat(xe).sort(li):this.local,oe||this.children)}remove(T){return T.length==0||this==ar?this:this.removeInner(T,0)}removeInner(T,_){let J=this.children,oe=this.local;for(let ve=0;ve<J.length;ve+=3){let xe,Ke=J[ve]+_,qe=J[ve+1]+_;for(let It=0,un;It<T.length;It++)(un=T[It])&&un.from>Ke&&un.to<qe&&(T[It]=null,(xe||(xe=[])).push(un));if(!xe)continue;J==this.children&&(J=this.children.slice());let vt=J[ve+2].removeInner(xe,Ke+1);vt!=ar?J[ve+2]=vt:(J.splice(ve,3),ve-=3)}if(oe.length){for(let ve=0,xe;ve<T.length;ve++)if(xe=T[ve])for(let Ke=0;Ke<oe.length;Ke++)oe[Ke].eq(xe,_)&&(oe==this.local&&(oe=this.local.slice()),oe.splice(Ke--,1))}return J==this.children&&oe==this.local?this:oe.length||J.length?new vn(oe,J):ar}forChild(T,_){if(this==ar)return this;if(_.isLeaf)return vn.empty;let J,oe;for(let Ke=0;Ke<this.children.length;Ke+=3)if(this.children[Ke]>=T){this.children[Ke]==T&&(J=this.children[Ke+2]);break}let ve=T+1,xe=ve+_.content.size;for(let Ke=0;Ke<this.local.length;Ke++){let qe=this.local[Ke];if(qe.from<xe&&qe.to>ve&&qe.type instanceof Ht){let vt=Math.max(ve,qe.from)-ve,It=Math.min(xe,qe.to)-ve;vt<It&&(oe||(oe=[])).push(qe.copy(vt,It))}}if(oe){let Ke=new vn(oe.sort(li),an);return J?new Er([Ke,J]):Ke}return J||ar}eq(T){if(this==T)return!0;if(!(T instanceof vn)||this.local.length!=T.local.length||this.children.length!=T.children.length)return!1;for(let _=0;_<this.local.length;_++)if(!this.local[_].eq(T.local[_]))return!1;for(let _=0;_<this.children.length;_+=3)if(this.children[_]!=T.children[_]||this.children[_+1]!=T.children[_+1]||!this.children[_+2].eq(T.children[_+2]))return!1;return!0}locals(T){return Vi(this.localsInner(T))}localsInner(T){if(this==ar)return an;if(T.inlineContent||!this.local.some(Ht.is))return this.local;let _=[];for(let J=0;J<this.local.length;J++)this.local[J].type instanceof Ht||_.push(this.local[J]);return _}}vn.empty=new vn([],[]),vn.removeOverlap=Vi;const ar=vn.empty;class Er{constructor(T){this.members=T}map(T,_){const J=this.members.map(oe=>oe.map(T,_,En));return Er.from(J)}forChild(T,_){if(_.isLeaf)return vn.empty;let J=[];for(let oe=0;oe<this.members.length;oe++){let ve=this.members[oe].forChild(T,_);ve!=ar&&(ve instanceof Er?J=J.concat(ve.members):J.push(ve))}return Er.from(J)}eq(T){if(!(T instanceof Er)||T.members.length!=this.members.length)return!1;for(let _=0;_<this.members.length;_++)if(!this.members[_].eq(T.members[_]))return!1;return!0}locals(T){let _,J=!0;for(let oe=0;oe<this.members.length;oe++){let ve=this.members[oe].localsInner(T);if(!!ve.length)if(!_)_=ve;else{J&&(_=_.slice(),J=!1);for(let xe=0;xe<ve.length;xe++)_.push(ve[xe])}}return _?Vi(J?_:_.sort(li)):an}static from(T){switch(T.length){case 0:return ar;case 1:return T[0];default:return new Er(T.every(_=>_ instanceof vn)?T:T.reduce((_,J)=>_.concat(J instanceof vn?J:J.members),[]))}}}function Dr(j,T,_,J,oe,ve,xe){let Ke=j.slice();for(let vt=0,It=ve;vt<_.maps.length;vt++){let un=0;_.maps[vt].forEach((On,dn,In,Qn)=>{let dr=Qn-In-(dn-On);for(let Gr=0;Gr<Ke.length;Gr+=3){let Kr=Ke[Gr+1];if(Kr<0||On>Kr+It-un)continue;let eo=Ke[Gr]+It-un;dn>=eo?Ke[Gr+1]=On<=eo?-2:-1:In>=oe&&dr&&(Ke[Gr]+=dr,Ke[Gr+1]+=dr)}un+=dr}),It=_.maps[vt].map(It,-1)}let qe=!1;for(let vt=0;vt<Ke.length;vt+=3)if(Ke[vt+1]<0){if(Ke[vt+1]==-2){qe=!0,Ke[vt+1]=-1;continue}let It=_.map(j[vt]+ve),un=It-oe;if(un<0||un>=J.content.size){qe=!0;continue}let On=_.map(j[vt+1]+ve,-1),dn=On-oe,{index:In,offset:Qn}=J.content.findIndex(un),dr=J.maybeChild(In);if(dr&&Qn==un&&Qn+dr.nodeSize==dn){let Gr=Ke[vt+2].mapInner(_,dr,It+1,j[vt]+ve+1,xe);Gr!=ar?(Ke[vt]=un,Ke[vt+1]=dn,Ke[vt+2]=Gr):(Ke[vt+1]=-2,qe=!0)}else qe=!0}if(qe){let vt=no(Ke,j,T,_,oe,ve,xe),It=ei(vt,J,0,xe);T=It.local;for(let un=0;un<Ke.length;un+=3)Ke[un+1]<0&&(Ke.splice(un,3),un-=3);for(let un=0,On=0;un<It.children.length;un+=3){let dn=It.children[un];for(;On<Ke.length&&Ke[On]<dn;)On+=3;Ke.splice(On,0,It.children[un],It.children[un+1],It.children[un+2])}}return new vn(T.sort(li),Ke)}function Lr(j,T){if(!T||!j.length)return j;let _=[];for(let J=0;J<j.length;J++){let oe=j[J];_.push(new Yt(oe.from+T,oe.to+T,oe.type))}return _}function no(j,T,_,J,oe,ve,xe){function Ke(qe,vt){for(let It=0;It<qe.local.length;It++){let un=qe.local[It].map(J,oe,vt);un?_.push(un):xe.onRemove&&xe.onRemove(qe.local[It].spec)}for(let It=0;It<qe.children.length;It+=3)Ke(qe.children[It+2],qe.children[It]+vt+1)}for(let qe=0;qe<j.length;qe+=3)j[qe+1]==-1&&Ke(j[qe+2],T[qe]+ve+1);return _}function ko(j,T,_){if(T.isLeaf)return null;let J=_+T.nodeSize,oe=null;for(let ve=0,xe;ve<j.length;ve++)(xe=j[ve])&&xe.from>_&&xe.to<J&&((oe||(oe=[])).push(xe),j[ve]=null);return oe}function bi(j){let T=[];for(let _=0;_<j.length;_++)j[_]!=null&&T.push(j[_]);return T}function ei(j,T,_,J){let oe=[],ve=!1;T.forEach((Ke,qe)=>{let vt=ko(j,Ke,qe+_);if(vt){ve=!0;let It=ei(vt,Ke,_+qe+1,J);It!=ar&&oe.push(qe,qe+Ke.nodeSize,It)}});let xe=Lr(ve?bi(j):j,-_).sort(li);for(let Ke=0;Ke<xe.length;Ke++)xe[Ke].type.valid(T,xe[Ke])||(J.onRemove&&J.onRemove(xe[Ke].spec),xe.splice(Ke--,1));return xe.length||oe.length?new vn(xe,oe):ar}function li(j,T){return j.from-T.from||j.to-T.to}function Vi(j){let T=j;for(let _=0;_<T.length-1;_++){let J=T[_];if(J.from!=J.to)for(let oe=_+1;oe<T.length;oe++){let ve=T[oe];if(ve.from==J.from){ve.to!=J.to&&(T==j&&(T=j.slice()),T[oe]=ve.copy(ve.from,J.to),Qi(T,oe+1,ve.copy(J.to,ve.to)));continue}else{ve.from<J.to&&(T==j&&(T=j.slice()),T[_]=J.copy(J.from,ve.from),Qi(T,oe,J.copy(ve.from,J.to)));break}}}return T}function Qi(j,T,_){for(;T<j.length&&li(_,j[T])>0;)T++;j.splice(T,0,_)}function ua(j){let T=[];return j.someProp("decorations",_=>{let J=_(j.state);J&&J!=ar&&T.push(J)}),j.cursorWrapper&&T.push(vn.create(j.state.doc,[j.cursorWrapper.deco])),Er.from(T)}const Oi={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_a=W&&B<=11;class pa{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(T){this.anchorNode=T.anchorNode,this.anchorOffset=T.anchorOffset,this.focusNode=T.focusNode,this.focusOffset=T.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(T){return T.anchorNode==this.anchorNode&&T.anchorOffset==this.anchorOffset&&T.focusNode==this.focusNode&&T.focusOffset==this.focusOffset}}class Ra{constructor(T,_){this.view=T,this.handleDOMChange=_,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pa,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(J=>{for(let oe=0;oe<J.length;oe++)this.queue.push(J[oe]);W&&B<=11&&J.some(oe=>oe.type=="childList"&&oe.removedNodes.length||oe.type=="characterData"&&oe.oldValue.length>oe.target.nodeValue.length)?this.flushSoon():this.flush()}),_a&&(this.onCharData=J=>{this.queue.push({target:J.target,type:"characterData",oldValue:J.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Oi)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let T=this.observer.takeRecords();if(T.length){for(let _=0;_<T.length;_++)this.queue.push(T[_]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!ur(this.view)){if(this.suppressingSelectionUpdates)return Ut(this.view);if(W&&B<=11&&!this.view.state.selection.empty){let T=this.view.domSelectionRange();if(T.focusNode&&h(T.focusNode,T.focusOffset,T.anchorNode,T.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(T){if(!T.focusNode)return!0;let _=new Set,J;for(let ve=T.focusNode;ve;ve=c(ve))_.add(ve);for(let ve=T.anchorNode;ve;ve=c(ve))if(_.has(ve)){J=ve;break}let oe=J&&this.view.docView.nearestDesc(J);if(oe&&oe.ignoreMutation({type:"selection",target:J.nodeType==3?J.parentNode:J}))return this.setCurSelection(),!0}flush(){let{view:T}=this;if(!T.docView||this.flushingSoon>-1)return;let _=this.observer?this.observer.takeRecords():[];this.queue.length&&(_=this.queue.concat(_),this.queue.length=0);let J=T.domSelectionRange(),oe=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(J)&&ur(T)&&!this.ignoreSelectionChange(J),ve=-1,xe=-1,Ke=!1,qe=[];if(T.editable)for(let It=0;It<_.length;It++){let un=this.registerMutation(_[It],qe);un&&(ve=ve<0?un.from:Math.min(un.from,ve),xe=xe<0?un.to:Math.max(un.to,xe),un.typeOver&&(Ke=!0))}if(f&&qe.length>1){let It=qe.filter(un=>un.nodeName=="BR");if(It.length==2){let un=It[0],On=It[1];un.parentNode&&un.parentNode.parentNode==On.parentNode?On.remove():un.remove()}}let vt=null;ve<0&&oe&&T.input.lastFocus>Date.now()-200&&Math.max(T.input.lastTouch,T.input.lastClick.time)<Date.now()-300&&r(J)&&(vt=gt(T))&&vt.eq(e.Selection.near(T.state.doc.resolve(0),1))?(T.input.lastFocus=0,Ut(T),this.currentSelection.set(J),T.scrollToSelection()):(ve>-1||oe)&&(ve>-1&&(T.docView.markDirty(ve,xe),Wa(T)),this.handleDOMChange(ve,xe,Ke,qe),T.docView&&T.docView.dirty?T.updateState(T.state):this.currentSelection.eq(J)||Ut(T),this.currentSelection.set(J))}registerMutation(T,_){if(_.indexOf(T.target)>-1)return null;let J=this.view.docView.nearestDesc(T.target);if(T.type=="attributes"&&(J==this.view.docView||T.attributeName=="contenteditable"||T.attributeName=="style"&&!T.oldValue&&!T.target.getAttribute("style"))||!J||J.ignoreMutation(T))return null;if(T.type=="childList"){for(let It=0;It<T.addedNodes.length;It++)_.push(T.addedNodes[It]);if(J.contentDOM&&J.contentDOM!=J.dom&&!J.contentDOM.contains(T.target))return{from:J.posBefore,to:J.posAfter};let oe=T.previousSibling,ve=T.nextSibling;if(W&&B<=11&&T.addedNodes.length)for(let It=0;It<T.addedNodes.length;It++){let{previousSibling:un,nextSibling:On}=T.addedNodes[It];(!un||Array.prototype.indexOf.call(T.addedNodes,un)<0)&&(oe=un),(!On||Array.prototype.indexOf.call(T.addedNodes,On)<0)&&(ve=On)}let xe=oe&&oe.parentNode==T.target?a(oe)+1:0,Ke=J.localPosFromDOM(T.target,xe,-1),qe=ve&&ve.parentNode==T.target?a(ve):T.target.childNodes.length,vt=J.localPosFromDOM(T.target,qe,1);return{from:Ke,to:vt}}else return T.type=="attributes"?{from:J.posAtStart-J.border,to:J.posAtEnd+J.border}:{from:J.posAtStart,to:J.posAtEnd,typeOver:T.target.nodeValue==T.oldValue}}}let Si=new WeakMap,yi=!1;function Wa(j){if(!Si.has(j)&&(Si.set(j,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(j.dom).whiteSpace)!==-1)){if(j.requiresGeckoHackNode=f,yi)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),yi=!0}}function ot(j){let T;function _(qe){qe.preventDefault(),qe.stopImmediatePropagation(),T=qe.getTargetRanges()[0]}j.dom.addEventListener("beforeinput",_,!0),document.execCommand("indent"),j.dom.removeEventListener("beforeinput",_,!0);let J=T.startContainer,oe=T.startOffset,ve=T.endContainer,xe=T.endOffset,Ke=j.domAtPos(j.state.selection.anchor);return h(Ke.node,Ke.offset,ve,xe)&&([J,oe,ve,xe]=[ve,xe,J,oe]),{anchorNode:J,anchorOffset:oe,focusNode:ve,focusOffset:xe}}function at(j,T,_){let{node:J,fromOffset:oe,toOffset:ve,from:xe,to:Ke}=j.docView.parseRange(T,_),qe=j.domSelectionRange(),vt,It=qe.anchorNode;if(It&&j.dom.contains(It.nodeType==1?It:It.parentNode)&&(vt=[{node:It,offset:qe.anchorOffset}],r(qe)||vt.push({node:qe.focusNode,offset:qe.focusOffset})),M&&j.input.lastKeyCode===8)for(let dr=ve;dr>oe;dr--){let Gr=J.childNodes[dr-1],Kr=Gr.pmViewDesc;if(Gr.nodeName=="BR"&&!Kr){ve=dr;break}if(!Kr||Kr.size)break}let un=j.state.doc,On=j.someProp("domParser")||s.DOMParser.fromSchema(j.state.schema),dn=un.resolve(xe),In=null,Qn=On.parse(J,{topNode:dn.parent,topMatch:dn.parent.contentMatchAt(dn.index()),topOpen:!0,from:oe,to:ve,preserveWhitespace:dn.parent.type.whitespace=="pre"?"full":!0,findPositions:vt,ruleFromNode:Ct,context:dn});if(vt&&vt[0].pos!=null){let dr=vt[0].pos,Gr=vt[1]&&vt[1].pos;Gr==null&&(Gr=dr),In={anchor:dr+xe,head:Gr+xe}}return{doc:Qn,sel:In,from:xe,to:Ke}}function Ct(j){let T=j.pmViewDesc;if(T)return T.parseRule();if(j.nodeName=="BR"&&j.parentNode){if(A&&/^(ul|ol)$/i.test(j.parentNode.nodeName)){let _=document.createElement("div");return _.appendChild(document.createElement("li")),{skip:_}}else if(j.parentNode.lastChild==j||A&&/^(tr|table)$/i.test(j.parentNode.nodeName))return{ignore:!0}}else if(j.nodeName=="IMG"&&j.getAttribute("mark-placeholder"))return{ignore:!0};return null}function ln(j,T,_,J,oe){if(T<0){let _r=j.input.lastSelectionTime>Date.now()-50?j.input.lastSelectionOrigin:null,To=gt(j,_r);if(To&&!j.state.selection.eq(To)){if(M&&R&&j.input.lastKeyCode===13&&Date.now()-100<j.input.lastKeyCodeTime&&j.someProp("handleKeyDown",Ei=>Ei(j,i(13,"Enter"))))return;let Co=j.state.tr.setSelection(To);_r=="pointer"?Co.setMeta("pointer",!0):_r=="key"&&Co.scrollIntoView(),j.dispatch(Co)}return}let ve=j.state.doc.resolve(T),xe=ve.sharedDepth(_);T=ve.before(xe+1),_=j.state.doc.resolve(_).after(xe+1);let Ke=j.state.selection,qe=at(j,T,_),vt=j.state.doc,It=vt.slice(qe.from,qe.to),un,On;j.input.lastKeyCode===8&&Date.now()-100<j.input.lastKeyCodeTime?(un=j.state.selection.to,On="end"):(un=j.state.selection.from,On="start"),j.input.lastKeyCode=null;let dn=rr(It.content,qe.doc.content,qe.from,un,On);if((L&&j.input.lastIOSEnter>Date.now()-225||R)&&oe.some(_r=>_r.nodeName=="DIV"||_r.nodeName=="P"||_r.nodeName=="LI")&&(!dn||dn.endA>=dn.endB)&&j.someProp("handleKeyDown",_r=>_r(j,i(13,"Enter")))){j.input.lastIOSEnter=0;return}if(!dn)if(J&&Ke instanceof e.TextSelection&&!Ke.empty&&Ke.$head.sameParent(Ke.$anchor)&&!j.composing&&!(qe.sel&&qe.sel.anchor!=qe.sel.head))dn={start:Ke.from,endA:Ke.to,endB:Ke.to};else{if(qe.sel){let _r=yn(j,j.state.doc,qe.sel);_r&&!_r.eq(j.state.selection)&&j.dispatch(j.state.tr.setSelection(_r))}return}if(M&&j.cursorWrapper&&qe.sel&&qe.sel.anchor==j.cursorWrapper.deco.from&&qe.sel.head==qe.sel.anchor){let _r=dn.endB-dn.start;qe.sel={anchor:qe.sel.anchor+_r,head:qe.sel.anchor+_r}}j.input.domChangeCount++,j.state.selection.from<j.state.selection.to&&dn.start==dn.endB&&j.state.selection instanceof e.TextSelection&&(dn.start>j.state.selection.from&&dn.start<=j.state.selection.from+2&&j.state.selection.from>=qe.from?dn.start=j.state.selection.from:dn.endA<j.state.selection.to&&dn.endA>=j.state.selection.to-2&&j.state.selection.to<=qe.to&&(dn.endB+=j.state.selection.to-dn.endA,dn.endA=j.state.selection.to)),W&&B<=11&&dn.endB==dn.start+1&&dn.endA==dn.start&&dn.start>qe.from&&qe.doc.textBetween(dn.start-qe.from-1,dn.start-qe.from+1)==" \xA0"&&(dn.start--,dn.endA--,dn.endB--);let In=qe.doc.resolveNoCache(dn.start-qe.from),Qn=qe.doc.resolveNoCache(dn.endB-qe.from),dr=vt.resolve(dn.start),Gr=In.sameParent(Qn)&&In.parent.inlineContent&&dr.end()>=dn.endA,Kr;if((L&&j.input.lastIOSEnter>Date.now()-225&&(!Gr||oe.some(_r=>_r.nodeName=="DIV"||_r.nodeName=="P"))||!Gr&&In.pos<qe.doc.content.size&&(Kr=e.Selection.findFrom(qe.doc.resolve(In.pos+1),1,!0))&&Kr.head==Qn.pos)&&j.someProp("handleKeyDown",_r=>_r(j,i(13,"Enter")))){j.input.lastIOSEnter=0;return}if(j.state.selection.anchor>dn.start&&Ln(vt,dn.start,dn.endA,In,Qn)&&j.someProp("handleKeyDown",_r=>_r(j,i(8,"Backspace")))){R&&M&&j.domObserver.suppressSelectionUpdates();return}M&&R&&dn.endB==dn.start&&(j.input.lastAndroidDelete=Date.now()),R&&!Gr&&In.start()!=Qn.start()&&Qn.parentOffset==0&&In.depth==Qn.depth&&qe.sel&&qe.sel.anchor==qe.sel.head&&qe.sel.head==dn.endA&&(dn.endB-=2,Qn=qe.doc.resolveNoCache(dn.endB-qe.from),setTimeout(()=>{j.someProp("handleKeyDown",function(_r){return _r(j,i(13,"Enter"))})},20));let eo=dn.start,qr=dn.endA,so,oo,ti;if(Gr){if(In.pos==Qn.pos)W&&B<=11&&In.parentOffset==0&&(j.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ut(j),20)),so=j.state.tr.delete(eo,qr),oo=vt.resolve(dn.start).marksAcross(vt.resolve(dn.endA));else if(dn.endA==dn.endB&&(ti=Dn(In.parent.content.cut(In.parentOffset,Qn.parentOffset),dr.parent.content.cut(dr.parentOffset,dn.endA-dr.start()))))so=j.state.tr,ti.type=="add"?so.addMark(eo,qr,ti.mark):so.removeMark(eo,qr,ti.mark);else if(In.parent.child(In.index()).isText&&In.index()==Qn.index()-(Qn.textOffset?0:1)){let _r=In.parent.textBetween(In.parentOffset,Qn.parentOffset);if(j.someProp("handleTextInput",To=>To(j,eo,qr,_r)))return;so=j.state.tr.insertText(_r,eo,qr)}}if(so||(so=j.state.tr.replace(eo,qr,qe.doc.slice(dn.start-qe.from,dn.endB-qe.from))),qe.sel){let _r=yn(j,so.doc,qe.sel);_r&&!(M&&R&&j.composing&&_r.empty&&(dn.start!=dn.endB||j.input.lastAndroidDelete<Date.now()-100)&&(_r.head==eo||_r.head==so.mapping.map(qr)-1)||W&&_r.empty&&_r.head==eo)&&so.setSelection(_r)}oo&&so.ensureMarks(oo),j.dispatch(so.scrollIntoView())}function yn(j,T,_){return Math.max(_.anchor,_.head)>T.content.size?null:fr(j,T.resolve(_.anchor),T.resolve(_.head))}function Dn(j,T){let _=j.firstChild.marks,J=T.firstChild.marks,oe=_,ve=J,xe,Ke,qe;for(let It=0;It<J.length;It++)oe=J[It].removeFromSet(oe);for(let It=0;It<_.length;It++)ve=_[It].removeFromSet(ve);if(oe.length==1&&ve.length==0)Ke=oe[0],xe="add",qe=It=>It.mark(Ke.addToSet(It.marks));else if(oe.length==0&&ve.length==1)Ke=ve[0],xe="remove",qe=It=>It.mark(Ke.removeFromSet(It.marks));else return null;let vt=[];for(let It=0;It<T.childCount;It++)vt.push(qe(T.child(It)));if(s.Fragment.from(vt).eq(j))return{mark:Ke,type:xe}}function Ln(j,T,_,J,oe){if(!J.parent.isTextblock||_-T<=oe.pos-J.pos||Jn(J,!0,!1)<oe.pos)return!1;let ve=j.resolve(T);if(ve.parentOffset<ve.parent.content.size||!ve.parent.isTextblock)return!1;let xe=j.resolve(Jn(ve,!0,!0));return!xe.parent.isTextblock||xe.pos>_||Jn(xe,!0,!1)<_?!1:J.parent.content.cut(J.parentOffset).eq(xe.parent.content)}function Jn(j,T,_){let J=j.depth,oe=T?j.end():j.pos;for(;J>0&&(T||j.indexAfter(J)==j.node(J).childCount);)J--,oe++,T=!1;if(_){let ve=j.node(J).maybeChild(j.indexAfter(J));for(;ve&&!ve.isLeaf;)ve=ve.firstChild,oe++}return oe}function rr(j,T,_,J,oe){let ve=j.findDiffStart(T,_);if(ve==null)return null;let{a:xe,b:Ke}=j.findDiffEnd(T,_+j.size,_+T.size);if(oe=="end"){let qe=Math.max(0,ve-Math.min(xe,Ke));J-=xe+qe-ve}return xe<ve&&j.size<T.size?(ve-=J<=ve&&J>=xe?ve-J:0,Ke=ve+(Ke-xe),xe=ve):Ke<ve&&(ve-=J<=ve&&J>=Ke?ve-J:0,xe=ve+(xe-Ke),Ke=ve),{start:ve,endA:xe,endB:Ke}}const Cr=Xn,sr=Yn,mo=qo;class po{constructor(T,_){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ar,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=_,this.state=_.state,this.directPlugins=_.plugins||[],this.directPlugins.forEach(co),this.dispatch=this.dispatch.bind(this),this.dom=T&&T.mount||document.createElement("div"),T&&(T.appendChild?T.appendChild(this.dom):typeof T=="function"?T(this.dom):T.mount&&(this.mounted=!0)),this.editable=Ir(this),Xr(this),this.nodeViews=mr(this),this.docView=x(this.state.doc,Hr(this),ua(this),this.dom,this),this.domObserver=new Ra(this,(J,oe,ve,xe)=>ln(this,J,oe,ve,xe)),this.domObserver.start(),Rr(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let T=this._props;this._props={};for(let _ in T)this._props[_]=T[_];this._props.state=this.state}return this._props}update(T){T.handleDOMEvents!=this._props.handleDOMEvents&&Pr(this);let _=this._props;this._props=T,T.plugins&&(T.plugins.forEach(co),this.directPlugins=T.plugins),this.updateStateInner(T.state,_)}setProps(T){let _={};for(let J in this._props)_[J]=this._props[J];_.state=this.state;for(let J in T)_[J]=T[J];this.update(_)}updateState(T){this.updateStateInner(T,this._props)}updateStateInner(T,_){let J=this.state,oe=!1,ve=!1;T.storedMarks&&this.composing&&(ao(this),ve=!0),this.state=T;let xe=J.plugins!=T.plugins||this._props.plugins!=_.plugins;if(xe||this._props.plugins!=_.plugins||this._props.nodeViews!=_.nodeViews){let On=mr(this);ro(On,this.nodeViews)&&(this.nodeViews=On,oe=!0)}(xe||_.handleDOMEvents!=this._props.handleDOMEvents)&&Pr(this),this.editable=Ir(this),Xr(this);let Ke=ua(this),qe=Hr(this),vt=J.plugins!=T.plugins&&!J.doc.eq(T.doc)?"reset":T.scrollToSelection>J.scrollToSelection?"to selection":"preserve",It=oe||!this.docView.matchesNode(T.doc,qe,Ke);(It||!T.selection.eq(J.selection))&&(ve=!0);let un=vt=="preserve"&&ve&&this.dom.style.overflowAnchor==null&&k(this);if(ve){this.domObserver.stop();let On=It&&(W||M)&&!this.composing&&!J.selection.empty&&!T.selection.empty&&Ur(J.selection,T.selection);if(It){let dn=M?this.trackWrites=this.domSelectionRange().focusNode:null;(oe||!this.docView.update(T.doc,qe,Ke,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=x(T.doc,qe,Ke,this.dom,this)),dn&&!this.trackWrites&&(On=!0)}On||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&jr(this))?Ut(this,On):(bn(this,T.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(J),vt=="reset"?this.dom.scrollTop=0:vt=="to selection"?this.scrollToSelection():un&&Y(un)}scrollToSelection(){let T=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",_=>_(this)))if(this.state.selection instanceof e.NodeSelection){let _=this.docView.domAfterPos(this.state.selection.from);_.nodeType==1&&V(this,_.getBoundingClientRect(),T)}else V(this,this.coordsAtPos(this.state.selection.head,1),T)}destroyPluginViews(){let T;for(;T=this.pluginViews.pop();)T.destroy&&T.destroy()}updatePluginViews(T){if(!T||T.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let _=0;_<this.directPlugins.length;_++){let J=this.directPlugins[_];J.spec.view&&this.pluginViews.push(J.spec.view(this))}for(let _=0;_<this.state.plugins.length;_++){let J=this.state.plugins[_];J.spec.view&&this.pluginViews.push(J.spec.view(this))}}else for(let _=0;_<this.pluginViews.length;_++){let J=this.pluginViews[_];J.update&&J.update(this,T)}}someProp(T,_){let J=this._props&&this._props[T],oe;if(J!=null&&(oe=_?_(J):J))return oe;for(let xe=0;xe<this.directPlugins.length;xe++){let Ke=this.directPlugins[xe].props[T];if(Ke!=null&&(oe=_?_(Ke):Ke))return oe}let ve=this.state.plugins;if(ve)for(let xe=0;xe<ve.length;xe++){let Ke=ve[xe].props[T];if(Ke!=null&&(oe=_?_(Ke):Ke))return oe}}hasFocus(){if(W){let T=this.root.activeElement;if(T==this.dom)return!0;if(!T||!this.dom.contains(T))return!1;for(;T&&this.dom!=T&&this.dom.contains(T);){if(T.contentEditable=="false")return!1;T=T.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&he(this.dom),Ut(this),this.domObserver.start()}get root(){let T=this._root;if(T==null){for(let _=this.dom.parentNode;_;_=_.parentNode)if(_.nodeType==9||_.nodeType==11&&_.host)return _.getSelection||(Object.getPrototypeOf(_).getSelection=()=>_.ownerDocument.getSelection()),this._root=_}return T||document}posAtCoords(T){return ue(this,T)}coordsAtPos(T,_=1){return ne(this,T,_)}domAtPos(T,_=0){return this.docView.domFromPos(T,_)}nodeDOM(T){let _=this.docView.descAt(T);return _?_.nodeDOM:null}posAtDOM(T,_,J=-1){let oe=this.docView.posFromDOM(T,_,J);if(oe==null)throw new RangeError("DOM position not inside the editor");return oe}endOfTextblock(T,_){return ht(this,_||this.state,T)}pasteHTML(T,_){return We(this,"",T,!1,_||new ClipboardEvent("paste"))}pasteText(T,_){return We(this,T,null,!0,_||new ClipboardEvent("paste"))}destroy(){!this.docView||(Sr(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ua(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(T){return Br(this,T)}dispatch(T){let _=this._props.dispatchTransaction;_?_.call(this,T):this.updateState(this.state.apply(T))}domSelectionRange(){return A&&this.root.nodeType===11&&d(this.dom.ownerDocument)==this.dom?ot(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Hr(j){let T=Object.create(null);return T.class="ProseMirror",T.contenteditable=String(j.editable),T.translate="no",j.someProp("attributes",_=>{if(typeof _=="function"&&(_=_(j.state)),_)for(let J in _)J=="class"&&(T.class+=" "+_[J]),J=="style"?T.style=(T.style?T.style+";":"")+_[J]:!T[J]&&J!="contenteditable"&&J!="nodeName"&&(T[J]=String(_[J]))}),[Yt.node(0,j.state.doc.content.size,T)]}function Xr(j){if(j.markCursor){let T=document.createElement("img");T.className="ProseMirror-separator",T.setAttribute("mark-placeholder","true"),T.setAttribute("alt",""),j.cursorWrapper={dom:T,deco:Yt.widget(j.state.selection.head,T,{raw:!0,marks:j.markCursor})}}else j.cursorWrapper=null}function Ir(j){return!j.someProp("editable",T=>T(j.state)===!1)}function Ur(j,T){let _=Math.min(j.$anchor.sharedDepth(j.head),T.$anchor.sharedDepth(T.head));return j.$anchor.start(_)!=T.$anchor.start(_)}function mr(j){let T=Object.create(null);function _(J){for(let oe in J)Object.prototype.hasOwnProperty.call(T,oe)||(T[oe]=J[oe])}return j.someProp("nodeViews",_),j.someProp("markViews",_),T}function ro(j,T){let _=0,J=0;for(let oe in j){if(j[oe]!=T[oe])return!0;_++}for(let oe in T)J++;return _!=J}function co(j){if(j.spec.state||j.spec.filterTransaction||j.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},function($,n,t){"use strict";t.d(n,"c",function(){return l}),t.d(n,"a",function(){return h}),t.d(n,"b",function(){return m});var e=t(0),s=t(1),o=t(86),a=t(228),c={unreadDot:"frontend-reader2-UnreadBadge-module__unreadDot--15-uK"};function l(g,v=Object(e.h)(p,null)){const[O,u]=Object(s.k)(g);return[O&&v,()=>{u(!1)}]}function p(){return Object(e.h)(h,null)}function h({className:g}){const{isHovering:v,ref:O}=Object(a.f)();return Object(e.h)(e.Fragment,null,Object(e.h)(m,{className:g,ref:O}),v&&Object(e.h)(a.e,{tetherRef:O},"New since your last visit"))}const m=Object(o.a)(c.unreadDot)},function($,n){function t(e,s,o){return s in e?Object.defineProperty(e,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[s]=o,e}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]);n.a=s},function($,n,t){var e=t(402),s=t(417),o=t(173);function a(c){return o(c)?e(c):s(c)}$.exports=a},function($,n,t){"use strict";t.d(n,"f",function(){return C}),t.d(n,"a",function(){return R}),t.d(n,"c",function(){return U}),t.d(n,"d",function(){return F}),t.d(n,"b",function(){return z});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(105),l=t(299),p=t(3),h=t(9),m=t(17),g=t(358),v=t(618),O=t(188),u=t(47),r=t(64),i=t(338),d=t(600),b=t(7),w=t(8),E=t(4);const S=({children:k,separator:K})=>{const Y=[],ee=Object(e.toChildArray)(k);return ee.forEach((ae,he)=>{Y.push(ae),he!==ee.length-1&&Y.push(K)}),Object(e.h)(e.Fragment,null,Y)};var P=t(124),D=Object.defineProperty,W=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,y=(k,K,Y)=>K in k?D(k,K,{enumerable:!0,configurable:!0,writable:!0,value:Y}):k[K]=Y,M=(k,K)=>{for(var Y in K||(K={}))B.call(K,Y)&&y(k,Y,K[Y]);if(W)for(var Y of W(K))f.call(K,Y)&&y(k,Y,K[Y]);return k},N=(k,K)=>{var Y={};for(var ee in k)B.call(k,ee)&&K.indexOf(ee)<0&&(Y[ee]=k[ee]);if(k!=null&&W)for(var ee of W(k))K.indexOf(ee)<0&&f.call(k,ee)&&(Y[ee]=k[ee]);return Y};function A(k,{disableMonthlyPrice:K=!1}={}){const Y=!K&&k.plans&&k.plans.filter(he=>he.interval==="month").sort((he,me)=>he.amount-me.amount)[0],ee=k.plans&&k.plans.filter(he=>he.interval==="year").sort((he,me)=>he.amount-me.amount)[0],ae=Y||ee;if(ae)return Object(h.planBasePricing)(ae)}const L={desktop:15,mobile:6};function C(k,{includePrice:K=!0,includeRankingDetail:Y=!0,includeByline:ee=!0,includeBadge:ae=!1,rankingDetailOverrideText:he=null,disableMonthlyPrice:me=!1,includePostsPerMonthCount:Ye=!1}={}){const se=Object(h.getByLine)(k);let ie=null;return Y&&(ie=he||k.rankingDetail),Object(e.h)(S,{separator:" \xB7 "},ee&&se&&Object(e.h)(E.a,{inline:!0,gap:4},"By ",se,ae&&Object(e.h)(P.a,{size:"sm",tier:k.author_bestseller_tier,userId:k.author_id})),ie,Ye&&k.numPostsLastMonth&&`Published ${Object(h.pluralize)(k.numPostsLastMonth,"post")} in the last month`,K&&A(k,{disableMonthlyPrice:me}))}const R=({className:k,hasFeatured:K,categories:Y,categoryId:ee,categoryIds:ae,loadingCategoryId:he,ranking:me,onCategoryClicked:Ye,defaultExpanded:se,isReaderOnboarding:ie})=>{const[Ee,Oe]=Object(s.k)(se||!1),ce=Object(c.useMediaQuery)({query:"only screen and (max-width: 650px)"}),ue=L[ce?"mobile":"desktop"],pe=Ee?Y:Y.slice(0,ue),$e=ne=>ne.id===ee||(ae==null?void 0:ae.includes(ne.id));return Object(e.h)("div",{className:a()("categories",k)},K?Object(e.h)(m.b,{className:a()({active:ee==="featured"&&(!he||he==="featured"),loading:he==="featured"&&ee!=="featured"}),onClick:()=>Ye({categoryId:"featured",ranking:"all",categories:Y})},"Featured"):null,pe.map(ne=>Object(e.h)(m.b,{key:ne.id,className:a()({active:$e(ne)&&(!he||he===ne.id),loading:he===ne.id&&ee!==ne.id}),onClick:()=>Ye({categoryId:ne.id,ranking:me,categories:Y})},ne.id==="twitter"&&Object(e.h)(O.default,{width:ce?12:15,height:ce?12:15,strokeWidth:0}),Object(h.toTitleCase)(ne.canonical_name||""))),!ie&&Object(e.h)(m.b,{className:a()({active:ee===h.COMMUNITY_PICKS_CATEGORY_NAME&&(!he||he===h.COMMUNITY_PICKS_CATEGORY_NAME),loading:he===h.COMMUNITY_PICKS_CATEGORY_NAME&&ee!==h.COMMUNITY_PICKS_CATEGORY_NAME}),onClick:()=>Ye({categoryId:h.COMMUNITY_PICKS_CATEGORY_NAME,ranking:"all",categories:Y})},"Writer favorites"),!ie&&Object(e.h)(m.b,{className:a()({active:ee===h.TASTEMAKER_CATEGORY_NAME&&(!he||he===h.TASTEMAKER_CATEGORY_NAME),loading:he===h.TASTEMAKER_CATEGORY_NAME&&ee!==h.TASTEMAKER_CATEGORY_NAME}),onClick:()=>Ye({categoryId:h.TASTEMAKER_CATEGORY_NAME,ranking:"all",categories:Y})},"Featured recommenders"),Y.length>ue&&!Ee&&Object(e.h)(m.b,{className:"show-more",onClick:()=>Oe(!0)},Object(e.h)(v.default,null)))},U=({publications:k,explanations:K,ranking:Y,openInNew:ee,startRankAt:ae=0,source:he,onPublicationVisited:me=null,user:Ye,categoryId:se})=>Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"publications"},k.map((ie,Ee)=>{var Oe,ce,ue;let pe=K&&K[Ee];if(!ie)return;pe||(pe=[]);const $e=pe.filter(Ft=>["posts.title","posts.subtitle"].includes(Ft.type)),ne=!!((ce=(Oe=$e[0])==null?void 0:Oe.posts[0][0])==null?void 0:ce.slug);let X;ne&&(X=(ue=$e[0])==null?void 0:ue.posts[0][0]);const q=pe.filter(Ft=>Ft.type==="description")[0],Ne=pe.filter(Ft=>["name","subdomain","hero_text","custom_domain","author_name"].includes(Ft.type)).length>0||!q&&!X,Qe=pe.filter(Ft=>Ft.type==="description").map(Ft=>Ft.keyword),Ze=pe.filter(Ft=>["posts.title","posts.subtitle"].includes(Ft.type)).map(Ft=>Ft.keyword),tt=Object(p.getPubUrl)(ie,{params:{utm_source:he||"discover"},signedIn:!!Ye});return Object(e.h)("a",{key:ie.id,className:"publication",href:tt,native:!0,target:ee?"_blank":null,onClick:Ft=>{Object(b.l)(ie,he||"leaderboards",{position:Ee+1,category:se}),me&&me(ie)},rel:"noopener"},Y==="paid"?Object(e.h)("div",{className:"publication-rank"},Ee+1+ae):null,Object(e.h)("div",{className:"publication-content"},Object(e.h)(r.a,{pub:ie,href:tt,logo_url:ie.logo_url||ie.author_photo_url,linkify:!1,belowTheFold:!0}),Object(e.h)("div",{className:"publication-text-area"},Object(e.h)("div",{className:"publication-title"},ie.name),(Ne||X)&&Object(e.h)("div",{className:"publication-description"},ie.editorial_bio||Z(ie.hero_text,Qe)),!Ne&&q&&!X&&Object(e.h)("div",{className:"publication-description"},Z(q.sentence,Qe)),!Ne&&X&&Object(e.h)("div",{className:"publication-explanation-box"},ne&&Object(e.h)("a",{className:"title",href:Object(p.getPostUrl)(ie,X)},Object(e.h)("div",{className:"post-preview-content"},Object(e.h)("div",{className:"left-flex"},Object(e.h)("p",{className:"title"},Z(X.title,Ze)),Object(e.h)("p",{className:"subtitle"},Z(X.subtitle,Ze))),Object(e.h)("div",{className:"right-flex"},Object(e.h)("img",{src:X.cover_image,className:X.cover_image?"":"no-preview"}))))),Object(e.h)("div",{className:"publication-author"},C(ie)))))})));function Z(k,K){if(!k)return"";const Y=new RegExp(K.join("|"),"ig"),ee=k.split(Y),ae=[...k.matchAll(Y)];return Object(e.h)("span",null,ee.map((he,me)=>Object(e.h)(e.Fragment,null,he,me!==ee.length-1&&Object(e.h)("b",null,ae[me]))))}const F=({onCategoryClicked:k,categoryId:K,ranking:Y,loadingRanking:ee,categories:ae})=>["featured","twitter",h.COMMUNITY_PICKS_CATEGORY_NAME,h.TASTEMAKER_CATEGORY_NAME].includes(K)?null:Object(e.h)("div",{className:"ranking-toggle"},Object(e.h)(u.a,{className:a()({active:Y==="paid"&&!ee||ee==="paid",loading:ee==="paid"&&Y!=="paid"}),onClick:()=>k({categoryId:K,ranking:"paid",categories:ae})},"Top paid"),"  \xB7  ",Object(e.h)(u.a,{className:a()({active:Y==="all"&&!ee||ee==="all",loading:ee==="all"&&Y!=="all"}),onClick:()=>k({categoryId:K,ranking:"all",categories:ae})},"All")),z=k=>{var K=k,{Component:Y=G}=K,ee=N(K,["Component"]);const ae=Object(d.a)(ee);return ae.categories?Object(e.h)(Y,M({},ae)):null};class G extends e.Component{componentDidUpdate(K){if(this.props.categorySlug===K.categorySlug&&this.props.rankingSlug===K.rankingSlug)return;const Y=Object(l.getCategoryIdFromSlug)(this.props.categorySlug,this.props.categories),ee=this.props.rankingSlug||"paid";this.props.loadPublications({categoryId:Y,ranking:ee})}startReading(K){window.sessionStorage.setItem("initialJoinSubstack","true"),Object(b.i)(b.a.HOMEPAGE_READER_LINK_CLICKED,{url:Object(p.getBaseReaderUrl)()}),Object(w.redirect)(Object(p.getBaseReaderUrl)(),{event:K})}render({categories:K,publications:Y,categoryId:ee,loadingCategoryId:ae,ranking:he,loadingRanking:me,onCategoryClicked:Ye,hasMore:se,viewMore:ie,featuredPublications:Ee,underratedPublications:Oe,tastemakerPublications:ce,maxPublications:ue,showTwitterBanner:pe,user:$e}){const ne=ee==="featured",X=ee===h.COMMUNITY_PICKS_CATEGORY_NAME,q=ee===h.TASTEMAKER_CATEGORY_NAME,Ne=ee==="twitter",Qe=K.find(Ze=>Ze.id===ee);return ne&&!Ee.length&&typeof window!="undefined"&&Ye({categoryId:h.COMMUNITY_PICKS_CATEGORY_NAME,ranking:"all",categories:K}),Object(e.h)("div",{className:a()("new-landing-page reader-landing-page page",{"category-featured":ne})},Object(e.h)("div",{className:"container"},Object(e.h)("div",{className:"landing-content"},Object(e.h)("div",{className:"landing-section landing-publications"},Object(e.h)("div",{className:"publications-header not-mobile"},Object(e.h)(F,{categories:K,categoryId:ee,ranking:he,onCategoryClicked:Ye})),Object(e.h)(U,{publications:Y,ranking:ne||X||q?"all":he,categoryId:ee}),he==="all"&&!ne&&!X&&!q&&!Ne&&!ue&&se&&Object(e.h)("div",{className:"view-more"},Object(e.h)(m.b,{className:"primary top-pad",onClick:ie},"View more")),ue&&ee!=="featured"&&Object(e.h)("div",{className:"see-all",style:{paddingLeft:he==="all"?"108px":"146px"}},Object(e.h)("a",{href:ne?Object(p.getDiscoverCategoryUrl)():[h.TASTEMAKER_CATEGORY_NAME,h.COMMUNITY_PICKS_CATEGORY_NAME].includes(ee)?Object(p.getDiscoverCategoryUrl)({slug:ee},he):Object(p.getDiscoverCategoryUrl)(Qe,he),native:!0},"See all ",Object(e.h)(g.default,{width:7,height:11,color:"#544740",style:{marginLeft:"3px"}})))),Object(e.h)("div",{className:"landing-section landing-categories"},Object(e.h)("div",{className:"only-mobile"},Object(e.h)("div",{className:"mobile-toggle"},Object(e.h)(F,{categories:K,categoryId:ee,ranking:he,onCategoryClicked:Ye}))),Object(e.h)(R,{hasFeatured:Ee&&Ee.length>0,hasUnderrated:Oe&&Oe.length>0,hasTastemakers:ce&&ce.length>0,categories:K,categoryId:ee,loadingCategoryId:ae,onCategoryClicked:Ye,ranking:he,loadingRanking:me}))),pe&&ee==="featured"&&!($e==null?void 0:$e.has_linked_twitter)?Object(e.h)(i.b,null):null))}}var V=n.e=z},function($,n,t){"use strict";t.d(n,"a",function(){return Ot});var e=t(127),s=t(32);function o(lt){if(Array.isArray(lt))return lt}function a(lt,Be){var _e=lt==null?null:typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(_e!=null){var Ae=[],fe=!0,ft=!1,nt,ct;try{for(_e=_e.call(lt);!(fe=(nt=_e.next()).done)&&(Ae.push(nt.value),!(Be&&Ae.length===Be));fe=!0);}catch(Xe){ft=!0,ct=Xe}finally{try{!fe&&_e.return!=null&&_e.return()}finally{if(ft)throw ct}}return Ae}}var c=t(312);function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(lt,Be){return o(lt)||a(lt,Be)||Object(c.a)(lt,Be)||l()}for(var h=t(437),m=t(77),g=t(97),v=t(98),O=t(262),u=t(99),r=t(106),i=t(70),d=t(2),b=t(250),w=t(30),E=t(39),S=t(140),P=[{base:"A",letters:"A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xC6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xE6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],D=new RegExp("["+P.map(function(lt){return lt.letters}).join("")+"]","g"),W={},B=0;B<P.length;B++)for(var f=P[B],y=0;y<f.letters.length;y++)W[f.letters[y]]=f.base;var M=function(Be){return Be.replace(D,function(_e){return W[_e]})};function N(lt,Be){var _e=Object.keys(lt);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(lt);Be&&(Ae=Ae.filter(function(fe){return Object.getOwnPropertyDescriptor(lt,fe).enumerable})),_e.push.apply(_e,Ae)}return _e}function A(lt){for(var Be=1;Be<arguments.length;Be++){var _e=arguments[Be]!=null?arguments[Be]:{};Be%2?N(Object(_e),!0).forEach(function(Ae){Object(m.a)(lt,Ae,_e[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(_e)):N(Object(_e)).forEach(function(Ae){Object.defineProperty(lt,Ae,Object.getOwnPropertyDescriptor(_e,Ae))})}return lt}var L=function(Be){return Be.replace(/^\s+|\s+$/g,"")},C=function(Be){return"".concat(Be.label," ").concat(Be.value)},R=function(Be){return function(_e,Ae){var fe=A({ignoreCase:!0,ignoreAccents:!0,stringify:C,trim:!0,matchFrom:"any"},Be),ft=fe.ignoreCase,nt=fe.ignoreAccents,ct=fe.stringify,Xe=fe.trim,gt=fe.matchFrom,Tt=Xe?L(Ae):Ae,Ut=Xe?L(ct(_e)):ct(_e);return ft&&(Tt=Tt.toLowerCase(),Ut=Ut.toLowerCase()),nt&&(Tt=M(Tt),Ut=M(Ut)),gt==="start"?Ut.substr(0,Tt.length)===Tt:Ut.indexOf(Tt)>-1}};function U(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Z={name:"1laao21-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;"},F=function(Be){return Object(w.c)("span",Object(s.a)({css:Z},Be))};function z(lt){var Be=lt.in,_e=lt.out,Ae=lt.onExited,fe=lt.appear,ft=lt.enter,nt=lt.exit,ct=lt.innerRef,Xe=lt.emotion,gt=Object(e.a)(lt,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return Object(w.c)("input",Object(s.a)({ref:ct},gt,{css:Object(S.a)({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"")}))}function G(lt){var Be=V();return function(){var Ae=Object(i.a)(lt),fe;if(Be){var ft=Object(i.a)(this).constructor;fe=Reflect.construct(Ae,arguments,ft)}else fe=Ae.apply(this,arguments);return Object(r.a)(this,fe)}}function V(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(lt){return!1}}var k=function(lt){Object(u.a)(_e,lt);var Be=G(_e);function _e(){return Object(g.a)(this,_e),Be.apply(this,arguments)}return Object(v.a)(_e,[{key:"componentDidMount",value:function(){this.props.innerRef(Object(d.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),_e}(d.Component),K=["boxSizing","height","overflow","paddingRight","position"],Y={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ee(lt){lt.preventDefault()}function ae(lt){lt.stopPropagation()}function he(){var lt=this.scrollTop,Be=this.scrollHeight,_e=lt+this.offsetHeight;lt===0?this.scrollTop=1:_e===Be&&(this.scrollTop=lt-1)}function me(){return"ontouchstart"in window||navigator.maxTouchPoints}function Ye(lt){var Be=se();return function(){var Ae=Object(i.a)(lt),fe;if(Be){var ft=Object(i.a)(this).constructor;fe=Reflect.construct(Ae,arguments,ft)}else fe=Ae.apply(this,arguments);return Object(r.a)(this,fe)}}function se(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(lt){return!1}}var ie=!!(window.document&&window.document.createElement),Ee=0,Oe=function(lt){Object(u.a)(_e,lt);var Be=Ye(_e);function _e(){var Ae;Object(g.a)(this,_e);for(var fe=arguments.length,ft=new Array(fe),nt=0;nt<fe;nt++)ft[nt]=arguments[nt];return Ae=Be.call.apply(Be,[this].concat(ft)),Ae.originalStyles={},Ae.listenerOptions={capture:!1,passive:!1},Ae}return Object(v.a)(_e,[{key:"componentDidMount",value:function(){var fe=this;if(!!ie){var ft=this.props,nt=ft.accountForScrollbars,ct=ft.touchScrollTarget,Xe=document.body,gt=Xe&&Xe.style;if(nt&&K.forEach(function(sn){var _n=gt&&gt[sn];fe.originalStyles[sn]=_n}),nt&&Ee<1){var Tt=parseInt(this.originalStyles.paddingRight,10)||0,Ut=document.body?document.body.clientWidth:0,qt=window.innerWidth-Ut+Tt||0;Object.keys(Y).forEach(function(sn){var _n=Y[sn];gt&&(gt[sn]=_n)}),gt&&(gt.paddingRight="".concat(qt,"px"))}Xe&&me()&&(Xe.addEventListener("touchmove",ee,this.listenerOptions),ct&&(ct.addEventListener("touchstart",he,this.listenerOptions),ct.addEventListener("touchmove",ae,this.listenerOptions))),Ee+=1}}},{key:"componentWillUnmount",value:function(){var fe=this;if(!!ie){var ft=this.props,nt=ft.accountForScrollbars,ct=ft.touchScrollTarget,Xe=document.body,gt=Xe&&Xe.style;Ee=Math.max(Ee-1,0),nt&&Ee<1&&K.forEach(function(Tt){var Ut=fe.originalStyles[Tt];gt&&(gt[Tt]=Ut)}),Xe&&me()&&(Xe.removeEventListener("touchmove",ee,this.listenerOptions),ct&&(ct.removeEventListener("touchstart",he,this.listenerOptions),ct.removeEventListener("touchmove",ae,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),_e}(d.Component);Oe.defaultProps={accountForScrollbars:!0};function ce(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}function ue(lt){var Be=pe();return function(){var Ae=Object(i.a)(lt),fe;if(Be){var ft=Object(i.a)(this).constructor;fe=Reflect.construct(Ae,arguments,ft)}else fe=Ae.apply(this,arguments);return Object(r.a)(this,fe)}}function pe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(lt){return!1}}var $e={name:"1dsbpcp",styles:"position:fixed;left:0;bottom:0;right:0;top:0;"},ne=function(lt){Object(u.a)(_e,lt);var Be=ue(_e);function _e(){var Ae;Object(g.a)(this,_e);for(var fe=arguments.length,ft=new Array(fe),nt=0;nt<fe;nt++)ft[nt]=arguments[nt];return Ae=Be.call.apply(Be,[this].concat(ft)),Ae.state={touchScrollTarget:null},Ae.getScrollTarget=function(ct){ct!==Ae.state.touchScrollTarget&&Ae.setState({touchScrollTarget:ct})},Ae.blurSelectInput=function(){document.activeElement&&document.activeElement.blur()},Ae}return Object(v.a)(_e,[{key:"render",value:function(){var fe=this.props,ft=fe.children,nt=fe.isEnabled,ct=this.state.touchScrollTarget;return nt?Object(w.c)("div",null,Object(w.c)("div",{onClick:this.blurSelectInput,css:$e}),Object(w.c)(k,{innerRef:this.getScrollTarget},ft),ct?Object(w.c)(Oe,{touchScrollTarget:ct}):null):ft}}]),_e}(d.PureComponent);function X(lt){var Be=q();return function(){var Ae=Object(i.a)(lt),fe;if(Be){var ft=Object(i.a)(this).constructor;fe=Reflect.construct(Ae,arguments,ft)}else fe=Ae.apply(this,arguments);return Object(r.a)(this,fe)}}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(lt){return!1}}var Ne=function(lt){Object(u.a)(_e,lt);var Be=X(_e);function _e(){var Ae;Object(g.a)(this,_e);for(var fe=arguments.length,ft=new Array(fe),nt=0;nt<fe;nt++)ft[nt]=arguments[nt];return Ae=Be.call.apply(Be,[this].concat(ft)),Ae.isBottom=!1,Ae.isTop=!1,Ae.scrollTarget=void 0,Ae.touchStart=void 0,Ae.cancelScroll=function(ct){ct.preventDefault(),ct.stopPropagation()},Ae.handleEventDelta=function(ct,Xe){var gt=Ae.props,Tt=gt.onBottomArrive,Ut=gt.onBottomLeave,qt=gt.onTopArrive,sn=gt.onTopLeave,_n=Ae.scrollTarget,Hn=_n.scrollTop,wn=_n.scrollHeight,Un=_n.clientHeight,bn=Ae.scrollTarget,cr=Xe>0,fr=wn-Un-Hn,ur=!1;fr>Xe&&Ae.isBottom&&(Ut&&Ut(ct),Ae.isBottom=!1),cr&&Ae.isTop&&(sn&&sn(ct),Ae.isTop=!1),cr&&Xe>fr?(Tt&&!Ae.isBottom&&Tt(ct),bn.scrollTop=wn,ur=!0,Ae.isBottom=!0):!cr&&-Xe>Hn&&(qt&&!Ae.isTop&&qt(ct),bn.scrollTop=0,ur=!0,Ae.isTop=!0),ur&&Ae.cancelScroll(ct)},Ae.onWheel=function(ct){Ae.handleEventDelta(ct,ct.deltaY)},Ae.onTouchStart=function(ct){Ae.touchStart=ct.changedTouches[0].clientY},Ae.onTouchMove=function(ct){var Xe=Ae.touchStart-ct.changedTouches[0].clientY;Ae.handleEventDelta(ct,Xe)},Ae.getScrollTarget=function(ct){Ae.scrollTarget=ct},Ae}return Object(v.a)(_e,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(fe){!fe||(typeof fe.addEventListener=="function"&&fe.addEventListener("wheel",this.onWheel,!1),typeof fe.addEventListener=="function"&&fe.addEventListener("touchstart",this.onTouchStart,!1),typeof fe.addEventListener=="function"&&fe.addEventListener("touchmove",this.onTouchMove,!1))}},{key:"stopListening",value:function(fe){!fe||(typeof fe.removeEventListener=="function"&&fe.removeEventListener("wheel",this.onWheel,!1),typeof fe.removeEventListener=="function"&&fe.removeEventListener("touchstart",this.onTouchStart,!1),typeof fe.removeEventListener=="function"&&fe.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return d.default.createElement(k,{innerRef:this.getScrollTarget},this.props.children)}}]),_e}(d.Component);function Qe(lt){var Be=lt.isEnabled,_e=Be===void 0?!0:Be,Ae=Object(e.a)(lt,["isEnabled"]);return _e?d.default.createElement(Ne,Ae):Ae.children}var Ze=function(Be){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ae=_e.isSearchable,fe=_e.isMulti,ft=_e.label,nt=_e.isDisabled,ct=_e.tabSelectsValue;switch(Be){case"menu":return"Use Up and Down to choose options".concat(nt?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(ct?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(ft||"Select"," is focused ").concat(Ae?",type to refine list":"",", press Down to open the menu, ").concat(fe?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},tt=function(Be,_e){var Ae=_e.value,fe=_e.isDisabled;if(!!Ae)switch(Be){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(Ae,", deselected.");case"select-option":return fe?"option ".concat(Ae," is disabled. Select another option."):"option ".concat(Ae,", selected.")}},Ft=function(Be){var _e=Be.focusedValue,Ae=Be.getOptionLabel,fe=Be.selectValue;return"value ".concat(Ae(_e)," focused, ").concat(fe.indexOf(_e)+1," of ").concat(fe.length,".")},Lt=function(Be){var _e=Be.focusedOption,Ae=Be.getOptionLabel,fe=Be.options;return"option ".concat(Ae(_e)," focused").concat(_e.isDisabled?" disabled":"",", ").concat(fe.indexOf(_e)+1," of ").concat(fe.length,".")},rn=function(Be){var _e=Be.inputValue,Ae=Be.screenReaderMessage;return"".concat(Ae).concat(_e?" for search term "+_e:"",".")},ht=function(Be){return Be.label},je=function(Be){return Be.label},Le=function(Be){return Be.value},rt=function(Be){return!!Be.isDisabled};function Pe(lt,Be){var _e=Object.keys(lt);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(lt);Be&&(Ae=Ae.filter(function(fe){return Object.getOwnPropertyDescriptor(lt,fe).enumerable})),_e.push.apply(_e,Ae)}return _e}function de(lt){for(var Be=1;Be<arguments.length;Be++){var _e=arguments[Be]!=null?arguments[Be]:{};Be%2?Pe(Object(_e),!0).forEach(function(Ae){Object(m.a)(lt,Ae,_e[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(_e)):Pe(Object(_e)).forEach(function(Ae){Object.defineProperty(lt,Ae,Object.getOwnPropertyDescriptor(_e,Ae))})}return lt}var be={clearIndicator:E.k,container:E.i,control:E.j,dropdownIndicator:E.l,group:E.o,groupHeading:E.m,indicatorsContainer:E.q,indicatorSeparator:E.n,input:E.p,loadingIndicator:E.t,loadingMessage:E.r,menu:E.u,menuList:E.s,menuPortal:E.v,multiValue:E.w,multiValueLabel:E.x,multiValueRemove:E.y,noOptionsMessage:E.z,option:E.A,placeholder:E.B,singleValue:E.C,valueContainer:E.D};function Ie(lt){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=de({},lt);return Object.keys(Be).forEach(function(Ae){lt[Ae]?_e[Ae]=function(fe,ft){return Be[Ae](lt[Ae](fe,ft),ft)}:_e[Ae]=Be[Ae]}),_e}var ke={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Te=4,x=4,H=38,le=x*2,Ce={baseUnit:x,controlHeight:H,menuGutter:le},Ue={borderRadius:Te,colors:ke,spacing:Ce};function Ve(lt,Be){var _e=Object.keys(lt);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(lt);Be&&(Ae=Ae.filter(function(fe){return Object.getOwnPropertyDescriptor(lt,fe).enumerable})),_e.push.apply(_e,Ae)}return _e}function bt(lt){for(var Be=1;Be<arguments.length;Be++){var _e=arguments[Be]!=null?arguments[Be]:{};Be%2?Ve(Object(_e),!0).forEach(function(Ae){Object(m.a)(lt,Ae,_e[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(_e)):Ve(Object(_e)).forEach(function(Ae){Object.defineProperty(lt,Ae,Object.getOwnPropertyDescriptor(_e,Ae))})}return lt}function yt(lt){var Be=Qt();return function(){var Ae=Object(i.a)(lt),fe;if(Be){var ft=Object(i.a)(this).constructor;fe=Reflect.construct(Ae,arguments,ft)}else fe=Ae.apply(this,arguments);return Object(r.a)(this,fe)}}function Qt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(lt){return!1}}var tn={backspaceRemovesValue:!0,blurInputOnSelect:Object(E.E)(),captureMenuScroll:!Object(E.E)(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:R(),formatGroupLabel:ht,getOptionLabel:je,getOptionValue:Le,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:rt,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Object(E.F)(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(Be){var _e=Be.count;return"".concat(_e," result").concat(_e!==1?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0},Kn=1,Ot=function(lt){Object(u.a)(_e,lt);var Be=yt(_e);function _e(Ae){var fe;Object(g.a)(this,_e),fe=Be.call(this,Ae),fe.state={ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]},fe.blockOptionHover=!1,fe.isComposing=!1,fe.clearFocusValueOnUpdate=!1,fe.commonProps=void 0,fe.components=void 0,fe.hasGroups=!1,fe.initialTouchX=0,fe.initialTouchY=0,fe.inputIsHiddenAfterUpdate=void 0,fe.instancePrefix="",fe.openAfterFocus=!1,fe.scrollToFocusedOptionOnUpdate=!1,fe.userIsDragging=void 0,fe.controlRef=null,fe.getControlRef=function(Xe){fe.controlRef=Xe},fe.focusedOptionRef=null,fe.getFocusedOptionRef=function(Xe){fe.focusedOptionRef=Xe},fe.menuListRef=null,fe.getMenuListRef=function(Xe){fe.menuListRef=Xe},fe.inputRef=null,fe.getInputRef=function(Xe){fe.inputRef=Xe},fe.cacheComponents=function(Xe){fe.components=Object(E.G)({components:Xe})},fe.focus=fe.focusInput,fe.blur=fe.blurInput,fe.onChange=function(Xe,gt){var Tt=fe.props,Ut=Tt.onChange,qt=Tt.name;Ut(Xe,bt(bt({},gt),{},{name:qt}))},fe.setValue=function(Xe){var gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set-value",Tt=arguments.length>2?arguments[2]:void 0,Ut=fe.props,qt=Ut.closeMenuOnSelect,sn=Ut.isMulti;fe.onInputChange("",{action:"set-value"}),qt&&(fe.inputIsHiddenAfterUpdate=!sn,fe.onMenuClose()),fe.clearFocusValueOnUpdate=!0,fe.onChange(Xe,{action:gt,option:Tt})},fe.selectOption=function(Xe){var gt=fe.props,Tt=gt.blurInputOnSelect,Ut=gt.isMulti,qt=fe.state.selectValue;if(Ut)if(fe.isOptionSelected(Xe,qt)){var sn=fe.getOptionValue(Xe);fe.setValue(qt.filter(function(_n){return fe.getOptionValue(_n)!==sn}),"deselect-option",Xe),fe.announceAriaLiveSelection({event:"deselect-option",context:{value:fe.getOptionLabel(Xe)}})}else fe.isOptionDisabled(Xe,qt)?fe.announceAriaLiveSelection({event:"select-option",context:{value:fe.getOptionLabel(Xe),isDisabled:!0}}):(fe.setValue([].concat(Object(h.a)(qt),[Xe]),"select-option",Xe),fe.announceAriaLiveSelection({event:"select-option",context:{value:fe.getOptionLabel(Xe)}}));else fe.isOptionDisabled(Xe,qt)?fe.announceAriaLiveSelection({event:"select-option",context:{value:fe.getOptionLabel(Xe),isDisabled:!0}}):(fe.setValue(Xe,"select-option"),fe.announceAriaLiveSelection({event:"select-option",context:{value:fe.getOptionLabel(Xe)}}));Tt&&fe.blurInput()},fe.removeValue=function(Xe){var gt=fe.state.selectValue,Tt=fe.getOptionValue(Xe),Ut=gt.filter(function(qt){return fe.getOptionValue(qt)!==Tt});fe.onChange(Ut.length?Ut:null,{action:"remove-value",removedValue:Xe}),fe.announceAriaLiveSelection({event:"remove-value",context:{value:Xe?fe.getOptionLabel(Xe):""}}),fe.focusInput()},fe.clearValue=function(){fe.onChange(null,{action:"clear"})},fe.popValue=function(){var Xe=fe.state.selectValue,gt=Xe[Xe.length-1],Tt=Xe.slice(0,Xe.length-1);fe.announceAriaLiveSelection({event:"pop-value",context:{value:gt?fe.getOptionLabel(gt):""}}),fe.onChange(Tt.length?Tt:null,{action:"pop-value",removedValue:gt})},fe.getValue=function(){return fe.state.selectValue},fe.cx=function(){for(var Xe=arguments.length,gt=new Array(Xe),Tt=0;Tt<Xe;Tt++)gt[Tt]=arguments[Tt];return E.H.apply(void 0,[fe.props.classNamePrefix].concat(gt))},fe.getOptionLabel=function(Xe){return fe.props.getOptionLabel(Xe)},fe.getOptionValue=function(Xe){return fe.props.getOptionValue(Xe)},fe.getStyles=function(Xe,gt){var Tt=be[Xe](gt);Tt.boxSizing="border-box";var Ut=fe.props.styles[Xe];return Ut?Ut(Tt,gt):Tt},fe.getElementId=function(Xe){return"".concat(fe.instancePrefix,"-").concat(Xe)},fe.getActiveDescendentId=function(){var Xe=fe.props.menuIsOpen,gt=fe.state,Tt=gt.menuOptions,Ut=gt.focusedOption;if(!(!Ut||!Xe)){var qt=Tt.focusable.indexOf(Ut),sn=Tt.render[qt];return sn&&sn.key}},fe.announceAriaLiveSelection=function(Xe){var gt=Xe.event,Tt=Xe.context;fe.setState({ariaLiveSelection:tt(gt,Tt)})},fe.announceAriaLiveContext=function(Xe){var gt=Xe.event,Tt=Xe.context;fe.setState({ariaLiveContext:Ze(gt,bt(bt({},Tt),{},{label:fe.props["aria-label"]}))})},fe.onMenuMouseDown=function(Xe){Xe.button===0&&(Xe.stopPropagation(),Xe.preventDefault(),fe.focusInput())},fe.onMenuMouseMove=function(Xe){fe.blockOptionHover=!1},fe.onControlMouseDown=function(Xe){var gt=fe.props.openMenuOnClick;fe.state.isFocused?fe.props.menuIsOpen?Xe.target.tagName!=="INPUT"&&Xe.target.tagName!=="TEXTAREA"&&fe.onMenuClose():gt&&fe.openMenu("first"):(gt&&(fe.openAfterFocus=!0),fe.focusInput()),Xe.target.tagName!=="INPUT"&&Xe.target.tagName!=="TEXTAREA"&&Xe.preventDefault()},fe.onDropdownIndicatorMouseDown=function(Xe){if(!(Xe&&Xe.type==="mousedown"&&Xe.button!==0)&&!fe.props.isDisabled){var gt=fe.props,Tt=gt.isMulti,Ut=gt.menuIsOpen;fe.focusInput(),Ut?(fe.inputIsHiddenAfterUpdate=!Tt,fe.onMenuClose()):fe.openMenu("first"),Xe.preventDefault(),Xe.stopPropagation()}},fe.onClearIndicatorMouseDown=function(Xe){Xe&&Xe.type==="mousedown"&&Xe.button!==0||(fe.clearValue(),Xe.stopPropagation(),fe.openAfterFocus=!1,Xe.type==="touchend"?fe.focusInput():setTimeout(function(){return fe.focusInput()}))},fe.onScroll=function(Xe){typeof fe.props.closeMenuOnScroll=="boolean"?Xe.target instanceof HTMLElement&&Object(E.a)(Xe.target)&&fe.props.onMenuClose():typeof fe.props.closeMenuOnScroll=="function"&&fe.props.closeMenuOnScroll(Xe)&&fe.props.onMenuClose()},fe.onCompositionStart=function(){fe.isComposing=!0},fe.onCompositionEnd=function(){fe.isComposing=!1},fe.onTouchStart=function(Xe){var gt=Xe.touches,Tt=gt&&gt.item(0);!Tt||(fe.initialTouchX=Tt.clientX,fe.initialTouchY=Tt.clientY,fe.userIsDragging=!1)},fe.onTouchMove=function(Xe){var gt=Xe.touches,Tt=gt&&gt.item(0);if(!!Tt){var Ut=Math.abs(Tt.clientX-fe.initialTouchX),qt=Math.abs(Tt.clientY-fe.initialTouchY),sn=5;fe.userIsDragging=Ut>sn||qt>sn}},fe.onTouchEnd=function(Xe){fe.userIsDragging||(fe.controlRef&&!fe.controlRef.contains(Xe.target)&&fe.menuListRef&&!fe.menuListRef.contains(Xe.target)&&fe.blurInput(),fe.initialTouchX=0,fe.initialTouchY=0)},fe.onControlTouchEnd=function(Xe){fe.userIsDragging||fe.onControlMouseDown(Xe)},fe.onClearIndicatorTouchEnd=function(Xe){fe.userIsDragging||fe.onClearIndicatorMouseDown(Xe)},fe.onDropdownIndicatorTouchEnd=function(Xe){fe.userIsDragging||fe.onDropdownIndicatorMouseDown(Xe)},fe.handleInputChange=function(Xe){var gt=Xe.currentTarget.value;fe.inputIsHiddenAfterUpdate=!1,fe.onInputChange(gt,{action:"input-change"}),fe.props.menuIsOpen||fe.onMenuOpen()},fe.onInputFocus=function(Xe){var gt=fe.props,Tt=gt.isSearchable,Ut=gt.isMulti;fe.props.onFocus&&fe.props.onFocus(Xe),fe.inputIsHiddenAfterUpdate=!1,fe.announceAriaLiveContext({event:"input",context:{isSearchable:Tt,isMulti:Ut}}),fe.setState({isFocused:!0}),(fe.openAfterFocus||fe.props.openMenuOnFocus)&&fe.openMenu("first"),fe.openAfterFocus=!1},fe.onInputBlur=function(Xe){if(fe.menuListRef&&fe.menuListRef.contains(document.activeElement)){fe.inputRef.focus();return}fe.props.onBlur&&fe.props.onBlur(Xe),fe.onInputChange("",{action:"input-blur"}),fe.onMenuClose(),fe.setState({focusedValue:null,isFocused:!1})},fe.onOptionHover=function(Xe){fe.blockOptionHover||fe.state.focusedOption===Xe||fe.setState({focusedOption:Xe})},fe.shouldHideSelectedOptions=function(){var Xe=fe.props,gt=Xe.hideSelectedOptions,Tt=Xe.isMulti;return gt===void 0?Tt:gt},fe.onKeyDown=function(Xe){var gt=fe.props,Tt=gt.isMulti,Ut=gt.backspaceRemovesValue,qt=gt.escapeClearsValue,sn=gt.inputValue,_n=gt.isClearable,Hn=gt.isDisabled,wn=gt.menuIsOpen,Un=gt.onKeyDown,bn=gt.tabSelectsValue,cr=gt.openMenuOnFocus,fr=fe.state,ur=fr.focusedOption,er=fr.focusedValue,jr=fr.selectValue;if(!Hn&&!(typeof Un=="function"&&(Un(Xe),Xe.defaultPrevented))){switch(fe.blockOptionHover=!0,Xe.key){case"ArrowLeft":if(!Tt||sn)return;fe.focusValue("previous");break;case"ArrowRight":if(!Tt||sn)return;fe.focusValue("next");break;case"Delete":case"Backspace":if(sn)return;if(er)fe.removeValue(er);else{if(!Ut)return;Tt?fe.popValue():_n&&fe.clearValue()}break;case"Tab":if(fe.isComposing||Xe.shiftKey||!wn||!bn||!ur||cr&&fe.isOptionSelected(ur,jr))return;fe.selectOption(ur);break;case"Enter":if(Xe.keyCode===229)break;if(wn){if(!ur||fe.isComposing)return;fe.selectOption(ur);break}return;case"Escape":wn?(fe.inputIsHiddenAfterUpdate=!1,fe.onInputChange("",{action:"menu-close"}),fe.onMenuClose()):_n&&qt&&fe.clearValue();break;case" ":if(sn)return;if(!wn){fe.openMenu("first");break}if(!ur)return;fe.selectOption(ur);break;case"ArrowUp":wn?fe.focusOption("up"):fe.openMenu("last");break;case"ArrowDown":wn?fe.focusOption("down"):fe.openMenu("first");break;case"PageUp":if(!wn)return;fe.focusOption("pageup");break;case"PageDown":if(!wn)return;fe.focusOption("pagedown");break;case"Home":if(!wn)return;fe.focusOption("first");break;case"End":if(!wn)return;fe.focusOption("last");break;default:return}Xe.preventDefault()}},fe.buildMenuOptions=function(Xe,gt){var Tt=Xe.inputValue,Ut=Tt===void 0?"":Tt,qt=Xe.options,sn=function(Hn,wn){var Un=fe.isOptionDisabled(Hn,gt),bn=fe.isOptionSelected(Hn,gt),cr=fe.getOptionLabel(Hn),fr=fe.getOptionValue(Hn);if(!(fe.shouldHideSelectedOptions()&&bn||!fe.filterOption({label:cr,value:fr,data:Hn},Ut))){var ur=Un?void 0:function(){return fe.onOptionHover(Hn)},er=Un?void 0:function(){return fe.selectOption(Hn)},jr="".concat(fe.getElementId("option"),"-").concat(wn);return{innerProps:{id:jr,onClick:er,onMouseMove:ur,onMouseOver:ur,tabIndex:-1},data:Hn,isDisabled:Un,isSelected:bn,key:jr,label:cr,type:"option",value:fr}}};return qt.reduce(function(_n,Hn,wn){if(Hn.options){fe.hasGroups||(fe.hasGroups=!0);var Un=Hn.options,bn=Un.map(function(ur,er){var jr=sn(ur,"".concat(wn,"-").concat(er));return jr&&_n.focusable.push(ur),jr}).filter(Boolean);if(bn.length){var cr="".concat(fe.getElementId("group"),"-").concat(wn);_n.render.push({type:"group",key:cr,data:Hn,options:bn})}}else{var fr=sn(Hn,"".concat(wn));fr&&(_n.render.push(fr),_n.focusable.push(Hn))}return _n},{render:[],focusable:[]})};var ft=Ae.value;fe.cacheComponents=Object(b.a)(fe.cacheComponents,E.b).bind(Object(O.a)(fe)),fe.cacheComponents(Ae.components),fe.instancePrefix="react-select-"+(fe.props.instanceId||++Kn);var nt=Object(E.c)(ft);fe.buildMenuOptions=Object(b.a)(fe.buildMenuOptions,function(Xe,gt){var Tt=Xe,Ut=p(Tt,2),qt=Ut[0],sn=Ut[1],_n=gt,Hn=p(_n,2),wn=Hn[0],Un=Hn[1];return sn===Un&&qt.inputValue===wn.inputValue&&qt.options===wn.options}).bind(Object(O.a)(fe));var ct=Ae.menuIsOpen?fe.buildMenuOptions(Ae,nt):{render:[],focusable:[]};return fe.state.menuOptions=ct,fe.state.selectValue=nt,fe}return Object(v.a)(_e,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"UNSAFE_componentWillReceiveProps",value:function(fe){var ft=this.props,nt=ft.options,ct=ft.value,Xe=ft.menuIsOpen,gt=ft.inputValue;if(this.cacheComponents(fe.components),fe.value!==ct||fe.options!==nt||fe.menuIsOpen!==Xe||fe.inputValue!==gt){var Tt=Object(E.c)(fe.value),Ut=fe.menuIsOpen?this.buildMenuOptions(fe,Tt):{render:[],focusable:[]},qt=this.getNextFocusedValue(Tt),sn=this.getNextFocusedOption(Ut.focusable);this.setState({menuOptions:Ut,selectValue:Tt,focusedOption:sn,focusedValue:qt})}this.inputIsHiddenAfterUpdate!=null&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(fe){var ft=this.props,nt=ft.isDisabled,ct=ft.menuIsOpen,Xe=this.state.isFocused;(Xe&&!nt&&fe.isDisabled||Xe&&ct&&!fe.menuIsOpen)&&this.focusInput(),Xe&&nt&&!fe.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Object(E.d)(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var fe=this.props,ft=fe.isSearchable,nt=fe.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:ft,isMulti:nt}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(fe,ft){this.props.onInputChange(fe,ft)}},{key:"focusInput",value:function(){!this.inputRef||this.inputRef.focus()}},{key:"blurInput",value:function(){!this.inputRef||this.inputRef.blur()}},{key:"openMenu",value:function(fe){var ft=this,nt=this.state,ct=nt.selectValue,Xe=nt.isFocused,gt=this.buildMenuOptions(this.props,ct),Tt=this.props,Ut=Tt.isMulti,qt=Tt.tabSelectsValue,sn=fe==="first"?0:gt.focusable.length-1;if(!Ut){var _n=gt.focusable.indexOf(ct[0]);_n>-1&&(sn=_n)}this.scrollToFocusedOptionOnUpdate=!(Xe&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.setState({menuOptions:gt,focusedValue:null,focusedOption:gt.focusable[sn]},function(){ft.onMenuOpen(),ft.announceAriaLiveContext({event:"menu",context:{tabSelectsValue:qt}})})}},{key:"focusValue",value:function(fe){var ft=this.props,nt=ft.isMulti,ct=ft.isSearchable,Xe=this.state,gt=Xe.selectValue,Tt=Xe.focusedValue;if(!!nt){this.setState({focusedOption:null});var Ut=gt.indexOf(Tt);Tt||(Ut=-1,this.announceAriaLiveContext({event:"value"}));var qt=gt.length-1,sn=-1;if(!!gt.length){switch(fe){case"previous":Ut===0?sn=0:Ut===-1?sn=qt:sn=Ut-1;break;case"next":Ut>-1&&Ut<qt&&(sn=Ut+1);break}sn===-1&&this.announceAriaLiveContext({event:"input",context:{isSearchable:ct,isMulti:nt}}),this.setState({inputIsHidden:sn!==-1,focusedValue:gt[sn]})}}}},{key:"focusOption",value:function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",ft=this.props,nt=ft.pageSize,ct=ft.tabSelectsValue,Xe=this.state,gt=Xe.focusedOption,Tt=Xe.menuOptions,Ut=Tt.focusable;if(!!Ut.length){var qt=0,sn=Ut.indexOf(gt);gt||(sn=-1,this.announceAriaLiveContext({event:"menu",context:{tabSelectsValue:ct}})),fe==="up"?qt=sn>0?sn-1:Ut.length-1:fe==="down"?qt=(sn+1)%Ut.length:fe==="pageup"?(qt=sn-nt,qt<0&&(qt=0)):fe==="pagedown"?(qt=sn+nt,qt>Ut.length-1&&(qt=Ut.length-1)):fe==="last"&&(qt=Ut.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:Ut[qt],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:rt(Ut[qt]),tabSelectsValue:ct}})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Ue):bt(bt({},Ue),this.props.theme):Ue}},{key:"getCommonProps",value:function(){var fe=this.clearValue,ft=this.cx,nt=this.getStyles,ct=this.getValue,Xe=this.setValue,gt=this.selectOption,Tt=this.props,Ut=Tt.isMulti,qt=Tt.isRtl,sn=Tt.options,_n=this.hasValue();return{cx:ft,clearValue:fe,getStyles:nt,getValue:ct,hasValue:_n,isMulti:Ut,isRtl:qt,options:sn,selectOption:gt,setValue:Xe,selectProps:Tt,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(fe){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var ft=this.state,nt=ft.focusedValue,ct=ft.selectValue,Xe=ct.indexOf(nt);if(Xe>-1){var gt=fe.indexOf(nt);if(gt>-1)return nt;if(Xe<fe.length)return fe[Xe]}return null}},{key:"getNextFocusedOption",value:function(fe){var ft=this.state.focusedOption;return ft&&fe.indexOf(ft)>-1?ft:fe[0]}},{key:"hasValue",value:function(){var fe=this.state.selectValue;return fe.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var fe=this.props,ft=fe.isClearable,nt=fe.isMulti;return ft===void 0?nt:ft}},{key:"isOptionDisabled",value:function(fe,ft){return typeof this.props.isOptionDisabled=="function"?this.props.isOptionDisabled(fe,ft):!1}},{key:"isOptionSelected",value:function(fe,ft){var nt=this;if(ft.indexOf(fe)>-1)return!0;if(typeof this.props.isOptionSelected=="function")return this.props.isOptionSelected(fe,ft);var ct=this.getOptionValue(fe);return ft.some(function(Xe){return nt.getOptionValue(Xe)===ct})}},{key:"filterOption",value:function(fe,ft){return this.props.filterOption?this.props.filterOption(fe,ft):!0}},{key:"formatOptionLabel",value:function(fe,ft){if(typeof this.props.formatOptionLabel=="function"){var nt=this.props.inputValue,ct=this.state.selectValue;return this.props.formatOptionLabel(fe,{context:ft,inputValue:nt,selectValue:ct})}else return this.getOptionLabel(fe)}},{key:"formatGroupLabel",value:function(fe){return this.props.formatGroupLabel(fe)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"constructAriaLiveMessage",value:function(){var fe=this.state,ft=fe.ariaLiveContext,nt=fe.selectValue,ct=fe.focusedValue,Xe=fe.focusedOption,gt=this.props,Tt=gt.options,Ut=gt.menuIsOpen,qt=gt.inputValue,sn=gt.screenReaderStatus,_n=ct?Ft({focusedValue:ct,getOptionLabel:this.getOptionLabel,selectValue:nt}):"",Hn=Xe&&Ut?Lt({focusedOption:Xe,getOptionLabel:this.getOptionLabel,options:Tt}):"",wn=rn({inputValue:qt,screenReaderMessage:sn({count:this.countOptions()})});return"".concat(_n," ").concat(Hn," ").concat(wn," ").concat(ft)}},{key:"renderInput",value:function(){var fe=this.props,ft=fe.isDisabled,nt=fe.isSearchable,ct=fe.inputId,Xe=fe.inputValue,gt=fe.tabIndex,Tt=fe.form,Ut=this.components.Input,qt=this.state.inputIsHidden,sn=ct||this.getElementId("input"),_n={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};if(!nt)return d.default.createElement(z,Object(s.a)({id:sn,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:E.e,onFocus:this.onInputFocus,readOnly:!0,disabled:ft,tabIndex:gt,form:Tt,value:""},_n));var Hn=this.commonProps,wn=Hn.cx,Un=Hn.theme,bn=Hn.selectProps;return d.default.createElement(Ut,Object(s.a)({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:wn,getStyles:this.getStyles,id:sn,innerRef:this.getInputRef,isDisabled:ft,isHidden:qt,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:bn,spellCheck:"false",tabIndex:gt,form:Tt,theme:Un,type:"text",value:Xe},_n))}},{key:"renderPlaceholderOrValue",value:function(){var fe=this,ft=this.components,nt=ft.MultiValue,ct=ft.MultiValueContainer,Xe=ft.MultiValueLabel,gt=ft.MultiValueRemove,Tt=ft.SingleValue,Ut=ft.Placeholder,qt=this.commonProps,sn=this.props,_n=sn.controlShouldRenderValue,Hn=sn.isDisabled,wn=sn.isMulti,Un=sn.inputValue,bn=sn.placeholder,cr=this.state,fr=cr.selectValue,ur=cr.focusedValue,er=cr.isFocused;if(!this.hasValue()||!_n)return Un?null:d.default.createElement(Ut,Object(s.a)({},qt,{key:"placeholder",isDisabled:Hn,isFocused:er}),bn);if(wn){var jr=fr.map(function(mt,Fe){var pt=mt===ur;return d.default.createElement(nt,Object(s.a)({},qt,{components:{Container:ct,Label:Xe,Remove:gt},isFocused:pt,isDisabled:Hn,key:"".concat(fe.getOptionValue(mt)).concat(Fe),index:Fe,removeProps:{onClick:function(){return fe.removeValue(mt)},onTouchEnd:function(){return fe.removeValue(mt)},onMouseDown:function(Jt){Jt.preventDefault(),Jt.stopPropagation()}},data:mt}),fe.formatOptionLabel(mt,"value"))});return jr}if(Un)return null;var wt=fr[0];return d.default.createElement(Tt,Object(s.a)({},qt,{data:wt,isDisabled:Hn}),this.formatOptionLabel(wt,"value"))}},{key:"renderClearIndicator",value:function(){var fe=this.components.ClearIndicator,ft=this.commonProps,nt=this.props,ct=nt.isDisabled,Xe=nt.isLoading,gt=this.state.isFocused;if(!this.isClearable()||!fe||ct||!this.hasValue()||Xe)return null;var Tt={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return d.default.createElement(fe,Object(s.a)({},ft,{innerProps:Tt,isFocused:gt}))}},{key:"renderLoadingIndicator",value:function(){var fe=this.components.LoadingIndicator,ft=this.commonProps,nt=this.props,ct=nt.isDisabled,Xe=nt.isLoading,gt=this.state.isFocused;if(!fe||!Xe)return null;var Tt={"aria-hidden":"true"};return d.default.createElement(fe,Object(s.a)({},ft,{innerProps:Tt,isDisabled:ct,isFocused:gt}))}},{key:"renderIndicatorSeparator",value:function(){var fe=this.components,ft=fe.DropdownIndicator,nt=fe.IndicatorSeparator;if(!ft||!nt)return null;var ct=this.commonProps,Xe=this.props.isDisabled,gt=this.state.isFocused;return d.default.createElement(nt,Object(s.a)({},ct,{isDisabled:Xe,isFocused:gt}))}},{key:"renderDropdownIndicator",value:function(){var fe=this.components.DropdownIndicator;if(!fe)return null;var ft=this.commonProps,nt=this.props.isDisabled,ct=this.state.isFocused,Xe={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return d.default.createElement(fe,Object(s.a)({},ft,{innerProps:Xe,isDisabled:nt,isFocused:ct}))}},{key:"renderMenu",value:function(){var fe=this,ft=this.components,nt=ft.Group,ct=ft.GroupHeading,Xe=ft.Menu,gt=ft.MenuList,Tt=ft.MenuPortal,Ut=ft.LoadingMessage,qt=ft.NoOptionsMessage,sn=ft.Option,_n=this.commonProps,Hn=this.state,wn=Hn.focusedOption,Un=Hn.menuOptions,bn=this.props,cr=bn.captureMenuScroll,fr=bn.inputValue,ur=bn.isLoading,er=bn.loadingMessage,jr=bn.minMenuHeight,wt=bn.maxMenuHeight,mt=bn.menuIsOpen,Fe=bn.menuPlacement,pt=bn.menuPosition,Dt=bn.menuPortalTarget,Jt=bn.menuShouldBlockScroll,Gt=bn.menuShouldScrollIntoView,mn=bn.noOptionsMessage,Cn=bn.onMenuScrollToTop,tr=bn.onMenuScrollToBottom;if(!mt)return null;var Zn=function(Sn){var nr=wn===Sn.data;return Sn.innerRef=nr?fe.getFocusedOptionRef:void 0,d.default.createElement(sn,Object(s.a)({},_n,Sn,{isFocused:nr}),fe.formatOptionLabel(Sn.data,"menu"))},At;if(this.hasOptions())At=Un.render.map(function(Yn){if(Yn.type==="group"){var Sn=Yn.type,nr=Object(e.a)(Yn,["type"]),zt="".concat(Yn.key,"-heading");return d.default.createElement(nt,Object(s.a)({},_n,nr,{Heading:ct,headingProps:{id:zt,data:Yn.data},label:fe.formatGroupLabel(Yn.data)}),Yn.options.map(function(Kt){return Zn(Kt)}))}else if(Yn.type==="option")return Zn(Yn)});else if(ur){var Xt=er({inputValue:fr});if(Xt===null)return null;At=d.default.createElement(Ut,_n,Xt)}else{var en=mn({inputValue:fr});if(en===null)return null;At=d.default.createElement(qt,_n,en)}var $n={minMenuHeight:jr,maxMenuHeight:wt,menuPlacement:Fe,menuPosition:pt,menuShouldScrollIntoView:Gt},Xn=d.default.createElement(E.h,Object(s.a)({},_n,$n),function(Yn){var Sn=Yn.ref,nr=Yn.placerProps,zt=nr.placement,Kt=nr.maxHeight;return d.default.createElement(Xe,Object(s.a)({},_n,$n,{innerRef:Sn,innerProps:{onMouseDown:fe.onMenuMouseDown,onMouseMove:fe.onMenuMouseMove},isLoading:ur,placement:zt}),d.default.createElement(Qe,{isEnabled:cr,onTopArrive:Cn,onBottomArrive:tr},d.default.createElement(ne,{isEnabled:Jt},d.default.createElement(gt,Object(s.a)({},_n,{innerRef:fe.getMenuListRef,isLoading:ur,maxHeight:Kt}),At))))});return Dt||pt==="fixed"?d.default.createElement(Tt,Object(s.a)({},_n,{appendTo:Dt,controlElement:this.controlRef,menuPlacement:Fe,menuPosition:pt}),Xn):Xn}},{key:"renderFormField",value:function(){var fe=this,ft=this.props,nt=ft.delimiter,ct=ft.isDisabled,Xe=ft.isMulti,gt=ft.name,Tt=this.state.selectValue;if(!(!gt||ct))if(Xe)if(nt){var Ut=Tt.map(function(_n){return fe.getOptionValue(_n)}).join(nt);return d.default.createElement("input",{name:gt,type:"hidden",value:Ut})}else{var qt=Tt.length>0?Tt.map(function(_n,Hn){return d.default.createElement("input",{key:"i-".concat(Hn),name:gt,type:"hidden",value:fe.getOptionValue(_n)})}):d.default.createElement("input",{name:gt,type:"hidden"});return d.default.createElement("div",null,qt)}else{var sn=Tt[0]?this.getOptionValue(Tt[0]):"";return d.default.createElement("input",{name:gt,type:"hidden",value:sn})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?d.default.createElement(F,{"aria-live":"polite"},d.default.createElement("span",{id:"aria-selection-event"},"\xA0",this.state.ariaLiveSelection),d.default.createElement("span",{id:"aria-context"},"\xA0",this.constructAriaLiveMessage())):null}},{key:"render",value:function(){var fe=this.components,ft=fe.Control,nt=fe.IndicatorsContainer,ct=fe.SelectContainer,Xe=fe.ValueContainer,gt=this.props,Tt=gt.className,Ut=gt.id,qt=gt.isDisabled,sn=gt.menuIsOpen,_n=this.state.isFocused,Hn=this.commonProps=this.getCommonProps();return d.default.createElement(ct,Object(s.a)({},Hn,{className:Tt,innerProps:{id:Ut,onKeyDown:this.onKeyDown},isDisabled:qt,isFocused:_n}),this.renderLiveRegion(),d.default.createElement(ft,Object(s.a)({},Hn,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:qt,isFocused:_n,menuIsOpen:sn}),d.default.createElement(Xe,Object(s.a)({},Hn,{isDisabled:qt}),this.renderPlaceholderOrValue(),this.renderInput()),d.default.createElement(nt,Object(s.a)({},Hn,{isDisabled:qt}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}]),_e}(d.Component);Ot.defaultProps=tn},,function($,n,t){"use strict";t.d(n,"a",function(){return S});var e=t(0),s=t(1),o=t(214),a=t(6),c=t.n(a),l=t(88),p={hoverCardBase:"frontend-pencraft-HoverCard-module__hoverCardBase--bYjNY"},h=Object.defineProperty,m=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(D,W,B)=>W in D?h(D,W,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[W]=B,i=(D,W)=>{for(var B in W||(W={}))O.call(W,B)&&r(D,B,W[B]);if(v)for(var B of v(W))u.call(W,B)&&r(D,B,W[B]);return D},d=(D,W)=>m(D,g(W)),b=(D,W)=>{var B={};for(var f in D)O.call(D,f)&&W.indexOf(f)<0&&(B[f]=D[f]);if(D!=null&&v)for(var f of v(D))W.indexOf(f)<0&&u.call(D,f)&&(B[f]=D[f]);return B};const w=500,E=250,S=D=>{var W=D,{className:B="",children:f,layerClassName:y,dontStopPropagation:M}=W,N=b(W,["className","children","layerClassName","dontStopPropagation"]);const A=P(i({className:y},N));return Object(e.h)("div",d(i(i({className:B},A.triggerProps),A.hoverProps),{onClick:L=>{M||L.stopPropagation()}}),f,A.layer)};function P(D){var W=D,{disabled:B,onFetch:f,onOpen:y,content:M,className:N,layerOptions:A,hideOnScroll:L=!1}=W,C=b(W,["disabled","onFetch","onOpen","content","className","layerOptions","hideOnScroll"]);const[R,U,Z]=Object(l.b)({delayEnter:w,delayLeave:E,hideOnScroll:L}),F=Object(s.j)(!1);Object(s.d)(()=>{R&&(!F.current&&f&&(F.current=!0,f()),y&&y())},[R,f,y]);const[z,G]=Object(s.k)(!1),{triggerProps:V,layerProps:k,renderLayer:K}=Object(l.c)(i({isOpen:B?!1:R,auto:!0,containerOffset:10,triggerOffset:8,snap:!1,possiblePlacements:["bottom-center","top-center","left-center","right-center"],preferX:"left",preferY:"bottom"},A));return{triggerProps:V,hoverProps:U,layer:(R||z)&&!B&&K(Object(e.h)(o.a,{appear:!0,show:R&&!C.loading,beforeEnter:()=>G(!0),afterLeave:()=>G(!1),enter:"tw-transition-all tw-ease-in-out tw-duration-100 transform-gpu",enterFrom:"tw-opacity-0",enterTo:"tw-opacity-100",leave:"tw-transition-all tw-ease-in-out tw-duration-100 transform-gpu",leaveFrom:"tw-opacity-100",leaveTo:"tw-opacity-0"},Object(e.h)("div",i(i({onClick:()=>{Z()},className:c()(N,p.hoverCardBase)},k),U),M)))}}},function($,n,t){var e=t(186),s=t(537);function o(a,c){return a&&a.length?s(a,e(c,2)):[]}$.exports=o},function($,n,t){"use strict";t.d(n,"a",function(){return r});var e=t(0),s=t(2),o=t(6),a=t.n(o),c=t(28),l=Object.defineProperty,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(i,d,b)=>d in i?l(i,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):i[d]=b,v=(i,d)=>{for(var b in d||(d={}))h.call(d,b)&&g(i,b,d[b]);if(p)for(var b of p(d))m.call(d,b)&&g(i,b,d[b]);return i},O=(i,d)=>{var b={};for(var w in i)h.call(i,w)&&d.indexOf(w)<0&&(b[w]=i[w]);if(i!=null&&p)for(var w of p(i))d.indexOf(w)<0&&m.call(i,w)&&(b[w]=i[w]);return b};const u=i=>{var d,b;return i?typeof i=="object"?[(d=i.desktop)!=null?d:null,(b=i.mobile)!=null?b:null]:[i,null]:[null,null]},r=Object(s.forwardRef)(function(d,b){var w=d,{display:E,as:S,className:P,direction:D,flex:W,inline:B,wrap:f,gap:y,padding:M,paddingX:N,paddingY:A,paddingTop:L,paddingBottom:C,paddingLeft:R,paddingRight:U,justifyContent:Z,alignItems:F,alignSelf:z,minWidth:G,style:V,border:k,borderTop:K,borderBottom:Y,borderLeft:ee,borderRight:ae,radius:he,shadow:me,bg:Ye,overflowY:se,overflowX:ie,sizing:Ee,ellipsis:Oe,pullX:ce}=w,ue=O(w,["display","as","className","direction","flex","inline","wrap","gap","padding","paddingX","paddingY","paddingTop","paddingBottom","paddingLeft","paddingRight","justifyContent","alignItems","alignSelf","minWidth","style","border","borderTop","borderBottom","borderLeft","borderRight","radius","shadow","bg","overflowY","overflowX","sizing","ellipsis","pullX"]);const pe=S!=null?S:"div",[$e,ne]=u(y),[X,q]=u(M),[Ne,Qe]=u(N),[Ze,tt]=u(A),[Ft,Lt]=u(L),[rn,ht]=u(C),[je,Le]=u(R),[rt,Pe]=u(U),[de,be]=u(D),[Ie,ke]=u(f),[Te,x]=u(Z),[H,le]=u(F);return Object(e.h)(pe,v({ref:b,className:a()({[c.a.flexGrow]:W==="grow",[c.a.flexFill]:W==="fill",[c.a.flexAuto]:W==="auto"},c.a.reset,E!=null&&c.a[`display-${E}`],B&&c.a["display-inline-flex"],de!=null&&c.a[`flex-direction-${de}`],Ie!=null&&c.a[`flex-wrap-${Ie}`],Te!=null&&c.a[`flex-justify-${Te}`],H!=null&&c.a[`flex-align-${H}`],z!=null&&c.a[`flex-align-self-${z}`],$e!=null&&c.a[`flex-gap-${$e}`],X!=null&&c.a[`padding-${X}`],Ne!=null&&c.a[`padding-x-${Ne}`],Ze!=null&&c.a[`padding-y-${Ze}`],Ft!=null&&c.a[`padding-top-${Ft}`],rn!=null&&c.a[`padding-bottom-${rn}`],je!=null&&c.a[`padding-left-${je}`],rt!=null&&c.a[`padding-right-${rt}`],be!=null&&c.a[`flex-direction-mobile-${be}`],ke!=null&&c.a[`flex-wrap-mobile-${ke}`],x!=null&&c.a[`flex-justify-mobile-${x}`],ne!=null&&c.a[`flex-gap-mobile-${ne}`],le!=null&&c.a[`flex-align-mobile-${le}`],q!=null&&c.a[`padding-mobile-${q}`],Qe!=null&&c.a[`padding-x-mobile-${Qe}`],tt!=null&&c.a[`padding-y-mobile-${tt}`],Lt!=null&&c.a[`padding-top-mobile-${Lt}`],ht!=null&&c.a[`padding-bottom-mobile-${ht}`],Le!=null&&c.a[`padding-left-mobile-${Le}`],Pe!=null&&c.a[`padding-right-mobile-${Pe}`],G!=null&&c.a[`min-width-${G}`],k&&c.a[`border-${k}`],K&&c.a[`border-top-${K}`],Y&&c.a[`border-bottom-${Y}`],ee&&c.a[`border-left-${ee}`],ae&&c.a[`border-right-${ae}`],he!=null&&c.a[`border-radius-${he}`],me&&c.a[`shadow-${me}`],Ye!=null&&c.a[`bg-${Ye}`],se&&c.a[`overflowY-${se}`],ie&&c.a[`overflowX-${ie}`],Ee&&c.a[`sizing-${Ee}`],Oe&&c.a.ellipsis,ce&&c.a[`pullX-${ce}`],P),style:V},ue))})},function($,n,t){"use strict";t.d(n,"a",function(){return ie});var e=t(0),s=t(691),o=t(87),a=t.n(o),c=t(3),l=t(9),p=t(7),h=t(48),m=t(8),g=t(558),v=t(246),O=t(1),u=t(6),r=t.n(u),i=t(16),d=t(38),b=t(21),w=t(14),E=t(4),S=t(10),P=t(26),D=t(179),W=t(49),B=t(158),f={button:"frontend-components-selection_popover-module__button--34-p8",popover:"frontend-components-selection_popover-module__popover--3IBZ3",popoverButtons:"frontend-components-selection_popover-module__popoverButtons--3escN",icon:"frontend-components-selection_popover-module__icon--3Qn9W",disabled:"frontend-components-selection_popover-module__disabled--2dJiN"},y=Object.defineProperty,M=Object.defineProperties,N=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,R=(Ee,Oe,ce)=>Oe in Ee?y(Ee,Oe,{enumerable:!0,configurable:!0,writable:!0,value:ce}):Ee[Oe]=ce,U=(Ee,Oe)=>{for(var ce in Oe||(Oe={}))L.call(Oe,ce)&&R(Ee,ce,Oe[ce]);if(A)for(var ce of A(Oe))C.call(Oe,ce)&&R(Ee,ce,Oe[ce]);return Ee},Z=(Ee,Oe)=>M(Ee,N(Oe)),F=(Ee,Oe,ce)=>new Promise((ue,pe)=>{var $e=q=>{try{X(ce.next(q))}catch(Ne){pe(Ne)}},ne=q=>{try{X(ce.throw(q))}catch(Ne){pe(Ne)}},X=q=>q.done?ue(q.value):Promise.resolve(q.value).then($e,ne);X((ce=ce.apply(Ee,Oe)).next())});function z({pub:Ee,post:Oe,selection:ce,onClose:ue}){const pe=Object(d.c)(),$e=Object(P.e)(),ne=Object(D.d)(),X=Object(W.b)(),q=typeof window!="undefined"&&("ontouchstart"in window||navigator.maxTouchPoints>0),Ne=!Oe.is_draft&&Boolean(pe),Qe=!Oe.is_draft,Ze=()=>F(this,null,function*(){const ht=yield Object(b.c)("/api/v1/post_selection",{method:"PUT",json:{postId:Oe.id,publication_id:Ee.id,startParagraph:ce.startParagraph,endParagraph:ce.endParagraph,startOffset:ce.startOffset,endOffset:ce.endOffset}});if(ht instanceof Error)throw ht;return ht.selection.id}),tt=()=>F(this,null,function*(){const ht=yield Ze();return Object(c.getPostUrl)(Ee,Oe,{urlParams:{r:pe?pe.id.toString(36):null,selection:ht,utm_campaign:"post_selection",utm_medium:"web"}})}),Ft=()=>F(this,null,function*(){if(!Ne)return;ue();let ht;try{ht=yield tt()}catch(Le){$e.popToast(rt=>Object(e.h)(P.c,Z(U({},rt),{text:"Failed to generate quote"})));return}const je=yield ne.open({restackUrl:ht});je instanceof Error?(console.error(je),$e.popToast(Le=>Object(e.h)(P.c,Z(U({},Le),{text:"Failed to post"})))):$e.popToast(Le=>Object(e.h)(P.c,Z(U({},Le),{text:"Note sent",cta:"View",href:Object(i.getFeedUrl)()})))}),Lt=()=>F(this,null,function*(){if(!Qe)return;ue();let ht;try{ht=yield tt()}catch(je){$e.popToast(Le=>Object(e.h)(P.c,Z(U({},Le),{text:"Failed to copy link to quote"})));return}Object(m.copyToClipboard)(ht),$e.popToast(je=>Object(e.h)(P.c,Z(U({},je),{text:"Link copied to clipboard"})))}),rn=ht=>F(this,null,function*(){if(pe)return;ue();let je;try{je=yield Ze()}catch(Pe){}const Le=Object(c.updateQuery)(document.location.href,{selection:je}),rt=Object(c.getSigninUrl)({redirect:Le});Object(m.redirect)(rt,{local_navigation:!1,event:ht})});return Object(O.d)(()=>(window.addEventListener("scroll",ue,{passive:!0,capture:!0,once:!0}),()=>{window.removeEventListener("scroll",ue,{capture:!0,once:!0})}),[ue]),Object(e.h)(E.b,{style:{top:q?ce.y+ce.height+8:ce.y-40-8,left:ce.rect.x+ce.rect.width/2,transform:"translateX(-50%)"},justifyContent:"center",className:f.popover,shadow:"md"},Object(e.h)(E.a,{className:r()(f.popoverButtons,X&&f.isMobile),radius:8,padding:4,gap:8},Object(e.h)(G,{onClick:pe?Ft:rn,disabled:!Ne&&Boolean(pe)},Object(e.h)(B.default,{className:r()(f.icon,!Ne&&f.disabled)}),Object(e.h)(S.b.B4,{color:Ne?"bg-light":"secondary",weight:"medium"},Ne?"Restack quote":pe?Oe.is_draft?"Cannot quote a draft":(Ee==null?void 0:Ee.invite_only)?"Cannot quote on invite-only publication":["only_paid","founding"].includes(Oe==null?void 0:Oe.audience)?"Cannot quote paid post":"Cannot quote this post":"Sign in to restack quote"))))}function G(Ee){return Object(e.h)(w.d,U({className:f.button,resetCss:!0},Ee))}var V=Object.defineProperty,k=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,ee=(Ee,Oe,ce)=>Oe in Ee?V(Ee,Oe,{enumerable:!0,configurable:!0,writable:!0,value:ce}):Ee[Oe]=ce,ae=(Ee,Oe)=>{var ce={};for(var ue in Ee)K.call(Ee,ue)&&Oe.indexOf(ue)<0&&(ce[ue]=Ee[ue]);if(Ee!=null&&k)for(var ue of k(Ee))Oe.indexOf(ue)<0&&Y.call(Ee,ue)&&(ce[ue]=Ee[ue]);return ce},he=(Ee,Oe,ce)=>(ee(Ee,typeof Oe!="symbol"?Oe+"":Oe,ce),ce),me=(Ee,Oe,ce)=>new Promise((ue,pe)=>{var $e=q=>{try{X(ce.next(q))}catch(Ne){pe(Ne)}},ne=q=>{try{X(ce.throw(q))}catch(Ne){pe(Ne)}},X=q=>q.done?ue(q.value):Promise.resolve(q.value).then($e,ne);X((ce=ce.apply(Ee,Oe)).next())});const Ye=`
div.body.markup > p:not(.button-wrapper),
.pullquote > p:not(.button-wrapper),
blockquote > p:not(.button-wrapper),
li > p:not(.button-wrapper),
caption > p:not(.button-wrapper),
.footnote-content > p:not(.button-wrapper)
`,se=".image-link.image2";class ie extends e.Component{constructor(Oe,ce){super(Oe,ce);he(this,"state",{selection:null,urlSelection:null,selectedImgIndex:null}),he(this,"onMouseUp",()=>{this.state.selection&&Object(p.i)(p.a.POST_TEXT_SELECTED,{post_id:this.props.post.id,post_audience:this.props.post.audience,post_type:this.props.post.type})}),he(this,"onSelectionChange",a()(()=>{const ue=this.getSelectionState();ue?this.setState({selection:ue}):this.state.selection&&this.setState({selection:null})},100)),he(this,"onDocumentClick",ue=>{const pe=ue.target.closest(".image-link.image2");if(pe&&this.originalImageState){const $e=pe.querySelector("img"),ne=this.originalImageState.findIndex(X=>X.src===$e.src);if(ne>=0){ue.preventDefault(),this.setState({selectedImgIndex:ne});return}}if(!this.props.skipTrackClick)this.onLinkClick(ue);else return null}),he(this,"clearActiveSelection",()=>{this.setState({selection:null})}),he(this,"closeImageViewerModal",()=>{this.setState({selectedImgIndex:null})}),this.body=Object(e.createRef)()}componentDidMount(){return me(this,null,function*(){const Oe=Array.from(this.body.current.querySelectorAll(Ye));this.originalParagraphState=Oe.map(X=>({text:X.textContent}));const ce=new URL(window.location).searchParams.get("img");let ue=Array.from(this.body.current.querySelectorAll(se));ue=ue.map(X=>{const q=X.querySelector("img"),Ne=JSON.parse(q.getAttribute("data-attrs")),Qe=Ne.width/Ne.height,Ze=Ne.resizeWidth?Ne.resizeWidth/Qe:Ne.height,tt=Ne.resizeWidth?Ne.resizeWidth/Ze:Qe;return{element:X,image:q,attrs:Ne,extraAttrs:{imageRatio:Qe,resizeHeight:Ze,resizeRatio:tt}}});let pe=0;if(ce){const X=ue.find(q=>q.attrs.src===ce);X&&(pe=X.image.getBoundingClientRect().top-65)}const $e=240,ne=4;if(ue=ue.filter(X=>Object(c.uncloudinary)(X.image.src)===Object(c.uncloudinary)(X.element.href)),ue=ue.filter(X=>X.attrs.height>$e&&X.extraAttrs.resizeHeight>$e),ue=ue.filter(X=>X.extraAttrs.imageRatio<ne&&X.extraAttrs.resizeRatio<ne),this.originalImageState=ue.map(X=>{var q;const Ne=X.image.src;let Qe=null;const Ze=X.element.parentElement;return Ze.tagName==="FIGURE"&&(Qe=(q=Ze.querySelector(":scope > figcaption"))==null?void 0:q.textContent),{src:Ne,attrs:X.attrs,caption:Qe}}),ce){window.scrollTo({top:pe});const X=this.originalImageState.findIndex(q=>q.attrs.src===ce);X>=0&&this.setState({selectedImgIndex:X})}typeof window!="undefined"&&document.addEventListener("selectionchange",this.onSelectionChange)})}componentWillUnmount(){typeof window!="undefined"&&document.removeEventListener("selectionchange",this.onSelectionChange)}shouldComponentUpdate(Oe,ce){return this.props.html!==Oe.html||this.state.selectedImgIndex!==ce.selectedImgIndex||this.state.selection!==ce.selection}onLinkClick(Oe){if(!Oe.target.nodeName||Oe.target.nodeName!=="A"&&Oe.target.parentNode.nodeName!=="A")return;const ce=Oe.target.nodeName==="A"?Oe.target:Oe.target.parentNode;if(Object(p.i)(p.a.POST_LINK_CLICKED,{post_id:this.props.post.id,publication_id:this.props.post.publication_id,url:ce.href}),window.location.host===ce.host){const ue=Object(l.transformDocumentLink)(ce.href);ue!==ce.href&&Object(m.redirect)(ue,{local_navigation:!1,event:Oe});return}Oe.preventDefault(),Object(l.handleDocumentLinkClick)(ce.href)}getSelectionState(){if(!!this.props.trackSelection&&!!window.getSelection)try{const Oe=window.getSelection();if(!Oe||Oe.isCollapsed||Oe.anchorNode===Oe.focusNode&&Oe.anchorOffset===Oe.focusOffset)return;const ce=this.findParentParagraph(Oe.anchorNode);if(!ce)return;const ue=this.findParentParagraph(Oe.focusNode);if(!ue)return;const pe=Array.from(this.body.current.querySelectorAll(Ye)),$e=pe.findIndex(Ze=>Ze.isSameNode(ce));if($e===-1)return;const ne=pe.findIndex(Ze=>Ze.isSameNode(ue));if(ne===-1)return;const X=this.getCharacterOffsetParagraph(ce,Oe.anchorNode,Oe.anchorOffset);if(X===null)return;const q=this.getCharacterOffsetParagraph(ue,Oe.focusNode,Oe.focusOffset);if(q===null)return;const Ne=$e>ne||$e===ne&&X>q,Qe=Oe.getRangeAt(0).getBoundingClientRect();return{startParagraph:Ne?ne:$e,endParagraph:Ne?$e:ne,startOffset:Ne?q:X,endOffset:Ne?X:q,y:Qe.y,height:Qe.height,rect:Qe,text:Oe.toString()}}catch(Oe){console.error("Failed to parse selection:",Oe)}}findParentParagraph(Oe){return Oe?Oe.nodeName==="P"?Oe:this.findParentParagraph(Oe.parentNode):null}isAncestorOf(Oe,ce){return Oe===null?!1:Oe.isSameNode(ce)?!0:this.isAncestorOf(Oe.parentNode,ce)}getCharacterOffsetParagraph(Oe,ce,ue){var pe;if(ue===0)return 0;let $e=ue;for(let ne=0;ne<Oe.childNodes.length;ne++){const X=Oe.childNodes[ne];if(this.isAncestorOf(ce,X))return $e;X.className!=="footnote-anchor"&&($e+=((pe=X.textContent)==null?void 0:pe.length)||0)}}showSelectionPopover(){var Oe,ce,ue;const{selection:pe}=this.state;return Object(h.getConfigFor)("enable_feed")&&((ue=(ce=(Oe=pe==null?void 0:pe.text)==null?void 0:Oe.split)==null?void 0:ce.call(Oe," "))==null?void 0:ue.length)>=3}shouldShowImageViewerModal(){const{selectedImgIndex:Oe}=this.state;return Oe!=null}render(Oe){var ce=Oe,{children:ue,html:pe,pub:$e,skipTrackClick:ne,trackSelection:X,paywall:q}=ce,Ne=ae(ce,["children","html","pub","skipTrackClick","trackSelection","paywall"]);const{selection:Qe,selectedImgIndex:Ze}=this.state;pe&&(ue=Object(g.a)(pe,$e,Ne),ue&&(pe=null));const tt=ue?Array.from(ue).some(Lt=>{var rn;return((rn=Lt.props)==null?void 0:rn.class)==="latex-rendered"}):!1,Ft=Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:`body markup${q?" paywall-files":""}`,dangerouslySetInnerHTML:pe?{__html:pe}:null,ref:this.body,onClick:this.onDocumentClick,onMouseUp:X?Lt=>this.onMouseUp(Lt):null,dir:"auto"},ue),this.showSelectionPopover()&&Object(e.h)(z,{top:Qe.y+window.scrollY-60,selection:Qe,user:this.props.user,pub:$e,post:this.props.post,onClose:this.clearActiveSelection}),Object(e.h)(v.ImageViewerModal,{showModal:this.shouldShowImageViewerModal(),modalContent:this.originalImageState,onClose:this.closeImageViewerModal,step:Ze}));return tt&&!Ne.isStatic?Object(e.h)(s.b,null,Ft):Ft}}},function($,n,t){"use strict";var e=t(0),s=t(6),o=t.n(s),a=t(343),c=t(94),l=t(8),p=t.n(l),h=Object.defineProperty,m=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(S,P,D)=>P in S?h(S,P,{enumerable:!0,configurable:!0,writable:!0,value:D}):S[P]=D,i=(S,P)=>{for(var D in P||(P={}))O.call(P,D)&&r(S,D,P[D]);if(v)for(var D of v(P))u.call(P,D)&&r(S,D,P[D]);return S},d=(S,P)=>m(S,g(P)),b=(S,P)=>{var D={};for(var W in S)O.call(S,W)&&P.indexOf(W)<0&&(D[W]=S[W]);if(S!=null&&v)for(var W of v(S))P.indexOf(W)<0&&u.call(S,W)&&(D[W]=S[W]);return D};const w=()=>null,E=S=>{var P=S,{variant:D="default",isSearchable:W=!1,className:B}=P,f=b(P,["variant","isSearchable","className"]),y,M;const{pub:N}=Object(c.b)();return Object(e.h)(a.a,d(i({},f),{isDisabled:f.isDisabled,className:o()("themed-select",B),components:i({IndicatorSeparator:w},f.components),theme:Object(l.getSelectTheme)(((y=N.theme)==null?void 0:y.background_pop_color)||N.theme_var_background_pop||"#1a1a1a",D==="light"?"white":(M=N.theme)==null?void 0:M.web_bg_color),isSearchable:W,styles:i(i({container:A=>d(i({},A),{flex:1}),dropdownIndicator:A=>d(i({},A),{color:"#1a1a1a"})},f.showOnlyIndicator&&{valueContainer:A=>d(i({},A),{width:0,padding:0})}),f.styles)}))};n.a=E},function($,n,t){"use strict";t.d(n,"a",function(){return c});var e=t(0),s=t(440),o=t(4),a=t(10);function c({title:l,body:p,children:h}){return Object(e.h)(o.b,{flex:"grow",alignItems:"center",justifyContent:"center",gap:16,padding:20},Object(e.h)(s.a,{stroke:"var(--color-secondary)"}),Object(e.h)(o.b,{gap:8,alignItems:"center"},Object(e.h)(a.b.B4,{weight:"semibold",color:"secondary",align:"center"},l),Object(e.h)(a.b.B4,{color:"secondary",align:"center"},p),h))}},function($,n,t){(function(e){var s=l(),o=p(),a=h(),c=typeof window!="undefined"?window:e;$.exports={assign:s,create:o,trim:a,bind:m,slice:g,each:v,map:O,pluck:u,isList:r,isFunction:i,isObject:d,Global:c};function l(){return Object.assign?Object.assign:function(w,E,S,P){for(var D=1;D<arguments.length;D++)v(Object(arguments[D]),function(W,B){w[B]=W});return w}}function p(){if(Object.create)return function(E,S,P,D){var W=g(arguments,1);return s.apply(this,[Object.create(E)].concat(W))};{let w=function(){};var b=w;return function(S,P,D,W){var B=g(arguments,1);return w.prototype=S,s.apply(this,[new w].concat(B))}}}function h(){return String.prototype.trim?function(w){return String.prototype.trim.call(w)}:function(w){return w.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function m(b,w){return function(){return w.apply(b,Array.prototype.slice.call(arguments,0))}}function g(b,w){return Array.prototype.slice.call(b,w||0)}function v(b,w){u(b,function(E,S){return w(E,S),!1})}function O(b,w){var E=r(b)?[]:{};return u(b,function(S,P){return E[P]=w(S,P),!1}),E}function u(b,w){if(r(b)){for(var E=0;E<b.length;E++)if(w(b[E],E))return b[E]}else for(var S in b)if(b.hasOwnProperty(S)&&w(b[S],S))return b[S]}function r(b){return b!=null&&typeof b!="function"&&typeof b.length=="number"}function i(b){return b&&{}.toString.call(b)==="[object Function]"}function d(b){return b&&{}.toString.call(b)==="[object Object]"}}).call(this,t(144))},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(634),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideArrowLeftRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.d(n,"a",function(){return b});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(88),l={popoverBase:"frontend-pencraft-Popover-module__popoverBase--1E-0f"},p=Object.defineProperty,h=Object.defineProperties,m=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,u=(S,P,D)=>P in S?p(S,P,{enumerable:!0,configurable:!0,writable:!0,value:D}):S[P]=D,r=(S,P)=>{for(var D in P||(P={}))v.call(P,D)&&u(S,D,P[D]);if(g)for(var D of g(P))O.call(P,D)&&u(S,D,P[D]);return S},i=(S,P)=>h(S,m(P)),d=(S,P)=>{var D={};for(var W in S)v.call(S,W)&&P.indexOf(W)<0&&(D[W]=S[W]);if(S!=null&&g)for(var W of g(S))P.indexOf(W)<0&&O.call(S,W)&&(D[W]=S[W]);return D};const b=S=>{var P=S,{disabled:D=!1,className:W="",children:B,layerClassName:f,hideOnScroll:y=!1,onClose:M}=P,N=d(P,["disabled","className","children","layerClassName","hideOnScroll","onClose"]);const[A,L]=Object(s.k)(!1),C=E(r({open:A,onClose:()=>{L(!1),M==null||M()},disabled:D,hideOnScroll:y,className:f},N));return w({hideOnScroll:y,setOpen:L,open:A}),Object(e.h)("div",i(r({className:W},C.triggerProps),{onClick:R=>{L(!A),R.stopPropagation()}}),B,C.layer)};function w({hideOnScroll:S,setOpen:P,open:D}){const W=Object(s.a)(B=>{requestAnimationFrame(()=>{var f;const M=(f=B.target.classList)==null?void 0:f.contains("popoverLayerForScrollDetection");D&&S&&!M&&P(!1)})},[S,P,D]);Object(s.d)(()=>{if(!!S)return window.addEventListener("scroll",W,!0),()=>{window.removeEventListener("scroll",W,!0)}},[W,S])}function E({open:S,onClose:P,disabled:D,possiblePlacements:W=["top-center","bottom-center","top-start","bottom-start","top-end","bottom-end"],preferPlacement:B,snap:f=!1,onOpen:y,content:M,className:N,layerOptions:A}){const L=Object(s.j)(!1);Object(s.d)(()=>{S&&!L.current&&y&&(L.current=!0,y())},[S,y]);const{triggerProps:C,layerProps:R,renderLayer:U}=Object(c.c)(r(r({isOpen:D?!1:S,overflowContainer:!1,auto:!0,snap:f,possiblePlacements:W,placement:B,containerOffset:10,triggerOffset:8,onOutsideClick:()=>P()},B&&{placement:B}),A));return{triggerProps:C,layer:S&&U(Object(e.h)("div",r({className:a()("popoverLayerForScrollDetection",l.popoverBase,N)},R),typeof M=="function"?M(P):M))}}},function($,n,t){"use strict";t.d(n,"c",function(){return A}),t.d(n,"b",function(){return L}),t.d(n,"a",function(){return C});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(644),l=t(805),p=t(903),h=t(3),m=t(9),g=t(8),v=t(4);const O=40,u=.5*O,r=.2,i=2;function d(R){return{width:(R-1)*O*(1-r)+O+2*i,height:O+2*i}}function b({faces:R}){const Z=R.slice(0).reverse().map(({id:G,photo_url:V},k)=>({id:G,photo_url:V||Object(h.getDefaultUserPhotoById)(G),x:(R.length-k-1)*(1-r)*O+i})),{width:F,height:z}=d(R.length);return Object(e.h)("svg",{version:"1.1",width:F,height:z,viewBox:`0 0 ${F} ${z}`,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},Object(e.h)("defs",null,Z.map(({id:G,photo_url:V,x:k})=>Object(e.h)("pattern",{id:`image-${G}`,x:k,y:i,patternUnits:"userSpaceOnUse",height:O,width:O},Object(e.h)("image",{height:O,width:O,preserveAspectRatio:"xMidYMid slice","data-clip-path":"url(#circularPhoto)",href:V})))),Z.map(({id:G,x:V})=>Object(e.h)("circle",{cx:V+u,cy:u+i,r:u,fill:`url(#image-${G})`,stroke:"#fff","stroke-width":i})))}var w=t(746),E=t(44),S=t(60),P=t(309),D=t(90),W=Object.defineProperty,B=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,M=(R,U,Z)=>U in R?W(R,U,{enumerable:!0,configurable:!0,writable:!0,value:Z}):R[U]=Z,N=(R,U)=>{for(var Z in U||(U={}))f.call(U,Z)&&M(R,Z,U[Z]);if(B)for(var Z of B(U))y.call(U,Z)&&M(R,Z,U[Z]);return R};function A({faces:R,maximum:U=5,pileLabel:Z,modalLabel:F,loading:z,hoverProfiles:G,enableModal:V,className:k,hideDefaultPhotos:K,noPublicationTheme:Y,openLinksInNewTab:ee,totalCount:ae,faceUtmSource:he,detailUtmSource:me,onDialogOpen:Ye,labelOnly:se,useWashBackground:ie}){const[Ee,Oe]=Object(s.k)(!1),ce=Object(s.j)(),ue=R.filter(({photo_url:$e})=>!K||!!$e).slice(0,U).reverse(),pe=Object(g.isMobileBrowser)();return Object(e.h)("div",{class:a()("facepile",k)},!z&&ue.length>0&&!se&&Object(e.h)("div",{class:"facepile-faces"},ue.map(({id:$e,name:ne,photo_url:X,className:q,tooltipTitle:Ne,tooltipContent:Qe,noLink:Ze},tt)=>{const Ft=Object(h.getReaderProfileUrl)({id:$e,name:ne},{utm_source:he});return Ze?Object(e.h)("div",{className:"profile-hover-card-target"},Object(e.h)("div",{className:"facepile-link"},Object(e.h)("img",{className:a()("facepile-face",q,{"no-theme":Y,"first-face":tt===ue.length-1,"use-wash-background":ie}),src:Object(h.cloudinary)(X||Object(h.getDefaultUserPhotoById)($e),64)}))):Object(e.h)(S.b,{disabled:!G||pe,key:$e,subject:{id:$e,name:ne,photo_url:X},utmSource:he},Object(e.h)(P.a,{disabled:!Ne&&!Qe,title:Ne,content:Qe,className:"inverse bottom"},Object(e.h)("a",{className:"facepile-link",href:Ft,target:ee?"_blank":null,rel:"noreferrer"},Object(e.h)("img",{className:a()("facepile-face",q,{"no-theme":Y,"first-face":tt===ue.length-1,"use-wash-background":ie}),src:Object(h.cloudinary)(X||Object(h.getDefaultUserPhotoById)($e),64)}))))})),z&&!se&&Object(e.h)("div",{class:"facepile-faces"},new Array(U).fill(null).map(()=>Object(e.h)("div",{class:"facepile-placeholder silhouette"}))),Z&&Object(e.h)("div",{onClick:()=>{!V||!R.length||(Oe(!0),Ye&&Ye())},class:a()("facepile-quantity",{"has-reactors":!!R.length,"no-theme":Y})},Z),Ee&&Object(e.h)(C,{modalRef:ce,modalLabel:F,faces:R,openLinksInNewTab:ee,totalCount:ae,onBeforeClose:()=>Oe(!1),utmSource:me}))}function L({pub:R,post:U}){var Z;const F=Object(h.cloudinary)(`${Object(h.getBaseUrl)(R)}/p/${U.slug}/authors.svg`,400*2,{format:"png",crop:"scale"}),{height:z,width:G}=d((Z=U==null?void 0:U.publishedBylines)==null?void 0:Z.length);return Object(e.h)("img",{src:F,width:G,height:z})}function C({modalRef:R,onBeforeClose:U,modalLabel:Z,faces:F,openLinksInNewTab:z,totalCount:G,utmSource:V}){const[k,K]=Object(s.k)(!1),Y=Object(s.a)(me=>K(me.target.scrollTop>3),[K]),ee=Object(s.a)(me=>{me.stopPropagation(),U(me),(R==null?void 0:R.current)&&R.current.close()},[R,U]),ae=(G||0)-F.length,he=Object(g.isMobileBrowser)();return Object(e.h)(e.Fragment,null,Object(e.h)("div",{class:"facepile-detail-modal all-faces-modal-backdrop",onClick:ee}),Object(e.h)(E.b,{className:"facepile-detail-modal all-faces-modal",openByDefault:!0,ref:R,onBeforeClose:U},Object(e.h)("div",{class:a()("all-faces-modal-header",{scrolled:k})},Object(e.h)("h2",null," ",Z)),Object(e.h)("ul",{class:a()("all-faces-list"),onScroll:Y},F.map(({id:me,name:Ye,photo_url:se,writes:ie,className:Ee,noLink:Oe})=>{const ce=Object(h.getReaderProfileUrl)({id:me,name:Ye},{utm_source:V});return Object(e.h)("li",{key:me},Object(e.h)(S.b,{disabled:Oe||he,className:"facepile-list-account-hover",subject:{id:me,name:Ye,photo_url:se},utmSource:V},Oe?Object(e.h)(e.Fragment,null,Object(e.h)("div",{class:"facepile-list-face-container"},Object(e.h)(D.a,{className:a()("facepile-list-face",Ee),photo_url:Object(h.cloudinary)(se||Object(h.getDefaultUserPhotoById)(me),80),lazy:!0,size:32})),Object(e.h)("div",{class:"facepile-list-name-container"},Object(e.h)("div",{class:a()("facepile-list-name",{"no-name":!(Ye||"").trim().length})},Ye))):Object(e.h)("a",N({href:ce},z?{target:"_blank"}:{}),Object(e.h)("div",{class:"facepile-list-face-container"},Object(e.h)(D.a,{className:a()("facepile-list-face",Ee),photo_url:Object(h.cloudinary)(se||Object(h.getDefaultUserPhotoById)(me),80),lazy:!0,size:32}),Z==="Restacks"?Object(e.h)(v.a,{radius:20,alignItems:"center",justifyContent:"center",className:"facepile-list-face-badge restack"},Object(e.h)(w.default,{fill:"var(--color-light-bg-primary)",stroke:"none",height:12})):Object(e.h)(v.a,{radius:20,alignItems:"center",justifyContent:"center",className:"facepile-list-face-badge"},Object(e.h)(c.a,{fill:"var(--color-light-bg-primary)",stroke:"none",height:12}))),Object(e.h)("div",{class:"facepile-list-name-container"},Object(e.h)("div",{class:a()("facepile-list-name",{"no-name":!(Ye||"").trim().length})},Ye),ie&&Object(e.h)("div",{class:"facepile-list-writes"},ie)),Object(e.h)(l.a,{stroke:"#666","stroke-width":"1.5"}))))}),ae>0&&Object(e.h)("li",{class:"facepile-list-others"},Object(e.h)("div",{class:"facepile-list-others-face"},Object(e.h)(p.a,{class:"icon",height:20})),Object(e.h)("div",{class:"facepile-list-others-label"},"+",Object(m.pluralize)(ae,"other reader"))))))}},function($,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"a",function(){return c});var e=t(0),s=t(1);const o=Object(e.createContext)({hasThemedBackground:!1});o.displayName="ThemeContext";function a(){var l;return Boolean((l=Object(s.b)(o))==null?void 0:l.hasThemedBackground)}function c({value:l,children:p}){const h=Object(s.h)(()=>l,Object.values(l));return Object(e.h)(o.Provider,{value:h},p)}},function($,n,t){"use strict";t.d(n,"a",function(){return g});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(4),l=t(10),p=t(141),h=t(72),m={imageGroup:"frontend-components-ImageGroup-module__imageGroup--1z1TX","size-1":"frontend-components-ImageGroup-module__size-1--1iFk8",image:"frontend-components-ImageGroup-module__image--2U19l","size-2":"frontend-components-ImageGroup-module__size-2--2hJZ3","size-4":"frontend-components-ImageGroup-module__size-4--3DTz4","size-3":"frontend-components-ImageGroup-module__size-3--10B0S","size-5":"frontend-components-ImageGroup-module__size-5--3K5Ys","size-6":"frontend-components-ImageGroup-module__size-6--2vHhc",restack:"frontend-components-ImageGroup-module__restack--rlF8v",topLeft:"frontend-components-ImageGroup-module__topLeft--2q1qa",topRight:"frontend-components-ImageGroup-module__topRight--ZzbRQ",bottomLeft:"frontend-components-ImageGroup-module__bottomLeft--SXYU4",bottomLeftChat:"frontend-components-ImageGroup-module__bottomLeftChat--2Lebq",bottomRight:"frontend-components-ImageGroup-module__bottomRight--ODHvl",imageCount:"frontend-components-ImageGroup-module__imageCount--2Vd89"};function g({className:O,assets:u,readOnly:r,isRestack:i}){let d=u;u.length>6&&(d=d.slice(0,5));const[b,w]=Object(s.k)(null),E=(S,P)=>{S.preventDefault(),w({index:P})};return Object(e.h)(c.a,{className:a()(m.imageGroup,m[`size-${u.length}`],i&&m.restack,O),alignSelf:"stretch",gap:4},d.map((S,P)=>Object(e.h)(v,{key:S,asset:S,index:P,total:u.length,onClick:r?void 0:D=>{D.preventDefault(),E(D,P)}})),u.length>6&&Object(e.h)(v,{asset:u[6],index:5,total:6,count:u.length-d.length}),!r&&Object(e.h)(p.a,{module:"./ImageViewerModal",resolve:S=>S.ImageViewerModal,onRequest:()=>Promise.resolve().then(t.bind(null,246)),showModal:Boolean(b),modalContent:u.map(S=>({attrs:{src:S}})),onClose:()=>{w(null)},step:b?b.index:void 0,includeDownloadButton:!1}))}function v({asset:O,onClick:u,index:r,total:i,count:d}){return Object(e.h)(c.a,{className:a()(m.image,r===0&&m.topLeft,(r===0&&i===1||r===1&&i===2||r===1&&i===4||r===2&&i!==4)&&m.topRight,(r===0&&i<=3||r===2&&i===4||r===3&&i>4)&&m.bottomLeft,(r+1===i||r==2&&i===5)&&m.bottomRight),flex:"grow",radius:4,onClick:u},Object(e.h)(h.a,{src:O,maxWidth:500*2}),d!=null&&Object(e.h)(c.a,{className:m.imageCount,justifyContent:"center",alignItems:"center"},Object(e.h)(l.b.H2,{color:"bg-light"},"+",d)))}},function($,n,t){"use strict";t.d(n,"b",function(){return Wa}),t.d(n,"c",function(){return yn}),t.d(n,"g",function(){return Ln}),t.d(n,"d",function(){return Jn}),t.d(n,"e",function(){return rr}),t.d(n,"h",function(){return Cr}),t.d(n,"f",function(){return mo}),t.d(n,"a",function(){return Hr});var e=t(0),s=t(2),o=t(1),a=t(6),c=t.n(a),l=t(816),p=t(11),h=t.n(p),m=t(33),g=t(15),v=t.n(g),O=t(80),u=t.n(O),r=t(59),i=t(58),d=t(3),b=t(16),w=t(89),E=t(9),S=t(210),P=t(68),D=t(287),W=t(75),B=t(45),f=t(7),y=t(48),M=t(632),N=t(288),A=t(8),L=t(14),C=t(50),R=t(4),U=t(10),Z=t(124),F=t(702),z=t.n(F),G=t(172),V=t(266),k=t(573),Y=({comments:j,expectedCommentCount:T,inputRef:_,post:J,pub:oe,sort:ve,token:xe,user:Ke,onAddComment:qe,onUpdateComment:vt,onUpdateSort:It})=>Object(E.canSeeComments)(Ke,J)?Object(e.h)("div",null,Object(e.h)(V.a,{ref:_,formClassName:"tw-m-0",user:Ke,pub:oe,post:J,token:xe,onSuccess:qe}),T>0&&Object(e.h)(k.a,{sort:ve,loading:!j,onSortSelected:It,pub:oe}),j?Object(e.h)(V.b,{comments:j,post:J,pub:oe,reaction_token:xe,user:Ke,onChange:vt}):Object(e.h)("div",{className:"tw-mt-4"},z()(Math.min(T,5),()=>Object(e.h)(V.c,null)))):Object(e.h)(G.b,{user:Ke,publication:oe,post:J,title:"Comments on this episode are for paid subscribers",reauthenticationTitle:"To see the comments, please re-authenticate."});const ee=(j,T,_,J,oe)=>!(!oe&&!(j==null?void 0:j.has_publication)||J.invite_only||Object(i.isPaidAudience)(_.audience)||!T.enable_restacking);var ae=t(357),he=t(560),me=t(76),Ye=t(60);function se({post:j,pub:T,user:_,showDate:J,showDatetime:oe,isStatic:ve,className:xe,postReactionToken:Ke,onChange:qe,allowEdit:vt,hidePinning:It,showEmailSent:un,allowSendEmail:On,allowMobileFooter:dn,reactors:In,onCommentsClick:Qn,useWashBackground:dr,showRestackModal:Gr,setFooterShown:Kr}){const eo=Object(w.isMobile)({checkFirst4:!0}),qr=typeof window=="undefined",so=Object(B.c)(),oo=Object(E.getBylineUsers)(j),ti=oe?v()(j.post_date).standardDatetime():ve?v()(j.post_date).standardDate():v()(j.post_date).standardDateOrTime(),{getSettingFor:_r}=Object(W.c)(),To=T.bylines_enabled&&Object(E.getPrintedByline)(T,j)&&j.type!=="podcast",Co=To&&T.byline_images_enabled&&oo.some(({photo_url:Qo})=>!!Qo),Ei=j.type!=="page",ni=eo&&Co&&oo.length>2,pi=(T==null?void 0:T.community_enabled)&&j.slug&&!j.is_draft&&Object(E.showCommentsOnPost)({publication:T,post:j}),Bi=To&&oo.length===1&&oo[0].is_guest&&oo[0].primaryPublicationSubscribeUrl&&oo[0].primaryPublicationId!==T.id&&!T.parent_publication&&!j.is_draft&&!Object(y.default)("dont_show_guest_byline"),_i=Object(E.oxfordComma)(oo.map(Qo=>ve?Object(e.h)("a",{className:"byline-profile-link",href:Object(d.getProfileUrl)(Qo,T,{base:ve}),onClick:ci=>ci.stopPropagation()},Qo.name):Object(e.h)(R.c,{inline:!0,gap:4,alignItems:"center"},!Qo.is_guest||Qo.inviteAccepted?Object(e.h)(Ye.b,{subject:Qo,utmSource:"byline"},Object(e.h)("a",{className:"byline-profile-link",href:Object(d.getProfileUrl)(Qo,T,{base:ve}),onClick:ci=>ci.stopPropagation()},Qo.name)):Qo.name,!ve&&Object(e.h)(Z.a,{tier:Qo.bestseller_tier,size:"sm",userId:Qo.id}))));return Object(e.h)("div",{class:c()("post-subheader",xe)},Object(e.h)("div",{class:c()("left",{vertical:ni})},Co&&(ve?Object(e.h)(S.b,{pub:T,post:j}):Object(e.h)(S.c,{className:"bylines-facepile",maximum:5,hoverProfiles:!0,faces:oo.map(({id:Qo,name:ci,photo_url:Xi,is_guest:Ri,inviteAccepted:yo})=>({id:Qo,name:ci,photo_url:Xi,noLink:Ri&&!yo})),faceUtmSource:"author-byline-face",useWashBackground:dr})),Object(e.h)("div",{class:"label-stack"},To&&Object(e.h)("div",{class:"bylines"},Object(e.h)("span",{class:"byline-names"},_i)),Bi&&Object(e.h)("div",{className:"guest-author-publication"},"Writes\xA0",Object(e.h)("a",{class:"guest-author-publication-name",href:oo[0].primaryPublicationUrl,title:oo[0].primaryPublicationName},oo[0].primaryPublicationName),"\xA0\xB7\xA0",Object(e.h)("a",{className:"guest-author-publication-subscribe",href:oo[0].primaryPublicationSubscribeUrl},"Subscribe")),Object(e.h)("div",{class:"publish-context"},j.type==="adhoc_email"?Object(e.h)(he.default,{className:"audience-icon adhoc-email-icon",height:16,isStatic:ve}):Ei&&Object(i.isPaidAudience)(j.audience)&&Object(e.h)(ae.a,{audience:j.audience,className:"audience-icon audience-lock-icon",size:16,isStatic:ve,thin:!0}),(J||oe)&&j.post_date&&!j.is_draft&&Object(e.h)("time",{dateTime:v()(j.post_date).toISOString()},ti),j.is_draft&&(J||oe)&&"Draft"))),Object(e.h)("div",{class:"right"},eo&&!qr&&dn&&Object(e.h)(me.b,{post:j,pub:T,user:_,isStatic:ve,postReactionToken:Ke,onChange:qe,allowEdit:vt,hidePinning:It,showEmailSent:un,allowSendEmail:On,hideComments:!pi,onCommentsClick:Qn,showRestackModal:Gr,setFooterShown:Kr}),!eo&&Object(e.h)(me.c,{post:j,pub:T,user:_,isStatic:ve,style:"button",postReactionToken:Ke,onChange:qe,allowEdit:vt,hidePinning:It,showEmailSent:un,allowSendEmail:On,reactors:In,labelStyle:"counts-or-none",hideComments:!pi,onCommentsClick:Qn,position:"post-header",showRestackButton:!j.is_draft&&ee(_,{enable_restacking:!!_r("enable_restacking")},j,T,ve),showRestackModal:Gr})))}var ie=t(136),Ee=t(164),ce=({post:j})=>Object(e.h)("a",{className:"tw-no-underline hover:tw-underline",href:Object(d.pathWithQuery)("/subscribe",{simple:!0,next:document.location.href,utm_source:"paywall",utm_medium:"web",utm_content:j.id}),native:!0},Object(e.h)("div",{className:"podcast-embed tw-flex tw-items-center tw-justify-center tw-gap-3 tw-rounded tw-bg-pub-background tw-p-6 tw-font-sans tw-font-sans tw-text-base tw-shadow"},Object(e.h)(Ee.default,{className:"tw-fill-pub-accent tw-stroke-0"}),Object(e.h)("span",{className:"tw-text-sm tw-font-semibold tw-text-pub-accent"},"Upgrade to listen"))),ue=t(82),pe=t(153),$e=t(807),ne=t(17),X=t(54),q=t(308),Ne=t(227),Qe=t(412),Ze=t(686),tt=t(438),Ft=t(47),Lt=t(575),ht=({className:j,pub:T,utmSource:_})=>{const J=typeof window!="undefined"?window.location.href:"",oe=Object(b.getSubscribeUrl)(T,{params:{utm_source:_,simple:!0,next:J}});return Object(e.h)(ne.b,{className:c()("primary tw-text-sm tw-font-semibold",j),href:oe},Object(E.getSubscribeText)(T))},je=Object.defineProperty,Le=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,de=(j,T,_)=>T in j?je(j,T,{enumerable:!0,configurable:!0,writable:!0,value:_}):j[T]=_,be=(j,T)=>{for(var _ in T||(T={}))rt.call(T,_)&&de(j,_,T[_]);if(Le)for(var _ of Le(T))Pe.call(T,_)&&de(j,_,T[_]);return j},Ie=(j,T)=>{var _={};for(var J in j)rt.call(j,J)&&T.indexOf(J)<0&&(_[J]=j[J]);if(j!=null&&Le)for(var J of Le(j))T.indexOf(J)<0&&Pe.call(j,J)&&(_[J]=j[J]);return _},ke=(j,T,_)=>new Promise((J,oe)=>{var ve=qe=>{try{Ke(_.next(qe))}catch(vt){oe(vt)}},xe=qe=>{try{Ke(_.throw(qe))}catch(vt){oe(vt)}},Ke=qe=>qe.done?J(qe.value):Promise.resolve(qe.value).then(ve,xe);Ke((_=_.apply(j,T)).next())});const Te=["Podcast Addict"],x=["Apple Podcasts"],H=["Apple Podcasts"],le=[],Ce="https://support.substack.com/hc/en-us/articles/4519588148244-How-do-I-listen-to-episodes-on-my-podcast-app-",Ue=({feedUrl:j,post:T,pub:_,sectionId:J,hasAccessToPrivatePodcastFeed:oe,fileSrc:ve})=>{const[xe,Ke]=Object(o.k)(!1),[qe,vt]=Object(q.a)();return Object(e.h)("div",{className:"tw-relative"},Object(e.h)("div",{className:c()("audio-button tw-flex tw-cursor-pointer tw-items-center tw-justify-center tw-gap-3 tw-rounded tw-border tw-border-solid tw-px-5 tw-py-3 tw-text-sm tw-font-semibold tw-text-pub-secondary-text tw-transition-colors sm:tw-py-2",xe?"tw-border-pub-detail-dark":"tw-border-pub-detail-light hover:tw-border-pub-detail"),role:"button",onClick:vt},Object(e.h)("span",{className:"sm:tw-hidden"},"Open in player"),Object(e.h)("span",{className:"tw-hidden sm:tw-block"},"Listen on"),Object(e.h)(Ne.default,{className:"tw-hidden tw-fill-pub-secondary-text tw-stroke-pub-secondary-text sm:tw-block",height:4})),Object(e.h)(Ve,{feedUrl:j,menuRef:qe,post:T,pub:_,sectionId:J,onToggle:Ke,hasAccessToPrivatePodcastFeed:oe,fileSrc:ve}))},Ve=({feedUrl:j,menuRef:T,post:_,pub:J,sectionId:oe,onToggle:ve,hasAccessToPrivatePodcastFeed:xe,fileSrc:Ke})=>{const qe=Object(A.isMobileBrowser)(),vt=()=>{Object(f.i)(f.a.PODCAST_FEED_URL_COPIED),Object(A.copyToClipboard)(j),alert("Copied")},It=()=>{Object(f.i)(f.a.PODCAST_APP_LINK_CLICK,{appName:"Substack App",feedUrl:j}),document.location.href=Object(d.getPostAppLinkUrl)(J==null?void 0:J.subdomain,_==null?void 0:_.slug,{redirect:"app-marketing",source:"podcast-dropdown"})};return Object(e.h)(X.b,{ref:T,noTail:!0,noList:!0,noPlace:!0,useDrawerOnMobile:!0,className:"tw-right-0 tw-border-pub-wash tw-bg-pub-background tw-p-0 tw-font-sans tw-transition sm:tw-max-w-none",wrapperClassName:"tw-max-h-[90vh]",onToggle:({active:un})=>{Object(f.i)(f.a.PODCAST_LISTEN_ON_CLICKED),ve(un)}},qe?Object(e.h)(bt,{feedUrl:j,pub:J,onCopyFeed:vt,onClickSubstackApp:It,hasAccessToPrivatePodcastFeed:xe,fileSrc:Ke}):Object(e.h)(yt,{feedUrl:j,pub:J,sectionId:oe,onCopyFeed:vt,onClickSubstackApp:It,hasAccessToPrivatePodcastFeed:xe,fileSrc:Ke}))},bt=({feedUrl:j,pub:T,onCopyFeed:_,onClickSubstackApp:J,hasAccessToPrivatePodcastFeed:oe,fileSrc:ve})=>{var xe;return Object(e.h)("div",{className:"tw-px-2 tw-pt-5 tw-pb-6"},Object(e.h)("div",{className:"tw-mb-2 tw-px-2 tw-text-xl tw-font-bold tw-text-pub-primary-text"},"Listen in app"),Object(A.isIOs)()&&Object(e.h)(Qt,{onClick:J},Object(e.h)("div",{className:"tw-flex tw-w-6 tw-justify-center"},Object(e.h)(tt.default,null)),Object(e.h)("span",null,"Substack App")),j&&Lt.a.filter(Ke=>Object(A.isIOs)()?x.includes(Ke.name):Te.includes(Ke.name)).map(({name:Ke,icon:qe,onClick:vt})=>Object(e.h)(Qt,{key:Ke,onClick:()=>{Object(f.i)(f.a.PODCAST_APP_LINK_CLICK,{appName:Ke,feedUrl:j}),vt(j)}},Object(e.h)("img",{src:qe,alt:`${Ke} logo`,className:"tw-w-6"}),Object(e.h)("span",{className:"tw-whitespace-nowrap"},Ke))),Object(e.h)(Qt,{onClick:()=>{Object(A.downloadSrc)(Object(d.updateQuery)(ve,{download:!0}))}},Object(e.h)("div",{className:"tw-flex tw-w-6 tw-justify-center"},Object(e.h)($e.a,null)),Object(e.h)("span",null,"Download MP3")),j?Object(e.h)("div",{className:"tw-px-2 tw-pt-2"},Object(e.h)("div",{className:"tw-mb-4 tw-text-base tw-font-bold"},"Private RSS feed"),Object(e.h)("div",{className:"tw-mb-6 tw-text-sm tw-text-pub-secondary-text"},"Listen to paid episodes on your favorite podcast app with your private RSS feed. ",Object(e.h)(Kn,null)),Object(e.h)("div",null,Object(e.h)(tn,{className:"tw-w-full",onClick:_},Object(e.h)(Qe.default,{className:"tw-stroke-pub-secondary-text"}),Object(e.h)("span",null,"Copy link")))):oe?Object(e.h)("div",{className:"tw-mt-3 tw-border-0 tw-border-t tw-border-solid tw-border-pub-detail-light tw-px-2 tw-pt-6 tw-text-sm"},Object(e.h)("div",{className:"tw-mb-2 tw-font-bold"},"Private RSS feed"),Object(e.h)("div",{className:"tw-mb-6 tw-text-pub-secondary-text"},"Listen to paid episodes on your favorite podcast app with your private RSS feed."),Object(e.h)("div",null,Object(e.h)(Ot,{pub:T}))):Object(e.h)("div",{className:"tw-mt-3 tw-border-0 tw-border-t tw-border-solid tw-border-pub-detail-light tw-px-2 tw-pt-6 tw-text-sm"},Object(e.h)("div",{className:"tw-mb-2 tw-font-bold"},"Subscribe to ",(xe=T.podcast_title)!=null?xe:"this podcast"),Object(e.h)("div",{className:"tw-mb-6 tw-text-pub-secondary-text"},"Subscribe now to get a private link for listening in your favorite podcast player or listen in the Substack app. ",Object(e.h)(Kn,null)),Object(e.h)(ht,{className:"tw-w-full",pub:T,utmSource:"podcast_post_listen_on"})))},yt=({feedUrl:j,pub:T,sectionId:_,onCopyFeed:J,onClickSubstackApp:oe,hasAccessToPrivatePodcastFeed:ve,fileSrc:xe})=>{var Ke;const[qe,vt]=Object(o.k)(!1),[It,un]=Object(o.k)(null),On=()=>ke(void 0,null,function*(){try{Object(f.i)(f.a.PODCAST_EMAIL_LINK_CLICKED),yield h.a.post("/api/v1/subscription/send_podcast_email").send({section_id:_}),alert("Email sent"),vt(!0)}catch(dn){console.error("Failed to send podcast setup email:",dn),un(dn)}});return Object(e.h)("div",{className:"tw-min-w-[280px] tw-px-2 tw-py-2"},Object(e.h)("div",{className:"tw-border-0 tw-border-b tw-border-solid tw-border-pub-detail-light tw-pb-2"},Object(e.h)(Qt,{onClick:oe},Object(e.h)("div",{className:"tw-flex tw-w-6 tw-justify-center"},Object(e.h)(tt.default,null)),Object(e.h)("span",null,"Substack App")),j&&Lt.a.filter(dn=>Object(A.isMac)()?H.includes(dn.name):le.includes(dn.name)).map(({name:dn,icon:In,onClick:Qn})=>Object(e.h)(Qt,{key:dn,onClick:()=>{Object(f.i)(f.a.PODCAST_APP_LINK_CLICK,{appName:dn,feedUrl:j}),Qn(j)}},Object(e.h)("img",{src:In,alt:`${dn} logo`,className:"tw-w-6"}),Object(e.h)("span",{className:"tw-whitespace-nowrap"},dn))),Object(e.h)(Qt,{onClick:()=>{Object(A.downloadSrc)(Object(d.updateQuery)(xe,{download:!0}))}},Object(e.h)("div",{className:"tw-flex tw-w-6 tw-justify-center"},Object(e.h)($e.a,null)),Object(e.h)("span",null,"Download MP3"))),Object(e.h)("div",{className:"tw-p-2 tw-pt-4 tw-text-sm"},j?Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"tw-mb-2 tw-font-bold"},"Your private RSS feed"),Object(e.h)("div",{className:"tw-mb-6 tw-text-pub-secondary-text"},"Copy your RSS link and paste it in your podcast app. ",Object(e.h)(Kn,null)),Object(e.h)("div",{className:"tw-flex tw-gap-2"},Object(e.h)(tn,{onClick:J},Object(e.h)(Qe.default,{className:"tw-stroke-pub-secondary-text",strokeWidth:1.5}),Object(e.h)("span",null,"Copy link")),Object(e.h)(tn,{onClick:On,disabled:qe},Object(e.h)(Ze.default,{className:"tw-stroke-pub-secondary-text"}),Object(e.h)("span",null,"Email link"))),It&&Object(e.h)("div",{className:"tw-mt-2 tw-text-red-600"},Object(A.getNetworkErrorMessage)(It))):ve?Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"tw-mb-2 tw-font-bold"},"Your private RSS feed"),Object(e.h)("div",{className:"tw-mb-6 tw-text-pub-secondary-text"},"Listen to paid episodes on your favorite podcast app with your private RSS feed."),Object(e.h)("div",null,Object(e.h)(Ot,{pub:T}))):Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"tw-mb-2 tw-font-bold"},"Get a private RSS link for listening"),Object(e.h)("div",{className:"tw-mb-6 tw-text-pub-secondary-text"},"Subscribe to ",(Ke=T.podcast_title)!=null?Ke:"this podcast"," to get a private link for listening in your favorite podcast player. ",Object(e.h)(Kn,null)),Object(e.h)(ht,{pub:T,utmSource:"podcast_post_listen_on"}))))},Qt=j=>{var T=j,{children:_,href:J}=T,oe=Ie(T,["children","href"]);const ve="tw-box-border tw-flex tw-items-center tw-gap-3 tw-whitespace-nowrap tw-rounded tw-py-3 tw-px-2 tw-text-base tw-font-bold tw-text-pub-primary-text tw-transition-colors hover:tw-bg-pub-wash sm:tw-gap-2 sm:tw-py-2 sm:tw-text-sm sm:tw-font-medium";return J?Object(e.h)("a",be({className:c()("tw-no-underline",ve),href:J},oe),_):Object(e.h)("div",be({className:c()("tw-cursor-pointer",ve),role:"button"},oe),_)},tn=({children:j,className:T="",disabled:_=!1,onClick:J})=>Object(e.h)(ne.b,{className:c()("outline-grayscale tw-flex tw-items-center tw-justify-center tw-gap-3 tw-border-pub-detail-light tw-text-sm tw-font-medium tw-text-pub-secondary-text hover:tw-border-pub-detail",T),onClick:J,disabled:_},j),Kn=()=>Object(e.h)("a",{href:Ce,target:"_blank",rel:"noopener noreferrer",className:"tw-text-pub-accent"},"Learn about RSS."),Ot=({pub:j})=>Object(e.h)(tn,{className:"tw-w-full",onClick:()=>{}},Object(e.h)(Ft.a,{className:"tw-stroke-pub-secondary-text tw-no-underline",href:Object(d.getPodcatcherSetupUrl)(j),onClick:()=>{}},"Set up feed"));var lt=Ue,Be=(j,T,_)=>new Promise((J,oe)=>{var ve=qe=>{try{Ke(_.next(qe))}catch(vt){oe(vt)}},xe=qe=>{try{Ke(_.throw(qe))}catch(vt){oe(vt)}},Ke=qe=>qe.done?J(qe.value):Promise.resolve(qe.value).then(ve,xe);Ke((_=_.apply(j,T)).next())}),Ae=({isFreeSubscribed:j,isSubscribed:T,pub:_,post:J,magicToken:oe,onGetDuration:ve,isPreview:xe})=>{const[Ke,qe]=Object(o.k)(null);return Object(o.d)(()=>{if(!T&&!j)return;(()=>Be(void 0,null,function*(){const It=yield h.a.get("/api/v1/subscription/podcast_rss_url").query({token:oe,section_id:J.section_id});It.body.podcast_rss_url&&qe(It.body.podcast_rss_url)}))()},[j,T,oe]),Object(e.h)(pe.a,{feature:"Podcast",pub:_,src:J.podcast_url,duration:J.podcast_duration,autoPlay:!1,metricsPost:J,addToPodcastLink:null,onGetDuration:ve,render:({currentTime:vt,isPlaying:It,progress:un,progressBarRef:On,progressBarOnMouseDown:dn,remainingTime:In,playbackRate:Qn,setPlaybackRate:dr,skipBack:Gr,skipForward:Kr,togglePlayback:eo})=>Object(e.h)("div",{className:"podcast-embed tw-select-none tw-items-center tw-space-y-4 tw-rounded tw-bg-pub-background tw-p-6 tw-font-sans tw-shadow sm:tw-flex sm:tw-gap-4 sm:tw-space-y-0"},Object(e.h)("div",{className:"tw-flex tw-items-center tw-justify-between tw-gap-4"},Object(e.h)("div",{className:"tw-w-16 sm:tw-hidden"},"\xA0"),Object(e.h)(ue.PlayerControls,{isPlaying:It,onSkipBack:Gr,onSkipForward:Kr,onTogglePlayback:eo}),Object(e.h)("div",{className:"tw-flex tw-w-16 tw-justify-end sm:tw-w-auto"},Object(e.h)(ue.PlaybackRateToggle,{onSetPlaybackRate:dr,playbackRate:Qn,className:"audio-button tw-w-12 tw-cursor-pointer tw-rounded-full tw-border-0 tw-border-solid tw-border-pub-detail-light tw-py-1 tw-text-center tw-font-meta tw-text-sm tw-font-semibold tw-leading-none tw-text-pub-primary-text hover:tw-border-pub-detail sm:tw-border sm:tw-text-pub-secondary-text"}))),Object(e.h)(ue.ProgressBar,{currentTime:vt,remainingTime:In,containerRef:On,progress:un,onMouseDown:dn}),xe?Object(e.h)("div",{className:"tw-m-auto tw-w-min tw-whitespace-nowrap tw-rounded-full tw-bg-pub-detail-light tw-py-1 tw-px-3 tw-font-meta tw-text-xs tw-font-medium tw-leading-5 tw-text-pub-secondary-text"},"FREE PREVIEW"):Object(e.h)(lt,{feedUrl:Ke,post:J,pub:_,sectionId:J.section_id,hasAccessToPrivatePodcastFeed:T||j,fileSrc:J.podcast_url}))})},ft=({expiry:j,podcastName:T,pub:_,postId:J})=>{const oe=v()(j).calendar(null,{sameDay:"[today]",nextDay:"[tomorrow]",nextWeek:"MMMM D",sameElse:"MMMM D"});return Object(e.h)("div",{className:"tw-co tw-mt-12 tw-flex tw-flex-col tw-items-center tw-rounded-md tw-text-center"},Object(e.h)("div",{className:"tw-leading-5 md:tw-w-3/4"},Object(e.h)("p",{className:"tw-mb-2 tw-font-sans tw-text-lg tw-font-bold"},"Set up your subscription"),Object(e.h)("p",{className:"podcast-description tw-mb-4 tw-font-sans tw-text-base tw-text-pub-secondary-text"},"Your complimentary subscription to ",T," ends ",oe,". To keep access and continue your support, finish setting up your subscription.")),Object(e.h)(C.a,{look:"button",variant:"themed-primary",size:"medium",href:Object(d.getSubscribeUrl)(_,{utm_source:"continue_your_support",utm_medium:"web",utm_content:J,simple:!0,next:document.location.href})},"Continue your support"))},nt=t(148),Xe=({freeSignupEmail:j,pub:T,source:_,user:J,onSuccess:oe})=>Object(e.h)("div",{className:"inline-free-email-form"},Object(e.h)(nt.a,{user:J,pub:T,freeSignupEmail:j,source:_,onSuccess:oe,hideLogin:!0,hideTerms:!0,submitButtonText:Object(E.getSubscribeText)(T)}));const gt="podcast_post_header";var Ut=({freeSignupEmail:j,isFreeSubscribed:T,pub:_,user:J})=>{const[oe,ve]=Object(o.k)(!1),[xe,Ke]=Object(o.k)(!1),qe=Object(o.j)(null),vt=_.section?_.section.description:_.podcast_description,It=On=>{if(_.plans){let dn=Object(d.getSubscribeUrl)(_,{just_signed_up:!0});On.body.prompt_to_login&&(dn=`/account/login?redirect=${encodeURIComponent(dn)}&email=${encodeURIComponent(On.body.email)}`),document.location.href=dn}else window.location.reload()},un=Object(o.a)(()=>{ve(!oe)},[ve,oe]);return Object(o.g)(()=>{const On=()=>{const In=qe.current&&qe.current.scrollHeight>qe.current.clientHeight;Ke(oe||In)};On();const dn=Object(A.debounce)(On);return window.addEventListener("resize",dn),()=>{window.removeEventListener("resize",dn)}},[Ke,qe,oe]),Object(e.h)("div",{className:"tw-mt-6 tw-text-center"},vt&&Object(e.h)("div",{className:"podcast-description tw-mb-6 tw-font-sans tw-text-base tw-text-pub-secondary-text"},Object(e.h)("span",{ref:qe,"data-testid":"podcast-description",className:c()({"podcast-description--clamped":!oe})},vt),xe&&Object(e.h)("span",{className:"tw-cursor-pointer tw-font-bold",onClick:un},!oe&&Object(e.h)("span",null,"show more"),oe&&Object(e.h)("span",null," show less"))),T?Object(e.h)(ne.b,{href:Object(d.getSubscribeUrl)(_,{utm_source:gt}),className:"primary tw-w-full tw-text-sm tw-font-semibold sm:tw-w-auto"},Object(E.getSubscribeText)(_,{isFreeSubscribed:!0})):Object(A.isMobileBrowser)()?Object(e.h)(ne.b,{href:Object(d.getSubscribeUrl)(_,{utm_source:gt,simple:!0,next:document.location.href}),className:"primary tw-w-full tw-text-sm tw-font-semibold sm:tw-w-auto"},Object(E.getSubscribeText)(_)):Object(e.h)(Xe,{freeSignupEmail:j,pub:_,source:gt,user:J,onSuccess:It}))},sn=({freeSignupEmail:j,isFreeSignup:T,isPaywall:_,post:J,pub:oe,magicToken:ve,user:xe,onChange:Ke,onClickCommentButton:qe,onTopReached:vt})=>{var It;const[un,On]=Object(o.k)((It=J.podcast_duration)!=null?It:0),dn=qr=>{On(qr)},In=!!(xe==null?void 0:xe.is_subscribed),Qn=!!(T||(xe==null?void 0:xe.is_free_subscribed)),dr=!Qn||!In&&!!oe.plans,Gr=In&&(xe==null?void 0:xe.subscription_type)==="comp"&&v()(xe==null?void 0:xe.subscription_expiry).subtract(30,"days").isBeforeNow(),Kr=Qn&&!In&&(xe==null?void 0:xe.comp_expired_recently),eo=Object(E.getBylineUsers)(J).sort((qr,so)=>qr.id===oe.author_id?-1:so.id===oe.author_id?1:qr.is_guest&&!so.is_guest?-1:!qr.is_guest&&so.is_guest?1:(qr.name||"").localeCompare(so.name||""));return Object(e.h)("div",{className:"tw-bg-pub-wash tw-py-8 sm:tw-pb-16"},Object(e.h)("div",{className:"container"},Object(e.h)(_n,{post:J,podcastDuration:un}),Object(e.h)(se,{allowEdit:xe==null?void 0:xe.is_contributor,allowMobileFooter:!0,isStatic:!1,post:J,postReactionToken:ve,pub:oe,showDate:!0,showDatetime:!1,user:xe,onChange:Ke,onCommentsClick:qe,useWashBackground:!0}),Object(e.h)(ie.a,{onVisible:vt}),_&&!Object(r.podcastPostIsFreePreview)(J)?Object(e.h)(ce,{post:J}):Object(e.h)(Ae,{isFreeSubscribed:Qn,isSubscribed:In,post:J,pub:oe,magicToken:ve,onGetDuration:dn,isPreview:Object(r.podcastPostIsFreePreview)(J)}),oe.bylines_enabled&&eo&&eo.length?Object(e.h)(y.SiteConfigGate,{configKey:"podcast_bylines"},Object(e.h)(R.a,{direction:"column",gap:24,paddingTop:24},Object(e.h)(U.b.H4,{color:"pub-primary-text"},"Appears in this episode"),eo.map(qr=>Object(e.h)(R.a,{direction:"column",gap:24},Object(e.h)(R.a,{direction:"row",alignItems:"center",gap:8},Object(e.h)(S.c,{className:"podcast-post-header-facepile",maximum:1,hoverProfiles:!0,faces:[qr],faceUtmSource:"author-byline-face-podcast",useWashBackground:!0}),Object(e.h)(R.a,{direction:"column"},Object(e.h)(R.c,{gap:4,alignItems:"center"},Object(e.h)(U.b.B4,{color:"pub-primary-text",weight:"bold"},qr.name),Object(e.h)(Z.a,{userId:qr.id,tier:qr.bestseller_tier,size:"sm"})),qr.primaryPublicationName&&Object(e.h)(U.b.B4,{color:"pub-secondary-text"},qr.primaryPublicationUrl?Object(e.h)(e.Fragment,null,"Writes ",Object(e.h)("a",{style:{textDecoration:"none"},href:qr.primaryPublicationUrl},qr.primaryPublicationName)," ",Object(e.h)("a",{href:`${qr.primaryPublicationUrl}/subscribe`},"Subscribe")):`Writes ${qr.primaryPublicationName}`))))))):null,Gr||Kr?Object(e.h)(ft,{expiry:xe.subscription_expiry,postId:J.id,podcastName:oe.podcast_title,pub:oe}):dr?Object(e.h)(Ut,{freeSignupEmail:j,isFreeSubscribed:Qn,pub:oe,user:xe}):null))};function _n({post:j,podcastDuration:T}){return Object(e.h)("div",{className:"tw-items-end tw-gap-8 sm:tw-flex"},j.podcast_episode_image_url&&Object(e.h)("div",{className:"tw-mx-auto tw-mb-6 tw-box-border tw-h-32 tw-w-32 tw-shrink-0 tw-overflow-hidden tw-rounded-lg tw-border-4 tw-border-solid tw-border-white tw-bg-gray-400 tw-shadow-md sm:tw-mx-0 sm:tw-mb-0 sm:tw-h-56 sm:tw-w-56"},Object(e.h)("img",{className:"tw-h-full tw-w-full tw-object-cover",src:Object(d.cloudinary)(j.podcast_episode_image_url,512,{height:512,crop:"fill"})})),Object(e.h)("div",{className:"tw-text-center sm:tw-text-left"},Object(e.h)("div",{className:"tw-mb-1 tw-font-sans tw-text-sm tw-font-semibold tw-uppercase tw-text-pub-secondary-text"},j.post_date?v()(j.post_date).standardDate():v()().standardDate(),T>0&&` \u2022 ${Object(E.formatPodcastDuration)(T)}`),j.title&&Object(e.h)("h1",{className:c()("tw-mt-0 tw-mb-2 tw-leading-tight sm:tw-mb-1",{"tw-text-3xl sm:tw-text-4xl":j.title.length<60,"tw-text-3xl sm:tw-text-3xl":j.title.length>=60&&j.title.length<110,"tw-text-2xl sm:tw-text-2xl":j.title.length>=110&&j.title.length<140,"tw-text-xl sm:tw-text-xl":j.title.length>=140})},j.title),j.subtitle&&Object(e.h)("h3",{className:c()("tw-my-0 tw-font-sans tw-font-normal tw-text-pub-secondary-text",{"tw-text-lg":j.subtitle.length<110,"tw-text-base":j.subtitle.length>=110})},j.subtitle)))}function Hn({post:j,pub:T,user:_,isPaywall:J}){const oe=!!(_==null?void 0:_.is_subscribed),ve=Boolean(_.is_subscribed||_.is_free_subscribed),xe="";return J&&!Object(r.podcastPostIsFreePreview)(j)?Object(e.h)(ce,{post:j}):Object(e.h)(Ae,{isFreeSubscribed:ve,isSubscribed:oe,post:j,pub:T,magicToken:xe,isPreview:Object(r.podcastPostIsFreePreview)(j)})}var wn=t(910),Un=t(155);const bn=({label:j,icon:T,isActive:_=!1,onClick:J,padding:oe="tw-py-6 tw-px-4",useSubstackTheme:ve=!1,isDisabled:xe=!1})=>Object(e.h)("div",{className:c()("tw-flex tw-items-center tw-gap-2 tw-border-y-2 tw-border-x-0 tw-border-solid tw-border-y-transparent tw-font-sans tw-text-sm tw-font-semibold tw-transition-colors ",oe,{"tw-cursor-pointer":!xe||_,"tw-cursor-not-allowed tw-opacity-50":xe&&!_,"tw-border-b-pub-primary-text tw-text-pub-primary-text":_&&!ve,"tw-text-pub-secondary-text":!_&&!ve,"tw-border-b-substack-primary tw-text-substack-primary":_&&ve,"tw-text-substack-secondary":!_&&ve,"hover:tw-bg-pub-wash":!ve&&!_&&!xe,"hover:tw-bg-substack-wash":ve&&!_&&!xe}),disabled:xe,onClick:xe?()=>{}:J,role:"button"},typeof T=="function"?T({active:_}):T,Object(e.h)("span",null,j)),cr=({items:j,onSelect:T,activeTab:_,tabPadding:J,useSubstackTheme:oe=!1,className:ve})=>Object(e.h)("div",{className:c()("tw-flex",ve)},j.map(({key:xe,icon:Ke,label:qe,isDisabled:vt})=>Object(e.h)(bn,{isActive:xe==_,icon:Ke,onClick:()=>{T(xe)},padding:J,label:qe,useSubstackTheme:oe,isDisabled:vt})));var ur=({activeTab:j,commentCount:T,onClickTab:_,loadedWithHeaderLink:J})=>{const[oe,ve]=Object(o.k)(J);return Object(o.d)(()=>{if(typeof window=="undefined"||oe){ve(!1);return}window.history.replaceState?window.history.replaceState(null,null,`#${j}`):window.location.hash=`#${j}`},[j]),Object(e.h)("div",{className:"tw-border tw-border-solid tw-border-pub-detail-light"},Object(e.h)("div",{className:"container"},Object(e.h)(cr,{items:[{key:"details",icon:Object(e.h)(wn.a,{height:18}),label:"Episode details"},{key:"comments",icon:({active:xe})=>Object(e.h)(Un.default,{className:c()("tw-fill-transparent",xe?"tw-stroke-pub-primary-text":"tw-stroke-pub-secondary-text"),height:18,strokeWidth:1.5}),label:T===0?"Comments":T===1?"1 comment":`${T} comments`}],onSelect:_,activeTab:j})))},er=t(74),wt=({children:j,href:T})=>Object(e.h)(e.Fragment,null,Object(e.h)("table",{cellSpacing:"0",cellPadding:"8",border:"0",width:"100%"},Object(e.h)("tr",null,Object(e.h)("td",{align:"center"},Object(e.h)("a",{href:T,className:"tw-font-sans tw-text-[13px] tw-font-semibold tw-text-error"},j)))));const mt=({post:j,compAlreadyExpired:T=!1})=>{const _=`${m.Substitutions.CHECKOUT_URL}&utm_medium=email&utm_campaign=continue_your_support&utm_content=${j.id}`;return Object(e.h)("table",{width:"100%",cellSpacing:"0",cellPadding:"0",border:"0",className:"tw-bg-error-wash",bgcolor:"#FFFAFA"},Object(e.h)("tr",null,Object(e.h)("td",{height:"16"})),Object(e.h)("tr",null,Object(e.h)("td",{align:"center",className:"tw-leading-5"},Object(e.h)("span",{className:"tw-font-sans tw-text-base tw-font-bold tw-text-error"},"Continue your support"),Object(e.h)("br",null),T?Object(e.h)("span",{className:"tw-font-sans tw-text-ssm tw-text-error"},"Your free trial has ended!",Object(e.h)("br",null),"Continue your support to access paid-only content."):Object(e.h)("span",{className:"tw-font-sans tw-text-ssm tw-text-error"},"Subscribe now to keep your paid status. You won't be",Object(e.h)("br",null),"charged until your free trial ends on ",m.Substitutions.SUBSCRIPTION_EXPIRY_DATE,"."))),Object(e.h)("tr",null,Object(e.h)("td",{height:"16"})),Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(wt,{href:_},"Subscribe now"))),Object(e.h)("tr",null,Object(e.h)("td",{height:"16"})))};var Fe=t(336),pt=t(249),Dt=t(561),Jt=t(393),Gt=t(253),mn=t(156),Cn=t.n(mn),tr=t(105),Zn=t(31),At=t(21),Xt=t(337),en=t(757),$n=t(758),Xn=t(344),Yn=t(759),Sn=t(345),nr=t(293),zt=t(145);class Kt extends e.Component{onShare(T){this.props.position&&Object(f.i)(f.a.POST_SHARE_BUTTON_CLICKED,{position:this.props.position}),!this.props.isStatic&&(T&&T.stopPropagation(),this.props.sharedShareDialog?T.target.dispatchEvent(new CustomEvent("share-post",{bubbles:!0})):this.modal.open())}render({className:T,linkClassName:_,user:J,pub:oe,post:ve,reaction_token:xe,height:Ke,onChange:qe,isStatic:vt,children:It,sharedShareDialog:un,noIcon:On}){let dn;return ve.share_url_override?dn=ve.share_url_override:vt?ve?dn=m.Substitutions.SHARE_URL:dn=m.Substitutions.SHARE_PUB_URL:dn="javascript:void(0)",Object(e.h)("span",{className:T},Object(e.h)("a",{href:dn,onClick:In=>this.onShare(In),className:_},!On&&Object(e.h)(nr.default,{class:"recommend-icon post-meta-icon",isStatic:vt,height:Ke,alt:"Share",stroke:"#757575",fill:"transparent",strokeWidth:vt?1:1.5}),It),!vt&&!un&&Object(e.h)(zt.c,{ref:In=>this.modal=In,user:J,pub:oe,post:ve,reaction_token:xe,onChange:qe}))}}var $t=t(134),et=t(395),Wt=t(356),Vt=Object.defineProperty,cn=Object.defineProperties,Tn=Object.getOwnPropertyDescriptors,pn=Object.getOwnPropertySymbols,Gn=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,Rn=(j,T,_)=>T in j?Vt(j,T,{enumerable:!0,configurable:!0,writable:!0,value:_}):j[T]=_,pr=(j,T)=>{for(var _ in T||(T={}))Gn.call(T,_)&&Rn(j,_,T[_]);if(pn)for(var _ of pn(T))hr.call(T,_)&&Rn(j,_,T[_]);return j},zn=(j,T)=>cn(j,Tn(T)),Ar=(j,T,_)=>(Rn(j,typeof T!="symbol"?T+"":T,_),_);const{getPaidOrFoundingTierNameForPost:Rr}=t(59),ir=46438;class Sr extends e.Component{constructor(T,_){super(T,_);if(Ar(this,"withAuthorLine",(J,oe)=>{const{pub:ve,post:xe,showAuthor:Ke,showPhoto:qe}=J,vt=xe.type==="adhoc_email",It=Object(E.getBylineUsers)(xe).length,un=It===1,On=un&&Object(E.getBylineUsers)(xe)[0],dn=un&&On.is_guest&&!Object(y.default)("dont_show_guest_byline")&&!vt,In=J.showDate||J.showDatetime,Qn=!xe.is_published&&!J.inThreadHead&&In&&!vt,dr=J.isFreePreview&&J.showAudience&&In&&!vt,Gr=Object(i.isFoundingAudience)(xe.audience)&&J.showAudience&&!dr&&In&&!vt,Kr=Object(i.isPaidAudience)(xe.audience)&&J.showAudience&&!Gr&&!dr&&In&&!vt,eo=Object(me.l)({pub:ve,post:xe,showAuthor:Ke,showPhoto:qe});return Object(e.h)(Zn.e,{width:"100%",className:c()("post-meta")},Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(Zn.d,null,Object(e.h)(Zn.c,{gap:4},Object(e.h)(U.b.Meta,{color:"primary",className:Wt.a.postAuthor},It>0?Object(E.oxfordComma)(Object(E.getBylineUsers)(xe).map(qr=>Object(e.h)(U.b.Meta,{as:"a",href:Object(d.getProfileUrl)(qr,ve,{base:J.isStatic}),color:"primary",style:"text-decoration: none"},qr.name))):Object(E.getPrintedByline)(ve,xe))),Object(e.h)(Zn.c,{gap:4},Object(e.h)(U.b.Meta,null,(J.showDate||J.showDatetime)&&xe.post_date&&Object(e.h)("time",{dateTime:v()(xe.post_date).toISOString()},v()(xe.post_date).standardDate())),Kr&&Object(e.h)(Zn.c,{gap:4},Object(e.h)(U.b.Meta,null,"\u2219"),Object(e.h)(U.b.Meta,{color:"accent-purple"},"Paid")),Gr&&Object(e.h)(Zn.c,{gap:4},Object(e.h)(U.b.Meta,null,"\u2219"),Object(e.h)(U.b.Meta,{color:"accent-purple"},Rr(ve,xe))),dr&&Object(e.h)(Zn.c,{gap:4},Object(e.h)(U.b.Meta,null,"\u2219"),Object(e.h)(U.b.Meta,{color:"accent-purple"},"Preview")),dn&&Object(e.h)(Zn.c,{gap:4},Object(e.h)(U.b.Meta,null,"\u2219"),Object(e.h)(U.b.Meta,null,"Guest post")),Qn&&Object(e.h)(Zn.c,{gap:4},Object(e.h)(U.b.Meta,null,"\u2219"),Object(e.h)(U.b.Meta,null,"Draft"))))),eo&&Object(e.h)("td",{align:"right"},Object(e.h)(Zn.c,{gap:4},It>0&&Object(E.getBylineUsers)(xe).map((qr,so)=>so<4&&Object(e.h)("a",{href:Object(d.getProfileUrl)(qr,ve,{base:J.isStatic})},Object(e.h)(Zn.a,{src:qr.photo_url,size:It>1?32:40})))))))}),typeof window!="undefined"&&(window==null?void 0:window.matchMedia)){const J=window.matchMedia("screen and (max-width: 650px)");this.state={isMobileWidth:J.matches};const oe=ve=>{this.unmounted||this.setState({isMobileWidth:ve.matches})};J.addEventListener?J.addEventListener("change",oe):J.addListener&&J.addListener(oe)}}componentWillUnmount(){this.unmounted=!0}render({pub:T,post:_,showAuthor:J,showPhoto:oe,fromPostPage:ve}){return Object(me.l)({pub:T,post:_,showAuthor:J,showPhoto:oe})||Object(me.k)({pub:T,post:_,showAuthor:J})||Object(me.i)({pub:T,post:_,showAuthor:J})?this.withAuthorLine(this.props,this.state):Object(e.h)(Nr,zn(pr({},this.props),{editOnRightSide:this.props.showUpdatedIcons,className:this.props.showUpdatedIcons?"alternative-meta":this.props.className,isMobileWidth:this.state.isMobileWidth,actionBarStyle:ve?"post-header-compact":"post-preview"}))}}const Pr=({shouldShowFullWidthUfi:j,isMobileWidth:T,children:_})=>j?Object(e.h)(R.b,{style:{width:"100%"},gap:{desktop:16,mobile:0}},_):T?_:Object(e.h)(R.c,{style:{width:"100%"},justifyContent:"space-between",direction:"row-reverse"},_),yr=({additionalCommentCount:j,user:T,pub:_,post:J,showReactions:oe,showComments:ve,reaction_token:xe,onChange:Ke,shareTooltipText:qe,fromPostPage:vt,onClickCommentButton:It,reactors:un,isStatic:On,base_url:dn,className:In,showShare:Qn})=>{oe=oe&&_.community_enabled&&J.slug&&!J.is_draft;const dr=Object(tr.useMediaQuery)({maxWidth:540}),{getSettingFor:Gr}=Object(W.c)(),Kr=!On&&(J==null?void 0:J.id)&&_.community_enabled&&!J.is_draft&&J.slug,eo=Cn()(Object.values((J==null?void 0:J.reactions)||{})),qr=Kr&&!!eo&&oe,so=!J.is_draft&&ee(T,{enable_restacking:!!Gr("enable_restacking")},J,_,!1),oo=so;return Object(e.h)(Pr,{shouldShowFullWidthUfi:oo,isMobileWidth:dr},Object(e.h)(me.c,{style:dr&&!so?"inline":"button",post:J,pub:_,user:T,postReactionToken:xe,hideReactions:!oe||dr&&so,hideComments:!ve||dr&&so,hideSavePost:dr&&so,hideShare:!Qn||dr&&so,useShareLabel:dr&&!oo,justified:dr||oo,labelStyle:dr&&!oo?"labels":"counts-or-none",onChange:Ke,additionalCommentCount:j,showShare:Qn,onCommentsClick:It,position:oo?"post-footer-full-width":"post-footer",showRestackButton:so}),qr&&Object(e.h)(e.Fragment,null,(oo||dr)&&Object(e.h)("hr",{class:"footer-facepile-separator"}),Object(e.h)("div",{class:"footer-facepile-container"},Object(e.h)(lo,{postId:J.id,totalLikes:eo,reactors:Br(un,T,!!J.reaction,_),loading:!un,hoverProfiles:!0,enableModal:!0,labelOnly:!_.post_reaction_faces_enabled}))))};function br({pub:j,post:T,user:_}){var J;const{result:oe,isLoading:ve}=Object(At.f)({pathname:`/api/v1/post/${T.id}/reactors`,auto:!0,deps:[T.id]});return Object(e.h)(lo,{postId:T.id,totalLikes:(J=T.reactions["\u2764"])!=null?J:0,reactors:Br(oe,_,!!T.reaction,j),loading:!oe,hoverProfiles:!0,enableModal:!0,labelOnly:!j.post_reaction_faces_enabled})}function Br(j,T,_,J){if(!j)return[];if(T){const oe=j.length&&j[0].id===T.id;_&&(T.subscription_visibility!=="private"||J.id===ir)&&T.activity_likes_enabled&&!oe?j.splice(0,0,{id:T.id,name:T.name,photo_url:T.photo_url}):!_&&oe&&j.splice(0,1)}return j}function Nr({additionalCommentCount:j=0,className:T,user:_,pub:J,post:oe,showAudience:ve=!1,showDate:xe=!1,showEmailSent:Ke=!1,showDatetime:qe=!1,showReactions:vt=!0,showComments:It=!0,showShare:un=!1,showRestack:On=!1,showPublicationName:dn=!1,hidePinning:In=!1,reaction_token:Qn,onClick:dr,onChange:Gr,isStatic:Kr=!1,isFreePreview:eo=!1,allowSendEmail:qr=!1,allowEdit:so=!1,shareTooltipText:oo,showPins:ti,sharedShareDialog:_r,showUpdatedIcons:To,editOnRightSide:Co=!1,onClickCommentButton:Ei,reactors:ni,showAuthor:pi,showPhoto:Bi,fromPostPage:_i,isMobileWidth:Qo,actionBarStyle:ci="post-header-compact"}){var Xi;const Ri=[J].concat(J.child_publications).find(Mn=>Mn.id===oe.publication_id),yo=Br(ni,_,!!oe.reaction,J),go=ci==="post-footer",Di=go?20:ci==="post-preview"?14:18,Ui=ci==="post-header-large"?20:ci==="post-preview"?16:ci==="thread-head"||go?14:18;let Ki;oe.comment_url_override?Ki=oe.comment_url_override:Kr?Ki=`${m.Substitutions.HALF_MAGIC_COMMENTS_URL}&utm_source=substack&utm_medium=email`:Ki=Object(d.getPostUrl)(J,oe,{comments:!0});const Mi=j+((Xi=oe.comment_count)!=null?Xi:0),ma=It&&!eo&&Object(E.showCommentsOnPost)({publication:J,post:oe})&&oe.type!=="restack",Fi=vt&&!eo&&!["adhoc_email","restack"].includes(oe.type),Pa=(xe||qe)&&oe.post_date&&!oe.is_draft,Ca=Ke?Boolean(oe.email_sent_at):null,ka=Object(Xt.a)({user:_,noBase:!1}),sa=Mn=>{var $r;(($r=Mn.post)==null?void 0:$r.reaction)&&_&&ka({user:_}),Gr(Mn)},Sa=Object(e.h)($t.a,{user:_,pub:J,post:oe,token:Qn,onChange:sa,height:Ui,isStatic:Kr,isFreePreview:eo,alt:"Like",buttonStyle:go,class:"post-meta-icon like-reaction-button",hideReactionCount:go&&!Kr}),Na=[Ke&&Ca&&{className:"email-sent",title:"This post was sent as an email",content:Object(e.h)(en.default,{class:"post-meta-icon",height:Di,isStatic:Kr})},ti&&oe.is_section_pinned&&{className:"icon pinned",content:Object(e.h)(Sn.default,{class:"post-meta-icon",isStatic:Kr})},oe.type==="adhoc_email"?{className:"audience-adhoc",content:Object(e.h)(he.default,{class:"post-meta-icon",isStatic:Kr})}:ve&&Object(i.isPaidAudience)(oe.audience)&&{className:"audience-lock",content:Object(e.h)($n.default,{color:"#666666",height:Di,isStatic:Kr})},Object(me.j)({pub:J,post:oe,showAuthor:pi,showPhoto:Bi,isMobileWidth:Qo})&&{className:"author",content:Object(E.getBylineUsers)(oe).length>0?Object(E.oxfordComma)(Object(E.getBylineUsers)(oe).map(Mn=>Object(e.h)(Ye.b,{disabled:Kr,subject:Mn,utmSource:"byline"},Object(e.h)("a",{href:Object(d.getProfileUrl)(Mn,J,{base:Kr}),onClick:$r=>$r.stopPropagation()},Mn.name)))):Object(E.getPrintedByline)(J,oe)},dn&&{className:"post-publication-name",content:J.name},To&&!Co&&so&&!Kr&&_&&_.is_contributor&&{className:"post-meta-item icon edit-icon",onClick:Mn=>Mn.stopPropagation(),content:Object(e.h)(Gt.a,{pub:J,post:oe,iconHeight:Di,hidePinning:In,user:_,emailSent:Ca,allowSendEmail:qr,showUpdatedIcons:To})},Pa&&{className:"post-date",title:v()(oe.post_date).toISOString(),content:Object(e.h)(U.b.Meta,null,Object(e.h)("time",{dateTime:v()(oe.post_date).toISOString()},Object(me.g)({post:oe,showDatetime:qe,isStatic:Kr,fromPostPage:_i,showReactions:Fi})))},(Ri==null?void 0:Ri.community_enabled)&&oe.slug&&Fi&&!oe.is_draft&&{className:"icon",onClick:Mn=>Mn.stopPropagation(),content:!go&&!Kr&&yo.length?Object(e.h)(et.a,{portalClass:"facepile-tooltip",content:Object(e.h)(lo,{postId:oe.id,totalLikes:Cn()(Object.values(oe.reactions)),reactors:yo,loading:!ni})},Sa):Sa},_&&{className:"icon",onClick:Mn=>Mn.stopPropagation(),content:Object(e.h)(Zr,{post:oe,isPostFooter:go,isStatic:Kr,lucideIconHeight:Ui,onChange:Gr})},(Ri==null?void 0:Ri.community_enabled)&&oe.slug&&ma&&!oe.is_draft&&{className:"icon",onClick:Mn=>Mn.stopPropagation(),content:Object(e.h)("a",{className:go?"post-meta-button button":"",href:Ki,native:Ri&&Object(d.isPublishPath)(document.location.pathname,Ri),onClick:Ei},Object(e.h)(Un.default,{class:"comment-icon post-meta-icon",isStatic:Kr,height:Ui,alt:"Comment",stroke:"#757575",fill:"transparent",strokeWidth:Kr?1:1.5,ampProps:{layout:"fixed"}}),!Mi&&go&&Object(e.h)("span",{class:"meta-button-label"},"Comment"),Mi>0&&Object(e.h)("span",{className:"comment-count"},Object(E.numberToString)(Mi)))},On&&!go&&{className:"icon",onClick:Mn=>Mn.stopPropagation(),content:Object(e.h)("a",{href:m.Substitutions.RESTACK_URL,className:go?"button post-meta-button":void 0},Object(e.h)(Yn.default,{class:"recommend-icon post-meta-icon",isStatic:Kr,height:Ui,alt:"Recommend",stroke:"#757575",fill:"transparent",strokeWidth:Kr?1:1.5,ampProps:{layout:"fixed"}}),go&&Object(e.h)("span",{class:"meta-button-label"},"Recommend"))},un&&oe.audience!=="only_free"&&!oe.is_draft&&!eo&&{className:"icon",onClick:Mn=>Mn.stopPropagation(),content:Object(e.h)(Kt,{user:_,pub:Ri,post:oe,reaction_token:Qn,height:Ui,onChange:Gr,isStatic:Kr,sharedShareDialog:_r,position:ci==="post-footer"?"post-footer":"post-header",linkClassName:go?"button post-meta-button":void 0},go&&Object(e.h)("span",{class:"meta-button-label"},"Share"),oo&&Object(e.h)("div",{className:"share-tooltip-wrap"},Object(e.h)("div",{className:"share-tooltip"},oo)))},(!To||Co)&&so&&!Kr&&_&&_.is_contributor&&{className:"icon edit-icon",onClick:Mn=>Mn.stopPropagation(),content:Object(e.h)(Gt.a,{pub:J,post:oe,iconHeight:Di,hidePinning:In,user:_,emailSent:Ca,allowSendEmail:qr,showUpdatedIcons:To})}].filter(Mn=>!!Mn);return Kr?Object(e.h)("table",{className:c()("post-meta custom",{big:go},T),cellpadding:"0",cellspacing:"0",onClick:dr},Object(e.h)("tr",null,Na.map(({className:Mn,title:$r,onClick:uo,content:Bo})=>Object(e.h)("td",{className:c()("post-meta-item",Mn),title:$r,onClick:uo},Bo)))):Object(e.h)("div",{className:c()("post-meta post-meta-actions-web custom",{big:go},T),onClick:dr},Na.map(({className:Mn,title:$r,onClick:uo,content:Bo})=>Object(e.h)("div",{className:c()("post-meta-item",Mn),title:$r,onClick:uo},Bo)))}function lo({className:j,postId:T,reactors:_,totalLikes:J,loading:oe,hoverProfiles:ve,enableModal:xe,labelOnly:Ke}){const qe=J>0?Object(E.pluralize)(J,"like"):"";return Object(e.h)(S.c,{className:j,loading:oe,faces:_,pileLabel:qe,modalLabel:qe,totalCount:J,hoverProfiles:ve,enableModal:xe,hideDefaultPhotos:!0,faceUtmSource:"post-reactions-face",detailUtmSource:"post-reactions-modal",onDialogOpen:()=>{Object(f.i)(f.a.POST_REACTIONS_MODAL_VIEWED,{post_id:T})},labelOnly:Ke})}function Zr({post:j,isPostFooter:T,isStatic:_,isSaved:J,lucideIconHeight:oe,onChange:ve}){const{onSave:xe,isSaved:Ke}=Object(me.n)({post:j,isSaved:j.is_saved}),qe=()=>{const vt=xe();ve({post:zn(pr({},j),{is_saved:vt})})};return Object(e.h)("a",{className:c()("post-meta-save-button",T?"post-meta-button button":"",{isSaved:Ke}),href:_&&m.Substitutions.SAVE_POST_URL,onClick:qe},Object(e.h)(Xn.default,{isStatic:_,height:oe,stroke:"#757575",strokeWidth:_?1:1.5}),T&&Object(e.h)("span",{class:"meta-button-label"},"Save"))}var zr=t(41),wr=t(49),$o=t(760),xo=t(761);const Vo=({post:j})=>{const T=Object(W.c)().getSettingFor("enable_prev_next_nav"),_=Object(wr.b)();return!T||!(j==null?void 0:j.previous_post_slug)&&!(j==null?void 0:j.next_post_slug)?null:Object(e.h)("div",{className:"post-footer use-separators post-ufi themed next-prev"},Object(e.h)("div",null,j.previous_post_slug&&Object(e.h)(me.f,{icon:Object(e.h)($o.default,{className:"icon",strokeWidth:1.5,height:20}),noLabel:!1,style:"button",noBorder:_,onClick:()=>{Object(f.i)(f.a.PREVIOUS_POST_LINK_CLICKED,{post_id:j.id}),Object(zr.route)(`/p/${j.previous_post_slug}`)}},Object(e.h)("div",{className:"tw-flex tw-items-center"},"Previous"))),Object(e.h)("div",null,j.next_post_slug&&Object(e.h)(me.f,{icon:Object(e.h)(xo.default,{className:"icon",strokeWidth:1.5,height:20}),iconPosition:"right",noLabel:!1,style:"button",noBorder:_,onClick:()=>{Object(f.i)(f.a.NEXT_POST_LINK_CLICKED,{post_id:j.id}),Object(zr.route)(`/p/${j.next_post_slug}`)}},Object(e.h)("div",{className:"tw-flex tw-items-center"},"Next"))))};var Ti=t(72),Ho={container:"frontend-components-post_preview-PostPreviewCoverImage-module__container--1lOr5",image:"frontend-components-post_preview-PostPreviewCoverImage-module__image--2F8_z",imageSquare:"frontend-components-post_preview-PostPreviewCoverImage-module__imageSquare--yDIFW"};const oi=({imageAspectRatio:j,className:T,post:_,imageWidth:J,isBelowTheFold:oe})=>{const{getConfigFor:ve}=Object(B.c)(),xe=ve("show_entire_square_image"),Ke=Object(i.getCoverImageUrl)(_),qe=!J&&!j?1.32:j,vt=J||336;return Object(e.h)("div",{className:c()(T,Ho.container,{"global-post-preview-cover-image-container--empty":!Ke})},Ke?Object(e.h)(Ti.a,{className:c()(Ho.image,{[Ho.imageSquare]:xe&&_.cover_image_is_square}),src:Ke,alt:"",maxWidth:vt,imageProps:qe?{height:Math.round(vt/qe),smartCrop:!0}:{},loading:oe?"lazy":void 0}):null)};var zo=t(688),ho=t(204),Jo=t(44),gi=t(64),ki=t(662),ao=t(110),Po=(j,T,_)=>new Promise((J,oe)=>{var ve=qe=>{try{Ke(_.next(qe))}catch(vt){oe(vt)}},xe=qe=>{try{Ke(_.throw(qe))}catch(vt){oe(vt)}},Ke=qe=>qe.done?J(qe.value):Promise.resolve(qe.value).then(ve,xe);Ke((_=_.apply(j,T)).next())});const qo=({pub:j})=>{const[T,_]=Object(o.k)(!0),[J,oe]=Object(o.k)(null),[ve,xe]=Object(o.k)(!1),Ke=Object(o.j)(null),qe=()=>{Ke.current.close()};if(Object(o.d)(()=>{!J&&T&&(()=>Po(void 0,null,function*(){try{const un=(yield h.a.get("/api/v1/publication_user/default")).body;if(oe(un),!un||un.id===j.id){xe(!0),_(!1);return}const On=yield h.a.get(`/api/v1/recommendations/from/${un.id}/to/${j.id}`);xe(!!On.body),_(!1)}catch(It){console.error("Failed to load recommend cta: ",It)}}))()},[j,T,_,J,oe]),!(T||ve||J&&J.invite_only))return Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"end-of-post-recommend-cta-container"},Object(e.h)(gi.a,{pub:j,size:54,openInNewTab:!0,logo_url:j.logo_url}),Object(e.h)("h3",{className:"publication-name"},"Recommend ",j.name," to the readers of ",J.name),Object(e.h)("p",{className:"publication-hero-text"},j.hero_text),Object(e.h)(ne.b,{className:c()({primary:!0,"subscribe-button":!0}),onClick:()=>{Object(f.i)(f.a.END_OF_POST_RECOMMEND_CTA_CLICKED,{pub:j,recommending_pub_id:J==null?void 0:J.id}),Ke.current.isOpen()?Ke.current.close():Ke.current.open()}},"Recommend")),Object(e.h)(Ai,{pubToRecommend:j,recommendingPub:J,setLoading:_,setStep:qe,ref:Ke}))};class Ai extends Jo.a{getClassName(){return"settings-add-pub-modal-wrapper"}renderChildren(){return Object(e.h)(ki.a,{pubToRecommendBack:this.props.pubToRecommend,recommendingPub:this.props.recommendingPub,setStep:this.props.setStep,close:this.close,setLoading:T=>{this.props.setLoading(T),Object(ao.b)(`Started recommending ${this.props.pubToRecommend.name}`,{timeout:1500})},source:"end-of-post-recommend-cta"})}}var hi=t(166),ze=t(805),Re=t(51),We=t(71),it=t(245),Pt={subscribeDialog:"frontend-components-SubscribePrompt-module__subscribeDialog--2_6UY",form:"frontend-components-SubscribePrompt-module__form--2oxOd",dismissButton:"frontend-components-SubscribePrompt-module__dismissButton--YK0UW",emailInput:"frontend-components-SubscribePrompt-module__emailInput--3xDmy",pictureBox:"frontend-components-SubscribePrompt-module__pictureBox--3DvJb",authorIcon:"frontend-components-SubscribePrompt-module__authorIcon--2pK7K",childPublicationIcon:"frontend-components-SubscribePrompt-module__childPublicationIcon--32hj5",signInLink:"frontend-components-SubscribePrompt-module__signInLink--3H0Y9",background:"frontend-components-SubscribePrompt-module__background--2DQPj"},Nt=Object.defineProperty,kt=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,Yt=(j,T,_)=>T in j?Nt(j,T,{enumerable:!0,configurable:!0,writable:!0,value:_}):j[T]=_,an=(j,T)=>{for(var _ in T||(T={}))Ht.call(T,_)&&Yt(j,_,T[_]);if(kt)for(var _ of kt(T))Bt.call(T,_)&&Yt(j,_,T[_]);return j},En=(j,T,_)=>new Promise((J,oe)=>{var ve=qe=>{try{Ke(_.next(qe))}catch(vt){oe(vt)}},xe=qe=>{try{Ke(_.throw(qe))}catch(vt){oe(vt)}},Ke=qe=>qe.done?J(qe.value):Promise.resolve(qe.value).then(ve,xe);Ke((_=_.apply(j,T)).next())});const vn=300,ar=({pub:j,post:T,variant:_})=>{var J;const[oe,ve]=Object(o.k)(!1),[xe,Ke]=Object(o.k)(!1),[qe,vt]=Object(o.k)(!1),[It,un]=Object(o.k)(""),On=Object(o.j)(null),{exposeExperiment:dn}=Object(P.d)(),In=`pub-${j.id}-subscribe-prompt-next-shown-at`,Qn=`pub-${j.id}-takeover-next-shown-at`,dr=typeof window!="undefined"&&(window==null?void 0:window.innerHeight)?window.innerHeight:700,Gr=document.getElementsByClassName("available-content"),Kr=Gr.length>0?Gr[0].scrollHeight:0;let eo=_==="control"?600:_==="bottom"?Kr*.8:Kr*.5;eo=Math.max(Math.min(eo,Kr-dr),600);const{height:qr,width:so}=((J=On.current)==null?void 0:J.getBoundingClientRect())||{height:0,width:0},oo=typeof window!="undefined"&&window&&On.current?(window.innerHeight-qr)/2:200,ti=typeof window!="undefined"&&window&&On.current?(window.innerWidth-so)/2:0,[_r,To]=Object(o.k)(dr+Math.max(oo,eo)),[Co,Ei]=Object(o.k)(Math.max(document.documentElement.scrollTop||document.body.scrollTop,0)),[ni,pi]=Object(o.k)("absolute"),[Bi,_i]=Object(o.k)(ni==="fixed"||Co>_r-dr),Qo=Object(wr.b)(),ci=ni==="fixed"?60:Math.min(Math.max((Co-_r+dr)/(dr-oo)*60,0),60),Xi=Object(o.a)(()=>{!Qo&&Co>=_r-vn&&Ke(!0)},[Co,_,Qo,_r,oo,Ke]);Object(o.d)(()=>{let yo=!0;Kr<=1.5*dr&&(ve(!0),yo=!1);let go=null;if(document==null?void 0:document.referrer){try{go=new URL(document.referrer)}catch(Di){}((go==null?void 0:go.hostname)==="news.ycombinator.com"||(go==null?void 0:go.hostname)==="hckrnews.com")&&(ve(!0),yo=!1)}Object(Re.getStoredValue)(In)>Date.now()&&(ve(!0),yo=!1),yo&&dn("subscribe_prompt_position")},[]),Object(o.d)(()=>{!Bi||oe||(Object(f.i)(f.a.SUBSCRIBE_PROMPT_SHOWN,{post_id:T.id,variant:_}),Object(Re.setStoredValue)(In,v()().add(1,"hour").valueOf()),Object(Re.setStoredValue)(Qn,v()().add(1,"hour").valueOf()))},[Bi,oe,_]),Object(o.d)(()=>{xe&&(Object(f.i)(f.a.SUBSCRIBE_PROMPT_DISMISSED,{post_id:T.id,variant:_}),Object(Re.setStoredValue)(In,v()().add(1,"day").valueOf()),Object(Re.setStoredValue)(Qn,v()().add(1,"hour").valueOf()))},[xe,_]);const Ri=Object(o.a)(yo=>En(void 0,null,function*(){if(!qe){if(vt(!0),Object(f.i)(f.a.SUBSCRIBE_PROMPT_SUBMITTED,{post_id:T.id,variant:_}),!yo){document.location.href=Object(d.getSubscribeUrl)(j,{utm_medium:"web",utm_source:"post-subscribe-prompt",utm_content:T&&T.id,next:Object(d.getPostUrl)(j,T),simple:!0}),vt(!1);return}try{const go=yield h.a.post("/api/v1/free").send({email:yo,source:"post-subscribe-prompt"});!j.plans&&!j.has_recommendations?window.location.reload():document.location.href=Object(d.getSubscribeUrl)(j,an({utm_medium:"web",utm_source:"post-subscribe-prompt",utm_content:T&&T.id,simple:!0,just_signed_up:!0,next:Object(d.getPostUrl)(j,T),requires_confirmation:go.body.requires_confirmation?"true":""},go.body.subscription_id&&{subscription_id:go.body.subscription_id}))}catch(go){document.location.href=Object(d.getSubscribeUrl)(j,{utm_medium:"web",utm_source:"post-subscribe-prompt",utm_content:T&&T.id,simple:!0,next:Object(d.getPostUrl)(j,T)})}finally{vt(!1)}}}),[T,j,qe,vt,_]);return Object(o.d)(()=>{if(oe||xe)return;const yo=()=>{const go=Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),Di=go-Co;Di>0&&ni==="absolute"&&go>_r-oo&&pi("fixed"),Di<0&&ni==="fixed"&&(pi("absolute"),To(Co+oo)),Di<0&&ni==="absolute"&&go<_r-dr&&To(dr+Math.max(oo,eo,Co)),Ei(go),(ni==="fixed"||Di>0&&go>_r-dr)&&_i(!0)};return window.addEventListener("scroll",yo),window.addEventListener("resize",yo),()=>{window.removeEventListener("scroll",yo),window.removeEventListener("resize",yo)}},[ni,_r,To,Co,Ei,_i]),Object(o.d)(()=>{if(oe||xe)return;const yo=go=>{go.key==="Escape"&&Ke(!0)};return window.addEventListener("keydown",yo),()=>{window.removeEventListener("keydown",yo)}},[oe,xe,Ke]),oe||xe?Object(e.h)(e.Fragment,null):Object(e.h)(e.Fragment,null,Object(e.h)(R.b,{ref:On,className:Pt.subscribeDialog,style:{top:ni==="absolute"?`${_r}px`:`${oo}px`,left:`${ti}px`,position:ni},alignItems:"center"},Object(e.h)(R.c,{justifyContent:"center",alignItems:"end",paddingBottom:20},Object(e.h)("div",{className:Pt.pictureBox},Object(e.h)(We.a,{user:{photo_url:j.author_photo_url},size:64,className:Pt.authorIcon}),Object(e.h)(it.a,{src:j.logo_url,size:24,className:Pt.childPublicationIcon,alt:j.name}))),Object(e.h)(U.b.H4,{paddingBottom:4,align:"center"},"Discover more from ",j.name),Object(e.h)(U.b.B4,{color:"secondary",paddingBottom:24,align:"center"},j.hero_text),Object(e.h)("form",{className:Pt.form,onSubmit:yo=>{yo.preventDefault(),Ri(It)}},Object(e.h)("input",{className:Pt.emailInput,placeholder:"Type your email...",value:It,disabled:qe,onChange:yo=>{yo.stopPropagation(),yo.preventDefault(),un(yo.currentTarget.value)}}),Object(e.h)(L.a,{type:"submit",disabled:qe,grow:!0,priority:"primary-theme"},"Subscribe")),Object(e.h)(R.c,{gap:8,alignItems:"center",justifyContent:"center",className:Pt.dismissButton,onClick:()=>Ke(!0)},Object(e.h)(U.b.B4,{weight:"semibold",color:"secondary"},"Continue reading"),Object(e.h)(ze.a,null)),Object(e.h)(U.b.B4,{align:"center",className:Pt.signInLink,weight:"semibold"},Object(e.h)("a",{onClick:()=>{Object(f.i)(f.a.SUBSCRIBE_PROMPT_SIGN_IN_CLICKED,{post_id:T.id}),Object(A.redirect)(Object(d.getSigninUrl)({for_pub:j.subdomain,redirect:Object(d.getPostUrl)(j,T)}))},style:{cursor:"pointer"}},"Sign in")," ")),ci>0&&Object(e.h)("div",{className:Pt.background,onClick:Xi,style:{opacity:`${ci}%`}}))};var Er=t(36);function Dr({postId:j,onClose:T}){return Object(o.d)(()=>{Object(f.i)(f.a.LISTEN_TO_THIS_POST_MODAL_SHOWN,{post_id:j})},[]),Object(e.h)(Er.a,{isOpen:!0,onClose:T},Object(e.h)(Er.d,{includeClose:!0,onClose:T}),Object(e.h)(Er.b,null,Object(e.h)(R.b,{alignItems:"center",gap:24},Object(e.h)(R.b,{style:{textAlign:"center"},justifyContent:"center",gap:8},Object(e.h)(Er.e,null,"Listen to this post"),Object(e.h)(U.b,{color:"secondary",style:{lineHeight:1.5}},"Get the Substack app to hear this article read aloud.")),Object(e.h)(Lr,null))),Object(e.h)(Er.c,{includeDivider:!0,alignment:"center",primaryButton:Object(e.h)(C.a,{variant:"primary",href:Object(d.getAppStoreRedirectUrl)({utm_source:"web",utm_campaign:"tts-modal"}),onClick:()=>Object(f.i)(f.a.LISTEN_TO_THIS_POST_MODAL_GET_THE_APP_CLICKED,{post_id:j})},"Get the app")}))}function Lr(){const j="/img/main/tts-dialog";return Object(e.h)("video",{height:220,autoPlay:!0,muted:!0,loop:!0},Object(e.h)("source",{src:`${j}/nux.mp4`,type:"video/mp4"}),Object(e.h)("img",{width:374,height:233,src:`${j}/1x.png`,srcset:Array.from(no(1,4)).map(T=>`${j}/${T}x.png ${T}x`).join(", ")}))}function*no(j,T){for(let _=j;_<T;_++)yield _}var ko=t(90),bi=t(154),ei=Object.defineProperty,li=Object.defineProperties,Vi=Object.getOwnPropertyDescriptors,Qi=Object.getOwnPropertySymbols,ua=Object.prototype.hasOwnProperty,Oi=Object.prototype.propertyIsEnumerable,_a=(j,T,_)=>T in j?ei(j,T,{enumerable:!0,configurable:!0,writable:!0,value:_}):j[T]=_,pa=(j,T)=>{for(var _ in T||(T={}))ua.call(T,_)&&_a(j,_,T[_]);if(Qi)for(var _ of Qi(T))Oi.call(T,_)&&_a(j,_,T[_]);return j},Ra=(j,T)=>li(j,Vi(T)),Si=(j,T,_)=>(_a(j,typeof T!="symbol"?T+"":T,_),_),yi=(j,T,_)=>new Promise((J,oe)=>{var ve=qe=>{try{Ke(_.next(qe))}catch(vt){oe(vt)}},xe=qe=>{try{Ke(_.throw(qe))}catch(vt){oe(vt)}},Ke=qe=>qe.done?J(qe.value):Promise.resolve(qe.value).then(ve,xe);Ke((_=_.apply(j,T)).next())});const Wa="focus-comment-input",ot=["details","comments"],at=(j,T)=>j&&!j.invite_only&&T&&T.has_publication&&!T.is_admin&&!T.is_contributor&&!T.is_public_admin&&Object(N.a)(T,j),Ct=(j,T,_,J)=>j.payments_state==="enabled"?!(T==null?void 0:T.is_subscribed):(T==null?void 0:T.is_free_subscribed)&&j.payments_state==="disabled"&&!j.invite_only?!J&&_&&!(T==null?void 0:T.is_pledged):!(T==null?void 0:T.is_free_subscribed);class ln extends e.Component{constructor(T,_){super(T,_);Si(this,"onTopReached",vt=>{this.state.topReached||this.props.postPreview||(this.setState({topReached:!0}),Object(f.k)({post:this.props.post,hasPaywall:vt,surface:"publication"}),this.props.user&&!this.props.noPageview&&Promise.resolve(h.a.post(`/api/v1/posts/${this.props.post.id}/seen`)))}),Si(this,"onCommentButtonClicked",vt=>{if(this.props.post.type==="podcast"){vt.preventDefault(),this.state.activeTab!=="comments"&&(this.setState({activeTab:"comments"}),this.state.podcastComments||this.loadComments()),setTimeout(()=>{var It;(It=this.podcastCommentInput.current)==null||It.focus()},0);return}!this.props.showComments||this.props.post.comment_count||(vt.stopPropagation(),vt.preventDefault(),document.dispatchEvent(new CustomEvent(Wa)))}),Si(this,"handleClickTab",vt=>{this.setState({activeTab:vt}),vt==="comments"&&!this.state.podcastComments&&this.loadComments()}),Si(this,"handleAddPodcastComment",vt=>{this.setState({podcastComments:[vt].concat(this.state.podcastComments),addedPodcastComments:this.state.addedPodcastComments+1})}),Si(this,"handleUpdatePodcastComments",vt=>{let It=0;const un=(dn,In)=>dn.map(Qn=>Qn.id===In.id?(In.status==="deleted"?It-=1:It+=In.children.length-Qn.children.length,In):Ra(pa({},Qn),{children:un(Qn.children,In)})),On=un(this.state.podcastComments,vt);this.setState({podcastComments:On,addedPodcastComments:this.state.addedPodcastComments+It})}),Si(this,"handleUpdateSortPodcastComments",vt=>{Object(f.i)(f.a.COMMENTS_SORTED,{post_id:this.props.post.id,post_type:this.props.post.type,sort:vt}),this.setState({commentSort:vt},()=>{this.loadComments()})});var J,oe,ve;const xe=Object(A.getUrlHash)();this.state={autoPlay:!1,autoPlayVoiceOver:!1,podcastComments:null,addedPodcastComments:0,commentSort:(J=T.post.default_comment_sort)!=null?J:"best_first",activeTab:ot.includes(xe)?xe:"details",loadedWithHeaderLink:typeof window!="undefined"&&((oe=window.location.hash)==null?void 0:oe.startsWith(`#${encodeURIComponent("\xA7")}`)),reactors:null},!T.paywall&&!T.post.hidden&&T.post.body_html&&(this.state.canShowSubscribeFooterAfterPost=Ir(T.post.body_html),this.state.truncated=T.truncateAt?Xr(T.post.body_html,T.truncateAt,T.truncateTo):null),typeof window!="undefined"&&window.history.replaceState&&(Object(d.getQueryItem)("autoPlay")==="true"&&(window.history.replaceState({},document.title,Object(d.updateQuery)({autoPlay:null})),this.state.autoPlay=!0),Object(d.getQueryItem)("play_audio")==="true"&&(window.history.replaceState({},document.title,Object(d.updateQuery)({play_audio:null})),this.state.autoPlayVoiceOver=!0)),this.containerRef=Object(e.createRef)(),this.shareDialogRef=Object(e.createRef)(),this.podcastCommentInput=Object(e.createRef)(),this.shouldShowRecommendCta=at(T.pub,T.user),this.subscribeModalWrapper=Object(e.createRef)();const qe=(typeof window!="undefined"&&window._preloads.publicationSettings||{}).enable_post_page_conversion===!0;this.shouldShowSubscribePrompt=T.post.type==="newsletter"&&qe&&!T.disableSubscribePrompt&&!T.paywall&&!T.freeSignup&&!T.user&&!xe,this.subscribePromptVariant=this.shouldShowSubscribePrompt?(ve=this.context.getExperimentVariant("subscribe_prompt_position"))!=null?ve:"control":null}loadReactors(){return yi(this,null,function*(){const T=yield h.a.get(`/api/v1/post/${this.props.post.id}/reactors`);this.setState({reactors:T.body})})}componentDidMount(){return yi(this,null,function*(){this.props.post.type==="podcast"&&this.state.activeTab==="comments"&&Object(E.canSeeComments)(this.props.user,this.props.post)&&this.loadComments(),this.props.paywall&&!this.props.postPreview&&Object(f.i)(f.a.POST_PAYWALL_SHOWN,{post_id:this.props.post.id,post_audience:this.props.post.audience,post_type:this.props.post.type,user:this.props.user}),this._triggerShare=()=>this.triggerShare(),this.containerRef.current.addEventListener("share-post",this._triggerShare),this.props.post&&this.loadReactors(),Math.random()<.001&&Object(f.m)({post:this.props.post})})}componentWillUnmount(){this._triggerShare&&this.containerRef.current.removeEventListener("share-post",this._triggerShare)}loadComments(){return yi(this,null,function*(){const T={all_comments:!0,sort:this.state.commentSort};try{this.setState({podcastComments:null});const _=yield h.a.get(`/api/v1/post/${this.props.post.id}/comments`).query(T);this.setState({podcastComments:_.body.comments})}catch(_){alert(Object(A.getNetworkErrorMessage)(_))}})}triggerShare({fromEmail:T}={}){T?this.shareDialogRef.current.fromEmail():this.shareDialogRef.current.open()}onBottomReached(T){this.state.bottomReached||this.props.postPreview||(this.setState({bottomReached:!0}),Object(f.j)({post:this.props.post,hasPaywall:T,surface:"publication"}))}shouldShowUFI(){const{fromPostPage:T,user:_,pub:J,getSettingFor:oe}=this.props,{canShowSubscribeFooterAfterPost:ve}=this.state;return T&&ve?Ct(J,_,oe("payment_pledges_enabled"),this.shouldShowRecommendCta):!1}shouldTrackPaywallPostSeen(){const T=document.createElement("div");T.innerHTML=this.props.post.body_html;const _=this.props.pub.post_preview_limit||E.DEFAULT_PREVIEW_LIMIT;let J="",oe=!1;for(let ve=T.childNodes.length-1;ve>=0;ve--)if(J+=T.childNodes[ve].textContent,J.length>_){oe=!0;break}return oe}render({commentsEnabled:T,user:_,pub:J,post:oe,freeSignup:ve,freeSignupEmail:xe,reaction_token:Ke,invisible:qe,paywall:vt,onChange:It,hideTitle:un,noTitleLink:On,showComments:dn,fromPostPage:In,freeTrialCoupon:Qn,showRestackModal:dr},{activeTab:Gr,loadedWithHeaderLink:Kr,truncated:eo,coupon:qr,autoPlay:so,autoPlayVoiceOver:oo,podcastComments:ti,commentSort:_r,addedPodcastComments:To,reactors:Co}){var Ei,ni,pi,Bi,_i,Qo;const ci=Object(y.default)("like_posts_enabled"),Xi=Object(y.default)("enable_feed"),Ri=(_==null?void 0:_.name)?`${Object(E.guessFirstName)(_.name)}, the`:"The";let yo=null;(_&&(_.is_subscribed||_.is_free_subscribed)||ve||J.podcast_feed_url||((ni=(Ei=oe.section)==null?void 0:Ei.podcastSettings)==null?void 0:ni.podcast_feed_url))&&(yo=Object(d.getPodcatcherSetupUrl)(J));const go=!vt||vt&&this.shouldTrackPaywallPostSeen(),Di=oe.type==="video"&&(vt?G.d:bi.a),Ui=oe.type==="podcast"&&T,Ki=oe.comment_count+To,Mi=this.shouldShowUFI(),ma=mr(oe);let Fi="paid subscribers";return oe.audience==="founding"&&(Fi=`subscribers in the ${(pi=Object(r.getFoundingTierName)(J))!=null?pi:"Founding Member"} plan`),Object(e.h)("article",{className:c()(`typography ${oe.type}-post post`,{"tw-p-0":oe.type==="podcast"}),ref:this.containerRef},(_==null?void 0:_.is_contributor)&&(oe==null?void 0:oe.id)&&(oe==null?void 0:oe.type)==="page"&&Object(e.h)(C.a,{variant:"themed-secondary",href:Object(b.getEditPostUrlById)(J,oe.id,{back:document.location.href}),localNavigation:!1,leftIcon:Object(e.h)(l.a,{size:20})},"Edit"),Object(e.h)(Ur,{post:oe,user:_,onChange:It}),Object(e.h)(zt.c,{ref:this.shareDialogRef,user:_,pub:J,post:oe,reaction_token:Ke}),this.shouldShowSubscribePrompt&&Object(e.h)(ar,{pub:J,post:oe,variant:(Bi=this.subscribePromptVariant)!=null?Bi:"control"}),oe.videoUpload&&Di&&Object(e.h)(Di,{mediaUpload:oe.videoUpload,pub:J,post:oe,autoPlay:so,restorePlaybackLocation:!0,reaction_token:Ke}),oe.type==="podcast"?Object(e.h)(e.Fragment,null,Object(e.h)(sn,{bylinesEnabled:J.bylines_enabled,commentCount:Ki,commentsEnabled:T,freeSignupEmail:xe,isFreeSignup:ve,isLikesEnabled:ci,isPaywall:vt,post:oe,pub:J,magicToken:Ke,renderEditButton:()=>Object(e.h)(Gt.a,{pub:J,post:oe,iconHeight:18,user:_,showUpdatedIcons:!0,dropdownClassName:"tw-ml-2",iconClassName:"tw-block tw-stroke-pub-primary-text"}),user:_,onChange:It,onClickCommentButton:this.onCommentButtonClicked,onTopReached:this.onTopReached}),Ui&&Object(e.h)(ur,{activeTab:Gr,loadedWithHeaderLink:Kr,commentCount:Ki,onClickTab:this.handleClickTab})):Object(e.h)(e.Fragment,null,Object(e.h)(Jn,{user:_,pub:J,post:oe,isOnPostPage:!0,freeSignup:ve,freeSignupEmail:xe,reaction_token:Ke,allowEdit:!0,showShare:!0,showSubtitle:!0,showPhoto:!0,hideTitle:un,noTitleLink:On,onChange:It,hideDate:oe.type==="page",hideAudience:oe.type==="page",showReactions:ci,showComments:dn,showLabel:!0,showUpdatedIcons:!0,fromPostPage:In,onClickCommentButton:this.onCommentButtonClicked,reactors:Co,showRestackModal:dr}),!qe&&go&&Object(e.h)(ie.a,{onVisible:()=>this.onTopReached(vt)}),oe.type==="podcast"&&(vt&&!Object(r.podcastPostIsFreePreview)(oe)?Object(e.h)(G.c,{pub:J,post:oe,duration:oe.podcast_duration,paywallAudience:Fi}):Object(e.h)(pe.a,{feature:"Podcast",pub:J,src:oe.podcast_url,duration:oe.podcast_duration,autoPlay:so||Object(A.getUrlHash)()==="play",metricsPost:oe,addToPodcastLink:yo})),(oe.has_voiceover||!!oe.voiceoverUpload)&&Object(e.h)(ue.VoiceoverPlayer,{pub:J,post:oe,mediaUploadId:oe.voiceover_upload_id,duration:(_i=oe.voiceoverUpload)==null?void 0:_i.duration,autoPlay:oo,href:oe.canonical_url,isPaywalled:!oe.voiceover_upload_id}),!oe.voiceoverUpload&&oo&&ma&&Object(e.h)(Dr,{postId:oe.id,onClose:()=>{Object(f.i)(f.a.LISTEN_TO_THIS_POST_MODAL_DISMISSED,{post_id:oe.id}),this.setState({autoPlayVoiceOver:!1})}})),(oe.type!=="podcast"||Gr==="details"||!T)&&Object(e.h)("div",{className:c()({"container container--podcast-post container--podcast-post-with-ufi":oe.type==="podcast"})},Object(e.h)("div",{className:"available-content"},Object(e.h)(ho.a,{html:eo||oe.body_html,pub:J,trackSelection:!0,user:_,freeSignup:ve,freeSignupEmail:xe,post:oe,paywall:vt,showing_behind_paywall:!!oe.post_paywall_content_for_google})),oe.post_paywall_content_for_google&&Object(e.h)("div",{className:"paywall-content"},Object(e.h)(ho.a,{html:oe.post_paywall_content_for_google,pub:J,trackSelection:!1,user:_,freeSignup:ve,freeSignupEmail:xe,post:oe,paywall:vt})),!qe&&go&&Object(e.h)(ie.a,{onVisible:()=>this.onBottomReached(vt)}),vt&&!oe.post_paywall_content_for_google?Object(e.h)(e.Fragment,null,Object(e.h)(G.b,pa({user:_,freeSignupEmail:xe,freeSignup:ve,publication:J,post:oe,fromPostPage:In,coupon:this.props.paywall===!0&&this.props.pub.paywall_free_trial_enabled?Qn:null},Object.assign({title:`${oe.type==="video"&&((Qo=oe.videoUpload)==null?void 0:Qo.preview_duration)>0?"The full":"This"} ${Object(E.getPrintedPostType)(oe.type)} is for ${Fi}`,reauthenticationTitle:"To read this, please re-authenticate."},vt))),Object(e.h)(Vo,{post:oe})):eo?Object(e.h)("p",null,Object(e.h)(ne.b,{className:"expander",onClick:()=>this.setState({truncated:null})},"+ ",I`show full post`)):!["page"].includes(oe==null?void 0:oe.type)&&Object(e.h)(e.Fragment,null,Mi&&Object(e.h)(Dn,{pub:J,post:oe,user:_,freeSignup:ve,freeSignupEmail:xe}),!Mi&&this.shouldShowRecommendCta&&Object(e.h)(qo,{pub:J}),Xi?Object(e.h)("div",{className:"post-footer"},Object(e.h)(me.d,{post:oe,pub:J,user:_,onChange:It,postReactionToken:Ke,showRestackModal:dr})):Object(e.h)("div",{className:"post-footer use-separators"},Object(e.h)(yr,{additionalCommentCount:To,user:_,pub:J,post:oe,showReactions:ci,showComments:dn,reaction_token:Ke,showShare:!0,onChange:It,shareTooltipText:_&&_.is_admin&&!J.has_posts&&oe.slug&&oe.slug!=="----THEME-PREVIEW----"&&Object(e.h)("span",null,Ri," next step is to ",Object(e.h)("b",null,"tell everyone!")),fromPostPage:In,onClickCommentButton:this.onCommentButtonClicked,reactors:Co})),Object(e.h)(Vo,{post:oe})),oe.show_guest_bios&&oe.type!=="podcast"&&Object(e.h)(po,{user:_,pub:J,post:oe})),oe.type==="podcast"&&Gr==="comments"&&T&&Object(e.h)("div",{className:"container tw-py-12"},Object(e.h)(Y,{comments:ti,expectedCommentCount:Ki,post:oe,pub:J,sort:_r,token:Ke,user:_,inputRef:this.podcastCommentInput,onAddComment:this.handleAddPodcastComment,onUpdateSort:this.handleUpdateSortPodcastComments,onUpdateComment:this.handleUpdatePodcastComments})))}}Si(ln,"contextType",D.a),Si(ln,"displayName","Post");const yn=Object(W.d)(ln),Dn=({pub:j,post:T,user:_,freeSignup:J,freeSignupEmail:oe,overridePledgesEnabled:ve})=>{const{exposeExperiment:xe,getExperimentVariant:Ke}=Object(P.d)(),qe=Object(W.c)(),vt=j.payments_state==="disabled"&&!j.invite_only&&(qe.getSettingFor("payment_pledges_enabled")||ve),It=j.payments_state==="enabled"&&(_==null?void 0:_.is_free_subscribed)&&!(_==null?void 0:_.is_subscribed)?"paid_upsell":vt&&(_==null?void 0:_.is_free_subscribed)&&!(_==null?void 0:_.is_pledged)?"pledge_upsell":"free_upsell";Object(o.d)(()=>{Object(f.i)(f.a.POST_END_CTA_RENDERED,{pub_id:j.id,post_id:T.id,type:It})},[j.id,T.id,It]);const un=Object(E.getByLine)(j);return Object(e.h)("div",{className:"post-end-cta-full"},Object(e.h)(ie.a,{onVisible:()=>{Object(f.i)(f.a.POST_END_CTA_SEEN,{pub_id:j.id,post_id:T.id,type:It})}}),Object(e.h)("h3",null,vt&&(_==null?void 0:_.is_free_subscribed)?"Support ":"Subscribe to ",Object(e.h)("b",null,j.name)),Object(e.h)("p",{className:"end-cta-author-subs"},un?`By ${un}`:null,un&&j.rankingDetail?"\xA0\xA0\xB7\xA0\xA0":null,j.rankingDetail),j.hero_text&&Object(e.h)("p",{className:"end-cta-hero-text"},j.hero_text),vt&&(_==null?void 0:_.is_free_subscribed)&&!(_==null?void 0:_.is_pledged)?Object(e.h)(L.a,{priority:"primary-theme",onClick:()=>{Object(f.i)(f.a.POST_END_CTA_CLICKED,{type:"pledge"}),Object(A.redirect)(Object(b.getSubscribeUrl)(j,{utm_source:"post-end-cta"}),{local_navigation:!1})}},"Pledge your support"):Object(e.h)(hi.b,{pub:j,post:T,user:_,freeSignup:J,freeSignupEmail:oe,isStatic:!1,source:"post-end-cta"}))},Ln=({pub:j})=>Object(e.h)("div",{className:"post-silhouette"},Object(e.h)("div",{className:"post-silhouette-title"}),Object(e.h)("div",{className:`post-silhouette-meta ${j&&j.bylines_enabled&&j.byline_images_enabled?"with-byline-image":""}`}),Object(e.h)("div",{className:"post-silhouette-body"})),Jn=({allowEdit:j,allowSendEmail:T,allowTruncate:_,base_url:J,children:oe,className:ve,hideAudience:xe,hideDate:Ke,hideTitle:qe,hidePinning:vt,noTitleLink:It,isStatic:un,isFreePreview:On,is_draft:dn,onChange:In,post:Qn,pub:dr,reaction_token:Gr,showComments:Kr,showDatetime:eo,showEmailSent:qr,showReactions:so,showShare:oo,showSubtitle:ti,showPhoto:_r,showLabel:To,showRestack:Co,hideAuthor:Ei,user:ni,utm_source:pi,showUpdatedIcons:Bi,fromPostPage:_i,onClickCommentButton:Qo,reactors:ci,inThreadHead:Xi,publishedPost:Ri,compEndsSoon:yo,compEndedRecently:go,siteConfigValues:Di={},eligibleForTTS:Ui,showRestackModal:Ki,showIcon:Mi,isOnPostPage:ma})=>{const Fi=Object(B.c)(),Pa=Object(w.isMobile)({checkFirst4:!0}),Ca=typeof _=="number"?_:45,ka=Qn.title&&Qn.title.length>Ca,sa=dn?Qn.draft_title:Qn.title,Sa=[(Mi||Qn.type==="thread")&&Object(e.h)(zo.a,{postType:Qn.type,isStatic:un,height:15,className:Qn.type}),ka&&_?Object(E.truncateWords)(sa,Ca):sa],Na=dn?Qn.draft_subtitle:Qn.subtitle;Qn.section_id&&dr.sections&&dr.sections.length&&(Qn.section=dr.sections.find($i=>$i.id===Qn.section_id));const Mn=!["page"].includes(Qn==null?void 0:Qn.type),$r=Mn&&un&&yo&&(Di==null?void 0:Di.continue_support_cta_in_newsletter_emails),uo=mr(Qn)||Ui||Qn.voiceoverUpload,Bo=Mn&&un;let Uo;Qn.post_url_override?Uo=Qn.post_url_override:un?Uo=m.Substitutions.POST_TITLE_URL:Uo=`${Object(b.getPostUrl)(dr,Qn)}${pi?`?utm_source=${pi}`:""}`;const Hi=`${dr.base_url+(Qn.section?Object(b.getSectionUrl)(dr,{section:Qn.section}):"")}/?utm_source=substack&utm_medium=menu`;return Object(e.h)("div",{className:c()("post-header",ve)},To&&(dr.parent_publication||Qn.section)&&Object(e.h)(R.a,{className:"post-label"},Object(e.h)(U.b.Meta,{as:"a",size:14,href:Hi},dr.parent_publication?dr.name:Qn.section.name)),$r&&Object(e.h)(mt,{post:Qn,compAlreadyExpired:go}),!qe&&Object(e.h)("h1",{className:c()("post-title",Qn.is_published?"published":Qn.type==="adhoc_email"?"adhoc":Qn.type==="restack"?"restack":"unpublished")},It?Sa:Object(e.h)("a",{href:Uo},Sa)),ti&&Na&&Object(e.h)("h3",{className:"subtitle"},Na),ma&&!un&&Fi.getConfigFor("enable_feed")?Object(e.h)(R.b,{paddingBottom:16},Object(e.h)(R.b,{paddingY:16},Object(e.h)(co,{post:Qn,pub:dr})),Pa?_i&&Object(e.h)(me.b,{post:Qn,pub:dr,user:ni,isStatic:un,postReactionToken:Gr,onChange:In,allowEdit:j,hidePinning:vt,showEmailSent:qr,allowSendEmail:T,hideComments:!Kr,onCommentsClick:Qo,showRestackModal:Ki}):Object(e.h)(me.d,{post:Qn,pub:dr,user:ni,onChange:In,postReactionToken:Gr,showRestackModal:Ki})):Object(e.h)(e.Fragment,null,Mn&&!un&&!Ri&&!Xi?Object(e.h)(se,{className:"meta-subheader",pub:dr,post:Qn,user:ni,showDate:!Ke,showDatetime:eo,isStatic:un,postReactionToken:Gr,onChange:In,allowEdit:j,hidePinning:vt,showEmailSent:qr,allowSendEmail:T,allowMobileFooter:_i,reactors:ci,onCommentsClick:Qo,showRestackModal:Ki}):Mn&&!un&&Ri?Object(e.h)(me.c,{post:Qn,pub:dr,user:ni,style:"compressed",labelStyle:"counts-or-none",postReactionToken:Gr,showEmailSent:qr,hideShare:!oo||Qn.type==="restack",hideComments:Qn.type==="restack",hideSavePost:Qn.type==="restack",showPreamble:!0,allowEdit:j,allowSendEmail:T,editButtonIsLast:!0,preambleConfig:{showAudience:!xe,showDate:!Ke,showDatetime:eo,showAuthor:!Ei},position:"publisher-post-list"}):Xi&&!un?Object(e.h)(me.c,{post:Qn,pub:dr,user:ni,style:"compressed",labelStyle:"counts-or-none",postReactionToken:Gr,hideSavePost:!0,showPreamble:!0,allowEdit:j,allowSendEmail:T,editButtonIsLast:!0,onChange:In,preambleConfig:{showAudience:!xe,showDate:!Ke,showDatetime:eo,showAuthor:!Ei},position:"publisher-post-list"}):Mn?Object(e.h)(Sr,{user:ni,pub:dr,post:Qn,showDate:!Ke,showDatetime:eo,showEmailSent:qr,showAudience:!xe,showReactions:!Bo&&so,showComments:!Bo&&Kr,showShare:!Bo&&oo,showRestack:!Bo&&Co,reaction_token:Gr,onChange:In,isStatic:un,isFreePreview:On,sharedShareDialog:!0,base_url:J,allowSendEmail:T,allowEdit:j,showAuthor:!Ei,showPhoto:_r,hidePinning:vt,showUpdatedIcons:Bi,inThreadHead:Xi,fromPostPage:_i,onClickCommentButton:Qo,reactors:ci}):Object(e.h)("div",{className:"spacer",style:{height:24}}),Mn&&Bo&&Object(e.h)(me.e,{customization:{showShare:oo,showComments:Kr,showReactions:so,showListen:!Co&&!On&&uo,showSave:!Co,showRestack:Co}})),oe)};class rr extends e.Component{constructor(){super(...arguments);Si(this,"onClick",T=>{const _=this.getLink();this.props.onClick&&this.props.onClick(),!this.props.disableInteractive&&Object(A.redirect)(_,{event:T})}),Si(this,"getLink",()=>{var T;return this.props.linkToComments?Object(b.getPostUrl)(this.props.pub,this.props.post,{comments:this.props.linkToComments}):((T=this.props.post)==null?void 0:T.type)==="video"?Object(d.updateQuery)(this.props.post.canonical_url,{autoPlay:!0}):this.props.utm?Object(b.pathWithQuery)(this.props.post.canonical_url,this.props.utm):this.props.post.canonical_url})}getMaxTitleLength(){let T=this.props.maxTitleLength;return typeof T=="function"&&(T=T(this)),(typeof T!="number"||!(T>0))&&(T=140),T}getMaxDescriptionLength(){let T=this.props.maxDescriptionLength;return typeof T=="function"&&(T=T(this)),(typeof T!="number"||!(T>0))&&(T=152),T}render({className:T,post:_,pub:J,user:oe,showDate:ve,hideShare:xe,authorInMeta:Ke,imageAssetSize:qe,imageAspectRatio:vt,onChange:It,linkToComments:un,showPublicationName:On,isBigPost:dn,showPins:In,hideDescription:Qn,hideAuthor:dr,isBelowTheFold:Gr}){const Kr=this.getLink(),eo=typeof window=="undefined"||Object(y.default)("like_posts_enabled"),qr=!dr&&!Ke&&(J==null?void 0:J.bylines_enabled)&&Object(E.getPrintedByline)(J,_),so=this.props.showCoverImage&&(Object(i.getCoverImageUrl)(_)||!this.props.coverImageOptional);!qe&&!vt&&(vt=1.32);const oo=qe||336,ti=Object(E.getBylineUsers)(_);return Object(e.h)("div",{className:c()("post-preview",T,{"has-image":so,"has-author-line":!Ke}),onClick:this.onClick},so&&Object(e.h)(oi,{className:"post-preview-image",imageAspectRatio:vt,post:_,imageWidth:oo,isBelowTheFold:Gr}),Object(e.h)("div",{className:"post-preview-content"},(J==null?void 0:J.parent_publication)&&dn&&Object(e.h)(R.a,{className:"post-label"},Object(e.h)(U.b.Meta,{as:"a",size:14,href:`${J.base_url}/?utm_source=substack&utm_medium=menu`},J.name)),Object(e.h)("a",{href:Kr,className:`post-preview-title ${_.type}`},_.type==="thread"&&Object(e.h)(Dt.default,{height:dn?26:17,className:"thread"}),_.type==="podcast"&&Object(e.h)(pt.default,{height:dn?26:17,className:"podcast"}),_.type==="video"&&Object(e.h)(Jt.default,{height:dn?26:19,width:dn?26:19,className:"video"}),un&&_.type!=="thread"&&"Comments on: ",Object(E.truncateWords)(_.title,this.getMaxTitleLength())),!Qn&&Object(e.h)("a",{href:Kr,className:"post-preview-description"},u()(Object(E.truncateWords)(_.description,this.getMaxDescriptionLength()))),qr&&Object(e.h)("div",{className:"post-preview-author"},ti.length>0?Object(E.oxfordComma)(ti.map(_r=>_r.inviteAccepted?Object(e.h)(Ye.b,{subject:_r,utmSource:"byline"},Object(e.h)("a",{href:Object(d.getProfileUrl)(_r,J),onClick:To=>To.stopPropagation()},_r.name)):_r.name)):Object(E.getPrintedByline)(J,_)),J&&Object(e.h)(me.c,{pub:J,post:_,user:oe,hideShare:xe,hideReactions:!eo,hideComments:!Object(E.showCommentsOnPost)({publication:J,post:_}),allowEdit:!0,editButtonIsLast:!0,labelStyle:"counts-or-none",style:"compressed",onChange:It,showPreamble:!0,preambleConfig:{showPins:In,showAudience:!0,showDate:ve,showAuthor:!dr&&!qr&&Ke,showPublicationName:On},position:"post-list"})))}}Si(rr,"contextType",B.a);function Cr({post:j,pub:T,user:_,isSignedIn:J,publicationSettings:oe}){var ve,xe,Ke;const qe=Object(P.d)(),vt=_.is_subscribed,It=_.is_subscribed||_.is_free_subscribed,un=(j==null?void 0:j.audience)?Object(i.userHasFullAccessToPost)(_,j):!0,On=_.email,dn=(j==null?void 0:j.free_unlock_required)&&!It,In=!1,dr=!j.hidden&&(vt||j&&!Object(i.isPaidAudience)(j.audience)&&!In||j&&!j.slug&&!In)?!1:In?{email_form:!0,autoFocus:!1,title:`Subscribe for free to ${T.name} to unlock this ${j.type==="podcast"?"episode":"post"}`}:!0;let Gr="paid subscribers";j.audience==="founding"&&(Gr=`subscribers in the ${(ve=Object(r.getFoundingTierName)(T))!=null?ve:"Founding Member"} plan`);const Kr=at(T,_),eo=!dr&&!j.hidden&&j.body_html&&Ir(j.body_html)&&Ct(T,_,oe==null?void 0:oe.payment_pledges_enabled,Kr),qr=j.type==="video"&&(dr?G.d:bi.a);Object(M.b)();const so=Object(o.j)();Object(o.d)(()=>{const To="post viewer",Co=Boolean(dr);Object(f.k)({post:j,hasPaywall:Co,surface:To});let Ei=!1;const ni=()=>{if(!Ei){const pi=so.current;pi&&pi.getBoundingClientRect().top<window.innerHeight&&(Ei=!0,Object(f.j)({post:j,hasPaywall:Co,surface:To}))}};return window.addEventListener("scroll",ni,{passive:!0,capture:!0}),()=>{window.removeEventListener("scroll",ni,{capture:!0})}},[j.id]);const{publishedBylines:oo}=j,ti=600,_r=Object(o.j)();return Object(o.d)(()=>{if(!(_r==null?void 0:_r.current)||!(_==null?void 0:_.email))return;const To=_r.current.querySelectorAll('article.post input[type="email"]');for(const Co of To)Co.value||(Co.value=_.email)},[j.id,_.email]),Object(e.h)(R.b,{as:"article",className:c()(`typography ${j.type}-post post post-viewer-post`),gap:16},j.videoUpload&&qr&&Object(e.h)(R.a,{justifyContent:"center"},Object(e.h)(R.a,{justifyContent:"center",flex:"grow",style:{maxWidth:700}},Object(e.h)(qr,{mediaUpload:j.videoUpload,pub:T,post:j,restorePlaybackLocation:!0}))),Object(e.h)(R.a,{justifyContent:"center"},Object(e.h)(R.b,{gap:16,style:{maxWidth:ti},flex:"grow"},Object(e.h)(R.b,{gap:4,alignItems:"start"},Object(e.h)(U.b.Meta,{as:"a",href:Object(b.getBaseUrl)(T),target:"_blank",decoration:"hover-underline"},T.name),Object(e.h)(R.b,{gap:8,alignItems:"start"},Object(e.h)(U.b.H2,{as:"a",href:Object(b.getPostUrl)(T,j),target:"_blank",size:32,lineHeight:40,decoration:"hover-underline"},j.title),j.type!=="podcast"&&j.subtitle&&Object(e.h)(U.b.B3,{color:"secondary"},j.subtitle))),oo.length>0&&Object(e.h)(co,{post:j,pub:T}),Object(e.h)("hr",{style:"margin: 16px 0"}))),!J&&Object(e.h)(R.b,{borderBottom:"detail",paddingBottom:24,gap:16,style:{maxWidth:ti,margin:"0 auto"}},Object(e.h)(R.a,{justifyContent:"space-between",gap:16,alignItems:"center"},Object(e.h)(er.a,{pub:T,size:48}),Object(e.h)(R.b,{flex:"grow"},Object(e.h)(U.b,{font:"display",size:20,color:"primary",weight:700},T.name),Object(e.h)(U.b.Meta,null,"1000s of subscribers")),Object(e.h)(L.a,{href:Object(b.getSubscribeUrl)(T,{addBase:!0,params:{utm_source:"substack",utm_medium:"web",utm_campaign:"post-viewer",next:document.location.toString()}})},"Subscribe")),Object(e.h)(U.b,{size:14,color:"secondary"},T.hero_text)),Object(e.h)("div",{className:c()({"container container--podcast-post container--podcast-post-with-ufi":j.type==="podcast"}),ref:_r},j.type==="podcast"&&Object(e.h)(R.b,{paddingBottom:32},Object(e.h)(Hn,{post:j,pub:T,user:_,isPaywall:Boolean(dr)})),(j.has_voiceover||!!j.voiceoverUpload)&&Object(e.h)(sr,null,Object(e.h)(ue.VoiceoverPlayer,{pub:T,post:j,mediaUploadId:j.voiceover_upload_id,duration:(xe=j.voiceoverUpload)==null?void 0:xe.duration,href:j.canonical_url,isPaywalled:!j.voiceover_upload_id})),Object(e.h)("div",{className:"available-content reader2-post-content"},Object(e.h)(ho.a,{html:j.body_html,pub:T,trackSelection:!0,user:_,freeSignup:It,freeSignupEmail:On,post:j,paywall:dr,showing_behind_paywall:!!j.post_paywall_content_for_google})),Object(e.h)(sr,null,eo&&Object(e.h)(Dn,{user:_,pub:T,freeSignup:It,freeSignupEmail:On,post:j,overridePledgesEnabled:oe==null?void 0:oe.payment_pledges_enabled}),!eo&&Kr&&Object(e.h)(qo,{pub:T})),Object(e.h)(sr,{paddingY:24,borderTop:"detail",ref:so},dr&&Object(e.h)(G.b,pa({user:_,freeSignupEmail:On,freeSignup:It,publication:T,post:j,title:`${j.type==="video"&&((Ke=j.videoUpload)==null?void 0:Ke.preview_duration)>0?"The full":"This"} ${Object(E.getPrintedPostType)(j.type)} is for ${Gr}`,reauthenticationTitle:"To read this, please re-authenticate."},dr)),Object(e.h)(br,{post:j,pub:T,user:_}))))}const sr=Object(s.forwardRef)((j,T)=>Object(e.h)(R.b,pa({style:{width:"var(--page-width)",margin:"0 auto"},ref:T},j))),mo=({className:j,pub:T})=>Object(e.h)("div",{className:`post-preview-silhouette has-image ${j||""}`},Object(e.h)("div",{className:"post-preview-silhouette-image"}),Object(e.h)("div",{className:"post-preview-silhouette-content"},Object(e.h)("div",{className:"post-preview-silhouette-title"}),Object(e.h)("div",{className:"post-preview-silhouette-description"}),T&&T.bylines_enabled&&Object(e.h)("div",{className:"post-preview-silhouette-author"}),Object(e.h)("div",{className:"post-preview-silhouette-meta"}))),po=({user:j,pub:T,post:_})=>{const J=Object(E.getBylineUsers)(_).filter(oe=>oe.is_guest);return J.length===0?null:Object(e.h)("div",{class:"post-contributor-footer"},Object(e.h)("div",{class:"container-border"}),J.map(oe=>{const ve=Object(E.guessFirstName)(oe.name);let xe=oe.primaryPublicationSubscribeUrl;xe&&(j==null?void 0:j.email)&&(xe=Object(d.updateQuery)(xe,{email:j.email,autoSubmit:!0,utm_source:"substack",utm_campaign:"guest_post_bio",utm_medium:"web"}));const Ke=Object(d.updateQuery)(Object(b.getReaderProfileUrl)(oe),{utm_campaign:"guest_post_bio",utm_medium:"web"}),qe=ko.c.hasCustomProfilePhoto(oe);return Object(e.h)("div",{className:c()("post-contributor-bio",{"post-contributor-bio-no-text":!oe.bio}),"data-user-id":oe.id},Object(e.h)("table",{cellpadding:"0",cellspacing:"0",className:"post-contributor-bio-table"},Object(e.h)("tr",{className:"post-contributor-bio-table-row"},qe&&Object(e.h)("td",{className:"post-contributor-bio-userhead-cell post-contributor-bio-userhead-cell-web"},oe.inviteAccepted?Object(e.h)(Ye.b,{subject:oe,utmSource:"byline"},Object(e.h)(ko.c,{size:52,user:j,pub:T,subject:oe})):Object(e.h)(ko.c,{size:52,subject:oe,noLink:!0})),Object(e.h)("td",{className:"post-contributor-bio-body-cell post-contributor-bio-body-cell-web"},Object(e.h)("div",{className:"post-contributor-bio-body"},oe.bio&&Object(e.h)("div",{className:"post-contributor-bio-preamble"},"A guest post by"),Object(e.h)("table",{cellpadding:"0",cellspacing:"0",className:"post-contributor-bio-body-table"},Object(e.h)("tr",{className:"post-contributor-bio-body-table-row"},Object(e.h)("td",{className:"post-contributor-bio-copy-cell"},!oe.bio&&Object(e.h)("div",{className:"post-contributor-bio-preamble"},"A guest post by"),Object(e.h)(R.c,{gap:4,alignItems:"center",paddingBottom:4},oe.inviteAccepted?Object(e.h)(Ye.b,{subject:oe,utmSource:"byline"},Object(e.h)("a",{className:"post-contributor-bio-title no-margin",href:Ke,native:!0},oe.name)):Object(e.h)(R.c,{className:"post-contributor-bio-title no-margin unaccepted"},oe.name),Object(e.h)(Z.a,{size:"sm",tier:oe.bestseller_tier,userId:oe.id})),oe.bio&&Object(e.h)("div",{className:"post-contributor-bio-text"},oe.bio)),Object(e.h)("td",{className:"post-contributor-bio-controls-cell post-contributor-bio-controls-cell-web"},Object(e.h)("div",{className:"post-contributor-bio-controls"},xe&&Object(e.h)("a",{className:"post-contributor-bio-subscribe-button button primary",href:xe,native:!0},Object(e.h)("span",{className:"post-contributor-bio-subscribe-button-label"},"Subscribe to ",ve)))))))))))}))};class Hr extends e.Component{render({renderPost:T,posts:_,hideFirstHeading:J,className:oe,top:ve,children:xe}){return _=_.slice(0).sort((Ke,qe)=>v()(qe.post_date)-v()(Ke.post_date)),Object(e.h)("div",{className:`calendared-post-list ${oe||""}`},ve,Object(E.flat)(this.renderByHeading(_,"year",(Ke,qe)=>[!qe.isSameNow("year")&&Object(e.h)("h2",{date:qe},qe.year()),this.renderByHeading(Ke,"month",(vt,It)=>[!(It.isSameNow("year")&&It.isSameNow("month"))&&Object(e.h)("h3",{date:qe},Object(E.get_month_name)(It)," ",!It.isSameNow("year")&&It.year()),vt.map(un=>T(un,_.indexOf(un),_))])]),1/0).filter(Ke=>Ke).filter((Ke,qe,vt)=>!J||qe>=vt.findIndex(It=>!It.props||!It.props.date)),xe)}renderByHeading(T,_,J){return Array.from(Object(E.group_by)(T,oe=>v()(oe.post_date)[_]())).sort((oe,ve)=>ve[0]-oe[0]).map(([,oe])=>J(oe,v()(oe[0].post_date)))}}function Xr(j,T=1e4,_=T){if(typeof window=="undefined")return null;const J=document.createElement("div");if(J.innerHTML=j,J.textContent.length<T||J.childNodes.length<=1)return null;do J.removeChild(J.lastChild);while(J.childNodes.length>1&&J.textContent.length>_);return J.innerHTML}function Ir(j,T=500){if(typeof window=="undefined")return!1;const _=document.createElement("div");_.innerHTML=j;let J="",oe=!1;for(let ve=_.childNodes.length-1;ve>=0;ve--){const xe=_.childNodes[ve];if(Object(A.hasClass)(xe,"button-wrapper")||Object(A.hasClass)(xe,"subscription-widget-wrap")){oe=!0;break}if(J+=xe.textContent,J.length>T)break}return!oe}function Ur({post:j,user:T,onChange:_}){const{onSave:J}=Object(me.n)({post:j,isSaved:!1});return Object(o.d)(()=>{if(new URL(location).searchParams.get("action")==="save"&&(history.replaceState({},"",Object(d.updateQuery)({action:null})),T)){const ve=J();_({post:Ra(pa({},j),{is_saved:ve})})}},[]),null}function mr(j){var T;return(T=j.audio_items)==null?void 0:T.some(_=>_.type==="tts")}const ro=new Intl.DateTimeFormat(void 0,{dateStyle:"medium"});function co({post:j,pub:T}){const{publishedBylines:_=[]}=j,J=T.bylines_enabled&&Object(E.getPrintedByline)(T,j)&&j.type!=="podcast",oe=J&&T.byline_images_enabled&&_.some(({photo_url:xe})=>Boolean(xe)),ve=j.type!=="page";return Object(e.h)(R.a,{justifyContent:"start",gap:12,alignItems:"center"},oe&&Object(e.h)(R.a,null,Object(e.h)(S.c,{faces:_,hoverProfiles:!0,maximum:4})),Object(e.h)(R.b,null,J&&Object(e.h)(U.b.Meta,{color:"pub-primary-text"},Object(e.h)(Fe.a,{array:_,formatter:xe=>xe.inviteAccepted?Object(e.h)(Ye.b,{subject:xe,utmSource:"byline"},Object(e.h)(U.b,{as:"a",href:Object(b.getReaderProfileUrl)(xe),decoration:"hover-underline"},xe.name)):Object(e.h)(U.b,null,xe.name),limit:4})),Object(e.h)(R.a,{gap:4},Object(e.h)(U.b.Meta,{color:"pub-secondary-text"},ro.format(v()(j.post_date).toDate())),ve&&Object(i.isPaidAudience)(j.audience)&&Object(e.h)(U.b.Meta,{color:"pub-secondary-text"},"\u2219 Paid"))))}},function($,n,t){"use strict";t.d(n,"a",function(){return G});var e=t(2),s=t(29),o=t(91),a=t(52),c=t(147),l=t(55),p=t(79),h=t(102),m=t(61);function g(V){let k={called:!1};return(...K)=>{if(!k.called)return k.called=!0,V(...K)}}var v=t(96);function O(V,...k){V&&k.length>0&&V.classList.add(...k)}function u(V,...k){V&&k.length>0&&V.classList.remove(...k)}var r=(V=>(V.Ended="ended",V.Cancelled="cancelled",V))(r||{});function i(V,k){let K=Object(v.a)();if(!V)return K.dispose;let{transitionDuration:Y,transitionDelay:ee}=getComputedStyle(V),[ae,he]=[Y,ee].map(me=>{let[Ye=0]=me.split(",").filter(Boolean).map(se=>se.includes("ms")?parseFloat(se):parseFloat(se)*1e3).sort((se,ie)=>ie-se);return Ye});if(ae+he!==0){let me=[];me.push(K.addEventListener(V,"transitionrun",Ye=>{Ye.target===Ye.currentTarget&&(me.splice(0).forEach(se=>se()),me.push(K.addEventListener(V,"transitionend",se=>{se.target===se.currentTarget&&(k("ended"),me.splice(0).forEach(ie=>ie()))}),K.addEventListener(V,"transitioncancel",se=>{se.target===se.currentTarget&&(k("cancelled"),me.splice(0).forEach(ie=>ie()))})))}))}else k("ended");return K.add(()=>k("cancelled")),K.dispose}function d(V,k,K,Y){let ee=K?"enter":"leave",ae=Object(v.a)(),he=Y!==void 0?g(Y):()=>{};ee==="enter"&&(V.removeAttribute("hidden"),V.style.display="");let me=Object(a.a)(ee,{enter:()=>k.enter,leave:()=>k.leave}),Ye=Object(a.a)(ee,{enter:()=>k.enterTo,leave:()=>k.leaveTo}),se=Object(a.a)(ee,{enter:()=>k.enterFrom,leave:()=>k.leaveFrom});return u(V,...k.enter,...k.enterTo,...k.enterFrom,...k.leave,...k.leaveFrom,...k.leaveTo,...k.entered),O(V,...me,...se),ae.nextFrame(()=>{u(V,...se),O(V,...Ye),i(V,ie=>(ie==="ended"&&(u(V,...me),O(V,...k.entered)),he(ie)))}),ae.dispose}function b(){let[V]=Object(e.useState)(v.a);return Object(e.useEffect)(()=>()=>V.dispose(),[V]),V}function w({container:V,direction:k,classes:K,onStart:Y,onStop:ee}){let ae=Object(c.a)(),he=b(),me=Object(p.a)(k);Object(l.a)(()=>{let Ye=Object(v.a)();he.add(Ye.dispose);let se=V.current;if(!!se&&me.current!=="idle"&&!!ae.current)return Ye.dispose(),Y.current(me.current),Ye.add(d(se,K.current,me.current==="enter",ie=>{Ye.dispose(),Object(a.a)(ie,{[r.Ended](){ee.current(me.current)},[r.Cancelled]:()=>{}})})),Ye.dispose},[k])}var E=t(40);function S(V=""){return V.split(" ").filter(k=>k.trim().length>1)}let P=Object(e.createContext)(null);P.displayName="TransitionContext";var D=(V=>(V.Visible="visible",V.Hidden="hidden",V))(D||{});function W(){let V=Object(e.useContext)(P);if(V===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return V}function B(){let V=Object(e.useContext)(f);if(V===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return V}let f=Object(e.createContext)(null);f.displayName="NestingContext";function y(V){return"children"in V?y(V.children):V.current.filter(({el:k})=>k.current!==null).filter(({state:k})=>k==="visible").length>0}function M(V,k){let K=Object(p.a)(V),Y=Object(e.useRef)([]),ee=Object(c.a)(),ae=b(),he=Object(E.a)((ce,ue=s.b.Hidden)=>{let pe=Y.current.findIndex(({el:$e})=>$e===ce);pe!==-1&&(Object(a.a)(ue,{[s.b.Unmount](){Y.current.splice(pe,1)},[s.b.Hidden](){Y.current[pe].state="hidden"}}),ae.microTask(()=>{var $e;!y(Y)&&ee.current&&(($e=K.current)==null||$e.call(K))}))}),me=Object(E.a)(ce=>{let ue=Y.current.find(({el:pe})=>pe===ce);return ue?ue.state!=="visible"&&(ue.state="visible"):Y.current.push({el:ce,state:"visible"}),()=>he(ce,s.b.Unmount)}),Ye=Object(e.useRef)([]),se=Object(e.useRef)(Promise.resolve()),ie=Object(e.useRef)({enter:[],leave:[],idle:[]}),Ee=Object(E.a)((ce,ue,pe)=>{Ye.current.splice(0),k&&(k.chains.current[ue]=k.chains.current[ue].filter(([$e])=>$e!==ce)),k==null||k.chains.current[ue].push([ce,new Promise($e=>{Ye.current.push($e)})]),k==null||k.chains.current[ue].push([ce,new Promise($e=>{Promise.all(ie.current[ue].map(([ne,X])=>X)).then(()=>$e())})]),ue==="enter"?se.current=se.current.then(()=>k==null?void 0:k.wait.current).then(()=>pe(ue)):pe(ue)}),Oe=Object(E.a)((ce,ue,pe)=>{Promise.all(ie.current[ue].splice(0).map(([$e,ne])=>ne)).then(()=>{var $e;($e=Ye.current.shift())==null||$e()}).then(()=>pe(ue))});return Object(e.useMemo)(()=>({children:Y,register:me,unregister:he,onStart:Ee,onStop:Oe,wait:se,chains:ie}),[me,he,Y,Ee,Oe,ie,se])}function N(){}let A=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function L(V){var k;let K={};for(let Y of A)K[Y]=(k=V[Y])!=null?k:N;return K}function C(V){let k=Object(e.useRef)(L(V));return Object(e.useEffect)(()=>{k.current=L(V)},[V]),k}let R="div",U=s.a.RenderStrategy,Z=Object(s.d)(function(V,k){let Te=V,{beforeEnter:K,afterEnter:Y,beforeLeave:ee,afterLeave:ae,enter:he,enterFrom:me,enterTo:Ye,entered:se,leave:ie,leaveFrom:Ee,leaveTo:Oe}=Te,ce=ha(Te,["beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]),ue=Object(e.useRef)(null),pe=Object(m.b)(ue,k),$e=ce.unmount?s.b.Unmount:s.b.Hidden,{show:ne,appear:X,initial:q}=W(),[Ne,Qe]=Object(e.useState)(ne?"visible":"hidden"),Ze=B(),{register:tt,unregister:Ft}=Ze,Lt=Object(e.useRef)(null);Object(e.useEffect)(()=>tt(ue),[tt,ue]),Object(e.useEffect)(()=>{if($e===s.b.Hidden&&!!ue.current){if(ne&&Ne!=="visible"){Qe("visible");return}return Object(a.a)(Ne,{hidden:()=>Ft(ue),visible:()=>tt(ue)})}},[Ne,ue,tt,Ft,ne,$e]);let rn=Object(p.a)({enter:S(he),enterFrom:S(me),enterTo:S(Ye),entered:S(se),leave:S(ie),leaveFrom:S(Ee),leaveTo:S(Oe)}),ht=C({beforeEnter:K,afterEnter:Y,beforeLeave:ee,afterLeave:ae}),je=Object(h.a)();Object(e.useEffect)(()=>{if(je&&Ne==="visible"&&ue.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[ue,Ne,je]);let Le=q&&!X,rt=(()=>!je||Le||Lt.current===ne?"idle":ne?"enter":"leave")(),Pe=Object(E.a)(x=>Object(a.a)(x,{enter:()=>ht.current.beforeEnter(),leave:()=>ht.current.beforeLeave(),idle:()=>{}})),de=Object(E.a)(x=>Object(a.a)(x,{enter:()=>ht.current.afterEnter(),leave:()=>ht.current.afterLeave(),idle:()=>{}})),be=M(()=>{Qe("hidden"),Ft(ue)},Ze);w({container:ue,classes:rn,direction:rt,onStart:Object(p.a)(x=>{be.onStart(ue,x,Pe)}),onStop:Object(p.a)(x=>{be.onStop(ue,x,de),x==="leave"&&!y(be)&&(Qe("hidden"),Ft(ue))})}),Object(e.useEffect)(()=>{!Le||($e===s.b.Hidden?Lt.current=null:Lt.current=ne)},[ne,Le,Ne]);let Ie=ce,ke={ref:pe};return e.default.createElement(f.Provider,{value:be},e.default.createElement(o.a,{value:Object(a.a)(Ne,{visible:o.b.Open,hidden:o.b.Closed})},Object(s.e)({ourProps:ke,theirProps:Ie,defaultTag:R,features:U,visible:Ne==="visible",name:"Transition.Child"})))}),F=Object(s.d)(function(V,k){let ne=V,{show:K,appear:Y=!1,unmount:ee}=ne,ae=ha(ne,["show","appear","unmount"]),he=Object(e.useRef)(null),me=Object(m.b)(he,k);Object(h.a)();let Ye=Object(o.c)();if(K===void 0&&Ye!==null&&(K=Object(a.a)(Ye,{[o.b.Open]:!0,[o.b.Closed]:!1})),![!0,!1].includes(K))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[se,ie]=Object(e.useState)(K?"visible":"hidden"),Ee=M(()=>{ie("hidden")}),[Oe,ce]=Object(e.useState)(!0),ue=Object(e.useRef)([K]);Object(l.a)(()=>{Oe!==!1&&ue.current[ue.current.length-1]!==K&&(ue.current.push(K),ce(!1))},[ue,K]);let pe=Object(e.useMemo)(()=>({show:K,appear:Y,initial:Oe}),[K,Y,Oe]);Object(e.useEffect)(()=>{if(K)ie("visible");else if(!y(Ee))ie("hidden");else{let X=he.current;if(!X)return;let q=X.getBoundingClientRect();q.x===0&&q.y===0&&q.width===0&&q.height===0&&ie("hidden")}},[K,Ee]);let $e={unmount:ee};return e.default.createElement(f.Provider,{value:Ee},e.default.createElement(P.Provider,{value:pe},Object(s.e)({ourProps:Yo(vr({},$e),{as:e.Fragment,children:e.default.createElement(Z,vr(vr({ref:me},$e),ae))}),theirProps:{},defaultTag:e.Fragment,features:U,visible:se==="visible",name:"Transition"})))}),z=Object(s.d)(function(V,k){let K=Object(e.useContext)(P)!==null,Y=Object(o.c)()!==null;return e.default.createElement(e.default.Fragment,null,!K&&Y?e.default.createElement(F,vr({ref:k},V)):e.default.createElement(Z,vr({ref:k},V)))}),G=Object.assign(F,{Child:z,Root:F})},function($,n){function t(e,s){return e===s||e!==e&&s!==s}$.exports=t},function($,n,t){"use strict";t.d(n,"a",function(){return r});var e=t(1),s=t(88);let o=0;function a(i="",d=[]){return Object(e.h)(()=>(o++,o=o>Number.MAX_SAFE_INTEGER?1:o,`${i}${o}`),d)}var c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(i,d,b)=>d in i?c(i,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):i[d]=b,O=(i,d)=>{for(var b in d||(d={}))m.call(d,b)&&v(i,b,d[b]);if(h)for(var b of h(d))g.call(d,b)&&v(i,b,d[b]);return i},u=(i,d)=>l(i,p(d));const r=({layerOptions:i,hideOnScroll:d}={})=>{const[b,w]=Object(e.k)(!1);Object(e.d)(()=>{if(d){const B=()=>{requestAnimationFrame(()=>{open&&d&&w(!1)})};return window.addEventListener("scroll",B,!0),()=>{window.removeEventListener("scroll",B,!0)}}},[d]);const{triggerProps:E,layerProps:S,renderLayer:P}=Object(s.c)(O({isOpen:b,placement:"bottom-center",preferY:"bottom",triggerOffset:10,onOutsideClick:()=>w(!1)},i)),D=a("trigger"),W=a("dialog");return{triggerProps:u(O({},E),{id:D,"aria-expanded":b,"aria-haspopup":"dialog","aria-controls":W}),layerProps:u(O({},S),{id:W,role:"dialog",tabIndex:0,"aria-labeledby":D}),renderLayer:P,isOpen:b,setOpen:w}}},function($,n,t){"use strict";t.d(n,"b",function(){return B}),t.d(n,"h",function(){return N}),t.d(n,"g",function(){return A}),t.d(n,"e",function(){return L}),t.d(n,"c",function(){return C}),t.d(n,"f",function(){return R}),t.d(n,"d",function(){return U}),t.d(n,"a",function(){return F});var e=t(324),s=t.n(e),o=t(258),a=t.n(o),c=t(259),l=t.n(c),p=t(260),h=t.n(p),m=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(G,V,k)=>V in G?m(G,V,{enumerable:!0,configurable:!0,writable:!0,value:k}):G[V]=k,d=(G,V)=>{for(var k in V||(V={}))u.call(V,k)&&i(G,k,V[k]);if(O)for(var k of O(V))r.call(V,k)&&i(G,k,V[k]);return G},b=(G,V)=>g(G,v(V));const w=a.a.createStore([l.a,h.a],[]),E=".buffer",S="ss-version-backups-local",P=32,D=4,W=7*24*60*60*1e3,B=G=>{var V,k,K,Y;return((k=(V=window._preloads)==null?void 0:V.pub)==null?void 0:k.id)?((Y=(K=window._preloads)==null?void 0:K.user)==null?void 0:Y.id)?y().filter(ee=>!(ee.publication_id!==window._preloads.pub.id||ee.user_id&&ee.user_id!==window._preloads.user.id||ee.post_id!==G||ee.local_version_saved_at&&Date.now()-new Date(ee.local_version_saved_at)>W)):[]:[]},f=G=>{if(!(G==null?void 0:G.post_id)||!(G==null?void 0:G.draft_updated_at)||!(G==null?void 0:G.draft_body))return;const V=y();if(V.filter(Y=>Y.post_id===G.post_id).length>=D){const Y=s()(V,ee=>ee.post_id===G.post_id);Y>=0&&V.splice(Y,1)}const K=[G].concat(V.filter(Y=>Y.post_id!==G.post_id||Y.draft_updated_at!==G.draft_updated_at&&Y.draft_body&&Y.draft_body!==G.draft_body)).slice(0,P);z(S,K)},y=()=>w.get(S,[]).filter(Boolean),M=()=>w.get(S+E,{}),N=G=>{var V,k;!((V=window._preloads.pub)==null?void 0:V.id)||!((k=window._preloads.user)==null?void 0:k.id)||!(G==null?void 0:G.post_id)||!(G==null?void 0:G.draft_updated_at)||!(G==null?void 0:G.draft_body)||z(S+E,b(d({},G),{publication_id:window._preloads.pub.id,user_id:window._preloads.user.id,local_version_saved_at:new Date}))},A=()=>{w.remove(S+E)},L=G=>{if(!(G==null?void 0:G.post_id)||!(G==null?void 0:G.draft_updated_at))return;const k=y().filter(K=>K.post_id!==G.post_id||K.draft_updated_at!==G.draft_updated_at);z(S,k)},C=({postId:G,editorId:V})=>{const k=y();return Boolean(k.find(K=>K.post_id===G&&K.editor_id&&K.editor_id!==V))},R=({postId:G,editorId:V})=>{const K=y().filter(Y=>Y.editor_id?Y.post_id!==G||Y.editor_id!==V:!1);z(S,K)},U=()=>{const G=M();!(G==null?void 0:G.draft_body)||(f(G),A())},Z=()=>{A(),w.remove(S)},F=G=>{(!G||y().find(V=>V.user_id&&V.user_id!==G))&&Z()},z=(G,V)=>{try{if(w.set(G,V),JSON.stringify(w.get(G))!==JSON.stringify(V))throw new Error("localStorage.setItem claimed to work but then getItem didnt return the expected value for key=",G)}catch(k){console.error("localStorage.setItem failed:",k),Z()}}},function($,n,t){var e=t(537);function s(o){return o&&o.length?e(o):[]}$.exports=s},function($,n,t){"use strict";n.a={modalTitle:"frontend-components-app_install_modal-module__modalTitle--fGCym",qrCode:"frontend-components-app_install_modal-module__qrCode--1HNTk",divider:"frontend-components-app_install_modal-module__divider--3jx5V",dividerLine:"frontend-components-app_install_modal-module__dividerLine--2pk9H",appBadge:"frontend-components-app_install_modal-module__appBadge--seKw9"}},function($,n,t){var e=t(226),s=t(157);function o(a,c){c=e(c,a);for(var l=0,p=c.length;a!=null&&l<p;)a=a[s(c[l++])];return l&&l==p?a:void 0}$.exports=o},function($,n,t){"use strict";t.d(n,"a",function(){return e});var e=(s=>(s.Space=" ",s.Enter="Enter",s.Escape="Escape",s.Backspace="Backspace",s.Delete="Delete",s.ArrowLeft="ArrowLeft",s.ArrowUp="ArrowUp",s.ArrowRight="ArrowRight",s.ArrowDown="ArrowDown",s.Home="Home",s.End="End",s.PageUp="PageUp",s.PageDown="PageDown",s.Tab="Tab",s))(e||{})},,,,,function($,n,t){var e=t(73),s=t(235),o=t(529),a=t(251);function c(l,p){return e(l)?l:s(l,p)?[l]:o(a(l))}$.exports=c},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"CaretDownIcon",svgParams:{height:6,width:10,fill:"#1C110B"}}),Object(e.h)("path",{d:"M4.61589 5.53907L0.68341 0.820092C0.412024 0.494429 0.643602 0 1.06752 0H8.93248C9.3564 0 9.58798 0.494428 9.31659 0.820091L5.38411 5.53907C5.18421 5.77894 4.81579 5.77894 4.61589 5.53907Z"}),");");n.default=O},function($,n,t){"use strict";t.d(n,"g",function(){return S}),t.d(n,"d",function(){return D}),t.d(n,"a",function(){return W}),t.d(n,"b",function(){return B}),t.d(n,"c",function(){return f}),t.d(n,"f",function(){return M}),t.d(n,"e",function(){return N});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(622),l=t(196),p=t(135),h=t(86),m=t(69),g=Object.defineProperty,v=Object.defineProperties,O=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(A,L,C)=>L in A?g(A,L,{enumerable:!0,configurable:!0,writable:!0,value:C}):A[L]=C,b=(A,L)=>{for(var C in L||(L={}))r.call(L,C)&&d(A,C,L[C]);if(u)for(var C of u(L))i.call(L,C)&&d(A,C,L[C]);return A},w=(A,L)=>v(A,O(L)),E=(A,L)=>{var C={};for(var R in A)r.call(A,R)&&L.indexOf(R)<0&&(C[R]=A[R]);if(A!=null&&u)for(var R of u(A))L.indexOf(R)<0&&i.call(A,R)&&(C[R]=A[R]);return C};function S({hideOnScroll:A}={}){const[L,C]=Object(s.k)(!1),R=Object(s.j)();return Object(s.d)(()=>{if(L){const U=()=>{C(!1)},Z=F=>{F.key==="Escape"&&C(!1)};return window.addEventListener("click",U),window.addEventListener("keydown",Z),A&&window.addEventListener("scroll",U,{capture:!0,passive:!0}),()=>{window.removeEventListener("click",U),window.removeEventListener("keydown",Z),window.removeEventListener("scroll",U,{capture:!0})}}},[L]),{ref:R,isOn:L,setIsOn:C,toggle:()=>{C(!L)}}}const P={anchorY:"bottom",anchorX:"left",tetherY:"top",tetherX:"left"};function D({tetherRef:A,fixTo:L=P,offset:C={x:0,y:0},children:R,className:U}){const Z=Object(s.j)();return Object(s.g)(()=>{const F=A.current,z=Z.current;if(!F||!z)return;const G=F.getBoundingClientRect(),V=z.getBoundingClientRect(),k=b(b({},P),L);let K=k.anchorY==="center"?G.top+G.height/2:G[k.anchorY];k.tetherY==="bottom"&&(K=window.innerHeight-K),k.tetherY==="center"&&(K-=V.height/2);const Y=k.tetherY==="bottom"?"bottom":"top";let ee=k.anchorX==="center"?G.left+G.width/2:G[k.anchorX];k.tetherX==="right"&&(ee=window.innerWidth-ee),k.tetherX==="center"&&(ee-=V.width/2);const ae=k.tetherX==="right"?"right":"left";Y==="top"&&K+V.height>window.innerHeight?(K=G.top-V.height,C.y&&(K-=C.y)):C.y&&(K+=C.y),C.x&&(ee+=C.x),K+=window.scrollY,ee+=window.scrollX,Object.assign(z.style,{minWidth:`${G.width}px`,[Y]:`${K}px`,[ae]:`${ee}px`})},[]),Object(e.h)(p.a,null,Object(e.h)("div",{className:a()("dropdown3",U),ref:Z,style:{position:"absolute"}},R))}const W=Object(h.a)("reader2-menu reader2-font-base");function B(A){var L=A,{priority:C}=L,R=E(L,["priority"]);const U=a()("reader2-menu-item","reader2-text-button",C,R.className);return R.href?Object(e.h)("a",w(b({},R),{className:U})):Object(e.h)("div",w(b({},R),{className:U}))}function f({options:A,value:L,onChange:C,fixedHeight:R=!1}){var U;const Z=S({hideOnScroll:!0});return Object(e.h)(m.a,{variant:"tertiary",onClick:Z.toggle,forwardedRef:Z.ref,fixedHeight:R},(U=A.find(F=>F.value===L))==null?void 0:U.label,Object(e.h)(c.a,{size:16}),Z.isOn&&Object(e.h)(D,{tetherRef:Z.ref,fixTo:{anchorX:"right",tetherX:"right"}},Object(e.h)(W,null,A.map(F=>Object(e.h)(B,{key:F.value,onClick:()=>C(F.value),className:a()("reader2-split-menu-item selectable",L===F.value&&"isSelected")},F.label,L===F.value&&Object(e.h)(l.a,{className:"feather-icon"}))))))}function y(A){var L=A,{defaultValue:C,onChange:R}=L,U=E(L,["defaultValue","onChange"]);const[Z,F]=Object(s.k)(C);return Object(e.h)(f,w(b({},U),{value:Z,onChange:z=>{F(z),R(z)}}))}function M({onHover:A}={}){const[L,C]=Object(s.k)(!1),R=Object(s.j)(),U=Object(s.j)(),Z=Object(s.j)(),F=G=>{G.pointerType==="mouse"&&(clearTimeout(Z.current),C(!0),A&&A())},z=G=>{G.pointerType==="mouse"&&(Z.current=setTimeout(()=>{C(!1)},200))};return Object(s.d)(()=>{const G=R.current;if(G)return G.addEventListener("pointerenter",F),G.addEventListener("pointerleave",z),()=>{G.removeEventListener("pointerenter",F),G.removeEventListener("pointerleave",z)}},[]),Object(s.d)(()=>{const G=U.current,V=R.current;if(L&&V){const k=()=>{C(!1)};return window.addEventListener("scroll",k,{capture:!0,passive:!0}),G&&(G.addEventListener("pointerenter",F),G.addEventListener("pointerleave",z)),()=>{window.removeEventListener("scroll",k,{capture:!0}),G&&(G.removeEventListener("pointerenter",F),G.removeEventListener("pointerleave",z))}}},[L]),{ref:R,tooltipRef:U,isHovering:L}}function N({tetherRef:A,children:L}){return Object(e.h)(D,{tetherRef:A,fixTo:{anchorX:"center",tetherX:"center",anchorY:"top",tetherY:"bottom"},offset:{y:12}},Object(e.h)("div",{className:"reader2-tooltip reader2-font-base reader2-text-button"},L,Object(e.h)("div",{className:"reader2-tooltip-arrow"},Object(e.h)("svg",{viewBox:"0 0 10 10",preserveAspectRatio:"none"},Object(e.h)("path",{d:"M 0,0 L 10,0 L 6,9 Q 5,11 4,9 Z"})))))}},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("X",[["line",{x1:"18",y1:"6",x2:"6",y2:"18",key:"1o5bob"}],["line",{x1:"6",y1:"6",x2:"18",y2:"18",key:"z4dcbv"}]]);n.a=s},function($,n,t){var e=t(114),s=t(84),o=e(s,"Map");$.exports=o},function($,n,t){var e=t(502),s=t(509),o=t(511),a=t(512),c=t(513);function l(p){var h=-1,m=p==null?0:p.length;for(this.clear();++h<m;){var g=p[h];this.set(g[0],g[1])}}l.prototype.clear=e,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=c,$.exports=l},function($,n){function t(e){var s=-1,o=Array(e.size);return e.forEach(function(a){o[++s]=a}),o}$.exports=t},function($,n){var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function s(o,a){var c=typeof o;return a=a==null?t:a,!!a&&(c=="number"||c!="symbol"&&e.test(o))&&o>-1&&o%1==0&&o<a}$.exports=s},function($,n){var t=9007199254740991;function e(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=t}$.exports=e},function($,n,t){var e=t(73),s=t(143),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function c(l,p){if(e(l))return!1;var h=typeof l;return h=="number"||h=="symbol"||h=="boolean"||l==null||s(l)?!0:a.test(l)||!o.test(l)||p!=null&&l in Object(p)}$.exports=c},function($,n,t){"use strict";t.r(n),t.d(n,"mentionsSearch",function(){return P});var e=t(0),s=t(11),o=t.n(s),a=t(16),c=t(170),l=t(60),p={mention:"frontend-components-mention-module__mention--34BKh"},h=Object.defineProperty,m=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(D,W,B)=>W in D?h(D,W,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[W]=B,i=(D,W)=>{for(var B in W||(W={}))O.call(W,B)&&r(D,B,W[B]);if(v)for(var B of v(W))u.call(W,B)&&r(D,B,W[B]);return D},d=(D,W)=>m(D,g(W)),b=(D,W,B)=>new Promise((f,y)=>{var M=L=>{try{A(B.next(L))}catch(C){y(C)}},N=L=>{try{A(B.throw(L))}catch(C){y(C)}},A=L=>L.done?f(L.value):Promise.resolve(L.value).then(M,N);A((B=B.apply(D,W)).next())});const w=({name:D,id:W,type:B,url:f,photo_url:y,uuid:M,mentionText:N,isStatic:A=!1,isEditorContext:L=!1})=>{if(A)return Object(e.h)("span",{className:p.mention},Object(e.h)("a",{href:Object(a.getMentionsUrl)(B,W,D,f)},D));if(B==="user"){const C={id:W,name:D,photo_url:y};return Object(e.h)(l.b,{subject:C,utmSource:"mention"},Object(e.h)("a",{className:p.mention,href:L?void 0:Object(a.getMentionsUrl)(B,W,D,f),target:"_blank",rel:"noreferrer","data-attrs":JSON.stringify({name:D,id:W,type:B,url:f,photo_url:y,uuid:M}),onClick:R=>R.stopPropagation()},N!=null?N:D))}return B==="pub"?Object(e.h)(c.c,{publication_id:W,utmSource:"mention"},Object(e.h)("a",{className:p.mention,href:f,target:"_blank",rel:"noreferrer","data-attrs":JSON.stringify({name:D,id:W,type:B,url:L?void 0:Object(a.getMentionsUrl)(B,W,D,f),uuid:M}),onClick:C=>C.stopPropagation()},N!=null?N:D)):Object(e.h)("a",{className:p.mention,target:"_blank",rel:"noreferrer",href:Object(a.getMentionsUrl)(B,W,D,f),"data-attrs":JSON.stringify({name:D,id:W,type:B,url:f,photo_url:y,uuid:M})},N!=null?N:D)};var E=n.default=w;const S={},P=(D,...W)=>b(void 0,[D,...W],function*(B,{pathname:f="/api/v1/posts/mention"}={}){if(S[B])return S[B];const y=yield o.a.get(f).query({query:B}),{profiles:M,publications:N}=y.body,A=new Map;return M&&M.length&&A.set("Writers",M.map(L=>d(i({},L),{type:"user"}))),N&&N.length&&A.set("Publications",N==null?void 0:N.map(L=>d(i({},L),{type:"pub",url:Object(a.getPublicationAppLinkUrl)({subdomain:L.subdomain}),photo_url:L.logo_url}))),S[B]=A,A})},function($,n,t){var e;let s="";n.REVIEW_ENV_SUBDOMAIN=s},function($,n,t){"use strict";t.d(n,"c",function(){return f}),t.d(n,"d",function(){return y}),t.d(n,"b",function(){return M}),t.d(n,"a",function(){return N});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(133),l=t(15),p=t.n(l),h=t(16),m=t(9),g=t(45),v=t(7),O=t(8),u=t(14),r=t(4),i=t(36),d=t(10),b={container:"frontend-components-like_post_upsell_modal-module__container--3qp6L",label:"frontend-components-like_post_upsell_modal-module__label--3lZgq",input:"frontend-components-like_post_upsell_modal-module__input--3NjBB",selectedInput:"frontend-components-like_post_upsell_modal-module__selectedInput--3BSQV"},w=Object.defineProperty,E=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,D=(A,L,C)=>L in A?w(A,L,{enumerable:!0,configurable:!0,writable:!0,value:C}):A[L]=C,W=(A,L)=>{for(var C in L||(L={}))S.call(L,C)&&D(A,C,L[C]);if(E)for(var C of E(L))P.call(L,C)&&D(A,C,L[C]);return A};const B="like_upsell_last_shown_at",f=()=>{const A=c.get(B);if(A){const L=p()(A),C=p()().subtract(30,"days");if(L.isAfter(C))return!1}return!0},y=A=>{c.set(B,p()().format(),W({expires:365*10},!A.custom_domain&&{domain:`.${new URL(Object(h.getBaseUrl)()).hostname}`}))},M=({pub:A})=>{var L,C;const R=Object(g.c)(),[U,Z]=Object(s.k)((L=A==null?void 0:A.plans)==null?void 0:L[0]),F=R.getConfigFor("disable_monthly_subscriptions");return Object(e.h)(r.b,{gap:20},Object(e.h)(r.b,{gap:4},Object(e.h)(d.b.H4,{weight:"semibold"},"Support ",A.name),Object(e.h)(d.b.B4,{color:"secondary"},"Since you liked this post, why not support ",A.name," with a subscription?")),Object(e.h)("form",{className:b.form},Object(e.h)(r.b,{gap:12},(C=A==null?void 0:A.plans)==null?void 0:C.map(z=>{if(!(z.interval==="month"&&F))return Object(e.h)("label",{className:b.label,key:z.id},Object(e.h)(r.c,{gap:12,alignItems:"center"},Object(e.h)("input",{name:"plan",type:"radio",value:z.id,onInput:()=>Z(z),checked:U&&U.id===z.id,className:a()({[b.selectedInput]:U&&U.id===z.id},b.input)}),Object(e.h)(r.c,{gap:8},Object(e.h)(d.b.B4,{as:"span",weight:"semibold",color:U&&U.id===z.id?"primary":"secondary"},Object(m.getPlanTitle)(z)),Object(e.h)(d.b.B4,{as:"span",color:"secondary"},Object(m.planBasePricing)(z)))))}))),Object(e.h)(u.a,{onClick:()=>{Object(v.i)(v.a.LIKE_UPSELL_PLAN_SELECTED),Object(O.redirect)(Object(h.getSubscribeUrl)(A,{params:W({utm_source:"like-button-upsell"},U&&{selectedPlanId:U.id})}),{local_navigation:!1})},grow:!0,priority:"primary-theme"},"Select"))},N=({pub:A})=>{const L=f(),[C,R]=Object(s.k)(L),[U,Z]=Object(s.k)(L);Object(s.d)(()=>{L||Object(O.removeQueryParam)("show_reaction_upsell")},[L]),Object(s.d)(()=>{U&&C&&(Object(v.i)(v.a.LIKE_UPSELL_MODAL_SEEN,{source:"email",type:"paid"}),y(A))},[U,C,A]);const F=()=>{R(!C),Z(!1),Object(O.removeQueryParam)("show_reaction_upsell")};return Object(e.h)(e.Fragment,null,U?Object(e.h)(i.a,{isOpen:C,onClose:F},Object(e.h)(i.b,null,Object(e.h)(M,{pub:A}))):null)}},,function($,n,t){var e=t(520),s=t(117),o=Object.prototype,a=o.hasOwnProperty,c=o.propertyIsEnumerable,l=e(function(){return arguments}())?e:function(p){return s(p)&&a.call(p,"callee")&&!c.call(p,"callee")};$.exports=l},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>{const r=100;return Object(e.h)(s.a,v(g({},u),{name:"BannedIcon",svgParams:{height:100,width:100},additionalStaticParams:{preserveAspectRatio:"none"}}),Object(e.h)("circle",{cx:"50",cy:"50",stroke:"#000000",r:r/2-4,strokeWidth:"8"}),Object(e.h)("line",{x1:"20",y1:"20",x2:"80",y2:"80",stroke:"#000000",strokeWidth:"8"}))};n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{name:d,children:b}=i,w=O(i,["name","children"]);return Object(e.h)(s.a,v(g({},w),{name:d,svgParams:{viewBox:"0 0 24 24",height:24,width:24,stroke:"#1C110B"}}),b)};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"DotDotDotIcon",svgParams:{height:100,width:100}}),Object(e.h)("circle",{cx:"23",cy:"50",r:"9"}),Object(e.h)("circle",{cx:"50",cy:"50",r:"9"}),Object(e.h)("circle",{cx:"77",cy:"50",r:"9"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return p});var e=t(1),s=t(15),o=t.n(s),a=t(51),c=t.n(a);const l=()=>{};function p(h,m=null,g=l){const[v,O]=Object(e.k)(!1);if(!h)return[!0,l];const u=()=>{g();const b=new Date;Object(a.setStoredValue)(h,b.toString()),O(!0)};let r;const i=typeof window=="undefined"?new Date().toString():Object(a.getStoredValue)(h);return i&&m?r=o()(i).add(m,"second").isAfterNow():r=Boolean(i),[v||r,u]}},function($,n,t){"use strict";t.d(n,"a",function(){return p});var e=t(0),s=t(72),o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(h,m)=>{var g={};for(var v in h)a.call(h,v)&&m.indexOf(v)<0&&(g[v]=h[v]);if(h!=null&&o)for(var v of o(h))m.indexOf(v)<0&&c.call(h,v)&&(g[v]=h[v]);return g};function p(h){var m=h,{className:g,src:v,noStyle:O=!1,loading:u,onError:r}=m,i=l(m,["className","src","noStyle","loading","onError"]);let d,b;return"size"in i?(d=i.size,b=i.size):(d=i.width,b=i.height),Object(e.h)(s.a,{src:v,maxWidth:d*2,className:g,imageProps:{height:b*2,crop:"fill"},style:O?void 0:{width:d,height:b},loading:u,onError:r})}},function($,n,t){"use strict";t.r(n),t.d(n,"ImageViewerModal",function(){return d}),t.d(n,"ImageViewerContents",function(){return b});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(805),l=t(804),p=t(229),h=t(807),m=t(3),g=t(8),v=t(50),O=t(4),u=t(36),r=t(181),i={chrome:"frontend-components-ImageViewerModal-module__chrome--1xusK",inactive:"frontend-components-ImageViewerModal-module__inactive--1gxOI",modalImageButtonContainer:"frontend-components-ImageViewerModal-module__modalImageButtonContainer--1r2QT",modalImageButton:"frontend-components-ImageViewerModal-module__modalImageButton--3fvrK",modalImageSidebar:"frontend-components-ImageViewerModal-module__modalImageSidebar--1xe2y",modalBody:"frontend-components-ImageViewerModal-module__modalBody--5de4a",imgContainer:"frontend-components-ImageViewerModal-module__imgContainer--qjaNp",img:"frontend-components-ImageViewerModal-module__img--WKP7Q",isLoading:"frontend-components-ImageViewerModal-module__isLoading--2ZBW4",moreOptionsMenu:"frontend-components-ImageViewerModal-module__moreOptionsMenu--kB3Fp",moreOptionsMenuItem:"frontend-components-ImageViewerModal-module__moreOptionsMenuItem--2OyoI",zIndexStyling:"frontend-components-ImageViewerModal-module__zIndexStyling--2Tyyz"};function d({showModal:S,modalContent:P,onClose:D,step:W,includeDownloadButton:B=!0}){Object(s.d)(()=>{S?(document.body.style.backgroundColor="black",document.body.style.transform="background-color 0.2s"):document.body.style.removeProperty("background-color")},[S]);const f=y=>{y.stopPropagation(),D()};return Object(e.h)(u.a,{isOpen:S,onClose:D,position:"full",opacity:"dark",onEscape:f},Object(e.h)(b,{modalContent:P,onClose:D,stepDefault:W,includeDownloadButton:B}))}function b({modalContent:S=[],onClose:P,stepDefault:D,includeDownloadButton:W}){const[B,f]=Object(s.k)(D),[y,M]=Object(s.k)(!0),N=Object(g.isMobileBrowser)(),A=K=>{K.currentTarget===K.target&&P()},[L,C]=Object(s.k)(!1);Object(s.d)(()=>{if(!N){let K;const Y=ae=>{const{key:he}=ae;["ArrowRight","ArrowDown"].includes(he)?(U(),ae.stopPropagation()):["ArrowLeft","ArrowUp"].includes(he)&&(R(),ae.stopPropagation())},ee=ae=>{(ae==null?void 0:ae.type)==="keydown"&&Y(ae),clearTimeout(K),C(!1),K=setTimeout(()=>{C(!0)},2e3)};return window.addEventListener("pointermove",ee,{capture:!0,passive:!0}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!0}),window.addEventListener("keydown",ee,{capture:!0,passive:!0}),ee(),()=>{clearTimeout(K),window.removeEventListener("pointermove",ee,{capture:!0}),window.removeEventListener("pointerdown",ee,{capture:!0}),window.removeEventListener("keydown",ee,{capture:!0})}}},[N,B]);const R=()=>{B!==0&&(f(B-1),M(!0))},U=()=>{B!==S.length-1&&(f(B+1),M(!0))},Z=S[B],{attrs:{src:F,alt:z,title:G}}=Z,V=N?8:16,k="#FFFFFF";return Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:a()(i.chrome,L&&i.inactive)},B<S.length-1&&Object(e.h)(w,{buttonFunction:U,style:{right:0,padding:V},isSidebar:!0,icon:Object(e.h)(c.a,{size:20,strokeWidth:2,stroke:k})}),B>0&&Object(e.h)(w,{buttonFunction:R,style:{left:0,padding:V},isSidebar:!0,icon:Object(e.h)(l.a,{size:20,strokeWidth:2,stroke:k})}),Object(e.h)(w,{buttonFunction:P,style:{position:"absolute",right:V,top:V},isSidebar:!1,icon:Object(e.h)(p.a,{size:20,strokeWidth:2,stroke:k})}),W&&Object(e.h)(w,{buttonFunction:K=>{K.stopPropagation(),E(G,F)},style:{position:"absolute",left:V,top:V},isSidebar:!1,icon:Object(e.h)(h.a,{size:20,strokeWidth:2,stroke:k})})),Object(e.h)("div",{className:i.imgContainer,onClick:A},Object(e.h)("img",{className:a()(i.img,y&&i.isLoading),onLoad:()=>{M(!1)},alt:z,title:G,src:Object(m.cloudinary)(F,void 0,{quality:"auto:good"}),key:F,onClick:A})),y&&Object(e.h)("div",{style:{position:"absolute",top:"50%",left:"50%"}},Object(e.h)(r.a,{className:i.imgDrunkSpin})))}function w({buttonFunction:S,style:P,isSidebar:D,icon:W,tetherRef:B}){return Object(e.h)(O.a,{className:a()(i.modalImageButtonContainer,D?i.modalImageSidebar:null),style:P,alignItems:"center",justifyContent:"center",onClick:S,ref:B},Object(e.h)(v.a,{className:i.modalImageButton,look:"circle"},W))}function E(S,P){const D=document.createElement("a");return document.body.appendChild(D),D.href=P,D.target="_blank",D.click(),document.body.removeChild(D),null}},function($,n,t){"use strict";t.r(n),t.d(n,"animateFill",function(){return ko}),t.d(n,"createSingleton",function(){return Dr}),t.d(n,"delegate",function(){return no}),t.d(n,"followCursor",function(){return Oi}),t.d(n,"hideAll",function(){return ar}),t.d(n,"inlinePositioning",function(){return pa}),t.d(n,"roundArrow",function(){return Jt}),t.d(n,"sticky",function(){return Si});function e(ot){if(ot==null)return window;if(ot.toString()!=="[object Window]"){var at=ot.ownerDocument;return at&&at.defaultView||window}return ot}function s(ot){var at=e(ot).Element;return ot instanceof at||ot instanceof Element}function o(ot){var at=e(ot).HTMLElement;return ot instanceof at||ot instanceof HTMLElement}function a(ot){if(typeof ShadowRoot=="undefined")return!1;var at=e(ot).ShadowRoot;return ot instanceof at||ot instanceof ShadowRoot}var c=Math.max,l=Math.min,p=Math.round;function h(ot,at){at===void 0&&(at=!1);var Ct=ot.getBoundingClientRect(),ln=1,yn=1;if(o(ot)&&at){var Dn=ot.offsetHeight,Ln=ot.offsetWidth;Ln>0&&(ln=p(Ct.width)/Ln||1),Dn>0&&(yn=p(Ct.height)/Dn||1)}return{width:Ct.width/ln,height:Ct.height/yn,top:Ct.top/yn,right:Ct.right/ln,bottom:Ct.bottom/yn,left:Ct.left/ln,x:Ct.left/ln,y:Ct.top/yn}}function m(ot){var at=e(ot),Ct=at.pageXOffset,ln=at.pageYOffset;return{scrollLeft:Ct,scrollTop:ln}}function g(ot){return{scrollLeft:ot.scrollLeft,scrollTop:ot.scrollTop}}function v(ot){return ot===e(ot)||!o(ot)?m(ot):g(ot)}function O(ot){return ot?(ot.nodeName||"").toLowerCase():null}function u(ot){return((s(ot)?ot.ownerDocument:ot.document)||window.document).documentElement}function r(ot){return h(u(ot)).left+m(ot).scrollLeft}function i(ot){return e(ot).getComputedStyle(ot)}function d(ot){var at=i(ot),Ct=at.overflow,ln=at.overflowX,yn=at.overflowY;return/auto|scroll|overlay|hidden/.test(Ct+yn+ln)}function b(ot){var at=ot.getBoundingClientRect(),Ct=p(at.width)/ot.offsetWidth||1,ln=p(at.height)/ot.offsetHeight||1;return Ct!==1||ln!==1}function w(ot,at,Ct){Ct===void 0&&(Ct=!1);var ln=o(at),yn=o(at)&&b(at),Dn=u(at),Ln=h(ot,yn),Jn={scrollLeft:0,scrollTop:0},rr={x:0,y:0};return(ln||!ln&&!Ct)&&((O(at)!=="body"||d(Dn))&&(Jn=v(at)),o(at)?(rr=h(at,!0),rr.x+=at.clientLeft,rr.y+=at.clientTop):Dn&&(rr.x=r(Dn))),{x:Ln.left+Jn.scrollLeft-rr.x,y:Ln.top+Jn.scrollTop-rr.y,width:Ln.width,height:Ln.height}}function E(ot){var at=h(ot),Ct=ot.offsetWidth,ln=ot.offsetHeight;return Math.abs(at.width-Ct)<=1&&(Ct=at.width),Math.abs(at.height-ln)<=1&&(ln=at.height),{x:ot.offsetLeft,y:ot.offsetTop,width:Ct,height:ln}}function S(ot){return O(ot)==="html"?ot:ot.assignedSlot||ot.parentNode||(a(ot)?ot.host:null)||u(ot)}function P(ot){return["html","body","#document"].indexOf(O(ot))>=0?ot.ownerDocument.body:o(ot)&&d(ot)?ot:P(S(ot))}function D(ot,at){var Ct;at===void 0&&(at=[]);var ln=P(ot),yn=ln===((Ct=ot.ownerDocument)==null?void 0:Ct.body),Dn=e(ln),Ln=yn?[Dn].concat(Dn.visualViewport||[],d(ln)?ln:[]):ln,Jn=at.concat(Ln);return yn?Jn:Jn.concat(D(S(Ln)))}function W(ot){return["table","td","th"].indexOf(O(ot))>=0}function B(ot){return!o(ot)||i(ot).position==="fixed"?null:ot.offsetParent}function f(ot){var at=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,Ct=navigator.userAgent.indexOf("Trident")!==-1;if(Ct&&o(ot)){var ln=i(ot);if(ln.position==="fixed")return null}for(var yn=S(ot);o(yn)&&["html","body"].indexOf(O(yn))<0;){var Dn=i(yn);if(Dn.transform!=="none"||Dn.perspective!=="none"||Dn.contain==="paint"||["transform","perspective"].indexOf(Dn.willChange)!==-1||at&&Dn.willChange==="filter"||at&&Dn.filter&&Dn.filter!=="none")return yn;yn=yn.parentNode}return null}function y(ot){for(var at=e(ot),Ct=B(ot);Ct&&W(Ct)&&i(Ct).position==="static";)Ct=B(Ct);return Ct&&(O(Ct)==="html"||O(Ct)==="body"&&i(Ct).position==="static")?at:Ct||f(ot)||at}var M="top",N="bottom",A="right",L="left",C="auto",R=[M,N,A,L],U="start",Z="end",F="clippingParents",z="viewport",G="popper",V="reference",k=R.reduce(function(ot,at){return ot.concat([at+"-"+U,at+"-"+Z])},[]),K=[].concat(R,[C]).reduce(function(ot,at){return ot.concat([at,at+"-"+U,at+"-"+Z])},[]),Y="beforeRead",ee="read",ae="afterRead",he="beforeMain",me="main",Ye="afterMain",se="beforeWrite",ie="write",Ee="afterWrite",Oe=[Y,ee,ae,he,me,Ye,se,ie,Ee];function ce(ot){var at=new Map,Ct=new Set,ln=[];ot.forEach(function(Dn){at.set(Dn.name,Dn)});function yn(Dn){Ct.add(Dn.name);var Ln=[].concat(Dn.requires||[],Dn.requiresIfExists||[]);Ln.forEach(function(Jn){if(!Ct.has(Jn)){var rr=at.get(Jn);rr&&yn(rr)}}),ln.push(Dn)}return ot.forEach(function(Dn){Ct.has(Dn.name)||yn(Dn)}),ln}function ue(ot){var at=ce(ot);return Oe.reduce(function(Ct,ln){return Ct.concat(at.filter(function(yn){return yn.phase===ln}))},[])}function pe(ot){var at;return function(){return at||(at=new Promise(function(Ct){Promise.resolve().then(function(){at=void 0,Ct(ot())})})),at}}function $e(ot){var at=ot.reduce(function(Ct,ln){var yn=Ct[ln.name];return Ct[ln.name]=yn?Object.assign({},yn,ln,{options:Object.assign({},yn.options,ln.options),data:Object.assign({},yn.data,ln.data)}):ln,Ct},{});return Object.keys(at).map(function(Ct){return at[Ct]})}var ne="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",X="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",q={placement:"bottom",modifiers:[],strategy:"absolute"};function Ne(){for(var ot=arguments.length,at=new Array(ot),Ct=0;Ct<ot;Ct++)at[Ct]=arguments[Ct];return!at.some(function(ln){return!(ln&&typeof ln.getBoundingClientRect=="function")})}function Qe(ot){ot===void 0&&(ot={});var at=ot,Ct=at.defaultModifiers,ln=Ct===void 0?[]:Ct,yn=at.defaultOptions,Dn=yn===void 0?q:yn;return function(Jn,rr,Cr){Cr===void 0&&(Cr=Dn);var sr={placement:"bottom",orderedModifiers:[],options:Object.assign({},q,Dn),modifiersData:{},elements:{reference:Jn,popper:rr},attributes:{},styles:{}},mo=[],po=!1,Hr={state:sr,setOptions:function(mr){var ro=typeof mr=="function"?mr(sr.options):mr;Ir(),sr.options=Object.assign({},Dn,sr.options,ro),sr.scrollParents={reference:s(Jn)?D(Jn):Jn.contextElement?D(Jn.contextElement):[],popper:D(rr)};var co=ue($e([].concat(ln,sr.options.modifiers)));if(sr.orderedModifiers=co.filter(function(Ke){return Ke.enabled}),!1)var j,T,_,J,oe,ve,xe;return Xr(),Hr.update()},forceUpdate:function(){if(!po){var mr=sr.elements,ro=mr.reference,co=mr.popper;if(!!Ne(ro,co)){sr.rects={reference:w(ro,y(co),sr.options.strategy==="fixed"),popper:E(co)},sr.reset=!1,sr.placement=sr.options.placement,sr.orderedModifiers.forEach(function(Ke){return sr.modifiersData[Ke.name]=Object.assign({},Ke.data)});for(var j=0,T=0;T<sr.orderedModifiers.length;T++){if(sr.reset===!0){sr.reset=!1,T=-1;continue}var _=sr.orderedModifiers[T],J=_.fn,oe=_.options,ve=oe===void 0?{}:oe,xe=_.name;typeof J=="function"&&(sr=J({state:sr,options:ve,name:xe,instance:Hr})||sr)}}}},update:pe(function(){return new Promise(function(Ur){Hr.forceUpdate(),Ur(sr)})}),destroy:function(){Ir(),po=!0}};if(!Ne(Jn,rr))return Hr;Hr.setOptions(Cr).then(function(Ur){!po&&Cr.onFirstUpdate&&Cr.onFirstUpdate(Ur)});function Xr(){sr.orderedModifiers.forEach(function(Ur){var mr=Ur.name,ro=Ur.options,co=ro===void 0?{}:ro,j=Ur.effect;if(typeof j=="function"){var T=j({state:sr,name:mr,instance:Hr,options:co}),_=function(){};mo.push(T||_)}})}function Ir(){mo.forEach(function(Ur){return Ur()}),mo=[]}return Hr}}var Ze=Qe(),tt={passive:!0};function Ft(ot){var at=ot.state,Ct=ot.instance,ln=ot.options,yn=ln.scroll,Dn=yn===void 0?!0:yn,Ln=ln.resize,Jn=Ln===void 0?!0:Ln,rr=e(at.elements.popper),Cr=[].concat(at.scrollParents.reference,at.scrollParents.popper);return Dn&&Cr.forEach(function(sr){sr.addEventListener("scroll",Ct.update,tt)}),Jn&&rr.addEventListener("resize",Ct.update,tt),function(){Dn&&Cr.forEach(function(sr){sr.removeEventListener("scroll",Ct.update,tt)}),Jn&&rr.removeEventListener("resize",Ct.update,tt)}}var Lt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ft,data:{}};function rn(ot){return ot.split("-")[0]}function ht(ot){return ot.split("-")[1]}function je(ot){return["top","bottom"].indexOf(ot)>=0?"x":"y"}function Le(ot){var at=ot.reference,Ct=ot.element,ln=ot.placement,yn=ln?rn(ln):null,Dn=ln?ht(ln):null,Ln=at.x+at.width/2-Ct.width/2,Jn=at.y+at.height/2-Ct.height/2,rr;switch(yn){case M:rr={x:Ln,y:at.y-Ct.height};break;case N:rr={x:Ln,y:at.y+at.height};break;case A:rr={x:at.x+at.width,y:Jn};break;case L:rr={x:at.x-Ct.width,y:Jn};break;default:rr={x:at.x,y:at.y}}var Cr=yn?je(yn):null;if(Cr!=null){var sr=Cr==="y"?"height":"width";switch(Dn){case U:rr[Cr]=rr[Cr]-(at[sr]/2-Ct[sr]/2);break;case Z:rr[Cr]=rr[Cr]+(at[sr]/2-Ct[sr]/2);break;default:}}return rr}function rt(ot){var at=ot.state,Ct=ot.name;at.modifiersData[Ct]=Le({reference:at.rects.reference,element:at.rects.popper,strategy:"absolute",placement:at.placement})}var Pe={name:"popperOffsets",enabled:!0,phase:"read",fn:rt,data:{}},de={top:"auto",right:"auto",bottom:"auto",left:"auto"};function be(ot){var at=ot.x,Ct=ot.y,ln=window,yn=ln.devicePixelRatio||1;return{x:p(at*yn)/yn||0,y:p(Ct*yn)/yn||0}}function Ie(ot){var at,Ct=ot.popper,ln=ot.popperRect,yn=ot.placement,Dn=ot.variation,Ln=ot.offsets,Jn=ot.position,rr=ot.gpuAcceleration,Cr=ot.adaptive,sr=ot.roundOffsets,mo=ot.isFixed,po=Ln.x,Hr=po===void 0?0:po,Xr=Ln.y,Ir=Xr===void 0?0:Xr,Ur=typeof sr=="function"?sr({x:Hr,y:Ir}):{x:Hr,y:Ir};Hr=Ur.x,Ir=Ur.y;var mr=Ln.hasOwnProperty("x"),ro=Ln.hasOwnProperty("y"),co=L,j=M,T=window;if(Cr){var _=y(Ct),J="clientHeight",oe="clientWidth";if(_===e(Ct)&&(_=u(Ct),i(_).position!=="static"&&Jn==="absolute"&&(J="scrollHeight",oe="scrollWidth")),_=_,yn===M||(yn===L||yn===A)&&Dn===Z){j=N;var ve=mo&&T.visualViewport?T.visualViewport.height:_[J];Ir-=ve-ln.height,Ir*=rr?1:-1}if(yn===L||(yn===M||yn===N)&&Dn===Z){co=A;var xe=mo&&T.visualViewport?T.visualViewport.width:_[oe];Hr-=xe-ln.width,Hr*=rr?1:-1}}var Ke=Object.assign({position:Jn},Cr&&de),qe=sr===!0?be({x:Hr,y:Ir}):{x:Hr,y:Ir};if(Hr=qe.x,Ir=qe.y,rr){var vt;return Object.assign({},Ke,(vt={},vt[j]=ro?"0":"",vt[co]=mr?"0":"",vt.transform=(T.devicePixelRatio||1)<=1?"translate("+Hr+"px, "+Ir+"px)":"translate3d("+Hr+"px, "+Ir+"px, 0)",vt))}return Object.assign({},Ke,(at={},at[j]=ro?Ir+"px":"",at[co]=mr?Hr+"px":"",at.transform="",at))}function ke(ot){var at=ot.state,Ct=ot.options,ln=Ct.gpuAcceleration,yn=ln===void 0?!0:ln,Dn=Ct.adaptive,Ln=Dn===void 0?!0:Dn,Jn=Ct.roundOffsets,rr=Jn===void 0?!0:Jn;if(!1)var Cr;var sr={placement:rn(at.placement),variation:ht(at.placement),popper:at.elements.popper,popperRect:at.rects.popper,gpuAcceleration:yn,isFixed:at.options.strategy==="fixed"};at.modifiersData.popperOffsets!=null&&(at.styles.popper=Object.assign({},at.styles.popper,Ie(Object.assign({},sr,{offsets:at.modifiersData.popperOffsets,position:at.options.strategy,adaptive:Ln,roundOffsets:rr})))),at.modifiersData.arrow!=null&&(at.styles.arrow=Object.assign({},at.styles.arrow,Ie(Object.assign({},sr,{offsets:at.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:rr})))),at.attributes.popper=Object.assign({},at.attributes.popper,{"data-popper-placement":at.placement})}var Te={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ke,data:{}};function x(ot){var at=ot.state;Object.keys(at.elements).forEach(function(Ct){var ln=at.styles[Ct]||{},yn=at.attributes[Ct]||{},Dn=at.elements[Ct];!o(Dn)||!O(Dn)||(Object.assign(Dn.style,ln),Object.keys(yn).forEach(function(Ln){var Jn=yn[Ln];Jn===!1?Dn.removeAttribute(Ln):Dn.setAttribute(Ln,Jn===!0?"":Jn)}))})}function H(ot){var at=ot.state,Ct={popper:{position:at.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(at.elements.popper.style,Ct.popper),at.styles=Ct,at.elements.arrow&&Object.assign(at.elements.arrow.style,Ct.arrow),function(){Object.keys(at.elements).forEach(function(ln){var yn=at.elements[ln],Dn=at.attributes[ln]||{},Ln=Object.keys(at.styles.hasOwnProperty(ln)?at.styles[ln]:Ct[ln]),Jn=Ln.reduce(function(rr,Cr){return rr[Cr]="",rr},{});!o(yn)||!O(yn)||(Object.assign(yn.style,Jn),Object.keys(Dn).forEach(function(rr){yn.removeAttribute(rr)}))})}}var le={name:"applyStyles",enabled:!0,phase:"write",fn:x,effect:H,requires:["computeStyles"]};function Ce(ot,at,Ct){var ln=rn(ot),yn=[L,M].indexOf(ln)>=0?-1:1,Dn=typeof Ct=="function"?Ct(Object.assign({},at,{placement:ot})):Ct,Ln=Dn[0],Jn=Dn[1];return Ln=Ln||0,Jn=(Jn||0)*yn,[L,A].indexOf(ln)>=0?{x:Jn,y:Ln}:{x:Ln,y:Jn}}function Ue(ot){var at=ot.state,Ct=ot.options,ln=ot.name,yn=Ct.offset,Dn=yn===void 0?[0,0]:yn,Ln=K.reduce(function(sr,mo){return sr[mo]=Ce(mo,at.rects,Dn),sr},{}),Jn=Ln[at.placement],rr=Jn.x,Cr=Jn.y;at.modifiersData.popperOffsets!=null&&(at.modifiersData.popperOffsets.x+=rr,at.modifiersData.popperOffsets.y+=Cr),at.modifiersData[ln]=Ln}var Ve={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ue},bt={left:"right",right:"left",bottom:"top",top:"bottom"};function yt(ot){return ot.replace(/left|right|bottom|top/g,function(at){return bt[at]})}var Qt={start:"end",end:"start"};function tn(ot){return ot.replace(/start|end/g,function(at){return Qt[at]})}function Kn(ot){var at=e(ot),Ct=u(ot),ln=at.visualViewport,yn=Ct.clientWidth,Dn=Ct.clientHeight,Ln=0,Jn=0;return ln&&(yn=ln.width,Dn=ln.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(Ln=ln.offsetLeft,Jn=ln.offsetTop)),{width:yn,height:Dn,x:Ln+r(ot),y:Jn}}function Ot(ot){var at,Ct=u(ot),ln=m(ot),yn=(at=ot.ownerDocument)==null?void 0:at.body,Dn=c(Ct.scrollWidth,Ct.clientWidth,yn?yn.scrollWidth:0,yn?yn.clientWidth:0),Ln=c(Ct.scrollHeight,Ct.clientHeight,yn?yn.scrollHeight:0,yn?yn.clientHeight:0),Jn=-ln.scrollLeft+r(ot),rr=-ln.scrollTop;return i(yn||Ct).direction==="rtl"&&(Jn+=c(Ct.clientWidth,yn?yn.clientWidth:0)-Dn),{width:Dn,height:Ln,x:Jn,y:rr}}function lt(ot,at){var Ct=at.getRootNode&&at.getRootNode();if(ot.contains(at))return!0;if(Ct&&a(Ct)){var ln=at;do{if(ln&&ot.isSameNode(ln))return!0;ln=ln.parentNode||ln.host}while(ln)}return!1}function Be(ot){return Object.assign({},ot,{left:ot.x,top:ot.y,right:ot.x+ot.width,bottom:ot.y+ot.height})}function _e(ot){var at=h(ot);return at.top=at.top+ot.clientTop,at.left=at.left+ot.clientLeft,at.bottom=at.top+ot.clientHeight,at.right=at.left+ot.clientWidth,at.width=ot.clientWidth,at.height=ot.clientHeight,at.x=at.left,at.y=at.top,at}function Ae(ot,at){return at===z?Be(Kn(ot)):s(at)?_e(at):Be(Ot(u(ot)))}function fe(ot){var at=D(S(ot)),Ct=["absolute","fixed"].indexOf(i(ot).position)>=0,ln=Ct&&o(ot)?y(ot):ot;return s(ln)?at.filter(function(yn){return s(yn)&&lt(yn,ln)&&O(yn)!=="body"}):[]}function ft(ot,at,Ct){var ln=at==="clippingParents"?fe(ot):[].concat(at),yn=[].concat(ln,[Ct]),Dn=yn[0],Ln=yn.reduce(function(Jn,rr){var Cr=Ae(ot,rr);return Jn.top=c(Cr.top,Jn.top),Jn.right=l(Cr.right,Jn.right),Jn.bottom=l(Cr.bottom,Jn.bottom),Jn.left=c(Cr.left,Jn.left),Jn},Ae(ot,Dn));return Ln.width=Ln.right-Ln.left,Ln.height=Ln.bottom-Ln.top,Ln.x=Ln.left,Ln.y=Ln.top,Ln}function nt(){return{top:0,right:0,bottom:0,left:0}}function ct(ot){return Object.assign({},nt(),ot)}function Xe(ot,at){return at.reduce(function(Ct,ln){return Ct[ln]=ot,Ct},{})}function gt(ot,at){at===void 0&&(at={});var Ct=at,ln=Ct.placement,yn=ln===void 0?ot.placement:ln,Dn=Ct.boundary,Ln=Dn===void 0?F:Dn,Jn=Ct.rootBoundary,rr=Jn===void 0?z:Jn,Cr=Ct.elementContext,sr=Cr===void 0?G:Cr,mo=Ct.altBoundary,po=mo===void 0?!1:mo,Hr=Ct.padding,Xr=Hr===void 0?0:Hr,Ir=ct(typeof Xr!="number"?Xr:Xe(Xr,R)),Ur=sr===G?V:G,mr=ot.rects.popper,ro=ot.elements[po?Ur:sr],co=ft(s(ro)?ro:ro.contextElement||u(ot.elements.popper),Ln,rr),j=h(ot.elements.reference),T=Le({reference:j,element:mr,strategy:"absolute",placement:yn}),_=Be(Object.assign({},mr,T)),J=sr===G?_:j,oe={top:co.top-J.top+Ir.top,bottom:J.bottom-co.bottom+Ir.bottom,left:co.left-J.left+Ir.left,right:J.right-co.right+Ir.right},ve=ot.modifiersData.offset;if(sr===G&&ve){var xe=ve[yn];Object.keys(oe).forEach(function(Ke){var qe=[A,N].indexOf(Ke)>=0?1:-1,vt=[M,N].indexOf(Ke)>=0?"y":"x";oe[Ke]+=xe[vt]*qe})}return oe}function Tt(ot,at){at===void 0&&(at={});var Ct=at,ln=Ct.placement,yn=Ct.boundary,Dn=Ct.rootBoundary,Ln=Ct.padding,Jn=Ct.flipVariations,rr=Ct.allowedAutoPlacements,Cr=rr===void 0?K:rr,sr=ht(ln),mo=sr?Jn?k:k.filter(function(Xr){return ht(Xr)===sr}):R,po=mo.filter(function(Xr){return Cr.indexOf(Xr)>=0});po.length===0&&(po=mo);var Hr=po.reduce(function(Xr,Ir){return Xr[Ir]=gt(ot,{placement:Ir,boundary:yn,rootBoundary:Dn,padding:Ln})[rn(Ir)],Xr},{});return Object.keys(Hr).sort(function(Xr,Ir){return Hr[Xr]-Hr[Ir]})}function Ut(ot){if(rn(ot)===C)return[];var at=yt(ot);return[tn(ot),at,tn(at)]}function qt(ot){var at=ot.state,Ct=ot.options,ln=ot.name;if(!at.modifiersData[ln]._skip){for(var yn=Ct.mainAxis,Dn=yn===void 0?!0:yn,Ln=Ct.altAxis,Jn=Ln===void 0?!0:Ln,rr=Ct.fallbackPlacements,Cr=Ct.padding,sr=Ct.boundary,mo=Ct.rootBoundary,po=Ct.altBoundary,Hr=Ct.flipVariations,Xr=Hr===void 0?!0:Hr,Ir=Ct.allowedAutoPlacements,Ur=at.options.placement,mr=rn(Ur),ro=mr===Ur,co=rr||(ro||!Xr?[yt(Ur)]:Ut(Ur)),j=[Ur].concat(co).reduce(function(qr,so){return qr.concat(rn(so)===C?Tt(at,{placement:so,boundary:sr,rootBoundary:mo,padding:Cr,flipVariations:Xr,allowedAutoPlacements:Ir}):so)},[]),T=at.rects.reference,_=at.rects.popper,J=new Map,oe=!0,ve=j[0],xe=0;xe<j.length;xe++){var Ke=j[xe],qe=rn(Ke),vt=ht(Ke)===U,It=[M,N].indexOf(qe)>=0,un=It?"width":"height",On=gt(at,{placement:Ke,boundary:sr,rootBoundary:mo,altBoundary:po,padding:Cr}),dn=It?vt?A:L:vt?N:M;T[un]>_[un]&&(dn=yt(dn));var In=yt(dn),Qn=[];if(Dn&&Qn.push(On[qe]<=0),Jn&&Qn.push(On[dn]<=0,On[In]<=0),Qn.every(function(qr){return qr})){ve=Ke,oe=!1;break}J.set(Ke,Qn)}if(oe)for(var dr=Xr?3:1,Gr=function(so){var oo=j.find(function(ti){var _r=J.get(ti);if(_r)return _r.slice(0,so).every(function(To){return To})});if(oo)return ve=oo,"break"},Kr=dr;Kr>0;Kr--){var eo=Gr(Kr);if(eo==="break")break}at.placement!==ve&&(at.modifiersData[ln]._skip=!0,at.placement=ve,at.reset=!0)}}var sn={name:"flip",enabled:!0,phase:"main",fn:qt,requiresIfExists:["offset"],data:{_skip:!1}};function _n(ot){return ot==="x"?"y":"x"}function Hn(ot,at,Ct){return c(ot,l(at,Ct))}function wn(ot,at,Ct){var ln=Hn(ot,at,Ct);return ln>Ct?Ct:ln}function Un(ot){var at=ot.state,Ct=ot.options,ln=ot.name,yn=Ct.mainAxis,Dn=yn===void 0?!0:yn,Ln=Ct.altAxis,Jn=Ln===void 0?!1:Ln,rr=Ct.boundary,Cr=Ct.rootBoundary,sr=Ct.altBoundary,mo=Ct.padding,po=Ct.tether,Hr=po===void 0?!0:po,Xr=Ct.tetherOffset,Ir=Xr===void 0?0:Xr,Ur=gt(at,{boundary:rr,rootBoundary:Cr,padding:mo,altBoundary:sr}),mr=rn(at.placement),ro=ht(at.placement),co=!ro,j=je(mr),T=_n(j),_=at.modifiersData.popperOffsets,J=at.rects.reference,oe=at.rects.popper,ve=typeof Ir=="function"?Ir(Object.assign({},at.rects,{placement:at.placement})):Ir,xe=typeof ve=="number"?{mainAxis:ve,altAxis:ve}:Object.assign({mainAxis:0,altAxis:0},ve),Ke=at.modifiersData.offset?at.modifiersData.offset[at.placement]:null,qe={x:0,y:0};if(!!_){if(Dn){var vt,It=j==="y"?M:L,un=j==="y"?N:A,On=j==="y"?"height":"width",dn=_[j],In=dn+Ur[It],Qn=dn-Ur[un],dr=Hr?-oe[On]/2:0,Gr=ro===U?J[On]:oe[On],Kr=ro===U?-oe[On]:-J[On],eo=at.elements.arrow,qr=Hr&&eo?E(eo):{width:0,height:0},so=at.modifiersData["arrow#persistent"]?at.modifiersData["arrow#persistent"].padding:nt(),oo=so[It],ti=so[un],_r=Hn(0,J[On],qr[On]),To=co?J[On]/2-dr-_r-oo-xe.mainAxis:Gr-_r-oo-xe.mainAxis,Co=co?-J[On]/2+dr+_r+ti+xe.mainAxis:Kr+_r+ti+xe.mainAxis,Ei=at.elements.arrow&&y(at.elements.arrow),ni=Ei?j==="y"?Ei.clientTop||0:Ei.clientLeft||0:0,pi=(vt=Ke==null?void 0:Ke[j])!=null?vt:0,Bi=dn+To-pi-ni,_i=dn+Co-pi,Qo=Hn(Hr?l(In,Bi):In,dn,Hr?c(Qn,_i):Qn);_[j]=Qo,qe[j]=Qo-dn}if(Jn){var ci,Xi=j==="x"?M:L,Ri=j==="x"?N:A,yo=_[T],go=T==="y"?"height":"width",Di=yo+Ur[Xi],Ui=yo-Ur[Ri],Ki=[M,L].indexOf(mr)!==-1,Mi=(ci=Ke==null?void 0:Ke[T])!=null?ci:0,ma=Ki?Di:yo-J[go]-oe[go]-Mi+xe.altAxis,Fi=Ki?yo+J[go]+oe[go]-Mi-xe.altAxis:Ui,Pa=Hr&&Ki?wn(ma,yo,Fi):Hn(Hr?ma:Di,yo,Hr?Fi:Ui);_[T]=Pa,qe[T]=Pa-yo}at.modifiersData[ln]=qe}}var bn={name:"preventOverflow",enabled:!0,phase:"main",fn:Un,requiresIfExists:["offset"]},cr=function(at,Ct){return at=typeof at=="function"?at(Object.assign({},Ct.rects,{placement:Ct.placement})):at,ct(typeof at!="number"?at:Xe(at,R))};function fr(ot){var at,Ct=ot.state,ln=ot.name,yn=ot.options,Dn=Ct.elements.arrow,Ln=Ct.modifiersData.popperOffsets,Jn=rn(Ct.placement),rr=je(Jn),Cr=[L,A].indexOf(Jn)>=0,sr=Cr?"height":"width";if(!(!Dn||!Ln)){var mo=cr(yn.padding,Ct),po=E(Dn),Hr=rr==="y"?M:L,Xr=rr==="y"?N:A,Ir=Ct.rects.reference[sr]+Ct.rects.reference[rr]-Ln[rr]-Ct.rects.popper[sr],Ur=Ln[rr]-Ct.rects.reference[rr],mr=y(Dn),ro=mr?rr==="y"?mr.clientHeight||0:mr.clientWidth||0:0,co=Ir/2-Ur/2,j=mo[Hr],T=ro-po[sr]-mo[Xr],_=ro/2-po[sr]/2+co,J=Hn(j,_,T),oe=rr;Ct.modifiersData[ln]=(at={},at[oe]=J,at.centerOffset=J-_,at)}}function ur(ot){var at=ot.state,Ct=ot.options,ln=Ct.element,yn=ln===void 0?"[data-popper-arrow]":ln;yn!=null&&(typeof yn=="string"&&(yn=at.elements.popper.querySelector(yn),!yn)||!lt(at.elements.popper,yn)||(at.elements.arrow=yn))}var er={name:"arrow",enabled:!0,phase:"main",fn:fr,effect:ur,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jr(ot,at,Ct){return Ct===void 0&&(Ct={x:0,y:0}),{top:ot.top-at.height-Ct.y,right:ot.right-at.width+Ct.x,bottom:ot.bottom-at.height+Ct.y,left:ot.left-at.width-Ct.x}}function wt(ot){return[M,A,N,L].some(function(at){return ot[at]>=0})}function mt(ot){var at=ot.state,Ct=ot.name,ln=at.rects.reference,yn=at.rects.popper,Dn=at.modifiersData.preventOverflow,Ln=gt(at,{elementContext:"reference"}),Jn=gt(at,{altBoundary:!0}),rr=jr(Ln,ln),Cr=jr(Jn,yn,Dn),sr=wt(rr),mo=wt(Cr);at.modifiersData[Ct]={referenceClippingOffsets:rr,popperEscapeOffsets:Cr,isReferenceHidden:sr,hasPopperEscaped:mo},at.attributes.popper=Object.assign({},at.attributes.popper,{"data-popper-reference-hidden":sr,"data-popper-escaped":mo})}var Fe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mt},pt=[Lt,Pe,Te,le,Ve,sn,bn,er,Fe],Dt=Qe({defaultModifiers:pt}),Jt='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',Gt="tippy-box",mn="tippy-content",Cn="tippy-backdrop",tr="tippy-arrow",Zn="tippy-svg-arrow",At={passive:!0,capture:!0},Xt=function(){return document.body};function en(ot,at){return{}.hasOwnProperty.call(ot,at)}function $n(ot,at,Ct){if(Array.isArray(ot)){var ln=ot[at];return ln==null?Array.isArray(Ct)?Ct[at]:Ct:ln}return ot}function Xn(ot,at){var Ct={}.toString.call(ot);return Ct.indexOf("[object")===0&&Ct.indexOf(at+"]")>-1}function Yn(ot,at){return typeof ot=="function"?ot.apply(void 0,at):ot}function Sn(ot,at){if(at===0)return ot;var Ct;return function(ln){clearTimeout(Ct),Ct=setTimeout(function(){ot(ln)},at)}}function nr(ot,at){var Ct=Object.assign({},ot);return at.forEach(function(ln){delete Ct[ln]}),Ct}function zt(ot){return ot.split(/\s+/).filter(Boolean)}function Kt(ot){return[].concat(ot)}function $t(ot,at){ot.indexOf(at)===-1&&ot.push(at)}function et(ot){return ot.filter(function(at,Ct){return ot.indexOf(at)===Ct})}function Wt(ot){return ot.split("-")[0]}function Vt(ot){return[].slice.call(ot)}function cn(ot){return Object.keys(ot).reduce(function(at,Ct){return ot[Ct]!==void 0&&(at[Ct]=ot[Ct]),at},{})}function Tn(){return document.createElement("div")}function pn(ot){return["Element","Fragment"].some(function(at){return Xn(ot,at)})}function Gn(ot){return Xn(ot,"NodeList")}function hr(ot){return Xn(ot,"MouseEvent")}function Rn(ot){return!!(ot&&ot._tippy&&ot._tippy.reference===ot)}function pr(ot){return pn(ot)?[ot]:Gn(ot)?Vt(ot):Array.isArray(ot)?ot:Vt(document.querySelectorAll(ot))}function zn(ot,at){ot.forEach(function(Ct){Ct&&(Ct.style.transitionDuration=at+"ms")})}function Ar(ot,at){ot.forEach(function(Ct){Ct&&Ct.setAttribute("data-state",at)})}function Rr(ot){var at,Ct=Kt(ot),ln=Ct[0];return ln!=null&&(at=ln.ownerDocument)!=null&&at.body?ln.ownerDocument:document}function ir(ot,at){var Ct=at.clientX,ln=at.clientY;return ot.every(function(yn){var Dn=yn.popperRect,Ln=yn.popperState,Jn=yn.props,rr=Jn.interactiveBorder,Cr=Wt(Ln.placement),sr=Ln.modifiersData.offset;if(!sr)return!0;var mo=Cr==="bottom"?sr.top.y:0,po=Cr==="top"?sr.bottom.y:0,Hr=Cr==="right"?sr.left.x:0,Xr=Cr==="left"?sr.right.x:0,Ir=Dn.top-ln+mo>rr,Ur=ln-Dn.bottom-po>rr,mr=Dn.left-Ct+Hr>rr,ro=Ct-Dn.right-Xr>rr;return Ir||Ur||mr||ro})}function Sr(ot,at,Ct){var ln=at+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(yn){ot[ln](yn,Ct)})}function Pr(ot,at){for(var Ct=at;Ct;){var ln;if(ot.contains(Ct))return!0;Ct=Ct.getRootNode==null||(ln=Ct.getRootNode())==null?void 0:ln.host}return!1}var yr={isTouch:!1},br=0;function Br(){yr.isTouch||(yr.isTouch=!0,window.performance&&document.addEventListener("mousemove",Nr))}function Nr(){var ot=performance.now();ot-br<20&&(yr.isTouch=!1,document.removeEventListener("mousemove",Nr)),br=ot}function lo(){var ot=document.activeElement;if(Rn(ot)){var at=ot._tippy;ot.blur&&!at.state.isVisible&&ot.blur()}}function Zr(){document.addEventListener("touchstart",Br,At),window.addEventListener("blur",lo)}var zr=typeof window!="undefined"&&typeof document!="undefined",wr=zr?!!window.msCrypto:!1;function $o(ot){var at=ot==="destroy"?"n already-":" ";return[ot+"() was called on a"+at+"destroyed instance. This is a no-op but","indicates a potential memory leak."].join(" ")}function xo(ot){var at=/[ \t]{2,}/g,Ct=/^[ \t]*/gm;return ot.replace(at," ").replace(Ct,"").trim()}function Vo(ot){return xo(`
  %ctippy.js

  %c`+xo(ot)+`

  %c\u{1F477}\u200D This is a development-only message. It will be removed in production.
  `)}function Ti(ot){return[Vo(ot),"color: #00C584; font-size: 1.3em; font-weight: bold;","line-height: 1.5","color: #a6a095;"]}var Ho;function oi(){Ho=new Set}function zo(ot,at){if(ot&&!Ho.has(at)){var Ct;Ho.add(at),(Ct=console).warn.apply(Ct,Ti(at))}}function ho(ot,at){if(ot&&!Ho.has(at)){var Ct;Ho.add(at),(Ct=console).error.apply(Ct,Ti(at))}}function Jo(ot){var at=!ot,Ct=Object.prototype.toString.call(ot)==="[object Object]"&&!ot.addEventListener;ho(at,["tippy() was passed","`"+String(ot)+"`","as its targets (first) argument. Valid types are: String, Element,","Element[], or NodeList."].join(" ")),ho(Ct,["tippy() was passed a plain object which is not supported as an argument","for virtual positioning. Use props.getReferenceClientRect instead."].join(" "))}var gi={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ki={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ao=Object.assign({appendTo:Xt,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},gi,ki),Po=Object.keys(ao),qo=function(at){var Ct=Object.keys(at);Ct.forEach(function(ln){ao[ln]=at[ln]})};function Ai(ot){var at=ot.plugins||[],Ct=at.reduce(function(ln,yn){var Dn=yn.name,Ln=yn.defaultValue;if(Dn){var Jn;ln[Dn]=ot[Dn]!==void 0?ot[Dn]:(Jn=ao[Dn])!=null?Jn:Ln}return ln},{});return Object.assign({},ot,Ct)}function hi(ot,at){var Ct=at?Object.keys(Ai(Object.assign({},ao,{plugins:at}))):Po,ln=Ct.reduce(function(yn,Dn){var Ln=(ot.getAttribute("data-tippy-"+Dn)||"").trim();if(!Ln)return yn;if(Dn==="content")yn[Dn]=Ln;else try{yn[Dn]=JSON.parse(Ln)}catch(Jn){yn[Dn]=Ln}return yn},{});return ln}function ze(ot,at){var Ct=Object.assign({},at,{content:Yn(at.content,[ot])},at.ignoreAttributes?{}:hi(ot,at.plugins));return Ct.aria=Object.assign({},ao.aria,Ct.aria),Ct.aria={expanded:Ct.aria.expanded==="auto"?at.interactive:Ct.aria.expanded,content:Ct.aria.content==="auto"?at.interactive?null:"describedby":Ct.aria.content},Ct}function Re(ot,at){ot===void 0&&(ot={}),at===void 0&&(at=[]);var Ct=Object.keys(ot);Ct.forEach(function(ln){var yn=nr(ao,Object.keys(gi)),Dn=!en(yn,ln);Dn&&(Dn=at.filter(function(Ln){return Ln.name===ln}).length===0),zo(Dn,["`"+ln+"`","is not a valid prop. You may have spelled it incorrectly, or if it's","a plugin, forgot to pass it in an array as props.plugins.",`

`,`All props: https://atomiks.github.io/tippyjs/v6/all-props/
`,"Plugins: https://atomiks.github.io/tippyjs/v6/plugins/"].join(" "))})}var We=function(){return"innerHTML"};function it(ot,at){ot[We()]=at}function Pt(ot){var at=Tn();return ot===!0?at.className=tr:(at.className=Zn,pn(ot)?at.appendChild(ot):it(at,ot)),at}function Nt(ot,at){pn(at.content)?(it(ot,""),ot.appendChild(at.content)):typeof at.content!="function"&&(at.allowHTML?it(ot,at.content):ot.textContent=at.content)}function kt(ot){var at=ot.firstElementChild,Ct=Vt(at.children);return{box:at,content:Ct.find(function(ln){return ln.classList.contains(mn)}),arrow:Ct.find(function(ln){return ln.classList.contains(tr)||ln.classList.contains(Zn)}),backdrop:Ct.find(function(ln){return ln.classList.contains(Cn)})}}function Ht(ot){var at=Tn(),Ct=Tn();Ct.className=Gt,Ct.setAttribute("data-state","hidden"),Ct.setAttribute("tabindex","-1");var ln=Tn();ln.className=mn,ln.setAttribute("data-state","hidden"),Nt(ln,ot.props),at.appendChild(Ct),Ct.appendChild(ln),yn(ot.props,ot.props);function yn(Dn,Ln){var Jn=kt(at),rr=Jn.box,Cr=Jn.content,sr=Jn.arrow;Ln.theme?rr.setAttribute("data-theme",Ln.theme):rr.removeAttribute("data-theme"),typeof Ln.animation=="string"?rr.setAttribute("data-animation",Ln.animation):rr.removeAttribute("data-animation"),Ln.inertia?rr.setAttribute("data-inertia",""):rr.removeAttribute("data-inertia"),rr.style.maxWidth=typeof Ln.maxWidth=="number"?Ln.maxWidth+"px":Ln.maxWidth,Ln.role?rr.setAttribute("role",Ln.role):rr.removeAttribute("role"),(Dn.content!==Ln.content||Dn.allowHTML!==Ln.allowHTML)&&Nt(Cr,ot.props),Ln.arrow?sr?Dn.arrow!==Ln.arrow&&(rr.removeChild(sr),rr.appendChild(Pt(Ln.arrow))):rr.appendChild(Pt(Ln.arrow)):sr&&rr.removeChild(sr)}return{popper:at,onUpdate:yn}}Ht.$$tippy=!0;var Bt=1,Yt=[],an=[];function En(ot,at){var Ct=ze(ot,Object.assign({},ao,Ai(cn(at)))),ln,yn,Dn,Ln=!1,Jn=!1,rr=!1,Cr=!1,sr,mo,po,Hr=[],Xr=Sn(Bi,Ct.interactiveDebounce),Ir,Ur=Bt++,mr=null,ro=et(Ct.plugins),co={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},j={id:Ur,reference:ot,popper:Tn(),popperInstance:mr,props:Ct,state:co,plugins:ro,clearDelayTimeouts:ma,setProps:Fi,setContent:Pa,show:Ca,hide:ka,hideWithInteractivity:sa,enable:Ki,disable:Mi,unmount:Sa,destroy:Na};if(!Ct.render)return j;var T=Ct.render(j),_=T.popper,J=T.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+j.id,j.popper=_,ot._tippy=j,_._tippy=j;var oe=ro.map(function(Mn){return Mn.fn(j)}),ve=ot.hasAttribute("aria-expanded");return Ei(),dr(),dn(),In("onCreate",[j]),Ct.showOnCreate&&Di(),_.addEventListener("mouseenter",function(){j.props.interactive&&j.state.isVisible&&j.clearDelayTimeouts()}),_.addEventListener("mouseleave",function(){j.props.interactive&&j.props.trigger.indexOf("mouseenter")>=0&&It().addEventListener("mousemove",Xr)}),j;function xe(){var Mn=j.props.touch;return Array.isArray(Mn)?Mn:[Mn,0]}function Ke(){return xe()[0]==="hold"}function qe(){var Mn;return!!((Mn=j.props.render)!=null&&Mn.$$tippy)}function vt(){return Ir||ot}function It(){var Mn=vt().parentNode;return Mn?Rr(Mn):document}function un(){return kt(_)}function On(Mn){return j.state.isMounted&&!j.state.isVisible||yr.isTouch||sr&&sr.type==="focus"?0:$n(j.props.delay,Mn?0:1,ao.delay)}function dn(Mn){Mn===void 0&&(Mn=!1),_.style.pointerEvents=j.props.interactive&&!Mn?"":"none",_.style.zIndex=""+j.props.zIndex}function In(Mn,$r,uo){if(uo===void 0&&(uo=!0),oe.forEach(function(Uo){Uo[Mn]&&Uo[Mn].apply(Uo,$r)}),uo){var Bo;(Bo=j.props)[Mn].apply(Bo,$r)}}function Qn(){var Mn=j.props.aria;if(!!Mn.content){var $r="aria-"+Mn.content,uo=_.id,Bo=Kt(j.props.triggerTarget||ot);Bo.forEach(function(Uo){var Hi=Uo.getAttribute($r);if(j.state.isVisible)Uo.setAttribute($r,Hi?Hi+" "+uo:uo);else{var $i=Hi&&Hi.replace(uo,"").trim();$i?Uo.setAttribute($r,$i):Uo.removeAttribute($r)}})}}function dr(){if(!(ve||!j.props.aria.expanded)){var Mn=Kt(j.props.triggerTarget||ot);Mn.forEach(function($r){j.props.interactive?$r.setAttribute("aria-expanded",j.state.isVisible&&$r===vt()?"true":"false"):$r.removeAttribute("aria-expanded")})}}function Gr(){It().removeEventListener("mousemove",Xr),Yt=Yt.filter(function(Mn){return Mn!==Xr})}function Kr(Mn){if(!(yr.isTouch&&(rr||Mn.type==="mousedown"))){var $r=Mn.composedPath&&Mn.composedPath()[0]||Mn.target;if(!(j.props.interactive&&Pr(_,$r))){if(Kt(j.props.triggerTarget||ot).some(function(uo){return Pr(uo,$r)})){if(yr.isTouch||j.state.isVisible&&j.props.trigger.indexOf("click")>=0)return}else In("onClickOutside",[j,Mn]);j.props.hideOnClick===!0&&(j.clearDelayTimeouts(),j.hide(),Jn=!0,setTimeout(function(){Jn=!1}),j.state.isMounted||oo())}}}function eo(){rr=!0}function qr(){rr=!1}function so(){var Mn=It();Mn.addEventListener("mousedown",Kr,!0),Mn.addEventListener("touchend",Kr,At),Mn.addEventListener("touchstart",qr,At),Mn.addEventListener("touchmove",eo,At)}function oo(){var Mn=It();Mn.removeEventListener("mousedown",Kr,!0),Mn.removeEventListener("touchend",Kr,At),Mn.removeEventListener("touchstart",qr,At),Mn.removeEventListener("touchmove",eo,At)}function ti(Mn,$r){To(Mn,function(){!j.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&$r()})}function _r(Mn,$r){To(Mn,$r)}function To(Mn,$r){var uo=un().box;function Bo(Uo){Uo.target===uo&&(Sr(uo,"remove",Bo),$r())}if(Mn===0)return $r();Sr(uo,"remove",mo),Sr(uo,"add",Bo),mo=Bo}function Co(Mn,$r,uo){uo===void 0&&(uo=!1);var Bo=Kt(j.props.triggerTarget||ot);Bo.forEach(function(Uo){Uo.addEventListener(Mn,$r,uo),Hr.push({node:Uo,eventType:Mn,handler:$r,options:uo})})}function Ei(){Ke()&&(Co("touchstart",pi,{passive:!0}),Co("touchend",_i,{passive:!0})),zt(j.props.trigger).forEach(function(Mn){if(Mn!=="manual")switch(Co(Mn,pi),Mn){case"mouseenter":Co("mouseleave",_i);break;case"focus":Co(wr?"focusout":"blur",Qo);break;case"focusin":Co("focusout",Qo);break}})}function ni(){Hr.forEach(function(Mn){var $r=Mn.node,uo=Mn.eventType,Bo=Mn.handler,Uo=Mn.options;$r.removeEventListener(uo,Bo,Uo)}),Hr=[]}function pi(Mn){var $r,uo=!1;if(!(!j.state.isEnabled||ci(Mn)||Jn)){var Bo=(($r=sr)==null?void 0:$r.type)==="focus";sr=Mn,Ir=Mn.currentTarget,dr(),!j.state.isVisible&&hr(Mn)&&Yt.forEach(function(Uo){return Uo(Mn)}),Mn.type==="click"&&(j.props.trigger.indexOf("mouseenter")<0||Ln)&&j.props.hideOnClick!==!1&&j.state.isVisible?uo=!0:Di(Mn),Mn.type==="click"&&(Ln=!uo),uo&&!Bo&&Ui(Mn)}}function Bi(Mn){var $r=Mn.target,uo=vt().contains($r)||_.contains($r);if(!(Mn.type==="mousemove"&&uo)){var Bo=go().concat(_).map(function(Uo){var Hi,$i=Uo._tippy,Oa=(Hi=$i.popperInstance)==null?void 0:Hi.state;return Oa?{popperRect:Uo.getBoundingClientRect(),popperState:Oa,props:Ct}:null}).filter(Boolean);ir(Bo,Mn)&&(Gr(),Ui(Mn))}}function _i(Mn){var $r=ci(Mn)||j.props.trigger.indexOf("click")>=0&&Ln;if(!$r){if(j.props.interactive){j.hideWithInteractivity(Mn);return}Ui(Mn)}}function Qo(Mn){j.props.trigger.indexOf("focusin")<0&&Mn.target!==vt()||j.props.interactive&&Mn.relatedTarget&&_.contains(Mn.relatedTarget)||Ui(Mn)}function ci(Mn){return yr.isTouch?Ke()!==Mn.type.indexOf("touch")>=0:!1}function Xi(){Ri();var Mn=j.props,$r=Mn.popperOptions,uo=Mn.placement,Bo=Mn.offset,Uo=Mn.getReferenceClientRect,Hi=Mn.moveTransition,$i=qe()?kt(_).arrow:null,Oa=Uo?{getBoundingClientRect:Uo,contextElement:Uo.contextElement||vt()}:ot,ya={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Za){var La=Za.state;if(qe()){var as=un(),Ka=as.box;["placement","reference-hidden","escaped"].forEach(function(ss){ss==="placement"?Ka.setAttribute("data-placement",La.placement):La.attributes.popper["data-popper-"+ss]?Ka.setAttribute("data-"+ss,""):Ka.removeAttribute("data-"+ss)}),La.attributes.popper={}}}},Ma=[{name:"offset",options:{offset:Bo}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Hi}},ya];qe()&&$i&&Ma.push({name:"arrow",options:{element:$i,padding:3}}),Ma.push.apply(Ma,($r==null?void 0:$r.modifiers)||[]),j.popperInstance=Dt(Oa,_,Object.assign({},$r,{placement:uo,onFirstUpdate:po,modifiers:Ma}))}function Ri(){j.popperInstance&&(j.popperInstance.destroy(),j.popperInstance=null)}function yo(){var Mn=j.props.appendTo,$r,uo=vt();j.props.interactive&&Mn===Xt||Mn==="parent"?$r=uo.parentNode:$r=Yn(Mn,[uo]),$r.contains(_)||$r.appendChild(_),j.state.isMounted=!0,Xi()}function go(){return Vt(_.querySelectorAll("[data-tippy-root]"))}function Di(Mn){j.clearDelayTimeouts(),Mn&&In("onTrigger",[j,Mn]),so();var $r=On(!0),uo=xe(),Bo=uo[0],Uo=uo[1];yr.isTouch&&Bo==="hold"&&Uo&&($r=Uo),$r?ln=setTimeout(function(){j.show()},$r):j.show()}function Ui(Mn){if(j.clearDelayTimeouts(),In("onUntrigger",[j,Mn]),!j.state.isVisible){oo();return}if(!(j.props.trigger.indexOf("mouseenter")>=0&&j.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Mn.type)>=0&&Ln)){var $r=On(!1);$r?yn=setTimeout(function(){j.state.isVisible&&j.hide()},$r):Dn=requestAnimationFrame(function(){j.hide()})}}function Ki(){j.state.isEnabled=!0}function Mi(){j.hide(),j.state.isEnabled=!1}function ma(){clearTimeout(ln),clearTimeout(yn),cancelAnimationFrame(Dn)}function Fi(Mn){if(!j.state.isDestroyed){In("onBeforeUpdate",[j,Mn]),ni();var $r=j.props,uo=ze(ot,Object.assign({},$r,cn(Mn),{ignoreAttributes:!0}));j.props=uo,Ei(),$r.interactiveDebounce!==uo.interactiveDebounce&&(Gr(),Xr=Sn(Bi,uo.interactiveDebounce)),$r.triggerTarget&&!uo.triggerTarget?Kt($r.triggerTarget).forEach(function(Bo){Bo.removeAttribute("aria-expanded")}):uo.triggerTarget&&ot.removeAttribute("aria-expanded"),dr(),dn(),J&&J($r,uo),j.popperInstance&&(Xi(),go().forEach(function(Bo){requestAnimationFrame(Bo._tippy.popperInstance.forceUpdate)})),In("onAfterUpdate",[j,Mn])}}function Pa(Mn){j.setProps({content:Mn})}function Ca(){var Mn=j.state.isVisible,$r=j.state.isDestroyed,uo=!j.state.isEnabled,Bo=yr.isTouch&&!j.props.touch,Uo=$n(j.props.duration,0,ao.duration);if(!(Mn||$r||uo||Bo)&&!vt().hasAttribute("disabled")&&(In("onShow",[j],!1),j.props.onShow(j)!==!1)){if(j.state.isVisible=!0,qe()&&(_.style.visibility="visible"),dn(),so(),j.state.isMounted||(_.style.transition="none"),qe()){var Hi=un(),$i=Hi.box,Oa=Hi.content;zn([$i,Oa],0)}po=function(){var Ma;if(!(!j.state.isVisible||Cr)){if(Cr=!0,_.offsetHeight,_.style.transition=j.props.moveTransition,qe()&&j.props.animation){var Xa=un(),Za=Xa.box,La=Xa.content;zn([Za,La],Uo),Ar([Za,La],"visible")}Qn(),dr(),$t(an,j),(Ma=j.popperInstance)==null||Ma.forceUpdate(),In("onMount",[j]),j.props.animation&&qe()&&_r(Uo,function(){j.state.isShown=!0,In("onShown",[j])})}},yo()}}function ka(){var Mn=!j.state.isVisible,$r=j.state.isDestroyed,uo=!j.state.isEnabled,Bo=$n(j.props.duration,1,ao.duration);if(!(Mn||$r||uo)&&(In("onHide",[j],!1),j.props.onHide(j)!==!1)){if(j.state.isVisible=!1,j.state.isShown=!1,Cr=!1,Ln=!1,qe()&&(_.style.visibility="hidden"),Gr(),oo(),dn(!0),qe()){var Uo=un(),Hi=Uo.box,$i=Uo.content;j.props.animation&&(zn([Hi,$i],Bo),Ar([Hi,$i],"hidden"))}Qn(),dr(),j.props.animation?qe()&&ti(Bo,j.unmount):j.unmount()}}function sa(Mn){It().addEventListener("mousemove",Xr),$t(Yt,Xr),Xr(Mn)}function Sa(){j.state.isVisible&&j.hide(),!!j.state.isMounted&&(Ri(),go().forEach(function(Mn){Mn._tippy.unmount()}),_.parentNode&&_.parentNode.removeChild(_),an=an.filter(function(Mn){return Mn!==j}),j.state.isMounted=!1,In("onHidden",[j]))}function Na(){j.state.isDestroyed||(j.clearDelayTimeouts(),j.unmount(),ni(),delete ot._tippy,j.state.isDestroyed=!0,In("onDestroy",[j]))}}function vn(ot,at){at===void 0&&(at={});var Ct=ao.plugins.concat(at.plugins||[]);Zr();var ln=Object.assign({},at,{plugins:Ct}),yn=pr(ot);if(!1)var Dn,Ln;var Jn=yn.reduce(function(rr,Cr){var sr=Cr&&En(Cr,ln);return sr&&rr.push(sr),rr},[]);return pn(ot)?Jn[0]:Jn}vn.defaultProps=ao,vn.setDefaultProps=qo,vn.currentInput=yr;var ar=function(at){var Ct=at===void 0?{}:at,ln=Ct.exclude,yn=Ct.duration;an.forEach(function(Dn){var Ln=!1;if(ln&&(Ln=Rn(ln)?Dn.reference===ln:Dn.popper===ln.popper),!Ln){var Jn=Dn.props.duration;Dn.setProps({duration:yn}),Dn.hide(),Dn.state.isDestroyed||Dn.setProps({duration:Jn})}})},Er=Object.assign({},le,{effect:function(at){var Ct=at.state,ln={popper:{position:Ct.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(Ct.elements.popper.style,ln.popper),Ct.styles=ln,Ct.elements.arrow&&Object.assign(Ct.elements.arrow.style,ln.arrow)}}),Dr=function(at,Ct){var ln;Ct===void 0&&(Ct={});var yn=at,Dn=[],Ln=[],Jn,rr=Ct.overrides,Cr=[],sr=!1;function mo(){Ln=yn.map(function(j){return Kt(j.props.triggerTarget||j.reference)}).reduce(function(j,T){return j.concat(T)},[])}function po(){Dn=yn.map(function(j){return j.reference})}function Hr(j){yn.forEach(function(T){j?T.enable():T.disable()})}function Xr(j){return yn.map(function(T){var _=T.setProps;return T.setProps=function(J){_(J),T.reference===Jn&&j.setProps(J)},function(){T.setProps=_}})}function Ir(j,T){var _=Ln.indexOf(T);if(T!==Jn){Jn=T;var J=(rr||[]).concat("content").reduce(function(oe,ve){return oe[ve]=yn[_].props[ve],oe},{});j.setProps(Object.assign({},J,{getReferenceClientRect:typeof J.getReferenceClientRect=="function"?J.getReferenceClientRect:function(){var oe;return(oe=Dn[_])==null?void 0:oe.getBoundingClientRect()}}))}}Hr(!1),po(),mo();var Ur={fn:function(){return{onDestroy:function(){Hr(!0)},onHidden:function(){Jn=null},onClickOutside:function(_){_.props.showOnCreate&&!sr&&(sr=!0,Jn=null)},onShow:function(_){_.props.showOnCreate&&!sr&&(sr=!0,Ir(_,Dn[0]))},onTrigger:function(_,J){Ir(_,J.currentTarget)}}}},mr=vn(Tn(),Object.assign({},nr(Ct,["overrides"]),{plugins:[Ur].concat(Ct.plugins||[]),triggerTarget:Ln,popperOptions:Object.assign({},Ct.popperOptions,{modifiers:[].concat(((ln=Ct.popperOptions)==null?void 0:ln.modifiers)||[],[Er])})})),ro=mr.show;mr.show=function(j){if(ro(),!Jn&&j==null)return Ir(mr,Dn[0]);if(!(Jn&&j==null)){if(typeof j=="number")return Dn[j]&&Ir(mr,Dn[j]);if(yn.indexOf(j)>=0){var T=j.reference;return Ir(mr,T)}if(Dn.indexOf(j)>=0)return Ir(mr,j)}},mr.showNext=function(){var j=Dn[0];if(!Jn)return mr.show(0);var T=Dn.indexOf(Jn);mr.show(Dn[T+1]||j)},mr.showPrevious=function(){var j=Dn[Dn.length-1];if(!Jn)return mr.show(j);var T=Dn.indexOf(Jn),_=Dn[T-1]||j;mr.show(_)};var co=mr.setProps;return mr.setProps=function(j){rr=j.overrides||rr,co(j)},mr.setInstances=function(j){Hr(!0),Cr.forEach(function(T){return T()}),yn=j,Hr(!1),po(),mo(),Cr=Xr(mr),mr.setProps({triggerTarget:Ln})},Cr=Xr(mr),mr},Lr={mouseover:"mouseenter",focusin:"focus",click:"click"};function no(ot,at){var Ct=[],ln=[],yn=!1,Dn=at.target,Ln=nr(at,["target"]),Jn=Object.assign({},Ln,{trigger:"manual",touch:!1}),rr=Object.assign({touch:ao.touch},Ln,{showOnCreate:!0}),Cr=vn(ot,Jn),sr=Kt(Cr);function mo(Ur){if(!(!Ur.target||yn)){var mr=Ur.target.closest(Dn);if(!!mr){var ro=mr.getAttribute("data-tippy-trigger")||at.trigger||ao.trigger;if(!mr._tippy&&!(Ur.type==="touchstart"&&typeof rr.touch=="boolean")&&!(Ur.type!=="touchstart"&&ro.indexOf(Lr[Ur.type])<0)){var co=vn(mr,rr);co&&(ln=ln.concat(co))}}}}function po(Ur,mr,ro,co){co===void 0&&(co=!1),Ur.addEventListener(mr,ro,co),Ct.push({node:Ur,eventType:mr,handler:ro,options:co})}function Hr(Ur){var mr=Ur.reference;po(mr,"touchstart",mo,At),po(mr,"mouseover",mo),po(mr,"focusin",mo),po(mr,"click",mo)}function Xr(){Ct.forEach(function(Ur){var mr=Ur.node,ro=Ur.eventType,co=Ur.handler,j=Ur.options;mr.removeEventListener(ro,co,j)}),Ct=[]}function Ir(Ur){var mr=Ur.destroy,ro=Ur.enable,co=Ur.disable;Ur.destroy=function(j){j===void 0&&(j=!0),j&&ln.forEach(function(T){T.destroy()}),ln=[],Xr(),mr()},Ur.enable=function(){ro(),ln.forEach(function(j){return j.enable()}),yn=!1},Ur.disable=function(){co(),ln.forEach(function(j){return j.disable()}),yn=!0},Hr(Ur)}return sr.forEach(Ir),Cr}var ko={name:"animateFill",defaultValue:!1,fn:function(at){var Ct;if(!((Ct=at.props.render)!=null&&Ct.$$tippy))return{};var ln=kt(at.popper),yn=ln.box,Dn=ln.content,Ln=at.props.animateFill?bi():null;return{onCreate:function(){Ln&&(yn.insertBefore(Ln,yn.firstElementChild),yn.setAttribute("data-animatefill",""),yn.style.overflow="hidden",at.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(Ln){var rr=yn.style.transitionDuration,Cr=Number(rr.replace("ms",""));Dn.style.transitionDelay=Math.round(Cr/10)+"ms",Ln.style.transitionDuration=rr,Ar([Ln],"visible")}},onShow:function(){Ln&&(Ln.style.transitionDuration="0ms")},onHide:function(){Ln&&Ar([Ln],"hidden")}}}};function bi(){var ot=Tn();return ot.className=Cn,Ar([ot],"hidden"),ot}var ei={clientX:0,clientY:0},li=[];function Vi(ot){var at=ot.clientX,Ct=ot.clientY;ei={clientX:at,clientY:Ct}}function Qi(ot){ot.addEventListener("mousemove",Vi)}function ua(ot){ot.removeEventListener("mousemove",Vi)}var Oi={name:"followCursor",defaultValue:!1,fn:function(at){var Ct=at.reference,ln=Rr(at.props.triggerTarget||Ct),yn=!1,Dn=!1,Ln=!0,Jn=at.props;function rr(){return at.props.followCursor==="initial"&&at.state.isVisible}function Cr(){ln.addEventListener("mousemove",po)}function sr(){ln.removeEventListener("mousemove",po)}function mo(){yn=!0,at.setProps({getReferenceClientRect:null}),yn=!1}function po(Ir){var Ur=Ir.target?Ct.contains(Ir.target):!0,mr=at.props.followCursor,ro=Ir.clientX,co=Ir.clientY,j=Ct.getBoundingClientRect(),T=ro-j.left,_=co-j.top;(Ur||!at.props.interactive)&&at.setProps({getReferenceClientRect:function(){var oe=Ct.getBoundingClientRect(),ve=ro,xe=co;mr==="initial"&&(ve=oe.left+T,xe=oe.top+_);var Ke=mr==="horizontal"?oe.top:xe,qe=mr==="vertical"?oe.right:ve,vt=mr==="horizontal"?oe.bottom:xe,It=mr==="vertical"?oe.left:ve;return{width:qe-It,height:vt-Ke,top:Ke,right:qe,bottom:vt,left:It}}})}function Hr(){at.props.followCursor&&(li.push({instance:at,doc:ln}),Qi(ln))}function Xr(){li=li.filter(function(Ir){return Ir.instance!==at}),li.filter(function(Ir){return Ir.doc===ln}).length===0&&ua(ln)}return{onCreate:Hr,onDestroy:Xr,onBeforeUpdate:function(){Jn=at.props},onAfterUpdate:function(Ur,mr){var ro=mr.followCursor;yn||ro!==void 0&&Jn.followCursor!==ro&&(Xr(),ro?(Hr(),at.state.isMounted&&!Dn&&!rr()&&Cr()):(sr(),mo()))},onMount:function(){at.props.followCursor&&!Dn&&(Ln&&(po(ei),Ln=!1),rr()||Cr())},onTrigger:function(Ur,mr){hr(mr)&&(ei={clientX:mr.clientX,clientY:mr.clientY}),Dn=mr.type==="focus"},onHidden:function(){at.props.followCursor&&(mo(),sr(),Ln=!0)}}}};function _a(ot,at){var Ct;return{popperOptions:Object.assign({},ot.popperOptions,{modifiers:[].concat((((Ct=ot.popperOptions)==null?void 0:Ct.modifiers)||[]).filter(function(ln){var yn=ln.name;return yn!==at.name}),[at])})}}var pa={name:"inlinePositioning",defaultValue:!1,fn:function(at){var Ct=at.reference;function ln(){return!!at.props.inlinePositioning}var yn,Dn=-1,Ln=!1,Jn=[],rr={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(Hr){var Xr=Hr.state;ln()&&(Jn.indexOf(Xr.placement)!==-1&&(Jn=[]),yn!==Xr.placement&&Jn.indexOf(Xr.placement)===-1&&(Jn.push(Xr.placement),at.setProps({getReferenceClientRect:function(){return Cr(Xr.placement)}})),yn=Xr.placement)}};function Cr(po){return Ra(Wt(po),Ct.getBoundingClientRect(),Vt(Ct.getClientRects()),Dn)}function sr(po){Ln=!0,at.setProps(po),Ln=!1}function mo(){Ln||sr(_a(at.props,rr))}return{onCreate:mo,onAfterUpdate:mo,onTrigger:function(Hr,Xr){if(hr(Xr)){var Ir=Vt(at.reference.getClientRects()),Ur=Ir.find(function(ro){return ro.left-2<=Xr.clientX&&ro.right+2>=Xr.clientX&&ro.top-2<=Xr.clientY&&ro.bottom+2>=Xr.clientY}),mr=Ir.indexOf(Ur);Dn=mr>-1?mr:Dn}},onHidden:function(){Dn=-1}}}};function Ra(ot,at,Ct,ln){if(Ct.length<2||ot===null)return at;if(Ct.length===2&&ln>=0&&Ct[0].left>Ct[1].right)return Ct[ln]||at;switch(ot){case"top":case"bottom":{var yn=Ct[0],Dn=Ct[Ct.length-1],Ln=ot==="top",Jn=yn.top,rr=Dn.bottom,Cr=Ln?yn.left:Dn.left,sr=Ln?yn.right:Dn.right,mo=sr-Cr,po=rr-Jn;return{top:Jn,bottom:rr,left:Cr,right:sr,width:mo,height:po}}case"left":case"right":{var Hr=Math.min.apply(Math,Ct.map(function(_){return _.left})),Xr=Math.max.apply(Math,Ct.map(function(_){return _.right})),Ir=Ct.filter(function(_){return ot==="left"?_.left===Hr:_.right===Xr}),Ur=Ir[0].top,mr=Ir[Ir.length-1].bottom,ro=Hr,co=Xr,j=co-ro,T=mr-Ur;return{top:Ur,bottom:mr,left:ro,right:co,width:j,height:T}}default:return at}}var Si={name:"sticky",defaultValue:!1,fn:function(at){var Ct=at.reference,ln=at.popper;function yn(){return at.popperInstance?at.popperInstance.state.elements.reference:Ct}function Dn(Cr){return at.props.sticky===!0||at.props.sticky===Cr}var Ln=null,Jn=null;function rr(){var Cr=Dn("reference")?yn().getBoundingClientRect():null,sr=Dn("popper")?ln.getBoundingClientRect():null;(Cr&&yi(Ln,Cr)||sr&&yi(Jn,sr))&&at.popperInstance&&at.popperInstance.update(),Ln=Cr,Jn=sr,at.state.isMounted&&requestAnimationFrame(rr)}return{onMount:function(){at.props.sticky&&rr()}}}};function yi(ot,at){return ot&&at?ot.top!==at.top||ot.right!==at.right||ot.bottom!==at.bottom||ot.left!==at.left:!0}vn.setDefaultProps({render:Ht});var Wa=n.default=vn},function($,n,t){"use strict";var e=t(311);function s(u){function r(ce,ue,pe,$e,ne){for(var X=0,q=0,Ne=0,Qe=0,Ze,tt,Ft=0,Lt=0,rn,ht=rn=Ze=0,je=0,Le=0,rt=0,Pe=0,de=pe.length,be=de-1,Ie,ke="",Te="",x="",H="",le;je<de;){if(tt=pe.charCodeAt(je),je===be&&q+Qe+Ne+X!==0&&(q!==0&&(tt=q===47?10:47),Qe=Ne=X=0,de++,be++),q+Qe+Ne+X===0){if(je===be&&(0<Le&&(ke=ke.replace(f,"")),0<ke.trim().length)){switch(tt){case 32:case 9:case 59:case 13:case 10:break;default:ke+=pe.charAt(je)}tt=59}switch(tt){case 123:for(ke=ke.trim(),Ze=ke.charCodeAt(0),rn=1,Pe=++je;je<de;){switch(tt=pe.charCodeAt(je)){case 123:rn++;break;case 125:rn--;break;case 47:switch(tt=pe.charCodeAt(je+1)){case 42:case 47:e:{for(ht=je+1;ht<be;++ht)switch(pe.charCodeAt(ht)){case 47:if(tt===42&&pe.charCodeAt(ht-1)===42&&je+2!==ht){je=ht+1;break e}break;case 10:if(tt===47){je=ht+1;break e}}je=ht}}break;case 91:tt++;case 40:tt++;case 34:case 39:for(;je++<be&&pe.charCodeAt(je)!==tt;);}if(rn===0)break;je++}switch(rn=pe.substring(Pe,je),Ze===0&&(Ze=(ke=ke.replace(B,"").trim()).charCodeAt(0)),Ze){case 64:switch(0<Le&&(ke=ke.replace(f,"")),tt=ke.charCodeAt(1),tt){case 100:case 109:case 115:case 45:Le=ue;break;default:Le=me}if(rn=r(ue,Le,rn,tt,ne+1),Pe=rn.length,0<se&&(Le=i(me,ke,rt),le=S(3,rn,Le,ue,ee,Y,Pe,tt,ne,$e),ke=Le.join(""),le!==void 0&&(Pe=(rn=le.trim()).length)===0&&(tt=0,rn="")),0<Pe)switch(tt){case 115:ke=ke.replace(F,E);case 100:case 109:case 45:rn=ke+"{"+rn+"}";break;case 107:ke=ke.replace(C,"$1 $2"),rn=ke+"{"+rn+"}",rn=he===1||he===2&&w("@"+rn,3)?"@-webkit-"+rn+"@"+rn:"@"+rn;break;default:rn=ke+rn,$e===112&&(rn=(Te+=rn,""))}else rn="";break;default:rn=r(ue,i(ue,ke,rt),rn,$e,ne+1)}x+=rn,rn=rt=Le=ht=Ze=0,ke="",tt=pe.charCodeAt(++je);break;case 125:case 59:if(ke=(0<Le?ke.replace(f,""):ke).trim(),1<(Pe=ke.length))switch(ht===0&&(Ze=ke.charCodeAt(0),Ze===45||96<Ze&&123>Ze)&&(Pe=(ke=ke.replace(" ",":")).length),0<se&&(le=S(1,ke,ue,ce,ee,Y,Te.length,$e,ne,$e))!==void 0&&(Pe=(ke=le.trim()).length)===0&&(ke="\0\0"),Ze=ke.charCodeAt(0),tt=ke.charCodeAt(1),Ze){case 0:break;case 64:if(tt===105||tt===99){H+=ke+pe.charAt(je);break}default:ke.charCodeAt(Pe-1)!==58&&(Te+=b(ke,Ze,tt,ke.charCodeAt(2)))}rt=Le=ht=Ze=0,ke="",tt=pe.charCodeAt(++je)}}switch(tt){case 13:case 10:q===47?q=0:1+Ze===0&&$e!==107&&0<ke.length&&(Le=1,ke+="\0"),0<se*Ee&&S(0,ke,ue,ce,ee,Y,Te.length,$e,ne,$e),Y=1,ee++;break;case 59:case 125:if(q+Qe+Ne+X===0){Y++;break}default:switch(Y++,Ie=pe.charAt(je),tt){case 9:case 32:if(Qe+X+q===0)switch(Ft){case 44:case 58:case 9:case 32:Ie="";break;default:tt!==32&&(Ie=" ")}break;case 0:Ie="\\0";break;case 12:Ie="\\f";break;case 11:Ie="\\v";break;case 38:Qe+q+X===0&&(Le=rt=1,Ie="\f"+Ie);break;case 108:if(Qe+q+X+ae===0&&0<ht)switch(je-ht){case 2:Ft===112&&pe.charCodeAt(je-3)===58&&(ae=Ft);case 8:Lt===111&&(ae=Lt)}break;case 58:Qe+q+X===0&&(ht=je);break;case 44:q+Ne+Qe+X===0&&(Le=1,Ie+="\r");break;case 34:case 39:q===0&&(Qe=Qe===tt?0:Qe===0?tt:Qe);break;case 91:Qe+q+Ne===0&&X++;break;case 93:Qe+q+Ne===0&&X--;break;case 41:Qe+q+X===0&&Ne--;break;case 40:if(Qe+q+X===0){if(Ze===0)switch(2*Ft+3*Lt){case 533:break;default:Ze=1}Ne++}break;case 64:q+Ne+Qe+X+ht+rn===0&&(rn=1);break;case 42:case 47:if(!(0<Qe+X+Ne))switch(q){case 0:switch(2*tt+3*pe.charCodeAt(je+1)){case 235:q=47;break;case 220:Pe=je,q=42}break;case 42:tt===47&&Ft===42&&Pe+2!==je&&(pe.charCodeAt(Pe+2)===33&&(Te+=pe.substring(Pe,je+1)),Ie="",q=0)}}q===0&&(ke+=Ie)}Lt=Ft,Ft=tt,je++}if(Pe=Te.length,0<Pe){if(Le=ue,0<se&&(le=S(2,Te,Le,ce,ee,Y,Pe,$e,ne,$e),le!==void 0&&(Te=le).length===0))return H+Te+x;if(Te=Le.join(",")+"{"+Te+"}",he*ae!=0){switch(he!==2||w(Te,2)||(ae=0),ae){case 111:Te=Te.replace(U,":-moz-$1")+Te;break;case 112:Te=Te.replace(R,"::-webkit-input-$1")+Te.replace(R,"::-moz-$1")+Te.replace(R,":-ms-input-$1")+Te}ae=0}}return H+Te+x}function i(ce,ue,pe){var $e=ue.trim().split(A);ue=$e;var ne=$e.length,X=ce.length;switch(X){case 0:case 1:var q=0;for(ce=X===0?"":ce[0]+" ";q<ne;++q)ue[q]=d(ce,ue[q],pe).trim();break;default:var Ne=q=0;for(ue=[];q<ne;++q)for(var Qe=0;Qe<X;++Qe)ue[Ne++]=d(ce[Qe]+" ",$e[q],pe).trim()}return ue}function d(ce,ue,pe){var $e=ue.charCodeAt(0);switch(33>$e&&($e=(ue=ue.trim()).charCodeAt(0)),$e){case 38:return ue.replace(L,"$1"+ce.trim());case 58:return ce.trim()+ue.replace(L,"$1"+ce.trim());default:if(0<1*pe&&0<ue.indexOf("\f"))return ue.replace(L,(ce.charCodeAt(0)===58?"":"$1")+ce.trim())}return ce+ue}function b(ce,ue,pe,$e){var ne=ce+";",X=2*ue+3*pe+4*$e;if(X===944){ce=ne.indexOf(":",9)+1;var q=ne.substring(ce,ne.length-1).trim();return q=ne.substring(0,ce).trim()+q+";",he===1||he===2&&w(q,1)?"-webkit-"+q+q:q}if(he===0||he===2&&!w(ne,1))return ne;switch(X){case 1015:return ne.charCodeAt(10)===97?"-webkit-"+ne+ne:ne;case 951:return ne.charCodeAt(3)===116?"-webkit-"+ne+ne:ne;case 963:return ne.charCodeAt(5)===110?"-webkit-"+ne+ne:ne;case 1009:if(ne.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+ne+ne;case 978:return"-webkit-"+ne+"-moz-"+ne+ne;case 1019:case 983:return"-webkit-"+ne+"-moz-"+ne+"-ms-"+ne+ne;case 883:if(ne.charCodeAt(8)===45)return"-webkit-"+ne+ne;if(0<ne.indexOf("image-set(",11))return ne.replace(K,"$1-webkit-$2")+ne;break;case 932:if(ne.charCodeAt(4)===45)switch(ne.charCodeAt(5)){case 103:return"-webkit-box-"+ne.replace("-grow","")+"-webkit-"+ne+"-ms-"+ne.replace("grow","positive")+ne;case 115:return"-webkit-"+ne+"-ms-"+ne.replace("shrink","negative")+ne;case 98:return"-webkit-"+ne+"-ms-"+ne.replace("basis","preferred-size")+ne}return"-webkit-"+ne+"-ms-"+ne+ne;case 964:return"-webkit-"+ne+"-ms-flex-"+ne+ne;case 1023:if(ne.charCodeAt(8)!==99)break;return q=ne.substring(ne.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+q+"-webkit-"+ne+"-ms-flex-pack"+q+ne;case 1005:return M.test(ne)?ne.replace(y,":-webkit-")+ne.replace(y,":-moz-")+ne:ne;case 1e3:switch(q=ne.substring(13).trim(),ue=q.indexOf("-")+1,q.charCodeAt(0)+q.charCodeAt(ue)){case 226:q=ne.replace(Z,"tb");break;case 232:q=ne.replace(Z,"tb-rl");break;case 220:q=ne.replace(Z,"lr");break;default:return ne}return"-webkit-"+ne+"-ms-"+q+ne;case 1017:if(ne.indexOf("sticky",9)===-1)break;case 975:switch(ue=(ne=ce).length-10,q=(ne.charCodeAt(ue)===33?ne.substring(0,ue):ne).substring(ce.indexOf(":",7)+1).trim(),X=q.charCodeAt(0)+(q.charCodeAt(7)|0)){case 203:if(111>q.charCodeAt(8))break;case 115:ne=ne.replace(q,"-webkit-"+q)+";"+ne;break;case 207:case 102:ne=ne.replace(q,"-webkit-"+(102<X?"inline-":"")+"box")+";"+ne.replace(q,"-webkit-"+q)+";"+ne.replace(q,"-ms-"+q+"box")+";"+ne}return ne+";";case 938:if(ne.charCodeAt(5)===45)switch(ne.charCodeAt(6)){case 105:return q=ne.replace("-items",""),"-webkit-"+ne+"-webkit-box-"+q+"-ms-flex-"+q+ne;case 115:return"-webkit-"+ne+"-ms-flex-item-"+ne.replace(G,"")+ne;default:return"-webkit-"+ne+"-ms-flex-line-pack"+ne.replace("align-content","").replace(G,"")+ne}break;case 973:case 989:if(ne.charCodeAt(3)!==45||ne.charCodeAt(4)===122)break;case 931:case 953:if(k.test(ce)===!0)return(q=ce.substring(ce.indexOf(":")+1)).charCodeAt(0)===115?b(ce.replace("stretch","fill-available"),ue,pe,$e).replace(":fill-available",":stretch"):ne.replace(q,"-webkit-"+q)+ne.replace(q,"-moz-"+q.replace("fill-",""))+ne;break;case 962:if(ne="-webkit-"+ne+(ne.charCodeAt(5)===102?"-ms-"+ne:"")+ne,pe+$e===211&&ne.charCodeAt(13)===105&&0<ne.indexOf("transform",10))return ne.substring(0,ne.indexOf(";",27)+1).replace(N,"$1-webkit-$2")+ne}return ne}function w(ce,ue){var pe=ce.indexOf(ue===1?":":"{"),$e=ce.substring(0,ue!==3?pe:10);return pe=ce.substring(pe+1,ce.length-1),ie(ue!==2?$e:$e.replace(V,"$1"),pe,ue)}function E(ce,ue){var pe=b(ue,ue.charCodeAt(0),ue.charCodeAt(1),ue.charCodeAt(2));return pe!==ue+";"?pe.replace(z," or ($1)").substring(4):"("+ue+")"}function S(ce,ue,pe,$e,ne,X,q,Ne,Qe,Ze){for(var tt=0,Ft=ue,Lt;tt<se;++tt)switch(Lt=Ye[tt].call(W,ce,Ft,pe,$e,ne,X,q,Ne,Qe,Ze)){case void 0:case!1:case!0:case null:break;default:Ft=Lt}if(Ft!==ue)return Ft}function P(ce){switch(ce){case void 0:case null:se=Ye.length=0;break;default:if(typeof ce=="function")Ye[se++]=ce;else if(typeof ce=="object")for(var ue=0,pe=ce.length;ue<pe;++ue)P(ce[ue]);else Ee=!!ce|0}return P}function D(ce){return ce=ce.prefix,ce!==void 0&&(ie=null,ce?typeof ce!="function"?he=1:(he=2,ie=ce):he=0),D}function W(ce,ue){var pe=ce;if(33>pe.charCodeAt(0)&&(pe=pe.trim()),Oe=pe,pe=[Oe],0<se){var $e=S(-1,ue,pe,pe,ee,Y,0,0,0,0);$e!==void 0&&typeof $e=="string"&&(ue=$e)}var ne=r(me,pe,ue,0,0);return 0<se&&($e=S(-2,ne,pe,pe,ee,Y,ne.length,0,0,0),$e!==void 0&&(ne=$e)),Oe="",ae=0,Y=ee=1,ne}var B=/^\0+/g,f=/[\0\r\f]/g,y=/: */g,M=/zoo|gra/,N=/([,: ])(transform)/g,A=/,\r+?/g,L=/([\t\r\n ])*\f?&/g,C=/@(k\w+)\s*(\S*)\s*/,R=/::(place)/g,U=/:(read-only)/g,Z=/[svh]\w+-[tblr]{2}/,F=/\(\s*(.*)\s*\)/g,z=/([\s\S]*?);/g,G=/-self|flex-/g,V=/[^]*?(:[rp][el]a[\w-]+)[^]*/,k=/stretch|:\s*\w+\-(?:conte|avail)/,K=/([^-])(image-set\()/,Y=1,ee=1,ae=0,he=1,me=[],Ye=[],se=0,ie=null,Ee=0,Oe="";return W.use=P,W.set=D,u!==void 0&&D(u),W}var o=s,a=function(r){var i=new WeakMap;return function(d){if(i.has(d))return i.get(d);var b=r(d);return i.set(d,b),b}},c=a,l="/*|*/",p=l+"}";function h(u){u&&m.current.insert(u+"}")}var m={current:null},g=function(r,i,d,b,w,E,S,P,D,W){switch(r){case 1:{switch(i.charCodeAt(0)){case 64:return m.current.insert(i+";"),"";case 108:if(i.charCodeAt(2)===98)return""}break}case 2:{if(P===0)return i+l;break}case 3:switch(P){case 102:case 112:return m.current.insert(d[0]+i),"";default:return i+(W===0?l:"")}case-2:i.split(p).forEach(h)}},v=function(r){r===void 0&&(r={});var i=r.key||"css",d;r.prefix!==void 0&&(d={prefix:r.prefix});var b=new o(d),w={},E;{E=r.container||document.head;var S=document.querySelectorAll("style[data-emotion-"+i+"]");Array.prototype.forEach.call(S,function(f){var y=f.getAttribute("data-emotion-"+i);y.split(" ").forEach(function(M){w[M]=!0}),f.parentNode!==E&&E.appendChild(f)})}var P;if(b.use(r.stylisPlugins)(g),P=function(y,M,N,A){var L=M.name;if(m.current=N,!1)var C;b(y,M.styles),A&&(B.inserted[L]=!0)},!1)var D,W;var B={key:i,sheet:new e.a({key:i,container:E,nonce:r.nonce,speedy:r.speedy}),nonce:r.nonce,inserted:w,registered:{},insert:P};return B},O=n.a=v},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PodcastIcon",svgParams:{height:19,width:19}}),Object(e.h)("path",{d:"M10.1505 3H8.61291C6.06527 3 4 4.9401 4 7.33333V10","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M8.89246 3H10.4301C12.9778 3 15.043 4.9401 15.043 7.33333V10.5","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M3 12.1429V13.3571C3 14.5406 3.81359 15.5 4.81721 15.5H6.42473V10H4.81721C3.81359 10 3 10.9594 3 12.1429Z","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M16 12.1429V13.3571C16 14.5406 15.1864 15.5 14.1828 15.5H12.5753V10H14.1828C15.1864 10 16 10.9594 16 12.1429Z","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";function e(o,a){if(o.length!==a.length)return!1;for(var c=0;c<o.length;c++)if(o[c]!==a[c])return!1;return!0}function s(o,a){a===void 0&&(a=e);var c,l=[],p,h=!1;function m(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];return h&&c===this&&a(g,l)||(p=o.apply(this,g),h=!0,c=this,l=g),p}return m}n.a=s},function($,n,t){var e=t(418);function s(o){return o==null?"":e(o)}$.exports=s},function($,n,t){var e=t(251),s=0;function o(a){var c=++s;return e(a)+c}$.exports=o},function($,n,t){"use strict";t.d(n,"b",function(){return D}),t.d(n,"a",function(){return W});var e=t(0),s=t(1),o=t(351),a=t.n(o),c=t(11),l=t.n(c),p=t(3),h=t.n(p),m=t(9),g=t.n(m),v=t(7),O=t(8),u=t.n(O),r=t(54),i=t(243),d=t(435),b=t(47),w=Object.defineProperty,E=(B,f,y)=>f in B?w(B,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):B[f]=y,S=(B,f,y)=>(E(B,typeof f!="symbol"?f+"":f,y),y),P=(B,f,y)=>new Promise((M,N)=>{var A=R=>{try{C(y.next(R))}catch(U){N(U)}},L=R=>{try{C(y.throw(R))}catch(U){N(U)}},C=R=>R.done?M(R.value):Promise.resolve(R.value).then(A,L);C((y=y.apply(B,f)).next())});class D extends e.Component{constructor(){super(...arguments);S(this,"toggleTopExclusion",f=>Object(O.stateTransaction)(this,(y,M)=>P(this,[y,M],function*(N,{post:A,onChange:L}){if(N.topExcluding)return;this.setState({topExcluding:f.id});const C=A.top_exclusions.includes(f.id),R=`/api/v1/publication/${f.id}/exclusion/${A.id}`;try{C?(yield l.a.del(R),A.top_exclusions.splice(0)):(yield l.a.post(R),A.top_exclusions.splice(0),A.top_exclusions.push(f.id)),["/","/beta","/publish"].includes(window.location.pathname)&&window.location.reload()}catch(U){console.error("Failed to exclude post:",U),alert(Object(O.getNetworkErrorMessage)(U));return}finally{this.setState({topExcluding:null})}L&&(yield L({post:A}))}))),S(this,"toggleSectionPin",(f,y)=>Object(O.stateTransaction)(this,(M,N)=>P(this,[M,N],function*(A,{post:L,onChange:C}){if(A.pinning)return;this.setState({sectionPinning:y});const R=`/api/v1/publication/${f.id}/section/${y}/pin/${L.id}`;try{L.is_section_pinned?(yield l.a.del(R),L.is_section_pinned=!1):(yield l.a.post(R),L.is_section_pinned=!0),(["/","/beta","/publish"].includes(window.location.pathname)||window.location.pathname.startsWith("/s/"))&&window.location.reload()}catch(U){console.error("Failed to pin post:",U),alert(Object(O.getNetworkErrorMessage)(U));return}finally{this.setState({sectionPinning:null})}C&&(yield C({post:L}))}))),S(this,"togglePin",f=>Object(O.stateTransaction)(this,(y,M)=>P(this,[y,M],function*(N,{post:A,onChange:L}){if(N.pinning)return;this.setState({pinning:f.id});const C=A.pins.includes(f.id),R=`/api/v1/publication/${f.id}/pin/${A.id}`;try{C?(yield l.a.del(R),A.pins.splice(A.pins.indexOf(f.id),1)):(yield l.a.post(R),f.multiple_pins||A.pins.splice(0),A.pins.push(f.id)),["/","/beta","/publish"].includes(window.location.pathname)&&window.location.reload()}catch(U){console.error("Failed to pin post:",U),alert(Object(O.getNetworkErrorMessage)(U));return}finally{this.setState({pinning:null})}L&&(yield L({post:A}))}))),S(this,"sendEmail",()=>P(this,null,function*(){const{post:f}=this.props,y={everyone:"everyone",only_paid:"paid subscribers",founding:"founding members"}[f.audience];if(!confirm(`Send this published post as an email to ${y}?`))return;const M=`/api/v1/drafts/${f.id}/publish`;try{yield l.a.post(M).send({send:!0,only_send:!0}),location.reload()}catch(N){console.error("Failed to send post:",N),alert(Object(O.getNetworkErrorMessage)(N))}})),S(this,"clearCache",()=>P(this,null,function*(){const{post:f}=this.props;try{yield l.a.put(`/api/v1/posts/${f.id}/clear_cache`),location.reload()}catch(y){console.error("Failed to clear post from cache"),alert(Object(O.getNetworkErrorMessage)(y))}})),S(this,"duplicatePost",()=>P(this,null,function*(){this.setState({duplicating:!0});const{pub:f,post:y}=this.props;try{const M=yield l.a.post(`/api/v1/posts/${y.id}/duplicate`);Object(O.redirect)(Object(p.getEditPostUrlById)(f,M.body.id),{local_navigation:!1})}catch(M){this.setState({duplicating:!1}),console.error("Failed to duplicate"),alert(Object(O.getNetworkErrorMessage)(M))}}))}isOpen(){return this.editMenu.isOpen()}toggle(){this.editMenu.toggle()}open(){this.editMenu.open()}close(){this.editMenu.close()}render({pub:f,post:y,hidePinning:M,user:N,emailSent:A,allowSendEmail:L,className:C,useDrawerOnMobile:R},{pinning:U,sectionPinning:Z,topExcluding:F,duplicating:z}){let G=null;return y.section_id&&f.sections&&f.sections.length&&(G=f.sections.find(V=>V.id===y.section_id)),Object(e.h)(r.b,{attachOnActive:!0,ref:V=>this.editMenu=V,className:C,useDrawerOnMobile:R},Object(e.h)(b.a,{href:Object(p.getPostUrl)(f,y,{edit:!0}),onClick:a.a},"Edit post"),!M&&y.slug&&[Object(m.isPinnable)(f)&&y.section_id&&(y.section_name||G.name)&&Object(e.h)(b.a,{onClick:()=>this.toggleSectionPin(f,y.section_id)},[y.is_section_pinned^Z===y.section_id?"Unpin from":"Pin on",` ${y.section_name||G.name}`]),Object(m.isPinnable)(f)&&Object(e.h)(b.a,{onClick:()=>this.togglePin(f)},[y.pins.includes(f.id)^U===f.id?"Unpin from":"Pin on",f.parent_publication_id||G?` ${f.name}`:" home page"]),f.parent_publication&&Object(m.isPinnable)(f.parent_publication)&&Object(e.h)(b.a,{onClick:()=>this.togglePin(f.parent_publication)},[y.pins.includes(f.parent_publication.id)^U===f.parent_publication.id?"Unpin from":"Pin on",` ${f.parent_publication.name}`])],y.slug&&y.type!=="adhoc_email"&&[Object(e.h)(b.a,{onClick:()=>this.toggleTopExclusion(f)},[y.top_exclusions.includes(f.id)^F===f.id?"Include in":"Exclude from"," Top",f.parent_publication_id&&` for ${f.name}`]),f.parent_publication&&Object(e.h)(b.a,{onClick:()=>this.toggleTopExclusion(f.parent_publication)},[y.top_exclusions.includes(f.parent_publication.id)^F===f.parent_publication.id?"Include in":"Exclude from"," Top",` for ${f.parent_publication.name}`])],Object(e.h)(b.a,{disabled:z,onClick:()=>this.duplicatePost()},z?"Duplicating":"Duplicate"," to drafts"),!A&&L&&y.is_published&&Object(e.h)(b.a,{onClick:()=>this.sendEmail()},"Send as email"),(N==null?void 0:N.is_global_admin)&&Object(e.h)(b.a,{onClick:()=>this.clearCache()},"Clear post from cache"),Object(e.h)(b.a,{onClick:()=>{window.open(`${Object(p.getPostUrl)(f,y)}/media-assets`)}},"View media assets"))}}S(D,"state",{duplicating:!1});function W({pub:B,post:f,iconHeight:y,hidePinning:M,user:N,emailSent:A,allowSendEmail:L,showUpdatedIcons:C,dropdownClassName:R,iconClassName:U}){const Z=Object(s.j)();return Object(e.h)(e.Fragment,null,Object(e.h)(b.a,{onClick:()=>{Z.current.isOpen()||Object(v.i)(v.a.EDIT_POST_DROPDOWN_MENU_OPENED),Z.current.toggle()}},C?Object(e.h)(d.default,{stroke:"#262626",height:y,className:U}):Object(e.h)(i.default,{stroke:"#757575",height:y,className:U})),Object(e.h)(D,{ref:Z,pub:B,post:f,hidePinning:M,user:N,emailSent:A,allowSendEmail:L,className:R}))}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"Back15Icon",svgParams:{width:20,height:22,viewBox:"0 0 20 22",stroke:"none",fill:"white"}}),Object(e.h)("path",{d:"M0 11.8557C0 13.2164 0.260417 14.4989 0.78125 15.7034C1.30208 16.9078 2.02148 17.969 2.93945 18.887C3.85742 19.7984 4.91536 20.5146 6.11328 21.0354C7.31771 21.5562 8.60026 21.8166 9.96094 21.8166C11.3216 21.8166 12.6009 21.5562 13.7988 21.0354C15.0033 20.5146 16.0645 19.7984 16.9824 18.887C17.9004 17.969 18.6198 16.9078 19.1406 15.7034C19.6615 14.4989 19.9219 13.2164 19.9219 11.8557C19.9219 10.6578 19.7168 9.51846 19.3066 8.43773C18.8965 7.357 18.3236 6.38044 17.5879 5.50805C16.8587 4.62914 16.0026 3.89672 15.0195 3.31078C14.043 2.71833 12.985 2.30818 11.8457 2.08031V0.693592C11.8457 0.342029 11.7448 0.12393 11.543 0.039295C11.3411 -0.0453404 11.1068 0.00674294 10.8398 0.195545L7.72461 2.37328C7.49674 2.52953 7.38281 2.71182 7.38281 2.92015C7.38281 3.12849 7.49674 3.31403 7.72461 3.47679L10.8301 5.6643C11.097 5.85961 11.3314 5.91495 11.5332 5.83031C11.7415 5.73916 11.8457 5.51781 11.8457 5.16625V3.77953C12.7702 3.98786 13.6198 4.33943 14.3945 4.83422C15.1758 5.32901 15.8529 5.93448 16.4258 6.65062C17.0052 7.36677 17.4544 8.16755 17.7734 9.05297C18.0924 9.93187 18.252 10.8661 18.252 11.8557C18.252 13.008 18.0371 14.0888 17.6074 15.0979C17.1842 16.1005 16.5918 16.9827 15.8301 17.7444C15.0749 18.4996 14.196 19.0888 13.1934 19.512C12.1908 19.9416 11.1133 20.1565 9.96094 20.1565C8.80859 20.1565 7.72786 19.9416 6.71875 19.512C5.71615 19.0888 4.83398 18.4996 4.07227 17.7444C3.31706 16.9827 2.72461 16.1005 2.29492 15.0979C1.87174 14.0888 1.66016 13.008 1.66016 11.8557C1.66016 10.9312 1.80339 10.0523 2.08984 9.21898C2.3763 8.37914 2.77669 7.61416 3.29102 6.92406C3.80534 6.23396 4.40755 5.64151 5.09766 5.14672C5.29948 4.99698 5.42643 4.81469 5.47852 4.59984C5.53711 4.385 5.50456 4.17666 5.38086 3.97484C5.25716 3.77953 5.07812 3.66234 4.84375 3.62328C4.60938 3.57771 4.38477 3.6363 4.16992 3.79906C3.33008 4.40453 2.59766 5.12719 1.97266 5.96703C1.34766 6.80036 0.86263 7.71833 0.517578 8.72094C0.172526 9.71703 0 10.762 0 11.8557ZM7.10938 15.8596C7.29818 15.8596 7.44792 15.801 7.55859 15.6838C7.66927 15.5601 7.72461 15.3941 7.72461 15.1858V9.02367C7.72461 8.76976 7.66602 8.58096 7.54883 8.45726C7.43164 8.32706 7.26237 8.26195 7.04102 8.26195C6.9043 8.26195 6.77734 8.28799 6.66016 8.34008C6.54297 8.38565 6.39648 8.46703 6.2207 8.58422L4.88281 9.49242C4.77214 9.57055 4.6875 9.65844 4.62891 9.75609C4.57682 9.84724 4.55078 9.94815 4.55078 10.0588C4.55078 10.2216 4.60612 10.3616 4.7168 10.4787C4.82747 10.5959 4.96094 10.6545 5.11719 10.6545C5.21484 10.6545 5.29622 10.6415 5.36133 10.6155C5.42643 10.5894 5.5013 10.5406 5.58594 10.469L6.52344 9.78539H6.50391V15.1858C6.50391 15.3876 6.55924 15.5504 6.66992 15.6741C6.7806 15.7978 6.92708 15.8596 7.10938 15.8596ZM12.0703 15.9768C12.8776 15.9768 13.5254 15.7392 14.0137 15.2639C14.5085 14.7821 14.7559 14.1474 14.7559 13.3596C14.7559 12.6435 14.5378 12.0543 14.1016 11.592C13.6654 11.1298 13.099 10.8987 12.4023 10.8987C12.0898 10.8987 11.7839 10.9703 11.4844 11.1135C11.1914 11.2567 10.9798 11.4521 10.8496 11.6995H10.8984L11.0742 9.49242H13.9941C14.1374 9.49242 14.2611 9.44034 14.3652 9.33617C14.4759 9.232 14.5312 9.09528 14.5312 8.92601C14.5312 8.76325 14.4759 8.63305 14.3652 8.53539C14.2611 8.43122 14.1374 8.37914 13.9941 8.37914H10.8789C10.3646 8.37914 10.0846 8.64932 10.0391 9.18969L9.82422 12.0022C9.80469 12.2431 9.85352 12.4254 9.9707 12.5491C10.0879 12.6662 10.2539 12.7248 10.4688 12.7248C10.625 12.7248 10.752 12.7053 10.8496 12.6662C10.9473 12.6272 11.0645 12.5556 11.2012 12.4514C11.39 12.2821 11.5658 12.1617 11.7285 12.0901C11.8913 12.012 12.0703 11.9729 12.2656 11.9729C12.6432 11.9729 12.9492 12.1031 13.1836 12.3635C13.418 12.6174 13.5352 12.956 13.5352 13.3791C13.5352 13.8088 13.4017 14.1636 13.1348 14.4436C12.8678 14.7235 12.5326 14.8635 12.1289 14.8635C11.8359 14.8635 11.5723 14.7886 11.3379 14.6389C11.1035 14.4827 10.9245 14.2776 10.8008 14.0237C10.7292 13.9 10.6478 13.8056 10.5566 13.7405C10.4655 13.6689 10.3581 13.633 10.2344 13.633C10.0716 13.633 9.93815 13.6851 9.83398 13.7893C9.73633 13.8935 9.6875 14.0302 9.6875 14.1995C9.6875 14.2646 9.69401 14.3297 9.70703 14.3948C9.72005 14.4599 9.73958 14.525 9.76562 14.5901C9.89583 14.9416 10.1628 15.2606 10.5664 15.5471C10.9766 15.8336 11.4779 15.9768 12.0703 15.9768Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"Forward30Icon",svgParams:{width:20,height:22,viewBox:"0 0 20 22",stroke:"none",fill:"white"}}),Object(e.h)("path",{d:"M13.1738 15.9615C13.7142 15.9615 14.1829 15.802 14.5801 15.483C14.9837 15.1574 15.2962 14.705 15.5176 14.1255C15.7454 13.5461 15.8594 12.8658 15.8594 12.0845C15.8594 11.2968 15.7454 10.6099 15.5176 10.024C15.2962 9.43803 14.9837 8.9823 14.5801 8.65678C14.1829 8.33126 13.7142 8.1685 13.1738 8.1685C12.6335 8.1685 12.1615 8.33126 11.7578 8.65678C11.3542 8.97579 11.0417 9.42827 10.8203 10.0142C10.599 10.6001 10.4883 11.2902 10.4883 12.0845C10.4883 12.8658 10.599 13.5461 10.8203 14.1255C11.0417 14.705 11.3542 15.1574 11.7578 15.483C12.1615 15.802 12.6335 15.9615 13.1738 15.9615ZM6.875 15.9615C7.64323 15.9615 8.27148 15.7531 8.75977 15.3365C9.25456 14.9133 9.50195 14.3729 9.50195 13.7154C9.50195 13.2401 9.35221 12.83 9.05273 12.4849C8.75326 12.1333 8.3724 11.9315 7.91016 11.8794V11.9283C8.28125 11.8632 8.59701 11.6613 8.85742 11.3228C9.12435 10.9843 9.25781 10.5969 9.25781 10.1607C9.25781 9.57475 9.03971 9.09624 8.60352 8.72514C8.17383 8.35405 7.61719 8.1685 6.93359 8.1685C6.34115 8.1685 5.82357 8.3215 5.38086 8.62749C4.93815 8.92697 4.66471 9.31108 4.56055 9.77983C4.54753 9.83842 4.53776 9.89376 4.53125 9.94585C4.52474 9.99793 4.52148 10.05 4.52148 10.1021C4.52148 10.2779 4.57031 10.4211 4.66797 10.5318C4.77214 10.6425 4.90885 10.6978 5.07812 10.6978C5.35156 10.6978 5.54036 10.5448 5.64453 10.2388C5.74219 9.93282 5.89518 9.7017 6.10352 9.54545C6.31185 9.38269 6.57878 9.30131 6.9043 9.30131C7.24935 9.30131 7.52604 9.39572 7.73438 9.58452C7.94922 9.76681 8.05664 10.0077 8.05664 10.3072C8.05664 10.6197 7.94922 10.8801 7.73438 11.0884C7.51953 11.2902 7.23958 11.3912 6.89453 11.3912H6.47461C6.31185 11.3912 6.18164 11.4432 6.08398 11.5474C5.98633 11.6451 5.9375 11.7818 5.9375 11.9576C5.9375 12.1203 5.98633 12.257 6.08398 12.3677C6.18815 12.4719 6.31836 12.524 6.47461 12.524H6.93359C7.35026 12.524 7.67904 12.6281 7.91992 12.8365C8.16081 13.0448 8.28125 13.3215 8.28125 13.6665C8.28125 13.9986 8.14779 14.2785 7.88086 14.5064C7.62044 14.7277 7.28841 14.8384 6.88477 14.8384C6.53971 14.8384 6.25 14.757 6.01562 14.5943C5.78125 14.4315 5.60872 14.1971 5.49805 13.8912C5.43945 13.7284 5.36458 13.6112 5.27344 13.5396C5.18229 13.468 5.07161 13.4322 4.94141 13.4322C4.77865 13.4322 4.64193 13.4875 4.53125 13.5982C4.42708 13.7089 4.375 13.8521 4.375 14.0279C4.375 14.08 4.37826 14.1353 4.38477 14.1939C4.39128 14.246 4.40104 14.2981 4.41406 14.3501C4.51823 14.8059 4.80469 15.19 5.27344 15.5025C5.74219 15.8085 6.27604 15.9615 6.875 15.9615ZM13.1738 14.7798C12.7441 14.7798 12.3991 14.5389 12.1387 14.0572C11.8848 13.5754 11.7578 12.9179 11.7578 12.0845C11.7578 11.2317 11.8848 10.5643 12.1387 10.0826C12.3926 9.59428 12.7376 9.35014 13.1738 9.35014C13.61 9.35014 13.9518 9.59103 14.1992 10.0728C14.4531 10.5546 14.5801 11.2251 14.5801 12.0845C14.5801 12.9179 14.4531 13.5754 14.1992 14.0572C13.9453 14.5389 13.6035 14.7798 13.1738 14.7798ZM9.96094 21.8111C11.3216 21.8111 12.6009 21.5507 13.7988 21.0298C15.0033 20.509 16.0645 19.7928 16.9824 18.8814C17.9004 17.9634 18.6198 16.9022 19.1406 15.6978C19.6615 14.4934 19.9219 13.2108 19.9219 11.8501C19.9219 10.7564 19.7493 9.71147 19.4043 8.71538C19.0592 7.71277 18.5742 6.7948 17.9492 5.96147C17.3242 5.12163 16.5918 4.39897 15.752 3.7935C15.5371 3.63074 15.3125 3.57215 15.0781 3.61772C14.8438 3.65678 14.6647 3.77397 14.541 3.96928C14.4173 4.17111 14.3815 4.37944 14.4336 4.59428C14.4922 4.80913 14.6224 4.99142 14.8242 5.14116C15.5143 5.63595 16.1165 6.2284 16.6309 6.9185C17.1452 7.60861 17.5456 8.37358 17.832 9.21342C18.1185 10.0468 18.2617 10.9257 18.2617 11.8501C18.2617 13.0025 18.0469 14.0832 17.6172 15.0923C17.194 16.0949 16.6016 16.9771 15.8398 17.7388C15.0846 18.494 14.2025 19.0832 13.1934 19.5064C12.1908 19.9361 11.1133 20.1509 9.96094 20.1509C8.80859 20.1509 7.73112 19.9361 6.72852 19.5064C5.72591 19.0832 4.84375 18.494 4.08203 17.7388C3.32682 16.9771 2.73438 16.0949 2.30469 15.0923C1.88151 14.0832 1.66992 13.0025 1.66992 11.8501C1.66992 10.7043 1.88151 9.63009 2.30469 8.62749C2.73438 7.61837 3.32682 6.73621 4.08203 5.981C4.83724 5.21928 5.71615 4.62358 6.71875 4.19389C7.72135 3.7642 8.79883 3.54936 9.95117 3.54936V1.8892C8.59049 1.8892 7.30794 2.14962 6.10352 2.67045C4.9056 3.19129 3.84766 3.91069 2.92969 4.82866C2.01823 5.74663 1.30208 6.80782 0.78125 8.01225C0.260417 9.21017 0 10.4895 0 11.8501C0 13.2108 0.260417 14.4934 0.78125 15.6978C1.30208 16.9022 2.02148 17.9634 2.93945 18.8814C3.85742 19.7928 4.91536 20.509 6.11328 21.0298C7.31771 21.5507 8.60026 21.8111 9.96094 21.8111ZM8.07617 0.697798V5.17045C8.07617 5.51551 8.17708 5.73361 8.37891 5.82475C8.58724 5.90939 8.82487 5.8573 9.0918 5.6685L12.207 3.481C12.4284 3.33126 12.5391 3.15223 12.5391 2.94389C12.5456 2.72905 12.4349 2.5435 12.207 2.38725L9.10156 0.199751C8.82812 0.00443892 8.58724 -0.0476444 8.37891 0.0435014C8.17708 0.128137 8.07617 0.346236 8.07617 0.697798Z"}));n.default=O},,function($,n){function t(e,s){for(var o=-1,a=e==null?0:e.length,c=Array(a);++o<a;)c[o]=s(e[o],o,e);return c}$.exports=t},function($,n,t){var e=t(207),s=e.slice,o=e.pluck,a=e.each,c=e.bind,l=e.create,p=e.isList,h=e.isFunction,m=e.isObject;$.exports={createStore:O};var g={version:"2.0.12",enabled:!1,get:function(u,r){var i=this.storage.read(this._namespacePrefix+u);return this._deserialize(i,r)},set:function(u,r){return r===void 0?this.remove(u):(this.storage.write(this._namespacePrefix+u,this._serialize(r)),r)},remove:function(u){this.storage.remove(this._namespacePrefix+u)},each:function(u){var r=this;this.storage.each(function(i,d){u.call(r,r._deserialize(i),(d||"").replace(r._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(u){return this._namespacePrefix=="__storejs_"+u+"_"},createStore:function(){return O.apply(this,arguments)},addPlugin:function(u){this._addPlugin(u)},namespace:function(u){return O(this.storage,this.plugins,u)}};function v(){var u=typeof console=="undefined"?null:console;if(!!u){var r=u.warn?u.warn:u.log;r.apply(u,arguments)}}function O(u,r,i){i||(i=""),u&&!p(u)&&(u=[u]),r&&!p(r)&&(r=[r]);var d=i?"__storejs_"+i+"_":"",b=i?new RegExp("^"+d):null,w=/^[a-zA-Z0-9_\-]*$/;if(!w.test(i))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var E={_namespacePrefix:d,_namespaceRegexp:b,_testStorage:function(P){try{var D="__storejs__test__";P.write(D,D);var W=P.read(D)===D;return P.remove(D),W}catch(B){return!1}},_assignPluginFnProp:function(P,D){var W=this[D];this[D]=function(){var f=s(arguments,0),y=this;function M(){if(!!W)return a(arguments,function(A,L){f[L]=A}),W.apply(y,f)}var N=[M].concat(f);return P.apply(y,N)}},_serialize:function(P){return JSON.stringify(P)},_deserialize:function(P,D){if(!P)return D;var W="";try{W=JSON.parse(P)}catch(B){W=P}return W!==void 0?W:D},_addStorage:function(P){this.enabled||this._testStorage(P)&&(this.storage=P,this.enabled=!0)},_addPlugin:function(P){var D=this;if(p(P)){a(P,function(f){D._addPlugin(f)});return}var W=o(this.plugins,function(f){return P===f});if(!W){if(this.plugins.push(P),!h(P))throw new Error("Plugins must be function values that return objects");var B=P.call(this);if(!m(B))throw new Error("Plugins must return an object of function properties");a(B,function(f,y){if(!h(f))throw new Error("Bad plugin property: "+y+" from plugin "+P.name+". Plugins should only return functions.");D._assignPluginFnProp(f,y)})}},addStorage:function(P){v("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(P)}},S=l(E,g,{plugins:[]});return S.raw={},a(S,function(P,D){h(P)&&(S.raw[D]=c(S,P))}),a(u,function(P){S._addStorage(P)}),a(r,function(P){S._addPlugin(P)}),S}},function($,n,t){var e=t(207),s=e.Global;$.exports={name:"localStorage",read:a,write:c,each:l,remove:p,clearAll:h};function o(){return s.localStorage}function a(m){return o().getItem(m)}function c(m,g){return o().setItem(m,g)}function l(m){for(var g=o().length-1;g>=0;g--){var v=o().key(g);m(a(v),v)}}function p(m){return o().removeItem(m)}function h(){return o().clear()}},function($,n){$.exports={name:"memoryStorage",read:e,write:s,each:o,remove:a,clearAll:c};var t={};function e(l){return t[l]}function s(l,p){t[l]=p}function o(l){for(var p in t)t.hasOwnProperty(p)&&l(t[p],p)}function a(l){delete t[l]}function c(l){t={}}},function($,n,t){var e=t(565),s=e(function(o,a,c){o[c?0:1].push(a)},function(){return[[],[]]});$.exports=s},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s,o){(o==null||o>s.length)&&(o=s.length);for(var a=0,c=new Array(o);a<o;a++)c[a]=s[a];return c}},function($,n,t){"use strict";t.d(n,"a",function(){return v}),t.d(n,"b",function(){return O});var e=t(0),s=t(6),o=t.n(s),a=t(622),c=t(227),l=t(14),p=t(4),h=t(35),m=t(10),g={select:"frontend-pencraft-unstable-Select-module__select--1EyiD"};const v=({children:u,value:r,className:i,onChange:d})=>{var b;const w=u.find(E=>E.props.value===r);return w||console.error("Select: value not found in children. value:",r,"options:",u.map(E=>E.props.value)),Object(e.h)(p.c,{className:o()(g.select,i),alignItems:"center",justifyContent:"space-between",paddingX:20,paddingBottom:8,paddingTop:8,gap:8},Object(e.h)(m.b,{font:"text",weight:"semibold",size:14,color:"primary"},(b=w==null?void 0:w.props.children)!=null?b:""),Object(e.h)(c.default,null),Object(e.h)("select",{value:r,onChange:E=>{d(E.target.value)}},u))};function O({value:u,options:r,onChange:i,fill:d,disabled:b,className:w}){var E,S;return Object(e.h)(h.c,{className:w,trigger:Object(e.h)(l.a,{priority:"secondary",fill:d,disabled:b,rightIcon:Object(e.h)(a.a,{size:20}),"data-testid":"stock-select"},(S=(E=r.find(P=>P.value===u))==null?void 0:E.label)!=null?S:"Select")},r.map(P=>Object(e.h)(h.d,{onClick:()=>i(P.value)},P.label)))}},function($,n,t){"use strict";n.a={root:"frontend-reader2-Notifications-module__root--n0pTs",trigger:"frontend-reader2-Notifications-module__trigger--sfZsc",badge:"frontend-reader2-Notifications-module__badge--3-jZf",circle:"frontend-reader2-Notifications-module__circle--t9yd6",dropdown:"frontend-reader2-Notifications-module__dropdown--2RtmE"}},function($,n,t){"use strict";t.d(n,"b",function(){return wt}),t.d(n,"a",function(){return Te}),t.d(n,"d",function(){return Yn}),t.d(n,"e",function(){return Sn}),t.d(n,"i",function(){return nr}),t.d(n,"c",function(){return Jt}),t.d(n,"j",function(){return ce.i}),t.d(n,"h",function(){return ce.f}),t.d(n,"f",function(){return ce.a}),t.d(n,"g",function(){return ce.b});var e=t(0),s=t(6),o=t.n(s),a=t(9),c=t(1),l=t(17),p=t(11),h=t.n(p),m=t(15),g=t.n(m),v=t(3),O=t(44),u=t(159),r=(zt,Kt,$t)=>new Promise((et,Wt)=>{var Vt=pn=>{try{Tn($t.next(pn))}catch(Gn){Wt(Gn)}},cn=pn=>{try{Tn($t.throw(pn))}catch(Gn){Wt(Gn)}},Tn=pn=>pn.done?et(pn.value):Promise.resolve(pn.value).then(Vt,cn);Tn(($t=$t.apply(zt,Kt)).next())});const i={"1m":"one minute","1h":"one hour","24h":"24 hours","7d":"one week","30d":"one month","100y":"all time"},d=({ban:zt,onReply:Kt,showReplyLink:$t,name:et})=>{const Wt=g()(zt.expiry).standardDatetimeWithYear();return Object(e.h)("div",{className:"banned"},et," is banned until ",Wt,"."," ",$t&&Object(e.h)("span",null,Object(e.h)("a",{onClick:Kt,href:"javascript:void(0)"},"Leave a comment")," ","to let them know why."))};function b({pub:zt,sub:Kt,children:$t,tab:et}){return!Kt||!Kt.email?$t:Object(e.h)("a",{target:"_blank",href:Object(v.getSubscriberDetailsUrl)(zt,Kt.email,{tab:et})},$t)}const w=({sub:zt})=>zt?zt.is_subscribed?Object(e.h)("span",{className:"subscribed"},"Subscribed (Paid)"):zt.is_free_subscribed?Object(e.h)("span",{className:"subscribed"},"Subscribed (Free)"):Object(e.h)("span",{className:"not-subscribed"},"Not Subscribed"):null,E=({bans:zt,activeBans:Kt})=>zt.length===0?Object(e.h)("span",null,"No previous bans"):Kt.length>0?Object(e.h)("span",{className:"banned status"},"Banned"):Object(e.h)("span",{className:"status"},"Banned previously from ",g()(zt[0].start).standardDatetimeWithYear()," to"," ",g()(zt[0].expiry).standardDatetimeWithYear()),S=({comment:zt,pub:Kt,onReply:$t,onBan:et,onClose:Wt})=>{const[Vt,cn]=Object(c.k)(null),[Tn,pn]=Object(c.k)(!1),[Gn,hr]=Object(c.k)([]),[Rn,pr]=Object(c.k)(!1),[zn,Ar]=Object(c.k)("24h"),[Rr,ir]=Object(c.k)(null),[Sr,Pr]=Object(c.k)(!0),yr=Object(c.j)(null),br=!!zt||Tn,Br=wr=>{const $o=wr;wr.forEach(xo=>{$o.findIndex(Vo=>Vo.id===xo.id)==-1&&$o.push(xo)}),hr($o)},Nr=()=>{$t(zt.id),yr.current.close()};Object(c.d)(()=>{!(yr==null?void 0:yr.current)||(br?yr.current.state.open||yr.current.open():yr.current.state.open&&yr.current.close())},[zt,Tn]),Object(c.d)(()=>r(void 0,null,function*(){if(!!zt){pr(!1),pn(!0),hr([]),ir(null),cn(null);try{const wr=yield h.a.get(`/api/v1/user/${zt.user_id}/bans`);hr(wr.body.bans),cn(wr.body.sub)}catch(wr){console.error("Failed to get bans:",wr),ir(!0)}pn(!1)}}),[zt]);const lo=()=>r(void 0,null,function*(){pn(!0);try{const wr=yield h.a.post(`/api/v1/comment_ban/${zt.id}`,{pub:Kt}).send({user_id:zt.user_id,expiry:zn,removeAllComments:Sr});Sr&&document.location.reload(),Br(wr.body.bans),pr(!0),pn(!1),et(zt,Gn)}catch(wr){console.error("Failed to submit ban",wr),ir(!0)}pn(!1)});if(!zt)return null;const Zr=i[zn],zr=Gn.filter(wr=>g()(wr.expiry).isAfter(g()()));return Object(e.h)(O.a,{ref:yr,noExitOnClick:!0,onClose:Wt},Object(e.h)("div",{className:"ban-dialog comment"},Object(e.h)("div",{className:"profile"},Object(e.h)("div",{className:"photo"},Object(e.h)(b,{pub:Kt,sub:Vt},Object(e.h)(u.b,{photo_url:zt.photo_url,size:80,banned:zr.length>0}))),Object(e.h)("div",{className:"info"},Object(e.h)(b,{pub:Kt,sub:Vt},Object(e.h)("span",{className:"name"},zt.name)),Object(e.h)(w,{sub:Vt}),Object(e.h)(E,{bans:Gn,activeBans:zr}))),Rr&&Object(e.h)("div",{className:"error"},"Sorry, an error occurred."),Tn?"Loading...":Object(e.h)("form",{className:"form"},zr.length===0&&Object(e.h)("div",null,Object(e.h)("label",null,"Ban from commenting for",Object(e.h)("select",{onInput:wr=>Ar(wr.target.value),value:zn},Object(e.h)("option",{value:"1h"},"one hour"),Object(e.h)("option",{value:"24h"},"24 hours"),Object(e.h)("option",{value:"7d"},"one week"),Object(e.h)("option",{value:"30d"},"one month"),Object(e.h)("option",{value:"100y"},"indefinitely"))),Object(e.h)("label",null,Object(e.h)("input",{type:"checkbox",checked:Sr,onInput:wr=>Pr(wr.target.checked)}),"Remove ",Object(a.guessFirstName)(zt.name),"'s"," ",Object(e.h)(b,{pub:Kt,sub:Vt,tab:"comments"},"previous comments on your publication")," ","(this action cannot be reversed)"),Object(e.h)("div",{className:"button-wrapper"},Object(e.h)(l.b,{className:"button primary",onClick:lo},"Ban for ",Zr))),zr.length>0&&Gn.filter(wr=>wr.user_id).map(wr=>Object(e.h)(d,{ban:wr,showReplyLink:Rn,onReply:Nr,name:zt.name})))))};var P=S,D=t(85),W=t(60),B=t(90),f=t(7),y=t(92),M=t(54),N=t(747),A=t(748),L=t(243),C=t(749),R=t(750),U=t(158),Z=t(648),F=t(751),z=t(752),G=t(620),V=t(684),k=t(753),K=t(47),Y=t(134),ee=t(171),ae=t(48),he=t(8),me=t(35),Ye=t(328),se=(zt,Kt,$t)=>new Promise((et,Wt)=>{var Vt=pn=>{try{Tn($t.next(pn))}catch(Gn){Wt(Gn)}},cn=pn=>{try{Tn($t.throw(pn))}catch(Gn){Wt(Gn)}},Tn=pn=>pn.done?et(pn.value):Promise.resolve(pn.value).then(Vt,cn);Tn(($t=$t.apply(zt,Kt)).next())});const ie=({comment:zt,pub:Kt,user:$t,post:et,reaction_token:Wt,commentsEnabledForPost:Vt,hideContextMenu:cn,onChange:Tn,startReply:pn,startEdit:Gn,startReport:hr,openBan:Rn,scrollRef:pr,updateCommentReacted:zn})=>{var Ar;const{pinned_by_user_id:Rr}=zt,ir=!!Rr,Sr=Object(c.j)(),Pr=Object(c.j)(),yr=Object(c.j)(),[br,Br]=Object(c.k)(!1),[Nr,lo]=Object(c.k)(!1),[Zr,zr]=Object(c.k)(!1),[wr,$o]=Object(c.k)(!1),xo=Object(c.a)(()=>{var Yt;wr?(Yt=yr.current)==null||Yt.toggle():$o(!0)},[wr,$o,yr]);Object(c.d)(()=>{var Yt;(Yt=yr.current)==null||Yt.toggle()},[wr]);const Vo=()=>se(void 0,null,function*(){if(!Zr&&!!window.confirm(`Are you sure you want to ${ir?"unpin":"pin"} this comment?`)&&!Zr){zr(!0);try{yield h.a.patch(`/api/v1/comment/${zt.id}/pin`).send({pinned:!ir}),Tn({pinned:!ir}),document.location.reload()}catch(Yt){alert(Object(he.getNetworkErrorMessage)(Yt)),zr(!1)}}}),Ti=()=>se(void 0,null,function*(){var Yt;if(!br&&!!window.confirm("Are you sure you want to remove this comment?")&&!br){Br(!0);try{yield h.a.patch(`/api/v1/comment/${zt.id}/status`).send({status:D.a.moderator_removed}),Tn({suppressed:!0,status:D.a.moderator_removed,body:null}),(Yt=Pr.current)==null||Yt.close()}catch(an){alert(Object(he.getNetworkErrorMessage)(an))}Br(!1)}}),Ho=()=>se(void 0,null,function*(){var Yt;if(!Nr&&!!window.confirm("Are you sure you want to delete this comment?")&&!Nr){lo(!0);try{yield h.a.delete(`/api/v1/comment/${zt.id}`).send(),Tn({status:D.a.deleted,deleted:!0,user_id:null,name:null,body:null}),(Yt=Pr.current)==null||Yt.close()}catch(an){alert(Object(he.getNetworkErrorMessage)(an))}lo(!1)}}),oi=()=>se(void 0,null,function*(){const Yt=Object(v.getPostUrl)(Kt,et,{comments:!0,commentId:zt.id}),an=`https://linear.app/substackinc/team/TPT/new?description=${zt.body}%0A%0AComment%20author:%20[${zt.name}](https://admin.substack.com/users/${zt.user_id})%0A%0ALink:%20${Yt}&status=Triage`;window.open(an,"_blank")}),zo=24,ho="#222",Jo=Boolean($t&&$t.id===zt.user_id),gi=Object(a.canEditComment)($t,zt),ki=($t==null?void 0:$t.is_contributor)&&Object(D.e)(zt)&&zt.ancestor_path==="",ao=!Jo&&zt.metadata.eligibleForGift&&!zt.metadata.is_author,Po=gi||ki||ao,qo=($t==null?void 0:$t.is_contributor)&&Object(D.e)(zt),Ai=!Jo&&Kt.moderation_enabled&&!zt.reported_by_user&&!zt.hidden&&!zt.suppressed,hi=Jo,ze=qo&&!Jo,Re=qo&&$t.is_global_admin,We=$t==null?void 0:$t.is_global_admin,it=Ai||ze||hi||Re,Pt=qo&&!zt.user_banned&&!Jo,Nt=qo&&zt.email&&!Jo,kt=Pt||Nt,Ht=Object(ae.default)("like_comments_enabled"),Bt=!cn&&(Po||it||kt);return Object(e.h)("div",{className:"comment-actions"},!zt.deleted&&[Ht&&Object(e.h)(Y.a,{user:$t,pub:Kt,post:et,comment:zt,height:16,countInParenthesesStyle:!0,token:Wt,onChange:({comment:Yt})=>Tn(Yt),onReactedChange:Yt=>{!zn||zn(zt.id,Yt)},noSelfUpdate:!!zn}),Vt&&Object(e.h)("span",null,Object(e.h)("a",{href:"javascript:void(0)",onClick:()=>pn()},Object(e.h)(Z.default,null),"Reply",((Ar=zt.children)==null?void 0:Ar.length)>0&&` (${zt.children.length})`)),Object(e.h)(Ee,{pub:Kt,post:et,comment:zt,onChange:Tn}),Bt&&Object(e.h)("span",{onClick:xo,ref:Sr},Object(e.h)(L.default,{className:"comment-actions-menu"}),wr&&Object(e.h)(ee.a,{baseRef:Sr,ref:yr,onOpen:()=>{var Yt;return(Yt=Pr.current)==null?void 0:Yt.open()},onClose:()=>{var Yt;return(Yt=Pr.current)==null?void 0:Yt.close()},rootElement:document.getElementById("main"),scrollContainers:[pr]},Object(e.h)(M.a,{ref:Pr,className:"comment-actions-dropdown"},gi&&Object(e.h)(K.a,{className:"comment-action-button",onClick:Gn},Object(e.h)(C.default,{class:"comment-action-icon",stroke:ho,size:zo}),"Edit comment"),ki&&Object(e.h)(K.a,{className:"comment-action-button",onClick:Vo},Object(e.h)(z.default,{class:"comment-action-icon",stroke:ho,size:zo}),Zr?`${ir?"Unpinning":"Pinning"} comment...`:`${ir?"Unpin":"Pin"} comment`),ao&&Object(e.h)(K.a,{className:"comment-action-button",href:`${Kt.base_url}/subscribe?gift=true&recipient=${zt.user_id}-${Object(y.cleanSlug)(zt.name,{hashIfEmpty:!0})}&comment_id=${zt.id}`},Object(e.h)(F.default,{class:"comment-action-icon",stroke:ho,size:zo}),"Gift a subscription"),We&&Object(e.h)(K.a,{className:"comment-action-button",onClick:oi},Object(e.h)(R.default,{class:"comment-action-icon",strokeWidth:0,height:zo,width:zo}),"Add comment to Linear"),Po&&(it||kt)&&Object(e.h)("hr",{class:"dropdown-separator"}),Ai&&Object(e.h)(K.a,{className:"comment-action-button",onClick:hr},Object(e.h)(N.default,{class:"comment-action-icon",stroke:ho,size:zo}),"Report comment"),hi&&Object(e.h)(K.a,{className:"comment-action-button",onClick:Ho},Object(e.h)(G.default,{class:"comment-action-icon",stroke:ho,size:zo}),Nr?"Deleting comment\u2026":"Delete comment"),ze&&Object(e.h)(K.a,{className:"comment-action-button",onClick:Ti},Object(e.h)(A.default,{class:"comment-action-icon",stroke:ho,size:zo}),br?"Removing comment...":"Remove comment"),kt&&it&&Object(e.h)("hr",{class:"dropdown-separator"}),Pt&&Object(e.h)(K.a,{className:"comment-action-button",onClick:Rn},Object(e.h)(V.default,{class:"comment-action-icon",stroke:ho,size:zo}),"Ban or suspend user"),Nt&&Object(e.h)(K.a,{className:"comment-action-button",onClick:()=>window.open(Object(v.getSubscriberDetailsUrl)(Kt,zt.email),"_blank")},Object(e.h)(k.default,{class:"comment-action-icon",stroke:ho,size:zo}),"View subscriber details"))))])};function Ee({pub:zt,post:Kt,comment:$t,onChange:et}){const{canRestack:Wt,isRestacked:Vt,restacks:cn,menuItems:Tn}=Object(Ye.a)({pub:zt,post:Kt,comment:$t,onRestack:pn=>{et({restacked:pn,restacks:cn+(pn?1:-1)})}});if(!!Wt)return Object(e.h)("span",null,Object(e.h)(me.c,{layerClassName:"comment-restack-menu",useMobileBottomSheet:!0,mobileBottomSheetTitle:"Restack",trigger:Object(e.h)("a",{className:o()("restack-button",Vt&&"restacked"),href:"javascript:void(0)"},Object(e.h)(U.default,null),"Restack",cn>0&&` (${cn})`)},Tn))}var Oe=ie,ce=t(78);const ue=({comment:zt,bodyRef:Kt,expandToggleClicked:$t})=>{const[et,Wt]=Object(c.k)(!1),Vt=(zt.user_banned_for_comment||zt.reported_by_user)&&!et;return Object(e.h)("div",{className:"comment-body",ref:Kt},Object(e.h)(pe,{comment:zt,showHiddenComment:et,setShowHiddenComment:Wt}),zt.hidden?Object(e.h)("i",null,"Comment hidden"):zt.deleted?Object(e.h)("i",null,"Comment deleted"):Vt?Object(e.h)("i",null):zt.suppressed&&!et?Object(e.h)("i",null,"Comment removed"):zt.type==="reply"?Object(e.h)($e,{comment:zt}):Object(ce.a)(zt.body),Object(e.h)("div",{role:"button",className:"show-all-toggle",onClick:()=>$t()},Object(e.h)("div",{className:"show-all-toggle-label"},"Expand full comment")))},pe=({comment:zt,showHiddenComment:Kt,setShowHiddenComment:$t})=>{const et=Object(D.e)(zt)&&(zt.user_banned_for_comment||zt.reported_by_user),Wt=zt.user_banned_for_comment?"User was banned for this comment. ":"You reported this comment. ";return et&&Object(e.h)("div",{className:"comment_notice"},Object(e.h)("i",null,Wt,Object(e.h)("a",{href:"javascript:void(0)",onClick:()=>$t(!Kt)},Kt?"Hide":"Show")))},$e=({comment:zt})=>{const{title:Kt,truncated_body_text:$t,date:et,bylines:Wt,like_count:Vt,comment_count:cn,url:Tn}=zt.reply;return Object(e.h)("a",{class:"reply-comment",href:Object(v.pathWithQuery)(Tn,{utm_source:"substack",utm_campaign:"post_reply_comment",utm_medium:"web"}),native:!0},Object(e.h)("div",{class:"reply-comment-title"},Kt),$t&&Object(e.h)("div",{class:"reply-comment-body"},Object(a.formatEllipsis)($t)),Object(e.h)("button",{class:"reply-comment-read-more"},"Read more"),Object(e.h)("div",{class:"reply-comment-meta"},Object(a.getPostEmbedMeta)({date:et,bylines:Wt,like_count:Vt,comment_count:cn})))};var ne=ue,X=t(46),q=t(172),Ne=t(135),Qe=t(187),Ze=t(160),tt=t(754),Ft=t(755),Lt=t(756),rn=t(16),ht=t(4),je=t(10),Le=t(124);function rt({subject:zt,hoverDisabled:Kt=!1,onClick:$t}){return Object(e.h)(ht.c,{inline:!0,gap:4,alignItems:"center"},Object(e.h)(W.b,{subject:zt,disabled:Kt,utmSource:"comment"},Object(e.h)("a",{onClick:$t,href:$t?"javascript:void(0)":Object(rn.getReaderProfileUrl)(zt)},Object(e.h)(je.b.B4,{color:"pub-primary-text",weight:"semibold"},zt.name))),Object(e.h)(Le.a,{size:"sm",tier:zt.bestseller_tier,userId:zt.id}))}var Pe=t(170);const de=({post:zt,pub:Kt,comment:$t,isCollapsed:et,onProfileClick:Wt,userBanned:Vt,toggleCollapse:cn,noHoverProfile:Tn,userPendingApproval:pn})=>{var Gn,hr;const Rn=Rr=>Rr.children.length+Rr.children.reduce((ir,Sr)=>ir+Rn(Sr),0),pr=Rn($t),zn=!!$t.edited_at,Ar=!$t.hidden&&((Gn=$t.metadata.author_on_other_pub)==null?void 0:Gn.id)!=null;return[Object(e.h)("div",{className:"comment-meta"},Object(e.h)("span",{className:"commenter-name"},$t.name?Object(e.h)(rt,{subject:Object(ce.b)($t),hoverDisabled:Tn||!Object(D.e)($t)||$t.hidden||et,onClick:Wt?()=>Wt($t):null}):$t.hidden?Object(e.h)("i",null,"hidden"):$t.deleted?Object(e.h)("i",null,"deleted"):Object(D.e)($t)?"Anonymous":"Removed",Vt&&Object(e.h)("span",{className:"ban-status"}," (Banned)"),pn&&Object(e.h)("span",{className:"pending-approval"}," (Awaiting New Commenter Approval)")),$t.metadata.author_on_other_pub&&!$t.metadata.is_author&&(Ar?Object(e.h)(Pe.c,{publication_id:(hr=$t.metadata.author_on_other_pub)==null?void 0:hr.id},Object(e.h)(be,{comment:$t})):Object(e.h)(be,{comment:$t})),Object(e.h)("a",{class:"comment-timestamp",href:Object(ce.e)(zt,$t,Kt),onClick:Rr=>(void 0).onDateClick(Rr),rel:"nofollow",native:!0},g()($t.date).standardDateOrTime()),zn&&[Object(e.h)("span",{className:"comment-publication-name-separator"},"\xB7"),Object(e.h)("span",{className:"edited-indicator"},Object(e.h)("em",null,"edited ",g()($t.edited_at).standardDateOrTime()))],Object(e.h)(Ie,{comment:$t})),et&&Object(e.h)("div",{className:"tags-row"},Object(e.h)(l.b,{className:"outline comment-collapse-toggle",onClick:cn},"Expand comment ",pr>0?`and ${Object(a.pluralize)(pr,"reply")}`:""))]};function be({comment:zt}){return Object(e.h)("a",{className:"commenter-publication",href:Object(v.updateQuery)(zt.metadata.author_on_other_pub.base_url,{utm_source:"substack",utm_medium:"web",utm_content:"comment_metadata"}),rel:"nofollow",target:"_blank"},"Writes ",Object(e.h)("span",null," ",Object(a.truncateText)(zt.metadata.author_on_other_pub.name,32)," "))}const Ie=({comment:zt})=>{const[Kt,$t]=Object(c.k)(!1),et=Object(c.j)(null),Wt=Object(c.j)(null),Vt=zt.pinned_by_user_id?"pinned":zt.metadata.is_author?"author":zt.reactor_names.length>0?"liked":null;if(!Vt)return null;const cn={pinned:Object(e.h)(Ft.default,null),author:Object(e.h)(Lt.default,null),liked:Object(e.h)(tt.default,null)},Tn={pinned:"Pinned",author:"Author",liked:`Liked by ${zt.reactor_names.join(", ")}`},pn=Vt==="pinned"&&zt.pinned_by_name;return Object(e.h)("span",{ref:et,className:o()("highlight",{hover:Kt}),onMouseEnter:()=>pn&&$t(!0),onMouseLeave:()=>pn&&$t(!1)},cn[Vt],Object(e.h)("span",{className:"highlight-text"},Tn[Vt]),pn&&Object(e.h)(ee.a,{baseRef:et,hoverToggle:!0,onOpen:()=>{var Gn;return(Gn=Wt.current)==null?void 0:Gn.open()},onClose:()=>{var Gn;return(Gn=Wt.current)==null?void 0:Gn.close()}},Object(e.h)(M.a,{ref:Wt,noList:!0,className:"explanation above small thin"},"Pinned by ",Object(e.h)("span",{className:"bold"},zt.pinned_by_name))))};var ke=(zt,Kt,$t)=>new Promise((et,Wt)=>{var Vt=pn=>{try{Tn($t.next(pn))}catch(Gn){Wt(Gn)}},cn=pn=>{try{Tn($t.throw(pn))}catch(Gn){Wt(Gn)}},Tn=pn=>pn.done?et(pn.value):Promise.resolve(pn.value).then(Vt,cn);Tn(($t=$t.apply(zt,Kt)).next())});class Te extends e.Component{constructor(Kt){super(Kt);var $t;this.state={value:($t=Kt.commentBeingEdited)==null?void 0:$t.body}}componentDidMount(){var Kt;this.props.autoFocus&&((Kt=this.bodyInput)==null||Kt.focus())}needsProfile(){const{user:Kt}=this.props;return!Kt||!Kt.name}onKeyDown(Kt){var $t;if(($t=this.props.user)==null?void 0:$t.is_magic){Kt&&Kt.preventDefault(),this.showFinishMagicLoginModal();return}if(!Object(a.canPostComments)(this.props.user,this.props.post,this.props.pub)){Kt&&Kt.preventDefault(),this.showPaywall();return}Kt.key==="Escape"&&this.bodyInput.value.trim()===""?this.props.onCancel&&this.props.onCancel():Kt.key==="Enter"&&Kt.metaKey&&this.form.handleSubmit(Kt)}onInput(Kt){if(!Object(a.canPostComments)(this.props.user,this.props.post,this.props.pub)){Kt&&Kt.preventDefault(),this.showPaywall();return}this.setState({value:this.bodyInput.value||""})}postComment(){return ke(this,arguments,function*({profileUpdated:Kt}={}){const{user:$t,pub:et,post:Wt,parent:Vt,token:cn}=this.props;if(!Object(a.canPostComments)($t,Wt,et))throw yield this.showPaywall(),yield new Promise(pn=>setTimeout(pn,600)),new X.a("Please sign in");if(this.needsProfile()&&!Kt)throw yield this.showProfileUpdate(),yield new Promise(pn=>setTimeout(pn,600)),new X.a("Please update your profile");const Tn={parent_id:Vt?Vt.id:void 0,body:this.bodyInput.value,token:cn};try{const pn=yield h.a.post(`/api/v1/post/${Wt.id}/comment`).send(Tn);if(!($t==null?void 0:$t.profile_set_up_at)){const{body:{count:Gn}}=yield h.a.get("/api/v1/user/profile_role_count");if(Gn>=2)return window.location=Object(v.pathWithQuery)(`${Object(v.getSubstackUrl)()}/profile/start`,{commentProfileFlow:!0,next:Object(ce.e)(Wt,pn.body,et)}),!1}return pn}catch(pn){throw pn.response&&pn.response.statusCode===403&&($t&&$t.is_magic?yield this.showFinishMagicLoginModal():yield this.showPaywall()),pn}})}onSuccess(Kt){if(Kt!==!1)if(this.props.onSuccess&&!this.needsProfile())this.setState({value:""}),this.props.onSuccess(Kt.body);else{const $t=Object(ce.f)(this.props.post,this.props.pub);window.location.pathname===$t?window.location.reload():window.location.href=Object(ce.f)(this.props.post,this.props.pub)}}showFinishMagicLoginModal(){return ke(this,null,function*(){this.finishMagicLoginModalShown||(this.finishMagicLoginModalShown=!0,Object(f.i)(f.a.FINISH_MAGIC_LOGIN_MODAL_SHOWN,{post_id:this.props.post.id,post_type:this.props.post.type,parent_id:this.props.parent&&this.props.parent.id})),this.finishMagicLoginModal&&(this.sendLoginEmail(),yield this.finishMagicLoginModal.open())})}showPaywall(){return ke(this,null,function*(){this.paywallShown||(this.paywallShown=!0,Object(f.i)(f.a.COMMENT_PAYWALL_SHOWN,{post_id:this.props.post.id,post_type:this.props.post.type,parent_id:this.props.parent&&this.props.parent.id})),this.modalPaywall&&this.modalPaywall.open&&(yield this.modalPaywall.open())})}showProfileUpdate(){return ke(this,null,function*(){this.profileUpdaterShown||(this.profileUpdaterShown=!0,Object(f.i)(f.a.PROFILE_UPDATER_SHOWN,{post_id:this.props.post.id,parent_id:this.props.parent&&this.props.parent.id})),this.profileUpdater&&(yield this.profileUpdater.open())})}sendLoginEmail(){return ke(this,null,function*(){if(!this.loginEmailSent){this.loginEmailSent=!0;try{yield h.a.post("/api/v1/email-login").send({email:this.props.user.email,redirect:document.location.href.split("?")[0].split("#")[0]})}catch(Kt){alert(Object(he.getNetworkErrorMessage)(Kt))}}})}focus(){this.bodyInput.focus()}render({user:Kt,freeSignup:$t,freeSignupEmail:et,pub:Wt,post:Vt,token:cn,onCancel:Tn,autoFocus:pn,commentBeingEdited:Gn,saveEdit:hr,formClassName:Rn},{value:pr}){return Object(e.h)("div",{className:o()("comment-input-wrap",{comment:Gn})},Object(e.h)(X.g,{ref:zn=>this.form=zn,className:o()("comment-input",Rn),performSubmit:zn=>Gn?hr(pr):this.postComment(zn),onSuccess:zn=>this.onSuccess(zn),noInlineErrors:!0,autoLock:!0},Object(e.h)("div",{className:"comment-input-head"},Object(e.h)(B.c,{subject:Kt,pub:Wt,user:Kt,freeSignup:$t,freeSignupEmail:et,token:cn,modalProfile:!Kt})),Object(e.h)("div",{className:"comment-input-right"},Gn&&Object(e.h)(de,{post:Vt,pub:Wt,comment:Gn,isCollapsed:!1,userBanned:!1}),Object(e.h)(Ze.a,{ref:zn=>this.bodyInput=zn&&zn.base,name:"body",placeholder:"Write a comment\u2026",autoHeight:!0,maxLines:8,value:pr||"",onInput:zn=>this.onInput(zn),onKeyDown:zn=>this.onKeyDown(zn)}),Object(e.h)("div",{id:"error-container"}),Object(e.h)("div",{className:"comment-button-container"},(Tn||!!pr)&&Object(e.h)(l.b,{className:"primary",type:"submit"},Gn?"Save":"Post"),Tn&&Object(e.h)(l.b,{className:"cancel",onClick:Tn},"Cancel")))),Object(e.h)(Ne.a,null,Object(e.h)(Qe.c,{ref:zn=>this.profileUpdater=zn,user:Kt,freeSignup:$t,freeSignupEmail:et,optionalPhoto:!0,token:cn,text:"Save & Post Comment",onBeforeClose:zn=>zn&&this.form.handleSubmitAsync(null,{profileUpdated:!0})}),Object(e.h)(q.a,{ref:zn=>this.modalPaywall=zn,user:Kt,freeSignup:$t,freeSignupEmail:et,publication:Wt,post:Vt,title:"Only paid subscribers can comment on this post",reauthenticationTitle:"To post a comment, please re-authenticate."}),Object(e.h)(O.a,{ref:zn=>this.finishMagicLoginModal=zn,className:"finish-magic-login-modal"},Object(e.h)("h4",null,"Check your email"),Object(e.h)("p",null,"For your security, we need to re-authenticate you."),Object(e.h)("p",null,"Click the link we sent to ",Kt==null?void 0:Kt.email,", or"," ",Object(e.h)("a",{href:Object(v.getSigninUrl)({for_pub:Wt.subdomain,with_password:!0}),native:!0},"click here to sign in"),"."))))}}var x=t(703),H=Object.defineProperty,le=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Ue=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,yt=(zt,Kt,$t)=>Kt in zt?H(zt,Kt,{enumerable:!0,configurable:!0,writable:!0,value:$t}):zt[Kt]=$t,Qt=(zt,Kt)=>{for(var $t in Kt||(Kt={}))Ve.call(Kt,$t)&&yt(zt,$t,Kt[$t]);if(Ue)for(var $t of Ue(Kt))bt.call(Kt,$t)&&yt(zt,$t,Kt[$t]);return zt},tn=(zt,Kt)=>le(zt,Ce(Kt)),Kn=(zt,Kt,$t)=>(yt(zt,typeof Kt!="symbol"?Kt+"":Kt,$t),$t),Ot=(zt,Kt,$t)=>new Promise((et,Wt)=>{var Vt=pn=>{try{Tn($t.next(pn))}catch(Gn){Wt(Gn)}},cn=pn=>{try{Tn($t.throw(pn))}catch(Gn){Wt(Gn)}},Tn=pn=>pn.done?et(pn.value):Promise.resolve(pn.value).then(Vt,cn);Tn(($t=$t.apply(zt,Kt)).next())});const lt=200,Be=50,_e=140,Ae=728,fe=80;function ft(){const Kt=Math.min(Ae,document.body.clientWidth)-_e;return Math.ceil(Kt/Be)}const nt=ft();class ct extends e.Component{constructor(Kt,$t){super(Kt,$t);Kn(this,"bodyRef",Object(e.createRef)(null)),Kn(this,"headContainerRef",Object(e.createRef)(null)),Kn(this,"openBan",()=>{this.props.banComment()}),Kn(this,"setSelectedHighlight",()=>{const Wt=Object(ce.d)()===this.props.comment.id;this.setState({isSelected:Wt})}),Kn(this,"startEdit",()=>{this.setState({editing:!0})}),Kn(this,"saveEdit",et=>Ot(this,null,function*(){if(!!this.state.editing)return yield h.a.patch(`/api/v1/comment/${this.props.comment.id}`).send({body:et})})),Kn(this,"onSaveEditSuccess",({edited:et})=>{this.setState({editing:!1}),this.props.onChange(Qt(Qt({},this.props.comment),et))}),Kn(this,"startReport",()=>{this.setState({reporting:!0})}),Kn(this,"cancelReport",()=>{this.setState({reporting:!1})}),Kn(this,"onReportSuccess",()=>{this.props.onChange(tn(Qt({},this.props.comment),{reported_by_user:!0}))}),Kn(this,"expandToggleClicked",()=>{const et=this.bodyRef.current;!et||(et.classList.remove("long"),et.classList.add("expanded"),Object(f.i)(f.a.COMMENT_EXPAND_TOGGLE_CLICKED,{hiddenHeight:et.getAttribute("data-hidden-height")}))}),Kn(this,"onChange",et=>{this.props.onChange?this.props.onChange(Qt(Qt({},this.props.comment),et)):document.location.href=Object(ce.f)(this.props.post,this.props.pub)}),Kn(this,"setComment",et=>{this.setState({comment:et})}),Kn(this,"setCollapsed",et=>{var Wt,Vt;if(this.setState({isCollapsed:et}),et&&((Vt=(Wt=this.headContainerRef)==null?void 0:Wt.current)==null?void 0:Vt.scrollIntoView)){const cn=this.headContainerRef.current.getBoundingClientRect();cn.top<0&&(document.documentElement.scrollTop+=cn.top-fe)}this.props.retainUserCollapseState&&Object(ce.j)(this.props.comment.id,et)}),this.state={editing:!1,replying:!1,reporting:!1,hideAnchors:!1,isSelected:!1,isCollapsed:this.props.retainUserCollapseState&&Object(ce.h)(this.props.comment.id)}}componentDidMount(){this.setSelectedHighlight(),this.setReplyStateFromHash(),typeof window!="undefined"&&(window.addEventListener("hashchange",this.setSelectedHighlight,!1),window.addEventListener("popstate",this.setSelectedHighlight,!1),this.updateOverflows())}componentWillUnmount(){typeof window!="undefined"&&(window.removeEventListener("hashchange",this.setSelectedHighlight,!1),window.removeEventListener("popstate",this.setSelectedHighlight,!1))}componentDidUpdate(Kt){var $t,et;(($t=Kt.comment)==null?void 0:$t.id)!==((et=this.props.comment)==null?void 0:et.id)&&this.setSelectedHighlight(),Kt.replying!==this.props.replying&&this.props.replying&&this.startReply()}setReplyStateFromHash(){if(this.props.comment.deleted||typeof window=="undefined"||!window.location.hash)return;const Kt=/^#comment-(\d+)-reply$/.exec(window.location.hash);!Kt||Number(Kt[1])!==this.props.comment.id||(window.location.hash=window.location.hash.replace(/-reply$/,""),this.startReply())}startReply(){return Ot(this,null,function*(){this.props.onStartReply?this.props.onStartReply(this.props.comment):(yield new Promise(Kt=>this.setState({replying:!0},Kt)),this.commentInput&&this.commentInput.bodyInput&&this.commentInput.bodyInput.focus&&this.commentInput.bodyInput.focus())})}onDateClick(Kt){const[$t,et]=Kt.target.href.split("?")[0].split("#");$t===window.location.href.split("?")[0].split("#")[0]&&et&&(Kt.preventDefault(),this.setState({hideAnchors:!0},()=>{window.location.hash=`#${et}`,this.setState({hideAnchors:!1})}))}updateOverflows(){const Kt=this.bodyRef.current;if(!Kt)return;const $t=Kt.scrollHeight-Kt.clientHeight;$t>0&&$t<lt?Kt.classList.add("expanded"):$t>=lt&&(Kt.classList.add("long"),Kt.setAttribute("data-hidden-height",$t))}render({user:Kt,comment:$t,freeSignup:et,freeSignupEmail:Wt,pub:Vt,post:cn,reaction_token:Tn,depth:pn,collapseAtDepth:Gn,onChange:hr,scrollRef:Rn,retainUserCollapseState:pr,onStartReply:zn,noHoverProfile:Ar,onProfileClick:Rr,hideContextMenu:ir,updateCommentReacted:Sr},{isSelected:Pr,replying:yr,editing:br,reporting:Br,hideAnchors:Nr,isCollapsed:lo}){var Zr,zr;const wr=Vt.community_enabled&&cn&&cn.write_comment_permissions!=="none",{user_banned:$o}=$t;let xo=!1;return((Zr=$t.metadata)==null?void 0:Zr.is_author)?xo="author":((zr=$t.metadata)==null?void 0:zr.founding)&&(xo="founding"),br?Object(e.h)(Te,{autoFocus:!0,user:Kt,freeSignup:et,freeSignupEmail:Wt,pub:Vt,post:cn,commentBeingEdited:$t,saveEdit:this.saveEdit,token:Tn,onCancel:()=>this.setState({editing:!1}),onSuccess:hr?this.onSaveEditSuccess:null}):Object(e.h)("div",{className:o()("comment",{selected:Pr,"post-reply":$t.type==="reply",collapsed:lo}),key:`comment-${$t.id}`},!Nr&&[Object(e.h)("div",{id:`comment-${$t.id}`,className:"comment-anchor"}),Object(e.h)("div",{id:`comment-${$t.id}-reply`,className:"comment-anchor"})],Object(e.h)("table",{className:"comment-content"},Object(e.h)("tr",null,Object(e.h)("td",{className:"comment-head",ref:this.headContainerRef},Object(e.h)(W.b,{subject:Object(ce.b)($t),disabled:Ar||!Object(D.e)($t)||$t.hidden||lo,utmSource:"comment"},Object(e.h)(B.c,{subject:Object(ce.b)($t),pub:Vt,user:Kt,freeSignup:et,freeSignupEmail:Wt,token:Tn,isBanned:$o,tooltip:{founding:Object(a.foundingMemberDescription)(Vt),author_ons_other_pub:"Author of another publication"}[xo],badge:xo,isAuthor:$t.metadata.is_author,onClick:Rr?()=>Rr($t):null,lazy:!0}))),Object(e.h)("td",{className:"comment-rest"},Object(e.h)(de,{post:cn,pub:Vt,comment:$t,commentUser:ce.b,isCollapsed:lo,toggleCollapse:()=>this.setCollapsed(!this.state.isCollapsed),onProfileClick:Rr,userBanned:$o,noHoverProfile:Ar,userPendingApproval:$t.status===D.a.new_commenter_approval_required&&Kt.is_admin}),Object(e.h)(ne,{comment:$t,bodyRef:this.bodyRef,expandToggleClicked:this.expandToggleClicked}),!yr&&Object(e.h)(Oe,{comment:$t,pub:Vt,user:Kt,post:cn,reaction_token:Tn,commentsEnabledForPost:wr,hideContextMenu:ir,onChange:this.onChange,startReply:()=>this.startReply(),startEdit:()=>this.startEdit(),startReport:()=>this.startReport(),openBan:this.openBan,scrollRef:Rn,updateCommentReacted:Sr})))),yr&&wr&&Object(e.h)(Te,{ref:Vo=>this.commentInput=Vo,user:Kt,freeSignup:et,freeSignupEmail:Wt,pub:Vt,post:cn,parent:$t,token:Tn,onCancel:()=>this.setState({replying:!1}),onSuccess:hr?Vo=>{this.setState({replying:!1});const Ti=tn(Qt({},$t),{children:[Vo].concat($t.children)});hr(Ti)}:null}),$t.childrenSummary&&Object(e.h)("div",{className:"more-replies-container"},Object(e.h)("a",{className:"more-replies",href:Object(ce.e)(cn,$t,Vt)},$t.childrenSummary)),!$t.childrenSummary&&pn>=nt&&!!$t.children.length&&Object(e.h)(l.b,{className:"outline continue-thread-button",href:Object(ce.e)(cn,$t,Vt)},"Continue Thread \u2192"),!$t.childrenSummary&&pn<nt&&Object(e.h)(wt,{key:`comment:${$t.id}`,user:Kt,freeSignup:et,freeSignupEmail:Wt,pub:Vt,post:cn,comments:$t.children,parent:$t,reaction_token:Tn,depth:(pn||0)+1,collapseAtDepth:Gn,onChange:hr,isChild:!0,scrollRef:Rn,retainUserCollapseState:pr,onStartReply:zn,noHoverProfile:Ar,onProfileClick:Rr,hideContextMenu:ir,updateCommentReacted:Sr}),!lo&&Object(e.h)("div",{className:"comment-list-collapser",onClick:()=>this.setCollapsed(!0)},Object(e.h)("div",{className:"comment-list-collapser-line"})),Br&&Object(e.h)(x.a,{pub:Vt,comment:$t,onClose:this.cancelReport,onReportSuccess:this.onReportSuccess}))}}var Xe=Object.defineProperty,gt=Object.defineProperties,Tt=Object.getOwnPropertyDescriptors,Ut=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,_n=(zt,Kt,$t)=>Kt in zt?Xe(zt,Kt,{enumerable:!0,configurable:!0,writable:!0,value:$t}):zt[Kt]=$t,Hn=(zt,Kt)=>{for(var $t in Kt||(Kt={}))qt.call(Kt,$t)&&_n(zt,$t,Kt[$t]);if(Ut)for(var $t of Ut(Kt))sn.call(Kt,$t)&&_n(zt,$t,Kt[$t]);return zt},wn=(zt,Kt)=>gt(zt,Tt(Kt));const Un=t(261),bn=5,cr=1,fr=16,ur=50,er=200;function jr(zt){return zt.reduce((Kt,$t)=>Kt+1+jr($t.children||[]),0)}function wt({user:zt,freeSignup:Kt,freeSignupEmail:$t,pub:et,post:Wt,comments:Vt,reaction_token:cn,depth:Tn,collapseAtDepth:pn,onChange:Gn,pageSize:hr,retainUserCollapseState:Rn,updateCommentReacted:pr,parent:zn,scrollRef:Ar,className:Rr,onStartReply:ir,noHoverProfile:Sr,onProfileClick:Pr,hideContextMenu:yr}){const br=hr||fr,[Br,Nr]=Object(c.k)(br),[lo,Zr]=Object(c.k)(-1),[zr,wr]=Object(c.k)(null),[$o,xo]=Object(c.k)(null),[Vo,Ti]=Object(c.k)(new Set(Vt.map(({id:ho})=>ho)));if(Object(c.d)(()=>{lo>=0&&window.scrollTo(window.scrollX,lo)},[lo]),(Vt||[]).length===0)return;const[Ho,oi]=Un(Vt,({id:ho,user_id:Jo})=>Vo.has(ho)||Jo===(zt==null?void 0:zt.id)),zo=Ho.slice(0,Br);return Object(e.h)("div",{className:o()("comment-list",Rr,{"has-new-comments":oi.length>0})},Object(e.h)(S,{pub:et,comment:zr,onClose:()=>wr(null),onReply:ho=>{xo(ho),wr(null)},onBan:(ho,Jo)=>{Gn?Gn(wn(Hn({},ho),{user_banned:!0,bans:Jo.concat(ho.bans)})):document.location.href=Object(ce.f)(Wt,et)}}),oi.length>0&&Object(e.h)(l.b,{className:"collapsed-reply outline",onClick:()=>Ti(new Set(Vt.map(({id:ho})=>ho)))},Object(a.pluralize)(jr(oi),"new reply")),Object(e.h)("div",{className:"comment-list-items"},zo.map(ho=>Object(e.h)(ct,{banComment:()=>wr(ho),key:`cmt-${ho.id}`,user:zt,freeSignup:Kt,freeSignupEmail:$t,pub:et,post:Wt,comment:ho,parent:zn,reaction_token:cn,collapseAtDepth:pn,depth:Tn||0,onChange:Gn,replying:$o===ho.id,scrollRef:Ar,retainUserCollapseState:Rn,onStartReply:ir,noHoverProfile:Sr,onProfileClick:Pr,hideContextMenu:yr,updateCommentReacted:pr}))),Ho.length>zo.length&&Object(e.h)(l.b,{className:"collapsed-reply outline",onClick:()=>{Zr(window.scrollY),Nr(Br+br)}},"Load More"))}var mt=t(238),Fe=t(145),pt=t(595),Dt=t(371);const Jt=()=>Object(e.h)("div",{className:"comment-silhouette"},Object(e.h)("div",{className:"comment-silhouette-head"}),Object(e.h)("div",{className:"comment-silhouette-content"},Object(e.h)("div",{className:"comment-silhouette-meta"}),Object(e.h)("div",{className:"comment-silhouette-body"}),Object(e.h)("div",{className:"comment-silhouette-actions"})));var Gt=t(573),mn=Object.defineProperty,Cn=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,Zn=Object.prototype.propertyIsEnumerable,At=(zt,Kt,$t)=>Kt in zt?mn(zt,Kt,{enumerable:!0,configurable:!0,writable:!0,value:$t}):zt[Kt]=$t,Xt=(zt,Kt)=>{for(var $t in Kt||(Kt={}))tr.call(Kt,$t)&&At(zt,$t,Kt[$t]);if(Cn)for(var $t of Cn(Kt))Zn.call(Kt,$t)&&At(zt,$t,Kt[$t]);return zt},en=(zt,Kt,$t)=>(At(zt,typeof Kt!="symbol"?Kt+"":Kt,$t),$t),$n=(zt,Kt,$t)=>new Promise((et,Wt)=>{var Vt=pn=>{try{Tn($t.next(pn))}catch(Gn){Wt(Gn)}},cn=pn=>{try{Tn($t.throw(pn))}catch(Gn){Wt(Gn)}},Tn=pn=>pn.done?et(pn.value):Promise.resolve(pn.value).then(Vt,cn);Tn(($t=$t.apply(zt,Kt)).next())});const Xn=30*1e3;class Yn extends e.Component{constructor(Kt,$t){super(Kt,$t);en(this,"modalRef",Object(e.createRef)(null)),en(this,"onWindowVisibilityChange",()=>{Object(he.isWindowVisible)()?this.loadPost():clearTimeout(this.loadTimeout)}),this.state={},Kt.post&&Kt.post.slug===Kt.slug&&(this.state.post=Kt.post),this.state.sort=Kt.sort||this.state.post&&this.state.post.default_comment_sort||Kt.publication.default_comment_sort||"best_first",this.state.comments=Kt.initialComments,this.scrollRef=Object(e.createRef)(),this.shareDialogRef=Object(e.createRef)(),this.state.loading=!1,this.state.reactionSigninComment=null}componentDidMount(){return $n(this,null,function*(){Object(he.onWindowVisibilityChange)(this.onWindowVisibilityChange),!this.props.publication.community_enabled&&!this.props.inline?document.location.href="./":yield this.loadPost()})}componentWillUnmount(){Object(he.offWindowVisibilityChange)(this.onWindowVisibilityChange),clearInterval(this.loadTimeout)}componentDidUpdate(Kt,$t){return $n(this,null,function*(){if(Kt.slug!==this.props.slug||$t.sort!==this.state.sort){const et=this.props.post&&this.props.post.slug===this.props.slug;yield Object(he.setState)(this,{post:et?this.props.post:null,comments:null}),yield this.loadPost()}else if(this.state.post&&this.state.comments&&!this.commentsViewed&&!this.state.loading){let et=0;Object(D.d)(this.state.comments,()=>et++),this.state.post.comment_count!==et&&(this.state.post.comment_count=et,this.setState({post:this.state.post}),this.props.onChange&&this.props.onChange({post:this.state.post}))}})}queueRefresh(){if(!this.commentsViewed&&this.state.comments){this.commentsViewed=!0;const{post:Kt}=this.state;Object(f.i)(f.a.COMMENTS_VIEWED,{post_id:Kt.id,comment_count:this.state.comments.length}),this.props.publication.community_enabled&&!(Kt.type==="thread"||Object(a.canSeeComments)(this.props.user,Kt))&&Object(f.i)(f.a.COMMENT_PAYWALL_SHOWN,{post_id:Kt.id,post_type:Kt.type}),Kt.type==="thread"&&this.props.user&&Promise.resolve(h.a.post(`/api/v1/posts/${Kt.id}/seen`))}clearTimeout(this.loadTimeout),this.loadTimeout=setTimeout(()=>this.loadPost(),Xn)}loadPost(){return $n(this,null,function*(){if(this.state.comments&&!Object(he.isWindowVisible)())return;clearTimeout(this.loadTimeout),this.setState({loading:!0});const Kt=this.state.comments&&this.state.comments.length>0;let $t;this.state.comments&&($t=null,Object(D.d)(this.state.comments,et=>{!et.deleted&&et.date&&(!$t||et.date>$t)&&($t=et.date)}));try{const et=this.props.slug,Wt=this.state.sort,Vt={token:this.props.post_reaction_token||"",all_comments:!0,sort:Wt,last_comment_at:$t};this.state.post&&this.props.commentId&&(Vt.comment_id=this.props.commentId);const cn=yield h.a.get(this.state.post?`/api/v1/post/${this.state.post.id}/comments`:`/api/v1/posts/${et}`).query(Vt);if(this.setState({loading:!1}),et!==this.props.slug||Wt!==this.state.sort)return;let Tn=this.state.sort;!this.state.post&&cn.body.default_comment_sort&&(Tn=cn.body.default_comment_sort),(!this.state.post||!this.state.comments||cn.body.comments)&&(yield Object(he.setState)(this,{post:this.state.post||cn.body,comments:cn.body.comments||[],sort:Tn}))}catch(et){console.error("Failed to load post:",et),et.statusCode===400&&(yield Object(he.setState)(this,{notAllowedToFetchComments:!0})),this.setState({loading:!1})}!Kt&&this.state.comments&&this.state.comments.length>0&&Object(he.scrollToHash)(),Object(he.isWindowVisible)()&&this.queueRefresh(),this.triggerShareOnLoad()})}onChange(Kt){this.setState({comments:Object(ce.i)(this.state.comments,Kt)})}onSortSelected(Kt){this.setState({sort:Kt}),Object(f.i)(f.a.COMMENTS_SORTED,{post_id:this.state.post.id,post_type:this.state.post.type,sort:Kt})}triggerShareOnLoad(){var Kt;!((Kt=this.shareDialogRef)==null?void 0:Kt.current)||Object(v.getQueryItem)("action")==="share"&&(window.history.replaceState({},document.title,Object(v.updateQuery)({action:null})),this.shareDialogRef.current.fromEmail())}_isPub(Kt){var $t;const{publication:et}=this.props;return(($t=(et==null?void 0:et.parent_publication)||et)==null?void 0:$t.subdomain)===Kt}render({slug:Kt,user:$t,freeSignup:et,freeSignupEmail:Wt,publication:Vt,post_reaction_token:cn,inline:Tn,commentId:pn,selectionFromQuery:Gn,freeTrialCoupon:hr,show_reaction_upsell:Rn},{sort:pr,post:zn,comments:Ar,notAllowedToFetchComments:Rr,reactionSigninComment:ir}){if(!zn||!Vt.community_enabled)return!Tn&&Object(e.h)("div",{className:"comments-page"},Object(e.h)("div",{className:"container"},Object(e.h)(pt.b,null)));const Sr=Vt.community_enabled&&zn&&zn.write_comment_permissions!=="none",Pr=Rr||Sr&&!Object(a.canSeeComments)($t,zn),yr=(br,Br)=>$n(this,null,function*(){return nr({user:$t,reactionToken:cn,comments:Ar,id:br,reacted:Br,setComments:Nr=>this.setState({comments:Nr}),onNeedsSignin:Nr=>new Promise(lo=>this.setState({reactionSigninComment:Nr},()=>this.modalRef.current.open(lo)))})});return Object(e.h)("div",{className:"comments-page"},Object(e.h)(Dt.a,{post:zn,publication:Vt,isCommentPage:!this.props.inline,selection:Gn}),Object(e.h)(Fe.c,{ref:this.shareDialogRef,user:$t,pub:Vt,post:zn,reaction_token:cn}),!Tn&&!pn&&Object(e.h)("div",{className:"container"},Object(e.h)(pt.a,{pub:Vt,post:Object.assign({},zn,{comment_url_override:Object(v.getPostUrl)(Vt,zn,{comments:!0})}),user:$t,freeSignup:et,freeSignupEmail:Wt,hidden:!Object(a.isUUID)(Kt)&&zn.hidden,truncated:zn.type!=="thread",post_reaction_token:cn,onChange:br=>this.setState(br),showUnsubscribeNotice:!0,gap:0},Object(e.h)("div",{class:"full-container-border"}))),Pr&&Object(e.h)("div",{className:"container"},Object(e.h)(q.b,{user:$t,freeSignupEmail:Wt,freeSignup:et,publication:Vt,post:zn,title:`Comments on this ${zn.type==="podcast"?"episode":"post"} are for paid subscribers`,reauthenticationTitle:"To see the comments, please re-authenticate.",coupon:hr})),zn.type==="thread"||Object(a.canSeeComments)($t,zn)?Object(e.h)("div",{className:"container"},Ar&&Object(e.h)("div",{className:"comments-heading"},Object(a.pluralize)(zn.comment_count,"Comment",{zero_fallback:"Comments"})),Ar&&Ar.length>0&&!Sr&&Object(e.h)(Sn,{post:zn}),Sr&&Object(e.h)(Te,{user:$t,freeSignup:et,freeSignupEmail:Wt,pub:Vt,post:zn,token:cn,autoFocus:Object(ce.g)(),onSuccess:br=>this.setState({comments:[br].concat(Ar)})}),(!Ar||Ar.length>0)&&!Rr&&!pn&&Object(e.h)(Gt.a,{sort:pr,loading:!Ar,onSortSelected:br=>this.onSortSelected(br),pub:Vt}),pn&&Ar&&Object(e.h)("a",{class:"return-to-thread-link",href:Object(v.getPostUrl)(Vt,zn,{comments:!0,commentId:pn,highlightComment:!0})},"\u2B60 Return to thread"),!Ar&&!Rr?[Object(e.h)(Jt,null),Object(e.h)(Jt,null)]:Ar.length>0?[Object(e.h)("div",{className:"comment-list-container",ref:this.scrollRef},Object(e.h)(wt,{key:`post:${zn.id}`,user:$t,freeSignup:et,freeSignupEmail:Wt,pub:Vt,post:zn,comments:Ar,reaction_token:cn,depth:0,collapseAtDepth:Tn?10:Ar.length>3&&pr==="most_recent_first"?cr:bn,onChange:br=>this.onChange(br),pageSize:Tn||this._isPub("astralcodexten")?er:zn.type==="thread"?ur:fr,scrollRef:this.scrollRef,retainUserCollapseState:!0,updateCommentReacted:yr}))]:null):null,ir&&Object(e.h)(Y.b,{comment:ir,pub:Vt,user:$t,react:()=>yr(ir.id,!0),modalRef:this.modalRef}),Rn?Object(e.h)(mt.a,{pub:Vt}):null)}}const Sn=({post:zt})=>Object(e.h)("div",{className:"locked-comments"},"Commenting has been turned off for this ",Object(a.getPrintedPostType)(zt.type));function nr(zt){return $n(this,arguments,function*({user:Kt,reactionToken:$t,comments:et,id:Wt,reacted:Vt,setComments:cn,onNeedsSignin:Tn}){var pn;const Gn=Object(ce.c)(Wt,et);if(!Gn)return;const hr=Xt({},Gn);Object(Y.d)(Kt,hr,Vt),cn(Object(ce.i)(et.slice(0),hr));try{yield Object(Y.c)(hr,!0,Vt,$t)}catch(Rn){if(Object(Y.d)(Kt,hr,!Vt),cn(Object(ce.i)(et.slice(0),Xt({},hr))),((pn=Rn.response)==null?void 0:pn.statusCode)!==401){alert(Object(he.getNetworkErrorMessage)(Rn));return}yield Tn({comment:hr})}})}},function($,n,t){"use strict";t.d(n,"a",function(){return i});var e=t(0),s=t(6),o=t.n(s),a=t(118),c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(d,b,w)=>b in d?c(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,O=(d,b)=>{for(var w in b||(b={}))m.call(b,w)&&v(d,w,b[w]);if(h)for(var w of h(b))g.call(b,w)&&v(d,w,b[w]);return d},u=(d,b)=>l(d,p(b)),r=(d,b)=>{var w={};for(var E in d)m.call(d,E)&&b.indexOf(E)<0&&(w[E]=d[E]);if(d!=null&&h)for(var E of h(d))b.indexOf(E)<0&&g.call(d,E)&&(w[E]=d[E]);return w};const i=d=>{var b=d,{ref:w,className:E,error:S=!1,width:P,font:D}=b,W=r(b,["ref","className","error","width","font"]);return Object(e.h)("input",u(O({},W),{className:o()(E,a.a.input,{[a.a.error]:S},D&&a.a[`font-${D}`]),style:{width:P},type:"text",ref:w}))}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"FoundingBadgeIcon",svgParams:{height:14,width:14,viewBox:"0 0 14 14"}}),Object(e.h)("circle",{cx:"4.17266",cy:"5.83001",r:"3.48929","stroke-width":"1"}),Object(e.h)("path",{d:"M8.98932 9.48406C8.98932 11.4111 7.42711 12.9733 5.50003 12.9733C3.57295 12.9733 2.01075 11.4111 2.01075 9.48406C2.01075 7.55698 3.57295 5.99478 5.50003 5.99478C7.42711 5.99478 8.98932 7.55698 8.98932 9.48406Z","stroke-width":"1"}),Object(e.h)("path",{d:"M12.3286 9.48406C12.3286 11.4111 10.7664 12.9733 8.83935 12.9733C6.91227 12.9733 5.35006 11.4111 5.35006 9.48406C5.35006 7.55698 6.91227 5.99478 8.83935 5.99478C10.7664 5.99478 12.3286 7.55698 12.3286 9.48406Z","stroke-width":"1"}),Object(e.h)("circle",{cx:"7.15874",cy:"3.83929",r:"3.48929","stroke-width":"1"}),Object(e.h)("circle",{cx:"10.1449",cy:"5.83001",r:"3.48929","stroke-width":"1"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PlusIcon",svgParams:{height:14,width:14,fill:"#757575"}}),Object(e.h)("path",{d:"M7 0V7M7 14V7M7 7H14H0"}));n.default=O},function($,n,t){$.exports=t(726).default},function($,n){$.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function($,n,t){"use strict";var e,s=SyntaxError,o=Function,a=TypeError,c=function(N){try{return o('"use strict"; return ('+N+").constructor;")()}catch(A){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(N){l=null}var p=function(){throw new a},h=l?function(){try{return arguments.callee,p}catch(N){try{return l(arguments,"callee").get}catch(A){return p}}}():p,m=t(607)(),g=Object.getPrototypeOf||function(N){return N.__proto__},v={},O=typeof Uint8Array=="undefined"?e:g(Uint8Array),u={"%AggregateError%":typeof AggregateError=="undefined"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?e:ArrayBuffer,"%ArrayIteratorPrototype%":m?g([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics=="undefined"?e:Atomics,"%BigInt%":typeof BigInt=="undefined"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?e:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?e:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array=="undefined"?e:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?e:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m?g(g([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map=="undefined"?e:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!m?e:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?e:Promise,"%Proxy%":typeof Proxy=="undefined"?e:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?e:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!m?e:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m?g(""[Symbol.iterator]()):e,"%Symbol%":m?Symbol:e,"%SyntaxError%":s,"%ThrowTypeError%":h,"%TypedArray%":O,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array=="undefined"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?e:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?e:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?e:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?e:WeakSet};try{null.error}catch(N){var r=g(g(N));u["%Error.prototype%"]=r}var i=function N(A){var L;if(A==="%AsyncFunction%")L=c("async function () {}");else if(A==="%GeneratorFunction%")L=c("function* () {}");else if(A==="%AsyncGeneratorFunction%")L=c("async function* () {}");else if(A==="%AsyncGenerator%"){var C=N("%AsyncGeneratorFunction%");C&&(L=C.prototype)}else if(A==="%AsyncIteratorPrototype%"){var R=N("%AsyncGenerator%");R&&(L=g(R.prototype))}return u[A]=L,L},d={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=t(285),w=t(609),E=b.call(Function.call,Array.prototype.concat),S=b.call(Function.apply,Array.prototype.splice),P=b.call(Function.call,String.prototype.replace),D=b.call(Function.call,String.prototype.slice),W=b.call(Function.call,RegExp.prototype.exec),B=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,y=function(A){var L=D(A,0,1),C=D(A,-1);if(L==="%"&&C!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(C==="%"&&L!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var R=[];return P(A,B,function(U,Z,F,z){R[R.length]=F?P(z,f,"$1"):Z||U}),R},M=function(A,L){var C=A,R;if(w(d,C)&&(R=d[C],C="%"+R[0]+"%"),w(u,C)){var U=u[C];if(U===v&&(U=i(C)),typeof U=="undefined"&&!L)throw new a("intrinsic "+A+" exists, but is not available. Please file an issue!");return{alias:R,name:C,value:U}}throw new s("intrinsic "+A+" does not exist!")};$.exports=function(A,L){if(typeof A!="string"||A.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new a('"allowMissing" argument must be a boolean');if(W(/^%?[^%]*%?$/,A)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var C=y(A),R=C.length>0?C[0]:"",U=M("%"+R+"%",L),Z=U.name,F=U.value,z=!1,G=U.alias;G&&(R=G[0],S(C,E([0,1],G)));for(var V=1,k=!0;V<C.length;V+=1){var K=C[V],Y=D(K,0,1),ee=D(K,-1);if((Y==='"'||Y==="'"||Y==="`"||ee==='"'||ee==="'"||ee==="`")&&Y!==ee)throw new s("property names with quotes must have matching quotes");if((K==="constructor"||!k)&&(z=!0),R+="."+K,Z="%"+R+"%",w(u,Z))F=u[Z];else if(F!=null){if(!(K in F)){if(!L)throw new a("base intrinsic for "+A+" exists, but the property is not available.");return}if(l&&V+1>=C.length){var ae=l(F,K);k=!!ae,k&&"get"in ae&&!("originalValue"in ae.get)?F=ae.get:F=F[K]}else k=w(F,K),F=F[K];k&&!z&&(u[Z]=F)}}return F}},function($,n,t){var e=t(87),s=t(109),o="Expected a function";function a(c,l,p){var h=!0,m=!0;if(typeof c!="function")throw new TypeError(o);return s(p)&&(h="leading"in p?!!p.leading:h,m="trailing"in p?!!p.trailing:m),e(c,l,{leading:h,maxWait:l,trailing:m})}$.exports=a},function($,n,t){"use strict";t.d(n,"a",function(){return g});var e=t(0),s=t(6),o=t.n(s),a=t(16),c=t(292),l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(v,O)=>{var u={};for(var r in v)p.call(v,r)&&O.indexOf(r)<0&&(u[r]=v[r]);if(v!=null&&l)for(var r of l(v))O.indexOf(r)<0&&h.call(v,r)&&(u[r]=v[r]);return u};const g=v=>{var O=v,{size:u="md",shape:r="circle",badgePosition:i="top-right",badge:d,imageUrl:b,onClick:w,className:E,border:S}=O,P=m(O,["size","shape","badgePosition","badge","imageUrl","onClick","className","border"]);return Object(e.h)(c.a,{className:E},Object(e.h)("div",{onClick:w,class:o()("tw-relative","tw-inline-block")},Object(e.h)("img",{class:o()("tw-inline-block","tw-object-cover",r==="circle"?"tw-rounded-full":"tw-rounded",{"tw-h-6 tw-w-6":u==="sm","tw-h-8 tw-w-8":u==="md","tw-h-10 tw-w-10":u==="lg","tw-h-[64px] tw-w-[64px]":u==="xl","tw-h-[88px] tw-w-[88px]":u==="xxl","tw-border-4 tw-border-substack-bg tw-shadow-md":S},w?"tw-cursor-pointer hover:tw-opacity-90 active:tw-opacity-100":null),src:b?Object(a.cloudinary)(b):void 0}),d!=null?Object(e.h)("span",{className:o()("tw-absolute",{"tw-top-0 tw-right-0":i==="top-right","tw-top-0 tw-left-0":i==="top-left","tw-bottom-0 tw-right-0":i==="bottom-right","tw-bottom-0 tw-left-0":i==="bottom-left"})},d):null))}},function($,n,t){"use strict";t.d(n,"a",function(){return i});var e=t(0),s=t(441),o=t(26),a=t(8),c=t.n(a),l=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,O=(d,b,w)=>b in d?l(d,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):d[b]=w,u=(d,b)=>{for(var w in b||(b={}))g.call(b,w)&&O(d,w,b[w]);if(m)for(var w of m(b))v.call(b,w)&&O(d,w,b[w]);return d},r=(d,b)=>p(d,h(b));function i(){const d=Object(o.e)();return b=>{Object(a.copyToClipboard)(b),d.popToast(w=>Object(e.h)(o.c,r(u({},w),{text:"Link copied",Icon:s.a})))}}},,function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(0),s=t(10);const o=(a,c,l)=>{if(!c)return a;const p=new RegExp(c.join("|"),"ig"),h=a.split(p),m=[...a.matchAll(p)];return h.map((v,O)=>Object(e.h)(e.Fragment,null,v,O!==h.length-1&&Object(e.h)(s.b,{as:"span",weight:l||"bold"},m[O])))}},,function($,n,t){(function(e){var s=t(84),o=t(521),a=n&&!n.nodeType&&n,c=a&&typeof e=="object"&&e&&!e.nodeType&&e,l=c&&c.exports===a,p=l?s.Buffer:void 0,h=p?p.isBuffer:void 0,m=h||o;e.exports=m}).call(this,t(271)($))},,function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(o){let a=o.parentElement,c=null;for(;a&&!(a instanceof HTMLFieldSetElement);)a instanceof HTMLLegendElement&&(c=a),a=a.parentElement;let l=(a==null?void 0:a.getAttribute("disabled"))==="";return l&&s(c)?!1:l}function s(o){if(!o)return!1;let a=o.previousElementSibling;for(;a!==null;){if(a instanceof HTMLLegendElement)return!1;a=a.previousElementSibling}return!0}},function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(1),s=t(41);function o({path:a}={}){const[c,l]=Object(e.k)({}),p=Object(e.j)(null);Object(e.d)(()=>{const g=v=>{p.current=v,l({})};return s.subscribers.push(g),()=>{s.subscribers.splice(s.subscribers.indexOf(g)>>>0,1)}},[]);const h=p.current||Object(s.getCurrentUrl)(),m=h.replace(/\?.+$/,"");return p.current=null,[{url:h,path:m,matches:a&&Object(s.exec)(m,a,{})||null},s.route]}},function($,n,t){"use strict";t.d(n,"a",function(){return lt});var e=t(2),s=t(52),o=t(29),a=t(61),c=t(221),l=t(281),p=t(95),h=t(102),m=t(107),g=t(96),v=t(150);function O(Be){return v.a?null:Be instanceof Node?Be.ownerDocument:Be!=null&&Be.hasOwnProperty("current")&&Be.current instanceof Node?Be.current.ownerDocument:document}let u=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(Be=>`${Be}:not([tabindex='-1'])`).join(",");var r=(Be=>(Be[Be.First=1]="First",Be[Be.Previous=2]="Previous",Be[Be.Next=4]="Next",Be[Be.Last=8]="Last",Be[Be.WrapAround=16]="WrapAround",Be[Be.NoScroll=32]="NoScroll",Be))(r||{}),i=(Be=>(Be[Be.Error=0]="Error",Be[Be.Overflow=1]="Overflow",Be[Be.Success=2]="Success",Be[Be.Underflow=3]="Underflow",Be))(i||{}),d=(Be=>(Be[Be.Previous=-1]="Previous",Be[Be.Next=1]="Next",Be))(d||{});function b(Be=document.body){return Be==null?[]:Array.from(Be.querySelectorAll(u))}var w=(Be=>(Be[Be.Strict=0]="Strict",Be[Be.Loose=1]="Loose",Be))(w||{});function E(Be,_e=0){var Ae;return Be===((Ae=O(Be))==null?void 0:Ae.body)?!1:Object(s.a)(_e,{[0](){return Be.matches(u)},[1](){let fe=Be;for(;fe!==null;){if(fe.matches(u))return!0;fe=fe.parentElement}return!1}})}function S(Be){let _e=O(Be);Object(g.a)().nextFrame(()=>{_e&&!E(_e.activeElement,0)&&P(Be)})}function P(Be){Be==null||Be.focus({preventScroll:!0})}let D=["textarea","input"].join(",");function W(Be){var _e,Ae;return(Ae=(_e=Be==null?void 0:Be.matches)==null?void 0:_e.call(Be,D))!=null?Ae:!1}function B(Be,_e=Ae=>Ae){return Be.slice().sort((Ae,fe)=>{let ft=_e(Ae),nt=_e(fe);if(ft===null||nt===null)return 0;let ct=ft.compareDocumentPosition(nt);return ct&Node.DOCUMENT_POSITION_FOLLOWING?-1:ct&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function f(Be,_e){return y(b(),_e,!0,Be)}function y(Be,_e,Ae=!0,fe=null){let ft=Array.isArray(Be)?Be.length>0?Be[0].ownerDocument:document:Be.ownerDocument,nt=Array.isArray(Be)?Ae?B(Be):Be:b(Be);fe=fe!=null?fe:ft.activeElement;let ct=(()=>{if(_e&5)return 1;if(_e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),Xe=(()=>{if(_e&1)return 0;if(_e&2)return Math.max(0,nt.indexOf(fe))-1;if(_e&4)return Math.max(0,nt.indexOf(fe))+1;if(_e&8)return nt.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),gt=_e&32?{preventScroll:!0}:{},Tt=0,Ut=nt.length,qt;do{if(Tt>=Ut||Tt+Ut<=0)return 0;let sn=Xe+Tt;if(_e&16)sn=(sn+Ut)%Ut;else{if(sn<0)return 3;if(sn>=Ut)return 1}qt=nt[sn],qt==null||qt.focus(gt),Tt+=ct}while(qt!==ft.activeElement);return _e&6&&W(qt)&&qt.select(),qt.hasAttribute("tabindex")||qt.setAttribute("tabindex","0"),2}var M=t(40),N=t(79);function A(Be,_e,Ae){let fe=Object(N.a)(_e);Object(e.useEffect)(()=>{function ft(nt){fe.current(nt)}return window.addEventListener(Be,ft,Ae),()=>window.removeEventListener(Be,ft,Ae)},[Be,Ae])}var L=(Be=>(Be[Be.Forwards=0]="Forwards",Be[Be.Backwards=1]="Backwards",Be))(L||{});function C(){let Be=Object(e.useRef)(0);return A("keydown",_e=>{_e.key==="Tab"&&(Be.current=_e.shiftKey?1:0)},!0),Be}var R=t(147);function U(...Be){return Object(e.useMemo)(()=>O(...Be),[...Be])}function Z(Be,_e,Ae,fe){let ft=Object(N.a)(Ae);Object(e.useEffect)(()=>{Be=Be!=null?Be:window;function nt(ct){ft.current(ct)}return Be.addEventListener(_e,nt,fe),()=>Be.removeEventListener(_e,nt,fe)},[Be,_e,fe])}var F=t(151);function z(Be,_e){let Ae=Object(e.useRef)([]),fe=Object(M.a)(Be);Object(e.useEffect)(()=>{let ft=[...Ae.current];for(let[nt,ct]of _e.entries())if(Ae.current[nt]!==ct){let Xe=fe(_e,ft);return Ae.current=_e,Xe}},[fe,..._e])}let G="div";var V=(Be=>(Be[Be.None=1]="None",Be[Be.InitialFocus=2]="InitialFocus",Be[Be.TabLock=4]="TabLock",Be[Be.FocusLock=8]="FocusLock",Be[Be.RestoreFocus=16]="RestoreFocus",Be[Be.All=30]="All",Be))(V||{});let k=Object.assign(Object(o.d)(function(Be,_e){let Ae=Object(e.useRef)(null),fe=Object(a.b)(Ae,_e),_n=Be,{initialFocus:ft,containers:nt,features:ct=30}=_n,Xe=ha(_n,["initialFocus","containers","features"]);Object(h.a)()||(ct=1);let gt=U(Ae);K({ownerDocument:gt},Boolean(ct&16));let Tt=Y({ownerDocument:gt,container:Ae,initialFocus:ft},Boolean(ct&2));ee({ownerDocument:gt,container:Ae,containers:nt,previousActiveElement:Tt},Boolean(ct&8));let Ut=C(),qt=Object(M.a)(()=>{let Hn=Ae.current;!Hn||Object(s.a)(Ut.current,{[L.Forwards]:()=>y(Hn,r.First),[L.Backwards]:()=>y(Hn,r.Last)})}),sn={ref:fe};return e.default.createElement(e.default.Fragment,null,Boolean(ct&4)&&e.default.createElement(m.b,{as:"button",type:"button",onFocus:qt,features:m.a.Focusable}),Object(o.e)({ourProps:sn,theirProps:Xe,defaultTag:G,name:"FocusTrap"}),Boolean(ct&4)&&e.default.createElement(m.b,{as:"button",type:"button",onFocus:qt,features:m.a.Focusable}))}),{features:V});function K({ownerDocument:Be},_e){let Ae=Object(e.useRef)(null);Z(Be==null?void 0:Be.defaultView,"focusout",ft=>{!_e||Ae.current||(Ae.current=ft.target)},!0),z(()=>{_e||((Be==null?void 0:Be.activeElement)===(Be==null?void 0:Be.body)&&P(Ae.current),Ae.current=null)},[_e]);let fe=Object(e.useRef)(!1);Object(e.useEffect)(()=>(fe.current=!1,()=>{fe.current=!0,Object(F.a)(()=>{!fe.current||(P(Ae.current),Ae.current=null)})}),[])}function Y({ownerDocument:Be,container:_e,initialFocus:Ae},fe){let ft=Object(e.useRef)(null),nt=Object(R.a)();return z(()=>{if(!fe)return;let ct=_e.current;!ct||Object(F.a)(()=>{if(!nt.current)return;let Xe=Be==null?void 0:Be.activeElement;if(Ae!=null&&Ae.current){if((Ae==null?void 0:Ae.current)===Xe){ft.current=Xe;return}}else if(ct.contains(Xe)){ft.current=Xe;return}Ae!=null&&Ae.current?P(Ae.current):y(ct,r.First)===i.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),ft.current=Be==null?void 0:Be.activeElement})},[fe]),ft}function ee({ownerDocument:Be,container:_e,containers:Ae,previousActiveElement:fe},ft){let nt=Object(R.a)();Z(Be==null?void 0:Be.defaultView,"focus",ct=>{if(!ft||!nt.current)return;let Xe=new Set(Ae==null?void 0:Ae.current);Xe.add(_e);let gt=fe.current;if(!gt)return;let Tt=ct.target;Tt&&Tt instanceof HTMLElement?ae(Xe,Tt)?(fe.current=Tt,P(Tt)):(ct.preventDefault(),ct.stopPropagation(),P(gt)):P(fe.current)},!0)}function ae(Be,_e){var Ae;for(let fe of Be)if((Ae=fe.current)!=null&&Ae.contains(_e))return!0;return!1}var he=t(55);let me=new Set,Ye=new Map;function se(Be){Be.setAttribute("aria-hidden","true"),Be.inert=!0}function ie(Be){let _e=Ye.get(Be);!_e||(_e["aria-hidden"]===null?Be.removeAttribute("aria-hidden"):Be.setAttribute("aria-hidden",_e["aria-hidden"]),Be.inert=_e.inert)}function Ee(Be,_e=!0){Object(he.a)(()=>{if(!_e||!Be.current)return;let Ae=Be.current,fe=O(Ae);if(fe){me.add(Ae);for(let ft of Ye.keys())ft.contains(Ae)&&(ie(ft),Ye.delete(ft));return fe.querySelectorAll("body > *").forEach(ft=>{if(ft instanceof HTMLElement){for(let nt of me)if(ft.contains(nt))return;me.size===1&&(Ye.set(ft,{"aria-hidden":ft.getAttribute("aria-hidden"),inert:ft.inert}),se(ft))}}),()=>{if(me.delete(Ae),me.size>0)fe.querySelectorAll("body > *").forEach(ft=>{if(ft instanceof HTMLElement&&!Ye.has(ft)){for(let nt of me)if(ft.contains(nt))return;Ye.set(ft,{"aria-hidden":ft.getAttribute("aria-hidden"),inert:ft.inert}),se(ft)}});else for(let ft of Ye.keys())ie(ft),Ye.delete(ft)}}},[_e])}let Oe=Object(e.createContext)(!1);function ce(){return Object(e.useContext)(Oe)}function ue(Be){return e.default.createElement(Oe.Provider,{value:Be.force},Be.children)}function pe(Be){let _e=ce(),Ae=Object(e.useContext)(q),fe=U(Be),[ft,nt]=Object(e.useState)(()=>{if(!_e&&Ae!==null||v.a)return null;let ct=fe==null?void 0:fe.getElementById("headlessui-portal-root");if(ct)return ct;if(fe===null)return null;let Xe=fe.createElement("div");return Xe.setAttribute("id","headlessui-portal-root"),fe.body.appendChild(Xe)});return Object(e.useEffect)(()=>{ft!==null&&(fe!=null&&fe.body.contains(ft)||fe==null||fe.body.appendChild(ft))},[ft,fe]),Object(e.useEffect)(()=>{_e||Ae!==null&&nt(Ae.current)},[Ae,nt,_e]),ft}let $e=e.Fragment,ne=Object(o.d)(function(Be,_e){let Ae=Be,fe=Object(e.useRef)(null),ft=Object(a.b)(Object(a.a)(Ut=>{fe.current=Ut}),_e),nt=U(fe),ct=pe(fe),[Xe]=Object(e.useState)(()=>{var Ut;return v.a?null:(Ut=nt==null?void 0:nt.createElement("div"))!=null?Ut:null}),gt=Object(h.a)(),Tt=Object(e.useRef)(!1);return Object(he.a)(()=>{if(Tt.current=!1,!(!ct||!Xe))return ct.contains(Xe)||(Xe.setAttribute("data-headlessui-portal",""),ct.appendChild(Xe)),()=>{Tt.current=!0,Object(F.a)(()=>{var Ut;!Tt.current||!ct||!Xe||(ct.removeChild(Xe),ct.childNodes.length<=0&&((Ut=ct.parentElement)==null||Ut.removeChild(ct)))})}},[ct,Xe]),gt?!ct||!Xe?null:Object(e.createPortal)(Object(o.e)({ourProps:{ref:ft},theirProps:Ae,defaultTag:$e,name:"Portal"}),Xe):null}),X=e.Fragment,q=Object(e.createContext)(null),Ne=Object(o.d)(function(Be,_e){let nt=Be,{target:Ae}=nt,fe=ha(nt,["target"]),ft={ref:Object(a.b)(_e)};return e.default.createElement(q.Provider,{value:Ae},Object(o.e)({ourProps:ft,theirProps:fe,defaultTag:X,name:"Popover.Group"}))}),Qe=Object.assign(ne,{Group:Ne});var Ze=t(189),tt=t(91);let Ft=Object(e.createContext)(()=>{});Ft.displayName="StackContext";var Lt=(Be=>(Be[Be.Add=0]="Add",Be[Be.Remove=1]="Remove",Be))(Lt||{});function rn(){return Object(e.useContext)(Ft)}function ht({children:Be,onUpdate:_e,type:Ae,element:fe,enabled:ft}){let nt=rn(),ct=Object(M.a)((...Xe)=>{_e==null||_e(...Xe),nt(...Xe)});return Object(he.a)(()=>{let Xe=ft===void 0||ft===!0;return Xe&&ct(0,Ae,fe),()=>{Xe&&ct(1,Ae,fe)}},[ct,Ae,fe,ft]),e.default.createElement(Ft.Provider,{value:ct},Be)}function je(Be,_e,Ae){let fe=Object(N.a)(_e);Object(e.useEffect)(()=>{function ft(nt){fe.current(nt)}return document.addEventListener(Be,ft,Ae),()=>document.removeEventListener(Be,ft,Ae)},[Be,Ae])}function Le(Be,_e,Ae=!0){let fe=Object(e.useRef)(!1);Object(e.useEffect)(()=>{requestAnimationFrame(()=>{fe.current=Ae})},[Ae]);function ft(ct,Xe){if(!fe.current||ct.defaultPrevented)return;let gt=function Ut(qt){return typeof qt=="function"?Ut(qt()):Array.isArray(qt)||qt instanceof Set?qt:[qt]}(Be),Tt=Xe(ct);if(Tt!==null&&!!Tt.getRootNode().contains(Tt)){for(let Ut of gt){if(Ut===null)continue;let qt=Ut instanceof HTMLElement?Ut:Ut.current;if(qt!=null&&qt.contains(Tt))return}return!E(Tt,w.Loose)&&Tt.tabIndex!==-1&&ct.preventDefault(),_e(ct,Tt)}}let nt=Object(e.useRef)(null);je("mousedown",ct=>{var Xe,gt;fe.current&&(nt.current=((gt=(Xe=ct.composedPath)==null?void 0:Xe.call(ct))==null?void 0:gt[0])||ct.target)},!0),je("click",ct=>{!nt.current||(ft(ct,()=>nt.current),nt.current=null)},!0),je("blur",ct=>ft(ct,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function rt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}var Pe=(Be=>(Be[Be.Open=0]="Open",Be[Be.Closed=1]="Closed",Be))(Pe||{}),de=(Be=>(Be[Be.SetTitleId=0]="SetTitleId",Be))(de||{});let be={[0](Be,_e){return Be.titleId===_e.id?Be:Yo(vr({},Be),{titleId:_e.id})}},Ie=Object(e.createContext)(null);Ie.displayName="DialogContext";function ke(Be){let _e=Object(e.useContext)(Ie);if(_e===null){let Ae=new Error(`<${Be} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(Ae,ke),Ae}return _e}function Te(Be,_e){Object(e.useEffect)(()=>{var Ae;if(!_e||!Be)return;let fe=Object(g.a)();function ft(Xe,gt,Tt){let Ut=Xe.style.getPropertyValue(gt);return Object.assign(Xe.style,{[gt]:Tt}),fe.add(()=>{Object.assign(Xe.style,{[gt]:Ut})})}let nt=Be.documentElement,ct=((Ae=Be.defaultView)!=null?Ae:window).innerWidth-nt.clientWidth;if(ft(nt,"overflow","hidden"),ct>0){let Xe=nt.clientWidth-nt.offsetWidth,gt=ct-Xe;ft(nt,"paddingRight",`${gt}px`)}if(rt()){let Xe=window.pageYOffset;ft(nt,"position","fixed"),ft(nt,"marginTop",`-${Xe}px`),ft(nt,"width","100%"),fe.add(()=>window.scrollTo(0,Xe))}return fe.dispose},[Be,_e])}function x(Be,_e){return Object(s.a)(_e.type,be,Be,_e)}let H="div",le=o.a.RenderStrategy|o.a.Static,Ce=Object(o.d)(function(Be,_e){let tr=Be,{open:Ae,onClose:fe,initialFocus:ft,__demoMode:nt=!1}=tr,ct=ha(tr,["open","onClose","initialFocus","__demoMode"]),[Xe,gt]=Object(e.useState)(0),Tt=Object(tt.c)();Ae===void 0&&Tt!==null&&(Ae=Object(s.a)(Tt,{[tt.b.Open]:!0,[tt.b.Closed]:!1}));let Ut=Object(e.useRef)(new Set),qt=Object(e.useRef)(null),sn=Object(a.b)(qt,_e),_n=Object(e.useRef)(null),Hn=U(qt),wn=Be.hasOwnProperty("open")||Tt!==null,Un=Be.hasOwnProperty("onClose");if(!wn&&!Un)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!wn)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!Un)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof Ae!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${Ae}`);if(typeof fe!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${fe}`);let bn=Ae?0:1,[cr,fr]=Object(e.useReducer)(x,{titleId:null,descriptionId:null,panelRef:Object(e.createRef)()}),ur=Object(M.a)(()=>fe(!1)),er=Object(M.a)(Zn=>fr({type:0,id:Zn})),jr=Object(h.a)()?nt?!1:bn===0:!1,wt=Xe>1,mt=Object(e.useContext)(Ie)!==null,Fe=wt?"parent":"leaf";Ee(qt,wt?jr:!1),Le(()=>{var Zn,At;return[...Array.from((Zn=Hn==null?void 0:Hn.querySelectorAll("body > *, [data-headlessui-portal]"))!=null?Zn:[]).filter(Xt=>!(!(Xt instanceof HTMLElement)||Xt.contains(_n.current)||cr.panelRef.current&&Xt.contains(cr.panelRef.current))),(At=cr.panelRef.current)!=null?At:qt.current]},ur,jr&&!wt),Z(Hn==null?void 0:Hn.defaultView,"keydown",Zn=>{Zn.defaultPrevented||Zn.key===c.a.Escape&&bn===0&&(wt||(Zn.preventDefault(),Zn.stopPropagation(),ur()))}),Te(Hn,bn===0&&!mt),Object(e.useEffect)(()=>{if(bn!==0||!qt.current)return;let Zn=new IntersectionObserver(At=>{for(let Xt of At)Xt.boundingClientRect.x===0&&Xt.boundingClientRect.y===0&&Xt.boundingClientRect.width===0&&Xt.boundingClientRect.height===0&&ur()});return Zn.observe(qt.current),()=>Zn.disconnect()},[bn,qt,ur]);let[pt,Dt]=Object(Ze.b)(),Jt=`headlessui-dialog-${Object(p.a)()}`,Gt=Object(e.useMemo)(()=>[{dialogState:bn,close:ur,setTitleId:er},cr],[bn,cr,ur,er]),mn=Object(e.useMemo)(()=>({open:bn===0}),[bn]),Cn={ref:sn,id:Jt,role:"dialog","aria-modal":bn===0?!0:void 0,"aria-labelledby":cr.titleId,"aria-describedby":pt};return e.default.createElement(ht,{type:"Dialog",enabled:bn===0,element:qt,onUpdate:Object(M.a)((Zn,At,Xt)=>{At==="Dialog"&&Object(s.a)(Zn,{[Lt.Add](){Ut.current.add(Xt),gt(en=>en+1)},[Lt.Remove](){Ut.current.add(Xt),gt(en=>en-1)}})})},e.default.createElement(ue,{force:!0},e.default.createElement(Qe,null,e.default.createElement(Ie.Provider,{value:Gt},e.default.createElement(Qe.Group,{target:qt},e.default.createElement(ue,{force:!1},e.default.createElement(Dt,{slot:mn,name:"Dialog.Description"},e.default.createElement(k,{initialFocus:ft,containers:Ut,features:jr?Object(s.a)(Fe,{parent:k.features.RestoreFocus,leaf:k.features.All&~k.features.FocusLock}):k.features.None},Object(o.e)({ourProps:Cn,theirProps:ct,slot:mn,defaultTag:H,features:le,visible:bn===0,name:"Dialog"})))))))),e.default.createElement(m.b,{features:m.a.Hidden,ref:_n}))}),Ue="div",Ve=Object(o.d)(function(Be,_e){let[{dialogState:Ae,close:fe}]=ke("Dialog.Overlay"),ft=Object(a.b)(_e),nt=`headlessui-dialog-overlay-${Object(p.a)()}`,ct=Object(M.a)(gt=>{if(gt.target===gt.currentTarget){if(Object(l.a)(gt.currentTarget))return gt.preventDefault();gt.preventDefault(),gt.stopPropagation(),fe()}}),Xe=Object(e.useMemo)(()=>({open:Ae===0}),[Ae]);return Object(o.e)({ourProps:{ref:ft,id:nt,"aria-hidden":!0,onClick:ct},theirProps:Be,slot:Xe,defaultTag:Ue,name:"Dialog.Overlay"})}),bt="div",yt=Object(o.d)(function(Be,_e){let[{dialogState:Ae},fe]=ke("Dialog.Backdrop"),ft=Object(a.b)(_e),nt=`headlessui-dialog-backdrop-${Object(p.a)()}`;Object(e.useEffect)(()=>{if(fe.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[fe.panelRef]);let ct=Object(e.useMemo)(()=>({open:Ae===0}),[Ae]);return e.default.createElement(ue,{force:!0},e.default.createElement(Qe,null,Object(o.e)({ourProps:{ref:ft,id:nt,"aria-hidden":!0},theirProps:Be,slot:ct,defaultTag:bt,name:"Dialog.Backdrop"})))}),Qt="div",tn=Object(o.d)(function(Be,_e){let[{dialogState:Ae},fe]=ke("Dialog.Panel"),ft=Object(a.b)(_e,fe.panelRef),nt=`headlessui-dialog-panel-${Object(p.a)()}`,ct=Object(e.useMemo)(()=>({open:Ae===0}),[Ae]),Xe=Object(M.a)(gt=>{gt.stopPropagation()});return Object(o.e)({ourProps:{ref:ft,id:nt,onClick:Xe},theirProps:Be,slot:ct,defaultTag:Qt,name:"Dialog.Panel"})}),Kn="h2",Ot=Object(o.d)(function(Be,_e){let[{dialogState:Ae,setTitleId:fe}]=ke("Dialog.Title"),ft=`headlessui-dialog-title-${Object(p.a)()}`,nt=Object(a.b)(_e);Object(e.useEffect)(()=>(fe(ft),()=>fe(null)),[ft,fe]);let ct=Object(e.useMemo)(()=>({open:Ae===0}),[Ae]);return Object(o.e)({ourProps:{ref:nt,id:ft},theirProps:Be,slot:ct,defaultTag:Kn,name:"Dialog.Title"})}),lt=Object.assign(Ce,{Backdrop:yt,Panel:tn,Overlay:Ve,Title:Ot,Description:Ze.a})},function($,n,t){var e=t(514),s=t(117);function o(a,c,l,p,h){return a===c?!0:a==null||c==null||!s(a)&&!s(c)?a!==a&&c!==c:e(a,c,l,p,o,h)}$.exports=o},function($,n,t){"use strict";var e=t(608);$.exports=Function.prototype.bind||e},function($,n,t){"use strict";var e=String.prototype.replace,s=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};$.exports={default:o.RFC3986,formatters:{RFC1738:function(a){return e.call(a,s,"+")},RFC3986:function(a){return String(a)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},function($,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return d});var e=t(0),s=t(1),o=t(68),a=t(45),c=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(b,w,E)=>w in b?c(b,w,{enumerable:!0,configurable:!0,writable:!0,value:E}):b[w]=E,g=(b,w)=>{for(var E in w||(w={}))p.call(w,E)&&m(b,E,w[E]);if(l)for(var E of l(w))h.call(w,E)&&m(b,E,w[E]);return b},v;const O=typeof window!="undefined"&&window._preloads||o.c,u=typeof window!="undefined"?(v=window._preloads)==null?void 0:v.siteConfigs:{},r=(b,w)=>g(g({},Object(o.f)(b,w)),Object(a.d)(b)),i=Object(e.createContext)(r(u,O));i.displayName="ExperimentsAndSiteConfigContext";function d({siteConfigs:b={},experimentInfo:w,children:E}){const S=w||O,P=Object(s.h)(()=>r(b,S),[b,S]);return Object(e.h)(i.Provider,{value:P},E)}},function($,n,t){"use strict";t.d(n,"a",function(){return e});const e=(s,o)=>o.payments_state==="enabled"?s.is_subscribed:s.is_free_subscribed},function($,n,t){var e=t(174),s=t(491),o=t(492),a=t(493),c=t(494),l=t(495);function p(h){var m=this.__data__=new e(h);this.size=m.size}p.prototype.clear=s,p.prototype.delete=o,p.prototype.get=a,p.prototype.has=c,p.prototype.set=l,$.exports=p},function($,n,t){var e=t(522),s=t(326),o=t(391),a=o&&o.isTypedArray,c=a?s(a):e;$.exports=c},function($,n,t){"use strict";t.d(n,"a",function(){return e}),t.d(n,"b",function(){return s});const e={ABOUT_PAGE_END_CTA_RENDERED:"About Page End Cta Rendered",ABOUT_PAGE_END_CTA_SEEN:"About Page End Cta Seen",ACCOUNT_CARD_PRESUBSCRIBE_CLICKED:"Account Card Presubscribe Clicked",ACCOUNT_CARD_READS_LINK_CLICKED:"Account Card Reads Link Clicked",ACCOUNT_CARD_SHOWN:"Account Card Shown",ACCOUNT_CARD_SUBSCRIBE_CLICKED:"Account Card Subscribe Clicked",ACCOUNT_CARD_UNPRESUBSCRIBE_CLICKED:"Account Card Unpresubscribe Clicked",ACCOUNT_CARD_VIEW_PROFILE_LINK_CLICKED:"Account Card View Profile Link Clicked",ACCOUNT_CARD_WRITES_LINK_CLICKED:"Account Card Writes Link Clicked",ADD_EPISODE_AUDIO_CLICKED:"Add Episode Audio Clicked",ADD_TO_PODCAST_CLICKED:"Add To Podcast Clicked",ADD_TO_PODCAST_SCREEN_SHOWN:"Add To Podcast Screen Shown",ADD_TO_PODCAST_SKIPPED:"Add To Podcast Skipped",APPLE_PAY_ATTEMPED:"Apple Pay Attemped",APPLE_PAY_FAILED:"Apple Pay Failed",APPLE_PAY_SETUP_FINISHED:"Apple Pay Setup Finished",APPLE_PAY_SETUP_STARTED:"Apple Pay Setup Started",APPLE_PAY_SUCCEEDED:"Apple Pay Succeeded",APP_PROMO_WIZARD_CLICKED:"App Promo Wizard Clicked",APP_PROMO_WIZARD_DISMISSED:"App Promo Wizard Dismissed",APP_PROMO_WIZARD_SEEN:"App Promo Wizard Seen",ARCHIVE_PAGE_POST_CLICKED:"Archive Page Post Clicked",AUDIO_BUFFERING_COMPLETED:"Audio Buffering Completed",AUDIO_BUFFERING_STARTED:"Audio Buffering Started",AUDIO_DRAWER_DONE_CLICKED:"Audio Drawer Done Clicked",AUDIO_MODAL_BROWSE_FILES_CLICKED:"Audio Modal Browse Files Clicked",AUDIO_MODAL_CANCEL_CLICKED:"Audio Modal Cancel Clicked",AUDIO_MODAL_DROPPED_FILE:"Audio Modal Dropped File",AUDIO_MODAL_INSERT_CLICKED:"Audio Modal Insert Clicked",AUDIO_MODAL_PLAYPAUSE_CLICKED:"Audio Modal Playpause Clicked",AUDIO_MODAL_START_OVER_CLICKED:"Audio Modal Start Over Clicked",AUDIO_PLAYBACK_COMPLETE:"Audio Playback Complete",AUDIO_PLAYBACK_CONTINUED:"Audio Playback Continued",AUDIO_PLAYBACK_STARTED:"Audio Playback Started",AUDIO_PRESS_RECORD_CLICKED:"Audio Press Record Clicked",AUDIO_UPLOAD_COMPLETED:"Audio Upload Completed",AUTOSAVE_CONFLICT_DISPLAYED:"Autosave Conflict Displayed",BESTSELLER_INFO_SHOWN:"Bestseller Info Shown",BILLING_FORM_ERROR:"Billing Form Error",BILLING_FORM_INPUT_FILLED:"Billing Form Input Filled",BILLING_FORM_MISSING_PAYMENT:"Billing Form Missing Payment",BILLING_FORM_SUBMIT_PRESSED:"Billing Form Submit Pressed",BILLING_UPDATE_PAGE_SEEN:"Billing Update Page Seen",BOOST_LEARN_MORE_CLICKED:"Boost Learn More Clicked",BOOST_MODAL_DONE_CLICKED:"Boost Modal Done Clicked",BOOST_MODAL_SEEN:"Boost Modal Seen",BOOST_MODAL_TURN_ON_CLICKED:"Boost Modal Turn On Clicked",BUNDLE_PUBLICATION_TOGGLED:"Bundle Publication Toggled",BUNDLE_SCREEN_SHOWN:"Bundle Screen Shown",BUNDLE_SUBSCRIBED:"Bundle Subscribed",BUNDLE_SUBSCRIBE_FAILED:"Bundle Subscribe Failed",BUNDLE_SUBSCRIBE_INITIATED:"Bundle Subscribe Initiated",CARD_EXPIRED_WARNING_DISMISSED:"Card Expired Warning Dismissed",CHAT_APP_UPSELL_SUBSCRIBE_SCREEN_SHOWN:"Chat App Upsell Subscribe Screen Shown",CHAT_CHECKLIST_GET_APP_CLICKED:"Chat Checklist Get App Clicked",CHAT_CHECKLIST_SEE_EXAMPLES_CLICKED:"Chat Checklist See Examples Clicked",CHAT_CHECKLIST_USE_TEMPLATE_CLICKED:"Chat Checklist Use Template Clicked",CHAT_ENABLE_DASHBOARD_CTA_CLICKED:"Chat Enable Dashboard Cta Clicked",CHAT_ENABLE_DASHBOARD_CTA_DISMISSED:"Chat Enable Dashboard Cta Dismissed",CHAT_ENABLE_DASHBOARD_CTA_SHOWN:"Chat Enable Dashboard Cta Shown",CHAT_INVITE_DRAFT_POST_CTA_CLICKED:"Chat Invite Draft Post Cta Clicked",CHAT_INVITE_DRAFT_POST_CTA_DISMISSED:"Chat Invite Draft Post Cta Dismissed",CHAT_INVITE_DRAFT_POST_CTA_SHOWN:"Chat Invite Draft Post Cta Shown",CLICKED_CATEGORY:"Clicked Category",CLICKED_GO_TO_SUBSCRIPTION_ON_PROFILE_PAGE:"Clicked Go To Subscription On Profile Page",CLICKED_PAUSE_BUTTON:"Clicked Pause Button",CLICKED_PLAY_BUTTON:"Clicked Play Button",CLICKED_SUBSCRIBE_ON_PROFILE_PAGE:"Clicked Subscribe On Profile Page",COHORT_PAGE_CLICKED:"Cohort Page Clicked",COLLAPSED_POSTS_SHOWN:"Collapsed Posts Shown",COMMENTS_SORTED:"Comments Sorted",COMMENTS_VIEWED:"Comments Viewed",COMMENT_EXPAND_TOGGLE_CLICKED:"Comment Expand Toggle Clicked",COMMENT_PAYWALL_SHOWN:"Comment Paywall Shown",CONFLICT_TOAST_DISMISSED:"Conflict Toast Dismissed",COVER_PAGE_AUTHOR_CLICKED:"Cover Page Author Clicked",COVER_PAGE_BECOME_PAYING_CLICKED:"Cover Page Become Paying Clicked",COVER_PAGE_EMAIL_SUBMITTED:"Cover Page Email Submitted",COVER_PAGE_LEARN_MORE_CLICKED:"Cover Page Learn More Clicked",COVER_PAGE_MAYBE_LATER_CLICKED:"Cover Page Maybe Later Clicked",COVER_PAGE_SHOWN:"Cover Page Shown",CROSS_POST_MODAL_CLOSED:"Cross Post Modal Closed",CROSS_POST_MODAL_CONTINUED:"Cross Post Modal Continued",CROSS_POST_MODAL_CONTINUE_CLICKED:"Cross Post Modal Continue Clicked",CROSS_POST_MODAL_CONTINUE_FAILED:"Cross Post Modal Continue Failed",CROSS_POST_MODAL_SUBMITTED:"Cross Post Modal Submitted",CROSS_POST_MODAL_SUBMIT_CLICKED:"Cross Post Modal Submit Clicked",CROSS_POST_MODAL_SUBMIT_FAILED:"Cross Post Modal Submit Failed",CROSS_POST_MODAL_TYPING_STARTED:"Cross Post Modal Typing Started",CUSTOMER_SUPPORT_MODE_FORM_ERROR:"Customer Support Mode Form Error",CUSTOMER_SUPPORT_MODE_FORM_INPUT_FILLED:"Customer Support Mode Form Input Filled",CUSTOMER_SUPPORT_MODE_FORM_MISSING_PAYMENT:"Customer Support Mode Form Missing Payment",CUSTOMER_SUPPORT_MODE_FORM_SUBMIT_PRESSED:"Customer Support Mode Form Submit Pressed",CUSTOM_DOMAIN_CONFIG_ERROR:"Custom Domain Config Error",CUSTOM_DOMAIN_CONFIG_INPUT_FILLED:"Custom Domain Config Input Filled",CUSTOM_DOMAIN_CONFIG_MISSING_PAYMENT:"Custom Domain Config Missing Payment",CUSTOM_DOMAIN_CONFIG_SUBMIT_PRESSED:"Custom Domain Config Submit Pressed",CUSTOM_DOMAIN_INQUIRY:"Custom Domain Inquiry",CUSTOM_DOMAIN_LOGIN_REDIRECT_ATTEMPTED:"Custom Domain Login Redirect Attempted",CUSTOM_DOMAIN_PAYMENT_ERROR:"Custom Domain Payment Error",CUSTOM_DOMAIN_PAYMENT_INPUT_FILLED:"Custom Domain Payment Input Filled",CUSTOM_DOMAIN_PAYMENT_MISSING_PAYMENT:"Custom Domain Payment Missing Payment",CUSTOM_DOMAIN_PAYMENT_SUBMIT_PRESSED:"Custom Domain Payment Submit Pressed",DEFAULT_PUBLICATION_CREATION_FAILED:"Default Publication Creation Failed",DONATE_SUBSCRIBE_FORM_ERROR:"Donate Subscribe Form Error",DONATE_SUBSCRIBE_FORM_INPUT_FILLED:"Donate Subscribe Form Input Filled",DONATE_SUBSCRIBE_FORM_MISSING_PAYMENT:"Donate Subscribe Form Missing Payment",DONATE_SUBSCRIBE_FORM_SUBMIT_PRESSED:"Donate Subscribe Form Submit Pressed",DONATE_SUBSCRIBE_SCREEN_SHOWN:"Donate Subscribe Screen Shown",EARNING_CALCULATOR_INFO_CLICKED:"Earning Calculator Info Clicked",EARNING_CALCULATOR_UPDATED:"Earning Calculator Updated",EDITOR_MENU_ICON_CLICKED:"Editor Menu Icon Clicked",EDIT_POST_DROPDOWN_MENU_OPENED:"Edit Post Dropdown Menu Opened",EMAIL_LINK_INTERSTITIAL_CLICKED:"Email Link Interstitial Clicked",EMAIL_TYPO_SUGGESTION_ACCEPTED:"Email Typo Suggestion Accepted",EMAIL_TYPO_SUGGESTION_REJECTED:"Email Typo Suggestion Rejected",EMAIL_TYPO_SUGGESTION_SHOWN:"Email Typo Suggestion Shown",EMBED_URL_ATTEMPTED:"Embed Url Attempted",EMBED_URL_FAILED:"Embed Url Failed",EMBED_URL_SUCCEEDED:"Embed Url Succeeded",END_OF_POST_RECOMMEND_CTA_CLICKED:"End Of Post Recommend Cta Clicked",FEATURE_ANNOUNCEMENT_BANNER_CLICKED:"Feature Announcement Banner Clicked",FEATURE_ANNOUNCEMENT_BANNER_SHOWN:"Feature Announcement Banner Shown",FEED_ITEM_CLICKED:"Feed Item Clicked",FEED_ITEM_SEEN:"Feed Item Seen",FILES_REJECTED:"Files Rejected",FINISH_MAGIC_LOGIN_MODAL_SHOWN:"Finish Magic Login Modal Shown",FOUNDING_PRICE_CONFIRMATION_DISMISSED:"Founding Price Confirmation Dismissed",FOUNDING_PRICE_CONFIRMATION_REQUIRED:"Founding Price Confirmation Required",FOUNDING_PRICE_CONFIRMATION_SUBMITTED:"Founding Price Confirmation Submitted",FRAME_MESSAGE_HANDLED:"Frame Message Handled",FRAME_MESSAGE_SENT:"Frame Message Sent",FREE_SIGNUP_FAILED:"Free Signup Failed",FULL_EMAIL_FORM_SHOWN:"Full Email Form Shown",GIFT_SUBSCRIBE_FORM_ERROR:"Gift Subscribe Form Error",GIFT_SUBSCRIBE_FORM_INPUT_FILLED:"Gift Subscribe Form Input Filled",GIFT_SUBSCRIBE_FORM_MISSING_PAYMENT:"Gift Subscribe Form Missing Payment",GIFT_SUBSCRIBE_FORM_SUBMIT_PRESSED:"Gift Subscribe Form Submit Pressed",GIFT_SUBSCRIBE_SCREEN_SHOWN:"Gift Subscribe Screen Shown",GO_PAID_CTA_CLICKED:"Go Paid Cta Clicked",GO_PAID_CTA_DISMISSED:"Go Paid Cta Dismissed",GO_PAID_CTA_SHOWN:"Go Paid Cta Shown",GROUP_SUBSCRIBE_FORM_ERROR:"Group Subscribe Form Error",GROUP_SUBSCRIBE_FORM_INPUT_FILLED:"Group Subscribe Form Input Filled",GROUP_SUBSCRIBE_FORM_MISSING_PAYMENT:"Group Subscribe Form Missing Payment",GROUP_SUBSCRIBE_FORM_SUBMIT_PRESSED:"Group Subscribe Form Submit Pressed",GROUP_SUBSCRIBE_MODAL_CANCEL_CLICKED:"Group Subscribe Modal Cancel Clicked",GROUP_SUBSCRIBE_MODAL_CONFIRM_CLICKED:"Group Subscribe Modal Confirm Clicked",GROUP_SUBSCRIBE_SCREEN_SHOWN:"Group Subscribe Screen Shown",HEADER_ANCHOR_WIDGET_CLICKED:"Header Anchor Widget Clicked",HEADER_SEARCHED:"Header Searched",HOLIDAY_GIFT_CTA_CLICKED:"Holiday Gift Cta Clicked",HOLIDAY_GIFT_CTA_DISMISSED:"Holiday Gift Cta Dismissed",HOLIDAY_GIFT_CTA_SHOWN:"Holiday Gift Cta Shown",HOMEPAGE_DASHBOARD_LINK_CLICKED:"Homepage Dashboard Link Clicked",HOMEPAGE_GET_STARTED_CLICKED:"Homepage Get Started Clicked",HOMEPAGE_GOING_PAID_LINK_CLICKED:"Homepage Going Paid Link Clicked",HOMEPAGE_LINK_CLICKED:"Homepage Link Clicked",HOMEPAGE_PUBLICATION_LINK_CLICKED:"Homepage Publication Link Clicked",HOMEPAGE_READER_LINK_CLICKED:"Homepage Reader Link Clicked",IMPORT_PUBLICATION_BYPASSED:"Import Publication Bypassed",IMPORT_PUBLICATION_CANCELLED:"Import Publication Cancelled",IMPORT_PUBLICATION_COMPLETE:"Import Publication Complete",IMPORT_PUBLICATION_CONFIRMED:"Import Publication Confirmed",IMPORT_PUBLICATION_ERROR_SKIPPED:"Import Publication Error Skipped",IMPORT_PUBLICATION_LOADED:"Import Publication Loaded",INBOX_DATA_FETCHED:"Inbox Data Fetched",INBOX_INITIAL_DATA_LOADED:"Inbox Initial Data Loaded",INBOX_POST_CLICKED:"Inbox Post Clicked",INBOX_POST_REACTION:"Inbox Post Reaction",INBOX_SIDEBAR_HIDDEN:"Inbox Sidebar Hidden",INBOX_SIDEBAR_TOGGLED:"Inbox Sidebar Toggled",INBOX_SIDEBAR_VIEWED:"Inbox Sidebar Viewed",INTRODUCING_RECOMMENDATION_DIGESTS_MODAL_LEARN_MORE_CLICKED:"Introducing Recommendation Digests Modal Learn More Clicked",INTRODUCING_RECOMMENDATION_DIGESTS_MODAL_SHOWN:"Introducing Recommendation Digests Modal Shown",IOS_APP_BANNER_DISMISSED:"Ios App Banner Dismissed",IOS_APP_BANNER_TAPPED:"Ios App Banner Tapped",IOS_APP_BANNER_VIEWED:"Ios App Banner Viewed",LATEX_BLOCK_ADDED:"Latex Block Added",LIKE_ACTIVITY_TOGGLED:"Like Activity Toggled",LIKE_NUX_SHOWN:"Like Nux Shown",LIKE_UPSELL_FREE_SUBSCRIBED:"Like Upsell Free Subscribed",LIKE_UPSELL_MODAL_SEEN:"Like Upsell Modal Seen",LIKE_UPSELL_PLAN_SELECTED:"Like Upsell Plan Selected",LIKE_UPSELL_PLEDGE_CLICKED:"Like Upsell Pledge Clicked",LISTEN_TO_THIS_POST_MODAL_DISMISSED:"Listen To This Post Modal Dismissed",LISTEN_TO_THIS_POST_MODAL_GET_THE_APP_CLICKED:"Listen To This Post Modal Get The App Clicked",LISTEN_TO_THIS_POST_MODAL_SHOWN:"Listen To This Post Modal Shown",MANAGE_RECOMMENDATIONS_BUTTON_CLICKED:"Manage Recommendations Button Clicked",MANAGE_RECOMMENDATIONS_LEARN_MORE_CLICKED:"Manage Recommendations Learn More Clicked",MANAGE_RECOMMENDATIONS_MODAL_CLOSED:"Manage Recommendations Modal Closed",MANAGE_RECOMMENDATIONS_MODAL_OPENED:"Manage Recommendations Modal Opened",MANAGE_RECOMMENDATIONS_STEP_CHANGED:"Manage Recommendations Step Changed",MEDIA_UPLOAD_COMPLETED:"Media Upload Completed",MEDIA_UPLOAD_CREATED:"Media Upload Created",MEDIA_UPLOAD_FAILED:"Media Upload Failed",MEDIA_UPLOAD_STARTED:"Media Upload Started",MEETING_MISSING_PAYMENT:"Meeting Missing Payment",MEETING_ORDER_PAGE_VIEWED:"Meeting Order Page Viewed",MEETING_PAGE_VIEWED:"Meeting Page Viewed",MEETING_POST_TEMPLATE_CREATED:"Meeting Post Template Created",MEETING_SUBMIT_PRESSED:"Meeting Submit Pressed",NATIVE_SHARE_FAILED:"Native Share Failed",NATIVE_SHARE_SUCCESS:"Native Share Success",NAV_BAR_CTA_CLICKED:"Nav Bar Cta Clicked",NAV_BAR_HOME_LINK_CLICKED:"Nav Bar Home Link Clicked",NEW_GUEST_POST_CLICKED:"New Guest Post Clicked",NEW_SUBSCRIPTION_ON_PROFILE_DISPLAYED:"New Subscription On Profile Displayed",NEXT_POST_LINK_CLICKED:"Next Post Link Clicked",NOTIFICATIONS_DROPDOWN_VIEWED:"Notifications Dropdown Viewed",NOTIFICATIONS_UNREAD_SHOWN:"Notifications Unread Shown",OPENNODE_ACCOUNT_SIGNUP_CLICKED:"Opennode Account Signup Clicked",OPENNODE_GENERATE_API_KEY_CLICKED:"Opennode Generate Api Key Clicked",OTHER_SUBSCRIPTION_OPTIONS_CLICKED:"Other Subscription Options Clicked",OTHER_SUBSCRIPTION_OPTION_SELECTED:"Other Subscription Option Selected",PAGES:"Pages",PAYMENT_PLEDGE_LAUNCH_MODAL_SEEN:"Payment Pledge Launch Modal Seen",PAYMENT_PLEDGE_LAUNCH_MODAL_TURN_OFF_CLICKED:"Payment Pledge Launch Modal Turn Off Clicked",PAYMENT_PLEDGE_MISSING_PAYMENT:"Payment Pledge Missing Payment",PAYMENT_PLEDGE_NOTE_SCREEN_FAILED:"Payment Pledge Note Screen Failed",PAYMENT_PLEDGE_NOTE_SCREEN_SEEN:"Payment Pledge Note Screen Seen",PAYMENT_PLEDGE_NOTE_SCREEN_SUBMITTED:"Payment Pledge Note Screen Submitted",PAYMENT_PLEDGE_PRICE_WARNING_SEEN:"Payment Pledge Price Warning Seen",PAYMENT_PLEDGE_SCREEN_FAILED:"Payment Pledge Screen Failed",PAYMENT_PLEDGE_SCREEN_SEEN:"Payment Pledge Screen Seen",PAYMENT_PLEDGE_SCREEN_SKIPPED:"Payment Pledge Screen Skipped",PAYMENT_PLEDGE_SCREEN_SUBMITTED:"Payment Pledge Screen Submitted",PAYMENT_SUGGESTION_MODAL_ERROR:"Payment Suggestion Modal Error",PAYMENT_SUGGESTION_MODAL_SEEN:"Payment Suggestion Modal Seen",PAYMENT_SUGGESTION_MODAL_STRIPE_ERROR:"Payment Suggestion Modal Stripe Error",PAYMENT_SUGGESTION_MODAL_SUBMITTED:"Payment Suggestion Modal Submitted",PAYWALL_FREE_SIGNUP_FAILED:"Paywall Free Signup Failed",PAYWALL_FREE_TRIAL_CTA_CLICKED:"Paywall Free Trial Cta Clicked",PAYWALL_FREE_TRIAL_CTA_DISMISSED:"Paywall Free Trial Cta Dismissed",PAYWALL_FREE_TRIAL_CTA_SHOWN:"Paywall Free Trial Cta Shown",PAYWALL_PROMPT_ACCEPTED:"Paywall Prompt Accepted",PAYWALL_PROMPT_REJECTED:"Paywall Prompt Rejected",PODCAST_APP_LINK_CLICK:"Podcast App Link Click",PODCAST_EDITING_COMPLETE:"Podcast Editing Complete",PODCAST_EDITING_ERROR:"Podcast Editing Error",PODCAST_EDITING_INITIATED:"Podcast Editing Initiated",PODCAST_EMAIL_LINK_CLICKED:"Podcast Email Link Clicked",PODCAST_EPISODE_NOTES_SAVE_CLICKED:"Podcast Episode Notes Save Clicked",PODCAST_FEED_URL_COPIED:"Podcast Feed Url Copied",PODCAST_LISTEN_ON_CLICKED:"Podcast Listen On Clicked",PODCAST_PREVIEW_MENU_ADD_PREVIEW_CLICKED:"Podcast Preview Menu Add Preview Clicked",PODCAST_PREVIEW_MENU_CLICKED:"Podcast Preview Menu Clicked",PODCAST_PREVIEW_MENU_REMOVE_CLICKED:"Podcast Preview Menu Remove Clicked",PODCAST_PREVIEW_MENU_REMOVE_PREVIEW_CLICKED:"Podcast Preview Menu Remove Preview Clicked",PODCAST_SETUP_COMPLETE:"Podcast Setup Complete",PODCAST_SETUP_ERROR:"Podcast Setup Error",PODCAST_SETUP_INITIATED:"Podcast Setup Initiated",POLL_SIGNUP_DIALOG_CLOSED:"Poll Signup Dialog Closed",POLL_SIGNUP_DIALOG_PRESENTED:"Poll Signup Dialog Presented",POLL_SIGNUP_DIALOG_SUBMITTED:"Poll Signup Dialog Submitted",POST_ARCHIVED:"Post Archived",POST_BOTTOM_SEEN:"Post Bottom Seen",POST_COMMENTS_FOOTER_SEEN:"Post Comments Footer Seen",POST_COMPOSER_CREATION_SHARED:"Post Composer Creation Shared",POST_COMPOSER_CREATION_SHARE_SHEET_VIEWED:"Post Composer Creation Share Sheet Viewed",POST_COMPOSER_DRAFT_LOADED:"Post Composer Draft Loaded",POST_COMPOSER_PUBLISH_CONFIRMATION_VIEWED:"Post Composer Publish Confirmation Viewed",POST_COMPOSER_PUB_PICKER_PUB_SELECTED:"Post Composer Pub Picker Pub Selected",POST_COMPOSER_PUB_PICKER_VIEWED:"Post Composer Pub Picker Viewed",POST_COMPOSER_SETTINGS_VIEWED:"Post Composer Settings Viewed",POST_COMPOSER_VIEWED:"Post Composer Viewed",POST_EDITOR_ADD_GUEST_CLICKED:"Post Editor Add Guest Clicked",POST_END_CTA_CLICKED:"Post End Cta Clicked",POST_END_CTA_RENDERED:"Post End Cta Rendered",POST_END_CTA_SEEN:"Post End Cta Seen",POST_INFO_VIEWED:"Post Info Viewed",POST_LINK_CLICKED:"Post Link Clicked",POST_PAGE_PINGBACK:"Post Page Pingback",POST_PAYWALL_SHOWN:"Post Paywall Shown",POST_PREVIEW_OPTION:"Post Preview Option",POST_PUBLISHED_SETTINGS:"Post Published Settings",POST_REACTIONS_MODAL_VIEWED:"Post Reactions Modal Viewed",POST_RECOMMENDATIONS_SHOWN:"Post Recommendations Shown",POST_SAVED:"Post Saved",POST_SEEN:"Post Seen",POST_SHARE_BUTTON_CLICKED:"Post Share Button Clicked",POST_TEXT_SELECTED:"Post Text Selected",POST_VIEWER_CLOSED:"Post Viewer Closed",POST_VIEWER_NAVIGATED:"Post Viewer Navigated",POST_VIEWER_VIEWED:"Post Viewer Viewed",PREFER_APPLE_PAY_CLICKED:"Prefer Apple Pay Clicked",PREFER_CREDIT_CARD_CLICKED:"Prefer Credit Card Clicked",PREPUBLISH_PROMPT_DISPLAYED:"Prepublish Prompt Displayed",PREVIEW_BUTTON_CLICKED:"Preview Button Clicked",PREVIOUS_POST_LINK_CLICKED:"Previous Post Link Clicked",PROCESSING_EPISODE_AUDIO_CLICKED:"Processing Episode Audio Clicked",PROCESSING_VOICEOVER_AUDIO_CLICKED:"Processing Voiceover Audio Clicked",PROFILE_EDITED:"Profile Edited",PROFILE_FILLED_OUT:"Profile Filled Out",PROFILE_STARTED:"Profile Started",PROFILE_UPDATER_SHOWN:"Profile Updater Shown",PROFILE_VISIBILITY_SET:"Profile Visibility Set",PROFILE_VISITED:"Profile Visited",PUBLICATION_FOOTER_SEEN:"Publication Footer Seen",PUBLICATION_RECOMMENDATION_LINK_CLICKED:"Publication Recommendation Link Clicked",PUBLICATION_SETTING_TEXT_INPUT_ERRORED:"Publication Setting Text Input Errored",PUBLICATION_THREADS_SCREEN_VIEWED:"Publication Threads Screen Viewed",PUBLICATION_VISITED:"Publication Visited",PUBLISH_DISABLED_APPEALED:"Publish Disabled Appealed",PUBLISHER_DASHBOARD_POST_BUTTON_CLICKED:"Publisher Dashboard Post Button Clicked",PUBLISHER_DASHBOARD_SEEN:"Publisher Dashboard Seen",PUBLISHER_DASHBOARD_VISIT_SITE_CLICKED:"Publisher Dashboard Visit Site Clicked",REACTION_REJECTED:"Reaction Rejected",READER_INBOX_TAB_CHANGED:"Reader Inbox Tab Changed",READER_ONBOARDING_BULK_SUBSCRIBED:"Reader Onboarding Bulk Subscribed",READER_ONBOARDING_BULK_SUBSCRIBE_SELECTED_IN_UI:"Reader Onboarding Bulk Subscribe Selected In Ui",READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED:"Reader Onboarding Bulk Subscribe Skipped",READER_ONBOARDING_CATEGORIES_FINALIZED:"Reader Onboarding Categories Finalized",READER_ONBOARDING_CATEGORY_REQUESTED:"Reader Onboarding Category Requested",READER_ONBOARDING_CREATE_PUBLICATION_STEP_ERROR:"Reader Onboarding Create Publication Step Error",READER_ONBOARDING_CREATE_PUBLICATION_STEP_STARTED:"Reader Onboarding Create Publication Step Started",READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_SKIPPED:"Reader Onboarding Create Publication Success Step Skipped",READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_STARTED:"Reader Onboarding Create Publication Success Step Started",READER_ONBOARDING_EDIT_SUB_VISIBILITY_SKIPPED:"Reader Onboarding Edit Sub Visibility Skipped",READER_ONBOARDING_ERROR:"Reader Onboarding Error",READER_ONBOARDING_MODAL_CLOSED:"Reader Onboarding Modal Closed",READER_ONBOARDING_MODAL_OPENED:"Reader Onboarding Modal Opened",READER_ONBOARDING_NO_TWITTER_PUBS_RECOMMENDED:"Reader Onboarding No Twitter Pubs Recommended",READER_ONBOARDING_PROFILE_SETUP_SKIPPED:"Reader Onboarding Profile Setup Skipped",READER_ONBOARDING_PROFILE_SETUP_STARTED:"Reader Onboarding Profile Setup Started",READER_ONBOARDING_PUB_LANDING_LET_ME_READ_CLICKED:"Reader Onboarding Pub Landing Let Me Read Clicked",READER_ONBOARDING_PUB_LANDING_SIGNUP_SUCCEEDED:"Reader Onboarding Pub Landing Signup Succeeded",READER_ONBOARDING_PUB_LANDING_SUBSCRIBE_CLICKED:"Reader Onboarding Pub Landing Subscribe Clicked",READER_ONBOARDING_PUB_RECOMMENDED:"Reader Onboarding Pub Recommended",READER_ONBOARDING_PUB_SIGNUP_FAILED:"Reader Onboarding Pub Signup Failed",READER_ONBOARDING_PUB_SIGNUP_SUCCEEDED:"Reader Onboarding Pub Signup Succeeded",READER_ONBOARDING_SIGNUP_FAILED:"Reader Onboarding Signup Failed",READER_ONBOARDING_SIGNUP_SUCCEEDED:"Reader Onboarding Signup Succeeded",READER_ONBOARDING_SKIP_CATEGORIES_CLICKED:"Reader Onboarding Skip Categories Clicked",READER_ONBOARDING_SKIP_SUBSCRIBE_CLICKED:"Reader Onboarding Skip Subscribe Clicked",READER_ONBOARDING_SKIP_TWITTER_CLICKED:"Reader Onboarding Skip Twitter Clicked",READER_ONBOARDING_START_READING_CLICKED:"Reader Onboarding Start Reading Clicked",READER_ONBOARDING_START_WRITING_STEP_SKIPPED:"Reader Onboarding Start Writing Step Skipped",READER_ONBOARDING_START_WRITING_STEP_STARTED:"Reader Onboarding Start Writing Step Started",READER_ONBOARDING_STEP_CHANGED:"Reader Onboarding Step Changed",READER_ONBOARDING_TWITTER_LINK_CLICKED:"Reader Onboarding Twitter Link Clicked",READER_REFERRALS_MODAL_LEARN_MORE_CLICKED:"Reader Referrals Modal Learn More Clicked",READER_REFERRALS_MODAL_LEARN_MORE_SEEN:"Reader Referrals Modal Learn More Seen",READER_REFERRALS_MODAL_OPT_IN_CLICKED:"Reader Referrals Modal Opt In Clicked",READER_REFERRALS_MODAL_OPT_OUT_CLICKED:"Reader Referrals Modal Opt Out Clicked",RECOMMENDATIONS_CTA_CLICKED:"Recommendations Cta Clicked",RECOMMENDATIONS_CTA_DISMISSED:"Recommendations Cta Dismissed",RECOMMENDATIONS_CTA_SHOWN:"Recommendations Cta Shown",RECOMMENDATIONS_INVITE_WRITER_CLICKED:"Recommendations Invite Writer Clicked",RECOMMENDATION_SUBSCRIBE_BUTTON_CLICKED:"Recommendation Subscribe Button Clicked",RECOMMENDATION_UNSUBSCRIBE_BUTTON_CLICKED:"Recommendation Unsubscribe Button Clicked",RECOMMENDED_POST_CLICKED:"Recommended Post Clicked",RECOMMENDED_PUBLICATIONS_MAYBE_LATER_CLICKED:"Recommended Publications Maybe Later Clicked",RECOMMENDED_PUBLICATION_CLICKED:"Recommended Publication Clicked",RECOMMENDED_PUBLICATION_TOGGLED:"Recommended Publication Toggled",RECOMMEND_FROM_WRITER_ONBOARDING_CLICKED:"Recommend From Writer Onboarding Clicked",RECOMMEND_FROM_WRITER_ONBOARDING_SKIPPED:"Recommend From Writer Onboarding Skipped",RECORD_EPISODE_AUDIO_CLICKED:"Record Episode Audio Clicked",REFERRALS_ENABLE_DASHBOARD_CTA_CLICKED:"Referrals Enable Dashboard Cta Clicked",REFERRALS_ENABLE_DASHBOARD_CTA_DISMISSED:"Referrals Enable Dashboard Cta Dismissed",REFERRALS_ENABLE_DASHBOARD_CTA_SHOWN:"Referrals Enable Dashboard Cta Shown",RESTACK_POST_CLICKED:"Restack Post Clicked",RESTACK_POST_SUBMITTED:"Restack Post Submitted",REVUE_IMPORT_FORM_ERROR:"Revue Import Form Error",REVUE_IMPORT_FORM_INPUT_FILLED:"Revue Import Form Input Filled",REVUE_IMPORT_FORM_SUBMIT_PRESSED:"Revue Import Form Submit Pressed",SAVED_CARD_PAYWALL_FAILED:"Saved Card Paywall Failed",SAVED_CARD_PAYWALL_SEEN:"Saved Card Paywall Seen",SAVED_CARD_PAYWALL_SUBMITTED:"Saved Card Paywall Submitted",SAVED_POST_CLICKED:"Saved Post Clicked",SCORE_BASED_UPSELL_MODAL_DONE_CLICKED:"Score Based Upsell Modal Done Clicked",SCORE_BASED_UPSELL_MODAL_EDIT_EMAIL_CLICKED:"Score Based Upsell Modal Edit Email Clicked",SCORE_BASED_UPSELL_MODAL_SEEN:"Score Based Upsell Modal Seen",SECRET_LINK_COPIED:"Secret Link Copied",SECTION_EDITING_ERROR:"Section Editing Error",SECTION_EMAIL_STATE_SCREEN_SHOWN:"Section Email State Screen Shown",SECTION_SETUP_ERROR:"Section Setup Error",SECURITY_QUESTIONS_VIEWED:"Security Questions Viewed",SEEKED_AUDIO:"Seeked Audio",SELECTED_PLAN_CHANGED:"Selected Plan Changed",SEND_AS_EMAIL_PROMPT_ACCEPTED:"Send As Email Prompt Accepted",SEND_AS_EMAIL_PROMPT_REJECTED:"Send As Email Prompt Rejected",SETTINGS_PAGE_CONFIRM_EMAIL_BANNER_SHOWN:"Settings Page Confirm Email Banner Shown",SETTINGS_PAGE_CONFIRM_EMAIL_BUTTON_TAPPED:"Settings Page Confirm Email Button Tapped",SETUP_TWITTER_CTA_CONNECT_CLICKED:"Setup Twitter Cta Connect Clicked",SETUP_TWITTER_CTA_DISMISSED:"Setup Twitter Cta Dismissed",SETUP_TWITTER_CTA_SETDISCOVERABLE_CLICKED:"Setup Twitter Cta Setdiscoverable Clicked",SET_NEW_RATES_CLICKED:"Set New Rates Clicked",SHARE_DIALOG_OPENED:"Share Dialog Opened",SHARE_LINK_CLICKED:"Share Link Clicked",STAGED_RELEASE_SCHEDULED:"Staged Release Scheduled",STATS_PAGE_VIEWED:"Stats Page Viewed",STATS_PLACEHOLDER_SEEN:"Stats Placeholder Seen",SUBDOMAIN_CHANGED:"Subdomain Changed",SUBSCRIBER_BADGE_INFO_SHOWN:"Subscriber Badge Info Shown",SUBSCRIBER_COUNT_ANNOUNCEMENT_DISMISSED:"Subscriber Count Announcement Dismissed",SUBSCRIBER_COUNT_ANNOUNCEMENT_SETTINGS_CLICKED:"Subscriber Count Announcement Settings Clicked",SUBSCRIBER_COUNT_ANNOUNCEMENT_SHOWN:"Subscriber Count Announcement Shown",SUBSCRIBE_BUTTON_FLOATING_IN_POST_CLICKED:"Subscribe Button Floating In Post Clicked",SUBSCRIBE_BUTTON_IN_READER_ONBOARDING_CLICKED:"Subscribe Button In Reader Onboarding Clicked",SUBSCRIBE_BUTTON_IN_SEARCH_RESULTS_CLICKED:"Subscribe Button In Search Results Clicked",SUBSCRIBE_CONFIRM_PAYMENT_SCREEN_SHOWN:"Subscribe Confirm Payment Screen Shown",SUBSCRIBE_CTA_PROMPT_ACCEPTED:"Subscribe Cta Prompt Accepted",SUBSCRIBE_CTA_PROMPT_REJECTED:"Subscribe Cta Prompt Rejected",SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN:"Subscribe Email Full Screen Shown",SUBSCRIBE_EMAIL_SCREEN_SHOWN:"Subscribe Email Screen Shown",SUBSCRIBE_FOOTER_SEEN:"Subscribe Footer Seen",SUBSCRIBE_FORM_ERROR:"Subscribe Form Error",SUBSCRIBE_FORM_INPUT_FILLED:"Subscribe Form Input Filled",SUBSCRIBE_FORM_MISSING_PAYMENT:"Subscribe Form Missing Payment",SUBSCRIBE_FORM_SUBMIT_PRESSED:"Subscribe Form Submit Pressed",SUBSCRIBE_INVITE_SCREEN_SHOWN:"Subscribe Invite Screen Shown",SUBSCRIBE_LATER_SCREEN_SHOWN:"Subscribe Later Screen Shown",SUBSCRIBE_MODAL_IN_POST_CLOSED:"Subscribe Modal In Post Closed",SUBSCRIBE_MODAL_IN_POST_OPENED_AUTOMATICALLY:"Subscribe Modal In Post Opened Automatically",SUBSCRIBE_PAGE_BULK_SUBSCRIBED:"Subscribe Page Bulk Subscribed",SUBSCRIBE_PROMPT_DISMISSED:"Subscribe Prompt Dismissed",SUBSCRIBE_PROMPT_EXPANDED:"Subscribe Prompt Expanded",SUBSCRIBE_PROMPT_SHOWN:"Subscribe Prompt Shown",SUBSCRIBE_PROMPT_SIGN_IN_CLICKED:"Subscribe Prompt Sign In Clicked",SUBSCRIBE_PROMPT_SUBMITTED:"Subscribe Prompt Submitted",SUBSCRIBE_SCREEN_SHOWN:"Subscribe Screen Shown",SUBSCRIBE_SCREEN_SUBMIT_ERROR:"Subscribe Screen Submit Error",SUBSCRIBE_SCREEN_TYPE_SELECTED:"Subscribe Screen Type Selected",SUBSCRIBE_THANK_YOU_SCREEN_SHOWN:"Subscribe Thank You Screen Shown",SUBSCRIBE_TWEET_SCREEN_SHOWN:"Subscribe Tweet Screen Shown",SUGGESTED_PUBS_SCREEN_SHOWN:"Suggested Pubs Screen Shown",SUGGESTED_PUBS_UPSELL_SCREEN_FREE_SUBSCRIPTION_ERROR:"Suggested Pubs Upsell Screen Free Subscription Error",SUGGESTED_PUBS_UPSELL_SCREEN_SHOWN:"Suggested Pubs Upsell Screen Shown",SUGGESTED_RECOMMEND_SUBSCRIBING_PUB_SCREEN_SHOWN:"Suggested Recommend Subscribing Pub Screen Shown",SUGGESTED_SUBDOMAIN_SELECTED:"Suggested Subdomain Selected",TEST_DRAFT_EMAIL_ERROR:"Test Draft Email Error",TEST_DRAFT_EMAIL_INPUT_FILLED:"Test Draft Email Input Filled",TEST_DRAFT_EMAIL_MISSING_PAYMENT:"Test Draft Email Missing Payment",TEST_DRAFT_EMAIL_SUBMIT_PRESSED:"Test Draft Email Submit Pressed",THREADS_COMPOSER_SCREEN_VIEWED:"Threads Composer Screen Viewed",THREADS_INBOX_SCREEN_VIEWED:"Threads Inbox Screen Viewed",THREAD_PAYWALL_SCREEN_VIEWED:"Thread Paywall Screen Viewed",THREAD_PERMALINK_VIEWED:"Thread Permalink Viewed",THREAD_REPLY_PERMALINK_VIEWED:"Thread Reply Permalink Viewed",THREAD_SUBSCRIBE_WALL_VIEWED:"Thread Subscribe Wall Viewed",TICKER_DID_YOU_MEAN_CLICKED:"Ticker Did You Mean Clicked",TOP_POSTS_FOOTER_SEEN:"Top Posts Footer Seen",TWITTER_AUTO_SHARE_OPTION_TOGGLED:"Twitter Auto Share Option Toggled",TWITTER_PROFILE_VISIBLE_TOGGLED:"Twitter Profile Visible Toggled",UNSUBSCRIBE_BUTTON_IN_READER_ONBOARDING_CLICKED:"Unsubscribe Button In Reader Onboarding Clicked",UNSUBSCRIBE_BUTTON_IN_SEARCH_RESULTS_CLICKED:"Unsubscribe Button In Search Results Clicked",UPDATE_EXPIRED_CARD_LINK_CLICKED:"Update Expired Card Link Clicked",UPGRADE_PLAN_MODAL_DISMISSED:"Upgrade Plan Modal Dismissed",UPGRADE_PLAN_MODAL_OPENED:"Upgrade Plan Modal Opened",UPGRADE_PLAN_MODAL_PLAN_CHANGED:"Upgrade Plan Modal Plan Changed",UPGRADE_PLAN_MODAL_SUBMITTED:"Upgrade Plan Modal Submitted",UPLOAD_AUDIO_CLICKED:"Upload Audio Clicked",UPLOAD_EPISODE_AUDIO_CLICKED:"Upload Episode Audio Clicked",UPLOAD_VIDEO_CLICKED:"Upload Video Clicked",USER_HEAD_CLICKED:"User Head Clicked",USER_MENU_ACCOUNT_SETTINGS_CLICKED:"User Menu Account Settings Clicked",USER_MENU_ACTIVITY_CLICKED:"User Menu Activity Clicked",USER_MENU_DASHBOARD_CLICKED:"User Menu Dashboard Clicked",USER_MENU_DISCOVER_CLICKED:"User Menu Discover Clicked",USER_MENU_DISMISSED:"User Menu Dismissed",USER_MENU_MANAGE_SUBSCRIPTION_CLICKED:"User Menu Manage Subscription Clicked",USER_MENU_OPENED:"User Menu Opened",USER_MENU_PROFILE_CLICKED:"User Menu Profile Clicked",USER_MENU_READER_CLICKED:"User Menu Reader Clicked",USER_MENU_SAVED_CLICKED:"User Menu Saved Clicked",VIDEO_BUFFERING_COMPLETED:"Video Buffering Completed",VIDEO_BUFFERING_STARTED:"Video Buffering Started",VIDEO_MODAL_BROWSE_FILES_CLICKED:"Video Modal Browse Files Clicked",VIDEO_MODAL_CANCEL_CLICKED:"Video Modal Cancel Clicked",VIDEO_MODAL_DROPPED_FILE:"Video Modal Dropped File",VIDEO_MODAL_INSERT_CLICKED:"Video Modal Insert Clicked",VIDEO_PAUSE_BUTTON_CLICKED:"Video Pause Button Clicked",VIDEO_PLAYBACK_COMPLETED:"Video Playback Completed",VIDEO_PLAYBACK_CONTINUED:"Video Playback Continued",VIDEO_RECORDED:"Video Recorded",VIDEO_RECORDER_HIDDEN:"Video Recorder Hidden",VIDEO_RECORDER_SHOWN:"Video Recorder Shown",VIDEO_RECORDER_STARTED:"Video Recorder Started",VIDEO_RECORDER_STARTING:"Video Recorder Starting",VIDEO_RECORDER_STOPPED:"Video Recorder Stopped",VIDEO_RECORDER_STOPPING:"Video Recorder Stopping",VIEWED_MORE_CATEGORY:"Viewed More Category",VIRAL_GIFT_ALL_EMAILS_FILLED:"Viral Gift All Emails Filled",VIRAL_GIFT_FORM_SUBMITTED:"Viral Gift Form Submitted",VIRAL_GIFT_LINK_COPIED:"Viral Gift Link Copied",VIRAL_GIFT_LINK_INPUT_CLICKED:"Viral Gift Link Input Clicked",VIRAL_GIFT_PAGE_VIEWED:"Viral Gift Page Viewed",VIRAL_GIFT_SHARE_ON_TWITTER_CLICKED:"Viral Gift Share On Twitter Clicked",VIRTUAL_FREE_SIGNUP_FAILED:"Virtual Free Signup Failed",WRITER_MEDIA_ASSETS_IMAGE_DOWNLOADED:"Writer Media Assets Image Downloaded",WRITER_MEDIA_ASSETS_PAGE_VISITED:"Writer Media Assets Page Visited",WRITER_REFERRAL_ACTION_BOX_DISMISSED:"Writer Referral Action Box Dismissed",WRITER_REFERRAL_ACTION_BOX_SHOWN:"Writer Referral Action Box Shown",WRITER_REFERRAL_CODE_COPIED:"Writer Referral Code Copied",WRITER_REFERRAL_PROFILE_LINK_CLICKED:"Writer Referral Profile Link Clicked",WRITER_SIGNUP_ADD_SUBS_SKIP:"Writer Signup Add Subs Skip",WRITER_SIGNUP_ADD_SUBS_SUCCESS:"Writer Signup Add Subs Success",WRITER_SIGNUP_CONNECT_ACCOUNTS_SKIP:"Writer Signup Connect Accounts Skip",WRITER_SIGNUP_CREATE_PUBLICATION_FORM_ERROR:"Writer Signup Create Publication Form Error",WRITER_SIGNUP_CREATE_PUBLICATION_FORM_INPUT_FILLED:"Writer Signup Create Publication Form Input Filled",WRITER_SIGNUP_CREATE_PUBLICATION_FORM_MISSING_PAYMENT:"Writer Signup Create Publication Form Missing Payment",WRITER_SIGNUP_CREATE_PUBLICATION_FORM_SUBMIT_PRESSED:"Writer Signup Create Publication Form Submit Pressed",WRITER_SIGNUP_EMAIL_INPUTS_FORM_ERROR:"Writer Signup Email Inputs Form Error",WRITER_SIGNUP_EMAIL_INPUTS_FORM_INPUT_FILLED:"Writer Signup Email Inputs Form Input Filled",WRITER_SIGNUP_EMAIL_INPUTS_FORM_MISSING_PAYMENT:"Writer Signup Email Inputs Form Missing Payment",WRITER_SIGNUP_EMAIL_INPUTS_FORM_SUBMIT_PRESSED:"Writer Signup Email Inputs Form Submit Pressed",WRITER_SIGNUP_GOOGLE_CLICKED:"Writer Signup Google Clicked",WRITER_SIGNUP_IMPORT_SKIP:"Writer Signup Import Skip",WRITER_SIGNUP_IMPORT_SUCCESS:"Writer Signup Import Success",WRITER_SIGNUP_LOG_IN_CLICKED:"Writer Signup Log In Clicked",WRITER_SIGNUP_PUBLISHER_AGREEMENT_FORM_ERROR:"Writer Signup Publisher Agreement Form Error",WRITER_SIGNUP_PUBLISHER_AGREEMENT_FORM_INPUT_FILLED:"Writer Signup Publisher Agreement Form Input Filled",WRITER_SIGNUP_PUBLISHER_AGREEMENT_FORM_MISSING_PAYMENT:"Writer Signup Publisher Agreement Form Missing Payment",WRITER_SIGNUP_PUBLISHER_AGREEMENT_FORM_SUBMIT_PRESSED:"Writer Signup Publisher Agreement Form Submit Pressed",WRITER_SIGNUP_SECOND_TWITTER_SKIP:"Writer Signup Second Twitter Skip",WRITER_SIGNUP_SETUP_PROFILE_FORM_ERROR:"Writer Signup Setup Profile Form Error",WRITER_SIGNUP_SETUP_PROFILE_FORM_INPUT_FILLED:"Writer Signup Setup Profile Form Input Filled",WRITER_SIGNUP_SETUP_PROFILE_FORM_MISSING_PAYMENT:"Writer Signup Setup Profile Form Missing Payment",WRITER_SIGNUP_SETUP_PROFILE_FORM_SUBMIT_PRESSED:"Writer Signup Setup Profile Form Submit Pressed",WRITER_SIGNUP_SUBSCRIBE_TO_OTHERS_SKIPPED:"Writer Signup Subscribe To Others Skipped",WRITER_SIGNUP_SWITCH_ACCOUNTS_CLICKED:"Writer Signup Switch Accounts Clicked",WRITER_SIGNUP_TWITTER_CLICKED:"Writer Signup Twitter Clicked",WRITING_HOMEPAGE_VISITED:"Writing Homepage Visited",ZENDESK_CLASSIC_WIDGET_INTERACTED:"Zendesk Classic Widget Interacted"},s={ACTIVITY_ITEM_TAPPED:"Activity Item Tapped",ACTIVITY_SCREEN_VIEWED:"Activity Screen Viewed",APPLICATION_BACKGROUNDED:"Application Backgrounded",APPLICATION_INSTALLED:"Application Installed",APPLICATION_OPENED:"Application Opened",APPLICATION_UPDATED:"Application Updated",APP_ICON_CHANGED:"App Icon Changed",APP_SIGN_IN_COMPLETE:"App Sign In Complete",ARCHIVE_SCREEN_VIEWED:"Archive Screen Viewed",AUDIO_UNAVAILABLE_MODAL_SHOWN:"Audio Unavailable Modal Shown",CHAT_MENTION_INSERTED:"Chat Mention Inserted",CHAT_MENTION_SEARCH_CANCELLED:"Chat Mention Search Cancelled",CHAT_MENTION_SEARCH_STARTED:"Chat Mention Search Started",COMING_SOON_SCREEN_VIEWED:"Coming Soon Screen Viewed",COMMENTS_THREAD_VIEWED:"Comments Thread Viewed",CONNECT_TWITTER_SCREEN_COMPLETED:"Connect Twitter Screen Completed",CONNECT_TWITTER_SCREEN_VIEWED:"Connect Twitter Screen Viewed",DISCOVERY_SCREEN_VIEWED:"Discovery Screen Viewed",DISCOVER_CATEGORY_SCREEN_VIEWED:"Discover Category Screen Viewed",DISPLAY_SETTINGS_UPDATED:"Display Settings Updated",DISPLAY_SETTINGS_VIEWED:"Display Settings Viewed",EMAIL_INSTRUCTIONS_SCREEN_VIEWED:"Email Instructions Screen Viewed",ENTER_PASSWORD_SCREEN_VIEWED:"Enter Password Screen Viewed",ENTRY_FLOW_COMPLETED:"Entry Flow Completed",ENTRY_FLOW_STARTED:"Entry Flow Started",FEED_COMPOSER_SCREEN_VIEWED:"Feed Composer Screen Viewed",FEED_PERMALINK_SCREEN_VIEWED:"Feed Permalink Screen Viewed",FEED_SCREEN_VIEWED:"Feed Screen Viewed",INBOX_AUDIO_ENTRY_TAPPED:"Inbox Audio Entry Tapped",INBOX_SCREEN_VIEWED:"Inbox Screen Viewed",IOS_EXTERNAL_LINK_CLICKED:"Ios External Link Clicked",IOS_EXTERNAL_LINK_OPENED:"Ios External Link Opened",IOS_EXTERNAL_LINK_SEEN:"Ios External Link Seen",LIBRARY_SCREEN_VIEWED:"Library Screen Viewed",MFA_CHALLENGE_SCREEN_VIEWED:"Mfa Challenge Screen Viewed",MOBILE_NEW_FEATURE_MODAL_SHOWN:"Mobile New Feature Modal Shown",NOTIFICATIONS_UPSELL_MODAL_SHOWN:"Notifications Upsell Modal Shown",ONBOARDING_NOTIFICATIONS_SCREEN_COMPLETED:"Onboarding Notifications Screen Completed",ONBOARDING_NOTIFICATIONS_SCREEN_VIEWED:"Onboarding Notifications Screen Viewed",ONBOARDING_NOTIFICATIONS_SKIP_REPROMPT_VIEWED:"Onboarding Notifications Skip Reprompt Viewed",ONBOARDING_SUGGESTIONS_SCREEN_COMPLETED:"Onboarding Suggestions Screen Completed",ONBOARDING_SUGGESTIONS_SCREEN_VIEWED:"Onboarding Suggestions Screen Viewed",PLAYER_ACTIVATED:"Player Activated",PLAYER_DISMISSED:"Player Dismissed",PLAYER_OPENED:"Player Opened",PLAYER_QUEUE_ITEM_REMOVED:"Player Queue Item Removed",PLAYER_QUEUE_ITEM_SELECTED:"Player Queue Item Selected",PLAYER_QUEUE_OPENED:"Player Queue Opened",PLAYER_QUEUE_REORDERED:"Player Queue Reordered",PLAYER_SPEED_CHANGED:"Player Speed Changed",PODCASTS_SCREEN_VIEWED:"Podcasts Screen Viewed",POSTS_BULK_ARCHIVED:"Posts Bulk Archived",POST_AUDIO_ENTRY_TAPPED:"Post Audio Entry Tapped",POST_AUDIO_QUEUED:"Post Audio Queued",PROFILE_CREATION_SCREEN_VIEWED:"Profile Creation Screen Viewed",PROFILE_VISIBILITY_SCREEN_VIEWED:"Profile Visibility Screen Viewed",PUSH_AUTHORIZATION_STATUS_CHANGED:"Push Authorization Status Changed",PUSH_NOTIFICATIONS_ENABLED:"Push Notifications Enabled",PUSH_NOTIFICATION_DELIVERED:"Push Notification Delivered",PUSH_NOTIFICATION_PERMISSION_TRIGGERED:"Push Notification Permission Triggered",PUSH_NOTIFICATION_TAPPED:"Push Notification Tapped",PUSH_SETTINGS_SCREEN_VIEWED:"Push Settings Screen Viewed",SAVED_POSTS_VIEWED:"Saved Posts Viewed",SUBSTACK_PUB_SCREEN_COMPLETED:"Substack Pub Screen Completed",SUBSTACK_PUB_SCREEN_VIEWED:"Substack Pub Screen Viewed",THREADS_INTRO_SCREEN_VIEWED:"Threads Intro Screen Viewed",TWITTER_SUGGESTIONS_SCREEN_COMPLETED:"Twitter Suggestions Screen Completed",TWITTER_SUGGESTIONS_SCREEN_VIEWED:"Twitter Suggestions Screen Viewed",UNSUPPORTED_EMBED_SEEN:"Unsupported Embed Seen",WELCOME_SCREEN_VIEWED:"Welcome Screen Viewed"}},function($,n,t){"use strict";t.d(n,"a",function(){return a});var e=t(0),s=t(6),o=t.n(s);const a=({className:c,children:l})=>Object(e.h)("div",{className:o()("tailwind-preflight",c)},l)},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LucideShare",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(e.h)("path",{d:"M12.4376 15.6C4.77778 15.6 2 20.3999 2 20.3999C2 12.5999 5.88889 8.4 12.4376 8.4V3L22 11.9812L12.4376 21V15.6Z","stroke-width":u.strokeWidth,fill:u.fill,className:"lucide","stroke-linecap":"round","stroke-linejoin":"round"})));n.default=O},function($,n,t){"use strict";t.d(n,"b",function(){return v}),t.d(n,"a",function(){return O});var e=t(0),s=t(1),o=t(214),a=t(88),c=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?c(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u};function v({hoverOptions:u,layerOptions:r}={}){const[i,d]=Object(s.k)(!1),[b,w]=Object(a.b)(g({delayEnter:500,delayLeave:500},u)),{triggerProps:E,layerProps:S,renderLayer:P}=Object(a.c)(g({isOpen:b,auto:!0,triggerOffset:8},r));return{layerProps:S,triggerProps:g(g({},E),w),transitionProps:{show:b,beforeEnter:()=>d(!0),afterLeave:()=>d(!1)},renderLayer:P,shouldShow:b||i}}function O(u){return Object(e.h)(o.a,g({appear:!0,enter:"tw-transition-all tw-ease-in-out tw-duration-200 tw-transform-gpu",enterFrom:"tw-opacity-0",enterTo:"tw-opacity-100",leave:"tw-transition-all tw-ease-in-out tw-duration-200 tw-transform-gpu",leaveFrom:"tw-opacity-100",leaveTo:"tw-opacity-0"},u))}},function($,n,t){var e=t(524),s=t(230),o=t(525),a=t(341),c=t(526),l=t(131),p=t(318),h="[object Map]",m="[object Object]",g="[object Promise]",v="[object Set]",O="[object WeakMap]",u="[object DataView]",r=p(e),i=p(s),d=p(o),b=p(a),w=p(c),E=l;(e&&E(new e(new ArrayBuffer(1)))!=u||s&&E(new s)!=h||o&&E(o.resolve())!=g||a&&E(new a)!=v||c&&E(new c)!=O)&&(E=function(S){var P=l(S),D=P==m?S.constructor:void 0,W=D?p(D):"";if(W)switch(W){case r:return u;case i:return h;case d:return g;case b:return v;case w:return O}return P}),$.exports=E},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"ShareCopyLinkIcon",svgParams:{height:16,width:20}}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.1303 0.000379039C10.9833 -0.00959082 9.87819 0.431464 9.05309 1.22855L9.04556 1.23593L7.79145 2.48303C7.50587 2.767 7.50453 3.22877 7.78844 3.51441C8.07235 3.80004 8.53401 3.80139 8.81959 3.51741L10.0698 2.27423C10.6194 1.74503 11.3546 1.45229 12.1177 1.45892C12.8824 1.46556 13.6139 1.77236 14.1546 2.31323C14.6954 2.8541 15.0021 3.58577 15.0087 4.35065C15.0154 5.11353 14.7229 5.84857 14.1943 6.39829L12.0116 8.58145L12.0115 8.58155C11.7159 8.87739 11.36 9.10617 10.9682 9.25237C10.5764 9.39857 10.1577 9.45878 9.74051 9.42889C9.32337 9.39901 8.91752 9.27975 8.55051 9.07918C8.1835 8.87862 7.8639 8.60146 7.6134 8.26649C7.3722 7.94396 6.91526 7.87807 6.5928 8.11933C6.27034 8.36059 6.20447 8.81763 6.44567 9.14016C6.82142 9.64261 7.30082 10.0584 7.85134 10.3592C8.40186 10.66 9.01062 10.8389 9.63634 10.8838C10.2621 10.9286 10.8901 10.8383 11.4779 10.619C12.0656 10.3997 12.5994 10.0565 13.0429 9.61274L15.2302 7.42494L15.2391 7.4159C16.036 6.59062 16.4769 5.48529 16.467 4.33797C16.457 3.19066 15.9969 2.09316 15.1858 1.28185C14.3746 0.470545 13.2774 0.0103489 12.1303 0.000379039ZM7.29806 5.11625C6.67234 5.07142 6.0443 5.16173 5.45654 5.38103C4.86882 5.60031 4.33502 5.94355 3.89153 6.38727L1.70423 8.57506L1.69534 8.5841C0.898438 9.40939 0.457483 10.5147 0.467451 11.662C0.477418 12.8094 0.937512 13.9069 1.74864 14.7182C2.55976 15.5295 3.65701 15.9897 4.80407 15.9996C5.95113 16.0096 7.05622 15.5685 7.88132 14.7715L7.89035 14.7626L9.13717 13.5155C9.42192 13.2307 9.42192 12.7689 9.13717 12.4841C8.85243 12.1993 8.39077 12.1993 8.10602 12.4841L6.86392 13.7265C6.31432 14.2552 5.57945 14.5477 4.81675 14.5411C4.05204 14.5344 3.32054 14.2276 2.77979 13.6868C2.23904 13.1459 1.93231 12.4142 1.92566 11.6494C1.91904 10.8865 2.21146 10.1514 2.74011 9.60172L4.92287 7.41846C5.21854 7.12262 5.57437 6.89384 5.96621 6.74763C6.35805 6.60143 6.77674 6.54123 7.19389 6.57111C7.61104 6.601 8.01688 6.72026 8.38389 6.92082C8.75091 7.12138 9.0705 7.39855 9.32101 7.73352C9.56221 8.05605 10.0191 8.12194 10.3416 7.88068C10.6641 7.63942 10.7299 7.18238 10.4887 6.85985C10.113 6.3574 9.63359 5.94165 9.08307 5.64081C8.53255 5.33997 7.92378 5.16107 7.29806 5.11625Z"}));n.default=O},function($,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"a",function(){return c});var e=t(15),s=t.n(e);function o(l){var p;return`${[l.is_primary,((p=l.publication)==null?void 0:p.author_id)===l.user_id,l.role==="admin",l.role==="contributor"].map(m=>m?"0":"1").join("")}-${s()(l.created_at).valueOf()}`}function a(l){return l.slice(0).sort((p,h)=>o(p)>o(h)?1:-1)}function c(l){return a(l)[0]}},function($,n,t){"use strict";t.d(n,"a",function(){return A}),t.d(n,"e",function(){return C}),t.d(n,"b",function(){return R}),t.d(n,"d",function(){return U}),t.d(n,"c",function(){return z}),t.d(n,"f",function(){return G}),t.d(n,"g",function(){return V}),t.d(n,"h",function(){return k}),t.d(n,"i",function(){return K});var e=t(0),s=t(6),o=t.n(s),a=t(196),c=t(806),l=t(3),p=t(38),h=t(7),m=t(4),g=t(10),v=t(132),O=t(69),u=t(42),r=t(22),i=t(74),d=t(277),b=t(165),w={checkmarkWrapper:"frontend-reader2-Publication-module__checkmarkWrapper--3R1sb"},E=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,f=(Y,ee,ae)=>ee in Y?E(Y,ee,{enumerable:!0,configurable:!0,writable:!0,value:ae}):Y[ee]=ae,y=(Y,ee)=>{for(var ae in ee||(ee={}))W.call(ee,ae)&&f(Y,ae,ee[ae]);if(D)for(var ae of D(ee))B.call(ee,ae)&&f(Y,ae,ee[ae]);return Y},M=(Y,ee)=>S(Y,P(ee)),N=(Y,ee)=>{var ae={};for(var he in Y)W.call(Y,he)&&ee.indexOf(he)<0&&(ae[he]=Y[he]);if(Y!=null&&D)for(var he of D(Y))ee.indexOf(he)<0&&B.call(Y,he)&&(ae[he]=Y[he]);return ae};function A(Y){var ee=Y,{pub:ae,subscribeButtonStyle:he,className:me,onClick:Ye}=ee,se=N(ee,["pub","subscribeButtonStyle","className","onClick"]);return Object(e.h)(r.l,{linkClassName:o()("reader2-pub-link",me),href:Object(l.getPubUrl)(ae,{params:{utm_source:"substack",utm_medium:"web",utm_campaign:"reader2"},signedIn:!!Object(p.c)()}),newTab:he!=null,onClick:Ye},Object(e.h)(L,M(y({},se),{pub:ae,subscribeButtonStyle:he})))}function L({pub:Y,author:ee,subscribeButtonStyle:ae,surface:he,highlights:me={}}){var Ye;const se=(ee==null?void 0:ee.name)||Y.author_name||((Ye=Y.author)==null?void 0:Ye.name)||Y.name,ie=me["posts.body_text"]||me["posts.subtitle"]||me["posts.title"];return Object(e.h)(C,null,Object(e.h)(U,{className:"head",pub:Y,subtitle:Object(e.h)("span",null,"By ",Object(d.a)(se,me.author_name)),subscribeButtonStyle:ae,surface:he,highlights:me}),(Y.editorial_bio||Y.hero_text)&&Object(e.h)(r.z,{variant:"secondary",className:"description",isConstrained:!0},Y.editorial_bio||Object(d.a)(Y.hero_text,me.hero_text)),ie&&ie.length>0&&Object(e.h)(r.z,{variant:"secondary",className:"description",isConstrained:!0},"Has written about"," ",Object(e.h)(g.b,{as:"span",weight:"bold"},ie[0])),Y.rankingDetail&&Object(e.h)(g.b.Meta,null,Y.rankingDetail))}function C(Y){return Object(e.h)(m.a,y({className:"reader2-pub-link"},Y))}function R({children:Y}){return Object(e.h)(r.z,{variant:"secondary",className:"description",isConstrained:!0},Y)}function U({pub:Y,subtitle:ee,subscribeButtonStyle:ae=null,isSubscribed:he,className:me,badgeType:Ye,surface:se,highlights:ie={}}){const Ee=Object(p.c)();return Object(e.h)(G,{className:me},Object(e.h)(i.a,{className:"logo",pub:Y,size:40,badgeType:Ye}),Object(e.h)(V,null,Object(e.h)("div",{className:"reader2-publication-name"},Object(d.a)(Y.name,ie.name,"extrabold")),Object(e.h)(r.K,{className:"reader2-publication-subtitle"},ee)),he?Object(e.h)(m.a,{className:w.checkmarkWrapper,alignItems:"center",justifyContent:"center"},Object(e.h)(a.a,{size:16,stroke:"var(--color-tertiary)"})):ae&&Object(e.h)(Z,{pub:Y,user:Ee,buttonStyle:ae,surface:se}))}function Z({pub:Y,user:ee,buttonStyle:ae,surface:he}){const me=Object(b.d)(),Ye=K(he)(Y);return Object(e.h)(O.a,{variant:"primary",look:ae==="big"?"round":"circle",size:"small",hasLeftIcon:ae==="big",newTab:!0,href:Object(l.getSubscribeUrl)(Y,{addBase:!0,user:ee,utm_source:"substack",utm_medium:"web",utm_campaign:"reader2"}),onClick:se=>{if(se.stopPropagation(),ee){const ie="visibilitychange",Ee=()=>{document.visibilityState==="visible"&&(me.refetch(),document.removeEventListener(ie,Ee))};document.addEventListener(ie,Ee)}Ye(se)}},ae==="big"?Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:"reader2-button-icon-circle"},Object(e.h)(c.a,{size:12,strokeWidth:3})),"Subscribe"):Object(e.h)(e.Fragment,null,Object(e.h)(c.a,{size:20})))}function F(Y){var ee;return Y.author_name||((ee=Y.author)==null?void 0:ee.name)}function z({pub:Y,author:ee}){const ae=(ee==null?void 0:ee.name)||F(Y);return Object(e.h)(r.K,null,"By ",ae)}const G=Object(u.a)("reader2-publication-card"),V=Object(u.a)("meta");function k({className:Y}){return Object(e.h)(r.l,{linkClassName:o()("reader2-pub-link",Y)},Object(e.h)("div",{className:"reader2-publication-card"},Object(e.h)(r.A,{size:48}),Object(e.h)("div",{className:"meta",style:{gap:8}},Object(e.h)(r.A,{type:"bar",width:120}),Object(e.h)(r.A,{type:"bar",width:80}))),Object(e.h)("div",{className:"body"},Object(e.h)(r.A,{type:"bar",width:"90%"}),Object(e.h)(r.A,{type:"bar",width:"100%"}),Object(e.h)(r.A,{type:"bar",width:"80%"})))}function K(Y){const ee=Object(p.c)(),{onboardingModalRef:ae}=Object(v.b)();return(he,me)=>Ye=>{var se,ie;if(!ee){if(!ae.current)return;Ye.preventDefault(),me?(se=ae.current)==null||se.openForPub(he,me):(ie=ae.current)==null||ie.openToPubSignup(he);return}Object(h.l)(he,Y)}}},function($,n,t){const{TASTEMAKER_CATEGORY_NAME:e,COMMUNITY_PICKS_CATEGORY_NAME:s}=t(9);n.getCategoryIdFromSlug=(o,a)=>{if(!o)return"featured";if(o==="featured"||o==="twitter"||o==="podcast"||o===s||o===e)return o;const c=a.find(l=>l.slug===o);return c?c.id:"featured"}},function($,n,t){const{endsWithPunctuation:e,oxfordComma:s}=t(9);n.trimAndPunctuate=function(o){const a=o.trim();return e(a)?a:`${a}.`},n.contributorsIntoAuthorStrings=function(o,a=3){if(!(o==null?void 0:o.length)||!o[0].owner)return null;const c=o[0].name;if(o.length===1)return{owner:c,others:null};let l=o.slice(1);if(l.length>a&&(l=l.filter(p=>p.role==="admin")),l.length&&l.length<=a){const p=l.map(h=>h.name);return{owner:c,others:s(p).toString()}}else return{owner:c,others:null}},n.metaDescription=function(o,a,c,l,p){const h=o?n.trimAndPunctuate(o):"";let m;a&&!a.others?l.toLowerCase().includes(a.owner.toLowerCase())?m="":m=` by ${a.owner},`:m="";let g;return c?g=` a Substack publication with ${c}.`:p?g=` a Substack publication. ${p}.`:g=" a Substack publication.",n.trimAndPunctuate(`${h} Click to read ${l},${m}${g}`)}},function($,n,t){var e=t(131),s=t(109),o="[object AsyncFunction]",a="[object Function]",c="[object GeneratorFunction]",l="[object Proxy]";function p(h){if(!s(h))return!1;var m=e(h);return m==a||m==c||m==o||m==l}$.exports=p},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PlayIcon",svgParams:{height:43,width:35}}),Object(e.h)("path",{d:"M34.428 20.819C34.8483 21.0821 34.8483 21.7121 34.428 21.9752L1.74924 42.4349C1.3132 42.7079 0.755859 42.3835 0.755859 41.8568V0.937387C0.755859 0.410635 1.3132 0.0862969 1.74925 0.359298L34.428 20.819Z"}));n.default=O},function($,n,t){var e=t(731),s=t(732);function o(a,c,l){var p=c&&l||0;typeof a=="string"&&(c=a==="binary"?new Array(16):null,a=null),a=a||{};var h=a.random||(a.rng||e)();if(h[6]=h[6]&15|64,h[8]=h[8]&63|128,c)for(var m=0;m<16;++m)c[p+m]=h[m];return c||s(h)}$.exports=o},function($,n,t){"use strict";t.d(n,"a",function(){return h}),t.d(n,"b",function(){return m});var e=t(0),s=t(283),o=t(6),a=t.n(o),c=t(81),l=t(125),p=t(86);const h=({isModal:g=!0,onClose:v,includeClose:O=!1,bottomBorder:u,title:r,description:i,as:d="h2",usePubThemeForTitle:b=!1,className:w,pagination:E})=>Object(e.h)("div",{className:a()("tw-grid tw-grid-cols-[auto_auto] tw-items-center tw-justify-between tw-pt-6",{className:w,"tw-px-4":!E,"tw-border-0 tw-border-b tw-border-solid tw-border-substack-detail tw-pb-6":u})},!r&&!E&&Object(e.h)(l.default,{alt:"Substack icon",height:24}),E&&Object(e.h)("label",{className:"tw-text-[12px] tw-font-medium tw-leading-5",role:"label",title:"pagination"},E[0]," OF ",E[1]),O&&Object(e.h)("button",{className:"tw-col-start-2 tw-flex tw-cursor-pointer tw-border-none tw-bg-transparent",role:"button",title:"Close",onClick:v,"aria-label":"close"},Object(e.h)(c.default,null)),r&&g&&Object(e.h)(s.a.Title,{as:d,className:`tw-col-start-1 tw-row-start-1 tw-my-0 tw-font-title tw-text-h2 ${b?"tw-text-pub-primary-text":" tw-text-substack-primary"}`},r),i&&g&&Object(e.h)(s.a.Description,{as:"span",className:"tw-col-start-1 tw-mt-1 tw-font-body tw-text-sm tw-text-substack-secondary"},i),r&&!g&&Object(e.h)(m,{className:"tw-col-start-1 tw-row-start-1"},r)&&Object(e.createElement)(d,{className:`tw-col-start-1 tw-row-start-1 tw-my-0 tw-font-title ${b?"tw-text-pub-primary-text":" tw-text-substack-primary"}`},r),i&&!g&&Object(e.h)("span",{className:"tw-col-start-1 tw-mt-1 tw-font-body tw-text-sm tw-text-substack-secondary"},i)&&Object(e.createElement)("span",{className:"tw-mt-1 tw-col-start-1 tw-font-body tw-text-sm tw-text-substack-secondary"},i)),m=Object(p.a)("tw-my-0 tw-font-title","h2")},function($,n,t){"use strict";t.d(n,"b",function(){return h}),t.d(n,"a",function(){return g});var e=t(0),s=t(2),o=t(214),a=t(283),c=t(6),l=t.n(c),p=t(86);const h=Object(p.a)("sm:tw-max-h-[60vh] tw-overflow-auto tw-px-4 tw-py-5 tw-font-body"),m=({children:v})=>Object(e.h)("div",{className:"tw-max-h-5/6 tw-flex tw-min-h-full tw-items-center tw-justify-center"},v),g=({isOpen:v,onClose:O,children:u,includeBackdrop:r=!0,position:i="default",opacity:d="medium",testId:b="modal",className:w,onEscape:E,fullscreenMobile:S})=>{const P=l()({"tw-w-full tw-absolute tw-bottom-0 sm:tw-w-[500px] sm:tw-relative tw-mx-auto tw-bg-substack-bg":i==="default","tw-absolute tw-flex tw-top-0 tw-left-0 tw-right-0 tw-bottom-0 tw-items-center tw-justify-center":i==="full"},i==="default"&&(S?"tw-top-0 sm:tw-rounded-xl sm:tw-border sm:tw-border-solid sm:tw-border-substack-detail sm:tw-shadow-lg":"tw-rounded-xl tw-border tw-border-solid tw-border-substack-detail tw-shadow-lg"),w),D=W=>{const{code:B}=W;E&&B==="Escape"&&E(W)};return Object(e.h)(o.a,{show:v,as:s.Fragment},Object(e.h)(a.a,{onMouseDown:W=>W.stopPropagation(),onMouseUp:W=>W.stopPropagation(),onClick:W=>W.stopPropagation(),"data-testid":b,as:"div",className:"tw-fixed tw-inset-0 tw-z-30 tw-overflow-y-auto",open:v,onClose:O,onKeyDown:E&&D},Object(e.h)(m,null,r&&Object(e.h)(o.a.Child,{enter:"tw-transition tw-ease-in-out tw-duration-200",enterFrom:"tw-opacity-0",enterTo:"tw-opacity-100",leave:"tw-transition tw-ease-in-out tw-duration-200",leaveFrom:"tw-opacity-100",leaveTo:"tw-opacity-0"},Object(e.h)(a.a.Overlay,{className:d==="dark"?"tw-fixed tw-inset-0 tw-bg-black tw-opacity-80":"tw-fixed tw-inset-0 tw-bg-black tw-opacity-50"})),Object(e.h)(o.a.Child,{as:s.Fragment,enter:"tw-transition ease-in-out tw-duration-200",enterFrom:"tw-opacity-0",enterTo:"tw-opacity-100",leave:"tw-transition tw-ease-in-out tw-duration-200",leaveFrom:"tw-opacity-100",leaveTo:"tw-opacity-0"},Object(e.h)("div",{className:P},u)))))}},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;function e(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(o)}function s(o){var a=typeof o=="string"||o instanceof String;if(!a){var c=e(o);throw o===null?c="null":c==="object"&&(c=o.constructor.name),new TypeError("Expected a string but received a ".concat(c))}}$.exports=n.default,$.exports.default=n.default},function($,n,t){"use strict";n.__esModule=!0,n.inherits=e;function e(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=Object.create(s.prototype);for(var l in a)c[l]=a[l];return c.constructor=o,o.prototype=c,o}},function($,n,t){"use strict";t.d(n,"a",function(){return s});var e=t(1);function s(){const o=Object(e.j)(null);return[o,()=>{var c;return(c=o.current)==null?void 0:c.toggle()}]}},function($,n,t){"use strict";t.d(n,"a",function(){return a});var e=t(0),s=t(6),o=t.n(s);const a=({children:c,title:l="",content:p="",className:h="",showFirst:m=!1,disabled:g=!1})=>g?Object(e.h)(e.Fragment,null,c):Object(e.h)("div",{className:`popover-container ${h}`},Object(e.h)("div",{className:o()("popover typography",{showfirst:m})},Object(e.h)("div",{className:"content"},l&&Object(e.h)("strong",null,l),p&&Object(e.h)("section",null,p)),Object(e.h)("div",{className:"popover-tail"})),c)},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s,o){return e=Object.setPrototypeOf||function(c,l){return c.__proto__=l,c},e(s,o)}},function($,n,t){"use strict";t.d(n,"a",function(){return o});function e(a){if(a.sheet)return a.sheet;for(var c=0;c<document.styleSheets.length;c++)if(document.styleSheets[c].ownerNode===a)return document.styleSheets[c]}function s(a){var c=document.createElement("style");return c.setAttribute("data-emotion",a.key),a.nonce!==void 0&&c.setAttribute("nonce",a.nonce),c.appendChild(document.createTextNode("")),c}var o=function(){function a(l){this.isSpeedy=l.speedy===void 0?!0:l.speedy,this.tags=[],this.ctr=0,this.nonce=l.nonce,this.key=l.key,this.container=l.container,this.before=null}var c=a.prototype;return c.insert=function(p){if(this.ctr%(this.isSpeedy?65e3:1)==0){var h=s(this),m;this.tags.length===0?m=this.before:m=this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(h,m),this.tags.push(h)}var g=this.tags[this.tags.length-1];if(this.isSpeedy){var v=e(g);try{var O=p.charCodeAt(1)===105&&p.charCodeAt(0)===64;v.insertRule(p,O?0:v.cssRules.length)}catch(u){}}else g.appendChild(document.createTextNode(p));this.ctr++},c.flush=function(){this.tags.forEach(function(p){return p.parentNode.removeChild(p)}),this.tags=[],this.ctr=0},a}()},function($,n,t){"use strict";t.d(n,"a",function(){return s});var e=t(263);function s(o,a){if(!!o){if(typeof o=="string")return Object(e.a)(o,a);var c=Object.prototype.toString.call(o).slice(8,-1);if(c==="Object"&&o.constructor&&(c=o.constructor.name),c==="Map"||c==="Set")return Array.from(o);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Object(e.a)(o,a)}}},,function($,n,t){"use strict";t.r(n),t.d(n,"ChatPage",function(){return de}),t.d(n,"useDispatch",function(){return jr});var e=t(0),s=t(1),o=t(129),a=t.n(o),c=t(6),l=t.n(c),p=t(539),h=t.n(p),m=t(218),g=t.n(m),v=t(202),O=t.n(v),u=t(252),r=t.n(u),i=t(808),d=t(699),b=t(229),w=t(809),E=t(794),S=t(633),P=t(810),D=t(811),W=t(196),B=t(303),f=t.n(B),y=t(15),M=t.n(y),N;(function(et){et.CONTRIBUTOR="contributor",et.FOUNDING="founding",et.PAID="paid",et.FREE="free_subscriber"})(N||(N={}));var A=t(3),L=t(16),C=t(108),R=t(38),U=t(553),Z=t(7),F=t(21),z=t(282),G=t(8),V=t(14),k=t(4),K=t(35),Y=t(36),ee=t(209),ae=t(121),he=t(10),me=t(71),Ye=t(206),se=t(132),ie=t(22),Ee=t(74),Oe=t(194),ce=t(165),ue={columnsContainer:"frontend-reader2-ChatPage-module__columnsContainer--17a4i",pubChatColumn:"frontend-reader2-ChatPage-module__pubChatColumn--3YdU5",pubChatFull:"frontend-reader2-ChatPage-module__pubChatFull--qc4-i",chatPublication:"frontend-reader2-ChatPage-module__chatPublication--2Qwxj",selected:"frontend-reader2-ChatPage-module__selected--3f2M3",currentVisibilityBox:"frontend-reader2-ChatPage-module__currentVisibilityBox--2MyfT",sidebarItemImagesContainer:"frontend-reader2-ChatPage-module__sidebarItemImagesContainer--1N2GN",sidebarPubName:"frontend-reader2-ChatPage-module__sidebarPubName--2W3jT",sidebarChatText:"frontend-reader2-ChatPage-module__sidebarChatText--194Hc",pubIcon:"frontend-reader2-ChatPage-module__pubIcon--33LVb",inputBox:"frontend-reader2-ChatPage-module__inputBox--3Vf1p",inlineContext:"frontend-reader2-ChatPage-module__inlineContext--13AxX",modalContext:"frontend-reader2-ChatPage-module__modalContext--1Kzki",textInputInset:"frontend-reader2-ChatPage-module__textInputInset--3l7yd",invisible:"frontend-reader2-ChatPage-module__invisible--2yyPj",textInput:"frontend-reader2-ChatPage-module__textInput--1-spC",latestButton:"frontend-reader2-ChatPage-module__latestButton--1o-qr",submitButton:"frontend-reader2-ChatPage-module__submitButton--1tgio",newThreadButton:"frontend-reader2-ChatPage-module__newThreadButton--1G77j",addImage:"frontend-reader2-ChatPage-module__addImage--28-Wb",imageBox:"frontend-reader2-ChatPage-module__imageBox--1uxsf",image:"frontend-reader2-ChatPage-module__image--3UfcR",delete:"frontend-reader2-ChatPage-module__delete--3ERWJ",communityViewContainer:"frontend-reader2-ChatPage-module__communityViewContainer--3peJF",modalColumn:"frontend-reader2-ChatPage-module__modalColumn--2WETE",visibilityDropdown:"frontend-reader2-ChatPage-module__visibilityDropdown--AHZm-",visibilityDropdownText:"frontend-reader2-ChatPage-module__visibilityDropdownText--3cE5T",loadingBubble:"frontend-reader2-ChatPage-module__loadingBubble--2ULTl",messageSquareIcon:"frontend-reader2-ChatPage-module__messageSquareIcon--11VUv",paywall:"frontend-reader2-ChatPage-module__paywall--J78fH",footer:"frontend-reader2-ChatPage-module__footer--gjy8F",disabled:"frontend-reader2-ChatPage-module__disabled--Dlc6K"},pe=Object.defineProperty,$e=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Qe=(et,Wt,Vt)=>Wt in et?pe(et,Wt,{enumerable:!0,configurable:!0,writable:!0,value:Vt}):et[Wt]=Vt,Ze=(et,Wt)=>{for(var Vt in Wt||(Wt={}))q.call(Wt,Vt)&&Qe(et,Vt,Wt[Vt]);if(X)for(var Vt of X(Wt))Ne.call(Wt,Vt)&&Qe(et,Vt,Wt[Vt]);return et},tt=(et,Wt)=>$e(et,ne(Wt)),Ft=(et,Wt)=>{var Vt={};for(var cn in et)q.call(et,cn)&&Wt.indexOf(cn)<0&&(Vt[cn]=et[cn]);if(et!=null&&X)for(var cn of X(et))Wt.indexOf(cn)<0&&Ne.call(et,cn)&&(Vt[cn]=et[cn]);return Vt},Lt=(et,Wt,Vt)=>new Promise((cn,Tn)=>{var pn=Rn=>{try{hr(Vt.next(Rn))}catch(pr){Tn(pr)}},Gn=Rn=>{try{hr(Vt.throw(Rn))}catch(pr){Tn(pr)}},hr=Rn=>Rn.done?cn(Rn.value):Promise.resolve(Rn.value).then(pn,Gn);hr((Vt=Vt.apply(et,Wt)).next())});const rn=30,ht=2,je=5,Le=5,rt=6,Pe=1;function de({}){var et;Object(se.c)("Chat",{shouldShowGetAppPill:!1});const Wt=Object(R.c)(),[Vt,cn]=Object(z.a)(),[Tn,pn,Gn,hr]=(et=Vt.path.match(/^\/chat(?:\/(\d+)(?:\/post\/([^\/]+)(?:\/reply\/([^\/]+))?)?)?$/))!=null?et:[],Rn=Number(pn),[pr,zn]=Object(U.a)(Tt,{user:Wt,inbox:{threads:[],isLoading:!0},communityPosts:new Map,communityComments:new Map,chats:new Map,comments:new Map,replies:new Map});Object(s.d)(()=>{let Zr;const zr=()=>{document.hidden||zn(Hn()),Zr=setTimeout(zr,rn*1e3+Jt(ht))};return zr(),()=>{Zr&&clearTimeout(Zr)}},[zn]);const Ar=pr.inbox.isLoading,Rr=[];for(const Zr of pr.inbox.threads){if(!Zr.communityPostId&&Cn(Zr.publication,Wt)){Rr.push(tt(Ze({},Zr),{communityPost:null,user:Wt}));continue}const zr=Zr.communityPostId&&pr.communityPosts.get(Zr.communityPostId);zr&&!zr.isNew&&Rr.push(Ze(Ze({},Zr),zr))}const[ir,Sr]=Object(s.k)(new Map),Pr=new Map((Rr||[]).map(Zr=>ir.has(Zr.publication.id)?[Zr.publication.id,ir.get(Zr.publication.id)]:Zr.lastViewedAt?[Zr.publication.id,M()(Zr.lastViewedAt)]:null).filter(Boolean));Object(s.d)(()=>{typeof Rn!="number"||isNaN(Rn)||(fetch(`/api/v1/community/publications/${Rn}/seen`,{method:"POST"}).then(()=>{}),Sr(ir.set(Rn,M()())))},[Rn]),Object(s.d)(()=>{Ar||Object(Z.i)(Z.a.THREADS_INBOX_SCREEN_VIEWED,{unread_count:Rr.filter(Zr=>Te(Zr,Pr)).length,thread_count:Rr.length})},[Ar]);const yr=(Zr,zr,wr)=>{cn(`/chat${Zr!=null?`/${Zr}`:""}${zr!=null?`/post/${zr}`:""}${wr!=null?`/reply/${wr}`:""}`)},br=Zr=>{yr(Zr)},Br=Zr=>{yr(Rn,Zr)},Nr=Zr=>{yr(Rn,Gn,Zr)},lo=Object(s.h)(()=>({dispatch:zn}),[]);return Object(e.h)(er.Provider,{value:lo},Object(e.h)(k.c,{className:ue.columnsContainer,flex:"grow"},Object(G.setMetaData)({title:"Chat | Substack",description:"Chat with your favorite writers on Substack",image:Object(A.cloudinary)("/img/reader/chat-page-thumb.jpg")}),Object(e.h)(k.b,{gap:16,overflowY:"auto",borderRight:"detail",paddingX:16,width:350},Ar?Object(e.h)(be,null):Rr.length>0?Object(e.h)(ie.w,null,Rr.map(Zr=>(Zr.communityPost&&Zr.user||Cn(Zr.publication,Wt))&&Object(e.h)(ke,{key:Zr.publication.id,item:Zr,onSelect:br,isSelected:Rn===Zr.publication.id,isUnread:Te(Zr,Pr)}))):Object(e.h)(k.b,{justifyContent:"center",alignItems:"center",flex:"grow",paddingX:32},Object(e.h)(Ye.a,{title:"You don\u2019t have any threads",body:"When one of your subscriptions starts a new thread, it will appear here."}))),hr!=null?Object(e.h)(le,{key:"replies",postId:Gn,pubId:Rn,parentCommentId:hr,state:pr,onBack:()=>Nr(null),navigateToChat:()=>Br(null)}):Gn!=null?Object(e.h)(le,{key:"comments",postId:Gn,pubId:Rn,state:pr,onBack:()=>Br(null),onSelect:Nr,navigateToChat:()=>Br(null)}):Rn?Object(e.h)(x,{key:Rn,pubId:Rn,state:pr,onSelect:Br}):Object(e.h)(Ye.a,{title:"Click on a chat in the sidebar to get started.",body:"Once you do, it will appear here."})))}function be(){return Object(e.h)(ie.w,null,Array(8).fill(0).map(()=>Object(e.h)(Ie,null)))}function Ie(){return Object(e.h)(k.a,{gap:16,padding:16},Object(e.h)(ie.A,{type:"circle",size:40}),Object(e.h)(k.b,{gap:8,flex:"grow"},Object(e.h)(ie.A,{type:"bar",maxWidth:100}),Object(e.h)(ie.A,{type:"bar",maxWidth:300}),Object(e.h)(ie.A,{type:"bar",maxWidth:200})))}function ke({item:et,onSelect:Wt,isSelected:Vt,isUnread:cn}){var Tn;return Object(e.h)(k.b,{paddingY:16},Object(e.h)(k.c,{onClick:()=>Wt(et.publication.id),className:l()(ue.chatPublication,{[ue.selected]:Vt}),padding:8,gap:16,radius:12},Object(e.h)(k.a,{className:ue.sidebarItemImagesContainer},et.user&&Object(e.h)(me.a,{user:et.user,size:56}),Object(e.h)(Ee.a,{className:ue.pubIcon,pub:et.publication,size:22})),Object(e.h)(k.b,{gap:4,flex:"grow",minWidth:0},Object(e.h)(k.a,{justifyContent:"space-between",alignItems:"center",gap:8},Object(e.h)(he.b.Meta,{className:ue.sidebarPubName,ellipsis:!0},et.publication.name),et.communityPost&&Object(e.h)(he.b.Meta,{ellipsis:!0},M()(et.communityPost.created_at).fromNowShort()),cn&&Object(e.h)(Oe.b,null)),Object(e.h)(he.b,{clamp:2,size:14,isParagraph:!0,className:ue.sidebarChatText},et.user&&Object(e.h)(he.b.B4,{as:"span",color:"primary",weight:"semibold"},et.user.name,":"," "),Object(e.h)(he.b.B4,{as:"span",color:"secondary"},(Tn=et.communityPost)==null?void 0:Tn.body)))))}function Te(et,Wt){if(!et.communityPost)return!1;const Vt=Wt.get(et.publication.id);return Vt?M()(et.communityPost.created_at).isAfter(Vt):!0}function x({pubId:et,onSelect:Wt,state:Vt}){var cn,Tn,pn,Gn;const hr=jr(),Rn=(cn=Vt.chats.get(et))!=null?cn:Ut,pr=(Tn=Rn.publication)==null?void 0:Tn.threads_v2_settings,zn=!!((pn=Rn.publication)==null?void 0:pn.threads_v2_enabled),Ar=Object(s.j)(null),Rr=Object(s.j)(0);Object(s.d)(()=>{Rn.publication&&Object(Z.i)(Z.a.PUBLICATION_THREADS_SCREEN_VIEWED,{publicationId:Rn.publication.id})},[et,Boolean(Rn.publication)]),Object(s.g)(()=>{var ao;const Po=Ar.current;Po&&(Po.scrollTop=(ao=Rn.scrollPosition)!=null?ao:0);const qo=()=>{hr({type:"posts-save_scroll_position",payload:{publication_id:et,scrollPosition:Rr.current}})},Ai=()=>{var hi,ze;Rr.current=(ze=(hi=Ar.current)==null?void 0:hi.scrollTop)!=null?ze:0};return Po==null||Po.addEventListener("scroll",Ai),()=>{Po==null||Po.removeEventListener("scroll",Ai),qo()}},[et]),Object(s.d)(()=>{let ao;const Po=()=>{document.hidden||hr(wn(et,!0)),ao=setTimeout(Po,je*1e3)};return hr({type:"posts-request_initial",payload:{publication_id:et}}).then(Po),()=>{ao&&clearTimeout(ao)}},[et,hr]);const ir=Object(F.f)({pathname:`/api/v1/community/publications/${et}/posts`,method:"POST",deps:[et]}),Sr=()=>{setTimeout(()=>{var ao;(ao=Ar.current)==null||ao.scrollTo({top:0})},0)},{isPaid:Pr,isAuthor:yr,isFreeSubscribed:br,isFounding:Br}=Object(ce.c)(et),Nr=(pr==null?void 0:pr.create_thread_minimum_role)===N.FOUNDING,lo=(pr==null?void 0:pr.create_thread_minimum_role)===N.PAID,Zr=(pr==null?void 0:pr.create_thread_minimum_role)===N.FREE,zr=yr||Nr&&Br||lo&&(Pr||Br)||Zr&&(br||Pr||Br),wr=ao=>Lt(this,[ao],function*({value:Po,mediaAssets:qo,sendAsEmail:Ai,audience:hi}){const ze=r()();hr({type:"posts-new",payload:{publication_id:et,body:Po,type:qo?"media":"text",media_assets:qo,id:ze}}),Sr();const Re=yield ir.refetch({json:{body:Po,media_urls:qo==null?void 0:qo.map(We=>We.url),audience:hi!=null?hi:"all_subscribers",type:qo?"media":"text",send_email:!!Ai}});Re instanceof Error||hr({type:"posts-commit",payload:{publication_id:et,id:ze,chatItem:Re}})}),$o=()=>{hr(Un(et))},xo=!1,Vo=ao=>{if(xo||!Rn.hasMore||Rn.isLoadingMore)return;const{currentTarget:Po}=ao;Po.scrollTop<Po.offsetHeight-Po.scrollHeight+100&&$o()},Ho=(Rn.posts.length===0||Rn.posts.every(ao=>{const Po=Vt.communityPosts.get(ao);return!Po||mt(Po)&&Po.communityPost.status!=="published"}))&&!Rn.isLoadingMore&&!Rn.hasMore,oi=yr&&Ho,zo=Rn.posts.map(ao=>Vt.communityPosts.get(ao)).filter(ao=>ao!==void 0&&ao.communityPost.status==="published");let ho;const Jo=[];let gi=[];for(const ao of zo){const Po=M()(ao.communityPost.created_at);ho&&!Po.isSame(ho,"day")&&(Jo.push({day:ho,group:gi}),gi=[]),gi.push(ao),ho=Po}ho&&gi.length>0&&Jo.push({group:gi,day:ho});const ki=Rn.error;return ki?Object(e.h)(Xn,{pubErr:ki}):zn?Object(e.h)(Ve,null,oi?Object(e.h)(en,{title:"You haven't started any threads yet.",body:"Once you do, they'll appear here."}):Ho?Object(e.h)(en,{title:"This publication has not started any threads.",body:"Once it does, they'll appear here."}):Object(e.h)(yt,{direction:"column-reverse",onScroll:Vo,forwardRef:Ar},Jo.map(({day:ao,group:Po})=>Object(e.h)(tr,{key:ao.toISOString(),day:ao,items:Po,onSelect:Wt,isPaid:Br||Pr||yr})),Rn.isLoadingMore?Object(e.h)(Xe,{numberToLoad:2}):Rn.hasMore&&Object(e.h)(ct,{onClick:$o})),zr?Object(e.h)(Ot,{publicationId:et,placeholder:"Start a new thread",maxImagesToUpload:rt,disabled:ir.isLoading,onSubmit:wr,publishOptionsEnabled:yr,visiblityOptionsEnabled:!!((Gn=Rn.publication)==null?void 0:Gn.plans)}):Object(e.h)(k.a,{justifyContent:"center",alignItems:"center",paddingX:24,borderTop:"detail",className:l()(ue.footer,ue.disabled)},Object(e.h)(k.c,{gap:8,alignItems:"center"},Object(e.h)(i.a,{size:16,className:ue.messageSquareIcon}),Object(e.h)(he.b.B4,{color:"secondary"},"Click any thread to reply")))):yr?Object(e.h)(en,{title:"You haven't enabled chat for this publication yet.",body:"Once you do, you can access its chat here."}):Object(e.h)(en,{title:"This publication has not enabled chat yet.",body:"Once it does, you can access its chat here."})}function H({item:et,onSelect:Wt,isPaid:Vt}){const{communityPost:cn}=et;if(!Vt&&cn.audience==="only_paid")return Object(e.h)(Yn,{user:et.user});const pn=()=>Wt(cn.id),Gn=hr=>{hr.defaultPrevented||pn()};return Object(e.h)(k.b,{alignItems:"start",onClick:Gn,className:ue.communityViewContainer},Object(e.h)(C.d,{communityPost:cn,author:et.user,onReply:pn}))}function le({postId:et,pubId:Wt,parentCommentId:Vt,onBack:cn,onSelect:Tn,state:pn,navigateToChat:Gn}){var hr,Rn,pr,zn,Ar,Rr,ir,Sr,Pr;const yr=Vt?`replies-${Vt}`:`comments-${et}`,br=Vt?(hr=pn.replies.get(Vt))!=null?hr:cr:(Rn=pn.comments.get(et))!=null?Rn:cr,Br=pn.communityPosts.get(et),Nr=Vt&&pn.communityComments.get(Vt),lo=pn.chats.get(Wt),Zr=(Ar=(zn=(pr=lo==null?void 0:lo.publication)==null?void 0:pr.threads_v2_settings)==null?void 0:zn.photo_replies_enabled)!=null?Ar:!1;Object(s.d)(()=>{Vt?Nr&&Fe(Nr)&&Object(Z.i)(Z.a.THREAD_REPLY_PERMALINK_VIEWED,{publication_id:Wt,community_post_id:et,community_comment_id:Vt}):Br&&mt(Br)&&Object(Z.i)(Z.a.THREAD_PERMALINK_VIEWED,{publication_id:Wt,community_post_id:et,type:Br.communityPost.type,audience:Br.communityPost.audience})},[Vt,et,Wt,Boolean(Br),Boolean(Nr)]);const zr=Object(R.c)(),wr=Object(s.j)(),$o=Object(s.j)(),xo=jr(),[Vo,Ti]=Object(s.k)(null),[Ho,oi]=Vt?["replies",{parentCommentId:Vt}]:["comments",{postId:et}],zo=!br.before.isLoading&&!br.after.isLoading&&br.comments.length===0,ho=Vt!=null?`/api/v1/community/comments/${Vt}/comments`:`/api/v1/community/posts/${et}/comments`,Jo=Vt!=null?Vt:et,gi=Bt=>Lt(this,null,function*(){xo({type:`${Ho}-request_initial`,payload:tt(Ze({},oi),{order:Bt})});const Yt=Bt==="desc"?"before":"after";try{const an=yield Object(F.c)(ho,{query:{order:Bt}});xo({type:`${Ho}-load_edge`,payload:tt(Ze({},oi),{edge:Yt,result:an})})}catch(an){return console.warn(an),xo({type:`${Ho}-error`,payload:tt(Ze({},oi),{edge:Yt,error:an})}),Bt==="desc"&&ki(),an}return Bt==="desc"&&ki(),null}),ki=()=>{setTimeout(()=>{var Bt;(Bt=wr.current)==null||Bt.scrollTo({top:1e7})},0)},ao={before:!1,after:!1},Po=(Bt,Yt)=>{if(!(ao[Bt]||br[Bt].isLoading))return ao[Bt]=!0,qo(Bt,Yt)},qo=(Bt,Yt)=>Lt(this,null,function*(){var an,En,vn,ar;xo({type:`${Ho}-request_edge`,payload:tt(Ze({},oi),{edge:Bt})});const Er=h()(br.comments),Dr=br.comments[0],Lr=Bt==="before"?{order:"desc",before:Er&&((an=pn.communityComments.get(Er))==null?void 0:an.comment.created_at)}:{order:"asc",after:Dr&&((En=pn.communityComments.get(Dr))==null?void 0:En.comment.created_at)};try{const no=yield Object(F.c)(ho,tt(Ze({},Yt),{query:Lr})),{current:ko}=wr,bi=(ar=(vn=$o.current)==null?void 0:vn.offsetHeight)!=null?ar:0;xo({type:`${Ho}-load_edge`,payload:tt(Ze({},oi),{edge:Bt,result:no})}),setTimeout(()=>{var ei,li;if(br.order==="desc"&&ko){const{scrollTop:Vi}=ko;ko.scrollTo({top:Vi+(((li=(ei=$o.current)==null?void 0:ei.offsetHeight)!=null?li:0)-bi)})}},0)}catch(no){console.warn(no),xo({type:`${Ho}-error`,payload:tt(Ze({},oi),{edge:Bt,error:no})})}}),Ai=Bt=>{br[Bt].hasMore&&Po(Bt)},hi=Bt=>{const{currentTarget:Yt}=Bt,{scrollTop:an,offsetHeight:En,scrollHeight:vn}=Yt;vn>En&&(an<100?Ai("before"):an>En-vn-100&&Ai("after"))};Object(s.d)(()=>{gi("asc").then(Bt=>{Bt&&Ti(Bt)})},[Jo]);const ze=Object(s.j)(qo);ze.current=qo,Object(s.d)(()=>{if(!zo&&br.order==="desc"){let Bt=new a.a;const Yt=()=>{setTimeout(()=>Lt(this,null,function*(){Bt.signal.aborted||(Bt=new a.a,yield ze.current("after",{signal:Bt.signal}),Yt())}),Le*1e3)};return Yt(),()=>{Bt.abort()}}},[Jo,zo,br.order]);const Re=Object(F.f)({pathname:`/api/v1/community/posts/${et}/comments`,method:"POST",deps:[Jo]}),We=(Bt,Yt,an)=>Lt(this,null,function*(){const En="We failed to upload your media. Please try again later.",vn=Bt[0],{contentType:ar}=vn,Er=yield Gt(Yt,an,ar);if(Er instanceof Error){alert(En);return}const{url:Dr}=Er;(yield mn(vn,Dr))instanceof Error&&alert(En)}),it=Bt=>Lt(this,[Bt],function*({value:Yt,mediaAssets:an}){const En=Yt!=null?Yt:"",vn=f()();br.order==="asc"&&gi("desc");let ar=null;an&&(ar=an.map(Dr=>({id:f()(),url:Dr.url,content_type:Dr.contentType,type:"image",file:Dr.file}))),xo({type:`${Ho}-new`,payload:tt(Ze({},oi),{id:vn,body:En,postId:et,mediaUploads:ar})}),ki(),an&&(yield We(an,vn,Wt));const Er=yield Re.refetch({json:{id:vn,body:En,parent_id:Vt}});Er instanceof Error||xo({type:`${Ho}-commit`,payload:tt(Ze({},oi),{id:vn,reply:Er})})});if(Vo&&((Rr=Vo.body)==null?void 0:Rr.error)==="Publication not found")return Object(e.h)(en,{title:"We could not find this publication.",body:"Please select another publication and try again."});if(!lo)return Object(e.h)(en,{title:"Something went wrong",body:"Navigate back to the publication chat by clicking the button below"},Object(e.h)(Sn,{onClick:Gn},"Back to chat"));if(lo&&lo.error)return Object(e.h)(Xn,{pubErr:lo.error});if(Vo&&((ir=Vo.body)==null?void 0:ir.error)==="Post not found")return Object(e.h)(en,{title:"We could not find the parent post",body:"Navigate back to the publication chat by clicking the button below"},Object(e.h)(Sn,{onClick:Gn},"Back to chat"));if(Vo&&((Sr=Vo.body)==null?void 0:Sr.error)==="Comment not found")return Object(e.h)(en,{title:"We could not find the parent comment",body:"Navigate back by clicking the button below"},Object(e.h)(Sn,{onClick:cn},"Go back"));if(Br&&Br.isNew||Nr&&Nr.isNew)return Object(e.h)(en,{title:"You cannot comment on this post yet",body:"Navigate back by clicking the button below"},Object(e.h)(Sn,{onClick:cn},"Go back"));if(Br&&Br.communityPost.publication_id!==Wt)return Object(e.h)(en,{title:"This post does not belong to this publication",body:"Navigate back to the publication chat by clicking the button below"},Object(e.h)(Sn,{onClick:Gn},"Back to chat"));if(Nr&&Nr.comment.post_id!==et)return Object(e.h)(en,{title:"This comment does not belong to this post",body:"Navigate back to the publication chat by clicking the button below"},Object(e.h)(Sn,{onClick:Gn},"Back to chat"));const Ht=Vo&&((Pr=Vo.body)==null?void 0:Pr.error)==="Subscribe to view";return Object(e.h)(bt,null,Object(e.h)(Ue,{onClick:cn}),Object(e.h)(k.b,{style:{position:"relative"},flex:"grow"},Object(e.h)(yt,{onScroll:hi,forwardRef:wr,fullWidth:!0},Ht?Object(e.h)(Yn,{user:Nr?Nr.user:Br?Br.user:null,showReply:!1,analyticsParams:{publication_id:Wt,community_post_id:et}}):Object(e.h)(k.b,{className:ue.communityViewContainer},Nr&&!Nr.isNew?Object(e.h)(C.b,{key:Nr.comment.id,communityComment:Nr.comment,author:Nr.user,quoteReply:Nr.quote,onDelete:cn,hideReply:!0}):Br&&!Br.isNew&&Object(e.h)(C.d,{key:Br.communityPost.id,communityPost:Br.communityPost,author:Br.user,onDelete:cn,hideReply:!0})),Object(e.h)(Ce,null),Ht?Object(e.h)(Ye.a,{title:"Only paid subscribers can read comments",body:"Upgrade to a paid subscription to access the chat"},(lo==null?void 0:lo.publication)&&Object(e.h)(Kt,{pub:lo.publication,utm_source:"web-chat-paywall"})):zo?Object(e.h)(Ye.a,{title:"No replies yet",body:"Be the first to add a reply below"}):Object(e.h)(e.Fragment,null,br.after.error&&Object(e.h)($n,null),br.before.isLoading?Object(e.h)(Xe,null):br.before.hasMore&&Object(e.h)(ct,{onClick:()=>Po("before")}),Object(e.h)(k.b,{ref:$o,gap:24},br.comments.slice().reverse().map(Bt=>{const Yt=pn.communityComments.get(Bt);if(Yt&&Yt.comment.status==="published"){const an=!Yt.isNew&&Tn?()=>Tn(Yt.comment.id):void 0,En=vn=>{vn.defaultPrevented||an==null||an()};return Object(e.h)(k.b,{alignItems:"start",onClick:En,className:ue.communityViewContainer},Object(e.h)(C.b,{key:Yt.comment.id,communityComment:Yt.comment,quoteReply:Fe(Yt)?Yt.quote:null,author:Yt.isNew?zr:Yt.user,onReply:an}))}})),br.after.error&&Object(e.h)($n,null),br.after.isLoading&&br.order==="asc"?Object(e.h)(Xe,null):br.after.hasMore&&Object(e.h)(ct,{onClick:()=>Po("after")}))),br.order==="asc"&&br.after.hasMore&&Object(e.h)(V.a,{className:ue.latestButton,onClick:()=>gi("desc"),rounded:!0},"Latest")),Br&&!Br.isNew&&!Br.communityPost.is_locked&&Object(e.h)(Be,{stateChangeKey:yr,placeholder:"Add a reply",maxImagesToUpload:Pe,disabled:Re.isLoading,photosEnabled:Zr,onSubmit:it}))}function Ce(){return Object(e.h)(k.a,{borderTop:"detail",alignSelf:"stretch"})}function Ue({onClick:et}){return Object(e.h)(k.a,{paddingX:24,paddingTop:16},Object(e.h)(V.c,{size:40,onClick:et,fill:"outline",priority:"secondary"},Object(e.h)(d.a,{size:20})))}function Ve(et){return Object(e.h)(k.b,Ze({},et))}function bt(et){return Object(e.h)(k.b,Ze({},et))}function yt({children:et,direction:Wt="column",onScroll:Vt,forwardRef:cn,fullWidth:Tn}){return Object(e.h)(k.a,{className:ue.pubChatColumn,overflowY:"auto",padding:24,flex:"grow",direction:Wt,onScroll:Vt,ref:cn,alignItems:Tn?"stretch":"start"},Object(e.h)(k.a,{className:ue.pubChatFull,gap:24,direction:Wt},et))}function Qt(){const[et,Wt]=Object(s.k)([]);return{files:et,clearFiles:()=>{Wt([])},addFiles:pn=>{Wt(Gn=>[...Gn,...pn])},removeFile:pn=>{Wt(Gn=>Gn.filter(hr=>hr!==pn))}}}function tn(et){return Promise.all(et.map(Wt=>Lt(this,null,function*(){return{file:Wt,imageData:yield Object(G.getImageDataFromFileInput)({files:[Wt]})}}))).then(Wt=>Wt.map(Vt=>{var cn;return{contentType:Vt==null?void 0:Vt.file.type,url:(cn=Vt==null?void 0:Vt.imageData)==null?void 0:cn.url,bytes:Vt==null?void 0:Vt.file.size,file:Vt==null?void 0:Vt.file}}))}function Kn(et,Wt){const Vt=Object(R.c)(),[cn,Tn]=Object(s.k)(!1),pn={value:cn,flip:()=>Tn(zr=>!zr)},[Gn,hr]=Object(s.k)("all_subscribers"),Rn={value:Gn,set:hr},[pr,zn]=Object(s.k)(""),{files:Ar,clearFiles:Rr,addFiles:ir,removeFile:Sr}=Qt(),Pr=`You can only upload ${et} ${et>1?"images":"image"} at a time.`,yr=pr.trim()!==""||Ar.length>0,br=zr=>{zr.preventDefault();const wr=pr.trim(),$o=Ar.slice();(wr!==""||$o.length>0)&&(zn(""),Rr(),$o.length>0?tn($o).then(xo=>{Wt({value:wr||null,mediaAssets:xo,sendAsEmail:cn,audience:Gn})}).catch(xo=>{console.error("error getting media urls",xo)}):Wt({value:wr,sendAsEmail:cn,audience:Gn}))},Br=(zr,wr=!0)=>{!yr||wr&&zr.key==="Enter"&&!zr.shiftKey&&!zr.altKey&&br(zr)},Nr=Object(s.j)(null);return{user:Vt,canSubmit:yr,files:Ar,handleSubmit:br,inputFile:Nr,removeFile:Sr,onChangeFile:zr=>{zr.stopPropagation(),zr.preventDefault();const wr=[...zr.target.files];wr.length+Ar.length>et?alert(`${Pr} Please try again.`):ir(wr),(Nr==null?void 0:Nr.current)&&(Nr.current.value="")},onImageButtonClick:()=>{var zr;Ar.length>=et?alert(Pr):(zr=Nr.current)==null||zr.click()},textValue:pr,setTextValue:zn,handleKeyDown:Br,sendAsEmailHandler:pn,postAudienceHandler:Rn}}function Ot({publicationId:et,placeholder:Wt,maxImagesToUpload:Vt,publishOptionsEnabled:cn,visiblityOptionsEnabled:Tn,disabled:pn,onSubmit:Gn}){const[hr,Rn]=Object(s.k)(!1),pr=()=>Rn(!1);return Object(s.d)(()=>{hr&&Object(Z.i)(Z.a.THREADS_COMPOSER_SCREEN_VIEWED,{publication_id:et})},[hr]),Object(e.h)(e.Fragment,null,Object(e.h)(k.a,{justifyContent:"center",alignItems:"center",flex:"auto",borderTop:"detail",className:ue.footer},Object(e.h)(V.a,{className:ue.newThreadButton,priority:"primary",fill:"filled",onClick:()=>Rn(!0),disabled:hr,rounded:!0},Wt)),Object(e.h)(Y.a,{isOpen:hr,onClose:pr,fullscreenMobile:!0},Object(e.h)(lt,{maxImagesToUpload:Vt,disabled:pn,publishOptionsEnabled:cn,visiblityOptionsEnabled:Tn,onSubmit:Gn,handleCloseModal:pr})))}function lt({maxImagesToUpload:et,disabled:Wt,publishOptionsEnabled:Vt,visiblityOptionsEnabled:cn,onSubmit:Tn,handleCloseModal:pn}){const{user:Gn,files:hr,handleSubmit:Rn,inputFile:pr,removeFile:zn,onChangeFile:Ar,onImageButtonClick:Rr,textValue:ir,setTextValue:Sr,handleKeyDown:Pr,sendAsEmailHandler:yr,postAudienceHandler:br,canSubmit:Br}=Kn(et,Tn);return Object(e.h)(k.b,{className:ue.modalColumn},Object(e.h)(k.c,{borderBottom:"detail",alignItems:"center",paddingY:12,paddingX:16,justifyContent:"space-between"},Object(e.h)(k.a,{alignItems:"center",gap:8},Object(e.h)(he.b.H3,null,"New Thread")),Object(e.h)(V.c,{size:40,"aria-label":"Close",onClick:pn},Object(e.h)(b.a,{size:20,"aria-hidden":"true"}))),Object(e.h)(k.b,{gap:16,padding:16,flex:"grow"},Object(e.h)(k.a,{gap:12,className:l()(ue.inputBox,ue.modalContext),flex:"grow",paddingRight:8},Object(e.h)(me.a,{size:48,user:Gn}),Object(e.h)(k.a,{className:ue.textInputInset,paddingTop:12,flex:"grow"},Object(e.h)("div",{className:ue.invisible},ir),Object(e.h)("textarea",{disabled:Wt,className:ue.textInput,name:"body",rows:1,placeholder:"Write something...",value:ir,onKeyDown:Nr=>Pr(Nr,!1),onInput:Nr=>Sr(Nr.currentTarget.value)}))),hr.length>0&&Object(e.h)(fe,{files:hr,deleteFile:zn})),Vt&&Object(e.h)(k.c,{borderTop:"detail",padding:16,justifyContent:"space-between"},Object(e.h)(k.a,{gap:8,alignItems:"center",paddingLeft:8},Object(e.h)(w.a,{size:24,fontWeight:"medium"}),Object(e.h)(he.b.B4,{weight:"medium"},"Also send as email")),Object(e.h)(ae.a,{checked:yr.value,onChange:yr.flip,color:"default"})),Vt&&cn&&Object(e.h)(k.c,{borderTop:"detail",padding:16,justifyContent:"space-between"},Object(e.h)(ee.a,{content:Nr=>Object(e.h)(Ae,{currentVisibility:br.value,onPick:lo=>{br.set(lo),Nr()}}),preferPlacement:"top-start"},Object(e.h)(k.a,{gap:8,alignItems:"center",paddingLeft:8,className:ue.currentVisibilityBox},br.value==="all_subscribers"?Object(e.h)(e.Fragment,null,Object(e.h)(E.a,{size:24,fontWeight:"medium"}),Object(e.h)(he.b.B4,{weight:"medium"},"Visible to ",Object(e.h)("b",null,"all subscribers"))):Object(e.h)(e.Fragment,null,Object(e.h)(S.a,{size:24,fontWeight:"medium"}),Object(e.h)(he.b.B4,{weight:"medium"},"Only visible to ",Object(e.h)("b",null,"paid subscribers")))))),Object(e.h)(k.c,{borderTop:"detail",padding:16,justifyContent:"space-between"},Object(e.h)("input",{type:"file",accept:"image/*",id:"file",ref:pr,style:{display:"none"},onChange:Ar,"aria-label":"Add image",multiple:!0}),Object(e.h)(_e,{onClick:Rr,fontWeight:"medium",size:24,color:"primary-text"}),Object(e.h)(V.a,{className:ue.submitButton,priority:"primary",disabled:!Br,onClick:Nr=>{Rn(Nr),pn()}},"Post")))}function Be({stateChangeKey:et,onSubmit:Wt,disabled:Vt,placeholder:cn,maxImagesToUpload:Tn,photosEnabled:pn}){const{user:Gn,files:hr,handleSubmit:Rn,inputFile:pr,removeFile:zn,onChangeFile:Ar,onImageButtonClick:Rr,textValue:ir,setTextValue:Sr,handleKeyDown:Pr,canSubmit:yr}=Kn(Tn,Wt),br=Object(s.j)(null);return Object(s.d)(()=>{br.current&&br.current.focus()},[et]),Object(e.h)(k.b,{alignItems:"start",justifyContent:"center",as:"form",paddingX:24,paddingY:24,gap:16,onSubmit:Rn,borderTop:"detail",alignSelf:"stretch"},hr.length>0&&Object(e.h)(fe,{files:hr,deleteFile:zn,paddingLeft:56}),Object(e.h)(k.a,{gap:8,alignItems:"end",alignSelf:"stretch"},Object(e.h)(me.a,{user:Gn,size:40}),Object(e.h)(k.a,null,Object(e.h)("input",{type:"file",accept:"image/*",id:"file",ref:pr,style:{display:"none"},"aria-label":"Add image",onChange:Ar,multiple:!0})),Object(e.h)(k.a,{className:l()(ue.inputBox,ue.inlineContext),overflowY:"auto",overflowX:"hidden",paddingY:8,paddingX:16,radius:20,border:"detail",flex:"grow",justifyContent:"space-between",alignItems:"start",gap:8},Object(e.h)(k.a,{className:ue.textInputInset,flex:"grow"},Object(e.h)("div",{className:ue.invisible},ir),Object(e.h)("textarea",{ref:br,disabled:Vt,className:ue.textInput,name:"body",rows:1,placeholder:cn,value:ir,onKeyDown:Pr,onInput:Br=>Sr(Br.currentTarget.value),autoFocus:!0}))),pn&&Object(e.h)(_e,{onClick:Rr,fill:"outline"}),yr&&Object(e.h)(V.c,{priority:"primary",fill:"filled",size:40,type:"submit"},Object(e.h)(P.a,{size:20}))))}function _e({onClick:et,fontWeight:Wt="normal",size:Vt=20,containerSize:cn=40,fill:Tn="empty",color:pn}){return Object(e.h)(V.c,{size:cn,onClick:et,color:pn,fill:Tn},Object(e.h)(D.a,{size:Vt,fontWeight:Wt,className:ue.addImage}))}function Ae({currentVisibility:et,onPick:Wt}){return Object(e.h)(k.b,{gap:4},Object(e.h)(k.c,{borderBottom:"detail",justifyContent:"center",alignItems:"center",paddingTop:0,paddingBottom:8,paddingX:8},Object(e.h)(he.b.B3,{className:ue.visibilityDropdownText},"Choose who can see this:")),Object(e.h)(K.b,{onClick:()=>Wt("all_subscribers"),icon:Object(e.h)(E.a,null),className:ue.visibilityDropdown},Object(e.h)(k.a,{justifyContent:"space-between",alignItems:"center"},"All subscribers",et==="all_subscribers"&&Object(e.h)(W.a,{size:20}))),Object(e.h)(K.b,{onClick:()=>Wt("only_paid"),icon:Object(e.h)(S.a,null),className:ue.visibilityDropdown},Object(e.h)(k.a,{justifyContent:"space-between",alignItems:"center"},"Paid subscribers",et==="only_paid"&&Object(e.h)(W.a,{size:20}))))}function fe(et){var Wt=et,{files:Vt,deleteFile:cn}=Wt,Tn=Ft(Wt,["files","deleteFile"]);return Object(e.h)(k.a,tt(Ze({},Tn),{gap:8,wrap:"wrap"}),Vt.map(pn=>Object(e.h)(nt,{key:pn.name,file:pn,deleteFile:cn})))}function ft({deleteFile:et}){return Object(e.h)(V.c,{className:ue.delete,size:32,priority:"media",onClick:et},Object(e.h)(b.a,{size:20}))}function nt({file:et,deleteFile:Wt}){return Object(e.h)(k.c,{className:ue.imageBox},Object(e.h)("img",{className:ue.image,src:URL.createObjectURL(et),alt:et.name}),Object(e.h)(ft,{deleteFile:()=>Wt(et)}))}function ct({onClick:et}){return Object(e.h)(k.a,{justifyContent:"center",padding:8},Object(e.h)(V.a,{fill:"empty",onClick:et},"Load more"))}function Xe({numberToLoad:et=1}){return Object(e.h)(k.b,{gap:32},Array(et).fill(0).map(()=>Object(e.h)(gt,null)))}function gt(){return Object(e.h)(k.c,{gap:12,flex:"grow",alignItems:"start"},Object(e.h)(ie.A,{type:"circle",size:40}),Object(e.h)(k.b,{gap:4,flex:"grow"},Object(e.h)(ie.A,{className:ue.loadingBubble,type:"bar",width:500,height:70+Math.random()*80}),Object(e.h)(ie.A,{className:ue.loadingBubble,type:"bar",width:500,height:50})))}function Tt(et,Wt){return Wt.type.startsWith("inbox-")?qt(et,Wt):Wt.type.startsWith("posts-")?sn(et,Wt):Wt.type.startsWith("replies-")||Wt.type.startsWith("comments-")?fr(et,Wt):et}const Ut={isLoadingMore:!1,hasMore:!1,posts:[],error:null,publication:null,scrollPosition:0};function qt(et,Wt){switch(Wt.type){case"inbox-new_items":{const{threads:Vt}=Wt.payload;return tt(Ze({},et),{inbox:tt(Ze({},et.inbox),{isLoading:!1,threads:Vt.map(cn=>{var Tn=cn,{communityPost:pn,user:Gn}=Tn,hr=Ft(Tn,["communityPost","user"]),Rn;return tt(Ze({},hr),{communityPostId:(Rn=pn==null?void 0:pn.id)!=null?Rn:null})})}),communityPosts:new Map([...et.communityPosts,...Vt.map(cn=>cn&&cn.communityPost&&cn.user?[cn.communityPost.id,{user:cn.user,communityPost:cn.communityPost,isNew:!1}]:null).filter(cn=>cn!==null)]),chats:new Map([...et.chats,...Vt.map(cn=>{var Tn;if(cn&&cn.publication){const pn=(Tn=et.chats.get(cn.publication.id))!=null?Tn:Ut;return[cn.publication.id,tt(Ze({},pn),{publication:cn.publication})]}return null}).filter(cn=>cn!==null)])})}default:return et}}function sn(et,Wt){var Vt,cn,Tn,pn;const{publication_id:Gn}=Wt.payload,hr=(Vt=et.chats.get(Gn))!=null?Vt:Ut;switch(Wt.type){case"posts-request_initial":return tt(Ze({},et),{chats:wt(et.chats,Gn,tt(Ze({},hr),{isLoadingMore:!0}))});case"posts-request_more":return tt(Ze({},et),{chats:wt(et.chats,Gn,tt(Ze({},hr),{isLoadingMore:!0}))});case"posts-load_more":{const{result:Rn,direction:pr}=Wt.payload,zn=Rn.threads.find(ir=>ir.communityPost.status!=="deleted"),Rr=$t({getPubChatItemFromId:ir=>ir===(zn==null?void 0:zn.communityPost.id)?zn:et.communityPosts.get(ir)});return tt(Ze({},et),{communityPosts:new Map([...et.communityPosts,...Rn.threads.map(ir=>[ir.communityPost.id,ir])]),chats:wt(et.chats,Gn,tt(Ze({},hr),{isLoadingMore:!1,hasMore:Rn.more,posts:pr==="after"?g()([...hr.posts,...Rn.threads.map(ir=>ir.communityPost.id)]):g()([...Rn.threads.map(ir=>ir.communityPost.id),...hr.posts])})),inbox:pr==="after"?et.inbox:tt(Ze({},et.inbox),{threads:[...et.inbox.threads.map(ir=>{var Sr;return ir.publication.id===Gn?tt(Ze({},ir),{communityPostId:(Sr=zn==null?void 0:zn.communityPost.id)!=null?Sr:ir.communityPostId,lastViewedAt:null}):ir})].sort(Rr)})})}case"posts-error":return tt(Ze({},et),{chats:wt(et.chats,Gn,tt(Ze({},hr),{isLoadingMore:!1,error:Wt.payload}))});case"posts-new":{const Rn={communityPost:tt(Ze({},Wt.payload),{status:"published",created_at:new Date().toISOString()}),isNew:!0};return tt(Ze({},et),{communityPosts:wt(et.communityPosts,Rn.communityPost.id,Rn),chats:wt(et.chats,Gn,tt(Ze({},hr),{posts:[Rn.communityPost.id,...hr.posts]}))})}case"posts-commit":{const{id:Rn,chatItem:pr,publication_id:zn}=Wt.payload,Ar=new Map(et.communityPosts);Ar.delete(Rn),Ar.set(pr.communityPost.id,pr);const Rr=et.inbox.threads.slice(),ir=Rr.findIndex(Sr=>Sr.publication.id===zn);if(ir!==-1){let Sr=Rr[ir];Sr=tt(Ze({},Sr),{communityPostId:pr.communityPost.id}),Rr.splice(ir,1),Rr.unshift(Sr)}return tt(Ze({},et),{inbox:tt(Ze({},et.inbox),{threads:Rr}),communityPosts:Ar,chats:wt(et.chats,zn,tt(Ze({},hr),{posts:hr.posts.map(Sr=>Sr===Rn?pr.communityPost.id:Sr)}))})}case"posts-new_reaction":{const{id:Rn,reaction:pr}=Wt.payload,zn=et.communityPosts.get(Rn);return!zn||!mt(zn)||!((cn=zn.communityPost)==null?void 0:cn.reactions)?(console.warn("chat item does not exist"),et):zn.communityPost.reaction===pr?(console.warn("already set this reaction",pr),et):tt(Ze({},et),{communityPosts:wt(et.communityPosts,Rn,tt(Ze({},zn),{communityPost:Dt(zn.communityPost,pr,!0)}))})}case"posts-remove_reaction":{const{id:Rn,reaction:pr}=Wt.payload,zn=et.communityPosts.get(Rn);return!zn||!mt(zn)||!((Tn=zn.communityPost)==null?void 0:Tn.reactions)?(console.warn("chat item does not exist"),et):tt(Ze({},et),{communityPosts:wt(et.communityPosts,Rn,tt(Ze({},zn),{communityPost:Dt(zn.communityPost,pr,!1)}))})}case"posts-delete_post":{const{id:Rn,publication_id:pr}=Wt.payload,zn=et.communityPosts.get(Rn);if(!zn)return console.warn("chat item does not exist"),et;const Ar=new Map(et.communityComments),Rr=et.comments.get(Rn);Rr&&Rr.comments.forEach(yr=>{nr(yr,Ar);const br=et.replies.get(yr);br&&br.comments.forEach(Br=>{nr(Br,Ar)})});const ir=(pn=et.chats.get(pr))==null?void 0:pn.posts.find(yr=>{var br;if(yr===Rn)return!1;const Br=et.communityPosts.get(yr);return((br=Br==null?void 0:Br.communityPost)==null?void 0:br.status)!=="deleted"}),Pr=$t({getPubChatItemFromId:yr=>et.communityPosts.get(yr)});return tt(Ze({},et),{communityPosts:wt(et.communityPosts,Rn,tt(Ze({},zn),{communityPost:tt(Ze({},zn.communityPost),{status:"deleted"})})),communityComments:Ar,inbox:tt(Ze({},et.inbox),{threads:[...et.inbox.threads.map(yr=>yr.publication.id===pr?tt(Ze({},yr),{communityPostId:ir!=null?ir:null}):yr)].sort(Pr)})})}case"posts-save_scroll_position":{const{publication_id:Rn,scrollPosition:pr}=Wt.payload;return tt(Ze({},et),{chats:wt(et.chats,Rn,tt(Ze({},hr),{scrollPosition:pr}))})}case"posts-update_post":{const{id:Rn,post:pr}=Wt.payload,zn=et.communityPosts.get(Rn);return!zn||!mt(zn)?(console.warn("post does not exist"),et):tt(Ze({},et),{communityPosts:wt(et.communityPosts,Rn,tt(Ze({},zn),{communityPost:Ze(Ze({},zn.communityPost),pr)}))})}default:throw new Error("Invalid action type")}}function _n(et,Wt){var Vt;return(Vt=et.chats.get(Wt))!=null?Vt:Ut}const Hn=()=>(et,Wt)=>Lt(void 0,null,function*(){try{const Vt=yield Object(F.c)("/api/v1/community/posts",{method:"GET"});et({type:"inbox-new_items",payload:{threads:Vt==null?void 0:Vt.threads}})}catch(Vt){console.warn("error",Vt)}}),wn=(et,Wt=!1)=>(Vt,cn)=>Lt(void 0,null,function*(){const Tn=_n(cn(),et),pn=Tn.posts[Tn.posts.length-1],Gn=cn().communityPosts.get(pn);try{const hr=yield Object(F.c)(`/api/v1/community/publications/${et}/posts`,{query:{before:Gn&&!Wt?Gn.communityPost.created_at:void 0}});if(Array.isArray(hr)&&hr.length===0){const Rn=new Error("FLAGGED_AS_SPAM");Vt({type:"posts-error",payload:{publication_id:et,error:Rn}});return}Vt({type:"posts-load_more",payload:{publication_id:et,result:hr,direction:Wt?"before":"after"}})}catch(hr){console.warn("error",hr),Vt({type:"posts-error",payload:{publication_id:et,error:hr}})}}),Un=et=>(Wt,Vt)=>Lt(void 0,null,function*(){const cn=_n(Vt(),et);if(!(!cn.hasMore||cn.isLoadingMore))return yield Wt({type:"posts-request_more",payload:{publication_id:et}}),Wt(wn(et))}),bn={isLoading:!1,hasMore:!1,error:null},cr={before:bn,after:tt(Ze({},bn),{isLoading:!0}),order:"asc",comments:[]};function fr(et,Wt){var Vt,cn,Tn,pn,Gn;let hr=null,Rn=null;pt(Wt)?Rn=Wt.payload.parentCommentId:"postId"in Wt.payload&&(hr=Wt.payload.postId);const pr=ir=>Rn?{replies:ir}:{comments:ir};let zn;Rn?zn=(Vt=et.replies.get(Rn))!=null?Vt:cr:hr&&(zn=(cn=et.comments.get(hr))!=null?cn:cr);const Ar=Rn?et.replies:et.comments,Rr=Rn!=null?Rn:hr;switch(Wt.type){case"replies-request_initial":case"comments-request_initial":{const{order:ir}=Wt.payload,Sr=tt(Ze({},bn),{isLoading:!0,hasMore:!1});return Ze(Ze({},et),pr(wt(Ar,Rr,tt(Ze({},zn),{before:ir==="desc"?Sr:bn,after:ir==="asc"?Sr:bn,order:ir}))))}case"replies-request_edge":case"comments-request_edge":{const{edge:ir}=Wt.payload;return Ze(Ze({},et),pr(wt(Ar,Rr,tt(Ze({},zn),{[ir]:tt(Ze({},zn[ir]),{isLoading:!0,error:null})}))))}case"replies-load_edge":case"comments-load_edge":{const{edge:ir,result:{post:Sr,parent:Pr,replies:yr,more:br}}=Wt.payload,Br=yr.map(lo=>lo.comment.id),Nr=new Map([...et.communityComments,...yr.map(lo=>[lo.comment.id,lo])]);return Pr&&Nr.set(Pr.comment.id,Pr),Ze(tt(Ze({},et),{communityPosts:Sr?wt(et.communityPosts,Sr.communityPost.id,Sr):et.communityPosts,communityComments:Nr}),pr(wt(Ar,Rr,tt(Ze({},zn),{comments:g()(ir==="before"?[...zn.comments,...Br]:[...Br.slice().reverse(),...zn.comments]),[ir]:{isLoading:!1,hasMore:br,error:null},order:ir==="after"&&!br?"desc":zn.order}))))}case"replies-new":case"comments-new":{const ir={comment:tt(Ze({},ur()),{id:Wt.payload.id,body:Wt.payload.body,post_id:Wt.payload.postId,parent_id:Rn,media_uploads:(Tn=Wt.payload.mediaUploads)!=null?Tn:null}),isNew:!0},Sr=Ze(tt(Ze({},et),{communityComments:wt(et.communityComments,ir.comment.id,ir)}),pr(wt(Ar,Rr,tt(Ze({},zn),{comments:[ir.comment.id,...zn.comments]}))));if(Rn){const yr=et.communityComments.get(Rn);if(yr&&Fe(yr)){const br=zt(yr.comment,et.user,Wt.payload.postId);Sr.communityComments.set(Rn,tt(Ze({},yr),{comment:br}))}}const Pr=et.communityPosts.get(Wt.payload.postId);if(Pr&&mt(Pr)){const yr=zt(Pr.communityPost,et.user,Wt.payload.postId);Sr.communityPosts=wt(et.communityPosts,Wt.payload.postId,tt(Ze({},Pr),{communityPost:yr}))}return Sr}case"replies-commit":case"comments-commit":{const{id:ir,reply:Sr}=Wt.payload,Pr=new Map(et.communityComments);return Pr.delete(ir),Pr.set(Sr.comment.id,Sr),Ze(tt(Ze({},et),{communityComments:Pr}),pr(wt(Ar,Rr,tt(Ze({},zn),{comments:zn.comments.map(yr=>yr===ir?Sr.comment.id:yr)}))))}case"replies-error":case"comments-error":{const{edge:ir,error:Sr}=Wt.payload;return Ze(Ze({},et),pr(wt(Ar,Rr,tt(Ze({},zn),{[ir]:tt(Ze({},zn[ir]),{error:Sr})}))))}case"comments-new_reaction":{const{id:ir,reaction:Sr}=Wt.payload,Pr=et.communityComments.get(ir);return!Pr||!Fe(Pr)||!((pn=Pr.comment)==null?void 0:pn.reactions)?(console.warn("comment does not exist"),et):Pr.comment.reaction===Sr?(console.warn("reaction already set"),et):tt(Ze({},et),{communityComments:wt(et.communityComments,ir,tt(Ze({},Pr),{comment:Dt(Pr.comment,Sr,!0)}))})}case"comments-remove_reaction":{const{id:ir,reaction:Sr}=Wt.payload,Pr=et.communityComments.get(ir);return!Pr||!Fe(Pr)||!((Gn=Pr.comment)==null?void 0:Gn.reactions)?(console.warn("comment does not exist"),et):tt(Ze({},et),{communityComments:wt(et.communityComments,ir,tt(Ze({},Pr),{comment:Dt(Pr.comment,Sr,!1)}))})}case"comments-delete_comment":{const{id:ir}=Wt.payload,Sr=et.communityComments.get(ir);return Sr?tt(Ze({},et),{communityComments:wt(et.communityComments,ir,tt(Ze({},Sr),{comment:tt(Ze({},Sr.comment),{status:"deleted"})}))}):(console.warn("comment does not exist, cannot delete"),et)}case"comments-update_comment":{const{id:ir,comment:Sr}=Wt.payload,Pr=et.communityComments.get(ir);return!Pr||!Fe(Pr)?(console.warn("comment does not exist"),et):tt(Ze({},et),{communityComments:wt(et.communityComments,ir,tt(Ze({},Pr),{comment:Ze(Ze({},Pr.comment),Sr)}))})}default:throw new Error("Invalid type")}}function ur(){const et=new Date().toISOString();return{id:"",created_at:et,updated_at:et,user_id:0,post_id:"",body:"",media_uploads:null,parent_id:null,is_locked:!1,quote_id:null,status:"published"}}const er=Object(e.createContext)({dispatch:()=>Promise.resolve()});function jr(){var et;return(et=Object(s.b)(er))==null?void 0:et.dispatch}function wt(et,Wt,Vt){const cn=new Map(et);return cn.set(Wt,Vt),cn}function mt(et){return et.isNew!==!0}function Fe(et){return et.isNew!==!0}function pt(et){return"parentCommentId"in et.payload}function Dt(et,Wt,Vt){var cn,Tn;const pn=et.reaction,Gn=Ze({},et.reactions);return Gn[Wt]=((cn=Gn[Wt])!=null?cn:0)+(Vt?1:-1),Vt&&pn&&(Gn[pn]=((Tn=Gn[pn])!=null?Tn:0)-1),tt(Ze({},et),{reactions:Gn,reaction:Vt?Wt:null})}function Jt(et){return Math.floor(Math.random()*et*1e3)}function Gt(et,Wt,Vt){return Lt(this,null,function*(){try{return yield Object(F.c)("/api/v1/thread_media_uploads",{method:"POST",json:{publication_id:Wt,comment_id:et,content_type:Vt}})}catch(cn){return cn}})}function mn(et,Wt){return Lt(this,null,function*(){try{return yield fetch(Wt,{method:"PUT",headers:{"Content-Type":et.contentType},body:et.file})}catch(Vt){return Vt}})}function Cn(et,Wt){return Wt?et.author_id===Wt.id:!1}function tr({day:et,items:Wt,onSelect:Vt,isPaid:cn}){const Tn=Object(R.c)();return Object(e.h)(e.Fragment,null,Wt.map(pn=>Object(e.h)(H,{key:pn.communityPost.id,item:pn.isNew?tt(Ze({},pn),{user:Tn}):pn,onSelect:Vt,isPaid:cn})),Object(e.h)(Xt,{day:et}))}const Zn=new Intl.DateTimeFormat(void 0,{month:"long",day:"numeric"}),At=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric"});function Xt({day:et}){const Wt=M()();return Object(e.h)(k.a,{alignItems:"center",justifyContent:"center",padding:16},Object(e.h)(he.b.B3,{weight:"medium",size:14,color:"secondary"},et.isSame(Wt,"day")?"Today":et.isSame(Wt.subtract(1,"day"),"day")?"Yesterday":et.isSame(Wt,"year")?Zn.format(et.toDate()):At.format(et.toDate())))}function en({title:et,body:Wt,children:Vt}){return Object(e.h)(k.b,{justifyContent:"center",alignItems:"center",flex:"grow",paddingX:32},Object(e.h)(Ye.a,{title:et,body:Wt,children:Vt}))}function $n(){return Object(e.h)(k.a,{alignItems:"center",justifyContent:"center",padding:12},Object(e.h)(he.b.B3,{color:"error"},"Error loading chats"))}function Xn({pubErr:et}){if(et.error instanceof F.b){const Wt=et.error.body.error==="Chat not enabled",Vt=et.error.body.status==="FREE_SUBSCRIPTION_REQUIRED",cn=et.error.body.error==="Publication not found";if(Wt)return Object(e.h)(en,{title:"This publication has not enabled chat yet.",body:"Once it does, you can access its chat here."});if(Vt)return Object(e.h)(en,{title:"You need to subscribe to this publication to view its chat.",body:"Once you do, its chat will appear here."},et.error.body.publication&&Object(e.h)(Kt,{pub:et.error.body.publication,utm_source:"web-chat-navigation",isSubscribeWall:!0}));if(cn)return Object(e.h)(en,{title:"We could not find this publication.",body:"Please select another publication and try again."})}return et.error instanceof Error&&et.error.message==="FLAGGED_AS_SPAM"?Object(e.h)(en,{title:"We could not find this publication.",body:"Please select another publication and try again."}):Object(e.h)(en,{title:"Something went wrong loading the chat.",body:"Please check back in again."})}function Yn({user:et,showReply:Wt=!0,analyticsParams:Vt}){return Object(e.h)(k.a,null,Object(e.h)(k.b,{className:ue.paywall},Object(e.h)(C.c,{author:et,showReply:Wt,analyticsParams:Vt})))}function Sn({onClick:et,children:Wt}){return Object(e.h)(V.a,{priority:"secondary",onClick:et},Wt)}function nr(et,Wt){const Vt=Wt.get(et);return!Vt||Vt.comment.status==="deleted"?!1:(Wt.set(et,tt(Ze({},Vt),{comment:tt(Ze({},Vt.comment),{status:"deleted"})})),!0)}function zt(et,Wt,Vt){var cn,Tn;let pn;return Wt&&Wt.photo_url&&(pn=[{id:Wt.id,name:Wt.name,photo_url:Wt.photo_url,post_id:Vt}],et.recent_commenters&&(pn=O()([...pn,...et.recent_commenters],Gn=>Gn.id))),"reply_count"in et?tt(Ze({},et),{recent_commenters:pn,reply_count:1+((cn=et.reply_count)!=null?cn:0)}):"comment_count"in et?tt(Ze({},et),{recent_commenters:pn,comment_count:1+((Tn=et.comment_count)!=null?Tn:0)}):et}function Kt({pub:et,utm_source:Wt,isSubscribeWall:Vt}){Object(s.d)(()=>{Vt&&Object(Z.i)(Z.a.THREAD_SUBSCRIBE_WALL_VIEWED,{publication_id:et.id})},[]);const cn=()=>{const Tn=Object(L.getSubscribeUrl)(et,{addBase:!0,params:{next:document.location.href,utm_source:Wt}});window.open(Tn,"_blank")||(window.location.href=Tn)};return Object(e.h)(V.a,{priority:"primary",onClick:cn},`Subscribe to ${et.name}`)}function $t({getPubChatItemFromId:et}){return(Wt,Vt)=>{const cn=Wt.communityPostId&&et(Wt.communityPostId),Tn=Vt.communityPostId&&et(Vt.communityPostId),pn=!Wt.communityPostId||!cn,Gn=!Vt.communityPostId||!Tn;if(pn&&Gn)return 0;if(pn&&!Gn)return 1;if(!pn&&Gn)return-1;const hr=new Date(cn.communityPost.created_at);return new Date(Tn.communityPost.created_at).getTime()-hr.getTime()}}},,function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s){s.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})},function($,n,t){(function(e){var s=typeof e=="object"&&e&&e.Object===Object&&e;$.exports=s}).call(this,t(144))},function($,n){var t=Function.prototype,e=t.toString;function s(o){if(o!=null){try{return e.call(o)}catch(a){}try{return o+""}catch(a){}}return""}$.exports=s},function($,n,t){var e=t(339),s=t(517),o=t(340),a=1,c=2;function l(p,h,m,g,v,O){var u=m&a,r=p.length,i=h.length;if(r!=i&&!(u&&i>r))return!1;var d=O.get(p),b=O.get(h);if(d&&b)return d==h&&b==p;var w=-1,E=!0,S=m&c?new e:void 0;for(O.set(p,h),O.set(h,p);++w<r;){var P=p[w],D=h[w];if(g)var W=u?g(D,P,w,h,p,O):g(P,D,w,p,h,O);if(W!==void 0){if(W)continue;E=!1;break}if(S){if(!s(h,function(B,f){if(!o(S,f)&&(P===B||v(P,B,m,g,O)))return S.push(f)})){E=!1;break}}else if(!(P===D||v(P,D,m,g,O))){E=!1;break}}return O.delete(p),O.delete(h),E}$.exports=l},function($,n,t){var e=t(109);function s(o){return o===o&&!e(o)}$.exports=s},function($,n){function t(e,s){return function(o){return o==null?!1:o[e]===s&&(s!==void 0||e in Object(o))}}$.exports=t},function($,n,t){var e=t(419);function s(o){var a=e(o),c=a%1;return a===a?c?a-c:a:0}$.exports=s},function($,n,t){"use strict";t.d(n,"a",function(){return E}),t.d(n,"b",function(){return S}),t.d(n,"c",function(){return P}),t.d(n,"d",function(){return D});var e=t(0),s=t(6),o=t.n(s),a=t(15),c=t.n(a),l={datePicker:"frontend-pencraft-DatePicker-module__datePicker--gvF4e"},p=Object.defineProperty,h=Object.defineProperties,m=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,u=(f,y,M)=>y in f?p(f,y,{enumerable:!0,configurable:!0,writable:!0,value:M}):f[y]=M,r=(f,y)=>{for(var M in y||(y={}))v.call(y,M)&&u(f,M,y[M]);if(g)for(var M of g(y))O.call(y,M)&&u(f,M,y[M]);return f},i=(f,y)=>h(f,m(y)),d=(f,y)=>{var M={};for(var N in f)v.call(f,N)&&y.indexOf(N)<0&&(M[N]=f[N]);if(f!=null&&g)for(var N of g(f))y.indexOf(N)<0&&O.call(f,N)&&(M[N]=f[N]);return M};const b="YYYY-MM-DD",w="YYYY-MM-DDThh:mm";function E(f){var y=f,{className:M,min:N,max:A,value:L,onChange:C,disabled:R}=y,U=d(y,["className","min","max","value","onChange","disabled"]);return Object(e.h)("input",i(r({},U),{type:"date",className:o()(l.datePicker,M),value:L?c()(L).format(b):void 0,min:N?c()(N).format(b):void 0,max:A?c()(A).format(b):void 0,onChange:C,disabled:R}))}function S(f){var y=f,{className:M,min:N,max:A,value:L,onChange:C,disabled:R}=y,U=d(y,["className","min","max","value","onChange","disabled"]);return Object(e.h)("input",i(r({},U),{type:"datetime-local",className:o()(l.datePicker,M),value:L?c()(L).format(w):void 0,min:N?c()(N).format(w):void 0,max:A?c()(A).format(w):void 0,onChange:C,disabled:R}))}function P(f){var y=f,{className:M,min:N,max:A,value:L,onChange:C,disabled:R}=y,U=d(y,["className","min","max","value","onChange","disabled"]);return Object(e.h)("input",i(r({},U),{type:"datetime-local",className:o()(l.datePicker,M),value:W(L),min:W(N),max:W(A),onChange:C,disabled:R}))}function D(f){var y=f,{className:M,min:N,max:A,value:L,onChange:C,disabled:R}=y,U=d(y,["className","min","max","value","onChange","disabled"]);return Object(e.h)("input",i(r({},U),{type:"month",className:o()(l.datePicker,M),value:W(L),min:W(N),max:W(A),onChange:C,disabled:R}))}function W(f){return f instanceof Date?`${f.getFullYear()}-${B(f.getMonth()+1)}-${B(f.getDate())}T${B(f.getHours())}:${B(f.getMinutes())}`:f}function B(f){const y=String(f);return y.length<2?`0${y}`:y}},function($,n,t){var e=t(334),s=t(186),o=t(322),a=Math.max,c=Math.min;function l(p,h,m){var g=p==null?0:p.length;if(!g)return-1;var v=g-1;return m!==void 0&&(v=o(m),v=m<0?a(g+v,0):c(v,g-1)),e(p,s(h,3),v,!0)}$.exports=l},function($,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return a});var e=t(3),s=t.n(e);function o(c,l){if(c){if(!c.has_publication&&!c.subdomain)return{type:"no-dashboard",url:Object(e.getStartPublishingUrl)(l)};if(c.subdomain)return{type:"dashboard",url:Object(e.getDashboardUrlForSubdomain)(c.subdomain,{params:l})}}return null}function a(c,l){return(c==null?void 0:c.profile_set_up_at)?Object(e.getReaderProfileUrl)(c,l):Object(e.getProfileSetupUrl)(l)}},function($,n){function t(e){return function(s){return e(s)}}$.exports=t},function($,n,t){"use strict";t.d(n,"a",function(){return s});var e=t(0);const s=Object(e.createContext)(!1)},function($,n,t){"use strict";t.d(n,"a",function(){return i});var e=t(0),s=t(646),o=t(16),a=t(158),c=t(572),l=t(45),p=t(38),h=t(21),m=t(8),g=t.n(m),v=t(35),O=t(184),u=t(179),r=(d,b,w)=>new Promise((E,S)=>{var P=B=>{try{W(w.next(B))}catch(f){S(f)}},D=B=>{try{W(w.throw(B))}catch(f){S(f)}},W=B=>B.done?E(B.value):Promise.resolve(B.value).then(P,D);W((w=w.apply(d,b)).next())});function i({pub:d,post:b,comment:w,onRestack:E}){var S,P,D;const W=Object(p.c)(),B=Boolean(Object(l.c)().getConfigFor("enable_feed")&&((S=W==null?void 0:W.dashboard_pubs)==null?void 0:S.length)),f=Boolean((P=w||b)==null?void 0:P.restacked),y=((D=w||b)==null?void 0:D.restacks)||0,M=Object(O.e)(),N=Object(u.d)(),A=Object(h.f)({pathname:"/api/v1/restack/feed"}),L=()=>r(this,null,function*(){const U=yield A.refetch({method:"POST",json:{postId:w?null:b==null?void 0:b.id,commentId:(w==null?void 0:w.id)||null}});if(U instanceof Error){alert(Object(m.getNetworkErrorMessage)(U));return}U.comment?M({type:"comment_restack",payload:{commentId:U.comment.id,isRestacked:!0}}):M({type:"post_restack",payload:{postId:U.post.id,isRestacked:!0}}),E==null||E(!0)}),C=()=>r(this,null,function*(){const U=yield A.refetch({method:"DELETE",json:{postId:w?null:b==null?void 0:b.id,commentId:(w==null?void 0:w.id)||null}});if(U instanceof Error){alert(Object(m.getNetworkErrorMessage)(U));return}w?M({type:"comment_restack",payload:{commentId:w.id,isRestacked:!1}}):b&&M({type:"post_restack",payload:{postId:b.id,isRestacked:!1}}),E==null||E(!1)}),R=U=>{U.preventDefault(),N.open({restackUrl:Object(o.getPostUrl)(d,b,{comments:Boolean(w),commentId:w==null?void 0:w.id})})};return{canRestack:B,isRestacked:f,restacks:y,menuItems:[f?Object(e.h)(v.d,{icon:Object(e.h)(s.a,null),onClick:C},"Undo restack"):Object(e.h)(v.d,{icon:Object(e.h)(a.default,null),onClick:L},"Restack"),Object(e.h)(v.d,{icon:Object(e.h)(c.default,null),onClick:R},"Restack with a note")]}}},,function($,n){function t(e,s){for(var o=-1,a=s.length,c=e.length;++o<a;)e[c+o]=s[o];return e}$.exports=t},function($,n){function t(e){for(var s=-1,o=e==null?0:e.length,a=0,c=[];++s<o;){var l=e[s];l&&(c[a++]=l)}return c}$.exports=t},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{fill:d="var(--color-accent-orange)"}=i,b=O(i,["fill"]);return Object(e.h)(s.a,v(g({},b),{fill:d,name:"UserBadgeIcon",svgParams:{viewBox:"0 0 40 40",height:40,width:40}}),Object(e.h)("path",{d:"M17.4385 1.2681C19.3988 0.456149 21.6012 0.45615 23.5615 1.2681L31.5807 4.58976C33.5409 5.40172 35.0983 6.95911 35.9102 8.91933L39.2319 16.9385C40.0439 18.8988 40.0439 21.1012 39.2319 23.0615L35.9102 31.0807C35.0983 33.0409 33.5409 34.5983 31.5807 35.4102L23.5615 38.7319C21.6012 39.5439 19.3988 39.5439 17.4385 38.7319L9.41933 35.4102C7.45911 34.5983 5.90171 33.0409 5.08976 31.0807L1.7681 23.0615C0.956149 21.1012 0.95615 18.8988 1.7681 16.9385L5.08976 8.91933C5.90172 6.95911 7.45911 5.40171 9.41933 4.58976L17.4385 1.2681Z",fill:d,stroke:"transparent"}),Object(e.h)("path",{d:"M27.1666 15L17.9999 24.1667L13.8333 20",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}))};n.default=u},,function($,n){function t(e,s,o,a){for(var c=e.length,l=o+(a?1:-1);a?l--:++l<c;)if(s(e[l],l,e))return l;return-1}$.exports=t},function($,n){n.generateVisitIdHelper=(t,{utm_source:e}={})=>{const s={id:t(),timestamp:new Date};return e&&(s.utm_source=e),s}},function($,n,t){"use strict";t.d(n,"a",function(){return a});var e=t(0),s=t(9),o=t.n(s);function a({array:c,limit:l,formatter:p=v=>v,restWord:h="other",showRestCount:m=!0,pluralizeRest:g=!0}){const v=c.map(p).filter(Boolean).slice(0,l);if(v.length===0)return Object(s.pluralize)(c.length,"people");const O=c.length-v.length;return O>0&&v.push(`${m?O:""} ${h}${O>1&&g?"s":""}`),v.length===1?v[0]:v.length===2?Object(e.h)(e.Fragment,null,v[0]," and ",v[1]):Object(e.h)(e.Fragment,null,v.slice(0,-1).map(u=>Object(e.h)(e.Fragment,null,u,", "))," ","and ",v[v.length-1])}},function($,n,t){"use strict";t.d(n,"a",function(){return S});var e=t(0),s=t(644),o=t(15),a=t.n(o);const c=1653592864;var l=t(3),p=t(116),h=t(26),m=t(7),g=t(51),v=Object.defineProperty,O=Object.defineProperties,u=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,b=(P,D,W)=>D in P?v(P,D,{enumerable:!0,configurable:!0,writable:!0,value:W}):P[D]=W,w=(P,D)=>{for(var W in D||(D={}))i.call(D,W)&&b(P,W,D[W]);if(r)for(var W of r(D))d.call(D,W)&&b(P,W,D[W]);return P},E=(P,D)=>O(P,u(D));function S({user:P,noBase:D}){const W=Object(h.e)(),B=()=>fetch("/api/v1/user/like_nux/seen",{method:"POST"});return()=>{const f="has_seen_like_nux",y=Object(g.getStoredValue)(f),M=c;return y&&P&&!P.has_seen_like_nux?(B(),!1):!P||!P.profile_set_up_at||P.subscription_visibility==="private"||!P.activity_likes_enabled||y||P.has_seen_like_nux||a()((P==null?void 0:P.profile_set_up_at)||0).unix()>M?!1:(Object(m.i)(m.a.LIKE_NUX_SHOWN),Object(g.setStoredValue)(f,!0),B(),W.popToast(N=>Object(e.h)(h.a,E(w({},N),{title:"New: see who's liked a post",body:"Now you can see who's liked a post and visit their profiles. Your own profile won't show up on posts you liked before this change.",buttons:Object(e.h)(e.Fragment,null,Object(e.h)(h.b,{href:Object(l.getReaderProfileUrl)(P,{utm_source:"like_toast",noBase:D})},Object(e.h)(p.c,null,"OK")),Object(e.h)(h.b,{href:Object(l.getEditProfileUrl)({params:{utm_source:"like_toast"}})},Object(e.h)(p.c,{color:"secondary"},"Settings"))),Icon:s.a}))),!0)}}},function($,n,t){"use strict";t.d(n,"b",function(){return he}),t.d(n,"c",function(){return Ee}),t.d(n,"a",function(){return Oe});var e=t(0),s=t(1),o=t(369),a=t.n(o),c=t(619),l=t.n(c),p=t(261),h=t.n(p),m=t(183),g=t.n(m),v=t(202),O=t.n(v),u=t(41),r=t(11),i=t.n(r),d=t(15),b=t.n(d),w=t(3),E=t(8),S=t(17),P=t(46),D=t(188),W=t(47),B=t(6),f=t.n(B),y=t(249);const M=()=>Object(e.h)(N,null,Object(e.h)(y.default,{height:10,stroke:"white"}),"Podcast"),N=({children:ne,className:X})=>Object(e.h)("div",{className:f()("pill",X)},Object(e.h)("span",null,ne));var A=N,L=t(589),C=t(159),R=Object.defineProperty,U=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,V=(ne,X,q)=>X in ne?R(ne,X,{enumerable:!0,configurable:!0,writable:!0,value:q}):ne[X]=q,k=(ne,X)=>{for(var q in X||(X={}))z.call(X,q)&&V(ne,q,X[q]);if(F)for(var q of F(X))G.call(X,q)&&V(ne,q,X[q]);return ne},K=(ne,X)=>U(ne,Z(X)),Y=(ne,X,q)=>new Promise((Ne,Qe)=>{var Ze=Lt=>{try{Ft(q.next(Lt))}catch(rn){Qe(rn)}},tt=Lt=>{try{Ft(q.throw(Lt))}catch(rn){Qe(rn)}},Ft=Lt=>Lt.done?Ne(Lt.value):Promise.resolve(Lt.value).then(Ze,tt);Ft((q=q.apply(ne,X)).next())});const ee=({onClick:ne,checked:X})=>Object(e.h)("div",{className:"select-all"},Object(e.h)("input",{name:"all",type:"checkbox",onInput:ne,checked:X}),Object(e.h)("label",{for:"all",onClick:ne},"Select ",X?"none":"all")),ae=({disabled:ne,onClick:X,children:q})=>Object(e.h)(S.b,{type:"submit",className:"primary xl",disabled:ne,onClick:X},q),he=({isStatic:ne=!1,extraProps:X={},linkType:q=null,discoverable:Ne=null,text:Qe,icon:Ze=!0,onClick:tt=null})=>{const Ft={};q!==null&&(Ft.type=q),Ne!==null&&(Ft.discoverable=Ne);const Lt=Object(w.getFindTwitterPubsUrl)(Ft);return Object(e.h)("div",k({className:"twitter-discover"},X),Object(e.h)("a",K(k({className:"twitter-link",href:Lt},tt&&{onClick:tt}),{native:!0}),Object(e.h)("div",{className:"inner"},Ze&&Object(e.h)(D.default,{stroke:"white",fill:"white",isStatic:ne}),Object(e.h)("span",{className:"twitter-link-text"},Qe||"Find writers I follow"))))},me=({pub:ne,checked:X,onToggle:q,isSubscribed:Ne,author:Qe,screenName:Ze})=>Object(e.h)("li",{className:"linked-pub"},Object(e.h)("div",{className:"linked-pub"},Object(e.h)("div",{className:"photo"},Object(e.h)("div",{className:"subscribed-status"},Object(e.h)("input",{type:"checkbox",checked:X||Ne,disabled:Ne,onInput:()=>q(ne.id)})),Object(e.h)(C.b,{size:60,photo_url:Qe.photo_url}),Object(e.h)("div",{className:"twitter-handle"},Object(e.h)("span",{className:"author"},Qe==null?void 0:Qe.name),Object(e.h)("span",{className:"handle"}," @",Ze))),Object(e.h)("div",{className:"info"},Object(e.h)("div",{className:"publication-row"},Object(e.h)("a",{className:"publication",href:Object(w.updateQuery)(`${Object(w.getBaseUrl)(ne)}/`,{utm_source:"substack",utm_medium:"web",utm_content:"discover-twitter"}),target:"_blank",native:!0},Object(e.h)(L.b,{publication:ne,logo_size:30},Ne?Object(e.h)("div",{className:"subscribed"},Object(e.h)(A,null,"Subscribed")):null)))))),Ye=({result:ne,selectedPubs:X,onToggle:q})=>{var Ne;const{publicationAuthor:Qe,screen_name:Ze,publication_id:tt}=ne,{name:Ft,ownedPublications:Lt}=Qe,rn=O()(Lt,Le=>Le.id),ht=g()(rn,Le=>Le.latestPost[0]?b()(Le.latestPost[0].post_date).toDate():b.a.unix(1).toDate()).reverse(),je=Qe.photo_url||((Ne=Lt.find(Le=>Le.id===tt))==null?void 0:Ne.logo_url);return ht.map(Le=>{const rt=Le.subscriptions.length;return Object(e.h)(me,{author:Qe,screenName:Ze,authorName:Ft,showLogo:je!==Qe.photo_url,pub:Le,checked:X.has(Le.id),onToggle:q,isSubscribed:rt})})},se=({user:ne,freeSignupEmail:X,twitterEmail:q,twitterToken:Ne,onConfirmed:Qe,onSubscribed:Ze,formAction:tt,pubIds:Ft,subscribeToken:Lt,redirect:rn,showDiscover:ht,editable:je,showLogout:Le})=>{const rt=(ne==null?void 0:ne.email)||X||q,[Pe,de]=Object(s.k)(!1),[be,Ie]=Object(s.k)(!0),[ke,Te]=Object(s.k)(rt);Ft?rn=Object(w.updateQuery)(rn,{pubIds:Ft,t:Ne}):rn=Object(w.updateQuery)(rn,{t:Ne,d:be});const x=H=>{const{userExists:le,subscribed:Ce}=H.body;Ce?Ze(Ce):le?le&&(window.location.href=Object(w.pathWithQuery)(`${Object(w.getSubstackUrl)()}/sign-in`,{with_password:!1,email:ke,redirect:rn})):Qe()};return Object(e.h)("div",{className:"twitter-publications container"},Object(e.h)("section",null,Object(e.h)("div",{className:"terms-check"},Object(e.h)(P.g,{onSuccess:H=>x(H),method:"post",action:tt,loading:!1,autoLock:!0},Object(e.h)("input",{name:"t",type:"hidden",value:Ne}),Ft&&Object(e.h)("input",{name:"pubIds",type:"hidden",value:Ft}),Lt&&Object(e.h)("input",{name:"subscribeToken",type:"hidden",value:Lt}),Object(e.h)("input",{name:"email",type:"text",disabled:!je&&rt,value:ke,onInput:H=>Te(H.target.value)}),Object(e.h)("label",null,Object(e.h)("input",{type:"checkbox",checked:Pe,onInput:()=>de(!Pe)}),"I accept the"," ",Object(e.h)("a",{href:"/tos",target:"_blank",native:!0},"Terms of Use")),ht&&Object(e.h)("label",null,Object(e.h)("input",{name:"allow_discover",type:"checkbox",checked:be,onInput:()=>Ie(!Pe)}),"Allow people to find my publications via Twitter"),Le&&Object(e.h)("label",null,Object(e.h)("a",{className:"login-button",href:Object(w.getSignoutUrl)(),native:!0},"Not you?")),Object(e.h)(ae,{disabled:!Pe},"Next \u2192")))))},ie=()=>Object(e.h)("div",{className:"twitter-publications container landing"},Object(e.h)("h2",null,"Thousands of writers and readers are already on Substack"),Object(e.h)("section",null,Object(e.h)("p",null,"Connect with Twitter to find them and subscribe to their publications."," ",Object(e.h)("span",{className:"light"},"(We'll never post to your Twitter without permission or abuse your data.)")),Object(e.h)("div",{className:"banner"},Object(e.h)(he,null)))),Ee=({user:ne,stage:X,twitterEmail:q,freeSignupEmail:Ne,twitterToken:Qe})=>!Qe&&!ne||X=="connect"?Object(e.h)(ie,null):Object(e.h)(Oe,k({},{user:ne,stage:X,twitterEmail:q,freeSignupEmail:Ne,twitterToken:Qe})),Oe=({user:ne,stage:X,twitterEmail:q,freeSignupEmail:Ne,twitterToken:Qe,buttonText:Ze=null,onSignup:tt=null,requireSignup:Ft=!0,needsEmailConfirm:Lt=!0,renderIfNoneFound:rn=null,useProfilePrefix:ht=!1})=>{const[je,Le]=Object(s.k)(null),[rt,Pe]=Object(s.k)(null),[de,be]=Object(s.k)(null),[Ie,ke]=Object(s.k)(null),[Te,x]=Object(s.k)(!Lt),[H,le]=Object(s.k)(null),[Ce,Ue]=Object(s.k)(!1),[Ve,bt]=Object(s.k)(new Set),[yt,Qt]=Object(s.k)(null),tn=Object(w.getQueryItem)("subscribed"),Kn=ht?"/profile":"";tn?tt?tt():(be(tn.split(",")),Object(u.route)("/discover-twitter/success")):X&&X!=="connect"&&!je&&!de&&Object(u.route)("/discover-twitter");const Ot=Xe=>{const gt=new Set(Ve);Ve.has(Xe)?gt.delete(Xe):gt.add(Xe),bt(gt)},lt=Xe=>a()(Xe.map(gt=>{var Tt;return((Tt=gt.publicationAuthor)==null?void 0:Tt.ownedPublications)||[]}));Object(s.d)(()=>Y(void 0,null,function*(){if(!Ce){Ue(!0);try{const Xe=yield i.a.get("/api/v1/twitter/publications"),{results:gt,subscribeToken:Tt,needsConnect:Ut,needsTwitterConfirm:qt}=Xe.body;if(Ut)Object(u.route)("/discover-twitter/connect");else{const sn=lt(gt),_n=new Set(sn.filter(wn=>wn.subscriptions.length===0).map(wn=>wn.id));let Hn;_n.size<=30?Hn=new Set(_n):Hn=new Set,Le(gt),le(!1),Qt(Tt),Pe(_n),bt(Hn),ke(!qt)}}catch(Xe){le(Xe)}Ue(!1)}}),[]);let Be;je&&(je.length>0?Ie?Be=`We found ${je.length} account${je.length>1?"s":""} you follow on Twitter`:Be=`Confirm your email to see ${je.length} account${je.length>1?"s":""} you follow on Twitter`:Ie||(Be="Confirm your email to continue")),X==="confirm"&&(Be="Confirm your email"),de&&(Be="Success!");const _e=je?lt(je):null,Ae=()=>{x(!0),ke(!0)},fe=()=>Y(void 0,null,function*(){Ue(!0);try{const Xe=yield i.a.post("/api/v1/twitter/subscribe").send({pubIds:[...Ve].join(","),t:Qe,subscribeToken:yt});if(tt)tt();else{const{subscribed:gt}=Xe.body;be(gt),Object(u.route)("/discover-twitter/success")}}catch(Xe){console.error("error subscribing",Xe)}Ue(!1)}),ft=Xe=>{be(Xe),Object(u.route)("/discover-twitter/success")},nt=Xe=>{let gt;Xe?gt=new Set(rt):gt=new Set,bt(gt)},ct=()=>{!Lt||Te?fe():Object(u.route)("/discover-twitter/confirm")};return Object(e.h)("div",{className:"twitter-publications pub-list"},Object(e.h)("h2",{className:X},Be),Ce&&Object(e.h)("p",{className:"loading"},"Loading..."),H&&Object(e.h)(e.Fragment,null,Object(e.h)("p",{className:"error"},"Sorry, there was an error getting your results!"),Object(e.h)("p",{className:"error"},Object(E.getNetworkErrorMessage)(H)),Object(e.h)("div",{className:"banner"},Object(e.h)(he,null))),Object(e.h)(u.default,null,je&&!de&&Ie&&!Ce&&Object(e.h)($e,{path:`${Kn}/discover-twitter`,results:je,selectedPubs:Ve,subscribablePubs:rt,onToggleChecked:Ot,onToggleAll:nt,onNext:ct,loading:Ce,buttonText:Ze,requireSignup:Ft,renderIfNoneFound:rn}),Ie==!1&&Object(e.h)(se,{path:`${Kn}/discover-twitter`,formAction:"/api/v1/twitter/confirm",redirect:"/api/v1/twitter/continue-confirm",user:ne,onConfirmed:Ae,twitterEmail:q,twitterToken:Qe,freeSignupEmail:Ne,pubIds:[...Ve],showDiscover:!0}),!Te&&Object(e.h)(se,{path:`${Kn}/discover-twitter/confirm`,redirect:"/api/v1/twitter/continue-subscribe",formAction:"/api/v1/twitter/subscribe",user:ne,onSubscribed:ft,twitterEmail:q,twitterToken:Qe,freeSignupEmail:Ne,pubIds:[...Ve],subscribeToken:yt,editable:!1,showLogout:!0}),je&&de&&Object(e.h)(ue,{path:`${Kn}/discover-twitter/success`,user:ne,subscribed:de,pubs:_e,results:je})))},ce=({pub:ne,result:X})=>{const{hero_text:q,stripeAccount:Ne,logo_url:Qe}=ne,{screen_name:Ze,publicationAuthor:{name:tt,photo_url:Ft}}=X,Lt=Ne==null?void 0:Ne.plans;return Object(e.h)("li",{className:"linked-pub subscribed"},Object(e.h)("div",{className:"linked-pub"},Object(e.h)("div",{className:"photo"},Object(e.h)(C.b,{size:60,photo_url:Qe||Ft})),Object(e.h)("div",{className:"info"},Object(e.h)("div",{className:"publication-row"},Object(e.h)("div",{className:"publication"},Object(e.h)("div",{className:"name"},"@",Ze," - ",tt),Object(e.h)("div",{className:"description"},q)),Object(e.h)("div",null,Lt&&Object(e.h)(W.a,{className:"outline small button",href:`${Object(w.getBaseUrl)(ne)}/subscribe`,target:"_blank"},"Upgrade"))))))},ue=({subscribed:ne,pubs:X,results:q})=>{const Ne=O()(X.filter(Lt=>ne.find(rn=>rn===Lt.subdomain)),Lt=>Lt.id),[Qe,Ze]=h()(Ne,Lt=>{var rn;return(rn=Lt.stripeAccount)==null?void 0:rn.plans}),tt=[...Qe,...Ze].length>1,Ft=Qe.length>1;return Object(e.h)("ul",null,Object(e.h)("div",{className:"sign-up"},Qe.length>0?Object(e.h)(e.Fragment,null,Ft?`${Qe.length} of the newsletters`:tt?"One of the newsletters":"The newsletter"," ","you subscribed to ",Ft?"have":"has"," a paid version. You can upgrade"," ",Ft?"those subscriptions":"that subscription"," now or later."):`You're subscribed to the free version of ${tt?"these newsletters":"this newsletter"}.  Happy reading!`),[...Qe,...Ze].map(Lt=>{const rn=q.find(ht=>ht.screen_name===Lt.twitterAccount.screen_name);return rn?Object(e.h)(ce,{pub:Lt,result:rn}):null}))},pe=({onNext:ne})=>Object(e.h)("div",null,Object(e.h)("ul",null,Object(e.h)("p",null,"It doesn't appear anyone you follow on Twitter has a Substack yet. We'll let you know if that changes."),Object(e.h)(W.a,{className:"primary button",onClick:()=>{ne()}},"Continue"))),$e=({results:ne,selectedPubs:X,onNext:q,onToggleChecked:Ne,onToggleAll:Qe,subscribablePubs:Ze,loading:tt,buttonText:Ft,requireSignup:Lt,renderIfNoneFound:rn})=>{if(ne.length===0)return rn||Object(e.h)(pe,{onNext:q});const ht=g()(ne,Ie=>{var ke;let Te;return Ie.publicationAuthor.ownedPublications?Te=l()(Ie.publicationAuthor.ownedPublications,x=>x.latestPost[0]?b()(x.latestPost[0].post_date).toDate():null):Te=null,(Te==null?void 0:Te.latestPost[0])?b()((ke=Te.latestPost[0])==null?void 0:ke.post_date).toDate():b.a.unix(1).toDate()}).reverse(),[je,Le]=h()(ht,Ie=>(Ie.publicationAuthor.ownedPublications||[]).some(ke=>ke.subscriptions.length===0)),rt=Ze.size===X.size,Pe=()=>{Qe(!rt)},de=(!Lt||X.size>0)&&!tt,be=!Lt||Ze.size>0?Object(e.h)(ae,{onClick:q,disabled:!de},Ft?(X.size>0?"Subscribe and ":"")+Ft:"Sign up \u2192"):null;return Object(e.h)("div",null,Object(e.h)("section",{className:"sign-up"},"Subscribe to free newsletters from the people you already follow on Twitter"),Object(e.h)("ul",null,(!Lt||Ze.size>0)&&Object(e.h)(e.Fragment,null,(Ze.size>3||!Lt)&&be,Object(e.h)("li",null,Ze.size<30&&Object(e.h)(ee,{checked:rt,onClick:Pe}))),[...je,...Le].map(Ie=>Object(e.h)(Ye,{result:Ie,selectedPubs:X,onToggle:Ne})),be))}},function($,n,t){var e=t(231),s=t(515),o=t(516);function a(c){var l=-1,p=c==null?0:c.length;for(this.__data__=new e;++l<p;)this.add(c[l])}a.prototype.add=a.prototype.push=s,a.prototype.has=o,$.exports=a},function($,n){function t(e,s){return e.has(s)}$.exports=t},function($,n,t){var e=t(114),s=t(84),o=e(s,"Set");$.exports=o},function($,n,t){var e=t(109),s=t(143),o=0/0,a=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,p=/^0o[0-7]+$/i,h=parseInt;function m(g){if(typeof g=="number")return g;if(s(g))return o;if(e(g)){var v=typeof g.valueOf=="function"?g.valueOf():g;g=e(v)?v+"":v}if(typeof g!="string")return g===0?g:+g;g=g.replace(a,"");var O=l.test(g);return O||p.test(g)?h(g.slice(2),O?2:8):c.test(g)?o:+g}$.exports=m},function($,n,t){"use strict";var e=t(697),s=t.n(e),o=t(387),a=t.n(o),c=t(678),l=t.n(c),p=t(698),h=t.n(p),m=t(195),g=t.n(m),v=t(97),O=t(98),u=t(113),r=t.n(u),i=t(99),d=t(106),b=t(70),w=t(2),E=t(250),S=t(30),P=t(352),D=t.n(P),W=t(199),B=t(140),f=t(680),y=t.n(f),M=t(353),N=t.n(M),A=t(434),L=t(248);function C(F){var z=R();return function(){var V=Object(b.a)(F),k;if(z){var K=Object(b.a)(this).constructor;k=Reflect.construct(V,arguments,K)}else k=V.apply(this,arguments);return Object(d.a)(this,k)}}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}var U=function(F){Object(i.a)(G,F);var z=C(G);function G(V){var k;return Object(v.a)(this,G),k=z.call(this,V),k.createEmotionCache=function(K){return Object(L.a)({nonce:K})},k.createEmotionCache=Object(E.a)(k.createEmotionCache),k}return Object(O.a)(G,[{key:"render",value:function(){var k=this.createEmotionCache(this.props.nonce);return w.default.createElement(S.a,{value:k},this.props.children)}}]),G}(w.Component),Z=Object(A.a)(W.a);n.a=Z},function($,n,t){"use strict";t.r(n),t.d(n,"LucideBookmark",function(){return u});var e=t(0),s=t(647),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));function u(r){return Object(e.h)(o.a,O(v({},r),{name:"LucideBookmark",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}))}n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PinIconSmall",svgParams:{height:16,width:14}}),Object(e.h)("path",{d:"M7 1.00006L10 1.00006C10.5523 1.00006 11.0846 1.47946 10.8452 1.97714C10.6681 2.3451 10.2927 2.75194 9.5 3.17301L10 7.51891C10.7819 7.7681 11.949 8.31222 12.9204 9.21856C13.4827 9.74324 13.0402 10.561 12.2711 10.561H7"}),Object(e.h)("path",{d:"M7 1.00006L4 1.00006C3.44772 1.00006 2.91538 1.47946 3.15482 1.97714C3.33185 2.3451 3.70727 2.75194 4.5 3.17301L4 7.51891C3.2181 7.7681 2.05103 8.31222 1.07961 9.21856C0.517263 9.74324 0.959808 10.561 1.72891 10.561H7"}),Object(e.h)("path",{d:"M7 10.561L7 15","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PlayIconRound",svgParams:{height:24,width:24}}),Object(e.h)("path",{className:"outer-circle",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{className:"inner-triangle",d:"M10 8L16 12L10 16V8Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return L});var e=t(0),s=t(6),o=t.n(s),a=t(126),c=t.n(a),l=t(811),p=t(16),h=t(212),m=t(4),g=t(10),v=t(71),O=t(49),u=t(556),r=t(452),i=t(819),d=t(58),b=t(60),w=t(410),E=t(190),S=t(53);function P({attachment:V,readOnly:k}){const K=Object(O.b)(),{postSelection:Y,post:ee,publication:ae,author:he}=V,me=he!=null?he:Object(d.getPostAuthor)(ae,ee),Ye=Object(w.a)({publication:ae}),se=Object(e.h)(v.a,{size:36,user:me});return Object(e.h)(m.b,{className:S.a.quote,as:k?"div":"a",border:"detail",radius:12,href:k?void 0:Object(p.getPostUrl)(ae,ee,{noBase:!K,feedViewer:!K,urlParams:{selection:Y.id}})},Object(e.h)(m.b,{padding:{mobile:12,desktop:16},borderBottom:"detail"},Object(e.h)(g.b,{font:"serif",className:o()(S.a.quoteText,K&&S.a.mobile)},"\u201C",D(Y.text),"\u201D")),Object(e.h)(m.a,{className:S.a.quoteBottom,alignItems:"center",paddingX:K?12:16,paddingY:K?8:12,gap:12},Object(e.h)(m.a,{gap:12,flex:"grow",alignItems:"center",minWidth:0},k?se:Object(e.h)(b.b,{subject:me,dontStopPropagation:!0,utmSource:"feed"},se),Object(e.h)(m.b,{minWidth:0},Object(e.h)(g.b.B4,{weight:"medium",ellipsis:!0},k?me.name:Object(e.h)(E.b,{user:me,ellipsis:!0})),Object(e.h)(g.b.B4,{color:"secondary",ellipsis:!0},ae.name,Ye.showCta&&Object(e.h)(e.Fragment,null," \xB7 ",Object(e.h)(E.c,{href:"javascript:void",onClick:Ye.isSubscribed?Ye.unsubscribe:Ye.subscribe},Ye.isSubscribed?"Subscribed":"Subscribe"))))),Object(e.h)(i.a,{size:24,color:"var(--color-accent-orange)"})))}function D(V){return V.replace(/[“]/g,"\u2018").replace(/[”]/g,"\u2019").replace(/["]/g,"'")}var W=t(559),B=Object.defineProperty,f=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,N=(V,k,K)=>k in V?B(V,k,{enumerable:!0,configurable:!0,writable:!0,value:K}):V[k]=K,A=(V,k)=>{for(var K in k||(k={}))y.call(k,K)&&N(V,K,k[K]);if(f)for(var K of f(k))M.call(k,K)&&N(V,K,k[K]);return V};function L({attachments:V,readOnly:k,isRestack:K}){if(V.length===0)return null;const Y=V.filter(ae=>ae.type==="image"),ee=V.filter(ae=>ae.type!=="image");return Object(e.h)(e.Fragment,null,Y.length>0&&Object(e.h)(h.a,{readOnly:k,isRestack:K,assets:Y.map(ae=>ae.imageUrl)}),ee.map(ae=>Object(e.h)(C,{attachment:ae,readOnly:k,isRestack:K})))}function C({attachment:V,readOnly:k,isRestack:K}){var Y;return V.type==="missing"?Object(e.h)(U,null):V.type==="image"?Object(e.h)(h.a,{readOnly:k,isRestack:K,assets:[V.imageUrl]}):V.type==="link"?Object(e.h)(z,A({readOnly:k},V.linkMetadata)):V.type==="comment"?Object(e.h)(Z,{readOnly:k,publication:(Y=V.publication)!=null?Y:void 0,post:V.post,comment:V.comment}):V.type==="post"?V.postSelection?Object(e.h)(P,{readOnly:k,attachment:V}):Object(e.h)(r.a,{readOnly:k,publication:V.publication,post:V.post}):V.type==="publication"?Object(e.h)(F,{readOnly:k,publication:V.publication}):Object(e.h)(R,{attachment:V})}function R({attachment:V}){return Object(e.h)(m.a,null)}function U(){return Object(e.h)(m.a,{padding:16},Object(e.h)(g.b.B4,null,"This attachment has been deleted."))}function Z({comment:V,publication:k,readOnly:K}){var Y,ee,ae;const{truncatedBodyJson:he}=Object(W.a)(V,{limit:280});return Object(e.h)(m.b,{className:S.a.post,as:K?"div":"a",bg:"elevated",border:"detail",radius:12,href:K?void 0:Object(p.getFeedCommentUrl)(V.id),padding:12,gap:8},Object(e.h)(m.a,{gap:8,alignItems:"center"},Object(e.h)(v.a,{size:20,user:V.user}),Object(e.h)(m.a,{alignItems:"center",gap:8},Object(e.h)(g.b.B4,{weight:"medium"},K?V.user.name:Object(e.h)(E.a,{user:V.user},V.user.name)),Object(e.h)(G,{comment:V}))),V.body&&Object(e.h)(g.b.B4,{className:S.a.feedCommentBodyInner},V.hidden?k&&Object(e.h)("i",null,"This comment is only visible to paid subscribers of ",k.name):he&&Object(e.h)(u.a,{content:he})),((ee=(Y=V.attachments)==null?void 0:Y.length)!=null?ee:0)>0&&Object(e.h)(L,{isRestack:!0,attachments:(ae=V.attachments)!=null?ae:[]}))}function F({publication:V,readOnly:k}){return Object(e.h)(z,{image:V.logo_url,title:V.name,description:V.hero_text,url:V.base_url,host:V.base_url.replace(/^https?:\/\//,""),readOnly:k})}function z({image:V,title:k,description:K,url:Y,host:ee,readOnly:ae}){const he=Object(O.b)();return Object(e.h)(m.a,{className:S.a.post,padding:12,gap:12,as:ae?"div":"a",bg:"elevated",border:"detail",radius:12,href:ae?void 0:Y,target:"_blank"},Object(e.h)(m.b,{gap:2,flex:"grow",minWidth:0},Object(e.h)(g.b.Meta,{color:"secondary",ellipsis:!0},ee),he?Object(e.h)(g.b.B4,{clamp:1},k):Object(e.h)(g.b.B3,{clamp:2,weight:"medium"},k),K&&Object(e.h)(g.b.B4,{as:"p",color:"secondary",clamp:he?1:2},K)),V&&Object(e.h)("img",{className:o()(S.a.linkImage,he&&S.a.mobile),src:V}),!V&&Object(e.h)(m.a,{alignItems:"center",justifyContent:"center",radius:8,className:o()(S.a.linkImage,S.a.linkImagePlaceholder,he&&S.a.mobile)},Object(e.h)(l.a,null)))}function G({post:V,comment:k}){return Object(e.h)(g.b.B4,{color:"secondary"},c()((k==null?void 0:k.date)||(V==null?void 0:V.post_date)).fromNowShort())}},function($,n){function t(e){var s=-1,o=Array(e.size);return e.forEach(function(a,c){o[++s]=[c,a]}),o}$.exports=t},function($,n,t){"use strict";t.d(n,"a",function(){return a});var e=t(0),s=t(1);const o=150,a=({children:c,expanded:l,renderWhenCollapsed:p,onEnter:h,flex:m})=>{const g=Object(s.j)(null),[v,O]=Object(s.k)(l?"expanded":"collapsed"),[u,r]=Object(s.k)(null);return Object(s.d)(()=>{l&&v==="collapsed"&&O("startExpanding"),v==="startExpanding"&&g.current&&(r(g.current.offsetHeight),O("expanding"),setTimeout(()=>{O("expanded"),h&&h()},o)),!l&&v==="expanded"&&g.current&&(r(g.current.offsetHeight),O("startCollapsing")),v==="startCollapsing"&&(O("collapsing"),setTimeout(()=>{O("collapsed")},o))},[l,v]),Object(e.h)("div",{style:{height:v==="collapsed"||v==="startExpanding"||v==="collapsing"?0:v==="expanding"||v==="startCollapsing"?u:null,transition:`height ${o}ms ease-in-out`,overflow:v==="expanded"?"visible":"hidden",display:m?"flex":"block",flexDirection:"column"}},Object(e.h)("div",{ref:g,style:{paddingTop:.05,paddingBottom:.05,display:m?"flex":"block",flex:"0 0 auto",flexDirection:"column"}},(v!=="collapsed"||p)&&c))}},function($,n,t){"use strict";t.d(n,"a",function(){return w}),t.d(n,"b",function(){return b});for(var e={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},s={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),a=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),c=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),l=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),p=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),h=o&&(l||+o[1]<57)||c&&l,m=0;m<10;m++)e[48+m]=e[96+m]=String(m);for(var m=1;m<=24;m++)e[m+111]="F"+m;for(var m=65;m<=90;m++)e[m]=String.fromCharCode(m+32),s[m]=String.fromCharCode(m);for(var g in e)s.hasOwnProperty(g)||(s[g]=e[g]);function v(E){var S=h&&(E.ctrlKey||E.altKey||E.metaKey)||(a||p)&&E.shiftKey&&E.key&&E.key.length==1,P=!S&&E.key||(E.shiftKey?s:e)[E.keyCode]||E.key||"Unidentified";return P=="Esc"&&(P="Escape"),P=="Del"&&(P="Delete"),P=="Left"&&(P="ArrowLeft"),P=="Up"&&(P="ArrowUp"),P=="Right"&&(P="ArrowRight"),P=="Down"&&(P="ArrowDown"),P}var O=t(19);const u=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function r(E){let S=E.split(/-(?!$)/),P=S[S.length-1];P=="Space"&&(P=" ");let D,W,B,f;for(let y=0;y<S.length-1;y++){let M=S[y];if(/^(cmd|meta|m)$/i.test(M))f=!0;else if(/^a(lt)?$/i.test(M))D=!0;else if(/^(c|ctrl|control)$/i.test(M))W=!0;else if(/^s(hift)?$/i.test(M))B=!0;else if(/^mod$/i.test(M))u?f=!0:W=!0;else throw new Error("Unrecognized modifier name: "+M)}return D&&(P="Alt-"+P),W&&(P="Ctrl-"+P),f&&(P="Meta-"+P),B&&(P="Shift-"+P),P}function i(E){let S=Object.create(null);for(let P in E)S[r(P)]=E[P];return S}function d(E,S,P=!0){return S.altKey&&(E="Alt-"+E),S.ctrlKey&&(E="Ctrl-"+E),S.metaKey&&(E="Meta-"+E),P&&S.shiftKey&&(E="Shift-"+E),E}function b(E){return new O.Plugin({props:{handleKeyDown:w(E)}})}function w(E){let S=i(E);return function(P,D){let W=v(D),B,f=S[d(W,D)];if(f&&f(P.state,P.dispatch,P))return!0;if(W.length==1&&W!=" "){if(D.shiftKey){let y=S[d(W,D,!1)];if(y&&y(P.state,P.dispatch,P))return!0}if((D.shiftKey||D.altKey||D.metaKey||W.charCodeAt(0)>127)&&(B=e[D.keyCode])&&B!=W){let y=S[d(B,D)];if(y&&y(P.state,P.dispatch,P))return!0}}return!1}}},function($,n){function t(){}$.exports=t},function($,n){function t(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?($.exports=t=function(o){return typeof o},$.exports.default=$.exports,$.exports.__esModule=!0):($.exports=t=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},$.exports.default=$.exports,$.exports.__esModule=!0),t(e)}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=Object.assign||function(E){for(var S=1;S<arguments.length;S++){var P=arguments[S];for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(E[D]=P[D])}return E},s=function(){function E(S,P){for(var D=0;D<P.length;D++){var W=P[D];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(S,W.key,W)}}return function(S,P,D){return P&&E(S.prototype,P),D&&E(S,D),S}}(),o=t(2),a=p(o),c=t(384),l=p(c);function p(E){return E&&E.__esModule?E:{default:E}}function h(E,S){var P={};for(var D in E)S.indexOf(D)>=0||!Object.prototype.hasOwnProperty.call(E,D)||(P[D]=E[D]);return P}function m(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function g(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function v(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var O={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},u=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],r=function(S){return u.forEach(function(P){return delete S[P]}),S},i=function(S,P){P.style.fontSize=S.fontSize,P.style.fontFamily=S.fontFamily,P.style.fontWeight=S.fontWeight,P.style.fontStyle=S.fontStyle,P.style.letterSpacing=S.letterSpacing,P.style.textTransform=S.textTransform},d=typeof window!="undefined"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,b=function(){return d?"_"+Math.random().toString(36).substr(2,12):void 0},w=function(E){v(S,E),s(S,null,[{key:"getDerivedStateFromProps",value:function(D,W){var B=D.id;return B!==W.prevId?{inputId:B||b(),prevId:B}:null}}]);function S(P){m(this,S);var D=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P));return D.inputRef=function(W){D.input=W,typeof D.props.inputRef=="function"&&D.props.inputRef(W)},D.placeHolderSizerRef=function(W){D.placeHolderSizer=W},D.sizerRef=function(W){D.sizer=W},D.state={inputWidth:P.minWidth,inputId:P.id||b(),prevId:P.id},D}return s(S,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(D,W){W.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var D=this.input&&window.getComputedStyle(this.input);!D||(i(D,this.sizer),this.placeHolderSizer&&i(D,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth=="undefined")){var D=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?D=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:D=this.sizer.scrollWidth+2;var W=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;D+=W,D<this.props.minWidth&&(D=this.props.minWidth),D!==this.state.inputWidth&&this.setState({inputWidth:D})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var D=this.props.injectStyles;return d&&D?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var D=[this.props.defaultValue,this.props.value,""].reduce(function(y,M){return y!=null?y:M}),W=e({},this.props.style);W.display||(W.display="inline-block");var B=e({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),f=h(this.props,[]);return r(f),f.className=this.props.inputClassName,f.id=this.state.inputId,f.style=B,a.default.createElement("div",{className:this.props.className,style:W},this.renderStyles(),a.default.createElement("input",e({},f,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:O},D),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:O},this.props.placeholder):null)}}]),S}(o.Component);w.propTypes={className:l.default.string,defaultValue:l.default.any,extraWidth:l.default.oneOfType([l.default.number,l.default.string]),id:l.default.string,injectStyles:l.default.bool,inputClassName:l.default.string,inputRef:l.default.func,inputStyle:l.default.object,minWidth:l.default.oneOfType([l.default.number,l.default.string]),onAutosize:l.default.func,onChange:l.default.func,placeholder:l.default.string,placeholderIsMinWidth:l.default.bool,style:l.default.object,value:l.default.any},w.defaultProps={minWidth:1,injectStyles:!0},n.default=w},function($,n,t){"use strict";var e=t(1);n.a=({root:s=null,threshold:o=0,rootMargin:a}={})=>{if(typeof window=="undefined"||typeof IntersectionObserver=="undefined")return[null,null];const[c,l]=Object(e.k)(null),[p,h]=Object(e.k)(null),m=Object(e.j)(new IntersectionObserver(([g])=>l(g),{root:s,threshold:o,rootMargin:a}));return Object(e.d)(()=>{var g;const v=((g=p==null?void 0:p.base)==null?void 0:g.addEventListener)?p.base:(p==null?void 0:p.addEventListener)?p:null,{current:O}=m;return O.disconnect(),v&&O.observe(v),()=>O.disconnect()},[p]),[h,c]}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"ShareEmailIcon",svgParams:{height:16,width:21}}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.22192 2.20503C2.36754 1.77115 2.78269 1.45455 3.26639 1.45455H17.9332C18.4169 1.45455 18.8321 1.77118 18.9777 2.2051L10.5999 8.02107L2.22192 2.20503ZM2.16639 3.94198V13.4545C2.16639 14.0529 2.66307 14.5455 3.26639 14.5455H17.9332C18.5365 14.5455 19.0332 14.0529 19.0332 13.4545V3.94206L11.0204 9.50462C10.7679 9.67991 10.4318 9.67991 10.1793 9.50462L2.16639 3.94198ZM20.4999 2.55809V13.4545C20.4999 14.8562 19.3465 16 17.9332 16H3.26639C1.85304 16 0.699707 14.8562 0.699707 13.4545V2.54545C0.699707 1.14379 1.85304 0 3.26639 0H17.9332C19.3407 0 20.4904 1.13441 20.4998 2.52818C20.5 2.53816 20.5001 2.54813 20.4999 2.55809Z"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return e});const e={postAuthor:"custom-css-email-post-author",avatar:"custom-css-email-avatar"}},function($,n,t){"use strict";var e=t(0),s=t(633),o=t(268),a=t(388);const c=({audience:l,className:p,size:h=16,isStatic:m,thin:g})=>l==="only_paid"?g?Object(e.h)(a.default,{className:p,height:h,isStatic:m}):Object(e.h)(s.a,{className:p,size:h}):l==="founding"?Object(e.h)(o.default,{className:p,height:h,isStatic:m}):null;n.a=c},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{color:d="#1C110B",strokeWidth:b=1}=i,w=O(i,["color","strokeWidth"]);return Object(e.h)(s.a,v(g({},w),{name:"CaretRightIcon",svgParams:{height:14,width:8,viewBox:"0 0 8 14"}}),Object(e.h)("path",{d:"M1 13L7 7L1 1",stroke:d,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":b}))};n.default=u},function($,n,t){"use strict";t.r(n),t.d(n,"CommunityPostEmbed",function(){return U}),t.d(n,"EmailCommunityPostEmbed",function(){return Z});var e=t(0),s=t(16),o=t(21),a=t(4),c=t(108),l=t(805),p=t(3),h=t(9),m=t(31),g=t(10),v={bubbleStack:"frontend-community-EmailCommunityPostView-module__bubbleStack--3Bnwj",bubble:"frontend-community-EmailCommunityPostView-module__bubble--YkIHc",img:"frontend-community-EmailCommunityPostView-module__img--3BK41",linkImg:"frontend-community-EmailCommunityPostView-module__linkImg--3eanJ",paywallBubble:"frontend-community-EmailCommunityPostView-module__paywallBubble--H9IlM frontend-community-EmailCommunityPostView-module__bubble--YkIHc"},O=Object.defineProperty,u=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(F,z,G)=>z in F?O(F,z,{enumerable:!0,configurable:!0,writable:!0,value:G}):F[z]=G,b=(F,z)=>{for(var G in z||(z={}))r.call(z,G)&&d(F,G,z[G]);if(u)for(var G of u(z))i.call(z,G)&&d(F,G,z[G]);return F};function w({communityPost:F,is_freemail:z,author:G,cta:V,withAttribution:k,attributionText:K,hideReply:Y,truncateBodyAt:ee}){const ae=!F||z&&F.audience==="only_paid";let he=null;return!ae&&F.body&&(he=ee?Object(h.truncateText)(F.body,ee):F.body),Object(e.h)(m.c,{gap:12,verticalAlign:"top"},Object(e.h)(m.a,{src:G.photo_url,size:40}),Object(e.h)(m.d,{gap:4,style:{lineHeight:0}},k&&Object(e.h)(c.a,{isStatic:!0,text:K||`From ${Object(h.possessive)(G.name)} subscriber chat`}),ae?Object(e.h)(S,null):[F.type==="media"&&F.media_assets?F.media_assets.slice(0,1).map(me=>Object(e.h)(P,{key:me.url,asset:me})):F.type==="link"&&Object(e.h)(D,{communityPost:F}),he&&Object(e.h)(E,null,Object(e.h)("span",null,Object(e.h)(g.a,{weight:"bold"},G.name)," ",he))],!Y&&Object(e.h)(E,null,Object(e.h)(m.e,null,Object(e.h)("tr",null,Object(e.h)("td",{align:"left"},Object(e.h)(g.a,{color:"secondary"},"Reply...")),Object(e.h)("td",{align:"right"},Object(e.h)(l.a,{size:20,stroke:"var(--color-secondary}"}))))),V&&Object(e.h)(m.g,{fullWidth:!0,href:V.url},V.text),V&&V.blurb&&Object(e.h)("div",null,Object(e.h)(g.b,{color:"secondary",align:"center",size:14,lineHeight:20},V.blurb))))}function E(F){return Object(e.h)("div",b({className:v.bubble},F))}function S(){return Object(e.h)("div",{className:v.paywallBubble,style:{backgroundImage:`url(${Object(p.cloudinary)("/img/community/paywall-pixels-light.png")})`}},Object(e.h)(g.b.Meta,null,"SUBSCRIBERS ONLY"))}function P({asset:F}){const z=400;return Object(e.h)("img",{className:v.img,width:z,src:Object(p.cloudinary)(F.url,z*2,{crop:"limit",height:z*2})})}function D({communityPost:F}){var z,G;const{link_url_data:V,link_url:k}=F,K=(G=(z=V==null?void 0:V.url)!=null?z:k)!=null?G:"";let Y;try{const ee=new URL(K);Y=`${ee.host}${ee.pathname}${ee.search}${ee.hash}`}catch(ee){Y=K}return Object(e.h)(E,null,Object(e.h)(m.e,{style:{width:"400px"}},Object(e.h)("tr",null,Object(e.h)("td",{align:"left",style:{verticalAlign:"top"}},(V==null?void 0:V.title)&&Object(e.h)(g.b,{font:"serif",lineHeight:24},V.title),Object(e.h)(g.b,{size:13,color:"secondary"},Y)),Object(e.h)("td",{width:"16"}),Object(e.h)("td",{align:"right"},(V==null?void 0:V.image)&&Object(e.h)("img",{className:v.linkImg,src:Object(p.cloudinary)(V.image,72*2,{height:72*2,smartCrop:!0})})))))}var W={container:"frontend-community-CommunityPostEmbed-module__container--25DDW",emailWrapper:"frontend-community-CommunityPostEmbed-module__emailWrapper--3VNnr"},B=Object.defineProperty,f=Object.defineProperties,y=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,L=(F,z,G)=>z in F?B(F,z,{enumerable:!0,configurable:!0,writable:!0,value:G}):F[z]=G,C=(F,z)=>{for(var G in z||(z={}))N.call(z,G)&&L(F,G,z[G]);if(M)for(var G of M(z))A.call(z,G)&&L(F,G,z[G]);return F},R=(F,z)=>f(F,y(z));function U({postId:F}){var z;const{isLoading:G,error:V,result:k}=Object(o.f)({pathname:`/api/v1/community/posts/${F}`,auto:!0,deps:[]}),K=V instanceof o.b&&V.response.status===402&&((z=V.body)==null?void 0:z.status)==="PAID_SUBSCRIPTION_REQUIRED"?V.body:null;return Object(e.h)(a.a,{as:"a",className:W.container,target:"_blank",href:Object(s.getCommunityPostAppLinkUrl)({postId:F,utm_source:"thread_embed"})},K?Object(e.h)(c.c,{author:K.user}):V?"Error":k&&Object(e.h)(c.d,{author:k.user,communityPost:k.communityPost,withAttribution:!0}))}function Z(F){const{postId:z}=F;return Object(e.h)("a",{className:W.emailWrapper,href:Object(s.getCommunityPostAppLinkUrl)({postId:z,utm_source:"thread_embed",modal:"1"})},Object(e.h)("div",{className:W.container},Object(e.h)(w,R(C({},F),{withAttribution:!0}))))}},function($,n,t){"use strict";t.r(n),t.d(n,"Poll",function(){return rt}),t.d(n,"StaticPoll",function(){return Pe});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(229),l=t(817),p=t(441),h=t(818),m=t(633),g=t(11),v=t.n(g),O=t(15),u=t.n(O),r=t(3),i=t(9),d;const b=typeof window!="undefined"?(d=window._preloads)==null?void 0:d.freeSignup:!1,w=Object(e.createContext)(b);w.displayName="FreeSignupContext";function E(){return Object(s.b)(w)}var S;const P=typeof window!="undefined"?(S=window._preloads)==null?void 0:S.pub:null,D=Object(e.createContext)(P);D.displayName="PubContext";function W(){return Object(s.b)(D)}var B=t(38),f=t(31),y=t(8),M=t(50),N=t(4),A=t(36),L=t(10),C=t(26),R=t(115),U=t(7),Z=t(46),F=t(44),z=Object.defineProperty,G=Object.defineProperties,V=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,ee=(de,be,Ie)=>be in de?z(de,be,{enumerable:!0,configurable:!0,writable:!0,value:Ie}):de[be]=Ie,ae=(de,be)=>{for(var Ie in be||(be={}))K.call(be,Ie)&&ee(de,Ie,be[Ie]);if(k)for(var Ie of k(be))Y.call(be,Ie)&&ee(de,Ie,be[Ie]);return de},he=(de,be)=>G(de,V(be));class me extends F.a{constructor(be,Ie){super(be,Ie);var ke,Te;this.state.email=(Te=(ke=this.props.user)==null?void 0:ke.email)!=null?Te:null}onOpen(){Object(U.i)(U.a.POLL_SIGNUP_DIALOG_PRESENTED,{poll_id:this.props.pollId,post_id:this.props.post.id})}onClose(){Object(U.i)(U.a.POLL_SIGNUP_DIALOG_CLOSED,{poll_id:this.props.pollId,post_id:this.props.post.id})}renderChildren(){const{pub:be,post:Ie,user:ke,audience:Te,pollId:x}=this.props,{email:H}=this.state,le=Te==="only_paid"?"paid subscribers":"subscribers";return Object(e.h)("div",null,Object(e.h)("div",{className:"poll-signup-header"},Object(e.h)("div",{className:"poll-signup-title"},`Subscribe to ${be.name} to vote on this poll`),Object(e.h)("div",{className:"poll-signup-audience"},"Only ",le," can vote on this poll.")),Object(e.h)(Z.g,{method:"post",action:Object(r.pathWithQuery)("/api/v1/free"),loading:!1,autoLock:!0,onSuccess:Ce=>{Object(U.i)(U.a.POLL_SIGNUP_DIALOG_SUBMITTED,{poll_id:x,post_id:Ie.id}),be.plans||be.has_recommendations?document.location.href=Object(r.getSubscribeUrl)(this.props.pub,he(ae({utm_medium:"web",utm_source:"poll-subscribe-modal",utm_content:Ie&&Ie.id,just_signed_up:!0,requires_confirmation:Ce.body.requires_confirmation?"true":""},Ce.body.subscription_id&&{subscription_id:Ce.body.subscription_id}),{next:Object(r.getPostUrl)(be,Ie)})):document.location.reload()}},Object(e.h)("div",{className:"poll-signup"},Object(e.h)("input",{placeholder:"Type your email...",type:"email",name:"email","aria-label":"Email",value:H,disabled:!!ke.email,tabIndex:0,onChange:Ce=>{this.setState({email:Ce.target.value})}}),Object(e.h)("input",{type:"hidden",name:"source",value:"poll-subscribe-modal"})),Object(e.h)("div",{id:"error-container"}),Object(e.h)("button",{className:"button primary",type:"submit"},"Subscribe")),!ke.email&&Object(e.h)("div",{className:"poll-signin-prompt"},"Already a subscriber?"," ",Object(e.h)("a",{className:"poll-signin-link",href:Object(r.getSigninUrl)({for_pub:be.subdomain,redirect:Object(r.getPostUrl)(be,Ie)})},"Sign in")))}}var Ye=t(309),se=t(205),ie=Object.defineProperty,Ee=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,$e=(de,be,Ie)=>be in de?ie(de,be,{enumerable:!0,configurable:!0,writable:!0,value:Ie}):de[be]=Ie,ne=(de,be)=>{for(var Ie in be||(be={}))ue.call(be,Ie)&&$e(de,Ie,be[Ie]);if(ce)for(var Ie of ce(be))pe.call(be,Ie)&&$e(de,Ie,be[Ie]);return de},X=(de,be)=>Ee(de,Oe(be)),q=(de,be,Ie)=>new Promise((ke,Te)=>{var x=Ce=>{try{le(Ie.next(Ce))}catch(Ue){Te(Ue)}},H=Ce=>{try{le(Ie.throw(Ce))}catch(Ue){Te(Ue)}},le=Ce=>Ce.done?ke(Ce.value):Promise.resolve(Ce.value).then(x,H);le((Ie=Ie.apply(de,be)).next())});const Ne=2,Qe=5,Ze=35,tt=255,Ft=({isExpired:de,isPublished:be,remainingHours:Ie})=>de?"POLL CLOSED":be?Ie>=48?`${Math.floor(Ie/24)} DAYS REMAINING`:Ie>=24?"1 DAY REMAINING":Ie>=2?`${Ie} HOURS REMAINING`:Ie==1?"1 HOUR REMAINING":"LESS THAN 1 HOUR REMAINING":"NOT PUBLISHED",Lt=de=>de>1?`Choice ${de+1} (optional)`:`Choice ${de+1}`,rn=({question:de,expiry:be,audience:Ie,options:ke})=>{const Te=ke.filter(Boolean);if(de.length<1||de.length>255)return"The question must be between 1 and 255 characters long.";if(Te.length<2||Te.length>5)return"Your poll must have 2 to 5 options.";if(Te.some(x=>x.length<1||x.length>50))return"Each option must be between 1 and 50 characters long.";if(["all_subscribers","only_paid"].includes(Ie)){if(![1,24,72,168].includes(be))return"The length of your poll is invalid."}else return"Your poll audience is invalid.";return null},ht=({index:de,text:be,onChange:Ie,onDelete:ke,showDeleteButton:Te,disabled:x})=>Object(e.h)("div",{className:"poll-option-editor"},Object(e.h)("input",{type:"text",onChange:H=>{Ie(de,H.currentTarget.value)},value:be,disabled:x,placeholder:Lt(de),maxLength:Ze}),Object(e.h)("button",{className:a()("poll-remove-option",{"is-hidden":!Te}),onClick:()=>ke(de),disabled:x,tabIndex:Te?void 0:-1},Object(e.h)(c.a,null))),je=({poll:de,isOpen:be,onClose:Ie,onSave:ke,isPublished:Te,totalVotes:x,shouldShowAudiencePicker:H})=>{let le=de.options.map(Un=>Un.label);le.length>1?le.length<Qe&&le.push(""):le=["",""];const{payments_state:Ce}=W()||{},Ue=H&&Ce==="enabled"?"only_paid":"all_subscribers",[Ve,bt]=Object(s.k)(de.question||""),[yt,Qt]=Object(s.k)(le),[tn,Kn]=Object(s.k)(de.expiry||24),[Ot,lt]=Object(s.k)(de.audience||Ue),[Be,_e]=Object(s.k)(!1),[Ae,fe]=Object(s.k)(de.votes_hidden||!1),[ft,nt]=Object(s.k)(null),ct=rn({question:Ve,options:yt,expiry:tn,audience:Ot,votes_hidden:Ae}),Xe=Object(s.a)(()=>{var Un;bt(de.question||""),Qt(((Un=de.options)==null?void 0:Un.map(bn=>bn.label))||["",""]),Kn(de.expiry||24),lt(de.audience||Ue),fe(de.votes_hidden||!1),nt(null),Ie()},[bt,Qt,Kn,lt,de,Ie]),gt=Object(s.a)(({value:Un})=>{["only_paid","all_subscribers"].includes(Un)&&lt(Un)},[lt]),Tt=Ot==="only_paid"?"Only paid subscribers":"All subscribers who can see this post",Ut=Object(s.a)(({value:Un})=>{const bn=Number(Un);[1,24,72,168].includes(bn)&&Kn(bn)},[Kn]),qt=tn===1?"1 hour":tn===24?"1 day":tn===72?"3 days":"1 week",sn=Object(s.a)((Un,bn)=>{const cr=[...yt];cr.splice(Un,1,bn),Un===cr.length-1&&cr.length<Qe&&cr.push(""),Qt(cr)},[yt,Qt]),_n=Object(s.a)(Un=>{if(yt.length<=Ne||Un>=yt.length)return;const bn=[...yt];bn.splice(Un,1),bn[bn.length-1].length&&bn.push(""),Qt(bn)},[yt,Qt]),Hn=Array(Math.max(2,yt.length||0)).fill("").map((Un,bn)=>yt.length>bn?yt[bn]:Un),wn=ft||Te&&`This poll is part of a post that has already been published. If you modify it, ${x} existing ${x===1?"vote":"votes"} will be removed.`;return Object(e.h)(A.a,{className:"poll-editor-modal",isOpen:be,onClose:Ie},Object(e.h)("div",{className:"poll-editor"},Object(e.h)("div",{className:"poll-editor-section question-section"},Object(e.h)("input",{className:"poll-question-editor",type:"text",value:Ve,onChange:Un=>bt(Un.currentTarget.value),placeholder:"Enter your question...",disabled:Be,maxLength:tt})),Object(e.h)("div",{className:"poll-editor-section options-section"},Object(e.h)("div",{className:"poll-options-editor"},Hn.map((Un,bn)=>Object(e.h)(ht,{index:bn,text:Un,onChange:sn,onDelete:_n,disabled:Be,showDeleteButton:Hn.length>Ne&&(bn<Hn.length-1||Un.length>0)})))),Object(e.h)("div",{className:"poll-editor-section length-section"},Object(e.h)("div",{className:"poll-section-title"},"Length"),Object(e.h)(se.a,{options:[{label:"1 hour",value:"1"},{label:"1 day",value:"24"},{label:"3 day",value:"72"},{label:"1 week",value:"168"}],isDisabled:Be,value:{label:qt,value:String(tn)},onChange:Ut})),H&&Ce==="enabled"&&Object(e.h)("div",{className:"poll-editor-section audience-section"},Object(e.h)("div",{className:"poll-section-title"},"Who can vote?"),Object(e.h)(se.a,{options:[{label:"Only paid subscribers",value:"only_paid"},{label:"All subscribers who can see this post",value:"all_subscribers"}],isDisabled:Be,value:{label:Tt,value:Ot},onChange:gt})),Object(e.h)("div",{className:"poll-editor-section vote-visibility-section"},Object(e.h)(R.a,{checked:Ae,onChange:()=>fe(!Ae),label:"Hide the total vote count from readers?",name:"votes-hidden"})),Object(e.h)("div",{className:"poll-editor-section action-section"},wn&&Object(e.h)("div",{className:"edit-warning"},wn),Object(e.h)("div",{className:"action-buttons"},Object(e.h)(M.a,{className:"button btn btn-secondary poll-editor-cancel-button",variant:"secondary",look:"button",onClick:Xe,disabled:Be},"Cancel"),Object(e.h)(Ye.a,{content:ct,className:a()("inverse",{disabled:ct===null})},Object(e.h)(M.a,{className:"button btn btn-primary poll-editor-confirm-button",variant:"primary",look:"button",onClick:()=>q(void 0,null,function*(){_e(!0);try{yield ke({audience:Ot,question:Ve,options:yt.filter(Boolean),expiry:tn,votes_hidden:Ae})}catch(Un){nt("An error occurred while saving this poll.")}_e(!1)}),disabled:ct!==null||Be},"Save"))))))},Le=({id:de,text:be,onVote:Ie,showVotes:ke,currentVotes:Te,totalVotes:x,myVote:H,canVote:le})=>{const Ce=Object(s.a)(()=>q(void 0,null,function*(){de&&(yield Ie(de))}),[de,Ie]),Ue=Math.round(100*(x===0?0:Te/x));return Object(e.h)("div",{className:a()("poll-option",{"show-votes":ke,"hide-votes":!ke,"can-vote":le,"my-vote":H}),onClick:Ce},ke&&Object(e.h)("div",{className:"poll-vote-background",style:{width:`${Ue}%`}}),Object(e.h)("div",{className:"poll-option-background"},Object(e.h)("div",{className:"poll-option-text"},be,ke&&H&&Object(e.h)(l.a,{className:"vote-icon"}))),ke&&Object(e.h)("div",{className:"poll-percentage-text"},Ue,"%"))},rt=({id:de,isEditor:be,post:Ie,pub:ke,isVersionView:Te})=>{var x,H,le;const[Ce,Ue]=Object(s.k)(!1),[Ve,bt]=Object(s.k)(!0),[yt,Qt]=Object(s.k)(null),[tn,Kn]=Object(s.k)(null),[Ot,lt]=Object(s.k)(!0),[Be,_e]=Object(s.k)(Te!=null?Te:!1),Ae=Object(C.e)(),fe={token:void 0,uuid:void 0};if(typeof window!="undefined"&&!be){const mn=Object(r.parseQuery)(window.location.href);if(mn&&mn.token&&(fe.token=mn.token),!fe.token&&((x=window._preloads)==null?void 0:x.original_url)){const Cn=Object(r.parseQuery)(window._preloads.original_url);Cn&&Cn.token&&(fe.token=Cn.token)}}if(typeof window!="undefined"&&!be&&Ie.is_draft){const mn=Object(r.getPostSlug)(window.location.href);mn&&Object(i.isUUID)(mn)&&(fe.uuid=mn)}const ft=Object(B.c)()||{},nt=ne({is_subscribed:!1,is_free_subscribed:!1,is_contributor:!1,is_author:!1,is_admin:!1},ft),{is_subscribed:ct,is_admin:Xe,is_contributor:gt,is_author:Tt}=nt;let{is_free_subscribed:Ut}=nt;E()&&(Ut=!0);const qt=gt||Xe||Tt,sn=u()(),_n=yt&&yt.published_at&&u()(yt.published_at).add(yt.expiry,"hour"),Hn=_n&&_n.diff(sn,"hour"),Un=(yt==null?void 0:yt.audience)==="only_paid"?ct:Ut,bn=yt&&yt.options.some(mn=>mn.my_vote),cr=!!(yt==null?void 0:yt.is_published),fr=cr&&_n&&_n.isBefore(sn),ur=be&&((yt==null?void 0:yt.post_type)!=="adhoc_email"||!cr),er=Object(s.j)(null),jr=!bn&&cr&&!fr&&Un,wt=(yt==null?void 0:yt.total_votes)==1?"1 VOTE":`${yt==null?void 0:yt.total_votes} VOTES`,mt=Ft({isExpired:fr,isPublished:cr,remainingHours:Hn}),Fe=Object(s.a)((...mn)=>q(void 0,[...mn],function*({shouldNotSetLoading:Cn}={shouldNotSetLoading:!1}){Cn||bt(!0);try{const tr=yield v()(`/api/v1/poll/${de}`).query(fe);Qt(tr.body),Kn(null)}catch(tr){Kn("We were unable to load this poll. Please refresh the page.")}bt(!1)}),[de,bt,Qt]);Object(s.d)(()=>{Fe()},[Fe]);const pt=Object(s.a)(mn=>q(void 0,null,function*(){try{yield v.a.put(`/api/v1/poll/${de}`).send(mn)}catch(Cn){return Cn}return Ue(!1),bt(!0),yield Fe(),null}),[de,bt,Fe]),Dt=Object(s.a)(mn=>q(void 0,null,function*(){var Cn;if(!Un&&cr&&!fr&&!ur){(Cn=er.current)==null||Cn.open();return}if(!(ur||!jr||Be)){_e(!0);try{yield v.a.post(`/api/v1/poll/${de}/vote`).send({poll_option_id:mn}).query(fe),Kn(null)}catch(tr){Kn("We were unable to record your vote. Please refresh the page and try again."),_e(!1);return}yield Fe({shouldNotSetLoading:!0}),_e(!1)}}),[ur,jr,Be,_e,de,Fe,Un,cr,fr]),Jt=ur?Array(Math.max(2,((H=yt==null?void 0:yt.options)==null?void 0:H.length)||0)).fill("").map((mn,Cn)=>{var tr;return yt&&((tr=yt.options)==null?void 0:tr.length)>Cn?yt.options[Cn].label:Lt(Cn)}):(le=yt==null?void 0:yt.options)==null?void 0:le.map(mn=>mn.label);if(tn!==null&&!yt)return Object(e.h)("div",{className:"poll-wrapper poll-web"},Object(e.h)("div",{className:"poll-error"},tn));const Gt=be?null:`${Object(r.getPostUrl)(ke,Ie)}#poll-${de}`;return Object(e.h)(N.b,{className:"poll-wrapper poll-web",gap:24},Gt&&Object(e.h)("div",{className:"poll-anchor-target",id:`poll-${de}`},Object(e.h)("div",{className:"poll-anchor-copy-button",onClick:mn=>{!(location==null?void 0:location.href)||(mn.preventDefault(),Object(y.copyToClipboard)(Gt),Ae.popToast(Cn=>Object(e.h)(C.c,X(ne({},Cn),{text:"Link copied",Icon:p.a}))))}},Object(e.h)("a",{href:Gt},Object(e.h)(p.a,{size:20})))),ur&&yt&&Object(e.h)(je,{poll:yt,isOpen:Ce,onClose:()=>{Ue(!1)},isPublished:cr,totalVotes:(yt==null?void 0:yt.total_votes)||0,onSave:pt,shouldShowAudiencePicker:(yt==null?void 0:yt.post_type)!=="adhoc_email"}),!be&&yt&&Object(e.h)(me,{ref:er,noCloseButton:!0,className:"poll-dialog",pub:ke,post:Ie,user:ft,pollId:yt.id,audience:yt.audience}),Ve?Object(e.h)(N.b,{gap:8,paddingY:48,alignItems:"center",justifyContent:"center"},Object(e.h)(L.b.Meta,null,"Loading...")):Object(e.h)(e.Fragment,null,ur&&Object(e.h)("button",{className:"poll-edit",onClick:()=>{Ue(!0)},disabled:Ve},Object(e.h)(h.a,{height:20})),Object(e.h)(N.b,{gap:4},Object(e.h)(N.c,{className:"poll-title",alignItems:"baseline",gap:4},(yt==null?void 0:yt.audience)==="only_paid"?Object(e.h)(e.Fragment,null,Object(e.h)(m.a,{size:16}),Object(e.h)(L.b.Meta,{className:"subscriber-only-poll"},"SUBSCRIBER-ONLY POLL")):Object(e.h)(L.b.Meta,null,"POLL")),Object(e.h)(L.b.H3,{className:"poll-question",color:"pub-primary-text"},(yt==null?void 0:yt.question)||"New Poll")),tn!==null&&Object(e.h)("div",{className:"poll-error"},tn),Object(e.h)(N.b,{gap:12,className:a()("poll-options",{"no-margins":!cr})},Jt.map((mn,Cn)=>{var tr,Zn,At;return Object(e.h)(Le,{id:((tr=yt==null?void 0:yt.options[Cn])==null?void 0:tr.id)||null,text:mn,canVote:!bn&&cr&&!fr&&(!be||(yt==null?void 0:yt.post_type)==="adhoc_email"),onVote:Dt,showVotes:bn||fr||qt&&Ot,totalVotes:(yt==null?void 0:yt.total_votes)||0,currentVotes:((Zn=yt==null?void 0:yt.options[Cn])==null?void 0:Zn.votes)||0,myVote:((At=yt==null?void 0:yt.options[Cn])==null?void 0:At.my_vote)||!1})})),cr&&Object(e.h)(L.b.Meta,{className:"poll-status"},(qt||!yt.votes_hidden)&&`${wt} \xB7 `,mt,qt&&!bn&&!fr&&Object(e.h)(e.Fragment,null," \xB7 ",Object(e.h)("span",{className:"poll-author-visibility-toggle",title:"Only the author, contributors, and admins may view results before voting.",onClick:()=>{lt(!Ot)}},Ot?"SHOW OPTIONS":"SHOW RESULTS")))))},Pe=({id:de,embeddedPolls:be})=>{const Ie=be.find(ke=>ke.id===de);return Ie?Object(e.h)(f.e,{className:"poll-email-wrapper"},Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(f.e,{width:"100%"},Object(e.h)("tr",null,Object(e.h)("td",{className:"poll-header"},(Ie==null?void 0:Ie.audience)==="only_paid"?"SUBSCRIBER-ONLY POLL":"POLL")),Object(e.h)("tr",{className:"poll-question",width:"100%"},Object(e.h)("td",null,Ie.question||"New Poll")),Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(f.e,{className:"poll-options",width:"100%"},Ie.options.map(({label:ke,id:Te},x)=>Object(e.h)("tr",null,Object(e.h)("td",{className:"poll-option",width:"100%"},Object(e.h)("a",{className:"poll-vote-link",href:`%%poll_vote_option_${Te}_url%%`,width:"100%"},Object(e.h)("div",{className:"poll-vote-contents"},ke||Lt(x))))))))))))):Object(e.h)("table",{className:"poll-wrapper"},"Something went wrong.")}},function($,n,t){"use strict";t.r(n),t.d(n,"CommunityChatEmbed",function(){return m}),t.d(n,"EmailCommunityChatEmbed",function(){return g});var e=t(0),s=t(16),o=t(31),a=t(14),c=t(4),l=t(10),p=t(274),h={webContainer:"frontend-community-CommunityChatEmbed-module__webContainer--1s8IH",container:"frontend-community-CommunityChatEmbed-module__container--1kOgY",emailWrapper:"frontend-community-CommunityChatEmbed-module__emailWrapper--3ThaL",text:"frontend-community-CommunityChatEmbed-module__text--2uW9W",title:"frontend-community-CommunityChatEmbed-module__title--3MnjB",button:"frontend-community-CommunityChatEmbed-module__button--14mRw"};function m({pub:O,subdomain:u}){return Object(e.h)(c.b,{className:h.webContainer,alignItems:"center",border:"detail-themed",radius:12,padding:20,gap:16,as:"a",href:v(u),target:"_blank"},Object(e.h)(p.a,{size:"xl",imageUrl:Object(s.cloudinary)(O.author_photo_url),border:!0}),Object(e.h)(c.b,{gap:4,alignItems:"center"},Object(e.h)(l.b.H3,{as:"div",color:"pub-primary-text"},"Join ",O.author_name,"\u2019s subscriber chat"),Object(e.h)(l.b.B4,{color:"pub-secondary-text"},"Available exclusively in the Substack app")),Object(e.h)(c.b,{alignSelf:"stretch"},Object(e.h)(a.a,{priority:"primary-theme",href:v(u)},"Join chat")))}function g({pub:O,subdomain:u}){return Object(e.h)("a",{className:h.emailWrapper,href:v(u)},Object(e.h)("div",{className:h.container},Object(e.h)(o.a,{size:64,src:Object(s.cloudinary)(O.author_photo_url),framed:!0}),Object(e.h)("div",{className:h.text},Object(e.h)(l.b.H3,{className:h.title,as:"div",color:"pub-primary-text"},"Join ",O.author_name,"\u2019s subscriber chat"),Object(e.h)(l.b.B4,{color:"pub-secondary-text"},"Available exclusively in the Substack app")),Object(e.h)(o.f,{tableClassName:h.button},"Join chat")))}function v(O){return Object(s.getPublicationChatAppLinkUrl)({pubKey:O,utm_source:"chat_embed"})}},function($,n,t){"use strict";t.r(n),t.d(n,"MeetingEmbedStatic",function(){return g}),t.d(n,"MeetingEmbed",function(){return v});var e=t(0),s=t(796),o=t(31),a=t(8),c=t(14),l=t(4),p=t(10),h=t(274),m={avatar:"frontend-main-meetings-Embed-module__avatar--hXzex",badge:"frontend-main-meetings-Embed-module__badge--3uldz",container:"frontend-main-meetings-Embed-module__container--3WPne",header:"frontend-main-meetings-Embed-module__header--3DOas",emailButton:"frontend-main-meetings-Embed-module__emailButton--2Rcwl",cta:"frontend-main-meetings-Embed-module__cta--YhEx3"};const g=({avatarUrl:O,name:u,url:r})=>Object(e.h)(o.d,{gap:12,style:{padding:"16px",border:"1px solid #E0E0E0",borderRadius:"8px",margin:"0 auto 20px"}},Object(e.h)(o.c,{gap:12},Object(e.h)(o.a,{src:O,size:40}),Object(e.h)(o.d,null,Object(e.h)(p.b.H4,{size:14,paddingBottom:4,color:"pub-primary-text"},"Book a meeting with ",u),Object(e.h)(p.b.B4,{color:"pub-secondary-text"},"Schedule a meeting"))),Object(e.h)(o.f,{tableClassName:m.emailButton,href:r},"Book meeting")),v=({avatarUrl:O,name:u,url:r})=>Object(e.h)(l.a,{direction:{mobile:"column",desktop:"row"},radius:8,padding:24,alignItems:"center",className:m.container,justifyContent:"space-between"},Object(e.h)(l.c,{className:m.header,gap:16,paddingBottom:{mobile:20,desktop:0}},Object(e.h)(h.a,{className:m.avatar,imageUrl:O,size:"lg",badge:Object(e.h)("div",{className:m.badge},Object(e.h)(s.a,{color:"white",size:12})),badgePosition:"bottom-right"}),Object(e.h)("div",null,Object(e.h)(p.b.H4,{paddingBottom:4,color:"pub-primary-text"},"Book a meeting with ",u),Object(e.h)(p.b.B4,{color:"pub-secondary-text"},"Schedule a meeting"))),Object(e.h)(c.a,{className:m.cta,priority:"primary-theme",onClick:()=>{Object(a.redirect)(r,{newTab:!0})}},"Book meeting"))},function($,n,t){"use strict";t.r(n),t.d(n,"getSize",function(){return O}),t.d(n,"ImageGallery",function(){return b}),t.d(n,"ImageGalleryStatic",function(){return w});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(816),l=t(16),p=t(54),h=t(4),m=t(246),g=t(72),v={imageGallery:"frontend-components-ImageGallery-module__imageGallery--1FA0N",static:"frontend-components-ImageGallery-module__static--3Qwgb",canEdit:"frontend-components-ImageGallery-module__canEdit--Nsi9e",editGalleryWrap:"frontend-components-ImageGallery-module__editGalleryWrap--2eoPQ",editGallery:"frontend-components-ImageGallery-module__editGallery--zYsO-",imageCaption:"frontend-components-ImageGallery-module__imageCaption--y-CHy",image:"frontend-components-ImageGallery-module__image--PYY7P",zoom:"frontend-components-ImageGallery-module__zoom--1nZvk",imageRow:"frontend-components-ImageGallery-module__imageRow--3V892","length-2":"frontend-components-ImageGallery-module__length-2--6Qu32",inbox:"frontend-components-ImageGallery-module__inbox--2bSoE",imageGalleryWrap:"frontend-components-ImageGallery-module__imageGalleryWrap--2c54x",imageWrap:"frontend-components-ImageGallery-module__imageWrap--2M-wN",small:"frontend-components-ImageGallery-module__small--3V1fO",medium:"frontend-components-ImageGallery-module__medium--2lGIJ"};const O=(S,P)=>P===1?"large":P===2||P===4?"medium":P%3==0?"small":P===5||P===7?S<=2?"small":"medium":S<=5?"small":"medium",u={small:237,medium:360,large:728},r=({src:S,size:P,onSelectImage:D,useViewer:W=!1,alt:B})=>{const f=()=>{!W||D()};return Object(e.h)(g.a,{src:S,alt:B,maxWidth:2*u[P],className:a()(v.image,v[P],W&&v.zoom),onClick:f})},i=(S,P="",D="")=>{const W=[];for(const B in S){const f=S[B],{height:y=0,width:M=0}=Object(l.extractDimensionsFromImageUrl)(f.src)||{},N=`(${Number(B)+1} of ${S.length})`,A={src:f.src,height:y,width:M,alt:`${D} ${N}`,title:`${P} ${N}`};W.push({attrs:A})}return W},d=({onEditGallery:S,editGalleryRef:P})=>Object(e.h)(h.a,{justifyContent:"center",alignItems:"center",className:v.editGalleryWrap},Object(e.h)(p.a,{ref:P,noList:!0},Object(e.h)(h.b,{onClick:S,justifyContent:"center",alignItems:"center",className:v.editGallery},Object(e.h)(c.a,{height:20})))),b=({gallery:S={},isEditor:P})=>{const{images:D=[],caption:W,alt:B}=S,f=typeof window!="undefined"&&!window.location.pathname.startsWith("/publish"),[y,M]=Object(s.k)(!1),[N,A]=Object(s.k)(0),L=Object(s.j)(null),C=D.length===1,R=i(D,W),U=G=>{A(G),M(!0)},Z=()=>{document.dispatchEvent(new Event("editSelectedImageGallery"))};if(D.length===0)return null;const F=G=>{var V,k;!P||(G?(V=L.current)==null||V.open():(k=L.current)==null||k.close())},z=E(D);return Object(e.h)("figure",{className:a()(v.imageGallery,P&&v.canEdit),onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1)},P&&S&&Object(e.h)(d,{onEditGallery:Z,editGalleryRef:L}),Object(e.h)(h.b,{gap:8},C?Object(e.h)(r,{src:D[0].src,alt:B,caption:W,size:O(0,1),onSelectImage:()=>U(0),useViewer:f}):z.map(G=>Object(e.h)(h.a,{className:a()(v.imageRow,v[`length-${G.length}`]),gap:8},G.map((V,k)=>Object(e.h)(r,{src:V.src,alt:B,caption:W,size:O(k,D.length),onSelectImage:()=>U(k),useViewer:f})))),W&&Object(e.h)("figcaption",{className:v.imageCaption},W)),Object(e.h)(m.ImageViewerModal,{showModal:y,modalContent:R,onClose:()=>M(!1),step:N}))},w=({gallery:S})=>{if(!S)return null;const{alt:P,staticGalleryImage:D,caption:W}=S;return D?Object(e.h)("div",{className:a()(v.static,v.imageGallery)},Object(e.h)("img",{src:Object(l.cloudinary)(D.src,2*u.large),alt:P}),W&&Object(e.h)("div",{className:a()(v.imageCaption,v.static)},W)):null};function E(S){const P=S.length===4?2:3;let D=[S.slice(0,P)];const W=S.slice(P);return W.length>0&&(D=D.concat(E(W))),D}},function($,n){n.isCouponValid=(t,{is_group:e,is_gift:s,paywallFreeTrialEnabled:o})=>!(!t||!t.valid||t.max_redemptions&&t.max_redemptions<=t.times_redeemed||t.group_only&&!e||t.redeem_by&&new Date(t.redeem_by)<new Date||t.type==="FREE_TRIAL"&&(!o||s||e)),n.isCouponValidForPlan=(t,e)=>!(!t||!e||e.metadata.no_coupons||e.metadata.unlimited_group||e.interval==="forever"||t.yearly_only&&e.interval!=="year"||t.monthly_only&&e.interval!=="month"||t.duration==="repeating"&&(e.interval==="month"&&t.duration_in_months%e.interval_count!=0||e.interval==="year"&&t.duration_in_months%(e.interval_count*12)!=0)||t.amount_off&&t.currency&&t.currency!==e.currency),n.isEmailValidEdu=(t,e)=>{const s=e.filter(c=>c.is_suffix);return e.filter(c=>!c.is_suffix).find(c=>t.split("@").pop().startsWith(c.pattern))||s.find(c=>t.endsWith(c.pattern))},n.isCouponValidForEmail=(t,e,s)=>!(t.edu_only&&!n.isEmailValidEdu(e,s)||t.allowed_suffixes&&!t.allowed_suffixes.split(/, */).find(a=>e.toLowerCase().endsWith(a.toLowerCase()))),n.getDiscountedAmount=(t,e)=>{let s=t.amount;return e&&n.isCouponValidForPlan(e,t)&&(e.percent_off?s=Math.round(s*(1-(e.percent_off_precise||e.percent_off)/100)):e.amount_off&&(s=Math.max(0,s-e.amount_off))),s}},function($,n,t){"use strict";t.d(n,"a",function(){return v});var e=t(0),s=t(8),o=t.n(s);const a="balance-text",c=100,l=10,p=4;function h(O){g(O)&&(O.style.maxWidth="",m(O,O.clientHeight,0,O.clientWidth)),O.classList.add("visible")}function m(O,u,r,i){if(i-r<p){O.clientHeight>u?O.style.maxWidth=`${i}px`:O.style.maxWidth=`${O.scrollWidth+1}px`;return}if(r>=i){O.style.maxWidth=`${i}px`;return}const d=(r+i)/2;O.style.maxWidth=`${d}px`,O.clientHeight>u?m(O,u,d,i):m(O,u,r,d)}function g(O){var u;const r=O.innerHTML,i=O.textContent.split(" "),d=document.createElement("span");d.id="element-first-word",d.textContent=i.shift(),O.innerHTML="",O.appendChild(d),O.appendChild(document.createTextNode(` ${i.join(" ")}`));const b=((u=document.getElementById("element-first-word"))==null?void 0:u.offsetHeight)||d.offsetHeight,w=O.offsetHeight;return O.innerHTML=r,w-l>b}class v extends e.Component{constructor(u,r){super(u,r);this.debouncedRebalance=Object(s.debounce)(()=>this.rebalance(),c)}componentDidMount(){this.rebalance(),typeof window!="undefined"&&window.addEventListener("resize",this.debouncedRebalance,!0)}componentDidUpdate(){this.rebalance()}componentWillUnmount(){typeof window!="undefined"&&window.removeEventListener("resize",this.debouncedRebalance,!0)}shouldComponentUpdate(u){return u.children!==this.props.children}rebalance(){typeof window!="undefined"&&(!this.base||h(this.base))}render({text:u}){return Object(e.h)("span",{className:a,style:{display:"inline-block"}},u)}}},function($,n){var t=Object.prototype;function e(s){var o=s&&s.constructor,a=typeof o=="function"&&o.prototype||t;return s===a}$.exports=e},function($,n,t){"use strict";var e=t(286),s=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var d=[],b=0;b<256;++b)d.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return d}(),c=function(b){for(;b.length>1;){var w=b.pop(),E=w.obj[w.prop];if(o(E)){for(var S=[],P=0;P<E.length;++P)typeof E[P]!="undefined"&&S.push(E[P]);w.obj[w.prop]=S}}},l=function(b,w){for(var E=w&&w.plainObjects?Object.create(null):{},S=0;S<b.length;++S)typeof b[S]!="undefined"&&(E[S]=b[S]);return E},p=function d(b,w,E){if(!w)return b;if(typeof w!="object"){if(o(b))b.push(w);else if(b&&typeof b=="object")(E&&(E.plainObjects||E.allowPrototypes)||!s.call(Object.prototype,w))&&(b[w]=!0);else return[b,w];return b}if(!b||typeof b!="object")return[b].concat(w);var S=b;return o(b)&&!o(w)&&(S=l(b,E)),o(b)&&o(w)?(w.forEach(function(P,D){if(s.call(b,D)){var W=b[D];W&&typeof W=="object"&&P&&typeof P=="object"?b[D]=d(W,P,E):b.push(P)}else b[D]=P}),b):Object.keys(w).reduce(function(P,D){var W=w[D];return s.call(P,D)?P[D]=d(P[D],W,E):P[D]=W,P},S)},h=function(b,w){return Object.keys(w).reduce(function(E,S){return E[S]=w[S],E},b)},m=function(d,b,w){var E=d.replace(/\+/g," ");if(w==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch(S){return E}},g=function(b,w,E,S,P){if(b.length===0)return b;var D=b;if(typeof b=="symbol"?D=Symbol.prototype.toString.call(b):typeof b!="string"&&(D=String(b)),E==="iso-8859-1")return escape(D).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var W="",B=0;B<D.length;++B){var f=D.charCodeAt(B);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||P===e.RFC1738&&(f===40||f===41)){W+=D.charAt(B);continue}if(f<128){W=W+a[f];continue}if(f<2048){W=W+(a[192|f>>6]+a[128|f&63]);continue}if(f<55296||f>=57344){W=W+(a[224|f>>12]+a[128|f>>6&63]+a[128|f&63]);continue}B+=1,f=65536+((f&1023)<<10|D.charCodeAt(B)&1023),W+=a[240|f>>18]+a[128|f>>12&63]+a[128|f>>6&63]+a[128|f&63]}return W},v=function(b){for(var w=[{obj:{o:b},prop:"o"}],E=[],S=0;S<w.length;++S)for(var P=w[S],D=P.obj[P.prop],W=Object.keys(D),B=0;B<W.length;++B){var f=W[B],y=D[f];typeof y=="object"&&y!==null&&E.indexOf(y)===-1&&(w.push({obj:D,prop:f}),E.push(y))}return c(w),b},O=function(b){return Object.prototype.toString.call(b)==="[object RegExp]"},u=function(b){return!b||typeof b!="object"?!1:!!(b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b))},r=function(b,w){return[].concat(b,w)},i=function(b,w){if(o(b)){for(var E=[],S=0;S<b.length;S+=1)E.push(w(b[S]));return E}return w(b)};$.exports={arrayToObject:l,assign:h,combine:r,compact:v,decode:m,encode:g,isBuffer:u,isRegExp:O,maybeMap:i,merge:p}},function($,n,t){"use strict";function e(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(o)}function s(o){return o!==null&&e(o)==="object"}$.exports=s},function($,n,t){var e=t(598);function s(o){var a=o==null?0:o.length;return a?e(o,1):[]}$.exports=s},function($,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return c});var e=t(0),s=t(1);const o=Object(e.createContext)({locale:"en-US"});o.displayName="LocaleContext";function a(){var l;return(l=Object(s.b)(o))==null?void 0:l.locale}function c({value:l,children:p}){const h=Object(s.h)(()=>l,Object.values(l));return Object(e.h)(o.Provider,{value:h},p)}},function($,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return i});var e=t(80),s=t.n(e),o=t(300),a=t.n(o),c=t(3),l=t.n(c),p=t(9),h=t.n(p),m=t(48),g=t(8),v=t.n(g),O=t(396);function u({publication:d,post:b,siteConfigs:w={},twitterCardUrl:E=null,isCommentPage:S=!1,selection:P=null}){const D=(b==null?void 0:b.social_title)||(b==null?void 0:b.title)||d.name,{title:W,description:B}=r(b,d,{isCommentPage:S});let f,y;E?(f=E,y=!0):P?(f=Object(c.getPostSelectionPreviewUrl)(d,b,P),y=!0):[f,y]=i(d,b);const M=S&&b&&b.type!=="thread"&&b.comment_count===0;return Object(g.setMetaData)({title:W,socialTitle:D,searchDescription:b==null?void 0:b.search_engine_description,description:B,image:f,isLargeImage:y,imageHeight:P&&564,imageWidth:P&&1128,seoProps:{noindex:M,noarchive:Boolean(b&&b.post_paywall_content_for_google)},isPodcast:(b==null?void 0:b.type)==="podcast",isVideo:(b==null?void 0:b.type)==="video",slug:b==null?void 0:b.slug,pub:d,post:b,siteConfigs:w})}function r(d,b,{isCommentPage:w=!1}={}){var E,S;const P=(d==null?void 0:d.social_title)||(d==null?void 0:d.title)||b.name;let D,W;d?W=Object(p.getPrintedByline)(b,d):W=Object(m.default)("publication_author_display_override")||((E=Object(o.contributorsIntoAuthorStrings)(b.contributors))==null?void 0:E.owner);const B=W&&!((S=b.name)==null?void 0:S.toLowerCase().includes(W==null?void 0:W.toLowerCase()));(d==null?void 0:d.title)?(D=(d==null?void 0:d.search_engine_title)||P,w&&d.type!=="thread"&&(D=`Comments - ${D}`),`${D} - by ${W}`.length<60&&(W&&B&&(D+=` - by ${W}`),`${D} - ${b.name}`.length<60&&(D+=` - ${b.name}`))):B?D=`${b.name} | ${W} | Substack`:D=`${b.name} | Substack`;let f;return d?f=Object(p.postSocialDescription)(d,b):f=Object(O.b)(b),f=s()(f),{title:D,description:f}}function i(d,b){let w,E;return(b==null?void 0:b.cover_image)?(w=Object(c.cloudinary)(b.cover_image,1200,{height:600,smartCrop:!0,format:"jpg"}),E=!0):d.subdomain==="numlock"?(w=Object(c.cloudinary)("/img/numlock_square.png?v=2",840),E=!1):(w=Object(c.getTwitterSubscribeCardUrl)(d),E=!0),[w,E]}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"RightArrowIcon",svgParams:{height:20,width:20}}),Object(e.h)("path",{d:"M7.5 15L12.5 10L7.5 5","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},,,,function($,n){function t(e,s){for(var o=-1,a=Array(e);++o<e;)a[o]=s(o);return a}$.exports=t},function($,n,t){"use strict";n.__esModule=!0,n.AMPERSAND=n.CLOSEPAREN=n.CLOSEANGLEBRACKET=n.CLOSEBRACKET=n.CLOSEBRACE=n.OPENPAREN=n.OPENANGLEBRACKET=n.OPENBRACKET=n.OPENBRACE=n.WS=n.TLD=n.SYM=n.UNDERSCORE=n.SLASH=n.MAILTO=n.PROTOCOL=n.QUERY=n.POUND=n.PLUS=n.NUM=n.NL=n.LOCALHOST=n.PUNCTUATION=n.DOT=n.COLON=n.AT=n.DOMAIN=n.Base=void 0;var e=t(584),s=t(307),o=(0,e.createTokenClass)();o.prototype={toString:function(){return this.v+""}};function a(R){var U=R?{v:R}:{};return(0,s.inherits)(o,(0,e.createTokenClass)(),U)}var c=a(),l=a("@"),p=a(":"),h=a("."),m=a(),g=a(),v=a(`
`),O=a(),u=a("+"),r=a("#"),i=a(),d=a("mailto:"),b=a("?"),w=a("/"),E=a("_"),S=a(),P=a(),D=a(),W=a("{"),B=a("["),f=a("<"),y=a("("),M=a("}"),N=a("]"),A=a(">"),L=a(")"),C=a("&");n.Base=o,n.DOMAIN=c,n.AT=l,n.COLON=p,n.DOT=h,n.PUNCTUATION=m,n.LOCALHOST=g,n.NL=v,n.NUM=O,n.PLUS=u,n.POUND=r,n.QUERY=b,n.PROTOCOL=i,n.MAILTO=d,n.SLASH=w,n.UNDERSCORE=E,n.SYM=S,n.TLD=P,n.WS=D,n.OPENBRACE=W,n.OPENBRACKET=B,n.OPENANGLEBRACKET=f,n.OPENPAREN=y,n.CLOSEBRACE=M,n.CLOSEBRACKET=N,n.CLOSEANGLEBRACKET=A,n.CLOSEPAREN=L,n.AMPERSAND=C},function($,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return w}),t.d(n,"c",function(){return r}),t.d(n,"d",function(){return O});var e=t(34),s=t(13),o=t(19);const a=["ol",0],c=["ul",0],l=["li",0],p={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs(E){return{order:E.hasAttribute("start")?+E.getAttribute("start"):1}}}],toDOM(E){return E.attrs.order==1?a:["ol",{start:E.attrs.order},0]}},h={parseDOM:[{tag:"ul"}],toDOM(){return c}},m={parseDOM:[{tag:"li"}],toDOM(){return l},defining:!0};function g(E,S){let P={};for(let D in E)P[D]=E[D];for(let D in S)P[D]=S[D];return P}function v(E,S,P){return E.append({ordered_list:g(p,{content:"list_item+",group:P}),bullet_list:g(h,{content:"list_item+",group:P}),list_item:g(m,{content:S})})}function O(E,S=null){return function(P,D){let{$from:W,$to:B}=P.selection,f=W.blockRange(B),y=!1,M=f;if(!f)return!1;if(f.depth>=2&&W.node(f.depth-1).type.compatibleContent(E)&&f.startIndex==0){if(W.index(f.depth-1)==0)return!1;let A=P.doc.resolve(f.start-2);M=new s.NodeRange(A,A,f.depth),f.endIndex<f.parent.childCount&&(f=new s.NodeRange(W,P.doc.resolve(B.end(f.depth)),f.depth)),y=!0}let N=Object(e.findWrapping)(M,E,S,f);return N?(D&&D(u(P.tr,f,N,y,E).scrollIntoView()),!0):!1}}function u(E,S,P,D,W){let B=s.Fragment.empty;for(let A=P.length-1;A>=0;A--)B=s.Fragment.from(P[A].type.create(P[A].attrs,B));E.step(new e.ReplaceAroundStep(S.start-(D?2:0),S.end,S.start,S.end,new s.Slice(B,0,0),P.length,!0));let f=0;for(let A=0;A<P.length;A++)P[A].type==W&&(f=A+1);let y=P.length-f,M=S.start+P.length-(D?2:0),N=S.parent;for(let A=S.startIndex,L=S.endIndex,C=!0;A<L;A++,C=!1)!C&&Object(e.canSplit)(E.doc,M,y)&&(E.split(M,y),M+=2*y),M+=N.child(A).nodeSize;return E}function r(E){return function(S,P){let{$from:D,$to:W,node:B}=S.selection;if(B&&B.isBlock||D.depth<2||!D.sameParent(W))return!1;let f=D.node(-1);if(f.type!=E)return!1;if(D.parent.content.size==0&&D.node(-1).childCount==D.indexAfter(-1)){if(D.depth==3||D.node(-3).type!=E||D.index(-2)!=D.node(-2).childCount-1)return!1;if(P){let A=s.Fragment.empty,L=D.index(-1)?1:D.index(-2)?2:3;for(let F=D.depth-L;F>=D.depth-3;F--)A=s.Fragment.from(D.node(F).copy(A));let C=D.indexAfter(-1)<D.node(-2).childCount?1:D.indexAfter(-2)<D.node(-3).childCount?2:3;A=A.append(s.Fragment.from(E.createAndFill()));let R=D.before(D.depth-(L-1)),U=S.tr.replace(R,D.after(-C),new s.Slice(A,4-L,0)),Z=-1;U.doc.nodesBetween(R,U.doc.content.size,(F,z)=>{if(Z>-1)return!1;F.isTextblock&&F.content.size==0&&(Z=z+1)}),Z>-1&&U.setSelection(o.Selection.near(U.doc.resolve(Z))),P(U.scrollIntoView())}return!0}let y=W.pos==D.end()?f.contentMatchAt(0).defaultType:null,M=S.tr.delete(D.pos,W.pos),N=y?[null,{type:y}]:void 0;return Object(e.canSplit)(M.doc,D.pos,2,N)?(P&&P(M.split(D.pos,2,N).scrollIntoView()),!0):!1}}function i(E){return function(S,P){let{$from:D,$to:W}=S.selection,B=D.blockRange(W,f=>f.childCount>0&&f.firstChild.type==E);return B?P?D.node(B.depth-1).type==E?d(S,P,E,B):b(S,P,B):!0:!1}}function d(E,S,P,D){let W=E.tr,B=D.end,f=D.$to.end(D.depth);B<f&&(W.step(new e.ReplaceAroundStep(B-1,f,B,f,new s.Slice(s.Fragment.from(P.create(null,D.parent.copy())),1,0),1,!0)),D=new s.NodeRange(W.doc.resolve(D.$from.pos),W.doc.resolve(f),D.depth));const y=Object(e.liftTarget)(D);if(y==null)return!1;W.lift(D,y);let M=W.mapping.map(B,-1)-1;return Object(e.canJoin)(W.doc,M)&&W.join(M),S(W.scrollIntoView()),!0}function b(E,S,P){let D=E.tr,W=P.parent;for(let R=P.end,U=P.endIndex-1,Z=P.startIndex;U>Z;U--)R-=W.child(U).nodeSize,D.delete(R-1,R+1);let B=D.doc.resolve(P.start),f=B.nodeAfter;if(D.mapping.map(P.end)!=P.start+B.nodeAfter.nodeSize)return!1;let y=P.startIndex==0,M=P.endIndex==W.childCount,N=B.node(-1),A=B.index(-1);if(!N.canReplace(A+(y?0:1),A+1,f.content.append(M?s.Fragment.empty:s.Fragment.from(W))))return!1;let L=B.pos,C=L+f.nodeSize;return D.step(new e.ReplaceAroundStep(L-(y?1:0),C+(M?1:0),L+1,C-1,new s.Slice((y?s.Fragment.empty:s.Fragment.from(W.copy(s.Fragment.empty))).append(M?s.Fragment.empty:s.Fragment.from(W.copy(s.Fragment.empty))),y?0:1,M?0:1),y?0:1)),S(D.scrollIntoView()),!0}function w(E){return function(S,P){let{$from:D,$to:W}=S.selection,B=D.blockRange(W,N=>N.childCount>0&&N.firstChild.type==E);if(!B)return!1;let f=B.startIndex;if(f==0)return!1;let y=B.parent,M=y.child(f-1);if(M.type!=E)return!1;if(P){let N=M.lastChild&&M.lastChild.type==y.type,A=s.Fragment.from(N?E.create():null),L=new s.Slice(s.Fragment.from(E.create(null,s.Fragment.from(y.type.create(null,A)))),N?3:1,0),C=B.start,R=B.end;P(S.tr.step(new e.ReplaceAroundStep(C-(N?3:1),R,C,R,L,1,!0)).scrollIntoView())}return!0}}},function($,n,t){"use strict";t.d(n,"a",function(){return s});var e=t(41);function s(o,a,{native:c=!1,newTab:l=!1}={}){o.defaultPrevented||(o.preventDefault(),c?l||o.metaKey||o.ctrlKey?Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener",href:a}).click():window.location.assign(a):Object(e.route)(a))}},,function($,n,t){var e=t(1067),s=t(911),o=s(function(a,c){return a==null?{}:e(a,c)});$.exports=o},function($,n,t){"use strict";t.d(n,"a",function(){return g});var e=t(0),s=t(6),o=t.n(s),a=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(u,r,i)=>r in u?a(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,m=(u,r)=>{for(var i in r||(r={}))l.call(r,i)&&h(u,i,r[i]);if(c)for(var i of c(r))p.call(r,i)&&h(u,i,r[i]);return u};const g=u=>u.alignment==="center"?Object(e.h)(O,m({},u)):Object(e.h)(v,m({},u)),v=({primaryButton:u,secondaryButton:r,destructiveButton:i,includeDivider:d,className:b})=>Object(e.h)("div",{className:o()("tw-flex tw-justify-end tw-gap-2 tw-p-4",{"tw-shadow-detail-inset":d},b)},i&&Object(e.cloneElement)(i,{className:o()("tw-mr-auto",i.props.className)}),r,u),O=({includeDivider:u,primaryButton:r,secondaryButton:i,className:d})=>Object(e.h)("div",{className:o()("tw-flex tw-flex-col tw-gap-2 tw-py-4 tw-px-4",{"tw-shadow-detail-inset":u},d)},r,i)},function($,n,t){var e=t(442),s=t(401),o=Object.prototype,a=o.propertyIsEnumerable,c=Object.getOwnPropertySymbols,l=c?function(p){return p==null?[]:(p=Object(p),e(c(p),function(h){return a.call(p,h)}))}:s;$.exports=l},function($,n,t){if(!1)var e,s;else $.exports=t(681)()},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{fill:d}=i,b=O(i,["fill"]);return Object(e.h)(s.a,v(g({},b),{name:"CheckboxCheckmarkIcon",svgParams:{viewBox:"0 0 16 13",height:16,width:13,fill:d||"white"}}),Object(e.h)("path",{d:"M5.71444 12.6276L0 6.9132L1.61147 5.30173L5.71444 9.39327L14.389 0.71875L16.0004 2.34165L5.71444 12.6276Z",stroke:d||"white"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"AuthorBadgeIcon",svgParams:{height:15,width:12,viewBox:"0 0 12 15"}}),Object(e.h)("path",{d:"M3.50002 2.58453C3.33335 3.58454 2.50001 5.58455 1 7.08456L6 14.5","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("circle",{cx:"6.00019",cy:"8.58503",r:"1.00001","stroke-width":"1"}),Object(e.h)("path",{d:"M3 0.5V2.58469H9.00004V0.5","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M8.49998 2.58453C8.66665 3.58454 9.49999 5.58455 11 7.08456L6 14.5","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M6.00012 9.58484L6.00012 14.5849","stroke-width":"1"}));n.default=O},function($,n){function t(){return $.exports=t=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},$.exports.default=$.exports,$.exports.__esModule=!0,t.apply(this,arguments)}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{color:d="#262626"}=i,b=O(i,["color"]);return Object(e.h)(s.a,v(g({},b),{name:"LockThinIcon",svgParams:{height:16,width:16}}),Object(e.h)("path",{class:"lock-shackle",d:"M5 6L5 3.9C5 2.57452 6.11929 1.5 7.5 1.5C8.88071 1.5 10 2.57452 10 3.9V6",stroke:d}),Object(e.h)("path",{class:"lock-body",d:"M2 7.5C2 6.94772 2.44772 6.5 3 6.5H12C12.5523 6.5 13 6.94772 13 7.5V12.5C13 13.0523 12.5523 13.5 12 13.5H3C2.44771 13.5 2 13.0523 2 12.5V7.5Z",fill:d,stroke:d}))};n.default=u},function($,n,t){"use strict";t.d(n,"d",function(){return i}),t.d(n,"b",function(){return d}),t.d(n,"c",function(){return b}),t.d(n,"a",function(){return w});var e=t(3),s=t.n(e),o=t(9),a=t.n(o),c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(E,S,P)=>S in E?c(E,S,{enumerable:!0,configurable:!0,writable:!0,value:P}):E[S]=P,O=(E,S)=>{for(var P in S||(S={}))m.call(S,P)&&v(E,P,S[P]);if(h)for(var P of h(S))g.call(S,P)&&v(E,P,S[P]);return E},u=(E,S)=>l(E,p(S));const r=E=>{if(!E)return[];const S=[];for(const P of E){if(S.length===2)break;const D=P.toLowerCase();for(const[W,B]of Object.entries(o.PODCAST_CATEGORIES)){if(S.length===2)break;if(W.toLowerCase()===D||W.toLowerCase().split(" & ").includes(D)){S.push({category:W});break}for(const f of B){if(S.length===2)break;if(f.toLowerCase()===D||f.toLowerCase().split(" & ").includes(D)){S.push({category:W,subcategory:f});break}}}}return S},i=({pub:E,section:S})=>{var P,D,W,B,f,y,M,N;const A=S==null?void 0:S.podcastSettings,L=(D=(P=A==null?void 0:A.podcast_title)!=null?P:S==null?void 0:S.name)!=null?D:null,C=(B=(W=A==null?void 0:A.podcast_description)!=null?W:S==null?void 0:S.description)!=null?B:null,R=(f=A==null?void 0:A.itunes_podcast_primary_category)!=null?f:null,U=(y=A==null?void 0:A.itunes_podcast_primary_subcategory)!=null?y:null,Z=(M=A==null?void 0:A.itunes_podcast_secondary_category)!=null?M:null,F=(N=A==null?void 0:A.itunes_podcast_secondary_subcategory)!=null?N:null,z=(A==null?void 0:A.itunes_explicit)||!1,G=(A==null?void 0:A.podcast_art_url)||Object(e.getDefaultPodcastArtUrlCDN)(),V=(A==null?void 0:A.paid_podcast_episode_art_url)||null,k=(A==null?void 0:A.podcast_byline)||E.podcast_byline||E.author_name||"",K=(A==null?void 0:A.language)||E.podcast_language||"",Y=!!A&&!!A.podcast_feed_url,ee=Y?A.podcast_feed_url:Object(e.getPodcastRssUrl)({pub:u(O({},E),{section:S})});return{title:L,description:C,primaryCategory:R,primarySubcategory:U,secondaryCategory:Z,secondarySubcategory:F,isExplicit:z,artUrl:G,byline:k,language:K,isRedirected:Y,podcastRssUrl:ee,paidEpisodeArtUrl:V}},d=({pub:E,section:S})=>{var P,D;const W=(P=S==null?void 0:S.name)!=null?P:null,B=(D=S==null?void 0:S.description)!=null?D:null,f=null,y=null,M=null,N=null,A=!1,L=Object(e.getDefaultPodcastArtUrlCDN)(),C=E.podcast_byline||E.author_name||"",R=E.podcast_language||"";return{title:W,description:B,primaryCategory:f,primarySubcategory:y,secondaryCategory:M,secondarySubcategory:N,isExplicit:A,artUrl:L,byline:C,language:R,isRedirected:!1,podcastRssUrl:null,paidEpisodeArtUrl:null}},b=({pub:E})=>{var S,P;const D=E.podcast_title||E.name,W=E.podcast_description||E.hero_text,B=E.itunes_podcast_primary_category,f=E.itunes_podcast_primary_subcategory,y=E.itunes_podcast_secondary_category,M=E.itunes_podcast_secondary_subcategory,N=(S=E.itunes_explicit)!=null?S:!1,A=E.podcast_art_url||Object(e.getDefaultPodcastArtUrlCDN)(),L=E.podcast_byline||E.author_name,C=E.podcast_language||"",R=!!E.show_pub_podcast_tab,U=!!E.podcast_feed_url,Z=O({},E);delete Z.section;const F=U?E.podcast_feed_url:Object(e.getPodcastRssUrl)({pub:Z});return{title:D,description:W,primaryCategory:B,primarySubcategory:f,secondaryCategory:y,secondarySubcategory:M,isExplicit:N,artUrl:A,byline:L,language:C,isRedirected:U,podcastRssUrl:F,showPodcastTab:R,paidEpisodeArtUrl:(P=E.paid_podcast_episode_art_url)!=null?P:null}},w=({pub:E,publication:S})=>{var P,D,W;const[B,f]=r(S.tags.map(({canonical_name:G})=>G)),y=`${E.name} Podcast`,M=E.hero_text,N=B==null?void 0:B.category,A=(P=B==null?void 0:B.subcategory)!=null?P:null,L=f==null?void 0:f.category,C=(D=f==null?void 0:f.subcategory)!=null?D:null,R=E.explicit||!1,U=Object(e.getDefaultPodcastArtUrlCDN)(),Z=E.author_name;return{title:y,description:M,primaryCategory:N,primarySubcategory:A,secondaryCategory:L,secondarySubcategory:C,isExplicit:R,artUrl:U,byline:Z,language:"",isRedirected:null,podcastRssUrl:null,showPodcastTab:!0,paidEpisodeArtUrl:(W=E.paid_podcast_episode_art_url)!=null?W:null}}},,function($,n,t){(function(e){var s=t(317),o=n&&!n.nodeType&&n,a=o&&typeof e=="object"&&e&&!e.nodeType&&e,c=a&&a.exports===o,l=c&&s.process,p=function(){try{var h=a&&a.require&&a.require("util").types;return h||l&&l.binding&&l.binding("util")}catch(m){}}();e.exports=p}).call(this,t(271)($))},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"ImageIcon",svgParams:{height:52.13,width:63.67}}),Object(e.h)("path",{d:"M58.55,52.13H5.13A5.13,5.13,0,0,1,0,47V5.13A5.13,5.13,0,0,1,5.13,0H58.55a5.13,5.13,0,0,1,5.13,5.13V47A5.13,5.13,0,0,1,58.55,52.13ZM5.13,4A1.13,1.13,0,0,0,4,5.13V47a1.13,1.13,0,0,0,1.13,1.13H58.55A1.13,1.13,0,0,0,59.67,47V5.13A1.13,1.13,0,0,0,58.55,4Z"}),Object(e.h)("path",{d:"M12.08,43.46H51.59A1.69,1.69,0,0,0,53,40.77l-5.45-7.4A1.69,1.69,0,0,0,45,33.15l-5.6,5.33-13-17.65a1.69,1.69,0,0,0-2.78.08l-13,19.94A1.69,1.69,0,0,0,12.08,43.46Z"}),Object(e.h)("circle",{cx:"44.13",cy:"15.12",r:"5.93"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d="black",height:b=19,width:w=19}=i,E=O(i,["stroke","height","width"]);return Object(e.h)(s.a,v(g({},E),{name:"VideoIcon",svgParams:{height:b,width:w,viewBox:"2 2 15 15"}}),Object(e.h)("g",{fill:"transparent"},Object(e.h)("path",{d:"M15.5 15H3.5V4H15.5V15Z",stroke:d,"stroke-linejoin":"round"}),Object(e.h)("path",{d:"M11.5 11L8.5 9V12.5L11.5 11Z",stroke:d,"stroke-linejoin":"round"}),Object(e.h)("path",{d:"M4 7H15",stroke:d}),Object(e.h)("path",{d:"M4.5 4L7.5 7",stroke:d}),Object(e.h)("path",{d:"M8 4L11 7",stroke:d}),Object(e.h)("path",{d:"M11.5 4L14.5 7",stroke:d})))};n.default=u},,function($,n,t){"use strict";var e=t(0),s=t(1),o=t(54),a=t(171);const c=({children:l,content:p,baseRef:h=void 0,portalClass:m="",className:g="",style:v=void 0})=>{const O=Object(s.j)(null),u=Object(s.j)(null);return p?Object(e.h)("div",{ref:O,className:g,style:v},l,Object(e.h)(a.a,{baseRef:h||O,hoverToggle:!0,onOpen:()=>{var r;return(r=u.current)==null?void 0:r.open()},onClose:()=>{var r;return(r=u.current)==null?void 0:r.close()},className:m},Object(e.h)(o.a,{ref:u,noList:!0,className:"explanation"},p))):l};n.a=c},function($,n,t){"use strict";t.d(n,"a",function(){return v}),t.d(n,"c",function(){return O}),t.d(n,"b",function(){return u});var e=t(80),s=t.n(e),o=t(300),a=t.n(o),c=t(9),l=t.n(c),p=t(48),h=t(8),m=t.n(h),g=t(371);function v({publication:r,siteConfigs:i={},twitterCardUrl:d=null}){var b;const{title:w,description:E}=O(r);let S,P;return d?(S=d,P=!0):[S,P]=Object(g.b)(r,null),Object(h.setMetaData)({title:w,description:E,image:S,isLargeImage:P,pub:r,siteConfigs:i,themeColor:(b=r.theme)==null?void 0:b.web_bg_color})}function O(r,i,d){var b,w;let E;const S=Object(p.default)("publication_author_display_override")||((b=Object(o.contributorsIntoAuthorStrings)(r.contributors))==null?void 0:b.owner),P=S&&!((w=r.name)==null?void 0:w.toLowerCase().includes(S==null?void 0:S.toLowerCase())),D=i!=null?i:r.name;return P?E=`${D} | ${S} | Substack`:E=`${D} | Substack`,{title:E,description:s()(u(r,d))}}function u(r,i){var d,b,w;const E=(d=r.name)==null?void 0:d.trim();let S=E;Object(c.endsWithPunctuation)(E)&&(S=`"${E}"`);const P=Object(o.contributorsIntoAuthorStrings)(r.contributors);let D,W;return r.invite_only?(D=null,W=null):(D=((b=r.rankingDetailFreeIncluded)==null?void 0:b.toLowerCase().includes("readers"))?r.rankingDetailFreeIncluded.toLowerCase():null,W=r.rankingDetailFreeIncluded||r.rankingDetail),Object(o.metaDescription)(i!=null?i:(w=r.hero_text)==null?void 0:w.trim(),P,D,S,W)}},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Link=n.Match=void 0;var e=Object.assign||function(g){for(var v=1;v<arguments.length;v++){var O=arguments[v];for(var u in O)Object.prototype.hasOwnProperty.call(O,u)&&(g[u]=O[u])}return g},s=t(0),o=t(41);function a(g,v){var O={};for(var u in g)v.indexOf(u)>=0||!Object.prototype.hasOwnProperty.call(g,u)||(O[u]=g[u]);return O}function c(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function l(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function p(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var h=n.Match=function(g){p(v,g);function v(){var O,u,r;c(this,v);for(var i=arguments.length,d=Array(i),b=0;b<i;b++)d[b]=arguments[b];return r=(O=(u=l(this,g.call.apply(g,[this].concat(d))),u),u.update=function(w){u.nextUrl=w,u.setState({})},O),l(u,r)}return v.prototype.componentDidMount=function(){o.subscribers.push(this.update)},v.prototype.componentWillUnmount=function(){o.subscribers.splice(o.subscribers.indexOf(this.update)>>>0,1)},v.prototype.render=function(u){var r=this.nextUrl||(0,o.getCurrentUrl)(),i=r.replace(/\?.+$/,"");return this.nextUrl=null,u.children({url:r,path:i,matches:(0,o.exec)(i,u.path,{})!==!1})},v}(s.Component),m=function(v){var O=v.activeClassName,u=v.path,r=a(v,["activeClassName","path"]);return(0,s.h)(h,{path:u||r.href},function(i){var d=i.matches;return(0,s.h)(o.Link,e({},r,{class:[r.class||r.className,d&&O].filter(Boolean).join(" ")}))})};n.Link=m,n.default=h,h.Link=m},,function($,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return o}),t.d(n,"c",function(){return a});var e=t(700);function s(c){var l,p,h;return c.link_title||((l=c.postTag)==null?void 0:l.name)||((p=c.section)==null?void 0:p.name)||((h=c.post)==null?void 0:h.title)||""}function o(c){var l;return c.postTag?"tag":c.section?"section":((l=c.post)==null?void 0:l.type)==="page"?"page":c.post?"post":"link"}function a(c,{isPodcastActive:l,isChatActive:p,isMeetingsActive:h}){var m;const g=c.filter(u=>!u.standard_key),v=new Map(c.filter(u=>u.standard_key).map(u=>[u.standard_key,u]));for(const u of g)((m=u.section)==null?void 0:m.hide_from_navbar)&&(u.is_hidden=!0);const O=[p&&{standard_key:"chat",link_title:"Chat",link_url:"/chat"},h&&{standard_key:"meetings",link_title:"Meetings",link_url:"/meetings"},...g,{standard_key:"archive",link_title:"Archive",link_url:"/archive"},{standard_key:"about",link_title:"About",link_url:"/about"}].filter(Boolean);for(const u of O)if(u.standard_key){const r=v.get(u.standard_key);r&&Object(e.a)(u,r)}return O}},function($,n,t){var e=t(330),s=t(73);function o(a,c,l){var p=c(a);return s(a)?p:e(p,l(a))}$.exports=o},function($,n){function t(){return[]}$.exports=t},function($,n,t){var e=t(376),s=t(240),o=t(73),a=t(279),c=t(233),l=t(290),p=Object.prototype,h=p.hasOwnProperty;function m(g,v){var O=o(g),u=!O&&s(g),r=!O&&!u&&a(g),i=!O&&!u&&!r&&l(g),d=O||u||r||i,b=d?e(g.length,String):[],w=b.length;for(var E in g)(v||h.call(g,E))&&!(d&&(E=="length"||r&&(E=="offset"||E=="parent")||i&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||c(E,w)))&&b.push(E);return b}$.exports=m},function($,n){function t(e,s){return function(o){return e(s(o))}}$.exports=t},function($,n,t){var e=t(532),s=t(533);function o(a,c){return a!=null&&s(a,c,e)}$.exports=o},function($,n,t){var e=t(679);function s(o,a){o.prototype=Object.create(a.prototype),o.prototype.constructor=o,e(o,a)}$.exports=s,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){"use strict";t.d(n,"a",function(){return c});var e=t(1),s=Math.pow,o=(l,p,h)=>new Promise((m,g)=>{var v=r=>{try{u(h.next(r))}catch(i){g(i)}},O=r=>{try{u(h.throw(r))}catch(i){g(i)}},u=r=>r.done?m(r.value):Promise.resolve(r.value).then(v,O);u((h=h.apply(l,p)).next())});const a=(l,p)=>{const h=Object(e.j)(()=>!0);Object(e.d)(()=>{h.current=l},[l]),Object(e.d)(()=>{if(!p)return;let m=!1,g=0,v;function O(){return o(this,null,function*(){clearTimeout(v),(yield h.current())?g=0:g++,!m&&p&&(v=setTimeout(O,p(g)))})}return v=setTimeout(O,p(g)),()=>{m=!0,clearTimeout(v)}},[p])},c=(l,p,h,{base:m=2}={})=>{const g=Object(e.a)(v=>Math.min(p*s(m,v),h),[p,h,m]);a(l,g)}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{fill:d="white"}=i,b=O(i,["fill"]);return Object(e.h)(s.a,v(g({},b),{name:"PodcastEmbedPauseIcon",svgParams:{width:13,height:16,viewBox:"0 0 13 16",stroke:"none",fill:d}}),Object(e.h)("path",{d:"M4 0H1C0.447715 0 0 0.447715 0 1V15C0 15.5523 0.447715 16 1 16H4C4.55228 16 5 15.5523 5 15V1C5 0.447715 4.55228 0 4 0Z"}),Object(e.h)("path",{d:"M11.9998 0H8.99976C8.44747 0 7.99976 0.447715 7.99976 1V15C7.99976 15.5523 8.44747 16 8.99976 16H11.9998C12.552 16 12.9998 15.5523 12.9998 15V1C12.9998 0.447715 12.552 0 11.9998 0Z"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"VoiceoverIcon",svgParams:{height:24,width:24,viewBox:"0 0 24 24"},fill:"none"}),Object(e.h)("path",{d:"M11.8518 3.31518C12.2459 4.26329 13.551 7.10985 14.4542 8.3467C15.3764 9.60967 12.8285 9.95184 12 10.5","stroke-width":"1.5","stroke-linecap":"round"}),Object(e.h)("path",{d:"M12 10.5C12 10.5 12.4662 11.2332 12.7627 11.7326C13.0592 12.232 13 12.5 11.5 13C10.7772 13.2409 9.5 13.5 9.5 13.5C10.3447 13.9272 12.2664 14.1393 12.4041 14.3167C12.763 14.779 12.3241 15.4618 11.8617 15.8208C11.3994 16.1797 12.0724 18.7353 10.5 19.5C8.9276 20.2647 5.70772 19.432 3 18","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M18.5 6.5L20.3544 4.8526","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M18.5 15.5L20.3544 17.2545","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M19.5 11.0326L22 11.0326","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(242),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.default,v(g({},u),{name:"ActivationUsersIcon"}),Object(e.h)("path",{d:"M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21","stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 11C11.2091 11 13 9.20917 13 7.00003C13 4.79089 11.2091 3.00003 9 3.00003C6.79086 3.00003 5 4.79089 5 7.00003C5 9.20917 6.79086 11 9 11Z","stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M23 21V19C22.9986 17.1772 21.765 15.5858 20 15.13","stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M16 3.13004C17.7699 3.58321 19.0078 5.17803 19.0078 7.00504C19.0078 8.83204 17.7699 10.4269 16 10.88","stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return w});var e=t(0),s=t(1),o=t(16),a=t(38),c=t(21),l=t(26),p=t(165),h=Object.defineProperty,m=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(B,f,y)=>f in B?h(B,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):B[f]=y,i=(B,f)=>{for(var y in f||(f={}))O.call(f,y)&&r(B,y,f[y]);if(v)for(var y of v(f))u.call(f,y)&&r(B,y,f[y]);return B},d=(B,f)=>m(B,g(f)),b=(B,f,y)=>new Promise((M,N)=>{var A=R=>{try{C(y.next(R))}catch(U){N(U)}},L=R=>{try{C(y.throw(R))}catch(U){N(U)}},C=R=>R.done?M(R.value):Promise.resolve(R.value).then(A,L);C((y=y.apply(B,f)).next())});function w({publicationId:B,publication:f,user:y}){var M,N,A;B=(A=(M=f==null?void 0:f.id)!=null?M:B)!=null?A:(N=y==null?void 0:y.primary_publication)==null?void 0:N.id;const L=Object(a.c)(),C=Object(l.e)(),R=Object(p.d)(),[U,Z]=Object(s.k)(!1),F=S(L,B,R)||E(L,y,R),[z,G]=Object(s.k)(null),V=R.isLoading||Boolean(z)||!B;return{isSubscribed:F&&!z||z==="subscribing",showCta:Boolean(B)&&R.hasLoadedOnce&&!(L&&L.id===(y==null?void 0:y.id))&&!(F&&!U),subscribe:k=>b(this,null,function*(){if(k&&(k.preventDefault(),k.stopPropagation()),V||F||!B)return;G("subscribing");const K=yield D(B,{publication:f,user:L});if(K.didSubscribe){if(Z(!0),C.popToast(Y=>Object(e.h)(l.c,d(i({},Y),{text:"Subscribed!"}))),L)try{yield R.refetch()}catch(Y){console.error("Failed to reload subscriptions:",Y)}}else K.errorMessage&&C.popToast(Y=>{var ee;return Object(e.h)(l.c,d(i({},Y),{text:(ee=K.errorMessage)!=null?ee:""}))});G(null)}),unsubscribe:k=>b(this,null,function*(){if(k&&(k.preventDefault(),k.stopPropagation()),V||!F||!B)return;G("unsubscribing");const K=yield W(B);if(K.didUnsubscribe){if(Z(!1),C.popToast(Y=>Object(e.h)(l.c,d(i({},Y),{text:"Unsubscribed!"}))),L)try{yield R.refetch()}catch(Y){console.error("Failed to reload subscriptions:",Y)}}else K.errorMessage&&C.popToast(Y=>{var ee;return Object(e.h)(l.c,d(i({},Y),{text:(ee=K.errorMessage)!=null?ee:""}))});G(null)})}}function E(B,f,y){if(!B||!f||y.isLoading||!y.result)return!1;for(const M of y.result.subscriptions)if(M.membership_state!=="unsubscribed"&&P(f.id,M.publication_id,y))return!0;for(const M of y.result.publicationUsers)if(["admin","contributor"].includes(M.role)&&P(f.id,M.publication_id,y))return!0;return!1}function S(B,f,y){if(!B||!f||y.isLoading||!y.result)return!1;const M=y.result.subscriptionMap.get(f);if(M&&M.membership_state!=="unsubscribed")return!0;const N=y.result.publicationUserMap.get(f);return!!(N&&["admin","contributor"].includes(N.role))}function P(B,f,y){if(y.isLoading||!y.result)return!1;const M=y.result.publicationMap.get(f);if(M){if(M.author_id===B)return!0;for(const N of M.contributors)if(N.user_id===B)return!0}return!1}function D(B){return b(this,arguments,function*(f,{publication:y,user:M}={}){let N=!1,A;if(M)try{(yield Object(c.c)("/api/v1/reader/signup/pub",{method:"POST",json:{publication_id:f,email:M.email,source:"substack-feed-item"}})).requires_confirmation?A="Check your email to confirm subscription":N=!0}catch(L){console.error(L),A="Failed to subscribe"}if(N||!M){if(!y)try{y=yield Object(c.c)(`/api/v1/reader/publication/${f}`)}catch(L){console.error(L)}if(y&&(!M||y.plans)){const L=Object(o.getSubscribeUrl)(y,{addBase:!0,user:M!=null?M:void 0});window.open(L,"_blank")}}return{didSubscribe:N,errorMessage:A}})}function W(B){return b(this,null,function*(){let f=!1,y;try{yield Object(c.c)("/api/v1/subscription/email",{method:"POST",json:{publication_id:B,email_disabled:!0,digest_enabled:!1,receive_podcast_emails:!1,source:"substack-feed-item"}}),f=!0}catch(M){console.error(M),y="Failed to unsubscribe"}return{didUnsubscribe:f,errorMessage:y}})}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"MenuIcon",svgParams:{height:10,width:18}}),Object(e.h)("path",{d:"M1 1L9 9L17 1",stroke:"#999","stroke-width":"1"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"CopyIcon",svgParams:{height:15,width:15}}),Object(e.h)("rect",{x:"4",y:"1",width:"10.2862",height:"10.2862",rx:"1"}),Object(e.h)("rect",{x:"1",y:"4",width:"10.2862",height:"10.2862",rx:"1"}));n.default=O},,,function($,n,t){var e=t(84),s=e.Uint8Array;$.exports=s},function($,n,t){var e=t(400),s=t(383),o=t(197);function a(c){return e(c,o,s)}$.exports=a},function($,n,t){var e=t(366),s=t(523),o=Object.prototype,a=o.hasOwnProperty;function c(l){if(!e(l))return s(l);var p=[];for(var h in Object(l))a.call(l,h)&&h!="constructor"&&p.push(h);return p}$.exports=c},function($,n,t){var e=t(138),s=t(257),o=t(73),a=t(143),c=1/0,l=e?e.prototype:void 0,p=l?l.toString:void 0;function h(m){if(typeof m=="string")return m;if(o(m))return s(m,h)+"";if(a(m))return p?p.call(m):"";var g=m+"";return g=="0"&&1/m==-c?"-0":g}$.exports=h},function($,n,t){var e=t(342),s=1/0,o=17976931348623157e292;function a(c){if(!c)return c===0?c:0;if(c=e(c),c===s||c===-s){var l=c<0?-1:1;return l*o}return c===c?c:0}$.exports=a},function($,n,t){"use strict";t.r(n),t.d(n,"twitterScreenNames",function(){return e}),t.d(n,"resolveTwitterShareText",function(){return s}),t.d(n,"truncateBytes",function(){return o});const e={test1:"SubstackInc",badnews:"ryangrim",dmortberg:"danielortberg",offthechain:"APompliano",on:"SubstackInc",petition:"petition",popularinformation:"JuddLegum",shane:"shanesnow",signalproblems:"A_W_Gordon",sinocism:"niubi",taibbi:"mtaibbi",thefirstand15th:"tressiemcphd",thenewsletter:"jbouie",numlock:"WaltHickey"};function s({pub:a,post:c}){var l;const p=(a==null?void 0:a.twitter_screen_name)||a&&e[a==null?void 0:a.subdomain];let h=(l=c==null?void 0:c.title)!=null?l:a==null?void 0:a.name;return a&&!c&&(h=`Subscribe to ${h}`),p&&(!c||a&&(!c.publishedBylines.length||c.publishedBylines.some(m=>m.id===a.author_id)))&&(h+=`, by @${p}`),h}function o(a,c){const l=new TextEncoder().encode(a);return l.length>c?new TextDecoder().decode(l.slice(0,c)):a}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"UserBadgeOutlineIcon",svgParams:{viewBox:"0 0 40 40",height:40,width:40}}),Object(e.h)("path",{d:"M17.8212 2.19198C19.5364 1.48152 21.4636 1.48152 23.1788 2.19198L31.198 5.51364C32.9132 6.2241 34.2759 7.58682 34.9864 9.30201L38.308 17.3212C39.0185 19.0364 39.0185 20.9636 38.308 22.6788L34.9864 30.698C34.2759 32.4132 32.9132 33.7759 31.198 34.4864L23.1788 37.808C21.4636 38.5185 19.5364 38.5185 17.8212 37.808L9.80201 34.4864C8.08682 33.7759 6.7241 32.4132 6.01364 30.698L2.69198 22.6788C1.98152 20.9636 1.98152 19.0364 2.69198 17.3212L6.01364 9.30201C6.7241 7.58682 8.08682 6.2241 9.80202 5.51364L17.8212 2.19198Z",stroke:"var(--color-accent-orange)",strokeWidth:"4",fill:"transparent"}),Object(e.h)("path",{d:"M27.1666 15L17.9999 24.1667L13.8333 20",stroke:"var(--color-accent-orange)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}));n.default=O},function($,n,t){var e;(function(s,o,a){if(!s)return;for(var c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},m,g=1;g<20;++g)c[111+g]="f"+g;for(g=0;g<=9;++g)c[g+96]=g.toString();function v(B,f,y){if(B.addEventListener){B.addEventListener(f,y,!1);return}B.attachEvent("on"+f,y)}function O(B){if(B.type=="keypress"){var f=String.fromCharCode(B.which);return B.shiftKey||(f=f.toLowerCase()),f}return c[B.which]?c[B.which]:l[B.which]?l[B.which]:String.fromCharCode(B.which).toLowerCase()}function u(B,f){return B.sort().join(",")===f.sort().join(",")}function r(B){var f=[];return B.shiftKey&&f.push("shift"),B.altKey&&f.push("alt"),B.ctrlKey&&f.push("ctrl"),B.metaKey&&f.push("meta"),f}function i(B){if(B.preventDefault){B.preventDefault();return}B.returnValue=!1}function d(B){if(B.stopPropagation){B.stopPropagation();return}B.cancelBubble=!0}function b(B){return B=="shift"||B=="ctrl"||B=="alt"||B=="meta"}function w(){if(!m){m={};for(var B in c)B>95&&B<112||c.hasOwnProperty(B)&&(m[c[B]]=B)}return m}function E(B,f,y){return y||(y=w()[B]?"keydown":"keypress"),y=="keypress"&&f.length&&(y="keydown"),y}function S(B){return B==="+"?["+"]:(B=B.replace(/\+{2}/g,"+plus"),B.split("+"))}function P(B,f){var y,M,N,A=[];for(y=S(B),N=0;N<y.length;++N)M=y[N],h[M]&&(M=h[M]),f&&f!="keypress"&&p[M]&&(M=p[M],A.push("shift")),b(M)&&A.push(M);return f=E(M,A,f),{key:M,modifiers:A,action:f}}function D(B,f){return B===null||B===o?!1:B===f?!0:D(B.parentNode,f)}function W(B){var f=this;if(B=B||o,!(f instanceof W))return new W(B);f.target=B,f._callbacks={},f._directMap={};var y={},M,N=!1,A=!1,L=!1;function C(V){V=V||{};var k=!1,K;for(K in y){if(V[K]){k=!0;continue}y[K]=0}k||(L=!1)}function R(V,k,K,Y,ee,ae){var he,me,Ye=[],se=K.type;if(!f._callbacks[V])return[];for(se=="keyup"&&b(V)&&(k=[V]),he=0;he<f._callbacks[V].length;++he)if(me=f._callbacks[V][he],!(!Y&&me.seq&&y[me.seq]!=me.level)&&se==me.action&&(se=="keypress"&&!K.metaKey&&!K.ctrlKey||u(k,me.modifiers))){var ie=!Y&&me.combo==ee,Ee=Y&&me.seq==Y&&me.level==ae;(ie||Ee)&&f._callbacks[V].splice(he,1),Ye.push(me)}return Ye}function U(V,k,K,Y){f.stopCallback(k,k.target||k.srcElement,K,Y)||V(k,K)===!1&&(i(k),d(k))}f._handleKey=function(V,k,K){var Y=R(V,k,K),ee,ae={},he=0,me=!1;for(ee=0;ee<Y.length;++ee)Y[ee].seq&&(he=Math.max(he,Y[ee].level));for(ee=0;ee<Y.length;++ee){if(Y[ee].seq){if(Y[ee].level!=he)continue;me=!0,ae[Y[ee].seq]=1,U(Y[ee].callback,K,Y[ee].combo,Y[ee].seq);continue}me||U(Y[ee].callback,K,Y[ee].combo)}var Ye=K.type=="keypress"&&A;K.type==L&&!b(V)&&!Ye&&C(ae),A=me&&K.type=="keydown"};function Z(V){typeof V.which!="number"&&(V.which=V.keyCode);var k=O(V);if(!!k){if(V.type=="keyup"&&N===k){N=!1;return}f.handleKey(k,r(V),V)}}function F(){clearTimeout(M),M=setTimeout(C,1e3)}function z(V,k,K,Y){y[V]=0;function ee(se){return function(){L=se,++y[V],F()}}function ae(se){U(K,se,V),Y!=="keyup"&&(N=O(se)),setTimeout(C,10)}for(var he=0;he<k.length;++he){var me=he+1===k.length,Ye=me?ae:ee(Y||P(k[he+1]).action);G(k[he],Ye,Y,V,he)}}function G(V,k,K,Y,ee){f._directMap[V+":"+K]=k,V=V.replace(/\s+/g," ");var ae=V.split(" "),he;if(ae.length>1){z(V,ae,k,K);return}he=P(V,K),f._callbacks[he.key]=f._callbacks[he.key]||[],R(he.key,he.modifiers,{type:he.action},Y,V,ee),f._callbacks[he.key][Y?"unshift":"push"]({callback:k,modifiers:he.modifiers,action:he.action,seq:Y,level:ee,combo:V})}f._bindMultiple=function(V,k,K){for(var Y=0;Y<V.length;++Y)G(V[Y],k,K)},v(B,"keypress",Z),v(B,"keydown",Z),v(B,"keyup",Z)}W.prototype.bind=function(B,f,y){var M=this;return B=B instanceof Array?B:[B],M._bindMultiple.call(M,B,f,y),M},W.prototype.unbind=function(B,f){var y=this;return y.bind.call(y,B,function(){},f)},W.prototype.trigger=function(B,f){var y=this;return y._directMap[B+":"+f]&&y._directMap[B+":"+f]({},B),y},W.prototype.reset=function(){var B=this;return B._callbacks={},B._directMap={},B},W.prototype.stopCallback=function(B,f){var y=this;return(" "+f.className+" ").indexOf(" mousetrap ")>-1||D(f,y.target)?!1:f.tagName=="INPUT"||f.tagName=="SELECT"||f.tagName=="TEXTAREA"||f.isContentEditable},W.prototype.handleKey=function(){var B=this;return B._handleKey.apply(B,arguments)},W.addKeycodes=function(B){for(var f in B)B.hasOwnProperty(f)&&(c[f]=B[f]);m=null},W.init=function(){var B=W(o);for(var f in B)f.charAt(0)!=="_"&&(W[f]=function(y){return function(){return B[y].apply(B,arguments)}}(f))},W.init(),s.Mousetrap=W,$.exports&&($.exports=W),e=function(){return W}.call(n,t,n,$),e!==a&&($.exports=e)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},function($,n,t){"use strict";t.r(n),t.d(n,"Bold",function(){return l}),t.d(n,"default",function(){return l}),t.d(n,"starInputRegex",function(){return s}),t.d(n,"starPasteRegex",function(){return o}),t.d(n,"underscoreInputRegex",function(){return a}),t.d(n,"underscorePasteRegex",function(){return c});var e=t(18);const s=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,o=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,a=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,l=e.Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:p=>p.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:p=>/^(bold(er)?|[5-9]\d{2,})$/.test(p)&&null}]},renderHTML({HTMLAttributes:p}){return["strong",Object(e.mergeAttributes)(this.options.HTMLAttributes,p),0]},addCommands(){return{setBold:()=>({commands:p})=>p.setMark(this.name),toggleBold:()=>({commands:p})=>p.toggleMark(this.name),unsetBold:()=>({commands:p})=>p.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Object(e.markInputRule)({find:s,type:this.type}),Object(e.markInputRule)({find:a,type:this.type})]},addPasteRules(){return[Object(e.markPasteRule)({find:o,type:this.type}),Object(e.markPasteRule)({find:c,type:this.type})]}})},function($,n,t){"use strict";t.r(n),t.d(n,"Document",function(){return s}),t.d(n,"default",function(){return s});var e=t(18);const s=e.Node.create({name:"doc",topNode:!0,content:"block+"})},function($,n,t){"use strict";t.r(n),t.d(n,"Italic",function(){return l}),t.d(n,"default",function(){return l}),t.d(n,"starInputRegex",function(){return s}),t.d(n,"starPasteRegex",function(){return o}),t.d(n,"underscoreInputRegex",function(){return a}),t.d(n,"underscorePasteRegex",function(){return c});var e=t(18);const s=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,o=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,a=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,c=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,l=e.Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:p=>p.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:p}){return["em",Object(e.mergeAttributes)(this.options.HTMLAttributes,p),0]},addCommands(){return{setItalic:()=>({commands:p})=>p.setMark(this.name),toggleItalic:()=>({commands:p})=>p.toggleMark(this.name),unsetItalic:()=>({commands:p})=>p.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Object(e.markInputRule)({find:s,type:this.type}),Object(e.markInputRule)({find:a,type:this.type})]},addPasteRules(){return[Object(e.markPasteRule)({find:o,type:this.type}),Object(e.markPasteRule)({find:c,type:this.type})]}})},function($,n,t){"use strict";t.r(n),t.d(n,"Paragraph",function(){return s}),t.d(n,"default",function(){return s});var e=t(18);const s=e.Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:o}){return["p",Object(e.mergeAttributes)(this.options.HTMLAttributes,o),0]},addCommands(){return{setParagraph:()=>({commands:o})=>o.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}})},function($,n,t){"use strict";t.r(n),t.d(n,"Text",function(){return s}),t.d(n,"default",function(){return s});var e=t(18);const s=e.Node.create({name:"text",group:"inline"})},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"ShareFacebookIcon",svgParams:{height:17,width:16}}),Object(e.h)("path",{d:"M10.6543 1.38723C10.3533 0.960814 9.95383 0.61341 9.48976 0.374567C9.02902 0.137956 8.51908 0.0130716 8.00115 0.0100098C7.86087 0.0101844 7.72354 0.0502687 7.60519 0.125581C7.48684 0.200893 7.39237 0.308324 7.3328 0.435326L5.00368 5.67077H3.029C2.72335 5.66964 2.42059 5.73003 2.13876 5.84833C1.85692 5.96663 1.60177 6.14043 1.38849 6.35938C1.16707 6.57502 0.991841 6.83346 0.873459 7.11897C0.755078 7.40447 0.696022 7.71108 0.699885 8.02014V13.691C0.699885 14.3087 0.945273 14.9012 1.38207 15.338C1.81886 15.7747 2.41128 16.0201 3.029 16.0201H13.348C13.8951 16.021 14.425 15.8283 14.8438 15.4762C15.2626 15.1241 15.5434 14.6352 15.6366 14.0961L16.6493 8.4252C16.7252 8.09192 16.7252 7.74582 16.6493 7.41254C16.566 7.08205 16.4104 6.7742 16.1936 6.51128C15.9746 6.25 15.7017 6.03926 15.3936 5.89355C15.0762 5.7467 14.7306 5.67068 14.3809 5.67077H10.5328L11.0391 4.37457C11.2397 3.88784 11.3162 3.35894 11.2619 2.83533C11.1853 2.30894 10.9763 1.81065 10.6543 1.38723ZM4.75052 14.5518H3.029C2.91049 14.5525 2.79303 14.5296 2.68349 14.4844C2.57394 14.4392 2.47452 14.3726 2.39102 14.2885C2.23609 14.1199 2.14945 13.8997 2.14799 13.6708V8.02014C2.14913 7.901 2.17389 7.78328 2.22082 7.67377C2.26775 7.56427 2.33592 7.46515 2.4214 7.38216C2.50369 7.29576 2.60267 7.22698 2.71233 7.17998C2.822 7.13298 2.94007 7.10874 3.05938 7.10874H4.7809L4.75052 14.5518ZM10.6746 7.05811H14.3809C14.5145 7.05821 14.6462 7.08942 14.7657 7.14925C14.8875 7.20532 14.9948 7.28845 15.0796 7.39229C15.1675 7.49052 15.2301 7.60871 15.2619 7.73659C15.2922 7.8665 15.2922 8.00162 15.2619 8.13153L14.2493 13.8024C14.2087 14.017 14.094 14.2106 13.9252 14.3492C13.7619 14.4812 13.558 14.5528 13.348 14.5518H6.19862V6.45052L8.43659 1.38723H8.52773C8.9042 1.50037 9.23304 1.73413 9.4636 2.05252C9.69416 2.37092 9.81365 2.75627 9.80368 3.14925C9.8181 3.39741 9.78015 3.64583 9.69229 3.87836L9.23659 5.04292C9.15397 5.273 9.12623 5.51921 9.15558 5.76191C9.1877 6.00427 9.27425 6.23623 9.40875 6.44039C9.5535 6.6376 9.74028 6.80017 9.95558 6.91634C10.1774 7.03206 10.4244 7.0912 10.6746 7.08849V7.05811Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"TwitterOutlineIcon",svgParams:{height:16,width:20}}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.1524 0.286815C12.9848 -0.0318829 13.8948 -0.0864749 14.7592 0.130489C15.462 0.306912 16.107 0.655903 16.6376 1.14249C17.3169 0.89658 17.961 0.560161 18.5523 0.141743C18.7998 -0.0334198 19.1301 -0.0365939 19.381 0.133779C19.6318 0.304152 19.7507 0.612306 19.6791 0.907C19.4028 2.04538 18.8458 3.09393 18.0616 3.95753C18.0757 4.09811 18.083 4.23936 18.0835 4.3808L18.0835 4.38319C18.0835 9.29757 15.7264 12.8962 12.3452 14.7015C8.98147 16.4975 4.67843 16.4794 0.840591 14.3406C0.546545 14.1767 0.403384 13.8324 0.49452 13.5084C0.585656 13.1843 0.887269 12.9652 1.22363 12.9786C2.65157 13.0356 4.0647 12.7377 5.34034 12.12C4.06579 11.3575 3.15922 10.4438 2.53674 9.45782C1.73519 8.18825 1.43205 6.84263 1.37719 5.63204C1.32248 4.42456 1.51372 3.33632 1.71513 2.55507C1.81628 2.16276 1.92118 1.84328 2.00191 1.61926C2.04232 1.50714 2.0768 1.41859 2.10191 1.35643C2.11446 1.32534 2.12469 1.30081 2.13215 1.2832L2.14123 1.26201L2.14412 1.25538L2.14514 1.25307L2.14553 1.25217C2.1457 1.25179 2.14586 1.25144 2.81079 1.54604L2.14586 1.25144C2.25213 1.01158 2.47934 0.847546 2.74046 0.822176C3.00157 0.796805 3.25612 0.914031 3.40657 1.12894C4.15428 2.19698 5.15353 3.06271 6.31515 3.64923C7.26519 4.12892 8.2998 4.40971 9.35623 4.47759V4.41217C9.34536 3.52161 9.60685 2.64886 10.1058 1.91153C10.6058 1.17278 11.3201 0.605503 12.1524 0.286815ZM3.09343 3.03841C2.9284 3.71356 2.78659 4.6028 2.83025 5.5662C2.8764 6.58479 3.12882 7.67102 3.76666 8.68131C4.40153 9.68688 5.44569 10.6611 7.14733 11.4198C7.38821 11.5272 7.55207 11.7566 7.57557 12.0192C7.59906 12.2819 7.47851 12.5367 7.26052 12.6852C6.28428 13.3499 5.20629 13.8343 4.07717 14.1236C6.75502 14.8865 9.46059 14.5928 11.6602 13.4184C14.5413 11.8801 16.6285 8.79158 16.6289 4.38467C16.6283 4.20406 16.611 4.0239 16.5772 3.84652C16.5318 3.60859 16.6079 3.3637 16.7801 3.19336C17.0303 2.94581 17.2553 2.67591 17.4527 2.38779C17.1883 2.49441 16.9189 2.58923 16.6453 2.67187C16.3709 2.75477 16.0733 2.6687 15.8855 2.45208C15.4964 2.00326 14.9795 1.68547 14.4051 1.54127C13.8306 1.39708 13.2258 1.43333 12.6725 1.6452C12.1191 1.85707 11.6436 2.23446 11.3105 2.72674C10.9773 3.21904 10.8028 3.80236 10.8107 4.39779L10.8108 4.40751H10.8108V5.21813C10.8108 5.61242 10.4966 5.9349 10.1024 5.94515C8.56202 5.98522 7.03575 5.6425 5.65956 4.94765C4.69805 4.46217 3.83071 3.81535 3.09343 3.03841Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LucideTabActivity",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M13.73 21C13.5542 21.3031 13.3018 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LucideTabInbox",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M22 12L16 12L14 15L10 15L8 12L2 12","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M5.45 5.11L2.10583 11.7886C2.03624 11.9276 2 12.0809 2 12.2364L2 18C2 18.5304 2.21071 19.0391 2.58579 19.4142C2.96086 19.7893 3.46957 20 4 20L20 20C20.5304 20 21.0391 19.7893 21.4142 19.4142C21.7893 19.0391 22 18.5304 22 18V12.2364C22 12.0809 21.9638 11.9276 21.8942 11.7886L18.55 5.11C18.3844 4.77679 18.1292 4.49637 17.813 4.30028C17.4967 4.10419 17.1321 4.0002 16.76 4L7.24 4C6.86792 4.0002 6.50326 4.10419 6.18705 4.30028C5.87083 4.49637 5.61558 4.77679 5.45 5.11Z","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LucideTabNotes",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M9.82746 10.2663H17.2941M10.2039 14.533H14.4706M6 19.1L2.42832 18.1872C1.53922 17.949 1.0116 17.0351 1.24983 16.146L4.52816 3.91113C4.76639 3.02202 5.68029 2.49438 6.5694 2.73262L19 6M6.00001 7.66666V20.3331C6.00001 21.2536 6.74619 21.9998 7.66665 21.9998L20.3333 22C21.2538 22 22 21.2538 22 20.3333V7.66666C22 6.74619 21.2538 5.99999 20.3333 5.99999H7.66667C6.7462 5.99999 6.00001 6.74619 6.00001 7.66666Z","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return p});var e=t(1),s=t(11),o=t.n(s),a=t(8),c=t.n(a),l=(h,m,g)=>new Promise((v,O)=>{var u=d=>{try{i(g.next(d))}catch(b){O(b)}},r=d=>{try{i(g.throw(d))}catch(b){O(b)}},i=d=>d.done?v(d.value):Promise.resolve(d.value).then(u,r);i((g=g.apply(h,m)).next())});const p=({mediaUploadId:h})=>{const[m,g]=Object(e.k)(null),[v,O]=Object(e.k)(!1),[u,r]=Object(e.k)(null);return Object(e.d)(()=>{h?(()=>l(void 0,null,function*(){try{const d=yield o.a.get(`/api/v1/video/upload/${h}`);g(d.body)}catch(d){console.error("Failed to load media upload:",d),r(Object(a.getNetworkErrorMessage)(d)),O(!1)}}))():g(null)},[h,u]),{mediaUpload:m,loading:v,error:u}}},function($,n,t){"use strict";t.d(n,"a",function(){return O});var e=t(127),s=t(32),o=t(97),a=t(98),c=t(99),l=t(106),p=t(70),h=t(2);function m(u){var r=g();return function(){var d=Object(p.a)(u),b;if(r){var w=Object(p.a)(this).constructor;b=Reflect.construct(d,arguments,w)}else b=d.apply(this,arguments);return Object(l.a)(this,b)}}function g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}var v={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},O=function(r){var i,d;return d=i=function(b){Object(c.a)(E,b);var w=m(E);function E(){var S;Object(o.a)(this,E);for(var P=arguments.length,D=new Array(P),W=0;W<P;W++)D[W]=arguments[W];return S=w.call.apply(w,[this].concat(D)),S.select=void 0,S.state={inputValue:S.props.inputValue!==void 0?S.props.inputValue:S.props.defaultInputValue,menuIsOpen:S.props.menuIsOpen!==void 0?S.props.menuIsOpen:S.props.defaultMenuIsOpen,value:S.props.value!==void 0?S.props.value:S.props.defaultValue},S.onChange=function(B,f){S.callProp("onChange",B,f),S.setState({value:B})},S.onInputChange=function(B,f){var y=S.callProp("onInputChange",B,f);S.setState({inputValue:y!==void 0?y:B})},S.onMenuOpen=function(){S.callProp("onMenuOpen"),S.setState({menuIsOpen:!0})},S.onMenuClose=function(){S.callProp("onMenuClose"),S.setState({menuIsOpen:!1})},S}return Object(a.a)(E,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(P){return this.props[P]!==void 0?this.props[P]:this.state[P]}},{key:"callProp",value:function(P){if(typeof this.props[P]=="function"){for(var D,W=arguments.length,B=new Array(W>1?W-1:0),f=1;f<W;f++)B[f-1]=arguments[f];return(D=this.props)[P].apply(D,B)}}},{key:"render",value:function(){var P=this,D=this.props,W=D.defaultInputValue,B=D.defaultMenuIsOpen,f=D.defaultValue,y=Object(e.a)(D,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return h.default.createElement(r,Object(s.a)({},y,{ref:function(N){P.select=N},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),E}(h.Component),i.defaultProps=v,d}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"DotDotDotThinIcon",svgParams:{height:18,width:18}}),Object(e.h)("path",{d:"M1.12554 8.52747C1.41102 7.46201 2.48571 6.83933 3.51336 7.11468C4.541 7.39004 5.16037 8.46664 4.87488 9.5321C4.58939 10.5976 3.5147 11.2202 2.48706 10.9449C1.45941 10.6695 0.840049 9.59292 1.12554 8.52747Z"}),Object(e.h)("path",{d:"M7.12803 8.52747C7.41352 7.46201 8.48821 6.83933 9.51585 7.11468C10.5435 7.39004 11.1629 8.46664 10.8774 9.5321C10.5919 10.5976 9.51719 11.2202 8.48955 10.9449C7.46191 10.6695 6.84254 9.59292 7.12803 8.52747Z"}),Object(e.h)("path",{d:"M13.1266 8.52747C13.4121 7.46201 14.4867 6.83933 15.5144 7.11468C16.542 7.39004 17.1614 8.46664 16.8759 9.5321C16.5904 10.5976 15.5157 11.2202 14.4881 10.9449C13.4604 10.6695 12.8411 9.59292 13.1266 8.52747Z"}));n.default=O},function($,n,t){"use strict";t.d(n,"a",function(){return Z});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(628),l=t(629),p=t(630),h=t(3),m=t.n(h),g=t(430),v=t(446),O=t(447),u=t(431),r=t(432),i=t(327),d=t(146),b=t(45),w=t(7),E=t(325),S=t(67),P=t.n(S),D=t(48),W=t(20),B=t(194),f=t(49),y=t(17),M=t(54),N=t(125),A=t(453),L=t(135);const C="user-menu",R=`https://support.substack.com/hc/en-us/?utm_source=${C}`,U=40;function Z({className:V,user:k,pub:K,enableCustomerServiceMode:Y,disableCustomerServiceMode:ee,freeSignup:ae,fixedTooltip:he,showBadge:me=!0}){const[Ye,se]=Object(M.c)(),{activityUnreadCount:ie}=Object(d.b)(),Oe=Object(b.c)().getConfigFor("chat_diagnostic_viewer"),ce=Object(s.b)(i.a);let ue="",pe="";k&&(ue=(k==null?void 0:k.profile_set_up_at)&&k.name?k.name:k.email,pe=(k==null?void 0:k.profile_set_up_at)?k.name?k.email:null:"Set up your profile");const $e=({active:Ze})=>{Object(w.i)(Ze?w.a.USER_MENU_OPENED:w.a.USER_MENU_DISMISSED)},ne=k?Object(E.a)(k,{utm_source:C}):null,X=K&&(ae||k&&(k.is_subscribed||k.is_free_subscribed)),q=Object(E.b)(k,{utm_source:C}),Ne=!1,Qe=Object(f.b)()&&!ce;return Object(e.h)(e.Fragment,null,k?Object(e.h)(y.b,{className:a()(V,"user-indicator small-no-margin no-active-fade signed-in reader2-tappable-bg",{"force-desktop":ce}),onClick:se},Qe&&me&&ie>0&&Object(e.h)(B.b,{className:a()("user-indicator-badge",ie<10&&"user-indicator-badge-circle")},Object(e.h)(W.h,{alignItems:"center",justifyContent:"center"},ie<100?ie:"99+")),Object(e.h)(c.a,{class:a()("user-indicator-icon",{"force-desktop":ce}),size:20,strokeWidth:2}),Object(e.h)("img",{class:a()("menu-trigger-image",{"force-desktop":ce}),src:Object(h.cloudinary)(Object(h.getUserPhotoUrl)(k),2*U,{height:2*U,crop:"fill"})}),Object(e.h)(L.a,null,Object(e.h)("div",{className:"user-indicator-dropdown-menu"},Object(e.h)(M.b,{className:a()({"fixed-tooltip":he}),ref:Ye,useDrawerOnMobile:!0,noTail:!0,noPlace:!0,preventScrollBehindDrawer:!0,backdropDismiss:!0,onToggle:$e},Object(e.h)("div",{class:"menu-scroll-container"},Object(e.h)("a",{href:q,class:"profile-header",onClick:()=>Object(w.i)(w.a.USER_MENU_PROFILE_CLICKED)},Object(e.h)("img",{class:"header-user-image",src:Object(h.cloudinary)(Object(h.getUserPhotoUrl)(k),2*U,{height:2*U,crop:"fill"})}),Object(e.h)("div",{class:"labels"},Object(e.h)("div",{class:"h1"},ue),pe&&Object(e.h)("div",{class:"h2"},pe))),Object(e.h)("hr",null),k&&Object(e.h)(e.Fragment,null,Object(e.h)(F,{url:Object(h.getBaseReaderUrl)({utm_source:C}),analyticsEvent:w.a.USER_MENU_READER_CLICKED},Object(e.h)(G,{Icon:u.default})," Inbox"),Object(e.h)(D.SiteConfigGate,{configKey:"enable_feed"},Object(e.h)(F,{url:Object(h.getFeedUrl)({utm_source:C}),analyticsEvent:w.a.USER_MENU_FEED_CLICKED},Object(e.h)(G,{Icon:r.default})," Forum")),Object(e.h)(F,{url:Object(h.getDiscoverCategoryUrl)(),analyticsEvent:w.a.USER_MENU_DISCOVER_CLICKED},Object(e.h)(G,{Icon:O.default})," Explore"),Oe&&Object(e.h)(F,{url:Object(h.getChatUrl)(),analyticsEvent:w.a.USER_MENU_CHAT_CLICKED},Object(e.h)(G,{Icon:v.default})," Chat"),Object(e.h)(F,{url:Object(h.getNotificationsUrl)({utm_source:C}),analyticsEvent:w.a.USER_MENU_ACTIVITY_CLICKED},Object(e.h)(G,{Icon:g.default})," Notifications",ie>0?Object(e.h)(A.a,{className:"indicator-badge",count:ie}):null),Object(e.h)(F,{url:ne.url},Object(e.h)(G,{Icon:ne.type==="no-dashboard"?l.a:p.a,className:"start-writing-icon"})," ",ne.type==="no-dashboard"?"Start writing":"Writer dashboard")),Object(e.h)("hr",null),X&&Object(e.h)(F,{className:"secondary-item",url:Object(h.pathWithQuery)("/account",{utm_source:C}),analyticsEvent:w.a.USER_MENU_MANAGE_SUBSCRIPTION_CLICKED},"Manage subscription"),Object(e.h)(F,{className:"secondary-item",url:Object(h.getGlobalAccountSettingsUrl)({utm_source:C}),analyticsEvent:w.a.USER_MENU_ACCOUNT_SETTINGS_CLICKED},"Settings"),Object(e.h)(F,{className:"secondary-item",url:R},"Support"),Object(e.h)(F,{className:"secondary-item",url:Object(h.getSignoutUrl)({utm_source:C,for_pub:K==null?void 0:K.subdomain})},"Sign out"),Y&&Object(e.h)(F,{className:"secondary-item",onClick:()=>{var Ze;(Ze=Ye.current)==null||Ze.close(),Y()}},"Enter support mode"),ee&&Object(e.h)(F,{className:"secondary-item",onClick:ee},"Exit support mode"),K&&(k==null?void 0:k.is_global_admin)&&Object(e.h)(F,{className:"secondary-item",url:`${Object(h.getBaseUrl)({subdomain:"admin"})}/publications/${K.id}`},"Open in underground"),!(k==null?void 0:k.reader_installed_at)&&Object(e.h)(e.Fragment,null,Object(e.h)("hr",null),Object(e.h)(F,{className:"special-item",url:Object(h.getAppMarketingUrl)({utm_campaign:"app-marketing",utm_content:"user-menu-link"})},"Get the app ",Object(e.h)(N.default,{class:"item-badge branded",color:S.substack_color}))),Object(e.h)("hr",null),Object(e.h)("div",{class:"terms-footer"},Object(e.h)("a",{href:Object(h.getHomeUrl)({utm_source:C})},"About"),Object(e.h)("a",{href:Object(h.getPrivacyUrl)({pub:K,utm_source:C})},"Privacy"),Object(e.h)("a",{href:Object(h.getTermsUrl)({utm_source:C})},"Terms"),Object(e.h)("a",{href:Object(h.getInfoCollectionUrl)({utm_source:C})},"Collection notice"))))))):Object(e.h)(y.b,{href:Object(h.getSigninUrl)({for_pub:K==null?void 0:K.subdomain}),native:"true",class:a()("sign-in-link outline-grayscale",{"rounded-btn":Ne,"force-desktop":ce})},I`Sign in`))}function F({className:V,url:k,analyticsEvent:K,onClick:Y,children:ee}){return Object(e.h)("a",{className:`indicator-menu-item ${V}`,onClick:ae=>{K&&Object(w.i)(K),Y&&Y(ae)},href:k,native:!0},ee)}const z=20;function G({Icon:V,className:k}){return Object(e.h)(V,{className:a()(k,"indicator-item-icon"),height:z,stroke:"var(--color-primary)",strokeWidth:2})}},function($,n,t){"use strict";t.d(n,"a",function(){return l});var e=t(263);function s(p){if(Array.isArray(p))return Object(e.a)(p)}function o(p){if(typeof Symbol!="undefined"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}var a=t(312);function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(p){return s(p)||o(p)||Object(a.a)(p)||c()}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"SubstackLogoIcon",svgParams:{height:18,width:16,fill:"none",stroke:"none"}}),Object(e.h)("path",{d:"M16 4H0V6H16V4Z",fill:"#ff6719"}),Object(e.h)("path",{d:"M0 8V18L7.9993 13.534L16 18V8H0Z",fill:"#ff6719"}),Object(e.h)("path",{d:"M16 0H0V2H16V0Z",fill:"#ff6719"}));n.default=O},,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("MessageCircle",[["path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z",key:"5iho0c"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);n.a=s},function($,n){function t(e,s){for(var o=-1,a=e==null?0:e.length,c=0,l=[];++o<a;){var p=e[o];s(p,o,e)&&(l[c++]=p)}return l}$.exports=t},function($,n){function t(e){return function(s){return s==null?void 0:s[e]}}$.exports=t},function($,n,t){var e=t(579);function s(o,a,c){a=="__proto__"&&e?e(o,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):o[a]=c}$.exports=s},function($,n,t){"use strict";t.r(n),t.d(n,"Link",function(){return ft}),t.d(n,"default",function(){return ft});var e=t(18);function s(nt){this.j={},this.jr=[],this.jd=null,this.t=nt}s.prototype={accepts:function(){return!!this.t},tt:function(ct,Xe){if(Xe&&Xe.j)return this.j[ct]=Xe,Xe;var gt=Xe,Tt=this.j[ct];if(Tt)return gt&&(Tt.t=gt),Tt;Tt=o();var Ut=p(this,ct);return Ut?(Object.assign(Tt.j,Ut.j),Tt.jr.append(Ut.jr),Tt.jr=Ut.jd,Tt.t=gt||Ut.t):Tt.t=gt,this.j[ct]=Tt,Tt}};var o=function(){return new s},a=function(ct){return new s(ct)},c=function(ct,Xe,gt){ct.j[Xe]||(ct.j[Xe]=gt)},l=function(ct,Xe,gt){ct.jr.push([Xe,gt])},p=function(ct,Xe){var gt=ct.j[Xe];if(gt)return gt;for(var Tt=0;Tt<ct.jr.length;Tt++){var Ut=ct.jr[Tt][0],qt=ct.jr[Tt][1];if(Ut.test(Xe))return qt}return ct.jd},h=function(ct,Xe,gt){for(var Tt=0;Tt<Xe.length;Tt++)c(ct,Xe[Tt],gt)},m=function(ct,Xe){for(var gt=0;gt<Xe.length;gt++){var Tt=Xe[gt][0],Ut=Xe[gt][1];c(ct,Tt,Ut)}},g=function(ct,Xe,gt,Tt){for(var Ut=0,qt=Xe.length,sn;Ut<qt&&(sn=ct.j[Xe[Ut]]);)ct=sn,Ut++;if(Ut>=qt)return[];for(;Ut<qt-1;)sn=Tt(),c(ct,Xe[Ut],sn),ct=sn,Ut++;c(ct,Xe[qt-1],gt)},v="DOMAIN",O="LOCALHOST",u="TLD",r="NUM",i="PROTOCOL",d="MAILTO",b="WS",w="NL",E="OPENBRACE",S="OPENBRACKET",P="OPENANGLEBRACKET",D="OPENPAREN",W="CLOSEBRACE",B="CLOSEBRACKET",f="CLOSEANGLEBRACKET",y="CLOSEPAREN",M="AMPERSAND",N="APOSTROPHE",A="ASTERISK",L="AT",C="BACKSLASH",R="BACKTICK",U="CARET",Z="COLON",F="COMMA",z="DOLLAR",G="DOT",V="EQUALS",k="EXCLAMATION",K="HYPHEN",Y="PERCENT",ee="PIPE",ae="PLUS",he="POUND",me="QUERY",Ye="QUOTE",se="SEMI",ie="SLASH",Ee="TILDE",Oe="UNDERSCORE",ce="SYM",ue=Object.freeze({__proto__:null,DOMAIN:v,LOCALHOST:O,TLD:u,NUM:r,PROTOCOL:i,MAILTO:d,WS:b,NL:w,OPENBRACE:E,OPENBRACKET:S,OPENANGLEBRACKET:P,OPENPAREN:D,CLOSEBRACE:W,CLOSEBRACKET:B,CLOSEANGLEBRACKET:f,CLOSEPAREN:y,AMPERSAND:M,APOSTROPHE:N,ASTERISK:A,AT:L,BACKSLASH:C,BACKTICK:R,CARET:U,COLON:Z,COMMA:F,DOLLAR:z,DOT:G,EQUALS:V,EXCLAMATION:k,HYPHEN:K,PERCENT:Y,PIPE:ee,PLUS:ae,POUND:he,QUERY:me,QUOTE:Ye,SEMI:se,SLASH:ie,TILDE:Ee,UNDERSCORE:Oe,SYM:ce}),pe="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),$e=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,ne=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,X=/\uFE0F/,q=/\d/,Ne=/\s/;function Qe(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ct=o(),Xe=a(r),gt=a(v),Tt=o(),Ut=a(b),qt=[[q,gt],[$e,gt],[ne,gt],[X,gt]],sn=function(){var Fe=a(v);return Fe.j={"-":Tt},Fe.jr=[].concat(qt),Fe},_n=function(Fe){var pt=sn();return pt.t=Fe,pt};m(ct,[["'",a(N)],["{",a(E)],["[",a(S)],["<",a(P)],["(",a(D)],["}",a(W)],["]",a(B)],[">",a(f)],[")",a(y)],["&",a(M)],["*",a(A)],["@",a(L)],["`",a(R)],["^",a(U)],[":",a(Z)],[",",a(F)],["$",a(z)],[".",a(G)],["=",a(V)],["!",a(k)],["-",a(K)],["%",a(Y)],["|",a(ee)],["+",a(ae)],["#",a(he)],["?",a(me)],['"',a(Ye)],["/",a(ie)],[";",a(se)],["~",a(Ee)],["_",a(Oe)],["\\",a(C)]]),c(ct,`
`,a(w)),l(ct,Ne,Ut),c(Ut,`
`,o()),l(Ut,Ne,Ut);for(var Hn=0;Hn<pe.length;Hn++)g(ct,pe[Hn],_n(u),sn);var wn=sn(),Un=sn(),bn=sn(),cr=sn();g(ct,"file",wn,sn),g(ct,"ftp",Un,sn),g(ct,"http",bn,sn),g(ct,"mailto",cr,sn);var fr=sn(),ur=a(i),er=a(d);c(Un,"s",fr),c(Un,":",ur),c(bn,"s",fr),c(bn,":",ur),c(wn,":",ur),c(fr,":",ur),c(cr,":",er);for(var jr=sn(),wt=0;wt<nt.length;wt++)g(ct,nt[wt],jr,sn);return c(jr,":",ur),g(ct,"localhost",_n(O),sn),l(ct,q,Xe),l(ct,$e,gt),l(ct,ne,gt),l(ct,X,gt),l(Xe,q,Xe),l(Xe,$e,gt),l(Xe,ne,gt),l(Xe,X,gt),c(Xe,"-",Tt),c(gt,"-",Tt),c(Tt,"-",Tt),l(gt,q,gt),l(gt,$e,gt),l(gt,ne,gt),l(gt,X,gt),l(Tt,q,gt),l(Tt,$e,gt),l(Tt,ne,gt),l(Tt,X,gt),ct.jd=a(ce),ct}function Ze(nt,ct){for(var Xe=tt(ct.replace(/[A-Z]/g,function(cr){return cr.toLowerCase()})),gt=Xe.length,Tt=[],Ut=0,qt=0;qt<gt;){for(var sn=nt,_n=null,Hn=0,wn=null,Un=-1,bn=-1;qt<gt&&(_n=p(sn,Xe[qt]));)sn=_n,sn.accepts()?(Un=0,bn=0,wn=sn):Un>=0&&(Un+=Xe[qt].length,bn++),Hn+=Xe[qt].length,Ut+=Xe[qt].length,qt++;Ut-=Un,qt-=bn,Hn-=Un,Tt.push({t:wn.t,v:ct.substr(Ut-Hn,Hn),s:Ut-Hn,e:Ut})}return Tt}function tt(nt){for(var ct=[],Xe=nt.length,gt=0;gt<Xe;){var Tt=nt.charCodeAt(gt),Ut=void 0,qt=Tt<55296||Tt>56319||gt+1===Xe||(Ut=nt.charCodeAt(gt+1))<56320||Ut>57343?nt[gt]:nt.slice(gt,gt+2);ct.push(qt),gt+=qt.length}return ct}function Ft(nt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ft=function(ct){return typeof ct}:Ft=function(ct){return ct&&typeof Symbol=="function"&&ct.constructor===Symbol&&ct!==Symbol.prototype?"symbol":typeof ct},Ft(nt)}var Lt={defaultProtocol:"http",events:null,format:ht,formatHref:ht,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function rn(nt){nt=nt||{},this.defaultProtocol="defaultProtocol"in nt?nt.defaultProtocol:Lt.defaultProtocol,this.events="events"in nt?nt.events:Lt.events,this.format="format"in nt?nt.format:Lt.format,this.formatHref="formatHref"in nt?nt.formatHref:Lt.formatHref,this.nl2br="nl2br"in nt?nt.nl2br:Lt.nl2br,this.tagName="tagName"in nt?nt.tagName:Lt.tagName,this.target="target"in nt?nt.target:Lt.target,this.rel="rel"in nt?nt.rel:Lt.rel,this.validate="validate"in nt?nt.validate:Lt.validate,this.truncate="truncate"in nt?nt.truncate:Lt.truncate,this.className="className"in nt?nt.className:Lt.className,this.attributes=nt.attributes||Lt.attributes,this.ignoreTags=[];for(var ct=("ignoreTags"in nt)?nt.ignoreTags:Lt.ignoreTags,Xe=0;Xe<ct.length;Xe++)this.ignoreTags.push(ct[Xe].toUpperCase())}rn.prototype={resolve:function(ct){var Xe=ct.toHref(this.defaultProtocol);return{formatted:this.get("format",ct.toString(),ct),formattedHref:this.get("formatHref",Xe,ct),tagName:this.get("tagName",Xe,ct),className:this.get("className",Xe,ct),target:this.get("target",Xe,ct),rel:this.get("rel",Xe,ct),events:this.getObject("events",Xe,ct),attributes:this.getObject("attributes",Xe,ct),truncate:this.get("truncate",Xe,ct)}},check:function(ct){return this.get("validate",ct.toString(),ct)},get:function(ct,Xe,gt){var Tt=this[ct];if(!Tt)return Tt;var Ut;switch(Ft(Tt)){case"function":return Tt(Xe,gt.t);case"object":return Ut=gt.t in Tt?Tt[gt.t]:Lt[ct],typeof Ut=="function"?Ut(Xe,gt.t):Ut}return Tt},getObject:function(ct,Xe,gt){var Tt=this[ct];return typeof Tt=="function"?Tt(Xe,gt.t):Tt}};function ht(nt){return nt}var je=Object.freeze({__proto__:null,defaults:Lt,Options:rn});function Le(nt,ct){var Xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},gt=Object.create(nt.prototype);for(var Tt in Xe)gt[Tt]=Xe[Tt];return gt.constructor=ct,ct.prototype=gt,ct}function rt(){}rt.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lt.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(ct),start:this.startIndex(),end:this.endIndex()}}};function Pe(nt,ct){function Xe(gt,Tt){this.t=nt,this.v=gt,this.tk=Tt}return Le(rt,Xe,ct),Xe}var de=Pe("email",{isLink:!0}),be=Pe("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Ie=Pe("text"),ke=Pe("nl"),Te=Pe("url",{isLink:!0,toHref:function(){for(var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lt.defaultProtocol,Xe=this.tk,gt=!1,Tt=!1,Ut=[],qt=0;Xe[qt].t===i;)gt=!0,Ut.push(Xe[qt].v),qt++;for(;Xe[qt].t===ie;)Tt=!0,Ut.push(Xe[qt].v),qt++;for(;qt<Xe.length;qt++)Ut.push(Xe[qt].v);return Ut=Ut.join(""),gt||Tt||(Ut="".concat(ct,"://").concat(Ut)),Ut},hasProtocol:function(){return this.tk[0].t===i}}),x=Object.freeze({__proto__:null,MultiToken:rt,Base:rt,createTokenClass:Pe,MailtoEmail:de,Email:be,Text:Ie,Nl:ke,Url:Te});function H(){var nt=o(),ct=o(),Xe=o(),gt=o(),Tt=o(),Ut=o(),qt=o(),sn=a(Te),_n=o(),Hn=a(Te),wn=a(Te),Un=o(),bn=o(),cr=o(),fr=o(),ur=o(),er=a(Te),jr=a(Te),wt=a(Te),mt=a(Te),Fe=o(),pt=o(),Dt=o(),Jt=o(),Gt=o(),mn=o(),Cn=a(be),tr=o(),Zn=a(be),At=a(de),Xt=o(),en=o(),$n=o(),Xn=o(),Yn=a(ke);c(nt,w,Yn),c(nt,i,ct),c(nt,d,Xe),c(ct,ie,gt),c(gt,ie,Tt),c(nt,u,Ut),c(nt,v,Ut),c(nt,O,sn),c(nt,r,Ut),c(Tt,u,wn),c(Tt,v,wn),c(Tt,r,wn),c(Tt,O,wn),c(Ut,G,qt),c(Gt,G,mn),c(qt,u,sn),c(qt,v,Ut),c(qt,r,Ut),c(qt,O,Ut),c(mn,u,Cn),c(mn,v,Gt),c(mn,r,Gt),c(mn,O,Gt),c(sn,G,qt),c(Cn,G,mn),c(sn,Z,_n),c(sn,ie,wn),c(_n,r,Hn),c(Hn,ie,wn),c(Cn,Z,tr),c(tr,r,Zn);var Sn=[M,A,L,C,R,U,z,v,V,K,O,r,Y,ee,ae,he,i,ie,ce,Ee,u,Oe],nr=[N,f,W,B,y,Z,F,G,k,P,E,S,D,me,Ye,se];c(wn,E,bn),c(wn,S,cr),c(wn,P,fr),c(wn,D,ur),c(Un,E,bn),c(Un,S,cr),c(Un,P,fr),c(Un,D,ur),c(bn,W,wn),c(cr,B,wn),c(fr,f,wn),c(ur,y,wn),c(er,W,wn),c(jr,B,wn),c(wt,f,wn),c(mt,y,wn),c(Fe,W,wn),c(pt,B,wn),c(Dt,f,wn),c(Jt,y,wn),h(bn,Sn,er),h(cr,Sn,jr),h(fr,Sn,wt),h(ur,Sn,mt),h(bn,nr,Fe),h(cr,nr,pt),h(fr,nr,Dt),h(ur,nr,Jt),h(er,Sn,er),h(jr,Sn,jr),h(wt,Sn,wt),h(mt,Sn,mt),h(er,nr,er),h(jr,nr,jr),h(wt,nr,wt),h(mt,nr,mt),h(Fe,Sn,er),h(pt,Sn,jr),h(Dt,Sn,wt),h(Jt,Sn,mt),h(Fe,nr,Fe),h(pt,nr,pt),h(Dt,nr,Dt),h(Jt,nr,Jt),h(wn,Sn,wn),h(Un,Sn,wn),h(wn,nr,Un),h(Un,nr,Un),c(Xe,u,At),c(Xe,v,At),c(Xe,r,At),c(Xe,O,At),h(At,Sn,At),h(At,nr,Xt),h(Xt,Sn,At),h(Xt,nr,Xt);var zt=[M,N,A,C,R,U,W,z,v,V,K,r,E,Y,ee,ae,he,me,ie,ce,Ee,u,Oe];return h(Ut,zt,en),c(Ut,L,$n),h(sn,zt,en),c(sn,L,$n),h(qt,zt,en),h(en,zt,en),c(en,L,$n),c(en,G,Xn),h(Xn,zt,en),c($n,u,Gt),c($n,v,Gt),c($n,r,Gt),c($n,O,Cn),nt}function le(nt,ct,Xe){for(var gt=Xe.length,Tt=0,Ut=[],qt=[];Tt<gt;){for(var sn=nt,_n=null,Hn=null,wn=0,Un=null,bn=-1;Tt<gt&&!(_n=p(sn,Xe[Tt].t));)qt.push(Xe[Tt++]);for(;Tt<gt&&(Hn=_n||p(sn,Xe[Tt].t));)_n=null,sn=Hn,sn.accepts()?(bn=0,Un=sn):bn>=0&&bn++,Tt++,wn++;if(bn<0)for(var cr=Tt-wn;cr<Tt;cr++)qt.push(Xe[cr]);else{qt.length>0&&(Ut.push(Ce(Ie,ct,qt)),qt=[]),Tt-=bn,wn-=bn;var fr=Un.t,ur=Xe.slice(Tt-wn,Tt);Ut.push(Ce(fr,ct,ur))}}return qt.length>0&&Ut.push(Ce(Ie,ct,qt)),Ut}function Ce(nt,ct,Xe){var gt=Xe[0].s,Tt=Xe[Xe.length-1].e,Ut=ct.substr(gt,Tt-gt);return new nt(Ut,Xe)}var Ue=typeof console!="undefined"&&console&&console.warn||function(){},Ve={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function bt(){Ve.scanner=null,Ve.parser=null,Ve.pluginQueue=[],Ve.customProtocols=[],Ve.initialized=!1}function yt(nt,ct){for(var Xe=0;Xe<Ve.pluginQueue.length;Xe++)if(nt===Ve.pluginQueue[Xe][0]){Ue('linkifyjs: plugin "'.concat(nt,'" already registered - will be overwritten')),Ve.pluginQueue[Xe]=[nt,ct];return}Ve.pluginQueue.push([nt,ct]),Ve.initialized&&Ue('linkifyjs: already initialized - will not register plugin "'.concat(nt,'" until you manually call linkify.init(). To avoid this warning, please register all plugins before invoking linkify the first time.'))}function Qt(nt){if(Ve.initialized&&Ue('linkifyjs: already initialized - will not register custom protocol "'.concat(nt,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(nt))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");Ve.customProtocols.push(nt)}function tn(){Ve.scanner={start:Qe(Ve.customProtocols),tokens:ue},Ve.parser={start:H(),tokens:x};for(var nt={createTokenClass:Pe},ct=0;ct<Ve.pluginQueue.length;ct++)Ve.pluginQueue[ct][1]({scanner:Ve.scanner,parser:Ve.parser,utils:nt});Ve.initialized=!0}function Kn(nt){return Ve.initialized||tn(),le(Ve.parser.start,nt,Ze(Ve.scanner.start,nt))}function Ot(nt){for(var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Xe=Kn(nt),gt=[],Tt=0;Tt<Xe.length;Tt++){var Ut=Xe[Tt];Ut.isLink&&(!ct||Ut.t===ct)&&gt.push(Ut.toObject())}return gt}function lt(nt){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Xe=Kn(nt);return Xe.length===1&&Xe[0].isLink&&(!ct||Xe[0].t===ct)}var Be=t(19);function _e(nt){return new Be.Plugin({key:new Be.PluginKey("autolink"),appendTransaction:(ct,Xe,gt)=>{const Tt=ct.some(wn=>wn.docChanged)&&!Xe.doc.eq(gt.doc),Ut=ct.some(wn=>wn.getMeta("preventAutolink"));if(!Tt||Ut)return;const{tr:qt}=gt,sn=Object(e.combineTransactionSteps)(Xe.doc,ct),{mapping:_n}=sn;if(Object(e.getChangedRanges)(sn).forEach(({oldRange:wn,newRange:Un})=>{Object(e.getMarksBetween)(wn.from,wn.to,Xe.doc).filter(bn=>bn.mark.type===nt.type).forEach(bn=>{const cr=_n.map(bn.from),fr=_n.map(bn.to),ur=Object(e.getMarksBetween)(cr,fr,gt.doc).filter(pt=>pt.mark.type===nt.type);if(!ur.length)return;const er=ur[0],jr=Xe.doc.textBetween(bn.from,bn.to,void 0," "),wt=gt.doc.textBetween(er.from,er.to,void 0," "),mt=lt(jr),Fe=lt(wt);mt&&!Fe&&qt.removeMark(er.from,er.to,nt.type)}),Object(e.findChildrenInRange)(gt.doc,Un,bn=>bn.isTextblock).forEach(bn=>{const cr=gt.doc.textBetween(bn.pos,bn.pos+bn.node.nodeSize,void 0," ");Ot(cr).filter(fr=>fr.isLink).map(fr=>Yo(vr({},fr),{from:bn.pos+fr.start+1,to:bn.pos+fr.end+1})).filter(fr=>{const ur=Un.from>=fr.from&&Un.from<=fr.to,er=Un.to>=fr.from&&Un.to<=fr.to;return ur||er}).forEach(fr=>{qt.addMark(fr.from,fr.to,nt.type.create({href:fr.href}))})})}),!!qt.steps.length)return qt}})}function Ae(nt){return new Be.Plugin({key:new Be.PluginKey("handleClickLink"),props:{handleClick:(ct,Xe,gt)=>{var Tt;const Ut=Object(e.getAttributes)(ct.state,nt.type.name);return((Tt=gt.target)===null||Tt===void 0?void 0:Tt.closest("a"))&&Ut.href?(window.open(Ut.href,Ut.target),!0):!1}}})}function fe(nt){return new Be.Plugin({key:new Be.PluginKey("handlePasteLink"),props:{handlePaste:(ct,Xe,gt)=>{const{state:Tt}=ct,{selection:Ut}=Tt,{empty:qt}=Ut;if(qt)return!1;let sn="";gt.content.forEach(Hn=>{sn+=Hn.textContent});const _n=Ot(sn).find(Hn=>Hn.isLink&&Hn.value===sn);return!sn||!_n?!1:(nt.editor.commands.setMark(nt.type,{href:_n.href}),!0)}}})}const ft=e.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML(){return[{tag:"a[href]"}]},renderHTML({HTMLAttributes:nt}){return["a",Object(e.mergeAttributes)(this.options.HTMLAttributes,nt),0]},addCommands(){return{setLink:nt=>({chain:ct})=>ct().setMark(this.name,nt).setMeta("preventAutolink",!0).run(),toggleLink:nt=>({chain:ct})=>ct().toggleMark(this.name,nt,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:nt})=>nt().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Object(e.markPasteRule)({find:nt=>Ot(nt).filter(ct=>ct.isLink).map(ct=>({text:ct.value,index:ct.start,data:ct})),type:this.type,getAttributes:nt=>{var ct;return{href:(ct=nt.data)===null||ct===void 0?void 0:ct.href}}})]},addProseMirrorPlugins(){const nt=[];return this.options.autolink&&nt.push(_e({type:this.type})),this.options.openOnClick&&nt.push(Ae({type:this.type})),this.options.linkOnPaste&&nt.push(fe({editor:this.editor,type:this.type})),nt}})},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LucideTabChat",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M3 3H17C18.1046 3 19 3.89543 19 5V9.75008H11C9.89543 9.75008 9 10.6455 9 11.7501V16.7501C9 16.8314 9.00486 16.9117 9.0143 16.9905L4.65547 19.8964C4.58901 19.9407 4.5 19.893 4.5 19.8131V15H3C1.89543 15 1 14.1046 1 13V5C1 3.89543 1.89543 3 3 3Z"}),Object(e.h)("path",{d:"M11 9.75L20.5 9.75C21.6046 9.75 22.5 10.6454 22.5 11.75V16.75C22.5 17.8546 21.6046 18.75 20.5 18.75H20V22.3108C20 22.3911 19.91 22.4387 19.8437 22.3934L14.5 18.75L11 18.75C9.89543 18.75 9 17.8546 9 16.75L9 11.75C9 10.6454 9.89543 9.75 11 9.75Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LucideTabBrowse",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M16.2398 7.75977L14.1198 14.1198L7.75977 16.2398L9.87977 9.87977L16.2398 7.75977Z","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(196),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideCheck",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";var e=t(193);t.d(n,"a",function(){return e.a}),t.d(n,"b",function(){return e.b}),t.d(n,"c",function(){return e.c})},function($,n,t){"use strict";var e=t(0),s=t(1),o=t(14),a=t(4),c=t(10),l=t(46);const p=({allowAllDay:h,redirect:m,onCancel:g})=>{const[v,O]=Object(s.k)(!1);return Object(e.h)(l.g,{className:"customer-support-mode-form",analyticsName:"Customer Support Mode Form",action:"/api/v1/customer_support_mode",onSuccess:()=>document.location.href=m||"/",autoLock:!0},Object(e.h)(a.b,{gap:8},Object(e.h)(c.b.Meta,{className:"danger",weight:"semibold",color:"error"},"Danger"),Object(e.h)(c.b.H2,null,"Support Mode"),Object(e.h)(c.b.B3,null,"Be absolutely respectful to the writers on whose behalf you are working."),h&&Object(e.h)("label",null,Object(e.h)(a.c,{gap:8},Object(e.h)("input",{type:"checkbox",defaultChecked:!1,onInput:u=>O(u.target.checked)})," ",Object(e.h)(c.b.B3,null,"Allow access for the day because I'm doing Customer Support"))),v&&Object(e.h)("input",{type:"hidden",name:"all_pubs",value:"true"}),Object(e.h)("input",{type:"hidden",name:"minutes",value:v?10*60:30}),Object(e.h)("div",{id:"error-container"}),Object(e.h)(a.c,{gap:8,paddingTop:8},Object(e.h)(o.a,{priority:"destructive",type:"submit",id:"enter-support-mode"},"Enter support mode"),g&&Object(e.h)(o.a,{priority:"secondary",onClick:g},"Cancel"))))};n.a=p},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;var e=l(t(306)),s=l(t(581)),o=l(t(722)),a=l(t(723)),c=l(t(724));function l(b){return b&&b.__esModule?b:{default:b}}var p={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[]},h=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,m=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,g=/^[a-z\d]+$/,v=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,O=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,u=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,r=254;function i(b){var w=b.replace(/^"(.+)"$/,"$1");if(!w.trim())return!1;var E=/[\.";<>]/.test(w);if(E){if(w===b)return!1;var S=w.split('"').length===w.split('\\"').length;if(!S)return!1}return!0}function d(b,w){if((0,e.default)(b),w=(0,s.default)(w,p),w.require_display_name||w.allow_display_name){var E=b.match(h);if(E){var S=E[1];if(b=b.replace(S,"").replace(/(^<|>$)/g,""),S.endsWith(" ")&&(S=S.substr(0,S.length-1)),!i(S))return!1}else if(w.require_display_name)return!1}if(!w.ignore_max_length&&b.length>r)return!1;var P=b.split("@"),D=P.pop(),W=D.toLowerCase();if(w.host_blacklist.includes(W))return!1;var B=P.join("@");if(w.domain_specific_validation&&(W==="gmail.com"||W==="googlemail.com")){B=B.toLowerCase();var f=B.split("+")[0];if(!(0,o.default)(f.replace(/\./g,""),{min:6,max:30}))return!1;for(var y=f.split("."),M=0;M<y.length;M++)if(!g.test(y[M]))return!1}if(w.ignore_max_length===!1&&(!(0,o.default)(B,{max:64})||!(0,o.default)(D,{max:254})))return!1;if(!(0,a.default)(D,{require_tld:w.require_tld})){if(!w.allow_ip_domain)return!1;if(!(0,c.default)(D)){if(!D.startsWith("[")||!D.endsWith("]"))return!1;var N=D.substr(1,D.length-2);if(N.length===0||!(0,c.default)(N))return!1}}if(B[0]==='"')return B=B.slice(1,B.length-1),w.allow_utf8_local_part?u.test(B):v.test(B);for(var A=w.allow_utf8_local_part?O:m,L=B.split("."),C=0;C<L.length;C++)if(!A.test(L[C]))return!1;return!(w.blacklisted_chars&&B.search(new RegExp("[".concat(w.blacklisted_chars,"]+"),"g"))!==-1)}$.exports=n.default,$.exports.default=n.default},function($,n,t){"use strict";t.d(n,"a",function(){return r});var e=t(0),s=t(6),o=t.n(s),a=t(3),c=t.n(a),l=t(16),p=t(72),h=t(4),m=t(10),g=t(22),v=t(74),O=t(49),u=t(53);function r({post:i,publication:d,readOnly:b}){const w=Object(O.b)(),E=i.cover_image;return Object(e.h)(h.b,{as:b?"div":"a",className:u.a.post,bg:"elevated",border:"detail",radius:12,href:b?void 0:Object(l.getPostUrl)(d,i,{feedViewer:!w,noBase:!w}),minWidth:0},E&&Object(e.h)(p.a,{className:o()(u.a.postImage,w&&u.a.mobile),src:E,maxWidth:500}),Object(e.h)(h.b,{gap:4,padding:12,borderTop:E?"detail":"transparent"},Object(e.h)(h.a,{gap:8,paddingBottom:4,alignItems:"center",minWidth:0},Object(e.h)(v.a,{pub:d,size:20}),Object(e.h)(m.b.Meta,{ellipsis:!0},b?d.name:Object(e.h)(g.o,{href:Object(a.getPubUrl)(d)},d.name))),Object(e.h)(m.b.B3,{clamp:w?1:2,color:"primary",weight:"medium"},i.title),Object(e.h)(m.b.B4,{clamp:2,color:"secondary"},i.description)))}},function($,n,t){"use strict";t.d(n,"a",function(){return p});var e=t(0),s=t(6),o=t.n(s),a=t(4),c=t(10),l={badge:"frontend-components-NavBadge-module__badge--1pq8F",responsive:"frontend-components-NavBadge-module__responsive--3TOrk",binary:"frontend-components-NavBadge-module__binary--Zcfyp"};function p({className:h,responsive:m,count:g}){return Object(e.h)(a.a,{alignItems:"center",justifyContent:"center",radius:12,className:o()(l.badge,m&&l.responsive,!g&&l.binary,h)},g&&Object(e.h)(c.b.Digit,{color:"bg-light"},g<100?g:"99+"))}},function($,n,t){"use strict";t.d(n,"a",function(){return E}),t.d(n,"b",function(){return S});var e=t(0),s=t(6),o=t.n(s),a=t(622),c=t(14),l=t(4),p=t(35),h={attached:"frontend-pencraft-ButtonGroup-module__attached--2v3kN",borderless:"frontend-pencraft-ButtonGroup-module__borderless--29Cj_"},m=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(P,D,W)=>D in P?m(P,D,{enumerable:!0,configurable:!0,writable:!0,value:W}):P[D]=W,d=(P,D)=>{for(var W in D||(D={}))u.call(D,W)&&i(P,W,D[W]);if(O)for(var W of O(D))r.call(D,W)&&i(P,W,D[W]);return P},b=(P,D)=>g(P,v(D)),w=(P,D)=>{var W={};for(var B in P)u.call(P,B)&&D.indexOf(B)<0&&(W[B]=P[B]);if(P!=null&&O)for(var B of O(P))D.indexOf(B)<0&&r.call(P,B)&&(W[B]=P[B]);return W};const E=P=>{var D=P,{attached:W,gap:B=8}=D,f=w(D,["attached","gap"]);return Object(e.h)(l.c,d({gap:W?0:B,className:o()({[h.attached]:W})},f))},S=P=>{var D=P,{children:W,menuItems:B,fill:f="filled",priority:y="primary",size:M="medium",rounded:N=!1,additionalMenuProps:A={}}=D,L=w(D,["children","menuItems","fill","priority","size","rounded","additionalMenuProps"]);return Object(e.h)(E,{attached:!0},Object(e.h)(c.a,b(d({},L),{priority:y,size:M,rounded:N,fill:f==="borderless"?"filled":f,outline:f==="borderless"?"none":void 0}),W),Object(e.h)(p.c,b(d({},A),{trigger:Object(e.h)(c.c,b(d({className:o()({[h.borderless]:f==="borderless"})},L),{priority:y,fill:f,rounded:N,size:M==="small"?32:40}),Object(e.h)(a.a,{size:M==="small"?12:20}))}),B))}},,function($,n,t){"use strict";t.r(n),t.d(n,"addHookName",function(){return s});var e=t(0);function s(o,a){return e.options.__a&&e.options.__a(a),o}typeof window!="undefined"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.5.13",e.options,{Fragment:e.Fragment,Component:e.Component})},function($,n,t){(function(e){const s=t(458),o="en";let a=!1;const c=[];if(n.Translator=h,typeof window!="undefined"){let O=l();window.document.location.pathname==="/subscribe"&&["fr","es","de","pt"].includes(O)&&(O=o),window.I=h(O,{omitKeys:["ca","de","es","fr","it","pt"].includes(O)?null:["Subscribe","Subscribe now"]})}else e.I=(...O)=>{const u=p();return h(u,{omitKeys:["ca","de","es","fr","it","pt"].includes(u)?null:["Subscribe","Subscribe now"]})(...O)};function l(){var O,u;return typeof window=="undefined"?o:((O=window._preloads)==null?void 0:O.language)?(u=window._preloads)==null?void 0:u.language:(navigator==null?void 0:navigator.language)?navigator.language.split("-")[0].toLowerCase():o}function p(){var O;return typeof jsdom=="undefined"||typeof jsdom.window=="undefined"?o:((O=jsdom.window.navigator)==null?void 0:O.language)?jsdom.window.navigator.language:o}function h(O,{omitKeys:u}={}){function r(i,...d){return Array.isArray(i)&&(i=(i[0]||"")+i.slice(1).map((b,w)=>`\${${w}}${b}`).join("")),(u==null?void 0:u.includes(i.toString()))?i.toString():m(i.toString(),d,O)}for(const i in s)r[i]=(...d)=>m(i,d,O);return r}function m(O,u,r){r=(r||o).split(/[-_]/g)[0];let i=O;return s[O]?s[O][r]&&(i=s[O][r],g(O,r)):v(O,r),u.forEach((d,b)=>i=i.replace(new RegExp(`\\$\\{${b}\\}`,"g"),d.toString())),i}function g(O,u){typeof window!="undefined"&&(a||(a=!0,document.documentElement.lang=u))}function v(O){}}).call(this,t(144))},function($){$.exports=JSON.parse(`{"Subscribe":{"ca":"Subscriu-te","de":"Abonnieren","es":"Suscr\xEDbete","fr":"Inscrivez-vous","it":"Iscriviti","pt":"Inscrever-se"},"Subscribe now":{"ca":"Subscriu-te","de":"Abonnieren","es":"Suscr\xEDbete","fr":"Inscrivez-vous","it":"Iscriviti","pt":"Inscrever-se"},"Join":{"ca":"Subscriu-te","de":"Abonnieren","es":"Suscr\xEDbete","fr":"Inscrivez-vous","it":"Iscriviti","pt":"Inscrever-se"},"Upgrade":{"ca":"Canvia","de":"Umsteigen","es":"Cambiar","fr":"Mise \xE0 niveau","it":"Aggiornamento","pt":"Atualizar"},"Upgrade to paid":{"ca":"Canvia a la subscripci\xF3 de pagament","de":"Auf die bezahlte Abonnement umsteigen","es":"Cambiar a la suscripci\xF3n paga","fr":"Mise \xE0 niveau vers payant","it":"Passa all'abbonamento a pagamento","pt":"Mudar para a assinatura paga"}," now":{"ca":" ara","de":" jetzt","es":" ahora","fr":" maintenant","it":" adesso","pt":" agora"},"Continue":{"ca":"Continuar","de":"Fortsetzen","es":"Continuar","fr":"Continuer","it":"Continua","pt":"Continuar"},"Done":{"ca":"Fet","de":"Fertig","es":"Hecho","fr":"Terminer","it":"Fatto","pt":"Feito"},"Learn more":{"ca":"Saber m\xE9s","de":"Mehr erfahren","es":"Saber m\xE1s","fr":"En savoir plus","it":"Saperne di pi\xF9","pt":"Mais detalhes"},"Maybe later":{"ca":"Potser despr\xE9s","de":"Vielleicht sp\xE4ter","es":"Quiz\xE1s m\xE1s tarde","fr":"Peut-\xEAtre plus tard","it":"Forse pi\xF9 tardi","pt":"Talvez mais tarde"},"Give another gift":{"ca":"Fer un altre regal","de":"Machen Sie noch ein Geschenk","es":"Dar otro regalo","fr":"Donnez un autre cadeau","it":"Fai un altro regalo","pt":"D\xEA outro presente"},"Success!":{"ca":"\xC8xit!","de":"Erfolg!","es":"\xA1\xC9xito!","fr":"Succ\xE8s!","it":"Successo!","pt":"Sucesso!"},"Thank you!":{"ca":"Gr\xE0cies!","de":"Danke!","es":"Gracias!","fr":"Merci!","it":"Grazie!","pt":"Obrigado!"},"Spread the word":{"ca":"Escampa la veu","de":"Danke f\xFCr Ihr Abonnement","es":"Difundir la palabra","fr":"Faites passer le mot","it":"Spargi la voce","pt":"Fale sobre n\xF3s"},"change email":{"ca":"canviar e-mail","de":"E-Mail \xE4ndern","es":"cambiar e-mail","fr":"changez l'adresse email","it":"cambia email","pt":"mude o e-mail"},"No thanks":{"ca":"No gr\xE0cies","de":"Nein danke","es":"No gracias","fr":"Non merci","it":"No grazie","pt":"N\xE3o obrigado"},"Let me read it first":{"ca":"Deixin-m'ho llegir primer","de":"Lass es mich zuerst lesen","es":"D\xE9jame leerlo primero","fr":"Permettez-moi de le lire d'abord","it":"Fammi leggere prima","pt":"Deixe-me ler primeiro"},"Let me hear it first":{"ca":"Deixin-m'ho escoltar primer","de":"Lass es mich zuerst h\xF6ren","es":"D\xE9jame escucharlo primero","fr":"Permettez-moi de l'\xE9couter d'abord","it":"Fammi sentire prima","pt":"Deixe-me ouvir primeiro"},"Top posts":{"ca":"Millors posts","de":"Beste Posts","es":"Mejores posts","fr":"Meilleurs posts","it":"Migliori posti","pt":"Melhores posts"},"Authors":{"ca":"Autors","de":"Autoren","es":"Autores","fr":"Auteurs","it":"Autori","pt":"Autores"},"A Substack newsletter":{"ca":"Un newsletter de Substack","de":"Ein Substack-Newsletter","es":"Un newsletter de Substack","fr":"Une newsletter de Substack","it":"Una newsletter di Substack","pt":"Um newsletter da Substack"},"A Substack newsletter by":{"ca":"Un newsletter de Substack de","de":"Ein Substack-Newsletter von","es":"Un newsletter de Substack de","fr":"Une newsletter de Substack par","it":"Una newsletter da Substack di","pt":"Um newsletter da Substack de"},"You\u2019ve subscribed to public posts from":{"ca":"T'has registrat a publicacions p\xFAbliques de","de":"Sie haben sich f\xFCr \xF6ffentliche Beitr\xE4ge angemeldet von","es":"Te has registrado para publicaciones p\xFAblicas de","fr":"Vous vous \xEAtes inscrit(e) \xE0 des publications publiques de","it":"Ti sei iscritto a post pubblici da","pt":"Voc\xEA se inscreveu para receber posts p\xFAblicos do"},"You\u2019re on the free list":{"ca":"Ets a la llista gratu\xEFta","de":"Sie sind auf der freien Liste","es":"Est\xE1s en la lista gratuita","fr":"Vous \xEAtes sur la liste gratuite","it":"Sei nella lista libera","pt":"Voc\xEA est\xE1 na lista gr\xE1tis"},"Your gift was sent to ":{"ca":"El teu regal es va enviar a ","de":"Ihr Geschenk wurde gesendet an ","es":"Tu regalo fue enviado a ","fr":"Votre cadeau a \xE9t\xE9 envoy\xE9 \xE0 ","it":"Il tuo regalo \xE8 stato inviato a","pt":"Seu presente foi enviado para "},"Your gift was sent":{"ca":"El teu regal es va enviar","de":"Ihr Geschenk wurde gesendet","es":"Tu regalo fue enviado","fr":"Votre cadeau a \xE9t\xE9 envoy\xE9","it":"Il tuo regalo \xE8 stato inviato","pt":"Seu presente foi enviado"},"Your group will be administered by ":{"ca":"El teu grup ser\xE0 administrat per ","de":"Ihre Gruppe wird verwaltet von ","es":"Tu grupo ser\xE1 administrado por ","fr":"Votre groupe sera administr\xE9 par ","it":"Il tuo regalo sar\xE0 amministrato da","pt":"Seu grupo ser\xE1 administrado por "},"Your donation matters.":{"ca":"La teva donaci\xF3 importa.","de":"Ihre Spende ist wichtig.","es":"Tu donaci\xF3n importa.","fr":"Votre don est important.","it":"La tua donazione conta.","pt":"Sua doa\xE7\xE3o \xE9 importante."},"You\u2019re subscribed as ":{"ca":"Est\xE0s subscrit com a","de":"Sie sind abonniert als ","es":"Est\xE1s suscrito como ","fr":"Vous \xEAtes abonn\xE9(e) en tant que ","it":"Sei iscritto come","pt":"Voc\xEA est\xE1 inscrito como "},"Login":{"ca":"Iniciar sessi\xF3","de":"Anmelden","es":"Iniciar sesi\xF3n","fr":"Se connecter","it":"Accesso","pt":"Fazer login"},"Log in":{"ca":"Iniciar sessi\xF3","de":"Anmelden","es":"Iniciar sesi\xF3n","fr":"Se connecter","it":"Accesso","pt":"Fazer login"},"Sign in":{"ca":"Iniciar sessi\xF3","de":"Anmelden","es":"Iniciar sesi\xF3n","fr":"Se connecter","it":"Accesso","pt":"Fazer login"},"Not you?":{"ca":"No ets tu?","de":"Das sind Sie nicht?","es":"\xBFNo eres t\xFA?","fr":"Pas toi?","it":"Non sei tu?","pt":"N\xE3o \xE9 voc\xEA?"},"Type your email\u2026":{"ca":"Escriu el teu correu electr\xF2nic\u2026","de":"Geben Sie Ihre E-Mail-Adresse ein\u2026","es":"Escribe tu correo\u2026","fr":"Tapez votre email\u2026","it":"Digita la tua email\u2026","pt":"Digite seu email\u2026"},"What\u2019s your email?":{"ca":"Quin \xE9s el teu email?","de":"Was ist Ihre E-Mail-Adresse?","es":"\xBFCu\xE1l es tu correo electr\xF3nico?","fr":"Quelle est votre adresse email?","it":"Qual \xE8 la tua email?","pt":"Qual \xE9 o seu email?"},"Buying for a group?":{"ca":"Comprant per a un grup?","de":"F\xFCr eine Gruppe kaufen?","es":"\xBFComprando para un grupo?","fr":"Acheter pour un groupe?","it":"Acquistare per un gruppo?","pt":"Comprando para um grupo?"},"If you enjoy":{"ca":"Si us agrada","de":"Wenn Ihnen es gef\xE4llt","es":"Si te gusta","fr":"Si vous aimez","it":"Se ti piace","pt":"Se voc\xEA gosta de"},"consider becoming a paid subscriber":{"ca":"considera convertir-te en un subscriptor de pagament","de":"sollten Sie ein zahlender Abonnent werden","es":"considera convertirte en un suscriptor de pago","fr":"envisagez de devenir un(e) abonn\xE9(e) payant(e)","it":"considera di diventare un abbonato pagante","pt":"considere tornar-se um assinante pago"},"If you want to help \${0}":{"ca":"Si vols ajudar \${0}","de":"M\xF6chten Sie \${0} unterst\xFCtzen","es":"Si quieres ayudar a \${0}","fr":"Si vous voulez aider \${0}","it":"Se vuoi aiutare \${0}","pt":"Se voc\xEA quiser ajudar \${0}"},"If you want to help \${0} even more":{"ca":"Si vols ajudar \${0} encara m\xE9s","de":"M\xF6chten Sie \${0} noch mehr unterst\xFCtzen","es":"Si quieres ayudar a \${0} a\xFAn m\xE1s","fr":"Si vous voulez aider \${0} encore plus","it":"Se vuoi aiutare \${0} ancora di pi\xF9","pt":"Se voc\xEA quiser ajudar \${0} ainda mais"},"share your reason for signing up":{"ca":"comparteix la ra\xF3 per registrar-te","de":"dann teilen Sie ihn mit Ihren Freunden","es":"comparte tu raz\xF3n para registrarte","fr":"partagez votre raison de vous inscrire","it":"condividi il motivo della tua iscrizione","pt":"compartilhe seu motivo para se inscrever"},"share your reason for subscribing":{"ca":"comparteix la ra\xF3 per subscriure't","de":"dann teilen Sie ihn mit Ihren Freunden","es":"comparte tu raz\xF3n para suscribirte","fr":"partagez votre raison de vous abonner","it":"condividi il motivo del tuo abbonamento","pt":"compartilhe seu motivo para se inscrever"},"show full post":{"ca":"mostra la publicaci\xF3 completa","de":"Vollst\xE4ndigen Beitrag anzeigen","es":"mostrar publicaci\xF3n completa","fr":"afficher le post complet","it":"mostra post completo","pt":"mostrar post completo"},"Community":{"ca":"Comunitat","de":"Gemeinschaft","es":"Comunidad","fr":"Communaut\xE9","it":"Comunit\xE0","pt":"Comunidade"},"About":{"ca":"Sobre","de":"\xDCber","es":"Sobre","fr":"\xC0 propos de","it":"Soggetto","pt":"Sobre"},"Archive":{"ca":"Arxiu","de":"Archiv","es":"Archivo","fr":"Archives","it":"Archivio","pt":"Arquivo"},"Account":{"ca":"Compte","de":"Konto","es":"Cuenta","fr":"Compte","it":"Account","pt":"Conta"},"My Account":{"ca":"El meu compte","de":"Mein Konto","es":"Mi cuenta","fr":"Mon compte","it":"Il mio account","pt":"Minha conta"},"By submitting, you agree to":{"ca":"En enviar-ho, acceptes","de":"Mit dem Absenden, stimmen Sie zu","es":"Al enviar, aceptas","fr":"En soumettant, vous acceptez","it":"Inviando, accetti","pt":"Ao enviar, voc\xEA concorda com"},"By registering you agree to":{"ca":"Registrant-te, acceptes","de":"Mit Ihrer Registrierung, stimmen Sie zu","es":"Al registrarte, aceptas","fr":"En vous inscrivant, vous acceptez","it":"Registrandoti, accetti","pt":"Ao se registrar, voc\xEA concorda com"},"Terms":{"ca":"Termes","de":"Bedingungen","es":"Condiciones","fr":"Termes","it":"Condizioni","pt":"Termos"},"Privacy":{"ca":"Privadesa","de":"Datenschutz","es":"Privacidad","fr":"Confidentialit\xE9","it":"Privacy","pt":"Privacidade"},"Substack's Terms of Use":{"ca":"els Termes de serveis de Substack","de":"Substacks Nutzungsbedingungen","es":"los T\xE9rminos de servicio de Substack","fr":"les Conditions d'utilisation de Substack","it":"le Condizioni di utilizzo di Substack","pt":"os Termos de Servi\xE7o da Substack"},"our Privacy Policy":{"ca":"la nostra Pol\xEDtica de Privacitat","de":"unseren Datenschutzbestimmungen","es":"nuestra Pol\xEDtca de Privacidad","fr":"notre Politique de Confidentialit\xE9","it":"la nostra Politica sulla privacy","pt":"a nossa Pol\xEDtica de Privacidade"},"our Information collection notice":{"ca":"el nostre av\xEDs de recollida d'informaci\xF3","de":"unsere Informationserhebungsmitteilung","es":"nuestro aviso de recopilaci\xF3n de informaci\xF3n","fr":"notre avis de collecte d'informations","it":"il nostro avviso di raccolta delle informazioni","pt":"nosso aviso de coleta de informa\xE7\xF5es"},"and":{"ca":"i","de":"und","es":"y","fr":"et","it":"e","pt":"e"},"Help":{"ca":"Ajuda","de":"Hilfe","es":"Ayuda","fr":"Aide","it":"Aiuto","pt":"Ajuda"},"Get started":{"ca":"Comen\xE7ar","de":"Loslegen","es":"Empezar","fr":"Commencer","it":"Iniziare","pt":"Iniciar"},"Start writing":{"ca":"Comen\xE7a a escriure","de":"Anfangen zu schreiben","es":"Empieza a escribir","fr":"Commencez \xE0 \xE9crire","it":"Inizia a scrivere","pt":"Comece a escrever"},"Start reading":{"ca":"Comen\xE7a a llegir","de":"Anfangen zu lesen","es":"Empieza a leer","fr":"Commencez \xE0 lire","it":"Inizia a leggere","pt":"Comece a ler"},"Get the app":{"ca":"Descarrega l'aplicaci\xF3","de":"Laden Sie die App herunter","es":"Descarga la aplicaci\xF3n","fr":"T\xE9l\xE9chargez l'app","it":"Scarica l'app","pt":"Baixe o aplicativo"},"Play video":{"ca":"Reprodueix el v\xEDdeo","de":"Video abspielen","es":"Reproduce el video","fr":"Lire la vid\xE9o","it":"Riproduci video","pt":"Reproduzir v\xEDdeo"},"The home for great writing.":{"ca":"La casa de la gran escriptura.","de":"Das Haus des gro\xDFen Schreibens.","es":"La casa de la gran escritura.","fr":"La maison de grande \xE9criture.","it":"La casa della grande scrittura.","pt":"A casa da grande escrita."},"The home for great":{"ca":"La llar dels grans","de":"Das Zuhause f\xFCr gro\xDFe","es":"El hogar de grandes","fr":"La maison des grands","it":"La casa di grandi","pt":"A casa de grandes"},"writers":{"ca":"escriptors","de":"Autoren","es":"escritores","fr":"\xE9crivains","it":"scrittori","pt":"escritores"},"readers":{"ca":"lectors","de":"Leser","es":"lectores","fr":"lecteurs","it":"lettori","pt":"leitores"},"subscribers":{"ca":"subscriptors","de":"Abonnenten","es":"suscriptores","fr":"abonn\xE9s","it":"iscritti","pt":"assinantes"},"month":{"ca":"mes","de":"Monat","es":"mes","fr":"mois","it":"mese","pt":"m\xEAs"},"We believe that what you read matters and great writing is valuable. We\u2019re building a future where writers can flourish by being paid directly by readers.":{"ca":"Creiem que el que llegeix \xE9s important i una bona escriptura \xE9s valuosa. Estem construint un futur on els escriptors puguin prosperar amb el pagament directament dels lectors.","de":"Wir glauben, dass das, was Sie lesen, wichtig ist und gro\xDFartiges Schreiben wertvoll ist. Wir bauen eine Zukunft auf, in der Autoren gedeihen k\xF6nnen, indem sie direkt von Lesern bezahlt werden.","es":"Creemos que lo que lees importa y que escribir bien es valioso. Estamos construyendo un futuro en el que los escritores puedan prosperar si los lectores les pagan directamente.","fr":"Nous pensons que ce que vous lisez est important et qu'une bonne \xE9criture est pr\xE9cieuse. Nous construisons un avenir o\xF9 les \xE9crivains peuvent s'\xE9panouir en \xE9tant pay\xE9s directement par les lecteurs.","it":"Crediamo che ci\xF2 che leggi sia importante e che scrivi in modo eccellente sia prezioso. Stiamo costruendo un futuro in cui gli scrittori possono prosperare essendo pagati direttamente dai lettori.","pt":"Acreditamos que o que voc\xEA l\xEA \xE9 importante e uma \xF3tima escrita \xE9 valiosa. Estamos construindo um futuro onde os escritores podem florescer sendo pagos diretamente pelos leitores."},"A new model for writing.":{"ca":"Un nou model per escriure.","de":"Ein neues Schreibmodell.","es":"Un nuevo model de escritura.","fr":"Un nouveau mod\xE8le d'\xE9criture.","it":"Un nuovo modello di scrittura.","pt":"Um novo modelo de escrita."},"The subscription model rewards you for doing great work that you believe in. You don\u2019t need to play by the rules of social media to succeed.":{"ca":"El model de subscripci\xF3 us recompensa per fer un gran treball en el qual creieu. No cal que us seguiu les regles de les xarxes socials per tenir \xE8xit.","de":"Das Abonnementmodell belohnt Sie f\xFCr gro\xDFartige Arbeit, an die Sie glauben. Sie m\xFCssen sich nicht an die Regeln der sozialen Medien halten, um erfolgreich zu sein.","es":"El modelo de suscripci\xF3n lo recompensa por hacer un gran trabajo en el que cree. No necesita seguir las reglas de las redes sociales para tener \xE9xito.","fr":"Le mod\xE8le d'abonnement vous r\xE9compense pour l'excellent travail auquel vous croyez. Vous n'avez pas besoin de respecter les r\xE8gles des m\xE9dias sociaux pour r\xE9ussir.","it":"Il modello di abbonamento ti premia per aver svolto un ottimo lavoro in cui credi. Non \xE8 necessario rispettare le regole dei social media per avere successo.","pt":"O modelo de assinatura recompensa voc\xEA por fazer um \xF3timo trabalho no qual acredita. Voc\xEA n\xE3o precisa seguir as regras das m\xEDdias sociais para ter sucesso."},"Simple but powerful publishing.":{"ca":"Publicaci\xF3 senzilla per\xF2 potent.","de":"Einfaches, aber leistungsstarkes Publishing.","es":"Publicaci\xF3n simple pero poderosa.","fr":"Publication simple mais puissante.","it":"Editoria semplice ma potente.","pt":"Publica\xE7\xE3o simples, mas poderosa."},"Spend all your time and energy focused on the work that really matters: the writing itself. Substack takes care of everything else.":{"ca":"Dedica tot el teu temps i energia centrat en el treball que realment importa: l'escriptura en si. Substack s'encarrega de tota la resta.","de":"Konzentrieren Sie sich all Ihre Zeit und Energie auf die Arbeit, die wirklich z\xE4hlt: das Schreiben selbst. Substack k\xFCmmert sich um alles andere.","es":"Dedique todo su tiempo y energ\xEDa a concentrarse en el trabajo que realmente importa: la escritura en s\xED. Substack se encarga de todo lo dem\xE1s.","fr":"Passez tout votre temps et votre \xE9nergie \xE0 vous concentrer sur le travail qui compte vraiment : l'\xE9criture elle-m\xEAme. Substack s'occupe de tout le reste.","it":"Trascorri tutto il tuo tempo e le tue energie concentrati sul lavoro che conta davvero: la scrittura stessa. Substack si occupa di tutto il resto.","pt":"Gaste todo o seu tempo e energia focado no trabalho que realmente importa: a escrita em si. Substack cuida de todo o resto."},"Own your work.":{"ca":"Ser propietari del teu treball.","de":"Besitze deine Arbeit.","es":"Sea due\xF1o de su trabajo.","fr":"Poss\xE9dez votre travail.","it":"Possiedi il tuo lavoro.","pt":"Seja dono do seu trabalho."},"On Substack, you own your content, your IP, and your mailing list \u2013 forever. You can leave and take it all with you at any time.":{"ca":"A Substack, sou el propietari del vostre contingut, de la vostra propietat intel\xB7lectual i de la vostra llista de correu, per sempre. Pots marxar i portar-ho tot amb tu en qualsevol moment.","de":"Auf Substack besitzen Sie Ihre Inhalte, Ihr geistiges Eigentum und Ihre Mailingliste \u2013 f\xFCr immer. Sie k\xF6nnen jederzeit alles verlassen und mitnehmen.","es":"En Substack, eres due\xF1o de tu contenido, tu propriedad intelectual y tu lista de correo, para siempre. Puedes irte y llev\xE1rtelo todo contigo en cualquier momento.","fr":"Sur Substack, vous \xEAtes propri\xE9taire de votre contenu, de votre propri\xE9t\xE9 intellectuelle et de votre liste de diffusion - pour toujours. Vous pouvez partir et tout emporter avec vous \xE0 tout moment.","it":"Su Substack, possiedi i tuoi contenuti, la tua propriet\xE0 intellecttuale e la tua mailing list, per sempre. Puoi partire e portare tutto con te in qualsiasi momento.","pt":"No Substack, voc\xEA possui seu conte\xFAdo, sua propriedade intelectual e sua lista de e-mails \u2013 para sempre. Voc\xEA pode sair e levar tudo com voc\xEA a qualquer momento."},"A media business in minutes.":{"ca":"Un negoci de mitjans en q\xFCesti\xF3 de minuts.","de":"Ein Mediengesch\xE4ft in wenigen Minuten.","es":"Un negocio de medios en cuesti\xF3n de minutos.","fr":"Une entreprise de m\xE9dias en quelques minutes.","it":"Un business dei media in pochi minuti.","pt":"Um neg\xF3cio de m\xEDdia em quest\xE3o de minutos."},"We make subscription publishing simple. Start your Substack at breakfast; start bringing in revenue by lunchtime.":{"ca":"Facilitem la publicaci\xF3 per subscripci\xF3. Comen\xE7a la teva Substack a l'esmorzar; comen\xE7a a generar ingressos a l'hora de dinar.","de":"Wir machen die Abonnementver\xF6ffentlichung einfach. Starten Sie Ihren Substack beim Fr\xFChst\xFCck; Beginnen Sie bis zur Mittagszeit damit, Einnahmen zu erzielen.","es":"Simplificamos la publicaci\xF3n por suscripci\xF3n. Comience su Substack en el desayuno; comience a generar ingresos a la hora del almuerzo.","fr":"Nous simplifions la publication par abonnement. Commencez votre Substack au petit-d\xE9jeuner; commencer \xE0 g\xE9n\xE9rer des revenus \xE0 l'heure du d\xE9jeuner.","it":"Semplifichiamo la pubblicazione degli abbonamenti. Inizia il tuo Substack a colazione; iniziare a guadagnare entro l'ora di pranzo.","pt":"Tornamos a publica\xE7\xE3o de assinatura simples. Comece seu Substack no caf\xE9 da manh\xE3; comece a gerar receita na hora do almo\xE7o."},"For the soon-to-be discovered and the already-well-known.":{"ca":"Pels propers a ser descoberts i els ja coneguts.","de":"F\xFCr Neuentdeckte und Altbekannte.","es":"Para los que pronto se descubrir\xE1n y los ya conocidos.","fr":"Pour ceux qui seront bient\xF4t d\xE9couverts et ceux qui sont d\xE9j\xE0 connus.","it":"Per chi \xE8 presto scoperto e per chi \xE8 gi\xE0 noto.","pt":"Para os que logo ser\xE3o descobertos e os j\xE1 conhecidos."},"Substack\u2019s simple product, business model, and creator-friendly terms has triggered an explosion of new creative work.":{"ca":"El producte senzill, el model de negoci i els termes senzills de Substack han provocat una explosi\xF3 de nous treballs creatius.","de":"Das einfache Produkt, das Gesch\xE4ftsmodell und die sch\xF6pferfreundlichen Bedingungen von Substack haben eine Explosion neuer kreativer Arbeiten ausgel\xF6st.","es":"El producto simple, el modelo comercial y los t\xE9rminos amigables para los creadores de Substack han desencadenado una explosi\xF3n de nuevos trabajos creativos.","fr":"Le produit simple, le mod\xE8le commercial et les termes conviviaux pour les cr\xE9ateurs de Substack ont d\xE9clench\xE9 une explosion de nouveaux travaux cr\xE9atifs.","it":"Il prodotto semplice, il modello di business e i termini adatti ai creatori di Substack hanno innescato un'esplosione di nuovo lavoro creativo.","pt":"O produto simples, o modelo de neg\xF3cios e os termos amig\xE1veis do criador da Substack desencadearam uma explos\xE3o de novos trabalhos criativos."},"Podcasting on Substack":{"ca":"Podcasting a Substack","de":"Podcasting auf Substack","es":"Podcasting en Substack","fr":"Podcasting sur Substack","it":"Podcasting su Substack","pt":"Podcasting no Substack"},"Pioneering subscription-backed audio":{"ca":"\xC0udio de subscripci\xF3 innovador","de":"Innovatives Abonnement-Audio","es":"Audio de suscripci\xF3n innovador","fr":"Audio d'abonnement novateur","it":"Audio in abbonamento innovativo","pt":"\xC1udio de assinatura inovador"},"Bloggers on Substack":{"ca":"Bloggers a Substack","de":"Blogger auf Substack","es":"Blogueros en Substack","fr":"Blogueurs sur Substack","it":"Blogger su Substack","pt":"Blogueiros no Substack"},"Transfer blogs to Substack & unlock subscriptions":{"ca":"Transfereix blogs a Substack i desbloqueja subscripcions","de":"\xDCbertragen Sie Blogs auf Substack und entsperren Sie Abonnements","es":"Transferir blogs a Substack y desbloquear suscripciones","fr":"Transf\xE9rer des blogs vers Substack et d\xE9bloquer des abonnements","it":"Trasferisci i blog in Substack e sblocca gli abbonamenti","pt":"Transfira blogs para Substack e desbloqueie assinaturas"},"Investing and business writing":{"ca":"Escriptura sobre inversions i negocis","de":"Schreiben \xFCber Investitionen und Unternehmen","es":"Escritura de inversiones y negocios","fr":"\xC9criture sur l'investissement et les affaires","it":"Scrittura di investimenti e affari","pt":"Escrita sobre investimentos e neg\xF3cios"},"An obvious match for the subscription model":{"ca":"Una coincid\xE8ncia evident per al model de subscripci\xF3","de":"Eine offensichtliche \xDCbereinstimmung f\xFCr das Abonnementmodell","es":"Una combinaci\xF3n obvia para el modelo de suscripci\xF3n","fr":"Une correspondance \xE9vidente pour le mod\xE8le d'abonnement","it":"Una corrispondenza ovvia per il modello di abbonamento","pt":"Uma correspond\xEAncia \xF3bvia para o modelo de assinatura"},"Comic books":{"ca":"Els c\xF2mics","de":"Die Comics","es":"Los c\xF3mics","fr":"Les bandes dessin\xE9es","it":"I fumetti","pt":"Os quadrinhos"},"Join the world\u2019s best comic book creators":{"ca":"Uneix-te als millors creadors de c\xF2mics del m\xF3n","de":"Schlie\xDFen Sie sich den weltbesten Comic-Autoren an","es":"\xDAnete a los mejores creadores de c\xF3mics del mundo.","fr":"Rejoignez les meilleurs cr\xE9ateurs de bandes dessin\xE9es au monde","it":"Unisciti ai migliori creatori di fumetti del mondo","pt":"Junte-se aos melhores criadores de quadrinhos do mundo"},"Local news reporting":{"ca":"Not\xEDcies locals","de":"Lokale Nachrichtenberichterstattung","es":"Informes de noticias locales","fr":"Reportage sur l'actualit\xE9 locale","it":"Segnalazione di notizie locali","pt":"Relat\xF3rio de not\xEDcias locais"},"A sustainable model for local journalism":{"ca":"Un model sostenible per al periodisme local","de":"Ein nachhaltiges Modell f\xFCr Lokaljournalismus","es":"Un modelo sostenible para el periodismo local","fr":"Un mod\xE8le durable pour le journalisme local","it":"Un modello sostenibile per il giornalismo locale","pt":"Um modelo sustent\xE1vel para o jornalismo local"},"Food writing":{"ca":"Escriptura d'aliments","de":"Schreiben \xFCber Essen","es":"Escritura de comida","fr":"\xC9criture culinaire","it":"Scrittura di cibo","pt":"Escrita de comida"},"Food publishing made simple":{"ca":"Publicaci\xF3 culin\xE0ria simplificada","de":"Kulinarisches Publishing leicht gemacht","es":"Publicaci\xF3n culinaria simplificada","fr":"L'\xE9dition culinaire simplifi\xE9e","it":"L'editoria culinaria resa semplice","pt":"Publica\xE7\xE3o culin\xE1ria simplificada"},"Join the new wave of writers and creators.":{"ca":"Uneix-te a la nova onada d'escriptors i creadors.","de":"Schlie\xDFen Sie sich der neuen Welle von Autoren und Sch\xF6pfern an.","es":"\xDAnete a la nueva ola de escritores y creadores.","fr":"Rejoignez la nouvelle vague d'\xE9crivains et de cr\xE9ateurs.","it":"Unisciti alla nuova ondata di scrittori e creatori.","pt":"Junte-se \xE0 nova onda de escritores e criadores."},"Estimate what you could make on Substack":{"ca":"Estima el que pots guanyar a Substack","de":"Sch\xE4tzen Sie, was Sie auf Substack verdienen k\xF6nnten","es":"Estima lo que podr\xEDas ganar en Substack","fr":"Estimez ce que vous pourriez gagner sur Substack","it":"Stima cosa potresti guadagnare su Substack","pt":"Estime o que voc\xEA pode ganhar no Substack"},"Earnings estimate calculated for \${0} paid subscribers, priced \${1}/month. It is net of Substack and credit card fees. Actual subscriber counts and earnings may vary.":{"ca":"Guanys estimats calculats per a \${0} subscriptors de pagament, amb preu \${1}/mes. Est\xE0 net de les comissions de Substack i targetes de cr\xE8dit. El nombre real de subscriptors i els guanys poden variar.","de":"Gesch\xE4tzte Einnahmen berechnet f\xFCr \${0} zahlende Abonnenten mit Preis \${1}/Monat. Es versteht sich ohne Substack- und Kreditkartengeb\xFChren. Die tats\xE4chlichen Abonnentenzahlen und Einnahmen k\xF6nnen variieren.","es":"Estimaci\xF3n de ganancias calculada para \${0} suscriptores pagos, precio \${1}/mes. Es neto de tarifas de Substack y de tarjeta de cr\xE9dito. Los recuentos reales de suscriptores y las ganancias pueden variar.","fr":"Estimation des revenus calcul\xE9e pour \${0} abonn\xE9s payants, prix \${1} / mois. Il est net des frais de Substack et de carte de cr\xE9dit. Le nombre r\xE9el d'abonn\xE9s et les revenus peuvent varier.","it":"Guadagno stimato calcolato per \${0} abbonati pagati, con prezzo \${1}/mese. \xC8 al netto delle commissioni Substack e delle carte di credito. I conteggi e le entrate effettivi degli abbonati possono variare.","pt":"Estimativa de ganhos calculada para \${0} assinantes pagos, com pre\xE7o \${1}/m\xEAs. \xC9 l\xEDquido de taxas do Substack e de cart\xE3o de cr\xE9dito. As contagens reais de assinantes e os ganhos podem variar."},"How many subscribers could I get?":{"ca":"Quants subscriptors podria aconseguir?","de":"Wie viele Abonnenten k\xF6nnte ich gewinnen?","es":"\xBFCu\xE1ntos suscriptores podr\xEDa conseguir?","fr":"Combien d'abonn\xE9s puis-je obtenir?","it":"Quanti iscritti potrei ottenere?","pt":"Quantos inscritos eu poderia obter?"},"It depends on how many people find value in what you\u2019re making. If you have a highly engaged email list, aim for 10% to become paid subscribers over time.":{"ca":"Dep\xE8n de quantes persones troben valor en el que est\xE0s fent. Si teniu una llista de correu electr\xF2nic molt compromesa, apunteu que el 10% es converteixin en subscriptors de pagament al llarg del temps.","de":"Es h\xE4ngt davon ab, wie viele Menschen das, was Sie machen, wertsch\xE4tzen. Wenn Sie eine sehr engagierte E-Mail-Liste haben, streben Sie an, dass 10 % im Laufe der Zeit zahlende Abonnenten werden.","es":"Depende de cu\xE1ntas personas encuentren valor en lo que est\xE1s haciendo. Si tiene una lista de correo electr\xF3nico altamente comprometida, apunte a que el 10% se convierta en suscriptores pagos con el tiempo.","fr":"Cela d\xE9pend du nombre de personnes qui trouvent de la valeur dans ce que vous faites. Si vous avez une liste de diffusion tr\xE8s engag\xE9e, visez 10 % pour devenir des abonn\xE9s payants au fil du temps.","it":"Dipende da quante persone trovano valore in ci\xF2 che stai facendo. Se disponi di una lista e-mail molto coinvolta, punta al 10% per diventare abbonati a pagamento nel tempo.","pt":"Depende de quantas pessoas encontram valor no que voc\xEA est\xE1 fazendo. Se voc\xEA tem uma lista de e-mail altamente engajada, procure 10% para se tornar assinante pago ao longo do tempo."},"How much could I charge?":{"ca":"Quant podria cobrar?","de":"Wie viel k\xF6nnte ich verlangen?","es":"\xBFCu\xE1nto podr\xEDa cobrar?","fr":"Combien pourrais-je facturer?","it":"Quanto potrei addebitare?","pt":"Quanto eu poderia cobrar?"},"Usually more than you think! In general, for personal interest, try $5 to $10 per month. For professional interest, you can often go substantially higher.":{"ca":"Normalment m\xE9s del que penses! En general, per inter\xE8s personal, proveu de 5 a 10\u20AC al mes. Per inter\xE8s professional, sovint podeu anar molt m\xE9s alt.","de":"Meist mehr als Sie denken! Versuchen Sie es im Allgemeinen aus pers\xF6nlichem Interesse mit 5 bis 10 \u20AC pro Monat. Bei beruflichem Interesse kann man oft deutlich h\xF6her gehen.","es":"\xA1Por lo general, m\xE1s de lo que piensas! En general, por inter\xE9s personal, prueba de 5 a 10 \u20AC al mes. Por inter\xE9s profesional, a menudo puede ir mucho m\xE1s alto.","fr":"G\xE9n\xE9ralement plus que vous ne le pensez ! En g\xE9n\xE9ral, par int\xE9r\xEAt personnel, essayez 5 \xE0 10 \u20AC par mois. Pour un int\xE9r\xEAt professionnel, vous pouvez souvent aller beaucoup plus haut.","it":"Di solito pi\xF9 di quanto pensi! In generale, per interesse personale, prova da \u20AC 5 a \u20AC 10 al mese. Per interesse professionale, puoi spesso andare molto pi\xF9 in alto.","pt":"Geralmente mais do que voc\xEA pensa! Em geral, por interesse pessoal, tente de 25 a 50 R$ por m\xEAs. Por interesse profissional, muitas vezes voc\xEA pode ir substancialmente mais alto."},"See some real-world examples":{"ca":"Mireu alguns exemples concrets","de":"Schauen Sie sich einige konkrete Beispiele an","es":"Mira algunos ejemplos concretos","fr":"Regardez quelques exemples concrets","it":"Guarda alcuni esempi concreti","pt":"Veja alguns exemplos concretos"},"Writers keep 90% of their revenue minus credit card fees.":{"ca":"Els escriptors es conserven el 90% dels seus ingressos menys les tarifes de la targeta de cr\xE8dit.","de":"Autoren behalten 90 % ihrer Einnahmen abz\xFCglich Kreditkartengeb\xFChren.","es":"Los escritores se quedan con el 90% de sus ingresos menos las tarifas de las tarjetas de cr\xE9dito.","fr":"Les auteurs conservent 90 % de leurs revenus moins les frais de carte de cr\xE9dit.","it":"Gli scrittori trattengono il 90% delle loro entrate meno le commissioni sulle carte di credito.","pt":"Os escritores mant\xEAm 90% de sua receita menos as taxas de cart\xE3o de cr\xE9dito."},"Listen now":{"ca":"Escolta ara","de":"Jetzt anh\xF6ren","es":"Escucha ahora","fr":"\xC9coutez maintenant","it":"Ascolta ora","pt":"Ou\xE7a agora"},"Watch now":{"ca":"Veure ara","de":"Jetzt ansehen","es":"Ver ahora","fr":"Regardez maintenant","it":"Guarda ora","pt":"Assista agora"}}`)},function($,n){var t=1e3,e=t*60,s=e*60,o=s*24,a=o*7,c=o*365.25;$.exports=function(g,v){v=v||{};var O=typeof g;if(O==="string"&&g.length>0)return l(g);if(O==="number"&&isFinite(g))return v.long?h(g):p(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function l(g){if(g=String(g),!(g.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(!!v){var O=parseFloat(v[1]),u=(v[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return O*c;case"weeks":case"week":case"w":return O*a;case"days":case"day":case"d":return O*o;case"hours":case"hour":case"hrs":case"hr":case"h":return O*s;case"minutes":case"minute":case"mins":case"min":case"m":return O*e;case"seconds":case"second":case"secs":case"sec":case"s":return O*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return O;default:return}}}}function p(g){var v=Math.abs(g);return v>=o?Math.round(g/o)+"d":v>=s?Math.round(g/s)+"h":v>=e?Math.round(g/e)+"m":v>=t?Math.round(g/t)+"s":g+"ms"}function h(g){var v=Math.abs(g);return v>=o?m(g,v,o,"day"):v>=s?m(g,v,s,"hour"):v>=e?m(g,v,e,"minute"):v>=t?m(g,v,t,"second"):g+" ms"}function m(g,v,O,u){var r=v>=O*1.5;return Math.round(g/O)+" "+u+(r?"s":"")}},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s,o){var a=s.prototype,c=a.format;o.en.ordinal=function(l){var p=["th","st","nd","rd"],h=l%100;return"["+l+(p[(h-20)%10]||p[h]||p[0])+"]"},a.format=function(l){var p=this,h=this.$locale(),m=this.$utils(),g=(l||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(v){switch(v){case"Q":return Math.ceil((p.$M+1)/3);case"Do":return h.ordinal(p.$D);case"gggg":return p.weekYear();case"GGGG":return p.isoWeekYear();case"wo":return h.ordinal(p.week(),"W");case"w":case"ww":return m.s(p.week(),v==="w"?1:2,"0");case"W":case"WW":return m.s(p.isoWeek(),v==="W"?1:2,"0");case"k":case"kk":return m.s(String(p.$H===0?24:p.$H),v==="k"?1:2,"0");case"X":return Math.floor(p.$d.getTime()/1e3);case"x":return p.$d.getTime();case"z":return"["+p.offsetName()+"]";case"zzz":return"["+p.offsetName("long")+"]";default:return v}});return c.bind(this)(g)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=function(r,i){return r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(d,b,w){var E=w&&w.toUpperCase();return b||i[w]||e[w]||i[E].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(S,P,D){return P||D.slice(1)})})},o=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,c=/\d\d?/,l=/\d*[^\s\d-_:/()]+/,p={},h=function(r){return function(i){this[r]=+i}},m=[/[+-]\d\d:?(\d\d)?/,function(r){(this.zone||(this.zone={})).offset=function(i){if(!i)return 0;var d=i.match(/([+-]|\d\d)/g),b=60*d[1]+(+d[2]||0);return b===0?0:d[0]==="+"?-b:b}(r)}],g=function(r){var i=p[r];return i&&(i.indexOf?i:i.s.concat(i.f))},v=function(r,i){var d,b=p.meridiem;if(b){for(var w=1;w<=24;w+=1)if(r.indexOf(b(w,0,i))>-1){d=w>12;break}}else d=r===(i?"pm":"PM");return d},O={A:[l,function(r){this.afternoon=v(r,!1)}],a:[l,function(r){this.afternoon=v(r,!0)}],S:[/\d/,function(r){this.milliseconds=100*+r}],SS:[a,function(r){this.milliseconds=10*+r}],SSS:[/\d{3}/,function(r){this.milliseconds=+r}],s:[c,h("seconds")],ss:[c,h("seconds")],m:[c,h("minutes")],mm:[c,h("minutes")],H:[c,h("hours")],h:[c,h("hours")],HH:[c,h("hours")],hh:[c,h("hours")],D:[c,h("day")],DD:[a,h("day")],Do:[l,function(r){var i=p.ordinal,d=r.match(/\d+/);if(this.day=d[0],i)for(var b=1;b<=31;b+=1)i(b).replace(/\[|\]/g,"")===r&&(this.day=b)}],M:[c,h("month")],MM:[a,h("month")],MMM:[l,function(r){var i=g("months"),d=(g("monthsShort")||i.map(function(b){return b.substr(0,3)})).indexOf(r)+1;if(d<1)throw new Error;this.month=d%12||d}],MMMM:[l,function(r){var i=g("months").indexOf(r)+1;if(i<1)throw new Error;this.month=i%12||i}],Y:[/[+-]?\d+/,h("year")],YY:[a,function(r){r=+r,this.year=r+(r>68?1900:2e3)}],YYYY:[/\d{4}/,h("year")],Z:m,ZZ:m},u=function(r,i,d){try{var b=function(Z){for(var F=(Z=s(Z,p&&p.formats)).match(o),z=F.length,G=0;G<z;G+=1){var V=F[G],k=O[V],K=k&&k[0],Y=k&&k[1];F[G]=Y?{regex:K,parser:Y}:V.replace(/^\[|\]$/g,"")}return function(ee){for(var ae={},he=0,me=0;he<z;he+=1){var Ye=F[he];if(typeof Ye=="string")me+=Ye.length;else{var se=Ye.regex,ie=Ye.parser,Ee=ee.substr(me),Oe=se.exec(Ee)[0];ie.call(ae,Oe),ee=ee.replace(Oe,"")}}return function(ce){var ue=ce.afternoon;if(ue!==void 0){var pe=ce.hours;ue?pe<12&&(ce.hours+=12):pe===12&&(ce.hours=0),delete ce.afternoon}}(ae),ae}}(i)(r),w=b.year,E=b.month,S=b.day,P=b.hours,D=b.minutes,W=b.seconds,B=b.milliseconds,f=b.zone,y=new Date,M=S||(w||E?1:y.getDate()),N=w||y.getFullYear(),A=0;w&&!E||(A=E>0?E-1:y.getMonth());var L=P||0,C=D||0,R=W||0,U=B||0;return f?new Date(Date.UTC(N,A,M,L,C,R,U+60*f.offset*1e3)):d?new Date(Date.UTC(N,A,M,L,C,R,U)):new Date(N,A,M,L,C,R,U)}catch(Z){return new Date("")}};return function(r,i,d){d.p.customParseFormat=!0;var b=i.prototype,w=b.parse;b.parse=function(E){var S=E.date,P=E.utc,D=E.args;this.$u=P;var W=D[1];if(typeof W=="string"){var B=D[2]===!0,f=D[3]===!0,y=B||f,M=D[2];f&&(M=D[2]),p=this.$locale(),!B&&M&&(p=d.Ls[M]),this.$d=u(S,W,P),this.init(),M&&M!==!0&&(this.$L=this.locale(M).$L),y&&S!==this.format(W)&&(this.$d=new Date("")),p={}}else if(W instanceof Array)for(var N=W.length,A=1;A<=N;A+=1){D[1]=W[A-1];var L=d.apply(this,D);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}A===N&&(this.$d=new Date(""))}else w.call(this,E)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s){s.prototype.dayOfYear=function(o){var a=Math.round((this.startOf("day")-this.startOf("year"))/864e5)+1;return o==null?a:this.add(o-a,"day")}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";var e,s,o=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,c={years:31536e6,months:2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},l=function(u){return u instanceof O},p=function(u,r,i){return new O(u,i,r.$l)},h=function(u){return s.p(u)+"s"},m=function(u){return u<0},g=function(u){return m(u)?Math.ceil(u):Math.floor(u)},v=function(u,r){return u?m(u)?{negative:!0,format:""+function(i){return Math.abs(i)}(u)+r}:{negative:!1,format:""+u+r}:{negative:!1,format:""}},O=function(){function u(i,d,b){var w=this;if(this.$d={},this.$l=b,d)return p(i*c[h(d)],this);if(typeof i=="number")return this.$ms=i,this.parseFromMilliseconds(),this;if(typeof i=="object")return Object.keys(i).forEach(function(S){w.$d[h(S)]=i[S]}),this.calMilliseconds(),this;if(typeof i=="string"){var E=i.match(a);if(E)return this.$d.years=E[2],this.$d.months=E[3],this.$d.weeks=E[4],this.$d.days=E[5],this.$d.hours=E[6],this.$d.minutes=E[7],this.$d.seconds=E[8],this.calMilliseconds(),this}return this}var r=u.prototype;return r.calMilliseconds=function(){var i=this;this.$ms=Object.keys(this.$d).reduce(function(d,b){return d+(i.$d[b]||0)*c[b]},0)},r.parseFromMilliseconds=function(){var i=this.$ms;this.$d.years=g(i/31536e6),i%=31536e6,this.$d.months=g(i/2592e6),i%=2592e6,this.$d.days=g(i/864e5),i%=864e5,this.$d.hours=g(i/36e5),i%=36e5,this.$d.minutes=g(i/6e4),i%=6e4,this.$d.seconds=g(i/1e3),i%=1e3,this.$d.milliseconds=i},r.toISOString=function(){var i=v(this.$d.years,"Y"),d=v(this.$d.months,"M"),b=+this.$d.days||0;this.$d.weeks&&(b+=7*this.$d.weeks);var w=v(b,"D"),E=v(this.$d.hours,"H"),S=v(this.$d.minutes,"M"),P=this.$d.seconds||0;this.$d.milliseconds&&(P+=this.$d.milliseconds/1e3);var D=v(P,"S"),W=i.negative||d.negative||w.negative||E.negative||S.negative||D.negative,B=E.format||S.format||D.format?"T":"",f=(W?"-":"")+"P"+i.format+d.format+w.format+B+E.format+S.format+D.format;return f==="P"||f==="-P"?"P0D":f},r.toJSON=function(){return this.toISOString()},r.format=function(i){var d=i||"YYYY-MM-DDTHH:mm:ss",b={Y:this.$d.years,YY:s.s(this.$d.years,2,"0"),YYYY:s.s(this.$d.years,4,"0"),M:this.$d.months,MM:s.s(this.$d.months,2,"0"),D:this.$d.days,DD:s.s(this.$d.days,2,"0"),H:this.$d.hours,HH:s.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,"0"),SSS:s.s(this.$d.milliseconds,3,"0")};return d.replace(o,function(w,E){return E||String(b[w])})},r.as=function(i){return this.$ms/c[h(i)]},r.get=function(i){var d=this.$ms,b=h(i);return b==="milliseconds"?d%=1e3:d=b==="weeks"?g(d/c[b]):this.$d[b],d===0?0:d},r.add=function(i,d,b){var w;return w=d?i*c[h(d)]:l(i)?i.$ms:p(i,this).$ms,p(this.$ms+w*(b?-1:1),this)},r.subtract=function(i,d){return this.add(i,d,!0)},r.locale=function(i){var d=this.clone();return d.$l=i,d},r.clone=function(){return p(this.$ms,this)},r.humanize=function(i){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!i)},r.milliseconds=function(){return this.get("milliseconds")},r.asMilliseconds=function(){return this.as("milliseconds")},r.seconds=function(){return this.get("seconds")},r.asSeconds=function(){return this.as("seconds")},r.minutes=function(){return this.get("minutes")},r.asMinutes=function(){return this.as("minutes")},r.hours=function(){return this.get("hours")},r.asHours=function(){return this.as("hours")},r.days=function(){return this.get("days")},r.asDays=function(){return this.as("days")},r.weeks=function(){return this.get("weeks")},r.asWeeks=function(){return this.as("weeks")},r.months=function(){return this.get("months")},r.asMonths=function(){return this.as("months")},r.years=function(){return this.get("years")},r.asYears=function(){return this.as("years")},u}();return function(u,r,i){e=i,s=i().$utils(),i.duration=function(w,E){var S=i.locale();return p(w,{$l:S},E)},i.isDuration=l;var d=r.prototype.add,b=r.prototype.subtract;r.prototype.add=function(w,E){return l(w)&&(w=w.asMilliseconds()),d.bind(this)(w,E)},r.prototype.subtract=function(w,E){return l(w)&&(w=w.asMilliseconds()),b.bind(this)(w,E)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s,o){s.prototype.isBetween=function(a,c,l,p){var h=o(a),m=o(c),g=(p=p||"()")[0]==="(",v=p[1]===")";return(g?this.isAfter(h,l):!this.isBefore(h,l))&&(v?this.isBefore(m,l):!this.isAfter(m,l))||(g?this.isBefore(h,l):!this.isAfter(h,l))&&(v?this.isAfter(m,l):!this.isBefore(m,l))}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s){s.prototype.isSameOrAfter=function(o,a){return this.isSame(o,a)||this.isAfter(o,a)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s){s.prototype.isSameOrBefore=function(o,a){return this.isSame(o,a)||this.isBefore(o,a)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";var e="month",s="quarter";return function(o,a){var c=a.prototype;c.quarter=function(h){return this.$utils().u(h)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(h-1))};var l=c.add;c.add=function(h,m){return h=Number(h),this.$utils().p(m)===s?this.add(3*h,e):l.bind(this)(h,m)};var p=c.startOf;c.startOf=function(h,m){var g=this.$utils(),v=!!g.u(m)||m;if(g.p(h)===s){var O=this.quarter()-1;return v?this.month(3*O).startOf(e).startOf("day"):this.month(3*O+2).endOf(e).endOf("day")}return p.bind(this)(h,m)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s,o){e=e||{};var a=s.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(h,m,g,v){return a.fromToBase(h,m,g,v)}o.en.relativeTime=c,a.fromToBase=function(h,m,g,v,O){for(var u,r,i,d=g.$locale().relativeTime||c,b=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],w=b.length,E=0;E<w;E+=1){var S=b[E];S.d&&(u=v?o(h).diff(g,S.d,!0):g.diff(h,S.d,!0));var P=(e.rounding||Math.round)(Math.abs(u));if(i=u>0,P<=S.r||!S.r){P<=1&&E>0&&(S=b[E-1]);var D=d[S.l];O&&(P=O(""+P)),r=typeof D=="string"?D.replace("%d",P):D(P,m,S.l,i);break}}if(m)return r;var W=i?d.future:d.past;return typeof W=="function"?W(r):W.replace("%s",r)},a.to=function(h,m){return l(h,m,this,!0)},a.from=function(h,m){return l(h,m,this)};var p=function(h){return h.$u?o.utc():o()};a.toNow=function(h){return this.to(p(this),h)},a.fromNow=function(h){return this.from(p(this),h)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s,o){var a=s.prototype;o.utc=function(v){return new s({date:v,utc:!0,args:arguments})},a.utc=function(v){var O=o(this.toDate(),{locale:this.$L,utc:!0});return v?O.add(this.utcOffset(),"minute"):O},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var c=a.parse;a.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),c.call(this,v)};var l=a.init;a.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else l.call(this)};var p=a.utcOffset;a.utcOffset=function(v,O){var u=this.$utils().u;if(u(v))return this.$u?0:u(this.$offset)?p.call(this):this.$offset;var r=Math.abs(v)<=16?60*v:v,i=this;if(O)return i.$offset=r,i.$u=v===0,i;if(v!==0){var d=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(i=this.local().add(r+d,"minute")).$offset=r,i.$x.$localOffset=d}else i=this.utc();return i};var h=a.format;a.format=function(v){var O=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,O)},a.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||new Date().getTimezoneOffset());return this.$d.valueOf()-6e4*v},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var m=a.toDate;a.toDate=function(v){return v==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var g=a.diff;a.diff=function(v,O,u){if(v&&this.$u===v.$u)return g.call(this,v,O,u);var r=this.local(),i=o(v).local();return g.call(r,i,O,u)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";var e="week",s="year";return function(o,a,c){var l=a.prototype;l.week=function(p){if(p===void 0&&(p=null),p!==null)return this.add(7*(p-this.week()),"day");var h=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var m=c(this).startOf(s).add(1,s).date(h),g=c(this).endOf(e);if(m.isBefore(g))return 1}var v=c(this).startOf(s).date(h).startOf(e).subtract(1,"millisecond"),O=this.diff(v,e,!0);return O<0?c(this).startOf("week").week():Math.ceil(O)},l.weeks=function(p){return p===void 0&&(p=null),this.week(p)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(o,a,c){var l,p=c().utcOffset(),h=function(O,u,r){r===void 0&&(r={});var i=new Date(O);return function(d,b){b===void 0&&(b={});var w=b.timeZoneName||"short",E=d+"|"+w,S=s[E];return S||(S=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:d,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:w}),s[E]=S),S}(u,r).formatToParts(i)},m=function(O,u){for(var r=h(O,u),i=[],d=0;d<r.length;d+=1){var b=r[d],w=b.type,E=b.value,S=e[w];S>=0&&(i[S]=parseInt(E,10))}var P=i[3],D=P===24?0:P,W=i[0]+"-"+i[1]+"-"+i[2]+" "+D+":"+i[4]+":"+i[5]+":000",B=+O;return(c.utc(W).valueOf()-(B-=B%1e3))/6e4},g=a.prototype;g.tz=function(O,u){O===void 0&&(O=l);var r=this.utcOffset(),i=this.toDate().toLocaleString("en-US",{timeZone:O}),d=Math.round((this.toDate()-new Date(i))/1e3/60),b=c(i).$set("millisecond",this.$ms).utcOffset(p-d,!0);if(u){var w=b.utcOffset();b=b.add(r-w,"minute")}return b.$x.$timezone=O,b},g.offsetName=function(O){var u=this.$x.$timezone||c.tz.guess(),r=h(this.valueOf(),u,{timeZoneName:O}).find(function(i){return i.type.toLowerCase()==="timezonename"});return r&&r.value};var v=g.startOf;g.startOf=function(O,u){if(!this.$x||!this.$x.$timezone)return v.call(this,O,u);var r=c(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return v.call(r,O,u).tz(this.$x.$timezone,!0)},c.tz=function(O,u,r){var i=r&&u,d=r||u||l,b=m(+c(),d);if(typeof O!="string")return c(O).tz(d);var w=function(D,W,B){var f=D-60*W*1e3,y=m(f,B);if(W===y)return[f,W];var M=m(f-=60*(y-W)*1e3,B);return y===M?[f,y]:[D-60*Math.min(y,M)*1e3,Math.max(y,M)]}(c.utc(O,i).valueOf(),b,d),E=w[0],S=w[1],P=c(E).utcOffset(S);return P.$x.$timezone=d,P},c.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},c.tz.setDefault=function(O){l=O}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s,o){var a="h:mm A",c={lastDay:"[Yesterday at] "+a,sameDay:"[Today at] "+a,nextDay:"[Tomorrow at] "+a,nextWeek:"dddd [at] "+a,lastWeek:"[Last] dddd [at] "+a,sameElse:"MM/DD/YYYY"};s.prototype.calendar=function(l,p){var h=p||this.$locale().calendar||c,m=o(l||void 0).startOf("d"),g=this.diff(m,"d",!0),v=g<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse",O=h[v]||c[v];return typeof O=="function"?O.call(this,o()):this.format(O)}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s){s.prototype.weekday=function(o){var a=this.$locale().weekStart||0,c=this.$W,l=(c<a?c+7:c)-a;return this.$utils().u(o)?l:this.subtract(l,"day").add(o,"day")}}})},function($,n,t){(function(e,s){$.exports=s()})(this,function(){"use strict";return function(e,s,o){var a=s.prototype,c=a.parse;a.parse=function(l){l.date=function(p){var h=p.date,m=p.utc;return Array.isArray(h)?m?h.length?new Date(Date.UTC.apply(null,h)):new Date:h.length===1?o(String(h[0])).toDate():new(Function.prototype.bind.apply(Date,[null].concat(h))):h}.bind(this)(l),c.bind(this)(l)}}})},function($,n,t){n.__esModule=!0;var e=function(){function k(K,Y){for(var ee=0;ee<Y.length;ee++){var ae=Y[ee];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(K,ae.key,ae)}}return function(K,Y,ee){return Y&&k(K.prototype,Y),ee&&k(K,ee),K}}(),s=Object.assign||function(k){for(var K=1;K<arguments.length;K++){var Y=arguments[K];for(var ee in Y)Object.prototype.hasOwnProperty.call(Y,ee)&&(k[ee]=Y[ee])}return k},o=t(0),a=t(476),c=v(a),l=t(477),p=v(l),h=t(480),m=v(h),g=t(481);function v(k){return k&&k.__esModule?k:{default:k}}function O(k,K){if(!(k instanceof K))throw new TypeError("Cannot call a class as a function")}function u(k,K){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:k}function r(k,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);k.prototype=Object.create(K&&K.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(k,K):k.__proto__=K)}function i(k,K,Y){return K in k?Object.defineProperty(k,K,{value:Y,enumerable:!0,configurable:!0,writable:!0}):k[K]=Y,k}var d="data-preact-helmet",b=function(K){return String(K).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},w=function(K,Y){for(var ee=K.length-1;ee>=0;ee--){var ae=K[ee];if(ae[Y])return ae[Y]}return null},E=function(K){var Y=w(K,"title"),ee=w(K,"titleTemplate");if(ee&&Y)return ee.replace(/%s/g,function(){return Y});var ae=w(K,"defaultTitle");return Y||ae||""},S=function(K){return w(K,"onChangeClientState")||function(){}},P=function(K,Y){return Y.filter(function(ee){return typeof ee[K]!="undefined"}).map(function(ee){return ee[K]}).reduce(function(ee,ae){return s({},ee,ae)},{})},D=function(K,Y){return Y.filter(function(ee){return typeof ee[g.TAG_NAMES.BASE]!="undefined"}).map(function(ee){return ee[g.TAG_NAMES.BASE]}).reverse().reduce(function(ee,ae){if(!ee.length)for(var he=Object.keys(ae),me=0;me<he.length;me++){var Ye=he[me],se=Ye.toLowerCase();if(K.indexOf(se)!==-1&&ae[se])return ee.concat(ae)}return ee},[])},W=function(K,Y,ee){var ae={};return ee.filter(function(he){return typeof he[K]!="undefined"}).map(function(he){return he[K]}).reverse().reduce(function(he,me){var Ye={};me.filter(function(ce){for(var ue=void 0,pe=Object.keys(ce),$e=0;$e<pe.length;$e++){var ne=pe[$e],X=ne.toLowerCase();Y.indexOf(X)!==-1&&!(ue===g.TAG_PROPERTIES.REL&&ce[ue].toLowerCase()==="canonical")&&!(X===g.TAG_PROPERTIES.REL&&ce[X].toLowerCase()==="stylesheet")&&(ue=X),Y.indexOf(ne)!==-1&&(ne===g.TAG_PROPERTIES.INNER_HTML||ne===g.TAG_PROPERTIES.CSS_TEXT||ne===g.TAG_PROPERTIES.ITEM_PROP)&&(ue=ne)}if(!ue||!ce[ue])return!1;var q=ce[ue].toLowerCase();return ae[ue]||(ae[ue]={}),Ye[ue]||(Ye[ue]={}),ae[ue][q]?!1:(Ye[ue][q]=!0,!0)}).reverse().forEach(function(ce){return he.push(ce)});for(var se=Object.keys(Ye),ie=0;ie<se.length;ie++){var Ee=se[ie],Oe=(0,m.default)({},ae[Ee],Ye[Ee]);ae[Ee]=Oe}return he},[]).reverse()},B=function(K,Y){document.title=K||document.title,f(g.TAG_NAMES.TITLE,Y)},f=function(K,Y){for(var ee=document.getElementsByTagName(K)[0],ae=ee.getAttribute(d),he=ae?ae.split(","):[],me=[].concat(he),Ye=Object.keys(Y),se=0;se<Ye.length;se++){var ie=Ye[se],Ee=Y[ie]||"";ee.setAttribute(ie,Ee),he.indexOf(ie)===-1&&he.push(ie);var Oe=me.indexOf(ie);Oe!==-1&&me.splice(Oe,1)}for(var ce=me.length-1;ce>=0;ce--)ee.removeAttribute(me[ce]);he.length===me.length?ee.removeAttribute(d):ee.setAttribute(d,he.join(","))},y=function(K,Y){var ee=document.head||document.querySelector("head"),ae=ee.querySelectorAll(K+"["+d+"]"),he=Array.prototype.slice.call(ae),me=[],Ye=void 0;return Y&&Y.length&&Y.forEach(function(se){var ie=document.createElement(K);for(var Ee in se)if(se.hasOwnProperty(Ee))if(Ee==="innerHTML")ie.innerHTML=se.innerHTML;else if(Ee==="cssText")ie.styleSheet?ie.styleSheet.cssText=se.cssText:ie.appendChild(document.createTextNode(se.cssText));else{var Oe=typeof se[Ee]=="undefined"?"":se[Ee];ie.setAttribute(Ee,Oe)}ie.setAttribute(d,"true"),he.some(function(ce,ue){return Ye=ue,ie.isEqualNode(ce)})?he.splice(Ye,1):me.push(ie)}),he.forEach(function(se){return se.parentNode.removeChild(se)}),me.forEach(function(se){return ee.appendChild(se)}),{oldTags:he,newTags:me}},M=function(K){return Object.keys(K).reduce(function(Y,ee){var ae=typeof K[ee]!="undefined"?ee+'="'+K[ee]+'"':""+ee;return Y?Y+" "+ae:ae},"")},N=function(K,Y,ee){var ae=M(ee);return ae?"<"+K+" "+d+" "+ae+">"+b(Y)+"</"+K+">":"<"+K+" "+d+">"+b(Y)+"</"+K+">"},A=function(K,Y){return Y.reduce(function(ee,ae){var he=Object.keys(ae).filter(function(se){return!(se==="innerHTML"||se==="cssText")}).reduce(function(se,ie){var Ee=typeof ae[ie]=="undefined"?ie:ie+'="'+b(ae[ie])+'"';return se?se+" "+Ee:Ee},""),me=ae.innerHTML||ae.cssText||"",Ye=[g.TAG_NAMES.NOSCRIPT,g.TAG_NAMES.SCRIPT,g.TAG_NAMES.STYLE].indexOf(K)===-1;return ee+"<"+K+" "+d+" "+he+(Ye?">":">"+me+"</"+K+">")},"")},L=function(K,Y,ee){var ae=i({key:Y},d,!0),he=Object.keys(ee).reduce(function(me,Ye){return me[Ye]=ee[Ye],me},ae);return[(0,o.h)(g.TAG_NAMES.TITLE,he,Y)]},C=function(K,Y){return Y.map(function(ee,ae){var he=i({key:ae},d,!0);return Object.keys(ee).forEach(function(me){var Ye=me;if(Ye==="innerHTML"||Ye==="cssText"){var se=ee.innerHTML||ee.cssText;he.dangerouslySetInnerHTML={__html:se}}else he[Ye]=ee[me]}),(0,o.h)(K,he)})},R=function(K,Y){switch(K){case g.TAG_NAMES.TITLE:return{toComponent:function(){return L(K,Y.title,Y.titleAttributes)},toString:function(){return N(K,Y.title,Y.titleAttributes)}};case g.TAG_NAMES.HTML:return{toComponent:function(){return Y},toString:function(){return M(Y)}};default:return{toComponent:function(){return C(K,Y)},toString:function(){return A(K,Y)}}}},U=function(K){var Y=K.htmlAttributes,ee=K.title,ae=K.titleAttributes,he=K.baseTag,me=K.metaTags,Ye=K.linkTags,se=K.scriptTags,ie=K.noscriptTags,Ee=K.styleTags;return{htmlAttributes:R(g.TAG_NAMES.HTML,Y),title:R(g.TAG_NAMES.TITLE,{title:ee,titleAttributes:ae}),base:R(g.TAG_NAMES.BASE,he),meta:R(g.TAG_NAMES.META,me),link:R(g.TAG_NAMES.LINK,Ye),script:R(g.TAG_NAMES.SCRIPT,se),noscript:R(g.TAG_NAMES.NOSCRIPT,ie),style:R(g.TAG_NAMES.STYLE,Ee)}},Z=function(K){var Y,ee;return ee=Y=function(ae){r(he,ae);function he(){return O(this,he),u(this,(he.__proto__||Object.getPrototypeOf(he)).apply(this,arguments))}return e(he,[{key:"shouldComponentUpdate",value:function(Ye){var se=s({},Ye);return(!se.children||!se.children.length)&&delete se.children,!(0,p.default)(this.props,se)}},{key:"render",value:function(){return(0,o.h)(K,this.props)}}],[{key:"canUseDOM",set:function(Ye){K.canUseDOM=Ye}}]),he}(o.Component),Y.peek=K.peek,Y.rewind=function(){var ae=K.rewind();return ae||(ae=U({htmlAttributes:{},title:"",titleAttributes:{},baseTag:[],metaTags:[],linkTags:[],scriptTags:[],noscriptTags:[],styleTags:[]})),ae},ee},F=function(K){return{htmlAttributes:P(g.TAG_NAMES.HTML,K),title:E(K),titleAttributes:P("titleAttributes",K),baseTag:D([g.TAG_PROPERTIES.HREF],K),metaTags:W(g.TAG_NAMES.META,[g.TAG_PROPERTIES.NAME,g.TAG_PROPERTIES.CHARSET,g.TAG_PROPERTIES.HTTPEQUIV,g.TAG_PROPERTIES.PROPERTY,g.TAG_PROPERTIES.ITEM_PROP],K),linkTags:W(g.TAG_NAMES.LINK,[g.TAG_PROPERTIES.REL,g.TAG_PROPERTIES.HREF],K),scriptTags:W(g.TAG_NAMES.SCRIPT,[g.TAG_PROPERTIES.SRC,g.TAG_PROPERTIES.INNER_HTML],K),noscriptTags:W(g.TAG_NAMES.NOSCRIPT,[g.TAG_PROPERTIES.INNER_HTML],K),styleTags:W(g.TAG_NAMES.STYLE,[g.TAG_PROPERTIES.CSS_TEXT],K),onChangeClientState:S(K)}},z=function(K){var Y=K.htmlAttributes,ee=K.title,ae=K.titleAttributes,he=K.baseTag,me=K.metaTags,Ye=K.linkTags,se=K.scriptTags,ie=K.noscriptTags,Ee=K.styleTags,Oe=K.onChangeClientState;f("html",Y),B(ee,ae);var ce={baseTag:y(g.TAG_NAMES.BASE,he),metaTags:y(g.TAG_NAMES.META,me),linkTags:y(g.TAG_NAMES.LINK,Ye),scriptTags:y(g.TAG_NAMES.SCRIPT,se),noscriptTags:y(g.TAG_NAMES.NOSCRIPT,ie),styleTags:y(g.TAG_NAMES.STYLE,Ee)},ue={},pe={};Object.keys(ce).forEach(function($e){var ne=ce[$e],X=ne.newTags,q=ne.oldTags;X.length&&(ue[$e]=X),q.length&&(pe[$e]=ce[$e].oldTags)}),Oe(K,ue,pe)},G=function(){return null},V=(0,c.default)(F,z,U)(G);n.default=Z(V),$.exports=n.default},function($,n,t){"use strict";var e=t(0);function s(l,p){var h={};for(var m in l)p.indexOf(m)>=0||!Object.prototype.hasOwnProperty.call(l,m)||(h[m]=l[m]);return h}function o(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")}function a(l,p){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:l}function c(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(l,p):l.__proto__=p)}$.exports=function(p,h,m){if(typeof p!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof h!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof m!="undefined"&&typeof m!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function g(O){return O.displayName||O.name||"Component"}return function(u){if(typeof u!="function")throw new Error("Expected WrappedComponent to be a React component.");var r=[],i=void 0;function d(){i=p(r.map(function(w){return w.props})),b.canUseDOM?h(i):m&&(i=m(i))}var b=function(w){c(E,w);function E(){return o(this,E),a(this,w.apply(this,arguments))}return E.peek=function(){return i},E.rewind=function(){if(E.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var P=i;return i=void 0,r=[],P},E.prototype.shouldComponentUpdate=function(P){var D=P.children,W=s(P,["children"]);return D&&D.length&&(W.children=D),v(W,this.props)},E.prototype.componentWillMount=function(){r.push(this),d()},E.prototype.componentDidUpdate=function(){d()},E.prototype.componentWillUnmount=function(){var P=r.indexOf(this);r.splice(P,1),d()},E.prototype.render=function(){return(0,e.h)(u,this.props)},E}(e.Component);return b.displayName="SideEffect("+g(u)+")",b.canUseDOM=!!(typeof window!="undefined"&&window.document&&window.document.createElement),b};function v(O,u){for(var r in O)if(!(r in u))return!0;for(var i in u)if(O[i]!==u[i])return!0;return!1}}},function($,n,t){var e=Array.prototype.slice,s=t(478),o=t(479),a=$.exports=function(h,m,g){return g||(g={}),h===m?!0:h instanceof Date&&m instanceof Date?h.getTime()===m.getTime():!h||!m||typeof h!="object"&&typeof m!="object"?g.strict?h===m:h==m:p(h,m,g)};function c(h){return h==null}function l(h){return!(!h||typeof h!="object"||typeof h.length!="number"||typeof h.copy!="function"||typeof h.slice!="function"||h.length>0&&typeof h[0]!="number")}function p(h,m,g){var v,O;if(c(h)||c(m)||h.prototype!==m.prototype)return!1;if(o(h))return o(m)?(h=e.call(h),m=e.call(m),a(h,m,g)):!1;if(l(h)){if(!l(m)||h.length!==m.length)return!1;for(v=0;v<h.length;v++)if(h[v]!==m[v])return!1;return!0}try{var u=s(h),r=s(m)}catch(i){return!1}if(u.length!=r.length)return!1;for(u.sort(),r.sort(),v=u.length-1;v>=0;v--)if(u[v]!=r[v])return!1;for(v=u.length-1;v>=0;v--)if(O=u[v],!a(h[O],m[O],g))return!1;return typeof h==typeof m}},function($,n){n=$.exports=typeof Object.keys=="function"?Object.keys:t,n.shim=t;function t(e){var s=[];for(var o in e)s.push(o);return s}},function($,n){var t=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=$.exports=t?e:s,n.supported=e;function e(o){return Object.prototype.toString.call(o)=="[object Arguments]"}n.unsupported=s;function s(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function($,n,t){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var e=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function c(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var p={},h=0;h<10;h++)p["_"+String.fromCharCode(h)]=h;var m=Object.getOwnPropertyNames(p).map(function(v){return p[v]});if(m.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(v){g[v]=v}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch(v){return!1}}$.exports=c()?Object.assign:function(l,p){for(var h,m=a(l),g,v=1;v<arguments.length;v++){h=Object(arguments[v]);for(var O in h)s.call(h,O)&&(m[O]=h[O]);if(e){g=e(h);for(var u=0;u<g.length;u++)o.call(h,g[u])&&(m[g[u]]=h[g[u]])}}return m}},function($,n){n.__esModule=!0;var t=n.TAG_NAMES={HTML:"htmlAttributes",TITLE:"title",BASE:"base",META:"meta",LINK:"link",SCRIPT:"script",NOSCRIPT:"noscript",STYLE:"style"},e=n.TAG_PROPERTIES={NAME:"name",CHARSET:"charset",HTTPEQUIV:"http-equiv",REL:"rel",HREF:"href",PROPERTY:"property",SRC:"src",INNER_HTML:"innerHTML",CSS_TEXT:"cssText",ITEM_PROP:"itemprop"},s=n.PREACT_TAG_MAP={charset:"charSet","http-equiv":"httpEquiv",itemprop:"itemProp",class:"className"}},function($,n){$.exports=class{constructor(){this.callbacks={}}listenerCount(e){return(this.callbacks[e]||[]).length}on(e,s,o=!1){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push([s,o]),this}once(e,s){return this.on(e,s,!0)}off(e,s){!this.callbacks[e]||(this.callbacks[e]=this.callbacks[e].filter(o=>o[0]!==s))}emit(e,s){const o=this.callbacks[e];if(!!o){for(const[a,c]of o)if(c&&this.off(e,a),a(s)===!1)return!1;return!0}}}},function($,n,t){"use strict";t.r(n),t.d(n,"MINIMUM_CURRENCY_SPECIFIC_RATES",function(){return o}),t.d(n,"DEFAULT_MINIMUM_RATES",function(){return a}),t.d(n,"MAX_MONTHLY_RATE",function(){return c}),t.d(n,"MAX_YEARLY_RATE",function(){return l}),t.d(n,"validatePledgePrices",function(){return p}),t.d(n,"currencyFormattedPledgePriceString",function(){return h});var e=t(9),s=t.n(e);const o={gbp:{month:3.5,year:20,founding:20},inr:{month:50,year:300,founding:300}},a={month:5,year:50,founding:50},c=100,l=1e3,p=m=>{const{value:g,interval:v,is_founding:O,currency:u}=m,r=(o[u.toLowerCase()]||a)[O?"founding":v],i=v==="month"?c:l;return g<r?`${Object(e.toTitleCase)(v)}ly plan price must be at least ${h(r,u)}`:g>i?`${Object(e.toTitleCase)(v)}ly${m.is_founding?" founding":""} plan price must be less than ${h(i,u)}`:null},h=(m,g)=>Object(e.centsToPriceString)(m*(Object(e.isZeroDecimalCurrency)(g)?1:100),g)},function($,n,t){var e=t(485),s=t(527),o=t(321);function a(c){var l=s(c);return l.length==1&&l[0][2]?o(l[0][0],l[0][1]):function(p){return p===c||e(p,c,l)}}$.exports=a},function($,n,t){var e=t(289),s=t(284),o=1,a=2;function c(l,p,h,m){var g=h.length,v=g,O=!m;if(l==null)return!v;for(l=Object(l);g--;){var u=h[g];if(O&&u[2]?u[1]!==l[u[0]]:!(u[0]in l))return!1}for(;++g<v;){u=h[g];var r=u[0],i=l[r],d=u[1];if(O&&u[2]){if(i===void 0&&!(r in l))return!1}else{var b=new e;if(m)var w=m(i,d,r,l,p,b);if(!(w===void 0?s(d,i,o|a,m,b):w))return!1}}return!0}$.exports=c},function($,n){function t(){this.__data__=[],this.size=0}$.exports=t},function($,n,t){var e=t(175),s=Array.prototype,o=s.splice;function a(c){var l=this.__data__,p=e(l,c);if(p<0)return!1;var h=l.length-1;return p==h?l.pop():o.call(l,p,1),--this.size,!0}$.exports=a},function($,n,t){var e=t(175);function s(o){var a=this.__data__,c=e(a,o);return c<0?void 0:a[c][1]}$.exports=s},function($,n,t){var e=t(175);function s(o){return e(this.__data__,o)>-1}$.exports=s},function($,n,t){var e=t(175);function s(o,a){var c=this.__data__,l=e(c,o);return l<0?(++this.size,c.push([o,a])):c[l][1]=a,this}$.exports=s},function($,n,t){var e=t(174);function s(){this.__data__=new e,this.size=0}$.exports=s},function($,n){function t(e){var s=this.__data__,o=s.delete(e);return this.size=s.size,o}$.exports=t},function($,n){function t(e){return this.__data__.get(e)}$.exports=t},function($,n){function t(e){return this.__data__.has(e)}$.exports=t},function($,n,t){var e=t(174),s=t(230),o=t(231),a=200;function c(l,p){var h=this.__data__;if(h instanceof e){var m=h.__data__;if(!s||m.length<a-1)return m.push([l,p]),this.size=++h.size,this;h=this.__data__=new o(m)}return h.set(l,p),this.size=h.size,this}$.exports=c},function($,n,t){var e=t(301),s=t(499),o=t(109),a=t(318),c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,p=Function.prototype,h=Object.prototype,m=p.toString,g=h.hasOwnProperty,v=RegExp("^"+m.call(g).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O(u){if(!o(u)||s(u))return!1;var r=e(u)?v:l;return r.test(a(u))}$.exports=O},function($,n,t){var e=t(138),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,c=e?e.toStringTag:void 0;function l(p){var h=o.call(p,c),m=p[c];try{p[c]=void 0;var g=!0}catch(O){}var v=a.call(p);return g&&(h?p[c]=m:delete p[c]),v}$.exports=l},function($,n){var t=Object.prototype,e=t.toString;function s(o){return e.call(o)}$.exports=s},function($,n,t){var e=t(500),s=function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function o(a){return!!s&&s in a}$.exports=o},function($,n,t){var e=t(84),s=e["__core-js_shared__"];$.exports=s},function($,n){function t(e,s){return e==null?void 0:e[s]}$.exports=t},function($,n,t){var e=t(503),s=t(174),o=t(230);function a(){this.size=0,this.__data__={hash:new e,map:new(o||s),string:new e}}$.exports=a},function($,n,t){var e=t(504),s=t(505),o=t(506),a=t(507),c=t(508);function l(p){var h=-1,m=p==null?0:p.length;for(this.clear();++h<m;){var g=p[h];this.set(g[0],g[1])}}l.prototype.clear=e,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=c,$.exports=l},function($,n,t){var e=t(176);function s(){this.__data__=e?e(null):{},this.size=0}$.exports=s},function($,n){function t(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}$.exports=t},function($,n,t){var e=t(176),s="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;function c(l){var p=this.__data__;if(e){var h=p[l];return h===s?void 0:h}return a.call(p,l)?p[l]:void 0}$.exports=c},function($,n,t){var e=t(176),s=Object.prototype,o=s.hasOwnProperty;function a(c){var l=this.__data__;return e?l[c]!==void 0:o.call(l,c)}$.exports=a},function($,n,t){var e=t(176),s="__lodash_hash_undefined__";function o(a,c){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=e&&c===void 0?s:c,this}$.exports=o},function($,n,t){var e=t(177);function s(o){var a=e(this,o).delete(o);return this.size-=a?1:0,a}$.exports=s},function($,n){function t(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}$.exports=t},function($,n,t){var e=t(177);function s(o){return e(this,o).get(o)}$.exports=s},function($,n,t){var e=t(177);function s(o){return e(this,o).has(o)}$.exports=s},function($,n,t){var e=t(177);function s(o,a){var c=e(this,o),l=c.size;return c.set(o,a),this.size+=c.size==l?0:1,this}$.exports=s},function($,n,t){var e=t(289),s=t(319),o=t(518),a=t(519),c=t(295),l=t(73),p=t(279),h=t(290),m=1,g="[object Arguments]",v="[object Array]",O="[object Object]",u=Object.prototype,r=u.hasOwnProperty;function i(d,b,w,E,S,P){var D=l(d),W=l(b),B=D?v:c(d),f=W?v:c(b);B=B==g?O:B,f=f==g?O:f;var y=B==O,M=f==O,N=B==f;if(N&&p(d)){if(!p(b))return!1;D=!0,y=!1}if(N&&!y)return P||(P=new e),D||h(d)?s(d,b,w,E,S,P):o(d,b,B,w,E,S,P);if(!(w&m)){var A=y&&r.call(d,"__wrapped__"),L=M&&r.call(b,"__wrapped__");if(A||L){var C=A?d.value():d,R=L?b.value():b;return P||(P=new e),S(C,R,w,E,P)}}return N?(P||(P=new e),a(d,b,w,E,S,P)):!1}$.exports=i},function($,n){var t="__lodash_hash_undefined__";function e(s){return this.__data__.set(s,t),this}$.exports=e},function($,n){function t(e){return this.__data__.has(e)}$.exports=t},function($,n){function t(e,s){for(var o=-1,a=e==null?0:e.length;++o<a;)if(s(e[o],o,e))return!0;return!1}$.exports=t},function($,n,t){var e=t(138),s=t(415),o=t(215),a=t(319),c=t(348),l=t(232),p=1,h=2,m="[object Boolean]",g="[object Date]",v="[object Error]",O="[object Map]",u="[object Number]",r="[object RegExp]",i="[object Set]",d="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",E="[object DataView]",S=e?e.prototype:void 0,P=S?S.valueOf:void 0;function D(W,B,f,y,M,N,A){switch(f){case E:if(W.byteLength!=B.byteLength||W.byteOffset!=B.byteOffset)return!1;W=W.buffer,B=B.buffer;case w:return!(W.byteLength!=B.byteLength||!N(new s(W),new s(B)));case m:case g:case u:return o(+W,+B);case v:return W.name==B.name&&W.message==B.message;case r:case d:return W==B+"";case O:var L=c;case i:var C=y&p;if(L||(L=l),W.size!=B.size&&!C)return!1;var R=A.get(W);if(R)return R==B;y|=h,A.set(W,B);var U=a(L(W),L(B),y,M,N,A);return A.delete(W),U;case b:if(P)return P.call(W)==P.call(B)}return!1}$.exports=D},function($,n,t){var e=t(416),s=1,o=Object.prototype,a=o.hasOwnProperty;function c(l,p,h,m,g,v){var O=h&s,u=e(l),r=u.length,i=e(p),d=i.length;if(r!=d&&!O)return!1;for(var b=r;b--;){var w=u[b];if(!(O?w in p:a.call(p,w)))return!1}var E=v.get(l),S=v.get(p);if(E&&S)return E==p&&S==l;var P=!0;v.set(l,p),v.set(p,l);for(var D=O;++b<r;){w=u[b];var W=l[w],B=p[w];if(m)var f=O?m(B,W,w,p,l,v):m(W,B,w,l,p,v);if(!(f===void 0?W===B||g(W,B,h,m,v):f)){P=!1;break}D||(D=w=="constructor")}if(P&&!D){var y=l.constructor,M=p.constructor;y!=M&&"constructor"in l&&"constructor"in p&&!(typeof y=="function"&&y instanceof y&&typeof M=="function"&&M instanceof M)&&(P=!1)}return v.delete(l),v.delete(p),P}$.exports=c},function($,n,t){var e=t(131),s=t(117),o="[object Arguments]";function a(c){return s(c)&&e(c)==o}$.exports=a},function($,n){function t(){return!1}$.exports=t},function($,n,t){var e=t(131),s=t(234),o=t(117),a="[object Arguments]",c="[object Array]",l="[object Boolean]",p="[object Date]",h="[object Error]",m="[object Function]",g="[object Map]",v="[object Number]",O="[object Object]",u="[object RegExp]",r="[object Set]",i="[object String]",d="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",E="[object Float32Array]",S="[object Float64Array]",P="[object Int8Array]",D="[object Int16Array]",W="[object Int32Array]",B="[object Uint8Array]",f="[object Uint8ClampedArray]",y="[object Uint16Array]",M="[object Uint32Array]",N={};N[E]=N[S]=N[P]=N[D]=N[W]=N[B]=N[f]=N[y]=N[M]=!0,N[a]=N[c]=N[b]=N[l]=N[w]=N[p]=N[h]=N[m]=N[g]=N[v]=N[O]=N[u]=N[r]=N[i]=N[d]=!1;function A(L){return o(L)&&s(L.length)&&!!N[e(L)]}$.exports=A},function($,n,t){var e=t(403),s=e(Object.keys,Object);$.exports=s},function($,n,t){var e=t(114),s=t(84),o=e(s,"DataView");$.exports=o},function($,n,t){var e=t(114),s=t(84),o=e(s,"Promise");$.exports=o},function($,n,t){var e=t(114),s=t(84),o=e(s,"WeakMap");$.exports=o},function($,n,t){var e=t(320),s=t(197);function o(a){for(var c=s(a),l=c.length;l--;){var p=c[l],h=a[p];c[l]=[p,h,e(h)]}return c}$.exports=o},function($,n,t){var e=t(284),s=t(57),o=t(404),a=t(235),c=t(320),l=t(321),p=t(157),h=1,m=2;function g(v,O){return a(v)&&c(O)?l(p(v),O):function(u){var r=s(u,v);return r===void 0&&r===O?o(u,v):e(O,r,h|m)}}$.exports=g},function($,n,t){var e=t(530),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=e(function(c){var l=[];return c.charCodeAt(0)===46&&l.push(""),c.replace(s,function(p,h,m,g){l.push(m?g.replace(o,"$1"):h||p)}),l});$.exports=a},function($,n,t){var e=t(531),s=500;function o(a){var c=e(a,function(p){return l.size===s&&l.clear(),p}),l=c.cache;return c}$.exports=o},function($,n,t){var e=t(231),s="Expected a function";function o(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new TypeError(s);var l=function(){var p=arguments,h=c?c.apply(this,p):p[0],m=l.cache;if(m.has(h))return m.get(h);var g=a.apply(this,p);return l.cache=m.set(h,g)||m,g};return l.cache=new(o.Cache||e),l}o.Cache=e,$.exports=o},function($,n){function t(e,s){return e!=null&&s in Object(e)}$.exports=t},function($,n,t){var e=t(226),s=t(240),o=t(73),a=t(233),c=t(234),l=t(157);function p(h,m,g){m=e(m,h);for(var v=-1,O=m.length,u=!1;++v<O;){var r=l(m[v]);if(!(u=h!=null&&g(h,r)))break;h=h[r]}return u||++v!=O?u:(O=h==null?0:h.length,!!O&&c(O)&&a(r,O)&&(o(h)||s(h)))}$.exports=p},function($,n,t){var e=t(443),s=t(535),o=t(235),a=t(157);function c(l){return o(l)?e(a(l)):s(l)}$.exports=c},function($,n,t){var e=t(220);function s(o){return function(a){return e(a,o)}}$.exports=s},function($,n,t){"use strict";var e=t(272),s=t(578),o=s(e("String.prototype.indexOf"));$.exports=function(c,l){var p=e(c,!!l);return typeof p=="function"&&o(c,".prototype.")>-1?s(p):p}},function($,n,t){var e=t(339),s=t(672),o=t(675),a=t(340),c=t(676),l=t(232),p=200;function h(m,g,v){var O=-1,u=s,r=m.length,i=!0,d=[],b=d;if(v)i=!1,u=o;else if(r>=p){var w=g?null:c(m);if(w)return l(w);i=!1,u=a,b=new e}else b=g?[]:d;e:for(;++O<r;){var E=m[O],S=g?g(E):E;if(E=v||E!==0?E:0,i&&S===S){for(var P=b.length;P--;)if(b[P]===S)continue e;g&&b.push(S),d.push(E)}else u(b,S,v)||(b!==d&&b.push(S),d.push(E))}return d}$.exports=h},function($,n,t){"use strict";t.d(n,"a",function(){return D});var e=t(0),s=t(1),o=t(196),a=t(16),c=t(7),l=t(21),p=t(14),h=t(4),m=t(10),g=t(26),v=t(60),O=Object.defineProperty,u=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(W,B,f)=>B in W?O(W,B,{enumerable:!0,configurable:!0,writable:!0,value:f}):W[B]=f,E=(W,B)=>{for(var f in B||(B={}))d.call(B,f)&&w(W,f,B[f]);if(i)for(var f of i(B))b.call(B,f)&&w(W,f,B[f]);return W},S=(W,B)=>u(W,r(B)),P=(W,B,f)=>new Promise((y,M)=>{var N=C=>{try{L(f.next(C))}catch(R){M(R)}},A=C=>{try{L(f.throw(C))}catch(R){M(R)}},L=C=>C.done?y(C.value):Promise.resolve(C.value).then(N,A);L((f=f.apply(W,B)).next())});const D=({profile:W,requireLogin:B,source:f})=>{const y=Object(g.e)(),{result:M,refetch:N,isLoading:A,error:L,hasLoadedOnce:C}=Object(l.f)({pathname:W?Object(a.getPresubscribeUrl)(W):"",auto:!1,deps:[W]}),R=Object(s.a)(()=>P(void 0,null,function*(){if(Object(c.i)(c.a.ACCOUNT_CARD_PRESUBSCRIBE_CLICKED,f),B){B();return}yield N({method:"POST"}),y.popToast(F=>Object(e.h)(g.c,S(E({},F),{text:`You're subscribed to ${W.name||"<no name>"}! You'll get an email when they create a publication`}))),Object(v.c)(W.id)}),[N,W,y,B,f]),U=Object(s.a)(()=>P(void 0,null,function*(){Object(c.i)(c.a.ACCOUNT_CARD_UNPRESUBSCRIBE_CLICKED,f),yield N({method:"DELETE"}),y.popToast(F=>Object(e.h)(g.c,S(E({},F),{text:`You're unsubscribed from ${W.name||"<no name>"}! `}))),Object(v.c)(W.id)}),[N,y,W,f]);if(!W)return null;const Z=Boolean(C&&M?M==null?void 0:M.sub:W.isPresubscribed);return Object(e.h)(e.Fragment,null,!!L&&Object(e.h)(h.c,{justifyContent:"center"},Object(e.h)(m.b.B4,{weight:"bold",color:"error",paddingBottom:20},"Something went wrong. Please refresh the page.")),Z?Object(e.h)(p.a,{priority:"secondary",fill:"outline",leftIcon:Object(e.h)(o.a,null),disabled:A,onClick:F=>{U(),F.stopPropagation()},title:W.name},"Subscribed"):Object(e.h)(p.a,{priority:"primary",disabled:A,onClick:F=>{R(),F.stopPropagation()},title:W.name},"Subscribe"))}},function($,n){function t(e){var s=e==null?0:e.length;return s?e[s-1]:void 0}$.exports=t},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(11),l=t.n(c),p=t(3),h=t.n(p),m=(O,u,r)=>new Promise((i,d)=>{var b=S=>{try{E(r.next(S))}catch(P){d(P)}},w=S=>{try{E(r.throw(S))}catch(P){d(P)}},E=S=>S.done?i(S.value):Promise.resolve(S.value).then(b,w);E((r=r.apply(O,u)).next())});const g=O=>parseFloat(O).toFixed(2),v=({symbol:O,prependSymbol:u=!1,isStatic:r=!1})=>{const i=`/api/v1/price/${O}`,[d,b]=Object(s.k)(null),[w,E]=Object(s.k)(null),[S,P]=Object(s.k)(!1);return Object(s.d)(()=>{(()=>m(void 0,null,function*(){try{const W=yield l.a.get(i);if(W.body){if(W.body.status==="not_found"){P(!0);return}b(W.body.price),E(W.body.change_pct)}}catch(W){P(!0)}}))()},[i]),!u&&O.startsWith("$")&&(O=O.slice(1)),r?Object(e.h)("span",null,Object(e.h)("a",{href:`${Object(p.getStockLandingUrl)(O)}`},O," ")):S?Object(e.h)("span",null,O," "):Object(e.h)("a",{className:a()("cashtag",{neutral:w==0,positive:w&&parseFloat(w)>0,negative:w&&parseFloat(w)<0}),target:"_blank",rel:"noreferrer",href:`${Object(p.getStockLandingUrl)(O)}`,"data-attrs":JSON.stringify({symbol:O})},`${O.toUpperCase()} `,Object(e.h)("span",null,w?Object(e.h)("span",null,Object(e.h)("span",{className:a()("delta")},`${g(w)}%`,!!w&&(parseFloat(w)>0?String.fromCharCode(8593):String.fromCharCode(8595)))):"0.00"))};n.default=v},function($,n,t){"use strict";t.r(n),t.d(n,"Blockquote",function(){return o}),t.d(n,"default",function(){return o}),t.d(n,"inputRegex",function(){return s});var e=t(18);const s=/^\s*>\s$/,o=e.Node.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:a}){return["blockquote",Object(e.mergeAttributes)(this.options.HTMLAttributes,a),0]},addCommands(){return{setBlockquote:()=>({commands:a})=>a.wrapIn(this.name),toggleBlockquote:()=>({commands:a})=>a.toggleWrap(this.name),unsetBlockquote:()=>({commands:a})=>a.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Object(e.wrappingInputRule)({find:s,type:this.type})]}})},function($,n,t){"use strict";t.r(n),t.d(n,"BulletList",function(){return c}),t.d(n,"default",function(){return c}),t.d(n,"inputRegex",function(){return a});var e=t(18);const s=e.Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:l}){return["li",Object(e.mergeAttributes)(this.options.HTMLAttributes,l),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),o=e.Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:l=>l.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:l}){return["span",Object(e.mergeAttributes)(this.options.HTMLAttributes,l),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:l,commands:p})=>{const h=Object(e.getMarkAttributes)(l,this.type);return Object.entries(h).some(([,g])=>!!g)?!0:p.unsetMark(this.name)}}}}),a=/^\s*([-+*])\s$/,c=e.Node.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:l}){return["ul",Object(e.mergeAttributes)(this.options.HTMLAttributes,l),0]},addCommands(){return{toggleBulletList:()=>({commands:l,chain:p})=>this.options.keepAttributes?p().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(s.name,this.editor.getAttributes(o.name)).run():l.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let l=Object(e.wrappingInputRule)({find:a,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(l=Object(e.wrappingInputRule)({find:a,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(o.name),editor:this.editor})),[l]}})},function($,n,t){"use strict";t.r(n),t.d(n,"Code",function(){return a}),t.d(n,"default",function(){return a}),t.d(n,"inputRegex",function(){return s}),t.d(n,"pasteRegex",function(){return o});var e=t(18);const s=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,o=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,a=e.Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:c}){return["code",Object(e.mergeAttributes)(this.options.HTMLAttributes,c),0]},addCommands(){return{setCode:()=>({commands:c})=>c.setMark(this.name),toggleCode:()=>({commands:c})=>c.toggleMark(this.name),unsetCode:()=>({commands:c})=>c.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Object(e.markInputRule)({find:s,type:this.type})]},addPasteRules(){return[Object(e.markPasteRule)({find:o,type:this.type})]}})},function($,n,t){"use strict";t.r(n),t.d(n,"CodeBlock",function(){return c}),t.d(n,"backtickInputRegex",function(){return o}),t.d(n,"default",function(){return c}),t.d(n,"tildeInputRegex",function(){return a});var e=t(18),s=t(37);const o=/^```([a-z]+)?[\s\n]$/,a=/^~~~([a-z]+)?[\s\n]$/,c=e.Node.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:l=>{var p;const{languageClassPrefix:h}=this.options,v=[...((p=l.firstElementChild)===null||p===void 0?void 0:p.classList)||[]].filter(O=>O.startsWith(h)).map(O=>O.replace(h,""))[0];return v||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:l,HTMLAttributes:p}){return["pre",Object(e.mergeAttributes)(this.options.HTMLAttributes,p),["code",{class:l.attrs.language?this.options.languageClassPrefix+l.attrs.language:null},0]]},addCommands(){return{setCodeBlock:l=>({commands:p})=>p.setNode(this.name,l),toggleCodeBlock:l=>({commands:p})=>p.toggleNode(this.name,"paragraph",l)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:l,$anchor:p}=this.editor.state.selection,h=p.pos===1;return!l||p.parent.type.name!==this.name?!1:h||!p.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:l})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:p}=l,{selection:h}=p,{$from:m,empty:g}=h;if(!g||m.parent.type!==this.type)return!1;const v=m.parentOffset===m.parent.nodeSize-2,O=m.parent.textContent.endsWith(`

`);return!v||!O?!1:l.chain().command(({tr:u})=>(u.delete(m.pos-2,m.pos),!0)).exitCode().run()},ArrowDown:({editor:l})=>{if(!this.options.exitOnArrowDown)return!1;const{state:p}=l,{selection:h,doc:m}=p,{$from:g,empty:v}=h;if(!v||g.parent.type!==this.type||!(g.parentOffset===g.parent.nodeSize-2))return!1;const u=g.after();return u===void 0||m.nodeAt(u)?!1:l.commands.exitCode()}}},addInputRules(){return[Object(e.textblockTypeInputRule)({find:o,type:this.type,getAttributes:l=>({language:l[1]})}),Object(e.textblockTypeInputRule)({find:a,type:this.type,getAttributes:l=>({language:l[1]})})]},addProseMirrorPlugins(){return[new s.c({key:new s.d("codeBlockVSCodeHandler"),props:{handlePaste:(l,p)=>{if(!p.clipboardData||this.editor.isActive(this.type.name))return!1;const h=p.clipboardData.getData("text/plain"),m=p.clipboardData.getData("vscode-editor-data"),g=m?JSON.parse(m):void 0,v=g==null?void 0:g.mode;if(!h||!v)return!1;const{tr:O}=l.state;return O.replaceSelectionWith(this.type.create({language:v})),O.setSelection(s.f.near(O.doc.resolve(Math.max(0,O.selection.from-2)))),O.insertText(h.replace(/\r\n?/g,`
`)),O.setMeta("paste",!0),l.dispatch(O),!0}}})]}})},function($,n,t){"use strict";t.r(n),t.d(n,"Heading",function(){return s}),t.d(n,"default",function(){return s});var e=t(18);const s=e.Node.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(o=>({tag:`h${o}`,attrs:{level:o}}))},renderHTML({node:o,HTMLAttributes:a}){return[`h${this.options.levels.includes(o.attrs.level)?o.attrs.level:this.options.levels[0]}`,Object(e.mergeAttributes)(this.options.HTMLAttributes,a),0]},addCommands(){return{setHeading:o=>({commands:a})=>this.options.levels.includes(o.level)?a.setNode(this.name,o):!1,toggleHeading:o=>({commands:a})=>this.options.levels.includes(o.level)?a.toggleNode(this.name,"paragraph",o):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((o,a)=>Yo(vr({},o),{[`Mod-Alt-${a}`]:()=>this.editor.commands.toggleHeading({level:a})}),{})},addInputRules(){return this.options.levels.map(o=>Object(e.textblockTypeInputRule)({find:new RegExp(`^(#{1,${o}})\\s$`),type:this.type,getAttributes:{level:o}}))}})},function($,n,t){"use strict";t.r(n),t.d(n,"ListItem",function(){return s}),t.d(n,"default",function(){return s});var e=t(18);const s=e.Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:o}){return["li",Object(e.mergeAttributes)(this.options.HTMLAttributes,o),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}})},function($,n,t){"use strict";t.r(n),t.d(n,"OrderedList",function(){return c}),t.d(n,"default",function(){return c}),t.d(n,"inputRegex",function(){return a});var e=t(18);const s=e.Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:l}){return["li",Object(e.mergeAttributes)(this.options.HTMLAttributes,l),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),o=e.Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:l=>l.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:l}){return["span",Object(e.mergeAttributes)(this.options.HTMLAttributes,l),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:l,commands:p})=>{const h=Object(e.getMarkAttributes)(l,this.type);return Object.entries(h).some(([,g])=>!!g)?!0:p.unsetMark(this.name)}}}}),a=/^(\d+)\.\s$/,c=e.Node.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:l=>l.hasAttribute("start")?parseInt(l.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:l}){const m=l,{start:p}=m,h=ha(m,["start"]);return p===1?["ol",Object(e.mergeAttributes)(this.options.HTMLAttributes,h),0]:["ol",Object(e.mergeAttributes)(this.options.HTMLAttributes,l),0]},addCommands(){return{toggleOrderedList:()=>({commands:l,chain:p})=>this.options.keepAttributes?p().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(s.name,this.editor.getAttributes(o.name)).run():l.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let l=Object(e.wrappingInputRule)({find:a,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(l=Object(e.wrappingInputRule)({find:a,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(o.name),editor:this.editor})),[l]}})},function($,n,t){"use strict";t.r(n),t.d(n,"Strike",function(){return a}),t.d(n,"default",function(){return a}),t.d(n,"inputRegex",function(){return s}),t.d(n,"pasteRegex",function(){return o});var e=t(18);const s=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,o=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,a=e.Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:c=>c.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:c}){return["s",Object(e.mergeAttributes)(this.options.HTMLAttributes,c),0]},addCommands(){return{setStrike:()=>({commands:c})=>c.setMark(this.name),toggleStrike:()=>({commands:c})=>c.toggleMark(this.name),unsetStrike:()=>({commands:c})=>c.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Object(e.markInputRule)({find:s,type:this.type})]},addPasteRules(){return[Object(e.markPasteRule)({find:o,type:this.type})]}})},function($,n,t){"use strict";t.r(n),t.d(n,"parseLastValidLink",function(){return o}),t.d(n,"parseValidLinks",function(){return a});var e=t(592),s=t.n(e);function o(c){return c&&a(c).pop()||null}function a(c){return Object(e.find)(c).filter(l=>l.type==="url"&&l.href.startsWith("http"))}},function($,n,t){"use strict";t.r(n),t.d(n,"VideoEmbedPlayer",function(){return v});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(816),l=t(433),p=t(4),h=t(54),m=t(154),g={videoEmbed:"frontend-components-video_embed_player-module__videoEmbed--Ndmbm",canEdit:"frontend-components-video_embed_player-module__canEdit--1Hulz",editVideoEmbedWrap:"frontend-components-video_embed_player-module__editVideoEmbedWrap--3dscZ",editVideoEmbed:"frontend-components-video_embed_player-module__editVideoEmbed--1yWjO",imageGallery:"frontend-components-video_embed_player-module__imageGallery--n_qvr"};const v=({mediaUploadId:u,post:r,pub:i,isEditor:d=!1})=>{const[b,w]=Object(s.k)(null),E=Object(s.j)(null),S=f=>{var y,M;!d||(f?(y=E.current)==null||y.open():(M=E.current)==null||M.close())},{mediaUpload:P,loading:D,error:W}=Object(l.a)({mediaUploadId:u});u&&!b&&P&&w(P);const B=Object(s.a)(()=>{document.dispatchEvent(new Event("editSelectedVideoEmbed"))},[]);return D?Object(e.h)("div",null,"Loading"):W||!b?Object(e.h)("div",null,"Could not load video."):Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:a()(g.videoEmbed,d&&g.canEdit),onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1)},d&&Object(e.h)(O,{onEditVideoEmbed:B,menuRef:E}),Object(e.h)(m.a,{mediaUpload:b,isStatic:!1,post:r!=null?r:null,pub:i})))},O=({onEditVideoEmbed:u,menuRef:r})=>Object(e.h)(p.a,{justifyContent:"center",alignItems:"center",className:g.editVideoEmbedWrap},Object(e.h)(h.a,{ref:r,noList:!0},Object(e.h)(p.b,{onClick:u,justifyContent:"center",alignItems:"center",className:g.editVideoEmbed},Object(e.h)(c.a,{height:20}))))},function($,n,t){"use strict";t.r(n),t.d(n,"Mention",function(){return h}),t.d(n,"MentionPluginKey",function(){return p}),t.d(n,"default",function(){return h});var e=t(18),s=t(19),o=t(193);function a(m){var g;const{char:v,allowSpaces:O,prefixSpace:u,startOfLine:r,$position:i}=m,d=Object(e.escapeForRegEx)(v),b=new RegExp(`\\s${d}$`),w=r?"^":"",E=O?new RegExp(`${w}${d}.*?(?=\\s${d}|$)`,"gm"):new RegExp(`${w}(?:^)?${d}[^\\s${d}]*`,"gm"),S=((g=i.nodeBefore)===null||g===void 0?void 0:g.isText)&&i.nodeBefore.text;if(!S)return null;const P=i.pos-S.length,D=Array.from(S.matchAll(E)).pop();if(!D||D.input===void 0||D.index===void 0)return null;const W=D.input.slice(Math.max(0,D.index-1),D.index),B=/^[\s\0]?$/.test(W);if(u&&!B)return null;const f=P+D.index;let y=f+D[0].length;return O&&b.test(S.slice(y-1,y+1))&&(D[0]+=" ",y+=1),f<i.pos&&y>=i.pos?{range:{from:f,to:y},query:D[0].slice(v.length),text:D[0]}:null}const c=new s.PluginKey("suggestion");function l({pluginKey:m=c,editor:g,char:v="@",allowSpaces:O=!1,prefixSpace:u=!0,startOfLine:r=!1,decorationTag:i="span",decorationClass:d="suggestion",command:b=()=>null,items:w=()=>[],render:E=()=>({}),allow:S=()=>!0}){let P;const D=E==null?void 0:E();return new s.Plugin({key:m,view(){return{update:(W,B)=>Ac(this,null,function*(){var f,y,M,N,A,L,C;const R=(f=this.key)===null||f===void 0?void 0:f.getState(B),U=(y=this.key)===null||y===void 0?void 0:y.getState(W.state),Z=R.active&&U.active&&R.range.from!==U.range.from,F=!R.active&&U.active,z=R.active&&!U.active,G=!F&&!z&&R.query!==U.query,V=F||Z,k=G&&!Z,K=z||Z;if(!V&&!k&&!K)return;const Y=K&&!V?R:U,ee=document.querySelector(`[data-decoration-id="${Y.decorationId}"]`);P={editor:g,range:Y.range,query:Y.query,text:Y.text,items:[],command:ae=>{b({editor:g,range:Y.range,props:ae})},decorationNode:ee,clientRect:ee?()=>{var ae;const{decorationId:he}=(ae=this.key)===null||ae===void 0?void 0:ae.getState(g.state);return document.querySelector(`[data-decoration-id="${he}"]`).getBoundingClientRect()}:null},V&&((M=D==null?void 0:D.onBeforeStart)===null||M===void 0||M.call(D,P)),k&&((N=D==null?void 0:D.onBeforeUpdate)===null||N===void 0||N.call(D,P)),(k||V)&&(P.items=yield w({editor:g,query:Y.query})),K&&((A=D==null?void 0:D.onExit)===null||A===void 0||A.call(D,P)),k&&((L=D==null?void 0:D.onUpdate)===null||L===void 0||L.call(D,P)),V&&((C=D==null?void 0:D.onStart)===null||C===void 0||C.call(D,P))}),destroy:()=>{var W;!P||(W=D==null?void 0:D.onExit)===null||W===void 0||W.call(D,P)}}},state:{init(){return{active:!1,range:{},query:null,text:null,composing:!1}},apply(W,B,f,y){const{isEditable:M}=g,{composing:N}=g.view,{selection:A}=W,{empty:L,from:C}=A,R=vr({},B);if(R.composing=N,M&&(L||g.view.composing)){(C<B.range.from||C>B.range.to)&&!N&&!B.composing&&(R.active=!1);const U=a({char:v,allowSpaces:O,prefixSpace:u,startOfLine:r,$position:A.$from}),Z=`id_${Math.floor(Math.random()*4294967295)}`;U&&S({editor:g,state:y,range:U.range})?(R.active=!0,R.decorationId=B.decorationId?B.decorationId:Z,R.range=U.range,R.query=U.query,R.text=U.text):R.active=!1}else R.active=!1;return R.active||(R.decorationId=null,R.range={},R.query=null,R.text=null),R}},props:{handleKeyDown(W,B){var f;const{active:y,range:M}=this.getState(W.state);return y&&((f=D==null?void 0:D.onKeyDown)===null||f===void 0?void 0:f.call(D,{view:W,event:B,range:M}))||!1},decorations(W){const{active:B,range:f,decorationId:y}=this.getState(W);return B?o.b.create(W.doc,[o.a.inline(f.from,f.to,{nodeName:i,class:d,"data-decoration-id":y})]):null}}})}const p=new s.PluginKey("mention"),h=e.Node.create({name:"mention",addOptions(){return{HTMLAttributes:{},renderLabel({options:m,node:g}){var v;return`${m.suggestion.char}${(v=g.attrs.label)!==null&&v!==void 0?v:g.attrs.id}`},suggestion:{char:"@",pluginKey:p,command:({editor:m,range:g,props:v})=>{var O;const u=m.view.state.selection.$to.nodeAfter;((O=u==null?void 0:u.text)===null||O===void 0?void 0:O.startsWith(" "))&&(g.to+=1),m.chain().focus().insertContentAt(g,[{type:this.name,attrs:v},{type:"text",text:" "}]).run()},allow:({state:m,range:g})=>{const v=m.doc.resolve(g.from),O=m.schema.nodes[this.name];return!!v.parent.type.contentMatch.matchType(O)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:m=>m.getAttribute("data-id"),renderHTML:m=>m.id?{"data-id":m.id}:{}},label:{default:null,parseHTML:m=>m.getAttribute("data-label"),renderHTML:m=>m.label?{"data-label":m.label}:{}}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:m,HTMLAttributes:g}){return["span",Object(e.mergeAttributes)({"data-type":this.name},this.options.HTMLAttributes,g),this.options.renderLabel({options:this.options,node:m})]},renderText({node:m}){return this.options.renderLabel({options:this.options,node:m})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:m,state:g})=>{let v=!1;const{selection:O}=g,{empty:u,anchor:r}=O;return u?(g.doc.nodesBetween(r-1,r,(i,d)=>{if(i.type.name===this.name)return v=!0,m.insertText(this.options.suggestion.char||"",d,d+i.nodeSize),!1}),v):!1})}},addProseMirrorPlugins(){return[l(vr({editor:this.editor},this.options.suggestion))]}})},function($,n,t){"use strict";t.d(n,"a",function(){return B});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(631),l=t(146),p=t(7),h=t(21),m=t(14),g=t(4),v=t(216),O=t(141),u=t(194),r=t(265),i=Object.defineProperty,d=Object.defineProperties,b=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(f,y,M)=>y in f?i(f,y,{enumerable:!0,configurable:!0,writable:!0,value:M}):f[y]=M,D=(f,y)=>{for(var M in y||(y={}))E.call(y,M)&&P(f,M,y[M]);if(w)for(var M of w(y))S.call(y,M)&&P(f,M,y[M]);return f},W=(f,y)=>d(f,b(y));function B({fill:f="outline"}){const y=Object(l.b)(),M=Object(h.f)({pathname:"/api/v1/activity-feed-web",query:{limit:12},auto:!1}),{triggerProps:N,layerProps:A,renderLayer:L,isOpen:C,setOpen:R}=Object(v.a)({}),U=()=>{C||M.refetch(),R(!C)},Z=Object(s.j)(null);Object(s.d)(()=>{N.ref(Z.current)},[Z,N]);const F=Object(s.j)(24);return Object(s.d)(()=>{var z;const G=(z=Z.current)==null?void 0:z.ownerDocument.querySelector("button.user-indicator");G&&(F.current=window.innerWidth-G.getBoundingClientRect().right)},[Z]),Object(s.d)(()=>{y.activityUnreadCount>0&&Object(p.i)(p.a.NOTIFICATIONS_UNREAD_SHOWN,{unreadCount:y.activityUnreadCount})},[y.activityUnreadCount]),Object(e.h)(e.Fragment,null,Object(e.h)(m.c,W(D({},N),{ref:Z,className:r.a.trigger,"aria-label":"View activity",size:40,fill:f,priority:"secondary",onClick:U}),Object(e.h)(c.a,{"aria-hidden":!0,size:20,strokeWidth:2}),y.activityUnreadCount>0&&Object(e.h)(u.b,{className:a()(r.a.badge,y.activityUnreadCount<10&&r.a.circle)},Object(e.h)(g.a,{alignItems:"center",justifyContent:"center"},y.activityUnreadCount<100?y.activityUnreadCount:"99+"))),C&&L(Object(e.h)(g.a,W(D({},A),{style:W(D({},A.style),{left:"auto",right:`${F.current}px`}),className:a()("elevated",r.a.dropdown)}),Object(e.h)(O.a,{module:"./MiniNotificationsViewer",resolve:z=>z.MiniNotificationsViewer,onRequest:()=>t.e(14).then(t.bind(null,940)),resource:M}))))}},function($,n,t){"use strict";t.d(n,"a",function(){return o});var e=t(1),s=(a,c,l)=>new Promise((p,h)=>{var m=O=>{try{v(l.next(O))}catch(u){h(u)}},g=O=>{try{v(l.throw(O))}catch(u){h(u)}},v=O=>O.done?p(O.value):Promise.resolve(O.value).then(m,g);v((l=l.apply(a,c)).next())});function o(a,c){const[l,p]=Object(e.i)(a,c),h=Object(e.j)(l);h.current=l;const m=Object(e.h)(()=>g=>s(this,null,function*(){if(typeof g=="function")return yield g(m,()=>h.current);p(g)}),[]);return[l,m]}},function($,n,t){"use strict";t.d(n,"a",function(){return d});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(441),l=t(92),p=t.n(l),h=t(3),m=t.n(h),g=t(9),v=t.n(g),O=t(101),u=t(7),r=t(275);function i(b,w){return Object(l.cleanSlug)(Object(g.truncateText)(b,500,{ellipsis:""}),{allowUnicode:w})}function d({text:b,post:w,pub:E,offsetTop:S}){const{isStatic:P}=Object(s.b)(O.a),D=i(b,!0),W=i(b,!1),B=Object(r.a)();if(!w||!E||P)return null;const f=`${Object(h.getBaseUrl)(E)}/i/${w.id}/${D}`,y=M=>{!(location==null?void 0:location.href)||(M.preventDefault(),Object(u.i)(u.a.HEADER_ANCHOR_WIDGET_CLICKED,{destination:f}),B(f))};return Object(e.h)("div",{id:`\xA7${D}`,class:a()("header-anchor-widget",{"offset-top":S})},w.id<66696300&&D!==W&&Object(e.h)("div",{id:`\xA7${W}`}),Object(e.h)("div",{class:"header-anchor-widget-button-container"},Object(e.h)("div",{class:"header-anchor-widget-button",href:f,onClick:y},Object(e.h)(c.a,{className:"header-anchor-widget-icon",size:20}))))}},function($,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return c});var e=t(0),s=t(1);const o=Object(e.createContext)({isSubstack:!1,customDomain:null});o.displayName="DomainInfoContext";function a(){return Object(s.b)(o)}function c({value:l,children:p}){const h=Object(s.h)(()=>l,Object.values(l));return Object(e.h)(o.Provider,{value:h},p)}},function($,n,t){"use strict";t.d(n,"a",function(){return c});var e=t(0),s=t(1),o=t(152),a=t(182);function c({content:l}){const p=Object(s.h)(()=>new o.Editor({content:l,editable:!1,enableInputRules:!1,enablePasteRules:!1,extensions:a.a}),[]);return Object(s.d)(()=>{JSON.stringify(p.getJSON())!==JSON.stringify(l)&&p.commands.setContent(l)},[l]),Object(s.d)(()=>()=>p.destroy(),[]),Object(e.h)(o.EditorContent,{editor:p})}},function($,n,t){"use strict";t.d(n,"a",function(){return c});var e=t(7);const s=["sort"],o=["sort","selection"];function a(l,p){const h=new URL(`${location.protocol}//${location.host}${l}`);for(const m of h.searchParams.keys())(p?o:s).includes(m)||h.searchParams.delete(m);return h.toString()}function c({previous:l,url:p}){var h,m;if(typeof window=="undefined")return;const g=a(p,!1),v=a(p,!0);(h=document.head.querySelector("link[rel=canonical]"))==null||h.setAttribute("href",g),(m=document.head.querySelector('meta[property="og:url"]'))==null||m.setAttribute("content",v),Object(e.c)({previous:l,url:p})}},function($,n,t){"use strict";t.d(n,"a",function(){return ne});var e=t(0),s=t(905),o=t(6),a=t.n(o),c=t(33),l=t(80),p=t.n(l),h=t(3),m=t(89),g=t(361),v=t(359),O=t(8),u=t(362),r=t(4),i=t(201),d=t(82),b=t(540),w=t(550),E=t(154);const S=({mediaUpload:X,post:q,pub:Ne})=>X?Object(e.h)(E.a,{mediaUpload:X,isStatic:!0,post:q,pub:Ne}):Object(e.h)("div",{"data-testid":"video-embed-player-static-missing-media"},"Did not find media upload"),P=(X,{pub:q,props:{isStatic:Ne,post:Qe,dataForEmailRender:Ze}})=>{var tt;try{const Ft=X.getAttribute("data-attrs");if(Ft){const{mediaUploadId:Lt}=JSON.parse(p()(Ft));return Ne?Object(e.h)(S,{pub:q,mediaUpload:(tt=Ze.idToMediaUpload)==null?void 0:tt[Lt]}):Object(e.h)(w.VideoEmbedPlayer,{pub:q,post:Qe,mediaUploadId:Lt})}}catch(Ft){console.error("Failed to parse video:",Ft)}return Object(e.h)(e.Fragment,null)};var D=t(554),W=t(363),B=t(236),f=t(360),y=t(166),M=Object.defineProperty,N=Object.defineProperties,A=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,U=(X,q,Ne)=>q in X?M(X,q,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):X[q]=Ne,Z=(X,q)=>{for(var Ne in q||(q={}))C.call(q,Ne)&&U(X,Ne,q[Ne]);if(L)for(var Ne of L(q))R.call(q,Ne)&&U(X,Ne,q[Ne]);return X},F=(X,q)=>N(X,A(q));const z=(X,q)=>Object(e.h)("div",{className:"subscription-widget-wrap"},Object(e.h)("div",{className:"subscription-widget show-subscribe"},Object(e.h)("div",{className:"preamble"},Object(e.h)("p",{dangerouslySetInnerHTML:{__html:X.children[0].children[0].children[0].innerHTML}})),Object(e.h)(y.b,Z({pub:q.pub,subscribeButtonAttrs:null,source:"subscribe-widget-preamble"},q.props)))),G=(X,q)=>{try{const Ne=JSON.parse(p()(X.getAttribute("data-attrs")));if([`${q.pub.base_url}/subscribe?`,"${ctx.pub.base_url}/subscribe?plan=founding",c.Substitutions.CHECKOUT_URL,c.Substitutions.FOUNDING_CHECKOUT_URL].includes(Ne.url)){const Qe=JSON.parse(p()(X.getAttribute("data-attrs")));return Object(e.h)(y.b,Z({pub:q.pub,subscribeButtonAttrs:Qe},q.props))}}catch(Ne){console.error("Failed to parse button:",Ne)}},V=(X,{pub:q,props:{isStatic:Ne,post:Qe}})=>{try{const Ze=X.getAttribute("data-attrs");if(Ze){const tt=JSON.parse(p()(Ze));return Ne?Object(e.h)(d.AudioEmbedPlayerStatic,{label:tt.label,pub:q,post:Qe,duration:tt.duration}):Object(e.h)(d.AudioEmbedPlayer,{label:tt.label,pub:q,post:Qe,src:`/api/v1/audio/upload/${tt.mediaUploadId}/src`,duration:tt.duration,autoPlay:!1})}}catch(Ze){console.error("Failed to parse audio:",Ze)}},k=(X,{pub:q,props:{isStatic:Ne,post:Qe}})=>{try{const Ze=X.getAttribute("data-attrs");if(Ze){const tt=JSON.parse(p()(Ze));return Ne?Object(e.h)(d.AudioEmbedPlayerStatic,{label:tt.label,pub:q,post:Qe,duration:tt.duration}):Object(e.h)(d.AudioEmbedPlayer,{label:tt.label,pub:q,post:Qe,src:tt.url,duration:tt.duration,autoPlay:!1})}}catch(Ze){console.error("Failed to parse audio:",Ze)}},K=(X,{props:{isStatic:q}})=>{try{const Ne=X.getAttribute("data-attrs");if(Ne){const{name:Qe,avatarUrl:Ze,url:tt}=JSON.parse(p()(Ne));return q?Object(e.h)(u.MeetingEmbedStatic,{name:Qe,avatarUrl:Ze,url:tt}):Object(e.h)(u.MeetingEmbed,{name:Qe,avatarUrl:Ze,url:tt})}}catch(Ne){console.error("Failed to parse audio:",Ne)}},Y=X=>{try{const q=JSON.parse(X.dataset.attrs).symbol;return q?Object(e.h)(b.default,{symbol:q,prependSymbol:JSON.parse(X.dataset.attrs).prependSymbol,isStatic:JSON.parse(X.dataset.attrs).isStatic}):Object(e.h)(e.Fragment,null)}catch(q){return Object(e.h)(e.Fragment,null)}},ee=(X,{pub:q,props:{isStatic:Ne,post:Qe}})=>{try{if(Ne){const Ze=X.getAttribute("data-attrs");if(Ze){const tt=JSON.parse(p()(Ze)),Ft=tt==null?void 0:tt.persistentExpression;return Ft?Object(e.h)("img",{src:Object(h.getLatexUrl)(Ft),style:{transform:"scale(0.5)"}}):Object(e.h)("p",null,"Failed to render LaTeX expression \u2014 no expression found in email")}else return Object(e.h)("p",null,"Failed to render LaTeX expression \u2014 data attributes not found")}else{const Ze=X==null?void 0:X.children[0].attributes,tt=Ze==null?void 0:Ze.persistentexpression.value;return tt?Object(e.h)(r.c,{className:"latex-rendered",justifyContent:"center",flex:"grow",paddingBottom:"4px",paddingTop:"4px"},Object(e.h)(r.b,{justifyContent:"center"},Object(e.h)(s.a,{inline:!1},`\\(${tt}\\)`))):Object(e.h)("p",null,"Failed to render LaTeX expression \u2014 no expression found")}}catch(Ze){return Object(e.h)("p",null,"Failed to render LaTeX expression \u2014 error")}},ae=X=>{try{const q=JSON.parse(X.dataset.attrs),{name:Ne,id:Qe,type:Ze,url:tt,photo_url:Ft,uuid:Lt,isStatic:rn}=q;return Ne?Object(e.h)(B.default,{name:Ne,id:Qe,type:Ze,url:tt,photo_url:Ft,uuid:Lt,isStatic:rn}):Object(e.h)(e.Fragment,null)}catch(q){return Object(e.h)(e.Fragment,null)}},he=(X,q)=>{var Ne;try{const Qe=JSON.parse(p()(X.getAttribute("data-attrs")));return(Qe==null?void 0:Qe.isEmail)?Object(e.h)("table",{className:"poll-embed poll-email",cellSpacing:"16px",width:"100%"},Object(e.h)("tbody",null,Object(e.h)("tr",null,Object(e.h)("td",{align:"center"},Object(e.h)(f.StaticPoll,{id:Qe.id,embeddedPolls:(Ne=q.props.dataForEmailRender)==null?void 0:Ne.embeddedPolls}))))):Object(e.h)("div",{className:"poll-embed",dataAttrs:X.getAttribute("data-attrs")},Object(e.h)(f.Poll,{id:Qe.id,isEditor:!1,post:q.props.post,pub:q.pub,isVersionView:!!q.props.isVersionView}))}catch(Qe){return console.log("Failed to parse poll:",Qe),Object(e.h)(e.Fragment,null)}},me=(X,{pub:q,props:{isStatic:Ne,post:Qe}})=>{try{const Ze=X.getAttribute("data-attrs");if(Ze){const tt=JSON.parse(p()(Ze));return Ne?Object(e.h)(W.ImageGalleryStatic,{gallery:tt.gallery}):Object(e.h)(W.ImageGallery,{gallery:tt.gallery})}}catch(Ze){console.error("Failed to parse image gallery node",Ze)}};function Ye(X,{props:{isStatic:q}}){try{const Ne=X.getAttribute("data-attrs"),Qe=JSON.parse(p()(Ne));return Object(e.h)("div",{className:"community-chat",dataAttrs:Ne},q?Object(e.h)(g.EmailCommunityChatEmbed,Z({},Qe)):Object(e.h)(g.CommunityChatEmbed,{pub:Qe.pub,subdomain:Qe.subdomain}))}catch(Ne){return console.error("Failed to parse chat embed:",Ne),Object(e.h)(e.Fragment,null)}}function se(X,q){const{props:{isStatic:Ne,is_freemail:Qe}}=q;try{const Ze=X.getAttribute("data-attrs"),tt=JSON.parse(p()(Ze));return Object(e.h)("div",{className:"community-post",dataAttrs:Ze},Ne?Object(e.h)(v.EmailCommunityPostEmbed,Z({is_freemail:Qe},tt)):Object(e.h)(v.CommunityPostEmbed,Z({},tt)))}catch(Ze){return console.error("Failed to parse chat post embed:",Ze),Object(e.h)(e.Fragment,null)}}const ie=(X,q,Ne)=>{var Qe;const Ze=X.id,[tt,,Ft]=Ze.split("-"),Lt=(Qe=Ne.wrapper.querySelector(`#${tt}-${Ft}`))==null?void 0:Qe.nextElementSibling;return Lt?(Object(m.isMobile)()&&(X.href="javascript:void(0)"),Object(e.h)(i.a,{content:Object(e.h)("div",{className:"markup"},$e(Lt,q,Ne)),className:"footnote-hovercard-target",layerClassName:"typography footnote-hovercard"},$e(X,q,Ne))):$e(X,q,Ne)},Ee=(X,q,{shallow:Ne}={})=>{var Qe,Ze,tt;if(X.nodeName==="A"&&(X.getAttribute("rel")||X.setAttribute("rel",((Qe=q.pub)==null?void 0:Qe.no_follow)?"nofollow ugc noopener":"")),q.pub&&X.nodeName==="P"&&Object(O.hasClass)(X,"button-wrapper")){const Ft=G(X,q);if(Ft)return Ft}return Object(O.hasClass)(X,"subscription-widget-wrap")?z(X,q):Object(O.hasClass)(X,"cashtag-wrap")?Y(X):Object(O.hasClass)(X,"mention-wrap")?ae(X):q.pub&&Object(O.hasClass)(X,"native-audio-url-embed")?k(X,q):q.pub&&Object(O.hasClass)(X,"native-audio-embed")?V(X,q):q.pub&&Object(O.hasClass)(X,"native-video-embed")?P(X,q):q.pub&&Object(O.hasClass)(X,"meeting-embed")?K(X,q):Object(O.hasClass)(X,"poll-embed")?he(X,q):Object(O.hasClass)(X,"image-gallery-embed")?me(X,q):Object(O.hasClass)(X,"latex-rendered")?ee(X,q):Object(O.hasClass)(X,"community-chat")?Ye(X,q):Object(O.hasClass)(X,"community-post")?se(X,q):(((tt=(Ze=q.props)==null?void 0:Ze.post)==null?void 0:tt.id)&&Object(O.hasClass)(X,"footnote")&&(X.id&&(X.id+=`-${q.props.post.id}`),X.href&&(X.href+=`-${q.props.post.id}`)),Object(O.hasClass)(X,"footnote-anchor")?ie(X,Ee,q):Ne?null:$e(X,Ee,q))},Oe=function(X){const q={},Ne=Array.prototype.slice.call(X);for(const{name:Qe,value:Ze}of Ne)q[Qe]=Ze;return q},ce=(X,q)=>{let Ne=0;return function(){const Qe=[].slice.call(arguments,0),Ze=++Ne>q;Ze&&console.error("Too many post nodes to recurse",{postId:Qe[2].props.post.id,depth:Ne});const tt=X.apply(null,[...Qe,...Ze?[!0]:[]]);return Ne--,tt}};function ue(X,q,Ne,Qe){var Ze;const tt=a()("header-with-anchor-widget",q.className),Ft=Ne.children.length?Array.prototype.map.call(Ne.childNodes,Lt=>Ee(Lt,Qe)):[Ne.textContent];return Object(e.h)(X,F(Z({},q),{className:tt}),...Ft,Object(e.h)(D.a,{text:Ne.textContent,pub:Qe==null?void 0:Qe.pub,post:(Ze=Qe==null?void 0:Qe.props)==null?void 0:Ze.post,offsetTop:!0}))}const $e=ce((X,q,Ne,Qe)=>{var Ze,tt;if(!X)throw new Error("Empty node, cannot preactify!");const Ft=X.nodeType===3?"span":X.nodeType===8?"x_preact_compatible_html_comment_x":X.tagName.toLowerCase(),Lt=X.nodeType!==1?{}:Oe(X.attributes),rn=X.children&&X.children.length>0?null:X.textContent;if(Qe)return Object(e.h)(Ft,F(Z({},Lt),{dangerouslySetInnerHTML:{__html:X.innerHTML}}));const ht=!!((Ze=X.parentElement)==null?void 0:Ze.getAttribute("data-prose-mirror-wrapper"));if(((tt=Ne==null?void 0:Ne.pub)==null?void 0:tt.type)!=="rss"&&ht&&["h1","h2","h3","h4"].includes(Ft)&&!X.className)return ue(Ft,Lt,X,Ne);if(rn)return Object(e.h)(Ft,Lt,rn);const je=q(X,Ne,{shallow:!0});return je||Object(e.h)(Ft,Lt,...Array.prototype.map.call(X.childNodes,Le=>q(Le,Ne)))},2500);function ne(X,q,Ne={}){const Qe=document.createElement("div");return Qe.setAttribute("data-prose-mirror-wrapper",1),Qe.innerHTML=X,Array.prototype.map.call(Qe.childNodes,Ze=>$e(Ze,Ee,{wrapper:Qe,pub:q,props:Ne}))}},function($,n,t){"use strict";t.d(n,"a",function(){return f});var e=t(1),s=t(18),o=t(182),a=t(9),c=Object.defineProperty,l=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(N,A,L)=>A in N?c(N,A,{enumerable:!0,configurable:!0,writable:!0,value:L}):N[A]=L,O=(N,A)=>{for(var L in A||(A={}))m.call(A,L)&&v(N,L,A[L]);if(h)for(var L of h(A))g.call(A,L)&&v(N,L,A[L]);return N},u=(N,A)=>l(N,p(A));function r(N,{limit:A=420}={}){var L,C,R;let U=null,Z=0,F=!1;if(N)if(A<=0)F=!0;else if(N.content&&N.content.length>0){U=u(O({},N),{content:[]});for(const z of N.content){const G=r(z,{limit:A-Z});if(G.doc){if((L=U.content)==null||L.push(G.doc),Z+=G.length,G.isTruncated){F=!0;break}}else{F=!0;break}}}else U=u(O({},N),{text:Object(a.truncateText)(N.text,A)}),Z+=(R=(C=U.text)==null?void 0:C.length)!=null?R:0,N.text!==U.text&&(F=!0);return{doc:U,length:Z,isTruncated:F}}var i=Object.defineProperty,d=Object.defineProperties,b=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(N,A,L)=>A in N?i(N,A,{enumerable:!0,configurable:!0,writable:!0,value:L}):N[A]=L,D=(N,A)=>{for(var L in A||(A={}))E.call(A,L)&&P(N,L,A[L]);if(w)for(var L of w(A))S.call(A,L)&&P(N,L,A[L]);return N},W=(N,A)=>d(N,b(A));const B=420;function f(N,{limit:A=B}={}){return Object(e.h)(()=>{var L;const C=y((L=N==null?void 0:N.body_json)!=null?L:(N==null?void 0:N.body)?Object(s.generateJSON)(N.body,o.a):null),R=r(C,{limit:A});return{bodyJson:C,truncatedBodyJson:R.doc,isTruncated:R.isTruncated}},[N==null?void 0:N.body,N==null?void 0:N.body_json])}function y(N){var A,L;let C=null;if(N)if(C=W(D({},N),{content:void 0,text:void 0}),N==null?void 0:N.content){C.content=[];for(const R of N.content){const U=y(R);U&&C.content.push(U)}}else{const R=(A=N.marks)==null?void 0:A.find(U=>U.type==="link");((L=R==null?void 0:R.attrs)==null?void 0:L.href)?C.text=M(R.attrs.href):C.text=N.text}return C}function M(N){let A;try{A=new URL(N)}catch(R){return console.error("Failed to parse URL",N,R),N}A.hostname=A.hostname.replace(/^www\./,""),A.pathname=A.pathname.replace(/\/+$/,""),A.hash="";const L=[];A.hostname.includes("youtube")&&L.push("v"),A.searchParams.forEach((R,U)=>{L.includes(U)||A.searchParams.delete(U)});const C=A.toString().replace(/^\w+:\/\//,"").replace(/\/+$/,"");return C?Object(a.truncateText)(C,40):N}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"UsersIcon",svgParams:{height:14,width:15,stroke:"#B6B6B6"}}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.91732 12.249V11.0824C9.91732 9.79369 8.87265 8.74902 7.58398 8.74902H2.91732C1.62865 8.74902 0.583984 9.79369 0.583984 11.0824V12.249",fill:"#838383",stroke:"#838383","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.24935 6.41423C6.53801 6.41423 7.58268 5.36956 7.58268 4.08089C7.58268 2.79223 6.53801 1.74756 5.24935 1.74756C3.96068 1.74756 2.91602 2.79223 2.91602 4.08089C2.91602 5.36956 3.96068 6.41423 5.24935 6.41423Z",fill:"#838383",stroke:"#838383","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8118 12.2659H13.563C13.5622 11.2025 14.0005 8.82373 11.666 8.82373",fill:"#838383",stroke:"#838383","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.33398 1.82227C10.3664 2.08661 11.0886 3.01693 11.0886 4.08268C11.0886 5.14844 10.3664 6.07875 9.33398 6.3431",fill:"#838383",stroke:"#838383","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d="black"}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"ThreadIcon",svgParams:{height:19,width:19}}),Object(e.h)("path",{d:"M10.4286 3H8.57143C5.49441 3 3 5.49441 3 8.57143C3 10.2355 4.16477 12.1934 5.32143 13.2143V16L11.3571 14.1429C14.6071 13.067 16 10.9973 16 8.57143C16 5.49441 13.5056 3 10.4286 3Z",stroke:d,"stroke-linejoin":"round"}))};n.default=u},function($,n,t){var e=t(444),s=t(565),o=Object.prototype,a=o.hasOwnProperty,c=s(function(l,p,h){a.call(l,h)?l[h].push(p):e(l,h,[p])});$.exports=c},,,function($,n,t){var e=t(712),s=t(713),o=t(186),a=t(73);function c(l,p){return function(h,m){var g=a(h)?e:s,v=p?p():{};return g(h,l,o(m,2),v)}}$.exports=c},function($,n,t){var e=t(636),s=t(671),o=s(e);$.exports=o},function($,n){function t(e,s){var o=-1,a=e.length;for(s||(s=Array(a));++o<a;)s[o]=e[o];return s}$.exports=t},function($,n,t){"use strict";t.r(n),t.d(n,"ReaderBadgeIcon",function(){return a});var e=t(0);const s="#FF6719";var o=t(12);function a({className:l,type:p,accentColor:h}){const m=22;return Object(e.h)(o.a,{name:"ReaderBadgeIcon",className:l,svgParams:{width:m,height:m,viewBox:"0 0 22 22"},fill:"none",stroke:"none"},Object(e.h)("circle",{cx:"11",cy:"11",r:"11",fill:"var(--color-bg-primary)"}),Object(e.h)("circle",{cx:"11",cy:"11",r:"9",fill:h||s}),p==="subscribed"?Object(e.h)(e.Fragment,null,Object(e.h)("ellipse",{rx:"2.72196",ry:"2.68806",transform:"matrix(0.707101 -0.707113 0.707101 0.707113 12.926 12.9255)",stroke:"white"}),Object(e.h)("ellipse",{rx:"2.72196",ry:"2.68806",transform:"matrix(0.707101 -0.707113 0.707101 0.707113 9.07543 9.07503)",stroke:"white"}),Object(e.h)("ellipse",{rx:"2.68806",ry:"2.72196",transform:"matrix(-0.707101 -0.707113 -0.707101 0.707113 9.05152 12.9494)",stroke:"white"}),Object(e.h)("ellipse",{rx:"2.68806",ry:"2.72196",transform:"matrix(-0.707101 -0.707113 -0.707101 0.707113 12.95 9.05009)",stroke:"white"})):Object(e.h)(e.Fragment,null,Object(e.h)("path",{d:"M11.9018 10.3229C11.9018 12.2029 10.3777 13.7269 8.49775 13.7269C6.61777 13.7269 5.09375 12.2029 5.09375 10.3229C5.09375 8.44296 6.61777 6.91894 8.49775 6.91894C10.3777 6.91894 11.9018 8.44296 11.9018 10.3229Z",stroke:"white"}),Object(e.h)("path",{d:"M12.8178 13.4959C12.8178 15.3759 11.2938 16.8999 9.41377 16.8999C7.5338 16.8999 6.00977 15.3759 6.00977 13.4959C6.00977 11.6159 7.5338 10.0919 9.41377 10.0919C11.2938 10.0919 12.8178 11.6159 12.8178 13.4959Z",stroke:"white"}),Object(e.h)("path",{d:"M15.9564 13.503C15.9564 15.383 14.4324 16.907 12.5524 16.907C10.6725 16.907 9.14844 15.383 9.14844 13.503C9.14844 11.623 10.6725 10.099 12.5524 10.099C14.4324 10.099 15.9564 11.623 15.9564 13.503Z",stroke:"white"}),Object(e.h)("path",{d:"M14.4047 8.49824C14.4047 10.3782 12.8807 11.9022 11.0007 11.9022C9.1207 11.9022 7.59668 10.3782 7.59668 8.49824C7.59668 6.61826 9.1207 5.09424 11.0007 5.09424C12.8807 5.09424 14.4047 6.61826 14.4047 8.49824Z",stroke:"white"}),Object(e.h)("path",{d:"M16.9066 10.3229C16.9066 12.2029 15.3826 13.7269 13.5026 13.7269C11.6227 13.7269 10.0986 12.2029 10.0986 10.3229C10.0986 8.44296 11.6227 6.91894 13.5026 6.91894C15.3826 6.91894 16.9066 8.44296 16.9066 10.3229Z",stroke:"white"})))}var c=n.default=a},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(645),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideCornerDownRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"EmojiPickerIcon",svgParams:{height:15,width:14,viewBox:"0 0 15 14",fill:"none",stroke:"none"}}),Object(e.h)("path",{d:"M12.7474 7.25708C12.3309 7.37462 11.8916 7.4375 11.4375 7.4375C8.77963 7.4375 6.625 5.28287 6.625 2.625C6.625 2.17094 6.68788 1.73156 6.80542 1.31511C6.74549 1.31337 6.68535 1.3125 6.625 1.3125C3.24226 1.3125 0.5 4.05476 0.5 7.4375C0.5 10.8202 3.24226 13.5625 6.625 13.5625C10.0077 13.5625 12.75 10.8202 12.75 7.4375C12.75 7.37715 12.7491 7.31701 12.7474 7.25708ZM5.75 5.25C5.75 5.97487 5.16237 6.5625 4.4375 6.5625C3.71263 6.5625 3.125 5.97487 3.125 5.25C3.125 4.52513 3.71263 3.9375 4.4375 3.9375C5.16237 3.9375 5.75 4.52513 5.75 5.25ZM10.125 8.3125C10.125 10.2455 8.558 11.8125 6.625 11.8125C4.692 11.8125 3.125 10.2455 3.125 8.3125H10.125Z",fill:"#808080","fill-rule":"evenodd","clip-rule":"evenodd"}),Object(e.h)("path",{d:"M12.0938 0H10.7812V1.96875L8.8125 1.96875V3.28125H10.7812V5.25H12.0938V3.28125H14.0625V1.96875L12.0938 1.96875V0Z",fill:"#808080","fill-rule":"evenodd","clip-rule":"evenodd"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{fill:d="white"}=i,b=O(i,["fill"]);return Object(e.h)(s.a,v(g({},b),{name:"PodcastEmbedPlayIcon",svgParams:{width:14,height:16,viewBox:"0 0 14 16",stroke:"none",fill:d}}),Object(e.h)("path",{d:"M12.8563 6.71384C13.8273 7.29645 13.8273 8.70372 12.8563 9.28632L2.27174 15.637C1.27196 16.2369 1.11076e-07 15.5167 1.62041e-07 14.3508L7.17238e-07 1.64937C7.68203e-07 0.483426 1.27196 -0.236744 2.27174 0.363129L12.8563 6.71384Z"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"NoteForwardQuoteIcon",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M13.4147 2.09993C10.4072 1.67249 7.2423 2.61548 4.92891 4.92887C1.02366 8.83411 1.02366 15.1658 4.92891 19.071C8.83415 22.9762 15.1658 22.9762 19.071 19.071C21.3844 16.7576 22.3274 13.5927 21.9 10.5852M18.5 2.62126C18.8978 2.22343 19.4374 1.99994 20 1.99994C20.5626 1.99994 21.1021 2.22343 21.5 2.62126C21.8978 3.01908 22.1213 3.55865 22.1213 4.12126C22.1213 4.68387 21.8978 5.22343 21.5 5.62126L13 14.1213L8.99998 15.1213L9.99998 11.1213L18.5 2.62126Z","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},function($,n,t){"use strict";var e=t(0),s=t(6),o=t.n(s),a=t(85),c=t(54),l=t(411),p=t(47),h=t(48),m=Object.defineProperty,g=(u,r,i)=>r in u?m(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,v=(u,r,i)=>(g(u,typeof r!="symbol"?r+"":r,i),i);class O extends e.Component{constructor(){super(...arguments);v(this,"onSortCommentsClicked",r=>{this.sortMenuRef.toggle(),this.props.onSortSelected(r)})}render({sort:r,loading:i,pub:d}){const b=Object(h.default)("like_comments_enabled");return Object(e.h)("div",{className:o()("comments-page-sort-controls",{loading:i})},Object(e.h)("div",{className:"comments-page-sort-menu"},Object(e.h)("button",{className:"comments-page-sort-menu-button",onClick:()=>this.sortMenuRef.toggle()},Object(e.h)("span",{className:"comments-page-sort-menu-button-label"},Object(a.c)(r)),Object(e.h)(l.default,{height:"6"})),Object(e.h)(c.b,{className:"comments-page-sort-menu-dropdown",ref:w=>this.sortMenuRef=w},Object(a.b)({likesEnabled:b}).map(({key:w,text:E})=>Object(e.h)(p.a,{className:r===w?"selected":"",onClick:()=>this.onSortCommentsClicked(w)},E)))))}}n.a=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d="black",height:b=19,width:w=19}=i,E=O(i,["stroke","height","width"]);return Object(e.h)(s.a,v(g({},E),{name:"NewsletterIcon",svgParams:{height:b,width:w,viewBox:"0 0 19 19"}}),Object(e.h)("path",{d:"M3.5 3.5H15.5",stroke:d,"stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M3.5 7.5H15.5",stroke:d,"stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M3.5 11.5H15.5",stroke:d,"stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M3.5 15.5H12",stroke:d,"stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";(function(e){t.d(n,"a",function(){return l});var s=t(3),o=t.n(s),a=t(8),c=t.n(a);const l=[{name:"Choose installed player",ios:!1,android:!0,desktop:!1,icon:"/img/podcast-app-icons/generic-orange-microphone.svg?v=1",onClick:p=>{document.location.href=`itpc://${Object(s.stripProtocol)(p)}`}},{name:"Apple Podcasts",ios:!0,android:!1,desktop:!0,icon:"/img/podcast-app-icons/apple-podcasts.svg?v=1",onClick:p=>{document.location.href=`podcast://${Object(s.stripProtocol)(p)}`}},{name:"Google Podcasts",ios:!0,android:!0,desktop:!1,icon:"/img/podcast-app-icons/google-podcasts.svg?v=1",onClick:p=>{document.location.href=`googlepodcasts://subscribe-by-rss-feed?feed=${e.from(p).toString("base64")}`}},{name:"Overcast",ios:!0,android:!1,desktop:!0,icon:"/img/podcast-app-icons/overcast.svg?v=1",onClick:p=>{document.location.href=`overcast://x-callback-url/add?url=${encodeURIComponent(p)}`}},{name:"Pocket Casts",ios:!0,android:!0,desktop:!1,icon:"/img/podcast-app-icons/pocketcasts.svg?v=1",onClick:p=>{document.location.href=`pktc://subscribe/${Object(s.stripProtocol)(p)}`}},{name:"Downcast",ios:!0,android:!1,desktop:!1,icon:"/img/podcast-app-icons/downcast.svg?v=1",onClick:p=>{document.location.href=`downcast://${Object(s.stripProtocol)(p)}`}},{name:"Podcast Addict",ios:!1,android:!0,desktop:!1,icon:"/img/podcast-app-icons/podcast-addict.svg?v=1",onClick:p=>{document.location.href=`podcastaddict://${Object(s.stripProtocol)(p)}`}},{name:"Castro",ios:!0,android:!1,desktop:!1,icon:"/img/podcast-app-icons/castro.svg?v=1",onClick:p=>{Object(a.copyToClipboard)(p),document.location.href=`castros://subscribe/${Object(s.stripProtocol)(p)}`}},{name:"Radio Public",ios:!0,android:!0,desktop:!1,icon:"/img/podcast-app-icons/radiopublic.svg?v=1",onClick:p=>{document.location.href=`https://radiopublic.com/${encodeURIComponent(p)}`}}]}).call(this,t(599).Buffer)},,function($,n,t){"use strict";$.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var s={},o=Symbol("test"),a=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var c=42;s[o]=c;for(o in s)return!1;if(typeof Object.keys=="function"&&Object.keys(s).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(s).length!==0)return!1;var l=Object.getOwnPropertySymbols(s);if(l.length!==1||l[0]!==o||!Object.prototype.propertyIsEnumerable.call(s,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var p=Object.getOwnPropertyDescriptor(s,o);if(p.value!==c||p.enumerable!==!0)return!1}return!0}},function($,n,t){"use strict";var e=t(285),s=t(272),o=s("%Function.prototype.apply%"),a=s("%Function.prototype.call%"),c=s("%Reflect.apply%",!0)||e.call(a,o),l=s("%Object.getOwnPropertyDescriptor%",!0),p=s("%Object.defineProperty%",!0),h=s("%Math.max%");if(p)try{p({},"a",{value:1})}catch(g){p=null}$.exports=function(v){var O=c(e,a,arguments);if(l&&p){var u=l(O,"length");u.configurable&&p(O,"length",{value:1+h(0,v.length-(arguments.length-1))})}return O};var m=function(){return c(e,o,arguments)};p?p($.exports,"apply",{value:m}):$.exports.apply=m},function($,n,t){var e=t(114),s=function(){try{var o=e(Object,"defineProperty");return o({},"",{}),o}catch(a){}}();$.exports=s},function($,n,t){var e=t(215),s=t(173),o=t(233),a=t(109);function c(l,p,h){if(!a(h))return!1;var m=typeof p;return(m=="number"?s(h)&&o(p,h.length):m=="string"&&p in h)?e(h[p],l):!1}$.exports=c},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var a in o)typeof s[a]=="undefined"&&(s[a]=o[a]);return s}$.exports=n.default,$.exports.default=n.default},function($,n,t){"use strict";n.__esModule=!0,n.tokenize=n.test=n.scanner=n.parser=n.options=n.inherits=n.find=void 0;var e=t(307),s=t(727),o=h(s),a=t(728),c=h(a),l=t(729),p=h(l);function h(O){if(O&&O.__esModule)return O;var u={};if(O!=null)for(var r in O)Object.prototype.hasOwnProperty.call(O,r)&&(u[r]=O[r]);return u.default=O,u}Array.isArray||(Array.isArray=function(O){return Object.prototype.toString.call(O)==="[object Array]"});var m=function(u){return p.run(c.run(u))},g=function(u){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=m(u),d=[],b=0;b<i.length;b++){var w=i[b];w.isLink&&(!r||w.type===r)&&d.push(w.toObject())}return d},v=function(u){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=m(u);return i.length===1&&i[0].isLink&&(!r||i[0].type===r)};n.find=g,n.inherits=e.inherits,n.options=o,n.parser=p,n.scanner=c,n.test=v,n.tokenize=m},function($,n,t){"use strict";n.__esModule=!0,n.stateify=n.TokenState=n.CharacterState=void 0;var e=t(307);function s(){return function(p){this.j=[],this.T=p||null}}var o=s();o.prototype={defaultTransition:!1,on:function(h,m){if(h instanceof Array){for(var g=0;g<h.length;g++)this.j.push([h[g],m]);return this}return this.j.push([h,m]),this},next:function(h){for(var m=0;m<this.j.length;m++){var g=this.j[m],v=g[0],O=g[1];if(this.test(h,v))return O}return this.defaultTransition},accepts:function(){return!!this.T},test:function(h,m){return h===m},emit:function(){return this.T}};var a=(0,e.inherits)(o,s(),{test:function(h,m){return h===m||m instanceof RegExp&&m.test(h)}}),c=(0,e.inherits)(o,s(),{jump:function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,g=this.next(new h(""));return g===this.defaultTransition?(g=new this.constructor(m),this.on(h,g)):m&&(g.T=m),g},test:function(h,m){return h instanceof m}});function l(p,h,m,g){for(var v=0,O=p.length,u=h,r=[],i=void 0;v<O&&(i=u.next(p[v]));)u=i,v++;if(v>=O)return[];for(;v<O-1;)i=new a(g),r.push(i),u.on(p[v],i),u=i,v++;return i=new a(m),r.push(i),u.on(p[O-1],i),r}n.CharacterState=a,n.TokenState=c,n.stateify=l},function($,n,t){"use strict";n.__esModule=!0;function e(){return function(s){s&&(this.v=s)}}n.createTokenClass=e},function($,n,t){var e=t(586);function s(o,a){if(!!o){if(typeof o=="string")return e(o,a);var c=Object.prototype.toString.call(o).slice(8,-1);if(c==="Object"&&o.constructor&&(c=o.constructor.name),c==="Map"||c==="Set")return Array.from(o);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return e(o,a)}}$.exports=s,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){function t(e,s){(s==null||s>e.length)&&(s=e.length);for(var o=0,a=new Array(s);o<s;o++)a[o]=e[o];return a}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];n.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},n.getSymbolTotalCodewords=function(o){return e[o]},n.getBCHDigit=function(s){let o=0;for(;s!==0;)o++,s>>>=1;return o},n.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');t=o},n.isKanjiModeEnabled=function(){return typeof t!="undefined"},n.toSJIS=function(o){return t(o)}},function($,n,t){const e=t(907),s=t(908);n.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(c,l){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?c.ccBits[0]:l<27?c.ccBits[1]:c.ccBits[2]},n.getBestModeForData=function(c){return s.testNumeric(c)?n.NUMERIC:s.testAlphanumeric(c)?n.ALPHANUMERIC:s.testKanji(c)?n.KANJI:n.BYTE},n.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},n.isValid=function(c){return c&&c.bit&&c.ccBits};function o(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+a)}}n.from=function(c,l){if(n.isValid(c))return c;try{return o(c)}catch(p){return l}}},function($,n,t){"use strict";t.d(n,"a",function(){return h});var e=t(0),s=t(6),o=t.n(s),a=t(67),c=t.n(a),l=t(163),p=t(64);const h=({publication:g,logo_size:v=60,isStatic:O=!1,children:u})=>O?Object(e.h)(m,{publication:g,logo_size:v,children:u}):Object(e.h)("div",{className:"publication card"},v&&Object(e.h)("figure",{className:"logo"},Object(e.h)(p.a,{pub:g,logo_url:g.logo_url,size:v})),Object(e.h)("div",{className:"title"},Object(e.h)("div",{className:"name"},g.name),Object(e.h)("div",{className:"description"},g.hero_text),u)),m=({publication:g,logo_size:v=60,className:O="",children:u})=>Object(e.h)("table",{role:"presentation",className:o()("publication","card",O,g.logo_url?"has-logo":"no-logo"),width:"auto",cellpadding:0,cellspacing:0,border:"0"},Object(e.h)("tr",{cellpadding:"0",height:"100%"},v&&Object(e.h)("td",{rowspan:"3",className:"logo"},Object(e.h)("figure",{className:"logo"},g.logo_url?Object(e.h)(p.a,{pub:g,logo_url:g.logo_url,size:v,isStatic:!0}):Object(e.h)(l.default,{isStatic:!0,fill:g.theme_var_background_pop||a.substack_color,width:v,height:v}))),Object(e.h)("td",null,Object(e.h)("table",{cellpadding:"0",cellspacing:"0"},Object(e.h)("tr",null,Object(e.h)("td",{className:"title"},g.name)),Object(e.h)("tr",{cellpadding:"0",height:"80%"},Object(e.h)("td",{className:"description"},g.hero_text)),u))));n.b=h},function($,n){const t={is_www:!0,id:0,name:"Substack",subdomain:"www",copyright:"Substack Inc.",mailing_address:`548 Market Street PMB 72296
San Francisco, CA 94104`,email_from:"no-reply@substack.com",email_from_name:"Substack",logo_url:"/img/substack.png?v=3"};$.exports=t},function($,n,t){var e=t(138),s=t(567),o=t(295),a=t(173),c=t(739),l=t(740),p=t(348),h=t(232),m=t(625),g=t(617),v="[object Map]",O="[object Set]",u=e?e.iterator:void 0;function r(i){if(!i)return[];if(a(i))return c(i)?m(i):s(i);if(u&&i[u])return l(i[u]());var d=o(i),b=d==v?p:d==O?h:g;return b(i)}$.exports=r},function($,n,t){$.exports=t(582)},,,function($,n,t){"use strict";t.d(n,"a",function(){return D}),t.d(n,"b",function(){return W});var e=t(0),s=t(11),o=t.n(s),a=t(33),c=t(3),l=t.n(c),p=t(9),h=t.n(p),m=t(101),g=t(31),v=t(7),O=t(8),u=t.n(O),r=t(213),i=t(76),d=t(204),b=t(136),w=Object.defineProperty,E=(B,f,y)=>f in B?w(B,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):B[f]=y,S=(B,f,y)=>(E(B,typeof f!="symbol"?f+"":f,y),y),P=(B,f,y)=>new Promise((M,N)=>{var A=R=>{try{C(y.next(R))}catch(U){N(U)}},L=R=>{try{C(y.throw(R))}catch(U){N(U)}},C=R=>R.done?M(R.value):Promise.resolve(R.value).then(A,L);C((y=y.apply(B,f)).next())});class D extends e.Component{onTopReached(){this.state.topReached||(this.setState({topReached:!0}),Object(v.i)(v.a.POST_SEEN,{post_id:this.props.post.id,post_audience:this.props.post.audience,post_type:this.props.post.type}))}onBottomReached(){this.state.bottomReached||(this.setState({bottomReached:!0}),Object(v.i)(v.a.POST_BOTTOM_SEEN,{post_id:this.props.post.id,post_audience:this.props.post.audience,post_type:this.props.post.type}))}enableEmailNotifications(){return P(this,null,function*(){try{yield o.a.post(`/api/v1/post/${this.props.post.id}/subscribe`),window.location.reload()}catch(f){console.error("Failed to subscribe to email notifications:",f),alert(Object(O.getNetworkErrorMessage)(f))}})}render({className:f,pub:y,post:M,user:N,freeSignup:A,freeSignupEmail:L,isStatic:C,hidden:R,truncated:U,invisible:Z,post_reaction_token:F,onChange:z,showCta:G=U,showUnsubscribeNotice:V,dataForEmailRender:k={},showReactions:K=!0,gap:Y=16}){typeof R!="boolean"&&(R=M.hidden);let ee,ae;R?(ee="Subscribe to view",ae=Object(c.pathWithQuery)("/subscribe",{simple:!0,next:document.location.href,utm_source:"thread",utm_medium:"web",utm_content:M.id})):(ae=Object(c.getPostUrl)(y,M,{noBase:!0}),M.type!=="thread"||U?ee=Object(p.getPostCtaText)(M):M.comment_count?ee=`View ${M.comment_count} comments`:ee="Reply");const he=C&&!this.context.isAmp;return Object(e.h)(g.e,{className:`thread-head typography ${f||""}`},Object(e.h)("tr",null,Object(e.h)("td",null,Object(e.h)(g.d,{width:"100%"},!Z&&!R&&Object(e.h)(b.a,{onVisible:()=>this.onTopReached()}),Object(e.h)(g.d,{gap:Y,width:"100%"},Object(e.h)(r.d,{pub:y,post:M,user:N,isStatic:C,freeSignup:A,freeSignupEmail:L,reaction_token:F,allowEdit:!0,allowTruncate:U,showReactions:!!G||K,showShare:!1,showComments:!!M.comment_count,small:!0,inThreadHead:!0,showActiveBadge:!0,onChange:z,showLabel:!0}),Object(e.h)(d.a,{user:N,freeSignup:A,freeSignupEmail:L,pub:y,post:M,html:!R&&!U&&M.body_html,isStatic:C,dataForEmailRender:k},R?Object(e.h)("p",null,Object(e.h)("i",null,"This thread is only visible to paid subscribers of ",y.name)):U?Object(e.h)("p",null,M.description):null),G?Object(e.h)("a",{className:"thread-head-cta",href:ae,native:!0},ee," \u2192"):R&&Object(e.h)("p",{className:"thread-head-cta"},Object(e.h)("a",{href:Object(c.getSubscribeUrl)(y,{simple:!0,next:document.location.href,utm_source:"thread",utm_medium:"web",utm_content:M.id}),className:"button primary subscribe-btn",native:!C},Object(p.getSubscribeText)(y)),Object(e.h)("a",{href:Object(c.getSigninUrl)({for_pub:y.subdomain}),className:"button",native:!0},"Sign in"))),he&&Object(e.h)(g.d,{gap:Y,style:{width:"100%"}},Object(e.h)(g.d,{style:{width:"100%",textAlign:"center"}},Object(e.h)("a",{role:"button",class:"button primary",style:{margin:"0 auto"},href:a.Substitutions.HALF_MAGIC_COMMENTS_URL},"See the discussion")),Object(e.h)(i.e,{isFooter:!0,customization:{showShare:!0,showComments:!0,showReactions:{showReactions:K},showRestack:!1,showLabels:!0}})),V&&M.unsubscribed&&Object(e.h)("div",{className:"notifications-alert"},"Email notifications are disabled for this thread."," ",Object(e.h)("a",{href:"javascript:void(0)",onClick:()=>this.enableEmailNotifications()},"Re-enable")),!Z&&!R&&Object(e.h)(b.a,{onVisible:()=>this.onBottomReached()})))))}}S(D,"contextType",m.a);class W extends e.Component{render(){return Object(e.h)("div",{className:"thread-head-silhouette"},Object(e.h)("div",{className:"thread-head-silhouette-head"}),Object(e.h)("div",{className:"thread-head-silhouette-content"},Object(e.h)("div",{className:"thread-head-silhouette-title"}),Object(e.h)("div",{className:"thread-head-silhouette-meta"}),Object(e.h)("div",{className:"thread-head-silhouette-body"},Object(e.h)("div",{className:"thread-head-silhouette-body-line"}),Object(e.h)("div",{className:"thread-head-silhouette-body-line"}),Object(e.h)("div",{className:"thread-head-silhouette-body-line"}))))}}},,function($,n,t){"use strict";n.a={button:"frontend-main-meetings-index-module__button--2-8aA",avatarWithPubLogo:"frontend-main-meetings-index-module__avatarWithPubLogo--2Tvam",avatar:"frontend-main-meetings-index-module__avatar--QbX7c",pubLogo:"frontend-main-meetings-index-module__pubLogo--1srd6",displayedBadge:"frontend-main-meetings-index-module__displayedBadge--3qwfN",pubIcon:"frontend-main-meetings-index-module__pubIcon--33u9U",offer:"frontend-main-meetings-index-module__offer--3IS2n",unavailable:"frontend-main-meetings-index-module__unavailable--2W0rz",description:"frontend-main-meetings-index-module__description--2ol2U",check:"frontend-main-meetings-index-module__check--3uPCA",disabledCheck:"frontend-main-meetings-index-module__disabledCheck--2jvuJ",originalPrice:"frontend-main-meetings-index-module__originalPrice--2fyMv",closeButton:"frontend-main-meetings-index-module__closeButton--110rH",closeIcon:"frontend-main-meetings-index-module__closeIcon--2-yua"}},function($,n,t){var e=t(330),s=t(711);function o(a,c,l,p,h){var m=-1,g=a.length;for(l||(l=s),h||(h=[]);++m<g;){var v=a[m];c>0&&l(v)?c>1?o(v,c-1,l,p,h):e(h,v):p||(h[h.length]=v)}return h}$.exports=o},function($,n,t){"use strict";(function(e){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/var s=t(743),o=t(744),a=t(745);n.Buffer=h,n.SlowBuffer=w,n.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT!==void 0?e.TYPED_ARRAY_SUPPORT:c(),n.kMaxLength=l();function c(){try{var ne=new Uint8Array(1);return ne.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ne.foo()===42&&typeof ne.subarray=="function"&&ne.subarray(1,1).byteLength===0}catch(X){return!1}}function l(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function p(ne,X){if(l()<X)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(ne=new Uint8Array(X),ne.__proto__=h.prototype):(ne===null&&(ne=new h(X)),ne.length=X),ne}function h(ne,X,q){if(!h.TYPED_ARRAY_SUPPORT&&!(this instanceof h))return new h(ne,X,q);if(typeof ne=="number"){if(typeof X=="string")throw new Error("If encoding is specified then the first argument must be a string");return O(this,ne)}return m(this,ne,X,q)}h.poolSize=8192,h._augment=function(ne){return ne.__proto__=h.prototype,ne};function m(ne,X,q,Ne){if(typeof X=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&X instanceof ArrayBuffer?i(ne,X,q,Ne):typeof X=="string"?u(ne,X,q):d(ne,X)}h.from=function(ne,X,q){return m(null,ne,X,q)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0}));function g(ne){if(typeof ne!="number")throw new TypeError('"size" argument must be a number');if(ne<0)throw new RangeError('"size" argument must not be negative')}function v(ne,X,q,Ne){return g(X),X<=0?p(ne,X):q!==void 0?typeof Ne=="string"?p(ne,X).fill(q,Ne):p(ne,X).fill(q):p(ne,X)}h.alloc=function(ne,X,q){return v(null,ne,X,q)};function O(ne,X){if(g(X),ne=p(ne,X<0?0:b(X)|0),!h.TYPED_ARRAY_SUPPORT)for(var q=0;q<X;++q)ne[q]=0;return ne}h.allocUnsafe=function(ne){return O(null,ne)},h.allocUnsafeSlow=function(ne){return O(null,ne)};function u(ne,X,q){if((typeof q!="string"||q==="")&&(q="utf8"),!h.isEncoding(q))throw new TypeError('"encoding" must be a valid string encoding');var Ne=E(X,q)|0;ne=p(ne,Ne);var Qe=ne.write(X,q);return Qe!==Ne&&(ne=ne.slice(0,Qe)),ne}function r(ne,X){var q=X.length<0?0:b(X.length)|0;ne=p(ne,q);for(var Ne=0;Ne<q;Ne+=1)ne[Ne]=X[Ne]&255;return ne}function i(ne,X,q,Ne){if(X.byteLength,q<0||X.byteLength<q)throw new RangeError("'offset' is out of bounds");if(X.byteLength<q+(Ne||0))throw new RangeError("'length' is out of bounds");return q===void 0&&Ne===void 0?X=new Uint8Array(X):Ne===void 0?X=new Uint8Array(X,q):X=new Uint8Array(X,q,Ne),h.TYPED_ARRAY_SUPPORT?(ne=X,ne.__proto__=h.prototype):ne=r(ne,X),ne}function d(ne,X){if(h.isBuffer(X)){var q=b(X.length)|0;return ne=p(ne,q),ne.length===0||X.copy(ne,0,0,q),ne}if(X){if(typeof ArrayBuffer!="undefined"&&X.buffer instanceof ArrayBuffer||"length"in X)return typeof X.length!="number"||$e(X.length)?p(ne,0):r(ne,X);if(X.type==="Buffer"&&a(X.data))return r(ne,X.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(ne){if(ne>=l())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l().toString(16)+" bytes");return ne|0}function w(ne){return+ne!=ne&&(ne=0),h.alloc(+ne)}h.isBuffer=function(X){return!!(X!=null&&X._isBuffer)},h.compare=function(X,q){if(!h.isBuffer(X)||!h.isBuffer(q))throw new TypeError("Arguments must be Buffers");if(X===q)return 0;for(var Ne=X.length,Qe=q.length,Ze=0,tt=Math.min(Ne,Qe);Ze<tt;++Ze)if(X[Ze]!==q[Ze]){Ne=X[Ze],Qe=q[Ze];break}return Ne<Qe?-1:Qe<Ne?1:0},h.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(X,q){if(!a(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return h.alloc(0);var Ne;if(q===void 0)for(q=0,Ne=0;Ne<X.length;++Ne)q+=X[Ne].length;var Qe=h.allocUnsafe(q),Ze=0;for(Ne=0;Ne<X.length;++Ne){var tt=X[Ne];if(!h.isBuffer(tt))throw new TypeError('"list" argument must be an Array of Buffers');tt.copy(Qe,Ze),Ze+=tt.length}return Qe};function E(ne,X){if(h.isBuffer(ne))return ne.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(ne)||ne instanceof ArrayBuffer))return ne.byteLength;typeof ne!="string"&&(ne=""+ne);var q=ne.length;if(q===0)return 0;for(var Ne=!1;;)switch(X){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":case void 0:return Ee(ne).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return ue(ne).length;default:if(Ne)return Ee(ne).length;X=(""+X).toLowerCase(),Ne=!0}}h.byteLength=E;function S(ne,X,q){var Ne=!1;if((X===void 0||X<0)&&(X=0),X>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,X>>>=0,q<=X))return"";for(ne||(ne="utf8");;)switch(ne){case"hex":return z(this,X,q);case"utf8":case"utf-8":return C(this,X,q);case"ascii":return Z(this,X,q);case"latin1":case"binary":return F(this,X,q);case"base64":return L(this,X,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,X,q);default:if(Ne)throw new TypeError("Unknown encoding: "+ne);ne=(ne+"").toLowerCase(),Ne=!0}}h.prototype._isBuffer=!0;function P(ne,X,q){var Ne=ne[X];ne[X]=ne[q],ne[q]=Ne}h.prototype.swap16=function(){var X=this.length;if(X%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var q=0;q<X;q+=2)P(this,q,q+1);return this},h.prototype.swap32=function(){var X=this.length;if(X%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var q=0;q<X;q+=4)P(this,q,q+3),P(this,q+1,q+2);return this},h.prototype.swap64=function(){var X=this.length;if(X%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var q=0;q<X;q+=8)P(this,q,q+7),P(this,q+1,q+6),P(this,q+2,q+5),P(this,q+3,q+4);return this},h.prototype.toString=function(){var X=this.length|0;return X===0?"":arguments.length===0?C(this,0,X):S.apply(this,arguments)},h.prototype.equals=function(X){if(!h.isBuffer(X))throw new TypeError("Argument must be a Buffer");return this===X?!0:h.compare(this,X)===0},h.prototype.inspect=function(){var X="",q=n.INSPECT_MAX_BYTES;return this.length>0&&(X=this.toString("hex",0,q).match(/.{2}/g).join(" "),this.length>q&&(X+=" ... ")),"<Buffer "+X+">"},h.prototype.compare=function(X,q,Ne,Qe,Ze){if(!h.isBuffer(X))throw new TypeError("Argument must be a Buffer");if(q===void 0&&(q=0),Ne===void 0&&(Ne=X?X.length:0),Qe===void 0&&(Qe=0),Ze===void 0&&(Ze=this.length),q<0||Ne>X.length||Qe<0||Ze>this.length)throw new RangeError("out of range index");if(Qe>=Ze&&q>=Ne)return 0;if(Qe>=Ze)return-1;if(q>=Ne)return 1;if(q>>>=0,Ne>>>=0,Qe>>>=0,Ze>>>=0,this===X)return 0;for(var tt=Ze-Qe,Ft=Ne-q,Lt=Math.min(tt,Ft),rn=this.slice(Qe,Ze),ht=X.slice(q,Ne),je=0;je<Lt;++je)if(rn[je]!==ht[je]){tt=rn[je],Ft=ht[je];break}return tt<Ft?-1:Ft<tt?1:0};function D(ne,X,q,Ne,Qe){if(ne.length===0)return-1;if(typeof q=="string"?(Ne=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,isNaN(q)&&(q=Qe?0:ne.length-1),q<0&&(q=ne.length+q),q>=ne.length){if(Qe)return-1;q=ne.length-1}else if(q<0)if(Qe)q=0;else return-1;if(typeof X=="string"&&(X=h.from(X,Ne)),h.isBuffer(X))return X.length===0?-1:W(ne,X,q,Ne,Qe);if(typeof X=="number")return X=X&255,h.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?Qe?Uint8Array.prototype.indexOf.call(ne,X,q):Uint8Array.prototype.lastIndexOf.call(ne,X,q):W(ne,[X],q,Ne,Qe);throw new TypeError("val must be string, number or Buffer")}function W(ne,X,q,Ne,Qe){var Ze=1,tt=ne.length,Ft=X.length;if(Ne!==void 0&&(Ne=String(Ne).toLowerCase(),Ne==="ucs2"||Ne==="ucs-2"||Ne==="utf16le"||Ne==="utf-16le")){if(ne.length<2||X.length<2)return-1;Ze=2,tt/=2,Ft/=2,q/=2}function Lt(rt,Pe){return Ze===1?rt[Pe]:rt.readUInt16BE(Pe*Ze)}var rn;if(Qe){var ht=-1;for(rn=q;rn<tt;rn++)if(Lt(ne,rn)===Lt(X,ht===-1?0:rn-ht)){if(ht===-1&&(ht=rn),rn-ht+1===Ft)return ht*Ze}else ht!==-1&&(rn-=rn-ht),ht=-1}else for(q+Ft>tt&&(q=tt-Ft),rn=q;rn>=0;rn--){for(var je=!0,Le=0;Le<Ft;Le++)if(Lt(ne,rn+Le)!==Lt(X,Le)){je=!1;break}if(je)return rn}return-1}h.prototype.includes=function(X,q,Ne){return this.indexOf(X,q,Ne)!==-1},h.prototype.indexOf=function(X,q,Ne){return D(this,X,q,Ne,!0)},h.prototype.lastIndexOf=function(X,q,Ne){return D(this,X,q,Ne,!1)};function B(ne,X,q,Ne){q=Number(q)||0;var Qe=ne.length-q;Ne?(Ne=Number(Ne),Ne>Qe&&(Ne=Qe)):Ne=Qe;var Ze=X.length;if(Ze%2!=0)throw new TypeError("Invalid hex string");Ne>Ze/2&&(Ne=Ze/2);for(var tt=0;tt<Ne;++tt){var Ft=parseInt(X.substr(tt*2,2),16);if(isNaN(Ft))return tt;ne[q+tt]=Ft}return tt}function f(ne,X,q,Ne){return pe(Ee(X,ne.length-q),ne,q,Ne)}function y(ne,X,q,Ne){return pe(Oe(X),ne,q,Ne)}function M(ne,X,q,Ne){return y(ne,X,q,Ne)}function N(ne,X,q,Ne){return pe(ue(X),ne,q,Ne)}function A(ne,X,q,Ne){return pe(ce(X,ne.length-q),ne,q,Ne)}h.prototype.write=function(X,q,Ne,Qe){if(q===void 0)Qe="utf8",Ne=this.length,q=0;else if(Ne===void 0&&typeof q=="string")Qe=q,Ne=this.length,q=0;else if(isFinite(q))q=q|0,isFinite(Ne)?(Ne=Ne|0,Qe===void 0&&(Qe="utf8")):(Qe=Ne,Ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ze=this.length-q;if((Ne===void 0||Ne>Ze)&&(Ne=Ze),X.length>0&&(Ne<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Qe||(Qe="utf8");for(var tt=!1;;)switch(Qe){case"hex":return B(this,X,q,Ne);case"utf8":case"utf-8":return f(this,X,q,Ne);case"ascii":return y(this,X,q,Ne);case"latin1":case"binary":return M(this,X,q,Ne);case"base64":return N(this,X,q,Ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,X,q,Ne);default:if(tt)throw new TypeError("Unknown encoding: "+Qe);Qe=(""+Qe).toLowerCase(),tt=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(ne,X,q){return X===0&&q===ne.length?s.fromByteArray(ne):s.fromByteArray(ne.slice(X,q))}function C(ne,X,q){q=Math.min(ne.length,q);for(var Ne=[],Qe=X;Qe<q;){var Ze=ne[Qe],tt=null,Ft=Ze>239?4:Ze>223?3:Ze>191?2:1;if(Qe+Ft<=q){var Lt,rn,ht,je;switch(Ft){case 1:Ze<128&&(tt=Ze);break;case 2:Lt=ne[Qe+1],(Lt&192)==128&&(je=(Ze&31)<<6|Lt&63,je>127&&(tt=je));break;case 3:Lt=ne[Qe+1],rn=ne[Qe+2],(Lt&192)==128&&(rn&192)==128&&(je=(Ze&15)<<12|(Lt&63)<<6|rn&63,je>2047&&(je<55296||je>57343)&&(tt=je));break;case 4:Lt=ne[Qe+1],rn=ne[Qe+2],ht=ne[Qe+3],(Lt&192)==128&&(rn&192)==128&&(ht&192)==128&&(je=(Ze&15)<<18|(Lt&63)<<12|(rn&63)<<6|ht&63,je>65535&&je<1114112&&(tt=je))}}tt===null?(tt=65533,Ft=1):tt>65535&&(tt-=65536,Ne.push(tt>>>10&1023|55296),tt=56320|tt&1023),Ne.push(tt),Qe+=Ft}return U(Ne)}var R=4096;function U(ne){var X=ne.length;if(X<=R)return String.fromCharCode.apply(String,ne);for(var q="",Ne=0;Ne<X;)q+=String.fromCharCode.apply(String,ne.slice(Ne,Ne+=R));return q}function Z(ne,X,q){var Ne="";q=Math.min(ne.length,q);for(var Qe=X;Qe<q;++Qe)Ne+=String.fromCharCode(ne[Qe]&127);return Ne}function F(ne,X,q){var Ne="";q=Math.min(ne.length,q);for(var Qe=X;Qe<q;++Qe)Ne+=String.fromCharCode(ne[Qe]);return Ne}function z(ne,X,q){var Ne=ne.length;(!X||X<0)&&(X=0),(!q||q<0||q>Ne)&&(q=Ne);for(var Qe="",Ze=X;Ze<q;++Ze)Qe+=ie(ne[Ze]);return Qe}function G(ne,X,q){for(var Ne=ne.slice(X,q),Qe="",Ze=0;Ze<Ne.length;Ze+=2)Qe+=String.fromCharCode(Ne[Ze]+Ne[Ze+1]*256);return Qe}h.prototype.slice=function(X,q){var Ne=this.length;X=~~X,q=q===void 0?Ne:~~q,X<0?(X+=Ne,X<0&&(X=0)):X>Ne&&(X=Ne),q<0?(q+=Ne,q<0&&(q=0)):q>Ne&&(q=Ne),q<X&&(q=X);var Qe;if(h.TYPED_ARRAY_SUPPORT)Qe=this.subarray(X,q),Qe.__proto__=h.prototype;else{var Ze=q-X;Qe=new h(Ze,void 0);for(var tt=0;tt<Ze;++tt)Qe[tt]=this[tt+X]}return Qe};function V(ne,X,q){if(ne%1!=0||ne<0)throw new RangeError("offset is not uint");if(ne+X>q)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUIntLE=function(X,q,Ne){X=X|0,q=q|0,Ne||V(X,q,this.length);for(var Qe=this[X],Ze=1,tt=0;++tt<q&&(Ze*=256);)Qe+=this[X+tt]*Ze;return Qe},h.prototype.readUIntBE=function(X,q,Ne){X=X|0,q=q|0,Ne||V(X,q,this.length);for(var Qe=this[X+--q],Ze=1;q>0&&(Ze*=256);)Qe+=this[X+--q]*Ze;return Qe},h.prototype.readUInt8=function(X,q){return q||V(X,1,this.length),this[X]},h.prototype.readUInt16LE=function(X,q){return q||V(X,2,this.length),this[X]|this[X+1]<<8},h.prototype.readUInt16BE=function(X,q){return q||V(X,2,this.length),this[X]<<8|this[X+1]},h.prototype.readUInt32LE=function(X,q){return q||V(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+this[X+3]*16777216},h.prototype.readUInt32BE=function(X,q){return q||V(X,4,this.length),this[X]*16777216+(this[X+1]<<16|this[X+2]<<8|this[X+3])},h.prototype.readIntLE=function(X,q,Ne){X=X|0,q=q|0,Ne||V(X,q,this.length);for(var Qe=this[X],Ze=1,tt=0;++tt<q&&(Ze*=256);)Qe+=this[X+tt]*Ze;return Ze*=128,Qe>=Ze&&(Qe-=Math.pow(2,8*q)),Qe},h.prototype.readIntBE=function(X,q,Ne){X=X|0,q=q|0,Ne||V(X,q,this.length);for(var Qe=q,Ze=1,tt=this[X+--Qe];Qe>0&&(Ze*=256);)tt+=this[X+--Qe]*Ze;return Ze*=128,tt>=Ze&&(tt-=Math.pow(2,8*q)),tt},h.prototype.readInt8=function(X,q){return q||V(X,1,this.length),this[X]&128?(255-this[X]+1)*-1:this[X]},h.prototype.readInt16LE=function(X,q){q||V(X,2,this.length);var Ne=this[X]|this[X+1]<<8;return Ne&32768?Ne|4294901760:Ne},h.prototype.readInt16BE=function(X,q){q||V(X,2,this.length);var Ne=this[X+1]|this[X]<<8;return Ne&32768?Ne|4294901760:Ne},h.prototype.readInt32LE=function(X,q){return q||V(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},h.prototype.readInt32BE=function(X,q){return q||V(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},h.prototype.readFloatLE=function(X,q){return q||V(X,4,this.length),o.read(this,X,!0,23,4)},h.prototype.readFloatBE=function(X,q){return q||V(X,4,this.length),o.read(this,X,!1,23,4)},h.prototype.readDoubleLE=function(X,q){return q||V(X,8,this.length),o.read(this,X,!0,52,8)},h.prototype.readDoubleBE=function(X,q){return q||V(X,8,this.length),o.read(this,X,!1,52,8)};function k(ne,X,q,Ne,Qe,Ze){if(!h.isBuffer(ne))throw new TypeError('"buffer" argument must be a Buffer instance');if(X>Qe||X<Ze)throw new RangeError('"value" argument is out of bounds');if(q+Ne>ne.length)throw new RangeError("Index out of range")}h.prototype.writeUIntLE=function(X,q,Ne,Qe){if(X=+X,q=q|0,Ne=Ne|0,!Qe){var Ze=Math.pow(2,8*Ne)-1;k(this,X,q,Ne,Ze,0)}var tt=1,Ft=0;for(this[q]=X&255;++Ft<Ne&&(tt*=256);)this[q+Ft]=X/tt&255;return q+Ne},h.prototype.writeUIntBE=function(X,q,Ne,Qe){if(X=+X,q=q|0,Ne=Ne|0,!Qe){var Ze=Math.pow(2,8*Ne)-1;k(this,X,q,Ne,Ze,0)}var tt=Ne-1,Ft=1;for(this[q+tt]=X&255;--tt>=0&&(Ft*=256);)this[q+tt]=X/Ft&255;return q+Ne},h.prototype.writeUInt8=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,1,255,0),h.TYPED_ARRAY_SUPPORT||(X=Math.floor(X)),this[q]=X&255,q+1};function K(ne,X,q,Ne){X<0&&(X=65535+X+1);for(var Qe=0,Ze=Math.min(ne.length-q,2);Qe<Ze;++Qe)ne[q+Qe]=(X&255<<8*(Ne?Qe:1-Qe))>>>(Ne?Qe:1-Qe)*8}h.prototype.writeUInt16LE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[q]=X&255,this[q+1]=X>>>8):K(this,X,q,!0),q+2},h.prototype.writeUInt16BE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[q]=X>>>8,this[q+1]=X&255):K(this,X,q,!1),q+2};function Y(ne,X,q,Ne){X<0&&(X=4294967295+X+1);for(var Qe=0,Ze=Math.min(ne.length-q,4);Qe<Ze;++Qe)ne[q+Qe]=X>>>(Ne?Qe:3-Qe)*8&255}h.prototype.writeUInt32LE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[q+3]=X>>>24,this[q+2]=X>>>16,this[q+1]=X>>>8,this[q]=X&255):Y(this,X,q,!0),q+4},h.prototype.writeUInt32BE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[q]=X>>>24,this[q+1]=X>>>16,this[q+2]=X>>>8,this[q+3]=X&255):Y(this,X,q,!1),q+4},h.prototype.writeIntLE=function(X,q,Ne,Qe){if(X=+X,q=q|0,!Qe){var Ze=Math.pow(2,8*Ne-1);k(this,X,q,Ne,Ze-1,-Ze)}var tt=0,Ft=1,Lt=0;for(this[q]=X&255;++tt<Ne&&(Ft*=256);)X<0&&Lt===0&&this[q+tt-1]!==0&&(Lt=1),this[q+tt]=(X/Ft>>0)-Lt&255;return q+Ne},h.prototype.writeIntBE=function(X,q,Ne,Qe){if(X=+X,q=q|0,!Qe){var Ze=Math.pow(2,8*Ne-1);k(this,X,q,Ne,Ze-1,-Ze)}var tt=Ne-1,Ft=1,Lt=0;for(this[q+tt]=X&255;--tt>=0&&(Ft*=256);)X<0&&Lt===0&&this[q+tt+1]!==0&&(Lt=1),this[q+tt]=(X/Ft>>0)-Lt&255;return q+Ne},h.prototype.writeInt8=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,1,127,-128),h.TYPED_ARRAY_SUPPORT||(X=Math.floor(X)),X<0&&(X=255+X+1),this[q]=X&255,q+1},h.prototype.writeInt16LE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[q]=X&255,this[q+1]=X>>>8):K(this,X,q,!0),q+2},h.prototype.writeInt16BE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[q]=X>>>8,this[q+1]=X&255):K(this,X,q,!1),q+2},h.prototype.writeInt32LE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[q]=X&255,this[q+1]=X>>>8,this[q+2]=X>>>16,this[q+3]=X>>>24):Y(this,X,q,!0),q+4},h.prototype.writeInt32BE=function(X,q,Ne){return X=+X,q=q|0,Ne||k(this,X,q,4,2147483647,-2147483648),X<0&&(X=4294967295+X+1),h.TYPED_ARRAY_SUPPORT?(this[q]=X>>>24,this[q+1]=X>>>16,this[q+2]=X>>>8,this[q+3]=X&255):Y(this,X,q,!1),q+4};function ee(ne,X,q,Ne,Qe,Ze){if(q+Ne>ne.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function ae(ne,X,q,Ne,Qe){return Qe||ee(ne,X,q,4,34028234663852886e22,-34028234663852886e22),o.write(ne,X,q,Ne,23,4),q+4}h.prototype.writeFloatLE=function(X,q,Ne){return ae(this,X,q,!0,Ne)},h.prototype.writeFloatBE=function(X,q,Ne){return ae(this,X,q,!1,Ne)};function he(ne,X,q,Ne,Qe){return Qe||ee(ne,X,q,8,17976931348623157e292,-17976931348623157e292),o.write(ne,X,q,Ne,52,8),q+8}h.prototype.writeDoubleLE=function(X,q,Ne){return he(this,X,q,!0,Ne)},h.prototype.writeDoubleBE=function(X,q,Ne){return he(this,X,q,!1,Ne)},h.prototype.copy=function(X,q,Ne,Qe){if(Ne||(Ne=0),!Qe&&Qe!==0&&(Qe=this.length),q>=X.length&&(q=X.length),q||(q=0),Qe>0&&Qe<Ne&&(Qe=Ne),Qe===Ne||X.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(Ne<0||Ne>=this.length)throw new RangeError("sourceStart out of bounds");if(Qe<0)throw new RangeError("sourceEnd out of bounds");Qe>this.length&&(Qe=this.length),X.length-q<Qe-Ne&&(Qe=X.length-q+Ne);var Ze=Qe-Ne,tt;if(this===X&&Ne<q&&q<Qe)for(tt=Ze-1;tt>=0;--tt)X[tt+q]=this[tt+Ne];else if(Ze<1e3||!h.TYPED_ARRAY_SUPPORT)for(tt=0;tt<Ze;++tt)X[tt+q]=this[tt+Ne];else Uint8Array.prototype.set.call(X,this.subarray(Ne,Ne+Ze),q);return Ze},h.prototype.fill=function(X,q,Ne,Qe){if(typeof X=="string"){if(typeof q=="string"?(Qe=q,q=0,Ne=this.length):typeof Ne=="string"&&(Qe=Ne,Ne=this.length),X.length===1){var Ze=X.charCodeAt(0);Ze<256&&(X=Ze)}if(Qe!==void 0&&typeof Qe!="string")throw new TypeError("encoding must be a string");if(typeof Qe=="string"&&!h.isEncoding(Qe))throw new TypeError("Unknown encoding: "+Qe)}else typeof X=="number"&&(X=X&255);if(q<0||this.length<q||this.length<Ne)throw new RangeError("Out of range index");if(Ne<=q)return this;q=q>>>0,Ne=Ne===void 0?this.length:Ne>>>0,X||(X=0);var tt;if(typeof X=="number")for(tt=q;tt<Ne;++tt)this[tt]=X;else{var Ft=h.isBuffer(X)?X:Ee(new h(X,Qe).toString()),Lt=Ft.length;for(tt=0;tt<Ne-q;++tt)this[tt+q]=Ft[tt%Lt]}return this};var me=/[^+\/0-9A-Za-z-_]/g;function Ye(ne){if(ne=se(ne).replace(me,""),ne.length<2)return"";for(;ne.length%4!=0;)ne=ne+"=";return ne}function se(ne){return ne.trim?ne.trim():ne.replace(/^\s+|\s+$/g,"")}function ie(ne){return ne<16?"0"+ne.toString(16):ne.toString(16)}function Ee(ne,X){X=X||1/0;for(var q,Ne=ne.length,Qe=null,Ze=[],tt=0;tt<Ne;++tt){if(q=ne.charCodeAt(tt),q>55295&&q<57344){if(!Qe){if(q>56319){(X-=3)>-1&&Ze.push(239,191,189);continue}else if(tt+1===Ne){(X-=3)>-1&&Ze.push(239,191,189);continue}Qe=q;continue}if(q<56320){(X-=3)>-1&&Ze.push(239,191,189),Qe=q;continue}q=(Qe-55296<<10|q-56320)+65536}else Qe&&(X-=3)>-1&&Ze.push(239,191,189);if(Qe=null,q<128){if((X-=1)<0)break;Ze.push(q)}else if(q<2048){if((X-=2)<0)break;Ze.push(q>>6|192,q&63|128)}else if(q<65536){if((X-=3)<0)break;Ze.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((X-=4)<0)break;Ze.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return Ze}function Oe(ne){for(var X=[],q=0;q<ne.length;++q)X.push(ne.charCodeAt(q)&255);return X}function ce(ne,X){for(var q,Ne,Qe,Ze=[],tt=0;tt<ne.length&&!((X-=2)<0);++tt)q=ne.charCodeAt(tt),Ne=q>>8,Qe=q%256,Ze.push(Qe),Ze.push(Ne);return Ze}function ue(ne){return s.toByteArray(Ye(ne))}function pe(ne,X,q,Ne){for(var Qe=0;Qe<Ne&&!(Qe+q>=X.length||Qe>=ne.length);++Qe)X[Qe+q]=ne[Qe];return Qe}function $e(ne){return ne!==ne}}).call(this,t(144))},function($,n,t){"use strict";t.d(n,"a",function(){return b});var e=t(1),s=t(41),o=t(299),a=t.n(o),c=t(9),l=t.n(c),p=t(122),h=t(7),m=t(21),g=Object.defineProperty,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(D,W,B)=>W in D?g(D,W,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[W]=B,i=(D,W)=>{for(var B in W||(W={}))O.call(W,B)&&r(D,B,W[B]);if(v)for(var B of v(W))u.call(W,B)&&r(D,B,W[B]);return D},d=(D,W,B)=>new Promise((f,y)=>{var M=L=>{try{A(B.next(L))}catch(C){y(C)}},N=L=>{try{A(B.throw(L))}catch(C){y(C)}},A=L=>L.done?f(L.value):Promise.resolve(L.value).then(M,N);A((B=B.apply(D,W)).next())});function b(D){const W=Object(p.b)(),{categories:B,publications:f=[],categoryId:y,featuredPublications:M=[],communityPicksPublications:N=[],tastemakerPublications:A=[],user:L,categorySlug:C,rankingSlug:R,hasMore:U,updateUrl:Z=!1,maxPublications:F,showTwitterBanner:z,readerOnboardingModal:G}=i(i({},W),D),[V,k]=Object(e.k)(B),[K,Y]=Object(e.k)(w(f,F)),[ee,ae]=Object(e.k)(y),[he,me]=Object(e.k)(w(M,F)),[Ye,se]=Object(e.k)(w(N,F)),[ie,Ee]=Object(e.k)(w(A,F)),[Oe,ce]=Object(e.k)(null),[ue,pe]=Object(e.k)("paid"),[$e,ne]=Object(e.k)(null),[X,q]=Object(e.k)(0),[Ne,Qe]=Object(e.k)(U);Object(e.d)(()=>{const rn=R||"paid";pe(rn),V||E().then(({categories:ht,publications:je,featuredPublications:Le,communityPicksPublications:rt,tastemakerPublications:Pe})=>{k(ht);const de=Object(o.getCategoryIdFromSlug)(C,ht);return ae(de),me(w(Le,F)),se(w(rt,F)),Ee(w(Pe,F)),de==="featured"?je:S(de,rn,0).then(({publications:be,more:Ie})=>(q(0),F||Qe(Ie),be))}).then(ht=>{Y(w(ht,F))})},[V,C,R,F]);const Ze=Object(e.a)(()=>{const rn=X+1;Object(h.i)(h.a.VIEWED_MORE_CATEGORY,{categoryId:ee,ranking:ue,page:rn}),S(ee,ue,rn).then(({publications:ht,more:je})=>{const Le=new Set(K.map(rt=>rt.id));q(rn),Y(K.concat(ht.filter(rt=>!Le.has(rt.id)))),Qe(je)})},[ee,ue,X,K,q,Y,Qe]),tt=({categoryId:rn,ranking:ht,categories:je})=>{Object(h.i)(h.a.CLICKED_CATEGORY,{categoryId:rn,ranking:ht}),Z&&Object(s.route)(P({categoryId:rn,categories:je,ranking:ht}),!0),Lt({categoryId:rn,ranking:ht})},Ft=rn=>{pe(rn),Z&&Object(s.route)(P({categoryId:ee,categories:V,ranking:rn}),!0),Lt({categoryId:ee,ranking:rn})},Lt=Object(e.a)(rn=>d(this,[rn],function*({categoryId:ht,ranking:je}){if(ae(ht),q(0),ht==="featured"||ht==="twitter"){ce(null),ne(null),Qe(!1),ht==="featured"&&Y(w(he,F));return}ce(ht),ne(je),Y([]),Qe(!1);const{publications:Le,more:rt}=yield S(ht,je,0);ae(ht),ce(null),ne(null),pe(je),q(0),F||Qe(rt),Y(w(Le,F))}),[ce,ne,ae,q,Qe,Y,he,F]);return{categories:V,publications:ee==="featured"?he:K,categoryId:ee,ranking:ue,loadingCategoryId:Oe,loadingRanking:$e,featuredPublications:he,user:L,categorySlug:C,rankingSlug:R,hasMore:Ne,viewMore:Ze,loadPublications:Lt,onCategoryClicked:tt,getCategoryIdFromSlug:o.getCategoryIdFromSlug,setCategoryId:ae,setRanking:pe,onRankingChange:Ft,maxPublications:F,showTwitterBanner:z,readerOnboardingModal:G}}const w=(D,W)=>W?D.slice(0,W):D,E=()=>Object(m.c)("/api/v1/homepage/initial-category-data"),S=(D,W="paid",B=0)=>Object(m.c)(`/api/v1/category/public/${D}/${W}?page=${B}`),P=({categoryId:D,ranking:W,categories:B})=>{let f="";["twitter",c.COMMUNITY_PICKS_CATEGORY_NAME,c.TASTEMAKER_CATEGORY_NAME].includes(D)&&(f=D);const y=B.find(M=>M.id===D);return(y==null?void 0:y.slug)&&(f=`${y.slug}/${W}`),f?`/discover/category/${f}`:"/discover"}},,function($,n,t){$.exports=e;function e(o){if(o)return s(o)}function s(o){for(var a in e.prototype)o[a]=e.prototype[a];return o}e.prototype.on=e.prototype.addEventListener=function(o,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(a),this},e.prototype.once=function(o,a){function c(){this.off(o,c),a.apply(this,arguments)}return c.fn=a,this.on(o,c),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(o,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+o];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var l,p=0;p<c.length;p++)if(l=c[p],l===a||l.fn===a){c.splice(p,1);break}return c.length===0&&delete this._callbacks["$"+o],this},e.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),c=this._callbacks["$"+o],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(c){c=c.slice(0);for(var l=0,p=c.length;l<p;++l)c[l].apply(this,a)}return this},e.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]},e.prototype.hasListeners=function(o){return!!this.listeners(o).length}},function($,n){$.exports=s,s.default=s,s.stable=c,s.stableStringify=c;var t=[],e=[];function s(h,m,g){o(h,"",[],void 0);var v;for(e.length===0?v=JSON.stringify(h,m,g):v=JSON.stringify(h,p(m),g);t.length!==0;){var O=t.pop();O.length===4?Object.defineProperty(O[0],O[1],O[3]):O[0][O[1]]=O[2]}return v}function o(h,m,g,v){var O;if(typeof h=="object"&&h!==null){for(O=0;O<g.length;O++)if(g[O]===h){var u=Object.getOwnPropertyDescriptor(v,m);u.get!==void 0?u.configurable?(Object.defineProperty(v,m,{value:"[Circular]"}),t.push([v,m,h,u])):e.push([h,m]):(v[m]="[Circular]",t.push([v,m,h]));return}if(g.push(h),Array.isArray(h))for(O=0;O<h.length;O++)o(h[O],O,g,h);else{var r=Object.keys(h);for(O=0;O<r.length;O++){var i=r[O];o(h[i],i,g,h)}}g.pop()}}function a(h,m){return h<m?-1:h>m?1:0}function c(h,m,g){var v=l(h,"",[],void 0)||h,O;for(e.length===0?O=JSON.stringify(v,m,g):O=JSON.stringify(v,p(m),g);t.length!==0;){var u=t.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}return O}function l(h,m,g,v){var O;if(typeof h=="object"&&h!==null){for(O=0;O<g.length;O++)if(g[O]===h){var u=Object.getOwnPropertyDescriptor(v,m);u.get!==void 0?u.configurable?(Object.defineProperty(v,m,{value:"[Circular]"}),t.push([v,m,h,u])):e.push([h,m]):(v[m]="[Circular]",t.push([v,m,h]));return}if(typeof h.toJSON=="function")return;if(g.push(h),Array.isArray(h))for(O=0;O<h.length;O++)l(h[O],O,g,h);else{var r={},i=Object.keys(h).sort(a);for(O=0;O<i.length;O++){var d=i[O];l(h[d],d,g,h),r[d]=h[d]}if(v!==void 0)t.push([v,m,h]),v[m]=r;else return r}g.pop()}}function p(h){return h=h!==void 0?h:function(m,g){return g},function(m,g){if(e.length>0)for(var v=0;v<e.length;v++){var O=e[v];if(O[1]===m&&O[0]===g){g="[Circular]",e.splice(v,1);break}}return h.call(this,m,g)}}},function($,n,t){"use strict";var e=t(605),s=t(612),o=t(286);$.exports={formats:o,parse:s,stringify:e}},function($,n,t){"use strict";var e=t(606),s=t(367),o=t(286),a=Object.prototype.hasOwnProperty,c={brackets:function(d){return d+"[]"},comma:"comma",indices:function(d,b){return d+"["+b+"]"},repeat:function(d){return d}},l=Array.isArray,p=Array.prototype.push,h=function(i,d){p.apply(i,l(d)?d:[d])},m=Date.prototype.toISOString,g=o.default,v={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,format:g,formatter:o.formatters[g],indices:!1,serializeDate:function(d){return m.call(d)},skipNulls:!1,strictNullHandling:!1},O=function(d){return typeof d=="string"||typeof d=="number"||typeof d=="boolean"||typeof d=="symbol"||typeof d=="bigint"},u=function i(d,b,w,E,S,P,D,W,B,f,y,M,N,A,L){var C=d;if(L.has(d))throw new RangeError("Cyclic object value");if(typeof D=="function"?C=D(b,C):C instanceof Date?C=f(C):w==="comma"&&l(C)&&(C=s.maybeMap(C,function(Y){return Y instanceof Date?f(Y):Y})),C===null){if(E)return P&&!N?P(b,v.encoder,A,"key",y):b;C=""}if(O(C)||s.isBuffer(C)){if(P){var R=N?b:P(b,v.encoder,A,"key",y);return[M(R)+"="+M(P(C,v.encoder,A,"value",y))]}return[M(b)+"="+M(String(C))]}var U=[];if(typeof C=="undefined")return U;var Z;if(w==="comma"&&l(C))Z=[{value:C.length>0?C.join(",")||null:void 0}];else if(l(D))Z=D;else{var F=Object.keys(C);Z=W?F.sort(W):F}for(var z=0;z<Z.length;++z){var G=Z[z],V=typeof G=="object"&&G.value!==void 0?G.value:C[G];if(!(S&&V===null)){var k=l(C)?typeof w=="function"?w(b,G):b:b+(B?"."+G:"["+G+"]");L.set(d,!0);var K=e();h(U,i(V,k,w,E,S,P,D,W,B,f,y,M,N,A,K))}}return U},r=function(d){if(!d)return v;if(d.encoder!==null&&d.encoder!==void 0&&typeof d.encoder!="function")throw new TypeError("Encoder has to be a function.");var b=d.charset||v.charset;if(typeof d.charset!="undefined"&&d.charset!=="utf-8"&&d.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var w=o.default;if(typeof d.format!="undefined"){if(!a.call(o.formatters,d.format))throw new TypeError("Unknown format option provided.");w=d.format}var E=o.formatters[w],S=v.filter;return(typeof d.filter=="function"||l(d.filter))&&(S=d.filter),{addQueryPrefix:typeof d.addQueryPrefix=="boolean"?d.addQueryPrefix:v.addQueryPrefix,allowDots:typeof d.allowDots=="undefined"?v.allowDots:!!d.allowDots,charset:b,charsetSentinel:typeof d.charsetSentinel=="boolean"?d.charsetSentinel:v.charsetSentinel,delimiter:typeof d.delimiter=="undefined"?v.delimiter:d.delimiter,encode:typeof d.encode=="boolean"?d.encode:v.encode,encoder:typeof d.encoder=="function"?d.encoder:v.encoder,encodeValuesOnly:typeof d.encodeValuesOnly=="boolean"?d.encodeValuesOnly:v.encodeValuesOnly,filter:S,format:w,formatter:E,serializeDate:typeof d.serializeDate=="function"?d.serializeDate:v.serializeDate,skipNulls:typeof d.skipNulls=="boolean"?d.skipNulls:v.skipNulls,sort:typeof d.sort=="function"?d.sort:null,strictNullHandling:typeof d.strictNullHandling=="boolean"?d.strictNullHandling:v.strictNullHandling}};$.exports=function(i,d){var b=i,w=r(d),E,S;typeof w.filter=="function"?(S=w.filter,b=S("",b)):l(w.filter)&&(S=w.filter,E=S);var P=[];if(typeof b!="object"||b===null)return"";var D;d&&d.arrayFormat in c?D=d.arrayFormat:d&&"indices"in d?D=d.indices?"indices":"repeat":D="indices";var W=c[D];E||(E=Object.keys(b)),w.sort&&E.sort(w.sort);for(var B=e(),f=0;f<E.length;++f){var y=E[f];w.skipNulls&&b[y]===null||h(P,u(b[y],y,W,w.strictNullHandling,w.skipNulls,w.encode?w.encoder:null,w.filter,w.sort,w.allowDots,w.serializeDate,w.format,w.formatter,w.encodeValuesOnly,w.charset,B))}var M=P.join(w.delimiter),N=w.addQueryPrefix===!0?"?":"";return w.charsetSentinel&&(w.charset==="iso-8859-1"?N+="utf8=%26%2310003%3B&":N+="utf8=%E2%9C%93&"),M.length>0?N+M:""}},function($,n,t){"use strict";var e=t(272),s=t(536),o=t(610),a=e("%TypeError%"),c=e("%WeakMap%",!0),l=e("%Map%",!0),p=s("WeakMap.prototype.get",!0),h=s("WeakMap.prototype.set",!0),m=s("WeakMap.prototype.has",!0),g=s("Map.prototype.get",!0),v=s("Map.prototype.set",!0),O=s("Map.prototype.has",!0),u=function(b,w){for(var E=b,S;(S=E.next)!==null;E=S)if(S.key===w)return E.next=S.next,S.next=b.next,b.next=S,S},r=function(b,w){var E=u(b,w);return E&&E.value},i=function(b,w,E){var S=u(b,w);S?S.value=E:b.next={key:w,next:b.next,value:E}},d=function(b,w){return!!u(b,w)};$.exports=function(){var w,E,S,P={assert:function(D){if(!P.has(D))throw new a("Side channel does not contain "+o(D))},get:function(D){if(c&&D&&(typeof D=="object"||typeof D=="function")){if(w)return p(w,D)}else if(l){if(E)return g(E,D)}else if(S)return r(S,D)},has:function(D){if(c&&D&&(typeof D=="object"||typeof D=="function")){if(w)return m(w,D)}else if(l){if(E)return O(E,D)}else if(S)return d(S,D);return!1},set:function(D,W){c&&D&&(typeof D=="object"||typeof D=="function")?(w||(w=new c),h(w,D,W)):l?(E||(E=new l),v(E,D,W)):(S||(S={key:{},next:null}),i(S,D,W))}};return P}},function($,n,t){"use strict";var e=typeof Symbol!="undefined"&&Symbol,s=t(577);$.exports=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:s()}},function($,n,t){"use strict";var e="Function.prototype.bind called on incompatible ",s=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";$.exports=function(l){var p=this;if(typeof p!="function"||o.call(p)!==a)throw new TypeError(e+p);for(var h=s.call(arguments,1),m,g=function(){if(this instanceof m){var i=p.apply(this,h.concat(s.call(arguments)));return Object(i)===i?i:this}else return p.apply(l,h.concat(s.call(arguments)))},v=Math.max(0,p.length-h.length),O=[],u=0;u<v;u++)O.push("$"+u);if(m=Function("binder","return function ("+O.join(",")+"){ return binder.apply(this,arguments); }")(g),p.prototype){var r=function(){};r.prototype=p.prototype,m.prototype=new r,r.prototype=null}return m}},function($,n,t){"use strict";var e=t(285);$.exports=e.call(Function.call,Object.prototype.hasOwnProperty)},function($,n,t){var e=typeof Map=="function"&&Map.prototype,s=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=e&&s&&typeof s.get=="function"?s.get:null,a=e&&Map.prototype.forEach,c=typeof Set=="function"&&Set.prototype,l=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=c&&l&&typeof l.get=="function"?l.get:null,h=c&&Set.prototype.forEach,m=typeof WeakMap=="function"&&WeakMap.prototype,g=m?WeakMap.prototype.has:null,v=typeof WeakSet=="function"&&WeakSet.prototype,O=v?WeakSet.prototype.has:null,u=typeof WeakRef=="function"&&WeakRef.prototype,r=u?WeakRef.prototype.deref:null,i=Boolean.prototype.valueOf,d=Object.prototype.toString,b=Function.prototype.toString,w=String.prototype.match,E=String.prototype.slice,S=String.prototype.replace,P=String.prototype.toUpperCase,D=String.prototype.toLowerCase,W=RegExp.prototype.test,B=Array.prototype.concat,f=Array.prototype.join,y=Array.prototype.slice,M=Math.floor,N=typeof BigInt=="function"?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,C=typeof Symbol=="function"&&typeof Symbol.iterator=="object",R=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===C?"object":"symbol")?Symbol.toStringTag:null,U=Object.prototype.propertyIsEnumerable,Z=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(de){return de.__proto__}:null);function F(de,be){if(de===1/0||de===-1/0||de!==de||de&&de>-1e3&&de<1e3||W.call(/e/,be))return be;var Ie=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof de=="number"){var ke=de<0?-M(-de):M(de);if(ke!==de){var Te=String(ke),x=E.call(be,Te.length+1);return S.call(Te,Ie,"$&_")+"."+S.call(S.call(x,/([0-9]{3})/g,"$&_"),/_$/,"")}}return S.call(be,Ie,"$&_")}var z=t(611),G=z.custom,V=ie(G)?G:null;$.exports=function de(be,Ie,ke,Te){var x=Ie||{};if(ce(x,"quoteStyle")&&x.quoteStyle!=="single"&&x.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ce(x,"maxStringLength")&&(typeof x.maxStringLength=="number"?x.maxStringLength<0&&x.maxStringLength!==1/0:x.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var H=ce(x,"customInspect")?x.customInspect:!0;if(typeof H!="boolean"&&H!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ce(x,"indent")&&x.indent!==null&&x.indent!=="	"&&!(parseInt(x.indent,10)===x.indent&&x.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ce(x,"numericSeparator")&&typeof x.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var le=x.numericSeparator;if(typeof be=="undefined")return"undefined";if(be===null)return"null";if(typeof be=="boolean")return be?"true":"false";if(typeof be=="string")return tt(be,x);if(typeof be=="number"){if(be===0)return 1/0/be>0?"0":"-0";var Ce=String(be);return le?F(be,Ce):Ce}if(typeof be=="bigint"){var Ue=String(be)+"n";return le?F(be,Ue):Ue}var Ve=typeof x.depth=="undefined"?5:x.depth;if(typeof ke=="undefined"&&(ke=0),ke>=Ve&&Ve>0&&typeof be=="object")return Y(be)?"[Array]":"[Object]";var bt=Le(x,ke);if(typeof Te=="undefined")Te=[];else if($e(Te,be)>=0)return"[Circular]";function yt(qt,sn,_n){if(sn&&(Te=y.call(Te),Te.push(sn)),_n){var Hn={depth:x.depth};return ce(x,"quoteStyle")&&(Hn.quoteStyle=x.quoteStyle),de(qt,Hn,ke+1,Te)}return de(qt,x,ke+1,Te)}if(typeof be=="function"&&!ae(be)){var Qt=pe(be),tn=Pe(be,yt);return"[Function"+(Qt?": "+Qt:" (anonymous)")+"]"+(tn.length>0?" { "+f.call(tn,", ")+" }":"")}if(ie(be)){var Kn=C?S.call(String(be),/^(Symbol\(.*\))_[^)]*$/,"$1"):L.call(be);return typeof be=="object"&&!C?Lt(Kn):Kn}if(Ze(be)){for(var Ot="<"+D.call(String(be.nodeName)),lt=be.attributes||[],Be=0;Be<lt.length;Be++)Ot+=" "+lt[Be].name+"="+k(K(lt[Be].value),"double",x);return Ot+=">",be.childNodes&&be.childNodes.length&&(Ot+="..."),Ot+="</"+D.call(String(be.nodeName))+">",Ot}if(Y(be)){if(be.length===0)return"[]";var _e=Pe(be,yt);return bt&&!je(_e)?"["+rt(_e,bt)+"]":"[ "+f.call(_e,", ")+" ]"}if(he(be)){var Ae=Pe(be,yt);return!("cause"in Error.prototype)&&"cause"in be&&!U.call(be,"cause")?"{ ["+String(be)+"] "+f.call(B.call("[cause]: "+yt(be.cause),Ae),", ")+" }":Ae.length===0?"["+String(be)+"]":"{ ["+String(be)+"] "+f.call(Ae,", ")+" }"}if(typeof be=="object"&&H){if(V&&typeof be[V]=="function"&&z)return z(be,{depth:Ve-ke});if(H!=="symbol"&&typeof be.inspect=="function")return be.inspect()}if(ne(be)){var fe=[];return a&&a.call(be,function(qt,sn){fe.push(yt(sn,be,!0)+" => "+yt(qt,be))}),ht("Map",o.call(be),fe,bt)}if(Ne(be)){var ft=[];return h&&h.call(be,function(qt){ft.push(yt(qt,be))}),ht("Set",p.call(be),ft,bt)}if(X(be))return rn("WeakMap");if(Qe(be))return rn("WeakSet");if(q(be))return rn("WeakRef");if(Ye(be))return Lt(yt(Number(be)));if(Ee(be))return Lt(yt(N.call(be)));if(se(be))return Lt(i.call(be));if(me(be))return Lt(yt(String(be)));if(!ee(be)&&!ae(be)){var nt=Pe(be,yt),ct=Z?Z(be)===Object.prototype:be instanceof Object||be.constructor===Object,Xe=be instanceof Object?"":"null prototype",gt=!ct&&R&&Object(be)===be&&R in be?E.call(ue(be),8,-1):Xe?"Object":"",Tt=ct||typeof be.constructor!="function"?"":be.constructor.name?be.constructor.name+" ":"",Ut=Tt+(gt||Xe?"["+f.call(B.call([],gt||[],Xe||[]),": ")+"] ":"");return nt.length===0?Ut+"{}":bt?Ut+"{"+rt(nt,bt)+"}":Ut+"{ "+f.call(nt,", ")+" }"}return String(be)};function k(de,be,Ie){var ke=(Ie.quoteStyle||be)==="double"?'"':"'";return ke+de+ke}function K(de){return S.call(String(de),/"/g,"&quot;")}function Y(de){return ue(de)==="[object Array]"&&(!R||!(typeof de=="object"&&R in de))}function ee(de){return ue(de)==="[object Date]"&&(!R||!(typeof de=="object"&&R in de))}function ae(de){return ue(de)==="[object RegExp]"&&(!R||!(typeof de=="object"&&R in de))}function he(de){return ue(de)==="[object Error]"&&(!R||!(typeof de=="object"&&R in de))}function me(de){return ue(de)==="[object String]"&&(!R||!(typeof de=="object"&&R in de))}function Ye(de){return ue(de)==="[object Number]"&&(!R||!(typeof de=="object"&&R in de))}function se(de){return ue(de)==="[object Boolean]"&&(!R||!(typeof de=="object"&&R in de))}function ie(de){if(C)return de&&typeof de=="object"&&de instanceof Symbol;if(typeof de=="symbol")return!0;if(!de||typeof de!="object"||!L)return!1;try{return L.call(de),!0}catch(be){}return!1}function Ee(de){if(!de||typeof de!="object"||!N)return!1;try{return N.call(de),!0}catch(be){}return!1}var Oe=Object.prototype.hasOwnProperty||function(de){return de in this};function ce(de,be){return Oe.call(de,be)}function ue(de){return d.call(de)}function pe(de){if(de.name)return de.name;var be=w.call(b.call(de),/^function\s*([\w$]+)/);return be?be[1]:null}function $e(de,be){if(de.indexOf)return de.indexOf(be);for(var Ie=0,ke=de.length;Ie<ke;Ie++)if(de[Ie]===be)return Ie;return-1}function ne(de){if(!o||!de||typeof de!="object")return!1;try{o.call(de);try{p.call(de)}catch(be){return!0}return de instanceof Map}catch(be){}return!1}function X(de){if(!g||!de||typeof de!="object")return!1;try{g.call(de,g);try{O.call(de,O)}catch(be){return!0}return de instanceof WeakMap}catch(be){}return!1}function q(de){if(!r||!de||typeof de!="object")return!1;try{return r.call(de),!0}catch(be){}return!1}function Ne(de){if(!p||!de||typeof de!="object")return!1;try{p.call(de);try{o.call(de)}catch(be){return!0}return de instanceof Set}catch(be){}return!1}function Qe(de){if(!O||!de||typeof de!="object")return!1;try{O.call(de,O);try{g.call(de,g)}catch(be){return!0}return de instanceof WeakSet}catch(be){}return!1}function Ze(de){return!de||typeof de!="object"?!1:typeof HTMLElement!="undefined"&&de instanceof HTMLElement?!0:typeof de.nodeName=="string"&&typeof de.getAttribute=="function"}function tt(de,be){if(de.length>be.maxStringLength){var Ie=de.length-be.maxStringLength,ke="... "+Ie+" more character"+(Ie>1?"s":"");return tt(E.call(de,0,be.maxStringLength),be)+ke}var Te=S.call(S.call(de,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ft);return k(Te,"single",be)}function Ft(de){var be=de.charCodeAt(0),Ie={8:"b",9:"t",10:"n",12:"f",13:"r"}[be];return Ie?"\\"+Ie:"\\x"+(be<16?"0":"")+P.call(be.toString(16))}function Lt(de){return"Object("+de+")"}function rn(de){return de+" { ? }"}function ht(de,be,Ie,ke){var Te=ke?rt(Ie,ke):f.call(Ie,", ");return de+" ("+be+") {"+Te+"}"}function je(de){for(var be=0;be<de.length;be++)if($e(de[be],`
`)>=0)return!1;return!0}function Le(de,be){var Ie;if(de.indent==="	")Ie="	";else if(typeof de.indent=="number"&&de.indent>0)Ie=f.call(Array(de.indent+1)," ");else return null;return{base:Ie,prev:f.call(Array(be+1),Ie)}}function rt(de,be){if(de.length===0)return"";var Ie=`
`+be.prev+be.base;return Ie+f.call(de,","+Ie)+`
`+be.prev}function Pe(de,be){var Ie=Y(de),ke=[];if(Ie){ke.length=de.length;for(var Te=0;Te<de.length;Te++)ke[Te]=ce(de,Te)?be(de[Te],de):""}var x=typeof A=="function"?A(de):[],H;if(C){H={};for(var le=0;le<x.length;le++)H["$"+x[le]]=x[le]}for(var Ce in de)!ce(de,Ce)||Ie&&String(Number(Ce))===Ce&&Ce<de.length||C&&H["$"+Ce]instanceof Symbol||(W.call(/[^\w$]/,Ce)?ke.push(be(Ce,de)+": "+be(de[Ce],de)):ke.push(Ce+": "+be(de[Ce],de)));if(typeof A=="function")for(var Ue=0;Ue<x.length;Ue++)U.call(de,x[Ue])&&ke.push("["+be(x[Ue])+"]: "+be(de[x[Ue]],de));return ke}},function($,n){},function($,n,t){"use strict";var e=t(367),s=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:e.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(u){return u.replace(/&#(\d+);/g,function(r,i){return String.fromCharCode(parseInt(i,10))})},l=function(u,r){return u&&typeof u=="string"&&r.comma&&u.indexOf(",")>-1?u.split(","):u},p="utf8=%26%2310003%3B",h="utf8=%E2%9C%93",m=function(r,i){var d={},b=i.ignoreQueryPrefix?r.replace(/^\?/,""):r,w=i.parameterLimit===1/0?void 0:i.parameterLimit,E=b.split(i.delimiter,w),S=-1,P,D=i.charset;if(i.charsetSentinel)for(P=0;P<E.length;++P)E[P].indexOf("utf8=")===0&&(E[P]===h?D="utf-8":E[P]===p&&(D="iso-8859-1"),S=P,P=E.length);for(P=0;P<E.length;++P)if(P!==S){var W=E[P],B=W.indexOf("]="),f=B===-1?W.indexOf("="):B+1,y,M;f===-1?(y=i.decoder(W,a.decoder,D,"key"),M=i.strictNullHandling?null:""):(y=i.decoder(W.slice(0,f),a.decoder,D,"key"),M=e.maybeMap(l(W.slice(f+1),i),function(N){return i.decoder(N,a.decoder,D,"value")})),M&&i.interpretNumericEntities&&D==="iso-8859-1"&&(M=c(M)),W.indexOf("[]=")>-1&&(M=o(M)?[M]:M),s.call(d,y)?d[y]=e.combine(d[y],M):d[y]=M}return d},g=function(u,r,i,d){for(var b=d?r:l(r,i),w=u.length-1;w>=0;--w){var E,S=u[w];if(S==="[]"&&i.parseArrays)E=[].concat(b);else{E=i.plainObjects?Object.create(null):{};var P=S.charAt(0)==="["&&S.charAt(S.length-1)==="]"?S.slice(1,-1):S,D=parseInt(P,10);!i.parseArrays&&P===""?E={0:b}:!isNaN(D)&&S!==P&&String(D)===P&&D>=0&&i.parseArrays&&D<=i.arrayLimit?(E=[],E[D]=b):E[P]=b}b=E}return b},v=function(r,i,d,b){if(!!r){var w=d.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,E=/(\[[^[\]]*])/,S=/(\[[^[\]]*])/g,P=d.depth>0&&E.exec(w),D=P?w.slice(0,P.index):w,W=[];if(D){if(!d.plainObjects&&s.call(Object.prototype,D)&&!d.allowPrototypes)return;W.push(D)}for(var B=0;d.depth>0&&(P=S.exec(w))!==null&&B<d.depth;){if(B+=1,!d.plainObjects&&s.call(Object.prototype,P[1].slice(1,-1))&&!d.allowPrototypes)return;W.push(P[1])}return P&&W.push("["+w.slice(P.index)+"]"),g(W,i,d,b)}},O=function(r){if(!r)return a;if(r.decoder!==null&&r.decoder!==void 0&&typeof r.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof r.charset!="undefined"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=typeof r.charset=="undefined"?a.charset:r.charset;return{allowDots:typeof r.allowDots=="undefined"?a.allowDots:!!r.allowDots,allowPrototypes:typeof r.allowPrototypes=="boolean"?r.allowPrototypes:a.allowPrototypes,allowSparse:typeof r.allowSparse=="boolean"?r.allowSparse:a.allowSparse,arrayLimit:typeof r.arrayLimit=="number"?r.arrayLimit:a.arrayLimit,charset:i,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:a.charsetSentinel,comma:typeof r.comma=="boolean"?r.comma:a.comma,decoder:typeof r.decoder=="function"?r.decoder:a.decoder,delimiter:typeof r.delimiter=="string"||e.isRegExp(r.delimiter)?r.delimiter:a.delimiter,depth:typeof r.depth=="number"||r.depth===!1?+r.depth:a.depth,ignoreQueryPrefix:r.ignoreQueryPrefix===!0,interpretNumericEntities:typeof r.interpretNumericEntities=="boolean"?r.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:typeof r.parameterLimit=="number"?r.parameterLimit:a.parameterLimit,parseArrays:r.parseArrays!==!1,plainObjects:typeof r.plainObjects=="boolean"?r.plainObjects:a.plainObjects,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:a.strictNullHandling}};$.exports=function(u,r){var i=O(r);if(u===""||u===null||typeof u=="undefined")return i.plainObjects?Object.create(null):{};for(var d=typeof u=="string"?m(u,i):u,b=i.plainObjects?Object.create(null):{},w=Object.keys(d),E=0;E<w.length;++E){var S=w[E],P=v(S,d[S],i,typeof u=="string");b=e.merge(b,P,i)}return i.allowSparse===!0?b:e.compact(b)}},function($,n,t){"use strict";function e(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(m){return typeof m}:e=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},e(p)}var s=t(368);$.exports=o;function o(p){if(p)return a(p)}function a(p){for(var h in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,h)&&(p[h]=o.prototype[h]);return p}o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},o.prototype.parse=function(p){return this._parser=p,this},o.prototype.responseType=function(p){return this._responseType=p,this},o.prototype.serialize=function(p){return this._serializer=p,this},o.prototype.timeout=function(p){if(!p||e(p)!=="object")return this._timeout=p,this._responseTimeout=0,this._uploadTimeout=0,this;for(var h in p)if(Object.prototype.hasOwnProperty.call(p,h))switch(h){case"deadline":this._timeout=p.deadline;break;case"response":this._responseTimeout=p.response;break;case"upload":this._uploadTimeout=p.upload;break;default:console.warn("Unknown timeout option",h)}return this},o.prototype.retry=function(p,h){return(arguments.length===0||p===!0)&&(p=1),p<=0&&(p=0),this._maxRetries=p,this._retries=0,this._retryCallback=h,this};var c=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),l=new Set([408,413,429,500,502,503,504,521,522,524]);o.prototype._shouldRetry=function(p,h){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var m=this._retryCallback(p,h);if(m===!0)return!0;if(m===!1)return!1}catch(g){console.error(g)}return!!(h&&h.status&&l.has(h.status)||p&&(p.code&&c.has(p.code)||p.timeout&&p.code==="ECONNABORTED"||p.crossDomain))},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},o.prototype.then=function(p,h){var m=this;if(!this._fullfilledPromise){var g=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(v,O){g.on("abort",function(){if(!(m._maxRetries&&m._maxRetries>m._retries)){if(m.timedout&&m.timedoutError){O(m.timedoutError);return}var u=new Error("Aborted");u.code="ABORTED",u.status=m.status,u.method=m.method,u.url=m.url,O(u)}}),g.end(function(u,r){u?O(u):v(r)})})}return this._fullfilledPromise.then(p,h)},o.prototype.catch=function(p){return this.then(void 0,p)},o.prototype.use=function(p){return p(this),this},o.prototype.ok=function(p){if(typeof p!="function")throw new Error("Callback required");return this._okCallback=p,this},o.prototype._isResponseOK=function(p){return p?this._okCallback?this._okCallback(p):p.status>=200&&p.status<300:!1},o.prototype.get=function(p){return this._header[p.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(p,h){if(s(p)){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&this.set(m,p[m]);return this}return this._header[p.toLowerCase()]=h,this.header[p]=h,this},o.prototype.unset=function(p){return delete this._header[p.toLowerCase()],delete this.header[p],this},o.prototype.field=function(p,h){if(p==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(s(p)){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&this.field(m,p[m]);return this}if(Array.isArray(h)){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&this.field(p,h[g]);return this}if(h==null)throw new Error(".field(name, val) val can not be empty");return typeof h=="boolean"&&(h=String(h)),this._getFormData().append(p,h),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(p,h,m,g){switch(m.type){case"basic":this.set("Authorization","Basic ".concat(g("".concat(p,":").concat(h))));break;case"auto":this.username=p,this.password=h;break;case"bearer":this.set("Authorization","Bearer ".concat(p));break;default:break}return this},o.prototype.withCredentials=function(p){return p===void 0&&(p=!0),this._withCredentials=p,this},o.prototype.redirects=function(p){return this._maxRedirects=p,this},o.prototype.maxResponseSize=function(p){if(typeof p!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=p,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(p){var h=s(p),m=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(h&&!this._data)Array.isArray(p)?this._data=[]:this._isHost(p)||(this._data={});else if(p&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(h&&s(this._data))for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(this._data[g]=p[g]);else typeof p=="string"?(m||this.type("form"),m=this._header["content-type"],m&&(m=m.toLowerCase().trim()),m==="application/x-www-form-urlencoded"?this._data=this._data?"".concat(this._data,"&").concat(p):p:this._data=(this._data||"")+p):this._data=p;return!h||this._isHost(p)?this:(m||this.type("json"),this)},o.prototype.sortQuery=function(p){return this._sort=typeof p=="undefined"?!0:p,this},o.prototype._finalizeQueryString=function(){var p=this._query.join("&");if(p&&(this.url+=(this.url.includes("?")?"&":"?")+p),this._query.length=0,this._sort){var h=this.url.indexOf("?");if(h>=0){var m=this.url.slice(h+1).split("&");typeof this._sort=="function"?m.sort(this._sort):m.sort(),this.url=this.url.slice(0,h)+"?"+m.join("&")}}},o.prototype._appendQueryString=function(){console.warn("Unsupported")},o.prototype._timeoutError=function(p,h,m){if(!this._aborted){var g=new Error("".concat(p+h,"ms exceeded"));g.timeout=h,g.code="ECONNABORTED",g.errno=m,this.timedout=!0,this.timedoutError=g,this.abort(),this.callback(g)}},o.prototype._setTimeouts=function(){var p=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){p._timeoutError("Timeout of ",p._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){p._timeoutError("Response timeout of ",p._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function($,n,t){"use strict";var e=t(615);$.exports=s;function s(a){if(a)return o(a)}function o(a){for(var c in s.prototype)Object.prototype.hasOwnProperty.call(s.prototype,c)&&(a[c]=s.prototype[c]);return a}s.prototype.get=function(a){return this.header[a.toLowerCase()]},s.prototype._setHeaderProperties=function(a){var c=a["content-type"]||"";this.type=e.type(c);var l=e.params(c);for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(this[p]=l[p]);this.links={};try{a.link&&(this.links=e.parseLinks(a.link))}catch(h){}},s.prototype._setStatusProperties=function(a){var c=a/100|0;this.statusCode=a,this.status=this.statusCode,this.statusType=c,this.info=c===1,this.ok=c===2,this.redirect=c===3,this.clientError=c===4,this.serverError=c===5,this.error=c===4||c===5?this.toError():!1,this.created=a===201,this.accepted=a===202,this.noContent=a===204,this.badRequest=a===400,this.unauthorized=a===401,this.notAcceptable=a===406,this.forbidden=a===403,this.notFound=a===404,this.unprocessableEntity=a===422}},function($,n,t){"use strict";function e(a,c){var l;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(l=s(a))||c&&a&&typeof a.length=="number"){l&&(a=l);var p=0,h=function(){};return{s:h,n:function(){return p>=a.length?{done:!0}:{done:!1,value:a[p++]}},e:function(u){throw u},f:h}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,g=!1,v;return{s:function(){l=a[Symbol.iterator]()},n:function(){var u=l.next();return m=u.done,u},e:function(u){g=!0,v=u},f:function(){try{!m&&l.return!=null&&l.return()}finally{if(g)throw v}}}}function s(a,c){if(!!a){if(typeof a=="string")return o(a,c);var l=Object.prototype.toString.call(a).slice(8,-1);if(l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set")return Array.from(a);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return o(a,c)}}function o(a,c){(c==null||c>a.length)&&(c=a.length);for(var l=0,p=new Array(c);l<c;l++)p[l]=a[l];return p}n.type=function(a){return a.split(/ *; */).shift()},n.params=function(a){var c={},l=e(a.split(/ *; */)),p;try{for(l.s();!(p=l.n()).done;){var h=p.value,m=h.split(/ *= */),g=m.shift(),v=m.shift();g&&v&&(c[g]=v)}}catch(O){l.e(O)}finally{l.f()}return c},n.parseLinks=function(a){var c={},l=e(a.split(/ *, */)),p;try{for(l.s();!(p=l.n()).done;){var h=p.value,m=h.split(/ *; */),g=m[0].slice(1,-1),v=m[1].split(/ *= */)[1].slice(1,-1);c[v]=g}}catch(O){l.e(O)}finally{l.f()}return c},n.cleanHeader=function(a,c){return delete a["content-type"],delete a["content-length"],delete a["transfer-encoding"],delete a.host,c&&(delete a.authorization,delete a.cookie),a}},function($,n,t){"use strict";function e(h){return c(h)||a(h)||o(h)||s()}function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(h,m){if(!!h){if(typeof h=="string")return l(h,m);var g=Object.prototype.toString.call(h).slice(8,-1);if(g==="Object"&&h.constructor&&(g=h.constructor.name),g==="Map"||g==="Set")return Array.from(h);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return l(h,m)}}function a(h){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(h))return Array.from(h)}function c(h){if(Array.isArray(h))return l(h)}function l(h,m){(m==null||m>h.length)&&(m=h.length);for(var g=0,v=new Array(m);g<m;g++)v[g]=h[g];return v}function p(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(h){p.prototype[h]=function(){for(var m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];return this._defaults.push({fn:h,args:g}),this}}),p.prototype._setDefaults=function(h){this._defaults.forEach(function(m){h[m.fn].apply(h,e(m.args))})},$.exports=p},function($,n,t){var e=t(683),s=t(197);function o(a){return a==null?[]:e(a,s(a))}$.exports=o},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LargePlusIcon",svgParams:{height:16,width:16,fill:"#78706C",stroke:"none"}}),Object(e.h)("rect",{x:"7",y:"1",width:"2",height:"14",rx:"1"}),Object(e.h)("rect",{x:"15",y:"7",width:"2",height:"14",rx:"1",transform:"rotate(90 15 7)"}));n.default=O},function($,n,t){var e=t(772),s=t(780),o=t(186);function a(c,l){return c&&c.length?e(c,o(l,2),s):void 0}$.exports=a},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"TrashIcon",svgParams:{height:20,width:20,viewBox:"0 0 20 20"}}),Object(e.h)("path",{d:"M2.51306 4.92554H4.17973H17.5131",stroke:"#666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(e.h)("path",{d:"M6.67969 4.9255V3.25883C6.67969 2.8168 6.85528 2.39288 7.16784 2.08032C7.4804 1.76776 7.90433 1.59216 8.34635 1.59216H11.6797C12.1217 1.59216 12.5456 1.76776 12.8582 2.08032C13.1708 2.39288 13.3464 2.8168 13.3464 3.25883V4.9255M15.8464 4.9255V16.5922C15.8464 17.0342 15.6708 17.4581 15.3582 17.7707C15.0456 18.0832 14.6217 18.2588 14.1797 18.2588H5.84635C5.40433 18.2588 4.9804 18.0832 4.66784 17.7707C4.35528 17.4581 4.17969 17.0342 4.17969 16.5922V4.9255H15.8464Z",stroke:"#666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}));n.default=O},,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ChevronDown",[["polyline",{points:"6 9 12 15 18 9",key:"1do0m2"}]]);n.a=s},,,function($,n,t){var e=t(741),s=t(658),o=t(742);function a(c){return s(c)?o(c):e(c)}$.exports=a},function($,n){function t(e,s){if(e==null)return{};var o={},a=Object.keys(e),c,l;for(l=0;l<a.length;l++)c=a[l],!(s.indexOf(c)>=0)&&(o[c]=e[c]);return o}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){"use strict";t.d(n,"a",function(){return u});var e=t(0),s=t(135),o=t(83),a=t(146),c=t(26),l=t(45),p=t(211),h=t(370),m=t(68),g=t(287),v=t(75),O=t(179);function u({user:r=void 0,children:i=void 0,siteConfigs:d={},hasThemedBackground:b=void 0,locale:w=void 0,experimentInfo:E={},portalRoot:S=void 0,shouldLoad:P=void 0,shouldPollNotifications:D=!1,publicationSettings:W={}}){return P===void 0&&(P=Boolean(r)),Object(e.h)(h.b,{value:{locale:w}},Object(e.h)(p.a,{value:{hasThemedBackground:b}},Object(e.h)(l.b,{siteConfigs:d},Object(e.h)(m.b,{siteConfigs:d,experimentInfo:E},Object(e.h)(g.b,{siteConfigs:d,experimentInfo:E},Object(e.h)(v.b,{settings:W},Object(e.h)(a.a,{shouldLoad:P,shouldPoll:D},Object(e.h)(s.b,{root:S},Object(e.h)(c.d,null,Object(e.h)(O.a,null,i))))))))))}},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Menu",[["line",{x1:"4",y1:"12",x2:"20",y2:"12",key:"1q6rtp"}],["line",{x1:"4",y1:"6",x2:"20",y2:"6",key:"1jr6gt"}],["line",{x1:"4",y1:"18",x2:"20",y2:"18",key:"98tuvx"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Sliders",[["line",{x1:"4",y1:"21",x2:"4",y2:"14",key:"2cpl65"}],["line",{x1:"4",y1:"10",x2:"4",y2:"3",key:"1b26kg"}],["line",{x1:"12",y1:"21",x2:"12",y2:"12",key:"fxobwr"}],["line",{x1:"12",y1:"8",x2:"12",y2:"3",key:"bkspcw"}],["line",{x1:"20",y1:"21",x2:"20",y2:"16",key:"b7lt1r"}],["line",{x1:"20",y1:"12",x2:"20",y2:"3",key:"inamez"}],["line",{x1:"2",y1:"14",x2:"6",y2:"14",key:"tezuxb"}],["line",{x1:"10",y1:"8",x2:"14",y2:"8",key:"1w8tme"}],["line",{x1:"18",y1:"16",x2:"22",y2:"16",key:"1gnq8h"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Bell",[["path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9",key:"oql5b8"}],["path",{d:"M13.73 21a2 2 0 0 1-3.46 0",key:"6o5tke"}]]);n.a=s},function($,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return o});var e=t(1);function s(){const a=c=>{var l,p;(c.data==="3pc.supported"||c.data==="3pc.unsupported")&&(c.data==="3pc.supported"&&Array.from(document.getElementsByClassName("tiktok-wrap outer")).forEach(m=>{const g=m.querySelector(".tiktok-iframe");g.classList.add("visible"),m.querySelector(".tiktok-wrap.static").classList.add("hidden");const v=m.querySelector(".fallback-failure");v.classList.add("no-border");try{(g.contentDocument||g.contentWindow.document).readyState=="complete"&&v.classList.add("visible")}catch(O){}g.onload=()=>{v.classList.add("visible")},g.onerror=()=>{v.classList.add("visible")},g.onabort=()=>{v.classList.add("visible")}}),(p=(l=document.getElementsByClassName("third-party-cookie-check-iframe"))==null?void 0:l.forEach)==null||p.call(l,h=>h.remove()))};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}}function o(){Object(e.d)(s,[])}},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Lock",[["rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",key:"biyj2e"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ArrowLeftRight",[["polyline",{points:"17 11 21 7 17 3",key:"l3l6r3"}],["line",{x1:"21",y1:"7",x2:"9",y2:"7",key:"17x2jj"}],["polyline",{points:"7 21 3 17 7 13",key:"lfumnw"}],["line",{x1:"15",y1:"17",x2:"3",y2:"17",key:"gusd5o"}]]);n.a=s},,function($,n,t){var e=t(637),s=t(197);function o(a,c){return a&&e(a,c,s)}$.exports=o},function($,n,t){var e=t(670),s=e();$.exports=s},function($,n,t){var e=t(257),s=t(220),o=t(186),a=t(714),c=t(715),l=t(326),p=t(716),h=t(180),m=t(73);function g(v,O,u){O.length?O=e(O,function(d){return m(d)?function(b){return s(b,d.length===1?d[0]:d)}:d}):O=[h];var r=-1;O=e(O,l(o));var i=a(v,function(d,b,w){var E=e(O,function(S){return S(d)});return{criteria:E,index:++r,value:d}});return c(i,function(d,b){return p(d,b,u)})}$.exports=g},function($,n,t){var e=t(180),s=t(640),o=t(641);function a(c,l){return o(s(c,l,e),c+"")}$.exports=a},function($,n,t){var e=t(718),s=Math.max;function o(a,c,l){return c=s(c===void 0?a.length-1:c,0),function(){for(var p=arguments,h=-1,m=s(p.length-c,0),g=Array(m);++h<m;)g[h]=p[c+h];h=-1;for(var v=Array(c+1);++h<c;)v[h]=p[h];return v[c]=l(g),e(a,this,v)}}$.exports=o},function($,n,t){var e=t(719),s=t(721),o=s(e);$.exports=o},function($,n,t){var e=t(334),s=t(673),o=t(674);function a(c,l,p){return l===l?o(c,l,p):e(c,s,p)}$.exports=a},function($,n,t){"use strict";t.r(n),t.d(n,"AutocompleteResults",function(){return O});var e=t(0),s=t(2),o=t(1),a=t(3),c=t(4),l=t(10),p=t(74),h=t(90),m={items:"frontend-components-autocomplete_results-module__items--2YIeq",item:"frontend-components-autocomplete_results-module__item--1vBxU",isSelected:"frontend-components-autocomplete_results-module__isSelected--1fsvi",profileImg:"frontend-components-autocomplete_results-module__profileImg--l2VtP",showMore:"frontend-components-autocomplete_results-module__showMore--3h5OE"};const g=({items:r,selectItem:i,selectedItem:d,setSelectedItem:b,selectedItemRef:w})=>Object(e.h)(e.Fragment,null,r.map(E=>Object(e.h)(v,{isSelected:d&&E.id===d.id&&E.type===d.type,key:E.id+E.type,onClick:()=>i(E),onMouseEnter:()=>b(E),elemRef:d&&E.id===d.id&&E.type===d.type?w:void 0},Object(e.h)(c.c,{flex:"grow",alignItems:"center",gap:12,padding:8},E.type==="user"&&Object(e.h)(e.Fragment,null,Object(e.h)(h.a,{className:m.profileImg,photo_url:Object(a.cloudinary)(E.photo_url||Object(a.getDefaultUserPhotoById)(E.id),80),lazy:!0,size:32}),Object(e.h)(c.b,{style:{maxWidth:"260px"}},Object(e.h)(l.b.B4,{weight:"semibold",ellipsis:!0,as:"div"},E.name),E.publications&&E.publications.length>0?Object(e.h)(l.b.Detail,{ellipsis:!0},"writes ",E.publications[0].name):null,E.meta?Object(e.h)(l.b.Meta,{ellipsis:!0},E.meta):null)),E.type==="pub"&&Object(e.h)(e.Fragment,null,Object(e.h)(p.a,{className:m.profileImg,logoUrl:E.photo_url||Object(a.getDefaultUserPhotoById)(E.id),size:32,publicationName:E.name}),Object(e.h)(c.b,{style:{maxWidth:"260px"}},Object(e.h)(l.b.B4,{weight:"semibold",ellipsis:!0,as:"div"},E.name),E.author_name&&E.author_name.length>0?Object(e.h)(l.b.Detail,{ellipsis:!0},"by ",E.author_name):null)))))),v=({children:r,isSelected:i,onClick:d,onMouseEnter:b,elemRef:w,className:E})=>Object(e.h)("button",{className:`${m.item} ${i?m.isSelected:""} ${E!=null?E:""}`,onClick:d,onMouseEnter:b,onMouseDown:S=>{S.preventDefault();const{target:P}=S;P&&P.focus!==void 0&&P.focus()},ref:w,tabIndex:-1},r),O=Object(s.forwardRef)((r,i)=>{const{items:d,selectItem:b,query:w,isLoading:E,placeholderText:S,noResultsText:P,minQueryLength:D=0}=r,[W,B]=Object(o.k)(0),[f,y]=Object(o.k)(!1),M=d.size>1,N=3,A=6,C=Array.from(d.values()).some(ee=>ee.length>(M?N:A))&&!f,R=Array.from(d.values()).map(ee=>f?ee:ee.slice(0,M?N:A)).flat(),U=Object(o.j)(),Z=R[W],F=R.length+(C?1:0),z=C?W===F-1:!1,G=Object(o.j)(null);Object(o.d)(()=>{W>=0&&U.current&&U.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[W,U]);const V=()=>{B((W+F-1)%F)},k=()=>{B((W+1)%F)},K=()=>{Z&&b(Z),z&&y(!0)};Object(o.d)(()=>{B(0),y(!1)},[d]);const Y=ee=>{const ae=R.findIndex(he=>he.id===ee.id);B(ae!==-1?ae:0)};return Object(o.f)(i,()=>({getElement:()=>G.current,onKeyDown:({event:ee})=>ee.key==="ArrowUp"?(V(),!0):ee.key==="ArrowDown"?(k(),!0):ee.key==="Enter"?(K(),!0):!1})),S&&(!w||w.length<D)?Object(e.h)(c.b,{className:m.items},Object(e.h)(c.c,{padding:8},Object(e.h)(l.b.Meta,null,S))):Object(e.h)("div",{className:m.items,ref:G},Array.from(d.entries()).map(([ee,ae])=>Object(e.h)(u,{title:M?ee:void 0,maxItemsToDisplay:f?void 0:M?N:A,items:ae,selectItem:b,selectedItem:Z,setSelectedItem:Y,selectedItemRef:U})),E&&Object(e.h)(c.c,{padding:8},Object(e.h)(l.b.Meta,null,"Loading...")),!E&&F===0&&Object(e.h)(c.c,{padding:8},Object(e.h)(l.b.Meta,null,P)),C&&Object(e.h)(c.b,{padding:8},Object(e.h)(v,{isSelected:z,onClick:()=>y(!0),onMouseEnter:()=>B(F-1),elemRef:z?U:void 0,className:m.showMore},Object(e.h)(l.b.Meta,{align:"center",paddingTop:8,paddingBottom:8},"Show more..."))))}),u=({title:r,maxItemsToDisplay:i,items:d,selectItem:b,selectedItem:w,setSelectedItem:E,selectedItemRef:S})=>{const P=i?d.slice(0,i):d;return Object(e.h)(e.Fragment,null,r&&Object(e.h)(c.b,{padding:8},Object(e.h)(l.b.Meta,null,r)),Object(e.h)(g,{items:P,selectItem:b,selectedItem:w,setSelectedItem:E,selectedItemRef:S}))}},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Heart",[["path",{d:"M20.42 4.58a5.4 5.4 0 0 0-7.65 0l-.77.78-.77-.78a5.4 5.4 0 0 0-7.65 0C1.46 6.7 1.33 10.28 4 13l8 8 8-8c2.67-2.72 2.54-6.3.42-8.42z",key:"3q7jk9"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"15",y1:"9",x2:"9",y2:"15",key:"19zs77"}],["line",{x1:"9",y1:"9",x2:"15",y2:"15",key:"10u9bu"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);n.a=s},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"NoteReplyIcon",svgParams:{height:24,width:24,stroke:u.stroke,strokeWidth:u.strokeWidth}}),Object(e.h)("path",{d:"M22 11.4445C22.0038 12.911 21.6612 14.3577 21 15.6667C20.216 17.2353 19.0108 18.5546 17.5194 19.477C16.0279 20.3993 14.3091 20.8882 12.5555 20.8889C11.089 20.8927 9.64234 20.5501 8.33332 19.8889L2 22L4.11111 15.6667C3.44992 14.3577 3.10729 12.911 3.11111 11.4445C3.11179 9.69086 3.60068 7.97208 4.52302 6.48064C5.44536 4.98919 6.76472 3.78399 8.33332 3.00003C9.64234 2.33884 11.089 1.99621 12.5555 2.00003H13.1111C15.427 2.1278 17.6145 3.10532 19.2546 4.74543C20.8947 6.38553 21.8722 8.57297 22 10.8889V11.4445Z","stroke-linecap":"round","stroke-linejoin":"round"}));n.default=O},,,function($,n,t){"use strict";t.d(n,"c",function(){return Y}),t.d(n,"b",function(){return ee}),t.d(n,"a",function(){return ae});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(133),l=t(58),p=t(3),h=t(68),m=t(75),g=t(111),v=t(7),O=t(690),u=t(83),r=t(8),i=t(4),d=t(10),b=t(198),w=t(365),E=t(17),S=t(450),P=t(46),D=t(148),W=t(81),B=t(388),f=t(372);function y({text:se,maxLines:ie,ellipsesText:Ee="..."}){const Oe=Object(s.j)(null),[ce,ue]=Object(s.k)(se);return Object(s.d)(()=>{(()=>{if(!Oe.current)return;Oe.current.innerText="-";const ne=(Oe.current.clientHeight+1)*ie+1;let X=0,q=0,Ne=se.length;for(;X<=Ne;){if(q=Math.floor((X+Ne)/2),Oe.current.innerText=se.slice(0,q),q===se.length&&Oe.current.clientHeight<=ne){Oe.current.innerText="",ue(se);return}Oe.current.clientHeight<=ne?X=q+1:Ne=q-1}const Qe=se.slice(0,q-Ee.length-2);Oe.current.innerText="",ue(Qe+Ee)})()},[Oe,se,ie,Ee]),Object(e.h)("div",{style:{position:"relative"}},Object(e.h)("div",null,ce),Object(e.h)("div",{ref:Oe,style:{visibility:"hidden",position:"absolute",width:"100%"}}))}var M=t(44),N=t(72),A=Object.defineProperty,L=Object.defineProperties,C=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,F=(se,ie,Ee)=>ie in se?A(se,ie,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):se[ie]=Ee,z=(se,ie)=>{for(var Ee in ie||(ie={}))U.call(ie,Ee)&&F(se,Ee,ie[Ee]);if(R)for(var Ee of R(ie))Z.call(ie,Ee)&&F(se,Ee,ie[Ee]);return se},G=(se,ie)=>L(se,C(ie)),V=(se,ie,Ee)=>(F(se,typeof ie!="symbol"?ie+"":ie,Ee),Ee),k=(se,ie,Ee)=>new Promise((Oe,ce)=>{var ue=ne=>{try{$e(Ee.next(ne))}catch(X){ce(X)}},pe=ne=>{try{$e(Ee.throw(ne))}catch(X){ce(X)}},$e=ne=>ne.done?Oe(ne.value):Promise.resolve(ne.value).then(ue,pe);$e((Ee=Ee.apply(se,ie)).next())});const K="intro_popup_last_hidden_at";class Y extends e.Component{constructor(ie,Ee){super(ie,Ee)}componentDidMount(){this.shouldShow()?(typeof window!="undefined"&&(Object(r.addClass)(document.documentElement,"has-intro-popup"),Object(O.c)(this.props.publication,this.props.user,this.props.coupon||this.props.referralCoupon,{required:!0},ie=>this.setState({coupon:ie}))),this.show()):(this.props.onHide&&this.props.onHide(),Object(g.b)({hide_intro_popup:!0}))}componentWillUnmount(){typeof window!="undefined"&&Object(r.removeClass)(document.documentElement,"has-intro-popup"),this.hide(!0)}shouldShow(){const{freeSignup:ie,user:Ee,post:Oe,hidden:ce,alwaysShow:ue,showOnMount:pe}=this.props;return ue?!0:ce?!1:pe||this.state.signedUp?!0:!(this.isMarkedAsHidden()||!(Oe===null||Oe&&!Object(l.isPaidAudience)(Oe.audience))||ie||Ee&&(Ee.is_free_subscribed||Ee.is_subscribed))}isShowing(){return typeof window!="undefined"&&Object(r.hasClass)(document.documentElement,"show-intro-popup")}show(){!this.shouldShow()||typeof window!="undefined"&&(Object(r.addClass)(document.documentElement,"show-intro-popup"),Object(v.i)(v.a.COVER_PAGE_SHOWN,{has_cover_photo:!!this.props.publication.cover_photo_url,expose_num_posts_per_month:this.props.publication.exposeNumPostsLastMonth,num_posts_per_month:this.props.publication.numPostsLastMonth}),this.props.alwaysShow||Object(v.g)("pageview",{dl:`${document.location.origin}/welcome${document.location.search}`}))}hide(ie){ie||(this.markAsHidden(),setTimeout(()=>{Object(g.b)({hide_intro_popup:!0})},500)),this.props.onHide&&this.props.onHide(),!this.props.alwaysShow&&this.isShowing()&&Object(r.removeClass)(document.documentElement,"show-intro-popup")}isMarkedAsHidden(){const ie=c.get(K);if(ie){const Ee=new Date(ie),Oe=new Date(Date.now()-24*60*60*1e3);if(Ee>Oe)return!0}return!1}markAsHidden(){c.set(K,new Date().toJSON(),{expires:365*10})}onFreeSignup(ie){return k(this,null,function*(){Object(v.i)(v.a.COVER_PAGE_EMAIL_SUBMITTED,{is_paying_sub:!!ie.body.prompt_to_login,has_plans:!!this.props.publication.plans}),this.markAsHidden(),yield new Promise(Oe=>this.setState({signedUp:!0},Oe)),Object(g.b)({freeSignup:!0,freeSignupEmail:ie.body.email});const Ee=this.props.alwaysShow?"/":document.location.href;ie.body.prompt_to_login?setTimeout(()=>{document.location.href=Object(p.pathWithQuery)("/account/login",{redirect:Ee,email:ie.body.email})},30):document.location.href=Object(p.pathWithQuery)("/subscribe",G(z({next:Ee,later:!0,just_signed_up:!0},ie.body.subscription_id&&{subscription_id:ie.body.subscription_id}),{coupon:this.props.coupon,requires_confirmation:ie.body.requires_confirmation?"true":"",utm_source:"cover_page",email:ie.body.email,skip_redirect_check:!0}))})}onMaybeLater(){Object(v.i)(v.a.COVER_PAGE_MAYBE_LATER_CLICKED),this.hide()}onBecomePaying(){Object(v.i)(v.a.COVER_PAGE_BECOME_PAYING_CLICKED),setTimeout(()=>{document.location.href="/subscribe"},30)}onLearnMore(){Object(v.i)(v.a.COVER_PAGE_LEARN_MORE_CLICKED),setTimeout(()=>{document.location.href=Object(p.getAboutUrl)(this.props.publication)},30)}render({email:ie,user:Ee,freeSignup:Oe,freeSignupEmail:ce,publication:ue,referralCode:pe,blurbs:$e,noBalance:ne,isAudio:X},{coupon:q}){if(!this.shouldShow())return;const Ne=Object(e.h)(ae,{source:"cover_page",email:ie,pub:ue,user:Ee,freeSignup:Oe,freeSignupEmail:ce,referralCode:pe,forceSignup:Object(p.getQueryItem)("force"),coupon:q,onMaybeLater:()=>this.onMaybeLater(),onFreeSignup:Qe=>this.onFreeSignup(Qe),markAsHidden:this.markAsHidden,blurbs:$e,noBalance:ne,isAudio:X});return Object(e.h)("div",{className:"intro-popup default-intro-popup"},Object(e.h)("div",{className:"intro-popup-page intro-popup-page-0"},Ne))}}V(Y,"contextType",h.a);const ee=se=>Object(e.h)("div",{className:"intro-inline"},Object(e.h)(ae,z({},se)));class ae extends e.Component{constructor(ie,Ee){super(ie,Ee);const Oe=Object(p.getQueryItem)("referralCode"),ce=Object(p.getQueryItem)("refSource"),ue="Learn More",pe=Object(p.getAboutUrl)(this.props.pub,{params:z(z({utm_source:"subscribe_email",utm_content:"learn_more"},Oe&&{referralCode:Oe}),ce&&{refSource:ce})});this.state={dismissalText:ue,dismissalUrl:pe,welcomePageOptOutText:this.context.getSettingFor("welcome_page_opt_out_text")}}componentDidMount(){this.props.source==="subscribe_page"&&Object(v.i)(v.a.SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN),Object(v.i)(v.a.FULL_EMAIL_FORM_SHOWN,{source:this.props.source})}onAuthorClicked(){Object(v.i)(v.a.COVER_PAGE_AUTHOR_CLICKED),setTimeout(()=>{document.location.href=Object(p.getAboutUrl)(this.props.pub)},30)}render({email:ie,pub:Ee,user:Oe,freeSignup:ce,freeSignupEmail:ue,referralCode:pe,source:$e,coupon:ne,forceSignup:X,submitButtonText:q,onMaybeLater:Ne,onFreeSignup:Qe,noBalance:Ze,markAsHidden:tt,blurbs:Ft},{dismissalText:Lt,dismissalUrl:rn,welcomePageOptOutText:ht}){const je=Ft?Ft.filter(Le=>Le.description!=""):[];return Object(e.h)("div",{className:"full-email-form"},Object(e.h)("div",{className:"vertically-centered"},Ne&&!Ee.invite_only&&Object(e.h)("button",{className:"button close-welcome-modal",onClick:Ne,"aria-label":"Close","data-testid":"close-welcome-modal"},Object(e.h)(W.default,null)),Object(e.h)(me,{pub:Ee,noBalance:Ze,verbose:!0}),ne&&ne.required&&Object(e.h)("p",{className:`coupon ${ne.loading?"loading":""} ${ne.error?"error":""}`},ne.loading?"Loading coupon":ne.error?"Invalid coupon!":"Valid coupon!",` ${(ne.name||ne.id).toUpperCase()}`),Ee.invite_only&&!(Oe&&(Oe.subscription_id||Oe.is_free_subscribed))?Object(e.h)(he,{pub:Ee,user:Oe,freeSignupEmail:ue}):[Object(e.h)(D.a,{source:$e,email:ie,user:Oe,pub:Ee,freeSignup:ce,freeSignupEmail:ue,referralCode:pe,onConfirmationRequired:Ee.payments_state==="enabled"?()=>null:void 0,onSuccess:Qe||(()=>document.location.href="/"),onMaybeLater:Ne,showArchives:!1,submitButtonText:q,hideTerms:!0,hideLogin:!0,contentLinks:!1,markWelcomePageAsHidden:tt}),!X&&(Ne?Object(e.h)("a",{onClick:Le=>Le.preventDefault(),className:"no-styles"},Object(e.h)(E.b,{className:"maybe-later",onClick:Ne},ht==="No thanks"?I`No thanks`:ht,Object(e.h)(f.default,null))):Object(e.h)(E.b,{className:"maybe-later",href:rn},Lt,Object(e.h)(f.default,null)))],Object(e.h)(d.b,{size:14,color:"tertiary",className:"tos"},"By registering you agree to Substack's"," ",Object(e.h)("a",{href:"https://substack.com/tos",target:"__blank"},"Terms of Service"),", our"," ",Object(e.h)("a",{href:"https://substack.com/privacy",target:"__blank"},"Privacy Policy"),", and our"," ",Object(e.h)("a",{href:"https://substack.com/ccpa#personal-data-collected",target:"__blank"},"Information Collection Notice")),!!(je==null?void 0:je.length)&&Object(e.h)("div",{class:"blurb-buffer"}),!!(je==null?void 0:je.length)&&Object(e.h)(i.c,{className:"blurbs",gap:20},je.map(Le=>Object(e.h)(i.b,{gap:8,className:"blurb"},Object(e.h)(d.b.B4,{class:"blurb-text"},Object(e.h)(y,{maxLines:4,ellipsesText:"...\u201D",text:`\u201C${Le.description}\u201D`})),Object(e.h)(d.b.B4,{weight:"semibold",class:"blurb-text"},Le.author_name||Le.recommendingPublication.email_from_name||Le.recommendingPublication.copyright,", ",Object(e.h)("a",{href:Object(p.getBaseUrl)(Le.recommendingPublication)},Le.recommendingPublication.name)))))))}}V(ae,"contextType",m.a);class he extends e.Component{constructor(){super(...arguments);V(this,"canTurnOnCustomerSupportMode",()=>{const ie=this.props.user;return(ie==null?void 0:ie.is_global_admin)&&!(ie==null?void 0:ie.is_admin)}),V(this,"showCustomerSupportModeModal",()=>{var ie;!this.canTurnOnCustomerSupportMode()||(ie=this.customerSupportModeModal)==null||ie.open()})}componentDidMount(){const ie=this.props.freeSignupEmail||this.props.user&&this.props.user.email;ie&&(this.emailInput.value=ie)}renderCustomerSupportModeModal(){if(!!this.canTurnOnCustomerSupportMode())return Object(e.h)(M.a,{className:"account-info-customer-support-mode-modal",ref:ie=>this.customerSupportModeModal=ie},Object(e.h)(S.a,{redirect:Object(p.getQueryItem)("redirect")||"/publish",onCancel:ie=>this.customerSupportModeModal.close(ie)}))}render({pub:ie,user:Ee,freeSignupEmail:Oe},{loading:ce,success:ue}){const pe=Oe||Ee&&Ee.email;return Object(e.h)("div",{className:"intro-popup-invite-actions"},this.renderCustomerSupportModeModal(),Object(e.h)(P.g,{className:"subscription-request-form",ref:$e=>this.form=$e,noInlineErrors:!0,action:Object(p.pathWithQuery)("/api/v1/subscription/request"),noJsAction:Object(p.pathWithQuery)("/api/v1/subscription/request",{nojs:!0}),onSuccess:()=>this.setState({success:!0})},Object(e.h)("input",{type:"hidden",name:"first_url",value:u.d}),Object(e.h)("input",{type:"hidden",name:"first_referrer",value:u.c}),Object(e.h)("input",{type:"hidden",name:"current_url",value:u.b}),Object(e.h)("input",{type:"hidden",name:"current_referrer",value:u.a}),!!pe&&Object(r.inputPrefillHack)(),Object(e.h)(i.b,{alignItems:"center"},Object(e.h)("input",{type:"email",name:"email",ref:$e=>this.emailInput=$e,readOnly:!!(pe||ce),disabled:!!(ce||ue||pe),autoFocus:!pe&&!Object(r.isMobileBrowser)(),placeholder:I`Type your email…`}),Object(e.h)("div",{id:"error-container"}),Object(e.h)(E.b,{className:a()(ue?"secondary":"primary"),type:"submit",disabled:!!(ce||ue)},Object(e.h)("b",{className:"button-text"},ue?"Requested":"Subscribe")))),Object(e.h)(i.b,{gap:12,paddingBottom:12,alignItems:"center",justifyContent:"center"},Object(e.h)(B.default,{className:"private-lock-icon"}),Object(e.h)(i.b,{gap:2},Object(e.h)(d.b.B4,{weight:"semibold",className:"private-header"},"This Substack is private"),Object(e.h)(d.b.B4,{className:"private-subtitle"},"Subscribe to see all their posts."))),this.canTurnOnCustomerSupportMode()&&Object(e.h)("p",null,Object(e.h)("a",{className:"account-info-admin",onClick:this.showCustomerSupportModeModal},Object(e.h)("b",null,"Support mode"))),Object(e.h)("a",{href:Object(p.getSigninUrl)({for_pub:ie.subdomain,redirect:"/",change_user:Boolean(Ee||Oe)}),native:!0},"Already a member? ",Object(e.h)("b",null,Ee||Oe?"Switch accounts":"Sign in")))}}V(he,"state",{loading:!1,success:!1});const me=({pub:se,noBalance:ie,verbose:Ee})=>{const{getSettingFor:Oe}=Object(m.c)(),{exposeExperiment:ce}=Object(h.d)();Object(s.d)(()=>{se.exposeNumPostsLastMonth&&ce("show_post_frequency")},[se.exposeNumPostsLastMonth,ce]);const ue=Oe("display_welcome_page_details");return se.cover_photo_url?[Object(e.h)(N.a,{className:"publication-cover-photo",src:se.cover_photo_url,imageProps:{quality:"auto:best"},maxWidth:1360,alt:se.name,loading:"eager"}),!se.hide_intro_title&&Object(e.h)("h1",{className:`publication-name with-cover${se.logo_url?"":" no-logo"}`},Object(e.h)(Ye,{pub:se,noBalance:ie})),!se.hide_intro_subtitle&&(se.hero_text||!Ee)&&Object(e.h)("p",{className:a()("publication-tagline with-cover",{verbose:Ee})},!!se.hero_text&&(ie?se.hero_text:Object(e.h)(w.a,{text:se.hero_text}))),Ee&&Object(e.h)("div",{className:"publication-meta"},Object(b.f)(se,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:se.rankingDetailFreeSubscriberCount,includeRankingDetail:ue,includePostsPerMonthCount:!0}))].filter(pe=>pe):[se.logo_url&&Object(e.h)(N.a,{className:"publication-logo",src:se.logo_url,imageProps:{quality:"auto:best"},maxWidth:264,alt:`${se.name} Logo`,loading:"eager"}),Object(e.h)("h1",{className:`publication-name${se.logo_url?"":" no-logo"}`},Object(e.h)(Ye,{pub:se,noBalance:ie})),(se.hero_text||!Ee)&&Object(e.h)("p",{className:a()("publication-tagline",{verbose:Ee})},!!se.hero_text&&(ie?se.hero_text:Object(e.h)(w.a,{text:se.hero_text}))),Ee&&Object(e.h)("div",{className:"publication-meta"},Object(b.f)(se,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:se.rankingDetailFreeSubscriberCount,includeRankingDetail:ue,includePostsPerMonthCount:!0}))].filter(pe=>pe)},Ye=({pub:se,noBalance:ie})=>ie?se.name:Object(e.h)(w.a,{text:se.name})},,,,,,,function($,n){var t="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=e+s+o,c="\\ufe0e\\ufe0f",l="\\u200d",p=RegExp("["+l+t+a+c+"]");function h(m){return p.test(m)}$.exports=h},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{strokeWidth:d=1.5}=i,b=O(i,["strokeWidth"]);return Object(e.h)(s.a,v(g({},b),{name:"UserIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",fill:"none"}}),Object(e.h)("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21","stroke-width":d,"stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z","stroke-width":d,"stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";(function(e){const s={},o=s.hasOwnProperty,a=(P,D)=>{for(const W in P)o.call(P,W)&&D(W,P[W])},c=(P,D)=>(D&&a(D,(W,B)=>{P[W]=B}),P),l=(P,D)=>{const W=P.length;let B=-1;for(;++B<W;)D(P[B])},p=s.toString,h=Array.isArray,m=e.isBuffer,g=P=>p.call(P)=="[object Object]",v=P=>typeof P=="string"||p.call(P)=="[object String]",O=P=>typeof P=="number"||p.call(P)=="[object Number]",u=P=>typeof P=="function",r=P=>p.call(P)=="[object Map]",i=P=>p.call(P)=="[object Set]",d={'"':'\\"',"'":"\\'","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},b=/["'\\\b\f\n\r\t]/,w=/[0-9]/,E=/[ !#-&\(-\[\]-_a-~]/,S=(P,D)=>{const W=()=>{L=A,++D.indentLevel,A=D.indent.repeat(D.indentLevel)},B={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},f=D&&D.json;f&&(B.quotes="double",B.wrap=!0),D=c(B,D),D.quotes!="single"&&D.quotes!="double"&&D.quotes!="backtick"&&(D.quotes="single");const y=D.quotes=="double"?'"':D.quotes=="backtick"?"`":"'",M=D.compact,N=D.lowercaseHex;let A=D.indent.repeat(D.indentLevel),L="";const C=D.__inline1__,R=D.__inline2__,U=M?"":`
`;let Z,F=!0;const z=D.numbers=="binary",G=D.numbers=="octal",V=D.numbers=="decimal",k=D.numbers=="hexadecimal";if(f&&P&&u(P.toJSON)&&(P=P.toJSON()),!v(P)){if(r(P))return P.size==0?"new Map()":(M||(D.__inline1__=!0,D.__inline2__=!1),"new Map("+S(Array.from(P),D)+")");if(i(P))return P.size==0?"new Set()":"new Set("+S(Array.from(P),D)+")";if(m(P))return P.length==0?"Buffer.from([])":"Buffer.from("+S(Array.from(P),D)+")";if(h(P))return Z=[],D.wrap=!0,C&&(D.__inline1__=!1,D.__inline2__=!0),R||W(),l(P,ae=>{F=!1,R&&(D.__inline2__=!1),Z.push((M||R?"":A)+S(ae,D))}),F?"[]":R?"["+Z.join(", ")+"]":"["+U+Z.join(","+U)+U+(M?"":L)+"]";if(O(P)){if(f)return JSON.stringify(P);if(V)return String(P);if(k){let ae=P.toString(16);return N||(ae=ae.toUpperCase()),"0x"+ae}if(z)return"0b"+P.toString(2);if(G)return"0o"+P.toString(8)}else return g(P)?(Z=[],D.wrap=!0,W(),a(P,(ae,he)=>{F=!1,Z.push((M?"":A)+S(ae,D)+":"+(M?"":" ")+S(he,D))}),F?"{}":"{"+U+Z.join(","+U)+U+(M?"":L)+"}"):f?JSON.stringify(P)||"null":String(P)}const K=P;let Y=-1;const ee=K.length;for(Z="";++Y<ee;){const ae=K.charAt(Y);if(D.es6){const ie=K.charCodeAt(Y);if(ie>=55296&&ie<=56319&&ee>Y+1){const Ee=K.charCodeAt(Y+1);if(Ee>=56320&&Ee<=57343){let ce=((ie-55296)*1024+Ee-56320+65536).toString(16);N||(ce=ce.toUpperCase()),Z+="\\u{"+ce+"}",++Y;continue}}}if(!D.escapeEverything){if(E.test(ae)){Z+=ae;continue}if(ae=='"'){Z+=y==ae?'\\"':ae;continue}if(ae=="`"){Z+=y==ae?"\\`":ae;continue}if(ae=="'"){Z+=y==ae?"\\'":ae;continue}}if(ae=="\0"&&!f&&!w.test(K.charAt(Y+1))){Z+="\\0";continue}if(b.test(ae)){Z+=d[ae];continue}const he=ae.charCodeAt(0);if(D.minimal&&he!=8232&&he!=8233){Z+=ae;continue}let me=he.toString(16);N||(me=me.toUpperCase());const Ye=me.length>2||f;Z+="\\"+(Ye?"u":"x")+("0000"+me).slice(Ye?-4:-2)}return D.wrap&&(Z=y+Z+y),y=="`"&&(Z=Z.replace(/\$\{/g,"\\${")),D.isScriptContext?Z.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,f?"\\u003C!--":"\\x3C!--"):Z};S.version="2.5.2",$.exports=S}).call(this,t(599).Buffer)},function($,n,t){"use strict";t.d(n,"c",function(){return b}),t.d(n,"a",function(){return w}),t.d(n,"b",function(){return E});var e=t(15),s=t.n(e),o=t(58),a=t(3),c=t.n(a),l=t(9),p=t.n(l),h=Object.defineProperty,m=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(S,P,D)=>P in S?h(S,P,{enumerable:!0,configurable:!0,writable:!0,value:D}):S[P]=D,i=(S,P)=>{for(var D in P||(P={}))O.call(P,D)&&r(S,D,P[D]);if(v)for(var D of v(P))u.call(P,D)&&r(S,D,P[D]);return S},d=(S,P)=>m(S,g(P));function b(S,{name:P,url:D,description:W,potentialAction:B}={}){return B===void 0&&(B={"@type":"SearchAction",name:`Search ${S.name}`,target:`${S.base_url}${Object(a.getBaseArchiveUrl)(S)}?utm_source=google&sort=search&search={search_term_string}`,"query-input":"required name=search_term_string"}),{"@context":"https://schema.org","@type":"WebSite",name:P||S.name,publisher:i(i({"@type":"Organization",name:S.name,url:S.base_url},S.logo_url?{logo:{"@type":"ImageObject",url:S.logo_url}}:{}),S.twitter_screen_name?{sameAs:[`https://twitter.com/${S.twitter_screen_name}`]}:{}),url:D||S.base_url,mainEntityOfPage:{"@type":"WebPage",url:D||S.base_url},description:W||S.hero_text,potentialAction:B}}function w(S,P){const D=Object(l.getBylineUsers)(P),W=i(i(d(i({"@type":"Organization",name:(S.parent_publication||S).name,url:Object(a.getBaseUrl)(S.parent_publication||S),description:(S.parent_publication||S).hero_text},S.rankingDetailFreeIncludedOrderOfMagnitude&&{interactionStatistic:{"@type":"InteractionCounter",name:"Subscribers",interactionType:"https://schema.org/SubscribeAction",userInteractionCount:S.rankingDetailFreeIncludedOrderOfMagnitude}}),{identifier:`pub:${(S.parent_publication||S).id}`}),(S.parent_publication||S).logo_url&&{logo:{"@type":"ImageObject",url:(S.parent_publication||S).logo_url,contentUrl:Object(a.cloudinary)((S.parent_publication||S).logo_url),thumbnailUrl:Object(a.cloudinary)((S.parent_publication||S).logo_url,128,{height:128})},image:{"@type":"ImageObject",url:(S.parent_publication||S).logo_url,contentUrl:Object(a.cloudinary)((S.parent_publication||S).logo_url),thumbnailUrl:Object(a.cloudinary)((S.parent_publication||S).logo_url,128,{height:128})}}),(S.parent_publication||S).twitter_screen_name&&{sameAs:[`https://twitter.com/${(S.parent_publication||S).twitter_screen_name}`]});return d(i({"@context":"https://schema.org","@type":"NewsArticle",url:Object(a.getPostUrl)(S,P),mainEntityOfPage:Object(a.getPostUrl)(S,P),headline:P.search_engine_title||P.social_title||P.title,description:P.search_engine_description||P.description,image:P.cover_image?[{"@type":"ImageObject",url:P.cover_image}]:[],datePublished:s()(P.post_date).format("YYYY-MM-DDTHH:mm:ssZ"),dateModified:s()(P.post_date).format("YYYY-MM-DDTHH:mm:ssZ"),isAccessibleForFree:!Object(o.isPaidAudience)(P.audience)},P.post_paywall_content_for_google&&{hasPart:[{"@type":"WebPageElement",isAccessibleForFree:!0,cssSelector:".available-content"},{"@type":"WebPageElement",isAccessibleForFree:!1,cssSelector:".paywall-content"}]}),{author:D.length>0?D.map(B=>i(i({"@type":"Person",name:B.name,url:Object(a.getReaderProfileUrl)(B),description:B.bio,identifier:`user:${B.id}`},B.twitter_screen_name&&{sameAs:[`https://twitter.com/${B.twitter_screen_name}`]}),B.photo_url&&{image:{"@type":"ImageObject",contentUrl:Object(a.cloudinary)(B.photo_url),thumbnailUrl:Object(a.cloudinary)(B.photo_url,128,{height:128})}})):W,publisher:W})}function E(S){return i({"@context":"https://schema.org","@type":"Person",image:(S==null?void 0:S.photo_url)&&Object(a.cloudinary)(S.photo_url),name:`${S==null?void 0:S.name}`,url:S&&Object(a.getReaderProfileUrl)(S),jobTitle:S==null?void 0:S.bio,description:S==null?void 0:S.bio},(S==null?void 0:S.twitter_screen_name)?{sameAs:[`https://twitter.com/${S.twitter_screen_name}`]}:{})}},function($,n,t){"use strict";t.d(n,"a",function(){return B});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(11),l=t.n(c),p=t(9),h=t.n(p),m=t(7),g=t(8),v=t.n(g),O=t(64),u=t(160),r=t(110),i=Object.defineProperty,d=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(f,y,M)=>y in f?i(f,y,{enumerable:!0,configurable:!0,writable:!0,value:M}):f[y]=M,S=(f,y)=>{for(var M in y||(y={}))b.call(y,M)&&E(f,M,y[M]);if(d)for(var M of d(y))w.call(y,M)&&E(f,M,y[M]);return f},P=(f,y,M)=>new Promise((N,A)=>{var L=U=>{try{R(M.next(U))}catch(Z){A(Z)}},C=U=>{try{R(M.throw(U))}catch(Z){A(Z)}},R=U=>U.done?N(U.value):Promise.resolve(U.value).then(L,C);R((M=M.apply(f,y)).next())});const D=500,W={PUBLICATION:"publication",CHOOSE:"choose"},B=({pubToRecommendBack:f,recommendingPub:y,recommendedPubs:M,setStep:N,close:A,setLoading:L,source:C})=>{const[R,U]=Object(s.k)(null);Object(s.d)(()=>{var F;R==null&&(M==null?void 0:M.find(({id:z})=>z===f.id))&&U((F=M==null?void 0:M.find(({id:z})=>z===f.id))==null?void 0:F.blurb)},[R,M,f.id]);const Z=Object(p.getByLine)(f);return Object(e.h)("div",{className:"add-recommending-pub-modal-container"},Object(e.h)(O.a,{pub:f,logo_url:f.logo_url,size:84}),Object(e.h)("h2",null,"Recommend ",f.name),f.hero_text&&Object(e.h)("p",{className:"pub-hero-text"},f.hero_text),Object(e.h)("p",{className:"pub-author-subs"},Z?`By ${Z}`:null,Z&&f.rankingDetail?"\xA0\xA0\xB7\xA0\xA0":null,f.rankingDetail),Object(e.h)("p",{className:"why-recommend"},"Why are you recommending ",f.name,"? (optional)"),Object(e.h)("textarea",S({placeholder:"Share why your readers might enjoy it...",onChange:F=>{U(F.target.value)},value:R},u.b)),Object(e.h)("div",{className:"footer"},Object(e.h)("p",{className:"learn-more"},"Recommendations are shown to readers after they subscribe to your publication."," ",Object(e.h)("a",{href:"https://support.substack.com/hc/en-us/articles/5036794583828-How-can-I-recommend-other-publications-on-Substack-",onClick:()=>{Object(m.i)(m.a.MANAGE_RECOMMENDATIONS_LEARN_MORE_CLICKED,{source:"modal-recommend-pub"})}},Object(e.h)("u",null,"Learn more"))),Object(e.h)("button",{className:a()("continue-button button primary",{disabled:((R==null?void 0:R.length)||0)>D}),disabled:((R==null?void 0:R.length)||0)>D,title:((R==null?void 0:R.length)||0)>D?`Please enter a description shorter than ${D} characters`:"",onClick:()=>P(void 0,null,function*(){yield l.a.put("/api/v1/recommendations").send(S({recommended_publication_id:f.id,recommending_publication_id:y.id,source:C||"recommendation_notification_email",suggested:!1},!!R&&{description:R.length>=2?R:null})),(M==null?void 0:M.filter(({id:F})=>F!==f.id).length)?A():N(W.CHOOSE),L?(L(!0),A()):(Object(g.redirect)("/publish/settings/recommendations"),Object(r.b)(`Started recommending ${f.name}`,{timeout:1500}))})},"Continue")))}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"SearchIcon",svgParams:{height:24,width:24}}),Object(e.h)("path",{d:"M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z",stroke:d||"#555555","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M21.0004 21.0004L16.6504 16.6504",stroke:d||"#555555","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},,,,,function($,n,t){var e=t(207),s=e.Global;$.exports={name:"sessionStorage",read:a,write:c,each:l,remove:p,clearAll:h};function o(){return s.sessionStorage}function a(m){return o().getItem(m)}function c(m,g){return o().setItem(m,g)}function l(m){for(var g=o().length-1;g>=0;g--){var v=o().key(g);m(a(v),v)}}function p(m){return o().removeItem(m)}function h(){return o().clear()}},function($,n,t){var e=t(207),s=e.Global,o=e.trim;$.exports={name:"cookieStorage",read:c,write:p,each:l,remove:h,clearAll:m};var a=s.document;function c(v){if(!v||!g(v))return null;var O="(?:^|.*;\\s*)"+escape(v).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(a.cookie.replace(new RegExp(O),"$1"))}function l(v){for(var O=a.cookie.split(/; ?/g),u=O.length-1;u>=0;u--)if(!!o(O[u])){var r=O[u].split("="),i=unescape(r[0]),d=unescape(r[1]);v(d,i)}}function p(v,O){!v||(a.cookie=escape(v)+"="+escape(O)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function h(v){!v||!g(v)||(a.cookie=escape(v)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function m(){l(function(v,O){h(O)})}function g(v){return new RegExp("(?:^|;\\s*)"+escape(v).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(a.cookie)}},function($,n){function t(e){return function(s,o,a){for(var c=-1,l=Object(s),p=a(s),h=p.length;h--;){var m=p[e?h:++c];if(o(l[m],m,l)===!1)break}return s}}$.exports=t},function($,n,t){var e=t(173);function s(o,a){return function(c,l){if(c==null)return c;if(!e(c))return o(c,l);for(var p=c.length,h=a?p:-1,m=Object(c);(a?h--:++h<p)&&l(m[h],h,m)!==!1;);return c}}$.exports=s},function($,n,t){var e=t(642);function s(o,a){var c=o==null?0:o.length;return!!c&&e(o,a,0)>-1}$.exports=s},function($,n){function t(e){return e!==e}$.exports=t},function($,n){function t(e,s,o){for(var a=o-1,c=e.length;++a<c;)if(e[a]===s)return a;return-1}$.exports=t},function($,n){function t(e,s,o){for(var a=-1,c=e==null?0:e.length;++a<c;)if(o(s,e[a]))return!0;return!1}$.exports=t},function($,n,t){var e=t(341),s=t(351),o=t(232),a=1/0,c=e&&1/o(new e([,-0]))[1]==a?function(l){return new e(l)}:s;$.exports=c},function($,n,t){var e=t(84),s=function(){return e.Date.now()};$.exports=s},function($,n,t){var e=t(733),s=t(734),o=t(585),a=t(735);function c(l,p){return e(l)||s(l,p)||o(l,p)||a()}$.exports=c,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){function t(e,s){return $.exports=t=Object.setPrototypeOf||function(a,c){return a.__proto__=c,a},$.exports.default=$.exports,$.exports.__esModule=!0,t(e,s)}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){function t(e,s){return s||(s=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(s)}}))}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){"use strict";var e=t(682);function s(){}function o(){}o.resetWarningCache=s,$.exports=function(){function a(p,h,m,g,v,O){if(O!==e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}a.isRequired=a;function c(){return a}var l={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:c,element:a,elementType:a,instanceOf:c,node:a,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:o,resetWarningCache:s};return l.PropTypes=l,l}},function($,n,t){"use strict";var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";$.exports=e},function($,n,t){var e=t(257);function s(o,a){return e(a,function(c){return o[c]})}$.exports=s},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"UserCrossIcon",svgParams:{viewBox:"0 0 24 24",height:24,width:24,fill:"none"}}),Object(e.h)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M8.5 11C10.7091 11 12.5 9.20914 12.5 7C12.5 4.79086 10.7091 3 8.5 3C6.29086 3 4.5 4.79086 4.5 7C4.5 9.20914 6.29086 11 8.5 11Z",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M18 8L23 13",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M23 8L18 13",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d,size:b=36}=i,w=O(i,["stroke","size"]);return Object(e.h)(s.a,v(g({},w),{name:"ThinCircleCheckmarkIcon2",svgParams:{viewBox:"0 0 36 36",height:b,width:b,fill:"none"}}),Object(e.h)("path",{d:"M34.6667 16.4666V17.9999C34.6646 21.594 33.5008 25.0911 31.3489 27.9696C29.1969 30.8482 26.1721 32.9541 22.7256 33.9731C19.279 34.9921 15.5954 34.8698 12.2241 33.6242C8.85279 32.3787 5.97441 30.0768 4.01825 27.0617C2.0621 24.0467 1.13297 20.48 1.36945 16.8938C1.60592 13.3075 2.99533 9.89381 5.33045 7.16173C7.66558 4.42964 10.8213 2.52557 14.327 1.73351C17.8326 0.941453 21.5004 1.30383 24.7833 2.7666",stroke:d||"#FB6542","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{transform:"translate(11.67, 3.34)",d:"M22.6667 1.66663L6 18.35L1 13.35",stroke:d||"#FB6542","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{strokeWidth:d=1.5}=i,b=O(i,["strokeWidth"]);return Object(e.h)(s.a,v(g({},b),{strokeWidth:d,name:"SendIcon",svgParams:{height:20,width:20,viewBox:"0 0 20 20"}}),Object(e.h)("path",{d:"M18.3332 1.66699L12.4998 18.3337L9.1665 10.8337L1.6665 7.50033L18.3332 1.66699Z","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M18.3332 1.66699L9.1665 10.8337","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";var e=t(0),s=t(1),o=t(15),a=t.n(o),c=t(9),l=t(3),p=t(16),h=t(8),m=t(7),g=t(17),v=t(44),O=t(450),u=t(11),r=t.n(u),i=t(6),d=t.n(i),b=t(436),w=t(83),E=t(370),S=t(45),P=t(68),D=t(75),W=t(552),B=t(135),f=t(454),y=t(35),M=t(49),N=t(327),A={menuIcon:"frontend-components-NavbarUserWidget-module__menuIcon--SKMR-"},L=t(822),C=t(21),R=t(4),U=t(216),Z=t(10),F=t(22),z=t(155),G=t(120),V=t(76),k={searchWrapper:"frontend-components-SearchDropdown-module__searchWrapper--mzZlw",marginLeft:"frontend-components-SearchDropdown-module__marginLeft--GwZeg",marginRight:"frontend-components-SearchDropdown-module__marginRight--2VlMu",active:"frontend-components-SearchDropdown-module__active--3ggmQ",trigger:"frontend-components-SearchDropdown-module__trigger--2c3jW",searcher:"frontend-components-SearchDropdown-module__searcher--1zBsd",dropdown:"frontend-components-SearchDropdown-module__dropdown--2QyVz",result:"frontend-components-SearchDropdown-module__result--3w0P8",loading:"frontend-components-SearchDropdown-module__loading--1XBzi",empty:"frontend-components-SearchDropdown-module__empty--1YFWV",more:"frontend-components-SearchDropdown-module__more--3CkZh",seeMore:"frontend-components-SearchDropdown-module__seeMore--1lBHc",photo:"frontend-components-SearchDropdown-module__photo--2BYQo",metadata:"frontend-components-SearchDropdown-module__metadata--1hXuU",paddingRight:"frontend-components-SearchDropdown-module__paddingRight--jvY2g"},K=Object.defineProperty,Y=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,Ye=(Pe,de,be)=>de in Pe?K(Pe,de,{enumerable:!0,configurable:!0,writable:!0,value:be}):Pe[de]=be,se=(Pe,de)=>{for(var be in de||(de={}))he.call(de,be)&&Ye(Pe,be,de[be]);if(ae)for(var be of ae(de))me.call(de,be)&&Ye(Pe,be,de[be]);return Pe},ie=(Pe,de)=>Y(Pe,ee(de));const Ee=({pub:Pe,isSignedIn:de})=>{var be;const[Ie,ke]=Object(s.k)(!1),[Te,x]=Object(s.k)(""),{getConfigFor:H}=Object(S.c)(),le=Boolean((be=H("platform_searcher_enabled"))!=null?be:!1),{result:Ce,refetch:Ue,error:Ve,isLoading:bt,hasLoadedOnce:yt}=Object(C.f)({pathname:"/api/v1/post/search",query:{query:Te,focusedPublicationId:Pe.id,page:0,numberFocused:3,numberPlatform:2,includePlatformResults:String(le)},deps:[Te],auto:!1}),Qt=(le?Ce==null?void 0:Ce.focused:Ce==null?void 0:Ce.results)||[],tn=le?(Ce==null?void 0:Ce.results)||[]:[],Kn=(Ce==null?void 0:Ce.publications)||[],{triggerProps:Ot,layerProps:lt,renderLayer:Be,isOpen:_e,setOpen:Ae}=Object(U.a)({layerOptions:{auto:!0,possiblePlacements:["bottom-start","bottom-end","bottom-center"],placement:"bottom-start"}});Object(s.d)(()=>{if(Te.length){Ae(!0);const nt=setTimeout(Ue,300);return()=>clearTimeout(nt)}Ae(!1)},[Te,Ae]);const fe=Object(s.j)(null),ft=Object(s.a)(nt=>{if(nt.key==="Enter"){if(!_e||!Te||!Ie)return;window.location.href=Object(l.getDiscoverSearchUrl)({query:Te,params:{focusedPublicationId:Pe.id}})}else if(nt.key==="Escape"){if(!Ie)return;x(""),ke(!1),Ae(!1)}},[Ie,_e,Te]);return Object(e.h)(e.Fragment,null,Object(e.h)(R.c,ie(se({},Ot),{className:d()(k.searchWrapper,Ie&&k.active,de?k.marginLeft:k.marginRight),style:{width:Ie?"400px":"40px"},paddingLeft:Ie?16:0,alignItems:"center",justifyContent:Ie?"space-between":"center",onClick:Ie?void 0:()=>{ke(!Ie),Ie||(setTimeout(()=>{var nt;(nt=fe.current)==null||nt.focus()},10),x(""))},gap:4}),Object(e.h)(L.a,{className:k.trigger,"area-hidden":!0,size:20,strokeWidth:2}),Ie&&Object(e.h)("input",{ref:fe,className:d()(k.searcher),placeholder:"Search...",value:Te,onChange:nt=>{x(nt.target.value)},onKeyDown:ft})),_e&&Be(Object(e.h)(R.b,ie(se({},lt),{radius:8,className:k.dropdown,border:"detail-themed"}),!yt||bt&&!Qt.length&&!tn.length?Object(e.h)(R.c,{radius:8,paddingY:20,className:k.loading,justifyContent:"center"},Object(e.h)(F.b,{size:40})):Ve?Object(e.h)(R.c,{radius:8,className:k.error,justifyContent:"start"},Object(e.h)(Z.b.B3,{color:"pub-primary-text"},"Something went wrong.")):!Qt.length&&!tn.length?Object(e.h)(R.c,{radius:8,padding:20,className:k.empty,justifyContent:"start"},Object(e.h)(Z.b.B3,{color:"pub-primary-text"},"Search for ",Object(e.h)("b",null,'"',Te,'"'))):Object(e.h)(e.Fragment,null,Qt.map((nt,ct)=>Object(e.h)(Oe,{key:nt.id,pub:Pe,post:nt,isFirst:ct===0,isLast:!tn.length&&ct===Qt.length-1,hideBottomBorder:tn.length>0})),tn.length>0&&Object(e.h)(R.c,{className:k.more,paddingX:24,paddingY:8},Object(e.h)(Z.b.B4,{weight:"semibold",color:"pub-primary-text"},Qt.length?"More results from across Substack":`No results found on ${Pe.name}. More results from across Substack`)),tn.map((nt,ct)=>{const Xe=Kn.find(gt=>gt.id===nt.publication_id);return Xe?Object(e.h)(Oe,{key:nt.id,pub:Xe,post:nt,isLast:ct===tn.length-1,includePublication:!0}):null}),Object(e.h)(R.c,{className:k.seeMore,paddingX:24,paddingY:12,onClick:()=>{window.location.href=Object(l.getDiscoverSearchUrl)({query:Te,params:{focusedPublicationId:Pe.id}})}},Object(e.h)(Z.b.B4,{color:"pub-primary-text",weight:"semibold"},"See more results..."))))))},Oe=({pub:Pe,post:de,includePublication:be=!1,hideBottomBorder:Ie=!1,isLast:ke=!1,isFirst:Te=!1})=>{var x;const H=(x=de.reactions["\u2764"])!=null?x:0;return Object(e.h)(R.c,{paddingX:12,onClick:()=>{window.location.href=Object(l.getPostUrl)(Pe,de)},width:"100%"},Object(e.h)(R.b,{marginHeight:4,paddingTop:Te?12:8,paddingBottom:ke?12:8,borderBottom:Ie?void 0:"detail-themed"},Object(e.h)(R.c,{className:k.result,gap:16,padding:12,radius:8},de.cover_image&&Object(e.h)("img",{src:Object(l.cloudinary)(de.cover_image,120,{height:80,smartCrop:!0}),alt:de.cover_image_alt||"",className:k.photo}),Object(e.h)(R.b,{gap:4,className:k.metadata},be&&Object(e.h)(Z.b.Meta,null,Pe.name),Object(e.h)(Z.b.H4,{color:"pub-primary-text"},de.title),!!de.subtitle&&Object(e.h)(Z.b.B4,{color:"pub-primary-text"},de.subtitle),Object(e.h)(R.c,{alignItems:"center",gap:4},Object(e.h)(Z.b.Meta,{color:"pub-secondary-text",className:d()(k.paddingRight,"ufi-preamble-label","post-date")},Object(e.h)("time",{dateTime:a()(de.post_date).toISOString()},Object(V.g)({post:de,showDatetime:!1}))),H>0&&Object(e.h)(e.Fragment,null,Object(e.h)(G.default,{stroke:"var(--color-light-secondary-themed)",fill:"transparent",height:16}),Object(e.h)(Z.b.Meta,{color:"pub-secondary-text",className:k.paddingRight},H)),de.comment_count>0&&Object(e.h)(e.Fragment,null,Object(e.h)(z.default,{stroke:"var(--color-light-secondary-themed)",fill:"transparent",height:16}),Object(e.h)(Z.b.Meta,{color:"pub-secondary-text"},de.comment_count)))))))};var ce=Object.defineProperty,ue=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,q=(Pe,de,be)=>de in Pe?ce(Pe,de,{enumerable:!0,configurable:!0,writable:!0,value:be}):Pe[de]=be,Ne=(Pe,de)=>{for(var be in de||(de={}))ne.call(de,be)&&q(Pe,be,de[be]);if($e)for(var be of $e(de))X.call(de,be)&&q(Pe,be,de[be]);return Pe},Qe=(Pe,de)=>ue(Pe,pe(de)),Ze=(Pe,de)=>{var be={};for(var Ie in Pe)ne.call(Pe,Ie)&&de.indexOf(Ie)<0&&(be[Ie]=Pe[Ie]);if(Pe!=null&&$e)for(var Ie of $e(Pe))de.indexOf(Ie)<0&&X.call(Pe,Ie)&&(be[Ie]=Pe[Ie]);return be},tt=(Pe,de,be)=>new Promise((Ie,ke)=>{var Te=le=>{try{H(be.next(le))}catch(Ce){ke(Ce)}},x=le=>{try{H(be.throw(le))}catch(Ce){ke(Ce)}},H=le=>le.done?Ie(le.value):Promise.resolve(le.value).then(Te,x);H((be=be.apply(Pe,de)).next())});const Ft=t(59),Lt=({className:Pe,baseRef:de,user:be,freeSignup:Ie,freeSignupEmail:ke,pub:Te,hide_subscribe_cta:x,showCustomerSupportModeModal:H,hideCta:le,hideNotifications:Ce,hideUserIndicator:Ue,hideSearch:Ve,isPublishContext:bt,isMeetingsActive:yt,fixedTooltip:Qt=!0})=>{const tn=Object(s.j)(null),{getSettingFor:Kn}=Object(D.c)(),Ot=Object(P.d)(),lt=(be==null?void 0:be.is_global_admin)&&!(be==null?void 0:be.is_admin),Be=(be==null?void 0:be.is_global_admin)&&(be==null?void 0:be.is_admin)&&!(be==null?void 0:be.is_author),_e=Object(s.a)(()=>tt(void 0,null,function*(){try{yield r.a.del("/api/v1/customer_support_mode"),document.location.href="/"}catch(fe){alert(Object(h.getNetworkErrorMessage)(fe))}}),[]),Ae=Object(s.a)(()=>tt(void 0,null,function*(){var fe;(fe=tn.current)==null||fe.open()}),[tn]);return Object(e.h)("div",{className:d()("navbar-buttons",Pe),ref:de},Object(e.h)(S.a.Consumer,null,fe=>Object(e.h)(E.a.Consumer,null,ft=>Object(e.h)(e.Fragment,null,!Ve&&!Object(h.isMobileBrowser)()&&fe.getConfigFor("navbar_searcher_enabled")&&!be&&Object(e.h)(Ee,{pub:Te,isSignedIn:!1}),!le&&je({pub:Te,user:be,freeSignup:Ie,freeSignupEmail:ke,hide_subscribe_cta:x,viralGiftsConfig:Te.viralGiftsConfig,isPublishContext:bt,localeContext:ft,siteConfigContext:fe,isMeetingsActive:yt,getSettingFor:Kn,experimentApi:Ot}),!Ve&&!Object(h.isMobileBrowser)()&&fe.getConfigFor("navbar_searcher_enabled")&&be&&Object(e.h)(Ee,{pub:Te,isSignedIn:!0}),!Ce&&be&&!Object(h.isMobileBrowser)()&&Object(e.h)(W.a,{fill:"borderless"}),!Ue&&Object(e.h)(b.a,{pub:Te,user:be,enableCustomerServiceMode:lt?Ae:null,disableCustomerServiceMode:Be?_e:null,fixedTooltip:Qt})))),lt&&Object(e.h)(B.a,null,Object(e.h)(v.a,{className:"account-info-customer-support-mode-modal",ref:tn,openByDefault:H&&lt},Object(e.h)(O.a,{redirect:Object(l.getQueryItem)("redirect")||"/publish",onCancel:fe=>{var ft;return(ft=tn.current)==null?void 0:ft.close(fe)}}))))},rn=({pub:Pe,dashboardPubs:de})=>{const be=Object(M.b)();return Object(e.h)(f.b,{priority:"primary-theme",fill:"outline",size:be?"small":"medium",menuItems:de.map(({logo_url:Ie,name:ke,subdomain:Te})=>Object(e.h)(y.d,{className:A.menuItem,href:Object(l.getDashboardUrlForSubdomain)(Te,{params:{utm_source:"substack",utm_context:"dashboard_pub_switcher"}}),icon:Object(e.h)("img",{className:A.menuIcon,width:20,src:Object(l.cloudinary)(Ie||"/img/substack-nomargin.png",20)}),priority:Pe.subdomain===Te?"selected":"primary"},ke)),href:Object(l.getDashboardUrl)(Pe,{addBase:!0}),localNavigation:!1,"data-testid":"menu-dashboard-button",additionalMenuProps:{useMobileBottomSheet:!0,mobileBottomSheetTitle:"Dashboard",mobileBottomSheetSubtitle:"Select a publication"}},"Dashboard")},ht=({dashboardPubs:Pe,pub:de,useNewDashLink:be})=>Pe.length>1?Object(e.h)(rn,{pub:de,dashboardPubs:Pe}):Object(e.h)(Le,{className:"outline",href:be?Object(p.getNewDashboardUrl)(de,{addBase:!0}):Object(l.getDashboardUrl)(de,{addBase:!0}),"data-testid":"menu-dashboard-button"},"Dashboard");function je({user:Pe,pub:de,freeSignup:be,freeSignupEmail:Ie,hide_subscribe_cta:ke,isPublishContext:Te,isMeetingsActive:x,siteConfigContext:H,getSettingFor:le,experimentApi:{exposeExperiment:Ce,getExperimentVariant:Ue}}){var Ve,bt,yt,Qt,tn,Kn,Ot,lt,Be,_e;de.invite_only&&!((Pe==null?void 0:Pe.subscription_id)||(Pe==null?void 0:Pe.is_free_subscribed))&&(ke=!0);const Ae=Pe==null?void 0:Pe.is_contributor,fe=(Pe==null?void 0:Pe.is_subscribed)||Ae,ft=(Pe==null?void 0:Pe.is_free_subscribed)||be,nt=Ft.paymentsAreEnabled(de)&&fe&&["gift","comp"].includes(Pe.subscription_type)&&a()(Pe.subscription_expiry).subtract(30,"days").isBeforeNow(),ct=Ft.paymentsAreEnabled(de)&&Ft.userIsFreeOnly(Pe)&&Pe.comp_expired_recently,Xe=(Pe==null?void 0:Pe.is_free_subscribed)&&(Pe==null?void 0:Pe.is_paused),gt=((Ve=Pe==null?void 0:Pe.dashboard_pubs)==null?void 0:Ve.length)===1&&Ue("new_dashboard")==="treatment";if(Ae){const Tt=(Pe==null?void 0:Pe.dashboard_pubs)||[];return Te&&Tt.length===1?[]:!de.has_posts&&!Object(h.isMobileBrowser)()?[Object(e.h)(Le,{className:"primary fill new-post-btn",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"new-post"}),Object(h.redirect)(Object(l.getCreatePostUrl)(de,{type:"newsletter"}),{local_navigation:!1})}},"New post"),Object(e.h)(ht,{dashboardPubs:Tt,pub:de,useNewDashLink:gt})]:Object(e.h)(ht,{dashboardPubs:Tt,pub:de,useNewDashLink:gt})}else{if(Xe)return Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"unpause-subscription"}),Object(h.redirect)(Object(l.getCancelOrUncancelUrl)(de,{addBase:!0}),{local_navigation:!1})}},"Unpause My Subscription");if(nt||ct)return ke?null:Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"continue-support"}),Object(h.redirect)(Object(l.getSubscribeUrl)(de,{utm_source:"menu",simple:!0,next:document.location.href,referring_pub_ids:Object(l.getQueryItem)("referring_pub_ids"),addBase:!0}),{local_navigation:!1})}},Object(e.h)("span",{className:"mobile-only"},"Subscribe"),Object(e.h)("span",{className:"desktop-only"},"Continue your support"));if(Ft.paymentsAreEnabled(de)&&ft&&!fe&&!["thebulwark"].includes(de.subdomain))return ke?null:Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"upgrade-subscription"}),Object(h.redirect)(Object(l.getSubscribeUrl)(de,{utm_source:"menu",simple:!0,next:document.location.href,referring_pub_ids:Object(l.getQueryItem)("referring_pub_ids"),addBase:!0}),{local_navigation:!1})}},Object(c.getSubscribeText)(de,{isFreeSubscribed:!0,isMobile:Object(h.isMobileBrowser)()}));if(Ft.paymentsAreEnabled(de)?!fe:!(ft||fe)){if(!ke){const Tt=(Qt=(yt=(bt=Object(l.getQueryItem)("referring_pub_ids"))==null?void 0:bt.split)==null?void 0:yt.call(bt,","))==null?void 0:Qt[0],Ut=(Ot=(Kn=(tn=Object(l.getQueryItem)("referring_pub_ids"))==null?void 0:tn.split)==null?void 0:Kn.call(tn,","))==null?void 0:Ot.slice(1);return Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>tt(this,null,function*(){const qt=Pe&&!Pe.is_magic&&Pe.email||Ie;if(Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"free-subscription"}),qt){try{yield r.a.post("/api/v1/free").send({source:"menu",email:qt,first_url:w.d,first_referrer:w.c,current_url:w.b,current_referrer:w.a,referring_pub_id:Tt,additional_referring_pub_ids:Ut})}catch(sn){Object(m.i)(m.a.FREE_SIGNUP_FAILED,{reason:sn.message})}window.location.href=Object(l.getSubscribeUrl)(de,{utm_source:"menu",simple:!0,next:document.location.href,skip_redirect_check:!0,just_signed_up:!0,addBase:!0})}else window.location.href=Object(l.getSubscribeUrl)(de,{utm_source:"menu",simple:!0,next:document.location.href,referring_pub_ids:Object(l.getQueryItem)("referring_pub_ids"),addBase:!0})})},Object(c.getSubscribeText)(de,{isFreeSubscribed:ft,isMobile:Object(h.isMobileBrowser)()}))}return null}else{if(de.invite_only&&fe&&Pe.invites<de.subscriber_invites)return Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",className:"primary",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"invite"}),Object(h.redirect)(Object(l.getInviteUrl)(de),{local_navigation:!1})}},Object(e.h)("span",null,Object(c.pluralize)(de.subscriber_invites-Pe.invites,"invite")," left"));if(Ft.paymentsAreEnabled(de)&&x&&!H.getConfigFor("hide_book_a_meeting_button"))return Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",className:"primary",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"book-meeting"}),Object(h.redirect)(Object(p.getMeetingsUrl)(de,{params:{source:"navbar-cta"},referrer:typeof window!="undefined"&&window.location.href}),{local_navigation:!1})}},Object(e.h)("span",{className:"mobile-only"},"Book meeting"),Object(e.h)("span",{className:"desktop-only"},"Book a meeting"));if(Ft.paymentsAreEnabled(de)&&!Pe.is_founding&&((_e=(Be=(lt=de==null?void 0:de.plans)==null?void 0:lt.find(Tt=>Tt.metadata.founding))==null?void 0:Be.metadata)==null?void 0:_e.short_description)==="Founding Member"){Ce("navbar_founding_cta");const Tt=Ue("navbar_founding_cta");if(["treatment_upgrade","treatment_support"].includes(Tt))return Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"founding-upgrade"}),Object(h.redirect)(Object(l.getSubscribeUrl)(de,{utm_source:"menu",next:document.location.href,addBase:!0,selectedPlanId:de.plans.find(Ut=>Ut.metadata.founding).id}),{local_navigation:!1})}},Object(e.h)("span",{className:"mobile-only"},"Upgrade"),Object(e.h)("span",{className:"desktop-only"},Tt==="treatment_upgrade"?"Upgrade to founding":"Increase your support"))}}}return Ft.paymentsAreEnabled(de)&&!de.invite_only?Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"gift-subscription"}),Object(h.redirect)(Object(l.getSubscribeUrl)(de,{utm_source:"menu",gift:!0,next:document.location.href,addBase:!0}),{local_navigation:!1})}},Object(e.h)("span",{className:"mobile-only"},"Give gift"),Object(e.h)("span",{className:"desktop-only"},"Gift a subscription")):de.payments_state==="disabled"&&!de.invite_only&&le("payment_pledges_enabled")&&ft&&!(Pe==null?void 0:Pe.is_pledged)?Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"pledge-subscription"}),Object(h.redirect)(Object(l.getSubscribeUrl)(de,{utm_source:"menu",next:document.location.href,addBase:!0}),{local_navigation:!1})}},"Pledge your support"):de.is_on_substack&&!(Pe==null?void 0:Pe.has_publication)?Object(e.h)(Le,{"data-testid":"noncontributor-cta-button",onClick:()=>{Object(m.i)(m.a.NAV_BAR_CTA_CLICKED,{type:"start-publishing"}),Object(h.redirect)(Object(l.getStartPublishingUrl)({utm_source:"menu"}),{local_navigation:!1})}},"Start publishing"):null}function Le(Pe){var de=Pe,{className:be="primary subscribe-cta subscribe-btn"}=de,Ie=Ze(de,["className"]);const ke=Object(s.b)(N.a),Te=!1;return Object(e.h)(g.b,Qe(Ne({},Ie),{className:d()(be,{"rounded-btn":Te,"force-desktop":ke})}))}var rt=n.a=Lt},function($,n,t){"use strict";t.d(n,"a",function(){return r});var e=t(0),s=t(762),o=t(574),a=t(249),c=t(561),l=t(393),p=Object.defineProperty,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(i,d,b)=>d in i?p(i,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):i[d]=b,O=(i,d)=>{for(var b in d||(d={}))m.call(d,b)&&v(i,b,d[b]);if(h)for(var b of h(d))g.call(d,b)&&v(i,b,d[b]);return i},u=(i,d)=>{var b={};for(var w in i)m.call(i,w)&&d.indexOf(w)<0&&(b[w]=i[w]);if(i!=null&&h)for(var w of h(i))d.indexOf(w)<0&&g.call(i,w)&&(b[w]=i[w]);return b};const r=i=>{var d=i,{postType:b}=d,w=u(d,["postType"]);switch(b){case"newsletter":return Object(e.h)(o.default,O({},w));case"adhoc_email":return Object(e.h)(s.default,O({},w));case"thread":return Object(e.h)(c.default,O({},w));case"podcast":return Object(e.h)(a.default,O({},w));case"video":return Object(e.h)(l.default,O({},w));default:return console.warn(`Unrecognized post type: [${b}]`),null}}},function($,n,t){"use strict";t.d(n,"a",function(){return G});var e=t(0),s=t(6),o=t.n(s),a=t(15),c=t.n(a),l=t(399),p=t(3),h=t(16),m=t(89),g=t(287),v=t(7),O=t(8),u=t(10),r=t(49),i=t(54),d=t(687),b=t(9),w=t(704);const E=(k,K)=>k.subItems?new f(k):k.base_url?new P(k):k.name&&k.id&&k.url?new B(k,K):k.isPodcast?new D(k):new W(k,K);class S{constructor(K){this._obj=K}truncatedName(){return Object(b.truncateText)(this._obj.name,30)}isNewsletter(){throw new Error("not implemented")}isPodcast(){throw new Error("not implemented")}isSelected(K,Y){throw new Error("not implemented")}isNative(){throw new Error("not implemented")}homepageUrl(){throw new Error("not implemented")}noFollow(){return!1}subItems(){return null}get item(){return this._obj}}class P extends S{isNewsletter(){return this._obj.type==="newsletter"}isPodcast(){return this._obj.type==="podcast"}isSelected(K){return this._obj.id===K.id}isNative(){return!0}logoUrl(){return this._obj.logo_url}homepageUrl(){return Object(h.getBaseUrl)(this._obj)}}class D extends S{constructor(K,Y){super(K)}isPodcast(){return!0}isSelected(K,Y){return this._obj.id===Y}isNative(){return!0}homepageUrl(){return Object(h.getBaseUrl)(this._obj)}}class W extends S{constructor(K,Y){super(K);this._homepageUrl=Object(h.getSectionUrl)(Y,{section:K})}isPodcast(){return this._obj.is_podcast}isSelected(K,Y){return this._obj.id===Y}isNative(){return!0}homepageUrl(){return this._homepageUrl}}class B extends S{constructor(K,Y){super(K);this._maybeNoFollow=K.noFollow,this._pubTier=(Y==null?void 0:Y.tier)||0}isNewsletter(){return!1}isPodcast(){return!1}isSelected(K,Y){return[this._obj.id,this._obj.url].includes(Y)}isNative(){return!0}noFollow(){return this._maybeNoFollow&&this._pubTier<2}homepageUrl(){return this._obj.url}}class f extends S{isNewsletter(){return!1}isPodcast(){return!1}isSelected(K,Y){return[this._obj.id,this._obj.url].includes(Y)}isNative(){return!1}homepageUrl(){return null}subItems(){return this._obj.subItems.map(E)}}var M=({pub:k,selectedSectionId:K,sectionRawItems:Y,isPublishContext:ee})=>{const ae=Y.map(me=>E(me,k)),he=me=>{var Ye,se;return{label:me.truncatedName(),href:me.homepageUrl(),slug:me.item.id,isNative:me.isNative(),noFollow:me.noFollow(),logoUrl:(Ye=me.logoUrl)==null?void 0:Ye.call(me),subItems:(se=me.subItems())==null?void 0:se.map(he)}};return Object(e.h)(w.a,{items:ae.map(he),className:o()("sections-overflow",{"publish-menu":ee}),height:48,selectedSlug:K,fudgeFactor:8,useHorizontalScrolling:ee,pub:k})},N=Object.defineProperty,A=(k,K,Y)=>K in k?N(k,K,{enumerable:!0,configurable:!0,writable:!0,value:Y}):k[K]=Y,L=(k,K,Y)=>(A(k,typeof K!="symbol"?K+"":K,Y),Y),C,R,U,Z;const F=t(59),z=(k,K)=>{var Y,ee;return((Y=k.sibling_rank)!=null?Y:1/0)-((ee=K.sibling_rank)!=null?ee:1/0)||(k.name<K.name?-1:k.name>K.name?1:0)};class G extends e.Component{constructor(){super(...arguments);L(this,"menuHeight",0),L(this,"state",{animated:!0,hiding:Boolean(typeof window!="undefined"&&(((R=(C=window.location.hash)==null?void 0:C.startsWith)==null?void 0:R.call(C,"#footnote"))||((Z=(U=window.location.hash)==null?void 0:U.startsWith)==null?void 0:Z.call(U,"#tiktok"))))}),L(this,"onClick",K=>{var Y,ee;(((Y=K.target)==null?void 0:Y.classList.contains("footnote-number"))||((ee=K.target)==null?void 0:ee.classList.contains("footnote-anchor")))&&(this.setState({hiding:!0}),setTimeout(this.hide,0))}),L(this,"onResize",()=>{if(this.menuHeight=this.menuContent?this.menuContent.getBoundingClientRect().height:0,!this.buttonsContainer)return;const K=this.largeMenuPubTitle?this.largeMenuPubTitle.getBoundingClientRect().width:0,Y=document.body.clientWidth,ee=this.buttonsContainer.getBoundingClientRect().width,ae=Y>630,he=ae?24*2:12*2,me=ae&&.5*Y-ee-he>.5*K;this.setState({buttonsContainerWidth:me?`${ee}px`:"auto",centerTitle:me})}),L(this,"onScroll",()=>{if(this.props.always_show){this.menuTop=0,this.menuContent.style.position="fixed",this.menuContent.style.top="";return}if(this.state.hiding)return;const K=this.scrollTop;this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop;const Y=Math.max(this.scrollTop,0);if(this.scrollTop<=0||Object(O.maxScroll)()<=0)this.menuTop=0,this.menuContent.style.position="fixed",this.menuContent.style.top="";else if(!(this.scrollTop>=Object(O.maxScroll)()))if(this.scrollTop<K){const ee=Math.max(this.scrollTop-this.menuHeight,0);this.menuTop>Y?(this.menuTop=Y,this.menuContent.style.position="fixed",this.menuContent.style.top=""):(!this.menuTop||this.menuTop<ee)&&(this.menuTop=ee,this.menuContent.style.top=`${this.menuTop}px`,this.menuContent.style.position="")}else this.scrollTop>K&&(this.menuContent.style.position==="fixed"&&this.menuTop>=0?(this.menuTop=Y,this.menuContent.style.top=`${this.menuTop}px`,this.menuContent.style.position=""):this.menuTop<Y-this.menuHeight&&this.menuContent.style.position!=="fixed"&&(this.menuTop=-this.menuHeight,this.menuContent.style.top=`${this.menuTop}px`,this.menuContent.style.position="fixed"))}),L(this,"onHeadlineClick",K=>{this.publicationPicker?(K.preventDefault(),this.publicationPicker.open()):Object(v.i)(v.a.NAV_BAR_HOME_LINK_CLICKED)}),L(this,"hide",()=>{const K=Math.max(document.documentElement.scrollTop||document.body.scrollTop,0);this.menuTop=K-this.menuHeight,this.menuContent.style.top=`${this.menuTop}px`,this.menuContent.style.position="",this.setState({hiding:!1})}),L(this,"getSectionRawItems",()=>{var K,Y;const{isPublishContext:ee,pub:ae,user:he,isChatActive:me,isMeetingsActive:Ye,hasMeetingsBooked:se}=this.props,ie=[],Ee=c()(ae.created_at)>c()("2023-03-10T13:00:00-05:00"),Oe=(!(he==null?void 0:he.dashboard_pubs)||he.dashboard_pubs.length===1)&&(this.context.getConfigFor("new_dashboard")||this.context.getExperimentVariant("new_dashboard")==="treatment");if(Ee&&ee&&!this.context.getConfigFor("new_dashboard")&&(!(he==null?void 0:he.dashboard_pubs)||he.dashboard_pubs.length===1)&&this.context.exposeExperiment("new_dashboard"),ee)Ee&&Oe&&ie.push({id:"/publish/dashboard",url:Object(h.getNewDashboardUrl)(ae,{addBase:!0}),name:"Dashboard"}),ie.push({id:"/publish",url:Object(p.getDashboardUrl)(ae),name:"Posts"},{id:"/publish/podcasting",url:Object(p.getPodcastingUrl)(ae,{addBase:!0}),name:"Podcast"},{id:"/publish/subscribers",url:Object(p.getSubscriberStatsUrl)(ae,{addBase:!0}),name:"Subscribers"}),he&&he.is_admin&&(ie.push({id:"/publish/stats",url:"/publish/stats",name:"Stats"}),ie.push({id:"/publish/recommendations",url:"/publish/recommendations",name:"Recommendations"}),(Ye||se)&&ie.push({id:"/publish/meetings",url:"/publish/meetings",name:"Meetings"}),ie.push({id:"/publish/settings",url:Object(h.getPublishSettingsUrl)(ae,{addBase:!0}),name:"Settings"}));else{if((K=ae.child_publications)==null?void 0:K.length)ie.push({id:"/home",url:"/",name:"Home"},...ae.child_publications.sort(z));else if(ae.parent_publication||((Y=ae.sibling_publications)==null?void 0:Y.length)){const ce=[ae,...ae.sibling_publications].sort(z).map(ue=>ue.id===ae.id&&!F.isBulwarkPub(ae)?{id:"/home",url:"/",name:ae.name}:ue);ie.push({id:"/parent",url:Object(h.getBaseUrl)(ae.parent_publication),name:"Home"},...ce)}else ie.push({id:"/home",url:"/",name:"Home"}),ae.podcast_enabled&&ae.show_pub_podcast_tab&&ie.push({id:"/podcast",url:"/podcast",name:"Podcast",isPodcast:!0});for(const ce of Object(l.c)(ae.navigationBarItems||[],{isPodcastActive:ae.podcast_enabled&&ae.show_pub_podcast_tab,isChatActive:me&&!Object(m.isAndroid)(),isMeetingsActive:Ye}).filter(ue=>!ue.is_hidden)){const ue=Object(l.b)(ce);ce.section?ie.push(ce.section):ie.push({id:Object(h.getNavigationBarItemUrl)(ae.parent_publication||ae,ce,{addBase:!1}),url:Object(h.getNavigationBarItemUrl)(ae.parent_publication||ae,ce,{addBase:!ce.standard_key}),name:Object(l.a)(ce),noFollow:!ce.standard_key&&ue==="link"})}}return F.isBulwarkPub(ae)?ie.reduce((ue,pe)=>{if(pe.type==="newsletter"){const $e=ue.find(ne=>ne.name==="Newsletters");return $e?$e.subItems=[...$e.subItems,pe]:ue=[...ue,{name:"Newsletters",subItems:[pe]}],ue}if(pe.type==="podcast"){const $e=ue.find(ne=>ne.name==="Podcasts");return $e?$e.subItems=[...$e.subItems,pe]:ue=[...ue,{name:"Podcasts",subItems:[pe]}],ue}return[...ue,pe]},[]):ie})}componentDidMount(){typeof window!="undefined"&&(window.addEventListener("scroll",this.onScroll),window.addEventListener("click",this.onClick),window.addEventListener("resize",this.onResize),this.onResize(),this.onScroll())}componentWillUnmount(){typeof window!="undefined"&&(window.removeEventListener("scroll",this.onScroll),window.removeEventListener("click",this.onClick),window.removeEventListener("resize",this.onResize))}shouldShowSectionsNavBar(){return!this.props.isPostView&&!this.props.lowChrome&&!this.props.hideSections}isContributor(){return this.props.user&&this.props.user.is_contributor}isSubscribed(){return F.userIsPaidSubscriber(this.props.user)||this.isContributor()}isFreeSubscribed(){return this.props.user&&this.props.user.is_free_subscribed||this.props.freeSignup}render({className:K,user:Y,freeSignup:ee,freeSignupEmail:ae,pub:he,publicationPicker:me,publicationPickerPath:Ye,selectedSectionId:se,lowChrome:ie,hide_subscribe_cta:Ee,isPublishContext:Oe,hideTitle:ce,showCustomerSupportModeModal:ue,signupForFreeVariant:pe,isMeetingsActive:$e,hideNavbarSearch:ne},{animated:X,buttonsContainerWidth:q,centerTitle:Ne}){const Qe=!me&&(he==null?void 0:he.parent_publication)||he,Ze=typeof window=="undefined";return Object(e.h)("div",{"data-testid":"navbar",className:o()("main-menu",K,{animated:X,"with-nav":this.shouldShowSectionsNavBar(),"low-chrome":ie})},Object(e.h)("div",{className:"main-menu-content",ref:tt=>this.menuContent=tt},Object(e.h)("div",{className:"topbar"},Object(e.h)("div",{className:"topbar-content"},me&&!ie&&(he.parent_publication||he.child_publications.length>0)&&Object(e.h)(i.b,{ref:tt=>this.publicationPicker=tt,className:"publication-picker",noPlace:!0,noTail:!0},[he,he.parent_publication].concat(he.child_publications.concat(he.sibling_publications).sort((tt,Ft)=>tt.name.toLowerCase().localeCompare(Ft.name.toLowerCase()))).filter(tt=>tt).map(tt=>Object(e.h)("a",{href:tt.base_url+(tt.id===he.id?"/":Ye||"/")},tt.name))),!ie&&Object(e.h)(e.Fragment,null,Object(e.h)("div",{class:o()("navbar-logo-container",Qe.logo_url?"":"no-logo"),style:{width:q}},Qe.logo_url&&Object(e.h)("a",{href:Object(h.getBaseUrl)(Qe),onClick:this.onHeadlineClick},Object(e.h)("img",{className:"navbar-logo",src:Object(h.cloudinary)(Qe.logo_url,96)}))),!ce&&Object(e.h)("h1",{className:o()("navbar-title",{"left-align":!Ne,loading:Ze})},Object(e.h)("a",{class:"navbar-title-link",href:Object(h.getBaseUrl)(Qe),ref:tt=>this.largeMenuPubTitle=tt},Qe.logo_url_wide?Object(e.h)("img",{className:`navbar-logo-wordmark ${Qe?"":"substack-logo-wordmark"}`,src:Object(h.cloudinary)(Qe?Qe.logo_url_wide:"/img/substack_wordmark.png?v=2",null,{height:28*2,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),alt:Qe?Qe.name:"Substack"}):Qe.name),!Oe&&he.parent_publication&&Object(e.h)(V,{title:he.name})),Object(e.h)(d.a,{baseRef:tt=>this.buttonsContainer=tt,user:Y,freeSignup:ee,freeSignupEmail:ae,hide_subscribe_cta:Ee,isPublishContext:Oe,pub:he,hideSearch:Oe||!!ne,signupForFreeVariant:pe,showCustomerSupportModeModal:ue,isMeetingsActive:$e}))),this.shouldShowSectionsNavBar()&&Object(e.h)(M,{pub:he,selectedSectionId:se,sectionRawItems:this.getSectionRawItems(),isPublishContext:Oe}))),Object(e.h)("div",{className:"topbar-spacer"}))}}L(G,"contextType",g.a);const V=({title:k})=>{const K=Object(r.b)();return Object(e.h)(u.b,{size:K?14:24,weight:"light",as:"span"},Object(e.h)("span",null," | "),k)}},function($,n,t){"use strict";t.d(n,"c",function(){return m}),t.d(n,"b",function(){return u}),t.d(n,"a",function(){return r});var e=t(11),s=t.n(e),o=t(364),a=t.n(o),c=t(9),l=t.n(c),p=(i,d,b)=>new Promise((w,E)=>{var S=W=>{try{D(b.next(W))}catch(B){E(B)}},P=W=>{try{D(b.throw(W))}catch(B){E(B)}},D=W=>W.done?w(W.value):Promise.resolve(W.value).then(S,P);D((b=b.apply(i,d)).next())});const h={};function m(i,d,b,w,E){return p(this,arguments,function*(S,P,D,{required:W=!1,group:B=!1,gift:f=!1},y){if(!D){y(null);return}D in h||(y({id:D,required:W,loading:!0}),h[D]=yield v(D));const M=h[D],N=M&&M.type==="FREE_TRIAL"&&P&&(yield O(D));N&&N.length&&W?y({id:M&&M.id||D,code:M&&M.code,name:M&&M.name,required:W,error:!0,message:"This coupon has already been redeemed by this user."}):Object(o.isCouponValid)(M,{is_group:B,is_gift:f,paywallFreeTrialEnabled:S.paywall_free_trial_enabled})&&(S.plans||[]).filter(A=>Object(o.isCouponValidForPlan)(M,A)).length>0?y(Object.assign({required:W},M)):y(W?{id:M&&M.id||D,code:M&&M.code,name:M&&M.name,required:W,error:!0,message:"The coupon is not valid or has expired."}:null)})}function g(i){return p(this,null,function*(){let d;try{if(d=(yield s.a.get("/api/v1/coupon").query({freeTrialCoupon:!0})).body,d&&d.length&&i){const w=yield O(d[0].id);if(w&&w.length)throw new c.AppError("User has already redeemed this free trial coupon")}}catch(b){return console.error("Failed to fetch coupons:",b),null}return d.length>0?d[0]:null})}function v(i){return p(this,null,function*(){try{return(yield s.a.get(`/api/v1/coupon/${i}`)).body}catch(d){return console.error("Failed to fetch coupon:",d),null}})}function O(i){return p(this,null,function*(){try{return(yield s.a.get(`/api/v1/coupon_redemption/${i}`).query()).body}catch(d){return console.error("Failed to fetch coupon redemptions:",d),null}})}function u(i){return p(this,null,function*(){try{const b=(yield s.a.get("/api/v1/coupon").query({freeTrialCoupon:!0,includeInvalid:!0})).body;if(!b||b.length===0){const w={name:"Want to keep reading?",description:"Subscribe now to get an exclusive 7-day free trial.",percent_or_trial:"on",trial_period_days:"7",percent_off:"",duration:"",duration_in_months:"",show_redeem_by:!1,redeem_by:"",show_code:!1,is_default:!1,is_group_default:!1,edu_only:!1,yearly_only:!1,group_only:!1,allowed_suffixes_checked:!1,type:"FREE_TRIAL"};yield s.a.post("/api/v1/coupon").send(w)}else b[0].valid===!1?yield s.a.put(`/api/v1/coupon/${b[0].id}`).send(Object.assign({},b[0],{is_default:!1,is_group_default:!1,valid:!0})):console.warn(`Coupon id ${b[0].id} already enabled but attempted to be enabled`);return 0}catch(d){return console.error("Failed to create free trial coupon:",d),1}})}function r(){return p(this,null,function*(){try{const d=(yield s.a.get("/api/v1/coupon").query({freeTrialCoupon:!0})).body;!d||d.length===0?console.error("No free trial coupon exists to disable"):yield s.a.put(`/api/v1/coupon/${d[0].id}`).send(Object.assign({},d[0],{is_default:!1,is_group_default:!1,valid:!1}))}catch(i){return console.error("Failed to disable free trial coupon:",i),null}})}},function($,n,t){"use strict";t.d(n,"a",function(){return c});var e=t(2),s=function(){return(s=Object.assign||function(m){for(var g,v=1,O=arguments.length;v<O;v++)for(var u in g=arguments[v])Object.prototype.hasOwnProperty.call(g,u)&&(m[u]=g[u]);return m}).apply(this,arguments)},o,a,c=Object(e.createContext)(void 0),l="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML",p="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js",h=function(m){var g=m.config,v=m.version,v=v===void 0?3:v,O=m.src,O=O===void 0?v===2?l:p:O,u=m.onStartup,r=m.onLoad,i=m.onError,d=m.typesettingOptions,b=m.renderMode,b=b===void 0?"post":b,w=m.hideUntilTypeset,m=m.children,E=Object(e.useContext)(c);if((E==null?void 0:E.version)!==void 0&&(E==null?void 0:E.version)!==v)throw Error("Cannot nest MathJaxContexts with different versions. MathJaxContexts should not be nested at all but if they are, they cannot have different versions. Stick with one version of MathJax in your app and avoid using more than one MathJaxContext.");if(v===2&&a!==void 0||v===3&&o!==void 0)throw Error("Cannot use MathJax versions 2 and 3 simultaneously in the same app due to how MathJax is set up in the browser; either you have multiple MathJaxContexts with different versions or you have mounted and unmounted MathJaxContexts with different versions. Please stick with one version of MathJax in your app. File an issue in the project Github page if you need this feature.");var S=Object(e.useRef)(E),E=Object(e.useRef)((E==null?void 0:E.version)||null);if(E.current===null)E.current=v;else if(E.current!==v)throw Error("Cannot change version of MathJax in a MathJaxContext after it has mounted. Reload the page with a new version when this must happen.");var P=O||(v===2?l:p);function D(W,B){g&&(window.MathJax=g);var f=document.createElement("script");f.type="text/javascript",f.src=P,f.async=!1,f.addEventListener("load",function(){var y=window.MathJax;u&&u(y),W(y),r&&r()}),f.addEventListener("error",function(y){return B(y)}),document.getElementsByTagName("head")[0].appendChild(f)}return S.current===void 0&&(E={typesettingOptions:d,renderMode:b,hideUntilTypeset:w},v===2?o===void 0&&(typeof window!="undefined"?(o=new Promise(D)).catch(function(W){if(!i)throw Error("Failed to download MathJax version 2 from '".concat(P,"' due to: ").concat(W));i(W)}):(o=Promise.reject()).catch(function(W){})):a===void 0&&(typeof window!="undefined"?(a=new Promise(D)).catch(function(W){if(!i)throw Error("Failed to download MathJax version 3 from '".concat(P,"' due to: ").concat(W));i(W)}):(a=Promise.reject()).catch(function(W){})),S.current=s(s({},E),v===2?{version:2,promise:o}:{version:3,promise:a})),e.default.createElement(c.Provider,{value:S.current},m)};n.b=h},,,,,,function($,n,t){var e=t(626);function s(o,a){if(o==null)return{};var c=e(o,a),l,p;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);for(p=0;p<h.length;p++)l=h[p],!(a.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(o,l)||(c[l]=o[l]))}return c}$.exports=s,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){var e=t(736),s=t(737),o=t(585),a=t(738);function c(l){return e(l)||s(l)||o(l)||a()}$.exports=c,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ArrowLeft",[["line",{x1:"19",y1:"12",x2:"5",y2:"12",key:"17g05t"}],["polyline",{points:"12 19 5 12 12 5",key:"1ksm0z"}]]);n.a=s},function($,n,t){"use strict";t.d(n,"a",function(){return e});function e(s,o){for(const[a,c]of Object.entries(o))c!=null&&(s[a]=c);return s}},function($,n,t){"use strict";t.d(n,"b",function(){return v}),t.d(n,"a",function(){return O});var e=t(0),s=t(1),o=t(229),a=t(3),c=t.n(a),l=t(14),p=t(4),h=t(36),m=t(10),g=t(219);function v({utm_campaign:r,utm_source:i}={}){const[d,b]=Object(s.k)(!1);return{open:()=>b(!0),modal:Object(e.h)(u,{isOpen:d,onClose:()=>b(!1),utm_campaign:r,utm_source:i})}}function O({label:r}){return Object(e.h)(p.a,{gap:16,alignItems:"center",className:g.a.divider},Object(e.h)("hr",{className:g.a.dividerLine}),r&&Object(e.h)(e.Fragment,null,Object(e.h)(m.b.Meta,null,r),Object(e.h)("hr",{className:g.a.dividerLine})))}function u({isOpen:r,onClose:i,utm_campaign:d,utm_source:b}){return Object(e.h)(h.a,{isOpen:r,onClose:i},Object(e.h)(p.b,null,Object(e.h)(p.a,{padding:24,borderBottom:"detail",justifyContent:"space-between",alignItems:"center",className:g.a.modalHeader},Object(e.h)(m.b.H2,null,"Download the Substack app"),Object(e.h)(l.c,{size:40,onClick:i,rounded:!0,fill:"borderless","aria-label":"Close"},Object(e.h)(o.a,{size:20}))),Object(e.h)(p.b,{justifyContent:"center",alignItems:"center",gap:32,padding:32},Object(e.h)(m.b.B3,{weight:"semibold"},"Scan the QR code below"),Object(e.h)(p.a,{padding:4,alignItems:"center",className:g.a.qrCode},Object(e.h)("img",{src:Object(a.cloudinary)("/img/app_page/app-store-redirect-qr.jpg",400)})),Object(e.h)(O,{label:"OR"}),Object(e.h)(p.a,{gap:16,justifyContent:"center"},Object(e.h)("a",{className:g.a.appBadge,href:Object(a.getAppStoreUrl)({utm_campaign:d,utm_source:b})},Object(e.h)("img",{src:Object(a.cloudinary)("/img/app_page/app-store.png",160*2),height:48})),Object(e.h)("a",{className:g.a.appBadge,href:Object(a.getPlayStoreUrl)({utm_campaign:d,utm_source:b})},Object(e.h)("img",{src:Object(a.cloudinary)("/img/app_page/google-play.png",160*2),height:48}))))))}},function($,n,t){var e=t(376),s=t(858),o=t(322),a=9007199254740991,c=4294967295,l=Math.min;function p(h,m){if(h=o(h),h<1||h>a)return[];var g=c,v=l(h,c);m=s(m),h-=c;for(var O=e(v,m);++g<h;)m(g);return O}$.exports=p},function($,n,t){"use strict";var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(11),l=t.n(c),p=t(17),h=t(685),m=t(44),g=t(160),v=t(67),O=t.n(v),u=t(8),r=t.n(u),i=(E,S,P)=>new Promise((D,W)=>{var B=M=>{try{y(P.next(M))}catch(N){W(N)}},f=M=>{try{y(P.throw(M))}catch(N){W(N)}},y=M=>M.done?D(M.value):Promise.resolve(M.value).then(B,f);y((P=P.apply(E,S)).next())});const d=({className:E,pub:S,comment:P,onClose:D,onReportSuccess:W})=>{const B=Object(s.j)(null),[f,y]=Object(s.k)(!1),M={Report:0,Confirm:1},[N,A]=Object(s.k)(M.Report),L=R=>i(void 0,null,function*(){if(R===""){alert("Please enter a reason!");return}y(!0);try{yield l.a.post(`/api/v1/comment/${P.id}/report`).send({publication_id:S==null?void 0:S.id,reason:R}),W(),A(M.Confirm)}catch(U){alert(Object(u.getNetworkErrorMessage)(U))}finally{y(!1)}}),C=()=>{var R;(R=B==null?void 0:B.current)==null||R.close()};return Object(s.d)(()=>{var R;(R=B==null?void 0:B.current)==null||R.open()},[]),Object(e.h)(m.a,{className:a()("report-comment-modal",E),ref:B,onClose:D},N===M.Report?Object(e.h)(b,{pub:S,reportComment:L,reporting:f,closeModal:C}):Object(e.h)(w,{pub:S,closeModal:C}))},b=({pub:E,reportComment:S,reporting:P,closeModal:D})=>{const[W,B]=Object(s.k)("");return Object(e.h)(e.Fragment,null,Object(e.h)("h4",null,"Report ",E?`to ${E.name} admins`:"note"),Object(e.h)("p",null,"Thanks for reporting this ",E?"comment":"note","."," ",E?Object(e.h)(e.Fragment,null,"Only the admins of ",Object(e.h)("span",{className:"weight"},E.name)," will see your name and the content of this report."):"Please help us understand the issue."),Object(e.h)(g.a,{placeholder:"Describe why you\u2019re reporting this comment...",maxLines:8,value:W,onInput:f=>B(f.target.value)}),Object(e.h)("div",{className:"buttons"},Object(e.h)(p.b,{className:"secondary",onClick:D},Object(e.h)("span",null,"Cancel")),Object(e.h)(p.b,{className:"primary",onClick:()=>S(W),disabled:W===""||P},Object(e.h)("span",null,P?"Loading...":"Submit"))))},w=({pub:E,closeModal:S})=>Object(e.h)(e.Fragment,null,Object(e.h)(h.default,{stroke:(E==null?void 0:E.theme_var_background_pop)||v.substack_color}),Object(e.h)("h4",null,"Thanks for your report"),E?Object(e.h)("p",null,"The admins of ",Object(e.h)("span",{className:"weight"},E.name)," will review this comment."):Object(e.h)("p",null,"We will review this note."),Object(e.h)("div",{className:"buttons"},Object(e.h)(p.b,{className:"primary",onClick:S},Object(e.h)("span",null,"Done"))));n.a=d},function($,n,t){"use strict";t.d(n,"a",function(){return r});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(622),l=t(804),p=t(805),h=t(16),m=t(35),g=t(47),v={subMenuTrigger:"frontend-components-overflow_menu-module__subMenuTrigger--1ApSs",subMenuItem:"frontend-components-overflow_menu-module__subMenuItem--1ZxGn",disabled:"frontend-components-overflow_menu-module__disabled--2ktZT",logo:"frontend-components-overflow_menu-module__logo--1Yrp9",chevron:"frontend-components-overflow_menu-module__chevron--3dNmA"};const O=10,u=250;function r({className:i,items:d,menuItemClassName:b,selectedMenuItemClassName:w,selectedSlug:E,pub:S}){const P=Object(s.j)(null),[D,W]=Object(s.k)(!1),[B,f]=Object(s.k)(!1);function y(A){const{scrollLeft:L,scrollWidth:C,clientWidth:R}=A;W(L>O),f(C-(R+L)>O)}const M=A=>y(A.target),N=A=>()=>{const{current:L}=P;L&&L.scrollBy({left:A*u,behavior:"smooth"})};return Object(s.d)(()=>{y(P.current)},[]),Object(e.h)("div",{className:a()("overflow-list-container",i)},Object(e.h)("div",{className:a()("section-bar",{scroll:!0,"overflow-left":D,"overflow-right":B})},Object(e.h)("div",{class:"overflow-items",ref:P,onScroll:M},d.map(({label:A,href:L,slug:C,isNative:R,onClick:U,noFollow:Z,subItems:F})=>F?Object(e.h)(m.c,{trigger:Object(e.h)("div",{className:a()("menu-item",{selected:C===E},b,w&&{[w]:C===E})},Object(e.h)(g.a,{className:v.subMenuTrigger,onClick:U,native:R,rel:Z?"nofollow":null},Object(e.h)("span",{className:"overflow-item-text"},A),Object(e.h)(c.a,{className:v.chevron,size:16}))),layerOptions:{placement:"bottom-start",triggerOffset:6},hideOnScroll:!0,useMobileBottomSheet:!0,mobileBottomSheetTitle:A},F.map(({label:z,href:G,slug:V,isNative:k,onClick:K,noFollow:Y,logoUrl:ee})=>{const ae=parseInt(V)===(S==null?void 0:S.id);return Object(e.h)(m.d,{icon:Object(e.h)("img",{className:v.logo,width:20,src:Object(h.cloudinary)(ee||"/img/substack-nomargin.png",40)}),href:G,onClick:K,native:k,rel:Y?"nofollow":void 0,priority:"primary",disabled:ae,className:a()(v.subMenuItem,{[v.disabled]:ae})},z)})):Object(e.h)("div",{className:a()("menu-item",{selected:C===E},b,w&&{[w]:C===E})},Object(e.h)(g.a,{href:L,onClick:U,native:R,rel:Z?"nofollow":null},Object(e.h)("span",{className:"overflow-item-text"},A))))),Object(e.h)("div",{class:"left-button"},Object(e.h)("div",{role:"button",class:"scroll-button-hitbox",onClick:N(-1)},Object(e.h)(l.a,{strokeWidth:1.5}))),Object(e.h)("div",{class:"right-button"},Object(e.h)("div",{role:"button",class:"scroll-button-hitbox",onClick:N(1)},Object(e.h)(p.a,{strokeWidth:1.5})))))}},,,function($,n,t){"use strict";t.d(n,"b",function(){return c}),t.d(n,"a",function(){return p});var e=t(0),s=t(3),o=t(14),a={childPublication:"frontend-main-pub_or_section_list-module__childPublication--3lm0m",details:"frontend-main-pub_or_section_list-module__details--1nIE9",subscribe:"frontend-main-pub_or_section_list-module__subscribe--1TjSF",logo:"frontend-main-pub_or_section_list-module__logo--2SVuW",info:"frontend-main-pub_or_section_list-module__info--wamy7",title:"frontend-main-pub_or_section_list-module__title--1T6la",link:"frontend-main-pub_or_section_list-module__link--7pz1q",description:"frontend-main-pub_or_section_list-module__description--2DsVG"};const c=(h,m)=>({logoUrl:h.podcast_art_url||h.logo_url||Object(s.getDefaultPodcastArtUrl)(),mainClickUrl:Object(s.getPodcastLandingUrl)({pub:h,section:null,addBase:!0}),buttonClickUrl:m,name:h.podcast_title||h.name,description:h.podcast_description||h.hero_text}),l=({logoUrl:h,mainClickUrl:m,buttonClickUrl:g,name:v,description:O,showButton:u,buttonText:r,openInNewTab:i=!1})=>Object(e.h)("div",{className:a.childPublication},h&&Object(e.h)("img",{className:a.logo,src:Object(s.cloudinary)(h,144),alt:`${v} logo`}),Object(e.h)("div",{className:a.details},Object(e.h)("div",{className:a.info},Object(e.h)("div",{className:a.title},Object(e.h)("a",{className:a.link,href:m},v)),Object(e.h)("div",{className:a.description},O)),u&&Object(e.h)(o.a,{priority:"primary",className:a.subscribe,href:g,newTab:i},r))),p=({showButton:h,items:m,openInNewTab:g=!1,buttonText:v})=>Object(e.h)("div",{"data-testid":"child-pub-container"},m.map(O=>Object(e.h)(l,{logoUrl:O.logoUrl,mainClickUrl:O.mainClickUrl,buttonClickUrl:O.buttonClickUrl,name:O.name,description:O.description,buttonText:v,openInNewTab:g,showButton:h})))},,,,function($,n,t){var e=t(138),s=t(240),o=t(73),a=e?e.isConcatSpreadable:void 0;function c(l){return o(l)||s(l)||!!(a&&l&&l[a])}$.exports=c},function($,n){function t(e,s,o,a){for(var c=-1,l=e==null?0:e.length;++c<l;){var p=e[c];s(a,p,o(p),e)}return a}$.exports=t},function($,n,t){var e=t(566);function s(o,a,c,l){return e(o,function(p,h,m){a(l,p,c(p),m)}),l}$.exports=s},function($,n,t){var e=t(566),s=t(173);function o(a,c){var l=-1,p=s(a)?Array(a.length):[];return e(a,function(h,m,g){p[++l]=c(h,m,g)}),p}$.exports=o},function($,n){function t(e,s){var o=e.length;for(e.sort(s);o--;)e[o]=e[o].value;return e}$.exports=t},function($,n,t){var e=t(717);function s(o,a,c){for(var l=-1,p=o.criteria,h=a.criteria,m=p.length,g=c.length;++l<m;){var v=e(p[l],h[l]);if(v){if(l>=g)return v;var O=c[l];return v*(O=="desc"?-1:1)}}return o.index-a.index}$.exports=s},function($,n,t){var e=t(143);function s(o,a){if(o!==a){var c=o!==void 0,l=o===null,p=o===o,h=e(o),m=a!==void 0,g=a===null,v=a===a,O=e(a);if(!g&&!O&&!h&&o>a||h&&m&&v&&!g&&!O||l&&m&&v||!c&&v||!p)return 1;if(!l&&!h&&!O&&o<a||O&&c&&p&&!l&&!h||g&&c&&p||!m&&p||!v)return-1}return 0}$.exports=s},function($,n){function t(e,s,o){switch(o.length){case 0:return e.call(s);case 1:return e.call(s,o[0]);case 2:return e.call(s,o[0],o[1]);case 3:return e.call(s,o[0],o[1],o[2])}return e.apply(s,o)}$.exports=t},function($,n,t){var e=t(720),s=t(579),o=t(180),a=s?function(c,l){return s(c,"toString",{configurable:!0,enumerable:!1,value:e(l),writable:!0})}:o;$.exports=a},function($,n){function t(e){return function(){return e}}$.exports=t},function($,n){var t=800,e=16,s=Date.now;function o(a){var c=0,l=0;return function(){var p=s(),h=e-(p-l);if(l=p,h>0){if(++c>=t)return arguments[0]}else c=0;return a.apply(void 0,arguments)}}$.exports=o},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=a;var e=s(t(306));function s(c){return c&&c.__esModule?c:{default:c}}function o(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(p){return typeof p}:o=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},o(c)}function a(c,l){(0,e.default)(c);var p,h;o(l)==="object"?(p=l.min||0,h=l.max):(p=arguments[1],h=arguments[2]);var m=encodeURI(c).split(/%..|./).length-1;return m>=p&&(typeof h=="undefined"||m<=h)}$.exports=n.default,$.exports.default=n.default},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var e=o(t(306)),s=o(t(581));function o(l){return l&&l.__esModule?l:{default:l}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1};function c(l,p){(0,e.default)(l),p=(0,s.default)(p,a),p.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),p.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var h=l.split("."),m=h[h.length-1];return p.require_tld&&(h.length<2||!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(m)||/\s/.test(m))||!p.allow_numeric_tld&&/^\d+$/.test(m)?!1:h.every(function(g){return!(g.length>63||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(g)||/[\uff01-\uff5e]/.test(g)||/^-|-$/.test(g)||!p.allow_underscores&&/_/.test(g))})}$.exports=n.default,$.exports.default=n.default},function($,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=h;var e=s(t(306));function s(m){return m&&m.__esModule?m:{default:m}}var o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",a="(".concat(o,"[.]){3}").concat(o),c=new RegExp("^".concat(a,"$")),l="(?:[0-9a-fA-F]{1,4})",p=new RegExp("^("+"(?:".concat(l,":){7}(?:").concat(l,"|:)|")+"(?:".concat(l,":){6}(?:").concat(a,"|:").concat(l,"|:)|")+"(?:".concat(l,":){5}(?::").concat(a,"|(:").concat(l,"){1,2}|:)|")+"(?:".concat(l,":){4}(?:(:").concat(l,"){0,1}:").concat(a,"|(:").concat(l,"){1,3}|:)|")+"(?:".concat(l,":){3}(?:(:").concat(l,"){0,2}:").concat(a,"|(:").concat(l,"){1,4}|:)|")+"(?:".concat(l,":){2}(?:(:").concat(l,"){0,3}:").concat(a,"|(:").concat(l,"){1,5}|:)|")+"(?:".concat(l,":){1}(?:(:").concat(l,"){0,4}:").concat(a,"|(:").concat(l,"){1,6}|:)|")+"(?::((?::".concat(l,"){0,5}:").concat(a,"|(?::").concat(l,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function h(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if((0,e.default)(m),g=String(g),!g)return h(m,4)||h(m,6);if(g==="4"){if(!c.test(m))return!1;var v=m.split(".").sort(function(O,u){return O-u});return v[3]<=255}return g==="6"?!!p.test(m):!1}$.exports=n.default,$.exports.default=n.default},function($,n){function t(e,s){for(var o,a=-1,c=e.length;++a<c;){var l=s(e[a]);l!==void 0&&(o=o===void 0?l:o+l)}return o}$.exports=t},function($,n,t){"use strict";n.__esModule=!0;var e=t(2),s=l(e),o=t(582),a=c(o);function c(i){if(i&&i.__esModule)return i;var d={};if(i!=null)for(var b in i)Object.prototype.hasOwnProperty.call(i,b)&&(d[b]=i[b]);return d.default=i,d}function l(i){return i&&i.__esModule?i:{default:i}}function p(i,d){if(!(i instanceof d))throw new TypeError("Cannot call a class as a function")}function h(i,d){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:i}function m(i,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);i.prototype=Object.create(d&&d.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(i,d):i.__proto__=d)}var g=a.options,v=g.Options;function O(i,d){for(var b=a.tokenize(i),w=[],E=0,S=0;S<b.length;S++){var P=b[S];if(P.type==="nl"&&d.nl2br){w.push(s.default.createElement("br",{key:"linkified-"+ ++E}));continue}else if(!P.isLink||!d.check(P)){w.push(P.toString());continue}var D=d.resolve(P),W=D.formatted,B=D.formattedHref,f=D.tagName,y=D.className,M=D.target,N=D.attributes,A={key:"linkified-"+ ++E,href:B};if(y&&(A.className=y),M&&(A.target=M),N)for(var L in N)A[L]=N[L];w.push(s.default.createElement(f,A,W))}return w}function u(i,d){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(s.default.Children.count(i.props.children)===0)return i;var w=[];s.default.Children.forEach(i.props.children,function(P){typeof P=="string"?(b=b+1,w.push.apply(w,O(P,d))):s.default.isValidElement(P)?typeof P.type=="string"&&g.contains(d.ignoreTags,P.type.toUpperCase())?w.push(P):w.push(u(P,d,++b)):w.push(P)});var E={key:"linkified-element-"+b};for(var S in i.props)E[S]=i.props[S];return s.default.cloneElement(i,E,w)}var r=function(i){m(d,i);function d(){return p(this,d),h(this,i.apply(this,arguments))}return d.prototype.render=function(){var w={key:"linkified-element-0"};for(var E in this.props)E!=="options"&&E!=="tagName"&&(w[E]=this.props[E]);var S=new v(this.props.options),P=this.props.tagName||"span",D=s.default.createElement(P,w);return u(D,S,0)},d}(s.default.Component);n.default=r},function($,n,t){"use strict";n.__esModule=!0;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},s={defaultProtocol:"http",events:null,format:c,formatHref:c,nl2br:!1,tagName:"a",target:l,validate:!0,ignoreTags:[],attributes:null,className:"linkified"};n.defaults=s,n.Options=o,n.contains=a;function o(p){p=p||{},this.defaultProtocol=p.hasOwnProperty("defaultProtocol")?p.defaultProtocol:s.defaultProtocol,this.events=p.hasOwnProperty("events")?p.events:s.events,this.format=p.hasOwnProperty("format")?p.format:s.format,this.formatHref=p.hasOwnProperty("formatHref")?p.formatHref:s.formatHref,this.nl2br=p.hasOwnProperty("nl2br")?p.nl2br:s.nl2br,this.tagName=p.hasOwnProperty("tagName")?p.tagName:s.tagName,this.target=p.hasOwnProperty("target")?p.target:s.target,this.validate=p.hasOwnProperty("validate")?p.validate:s.validate,this.ignoreTags=[],this.attributes=p.attributes||p.linkAttributes||s.attributes,this.className=p.hasOwnProperty("className")?p.className:p.linkClass||s.className;for(var h=p.hasOwnProperty("ignoreTags")?p.ignoreTags:s.ignoreTags,m=0;m<h.length;m++)this.ignoreTags.push(h[m].toUpperCase())}o.prototype={resolve:function(h){var m=h.toHref(this.defaultProtocol);return{formatted:this.get("format",h.toString(),h),formattedHref:this.get("formatHref",m,h),tagName:this.get("tagName",m,h),className:this.get("className",m,h),target:this.get("target",m,h),events:this.getObject("events",m,h),attributes:this.getObject("attributes",m,h)}},check:function(h){return this.get("validate",h.toString(),h)},get:function(h,m,g){var v=void 0,O=this[h];if(!O)return O;switch(typeof O=="undefined"?"undefined":e(O)){case"function":return O(m,g.type);case"object":return v=O.hasOwnProperty(g.type)?O[g.type]:s[h],typeof v=="function"?v(m,g.type):v}return O},getObject:function(h,m,g){var v=this[h];return typeof v=="function"?v(m,g.type):v}};function a(p,h){for(var m=0;m<p.length;m++)if(p[m]===h)return!0;return!1}function c(p){return p}function l(p,h){return h==="url"?"_blank":null}},function($,n,t){"use strict";n.__esModule=!0,n.start=n.run=n.TOKENS=n.State=void 0;var e=t(583),s=t(377),o=a(s);function a(U){if(U&&U.__esModule)return U;var Z={};if(U!=null)for(var F in U)Object.prototype.hasOwnProperty.call(U,F)&&(Z[F]=U[F]);return Z.default=U,Z}var c="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),l="0123456789".split(""),p="0123456789abcdefghijklmnopqrstuvwxyz".split(""),h=[" ","\f","\r","	","\v","\xA0","\u1680","\u180E"],m=[],g=function(Z){return new e.CharacterState(Z)},v=g(),O=g(s.NUM),u=g(s.DOMAIN),r=g(),i=g(s.WS);v.on("@",g(s.AT)).on(".",g(s.DOT)).on("+",g(s.PLUS)).on("#",g(s.POUND)).on("?",g(s.QUERY)).on("/",g(s.SLASH)).on("_",g(s.UNDERSCORE)).on(":",g(s.COLON)).on("{",g(s.OPENBRACE)).on("[",g(s.OPENBRACKET)).on("<",g(s.OPENANGLEBRACKET)).on("(",g(s.OPENPAREN)).on("}",g(s.CLOSEBRACE)).on("]",g(s.CLOSEBRACKET)).on(">",g(s.CLOSEANGLEBRACKET)).on(")",g(s.CLOSEPAREN)).on("&",g(s.AMPERSAND)).on([",",";","!",'"',"'"],g(s.PUNCTUATION)),v.on(`
`,g(s.NL)).on(h,i),i.on(h,i);for(var d=0;d<c.length;d++){var b=(0,e.stateify)(c[d],v,s.TLD,s.DOMAIN);m.push.apply(m,b)}var w=(0,e.stateify)("file",v,s.DOMAIN,s.DOMAIN),E=(0,e.stateify)("ftp",v,s.DOMAIN,s.DOMAIN),S=(0,e.stateify)("http",v,s.DOMAIN,s.DOMAIN),P=(0,e.stateify)("mailto",v,s.DOMAIN,s.DOMAIN);m.push.apply(m,w),m.push.apply(m,E),m.push.apply(m,S),m.push.apply(m,P);var D=w.pop(),W=E.pop(),B=S.pop(),f=P.pop(),y=g(s.DOMAIN),M=g(s.PROTOCOL),N=g(s.MAILTO);W.on("s",y).on(":",M),B.on("s",y).on(":",M),m.push(y),D.on(":",M),y.on(":",M),f.on(":",N);var A=(0,e.stateify)("localhost",v,s.LOCALHOST,s.DOMAIN);m.push.apply(m,A),v.on(l,O),O.on("-",r).on(l,O).on(p,u),u.on("-",r).on(p,u);for(var L=0;L<m.length;L++)m[L].on("-",r).on(p,u);r.on("-",r).on(l,u).on(p,u),v.defaultTransition=g(s.SYM);var C=function(Z){for(var F=Z.replace(/[A-Z]/g,function(me){return me.toLowerCase()}),z=Z.length,G=[],V=0;V<z;){for(var k=v,K=null,Y=0,ee=null,ae=-1;V<z&&(K=k.next(F[V]));)k=K,k.accepts()?(ae=0,ee=k):ae>=0&&ae++,Y++,V++;if(!(ae<0)){V-=ae,Y-=ae;var he=ee.emit();G.push(new he(Z.substr(V-Y,Y)))}}return G},R=v;n.State=e.CharacterState,n.TOKENS=o,n.run=C,n.start=R},function($,n,t){"use strict";n.__esModule=!0,n.start=n.run=n.TOKENS=n.State=void 0;var e=t(583),s=t(730),o=c(s),a=t(377);function c(Ye){if(Ye&&Ye.__esModule)return Ye;var se={};if(Ye!=null)for(var ie in Ye)Object.prototype.hasOwnProperty.call(Ye,ie)&&(se[ie]=Ye[ie]);return se.default=Ye,se}var l=function(se){return new e.TokenState(se)},p=l(),h=l(),m=l(),g=l(),v=l(),O=l(),u=l(),r=l(s.URL),i=l(),d=l(s.URL),b=l(s.URL),w=l(),E=l(),S=l(),P=l(),D=l(),W=l(s.URL),B=l(s.URL),f=l(s.URL),y=l(s.URL),M=l(),N=l(),A=l(),L=l(),C=l(),R=l(),U=l(s.EMAIL),Z=l(),F=l(s.EMAIL),z=l(s.MAILTOEMAIL),G=l(),V=l(),k=l(),K=l(),Y=l(s.NL);p.on(a.NL,Y).on(a.PROTOCOL,h).on(a.MAILTO,m).on(a.SLASH,g),h.on(a.SLASH,g),g.on(a.SLASH,v),p.on(a.TLD,O).on(a.DOMAIN,O).on(a.LOCALHOST,r).on(a.NUM,O),v.on(a.TLD,b).on(a.DOMAIN,b).on(a.NUM,b).on(a.LOCALHOST,b),O.on(a.DOT,u),C.on(a.DOT,R),u.on(a.TLD,r).on(a.DOMAIN,O).on(a.NUM,O).on(a.LOCALHOST,O),R.on(a.TLD,U).on(a.DOMAIN,C).on(a.NUM,C).on(a.LOCALHOST,C),r.on(a.DOT,u),U.on(a.DOT,R),r.on(a.COLON,i).on(a.SLASH,b),i.on(a.NUM,d),d.on(a.SLASH,b),U.on(a.COLON,Z),Z.on(a.NUM,F);var ee=[a.DOMAIN,a.AT,a.LOCALHOST,a.NUM,a.PLUS,a.POUND,a.PROTOCOL,a.SLASH,a.TLD,a.UNDERSCORE,a.SYM,a.AMPERSAND],ae=[a.COLON,a.DOT,a.QUERY,a.PUNCTUATION,a.CLOSEBRACE,a.CLOSEBRACKET,a.CLOSEANGLEBRACKET,a.CLOSEPAREN,a.OPENBRACE,a.OPENBRACKET,a.OPENANGLEBRACKET,a.OPENPAREN];b.on(a.OPENBRACE,E).on(a.OPENBRACKET,S).on(a.OPENANGLEBRACKET,P).on(a.OPENPAREN,D),w.on(a.OPENBRACE,E).on(a.OPENBRACKET,S).on(a.OPENANGLEBRACKET,P).on(a.OPENPAREN,D),E.on(a.CLOSEBRACE,b),S.on(a.CLOSEBRACKET,b),P.on(a.CLOSEANGLEBRACKET,b),D.on(a.CLOSEPAREN,b),W.on(a.CLOSEBRACE,b),B.on(a.CLOSEBRACKET,b),f.on(a.CLOSEANGLEBRACKET,b),y.on(a.CLOSEPAREN,b),M.on(a.CLOSEBRACE,b),N.on(a.CLOSEBRACKET,b),A.on(a.CLOSEANGLEBRACKET,b),L.on(a.CLOSEPAREN,b),E.on(ee,W),S.on(ee,B),P.on(ee,f),D.on(ee,y),E.on(ae,M),S.on(ae,N),P.on(ae,A),D.on(ae,L),W.on(ee,W),B.on(ee,B),f.on(ee,f),y.on(ee,y),W.on(ae,W),B.on(ae,B),f.on(ae,f),y.on(ae,y),M.on(ee,W),N.on(ee,B),A.on(ee,f),L.on(ee,y),M.on(ae,M),N.on(ae,N),A.on(ae,A),L.on(ae,L),b.on(ee,b),w.on(ee,b),b.on(ae,w),w.on(ae,w),m.on(a.TLD,z).on(a.DOMAIN,z).on(a.NUM,z).on(a.LOCALHOST,z),z.on(ee,z).on(ae,G),G.on(ee,z).on(ae,G);var he=[a.DOMAIN,a.NUM,a.PLUS,a.POUND,a.QUERY,a.UNDERSCORE,a.SYM,a.AMPERSAND,a.TLD];O.on(he,V).on(a.AT,k),r.on(he,V).on(a.AT,k),u.on(he,V),V.on(he,V).on(a.AT,k).on(a.DOT,K),K.on(he,V),k.on(a.TLD,C).on(a.DOMAIN,C).on(a.LOCALHOST,U);var me=function(se){for(var ie=se.length,Ee=0,Oe=[],ce=[];Ee<ie;){for(var ue=p,pe=null,$e=null,ne=0,X=null,q=-1;Ee<ie&&!(pe=ue.next(se[Ee]));)ce.push(se[Ee++]);for(;Ee<ie&&($e=pe||ue.next(se[Ee]));)pe=null,ue=$e,ue.accepts()?(q=0,X=ue):q>=0&&q++,Ee++,ne++;if(q<0)for(var Ne=Ee-ne;Ne<Ee;Ne++)ce.push(se[Ne]);else{ce.length>0&&(Oe.push(new s.TEXT(ce)),ce=[]),Ee-=q,ne-=q;var Qe=X.emit();Oe.push(new Qe(se.slice(Ee-ne,Ee)))}}return ce.length>0&&Oe.push(new s.TEXT(ce)),Oe};n.State=e.TokenState,n.TOKENS=o,n.run=me,n.start=p},function($,n,t){"use strict";n.__esModule=!0,n.URL=n.TEXT=n.NL=n.EMAIL=n.MAILTOEMAIL=n.Base=void 0;var e=t(584),s=t(307),o=t(377);function a(v){return v instanceof o.DOMAIN||v instanceof o.TLD}var c=(0,e.createTokenClass)();c.prototype={type:"token",isLink:!1,toString:function(){for(var O=[],u=0;u<this.v.length;u++)O.push(this.v[u].toString());return O.join("")},toHref:function(){return this.toString()},toObject:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(O)}}};var l=(0,s.inherits)(c,(0,e.createTokenClass)(),{type:"email",isLink:!0}),p=(0,s.inherits)(c,(0,e.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),h=(0,s.inherits)(c,(0,e.createTokenClass)(),{type:"text"}),m=(0,s.inherits)(c,(0,e.createTokenClass)(),{type:"nl"}),g=(0,s.inherits)(c,(0,e.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",u=!1,r=!1,i=this.v,d=[],b=0;i[b]instanceof o.PROTOCOL;)u=!0,d.push(i[b].toString().toLowerCase()),b++;for(;i[b]instanceof o.SLASH;)r=!0,d.push(i[b].toString()),b++;for(;a(i[b]);)d.push(i[b].toString().toLowerCase()),b++;for(;b<i.length;b++)d.push(i[b].toString());return d=d.join(""),u||r||(d=O+"://"+d),d},hasProtocol:function(){return this.v[0]instanceof o.PROTOCOL}});n.Base=c,n.MAILTOEMAIL=l,n.EMAIL=p,n.NL=m,n.TEXT=h,n.URL=g},function($,n){var t=typeof crypto!="undefined"&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&msCrypto.getRandomValues.bind(msCrypto);if(t){var e=new Uint8Array(16);$.exports=function(){return t(e),e}}else{var s=new Array(16);$.exports=function(){for(var a=0,c;a<16;a++)(a&3)==0&&(c=Math.random()*4294967296),s[a]=c>>>((a&3)<<3)&255;return s}}},function($,n){for(var t=[],e=0;e<256;++e)t[e]=(e+256).toString(16).substr(1);function s(o,a){var c=a||0,l=t;return l[o[c++]]+l[o[c++]]+l[o[c++]]+l[o[c++]]+"-"+l[o[c++]]+l[o[c++]]+"-"+l[o[c++]]+l[o[c++]]+"-"+l[o[c++]]+l[o[c++]]+"-"+l[o[c++]]+l[o[c++]]+l[o[c++]]+l[o[c++]]+l[o[c++]]+l[o[c++]]}$.exports=s},function($,n){function t(e){if(Array.isArray(e))return e}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){function t(e,s){var o=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var a=[],c=!0,l=!1,p,h;try{for(o=o.call(e);!(c=(p=o.next()).done)&&(a.push(p.value),!(s&&a.length===s));c=!0);}catch(m){l=!0,h=m}finally{try{!c&&o.return!=null&&o.return()}finally{if(l)throw h}}return a}}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){var e=t(586);function s(o){if(Array.isArray(o))return e(o)}$.exports=s,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){function t(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}$.exports=t,$.exports.default=$.exports,$.exports.__esModule=!0},function($,n,t){var e=t(131),s=t(73),o=t(117),a="[object String]";function c(l){return typeof l=="string"||!s(l)&&o(l)&&e(l)==a}$.exports=c},function($,n){function t(e){for(var s,o=[];!(s=e.next()).done;)o.push(s.value);return o}$.exports=t},function($,n){function t(e){return e.split("")}$.exports=t},function($,n){var t="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=e+s+o,c="\\ufe0e\\ufe0f",l="["+t+"]",p="["+a+"]",h="\\ud83c[\\udffb-\\udfff]",m="(?:"+p+"|"+h+")",g="[^"+t+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",u="\\u200d",r=m+"?",i="["+c+"]?",d="(?:"+u+"(?:"+[g,v,O].join("|")+")"+i+r+")*",b=i+r+d,w="(?:"+[g+p+"?",p,v,O,l].join("|")+")",E=RegExp(h+"(?="+h+")|"+w+b,"g");function S(P){return P.match(E)||[]}$.exports=S},function($,n,t){"use strict";n.byteLength=h,n.toByteArray=m,n.fromByteArray=O;for(var e=[],s=[],o=typeof Uint8Array!="undefined"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=a.length;c<l;++c)e[c]=a[c],s[a.charCodeAt(c)]=c;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;function p(u){var r=u.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return u[r-2]==="="?2:u[r-1]==="="?1:0}function h(u){return u.length*3/4-p(u)}function m(u){var r,i,d,b,w,E=u.length;b=p(u),w=new o(E*3/4-b),i=b>0?E-4:E;var S=0;for(r=0;r<i;r+=4)d=s[u.charCodeAt(r)]<<18|s[u.charCodeAt(r+1)]<<12|s[u.charCodeAt(r+2)]<<6|s[u.charCodeAt(r+3)],w[S++]=d>>16&255,w[S++]=d>>8&255,w[S++]=d&255;return b===2?(d=s[u.charCodeAt(r)]<<2|s[u.charCodeAt(r+1)]>>4,w[S++]=d&255):b===1&&(d=s[u.charCodeAt(r)]<<10|s[u.charCodeAt(r+1)]<<4|s[u.charCodeAt(r+2)]>>2,w[S++]=d>>8&255,w[S++]=d&255),w}function g(u){return e[u>>18&63]+e[u>>12&63]+e[u>>6&63]+e[u&63]}function v(u,r,i){for(var d,b=[],w=r;w<i;w+=3)d=(u[w]<<16)+(u[w+1]<<8)+u[w+2],b.push(g(d));return b.join("")}function O(u){for(var r,i=u.length,d=i%3,b="",w=[],E=16383,S=0,P=i-d;S<P;S+=E)w.push(v(u,S,S+E>P?P:S+E));return d===1?(r=u[i-1],b+=e[r>>2],b+=e[r<<4&63],b+="=="):d===2&&(r=(u[i-2]<<8)+u[i-1],b+=e[r>>10],b+=e[r>>4&63],b+=e[r<<2&63],b+="="),w.push(b),w.join("")}},function($,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(t,e,s,o,a){var c,l,p=a*8-o-1,h=(1<<p)-1,m=h>>1,g=-7,v=s?a-1:0,O=s?-1:1,u=t[e+v];for(v+=O,c=u&(1<<-g)-1,u>>=-g,g+=p;g>0;c=c*256+t[e+v],v+=O,g-=8);for(l=c&(1<<-g)-1,c>>=-g,g+=o;g>0;l=l*256+t[e+v],v+=O,g-=8);if(c===0)c=1-m;else{if(c===h)return l?NaN:(u?-1:1)*(1/0);l=l+Math.pow(2,o),c=c-m}return(u?-1:1)*l*Math.pow(2,c-o)},n.write=function(t,e,s,o,a,c){var l,p,h,m=c*8-a-1,g=(1<<m)-1,v=g>>1,O=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=o?0:c-1,r=o?1:-1,i=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(p=isNaN(e)?1:0,l=g):(l=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-l))<1&&(l--,h*=2),l+v>=1?e+=O/h:e+=O*Math.pow(2,1-v),e*h>=2&&(l++,h/=2),l+v>=g?(p=0,l=g):l+v>=1?(p=(e*h-1)*Math.pow(2,a),l=l+v):(p=e*Math.pow(2,v-1)*Math.pow(2,a),l=0));a>=8;t[s+u]=p&255,u+=r,p/=256,a-=8);for(l=l<<a|p,m+=a;m>0;t[s+u]=l&255,u+=r,l/=256,m-=8);t[s+u-r]|=i*128}},function($,n){var t={}.toString;$.exports=Array.isArray||function(e){return t.call(e)=="[object Array]"}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"ReactionRestackIcon",svgParams:{fill:u.fill,stroke:"none",strokeWidth:u.strokeWidth,width:12,height:12}}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6698 0C11.1283 0 11.5 0.370523 11.5 0.827586V3.93103C11.5 4.3881 11.1283 4.75862 10.6698 4.75862H7.5566C7.0981 4.75862 6.72641 4.3881 6.72641 3.93103C6.72641 3.47397 7.0981 3.10345 7.5566 3.10345H8.50524C7.96283 2.63789 7.30025 2.33242 6.5921 2.22224C5.86005 2.10834 5.11057 2.20802 4.43408 2.50924C3.75758 2.81046 3.18296 3.30036 2.77952 3.91985C2.52986 4.30321 2.01571 4.41223 1.63115 4.16336C1.24658 3.91448 1.13722 3.40194 1.38688 3.01858C1.96478 2.1312 2.78789 1.42945 3.75692 0.997973C4.72596 0.566494 5.79952 0.423719 6.84814 0.586867C7.89675 0.750015 8.87562 1.21212 9.66667 1.91744L9.66862 1.91918L9.83962 2.07263V0.827586C9.83962 0.370523 10.2113 0 10.6698 0ZM0.5 8.06897C0.5 7.6119 0.871688 7.24138 1.33019 7.24138H4.4434C4.9019 7.24138 5.27358 7.6119 5.27358 8.06897C5.27358 8.52603 4.9019 8.89655 4.4434 8.89655H3.49499C4.03735 9.36199 4.69985 9.6674 5.4079 9.77756C6.13996 9.89146 6.88943 9.79178 7.56592 9.49056C8.24242 9.18934 8.81704 8.69944 9.22048 8.07995C9.47014 7.69659 9.98429 7.58757 10.3689 7.83645C10.7534 8.08533 10.8628 8.59786 10.6131 8.98122C10.0352 9.8686 9.21211 10.5704 8.24308 11.0018C7.27404 11.4333 6.20047 11.5761 5.15186 11.4129C4.10325 11.2498 3.12438 10.7877 2.33333 10.0824L2.33143 10.0807L2.16038 9.9272V11.1724C2.16038 11.6295 1.78869 12 1.33019 12C0.871688 12 0.5 11.6295 0.5 11.1724V8.06897Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"AlertCircleIcon",svgParams:{viewBox:"0 0 24 24",height:24,width:24,fill:"none"}}),Object(e.h)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M12 8V12",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M12 16H12.01",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"CrossCircleIcon",svgParams:{viewBox:"0 0 24 24",height:24,width:24,fill:"none"}}),Object(e.h)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M15 9L9 15",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M9 9L15 15",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"EditIcon",svgParams:{viewBox:"0 0 24 24",height:24,width:24,fill:"none"}}),Object(e.h)("path",{d:"M18 2L22 6",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M7.5 20.5L19 9L15 5L3.5 16.5L2 22L7.5 20.5Z",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"LinearIcon",svgParams:{height:50,width:50,fill:"#5E6AD2"}}),Object(e.h)("path",{d:"M41.3,44c0.5-0.4,0.9-0.8,1.3-1.3c9.8-9.8,9.8-25.6,0-35.4c-9.8-9.8-25.6-9.8-35.4,0C6.8,7.8,6.4,8.2,6,8.7   L41.3,44z"}),Object(e.h)("path",{d:"M38.3,46.2L3.8,11.7c-0.7,1.1-1.3,2.2-1.8,3.4L34.9,48C36.1,47.5,37.2,46.9,38.3,46.2z"}),Object(e.h)("path",{d:"M31.1,49.3L0.7,18.9c-0.4,1.5-0.6,3-0.7,4.5L26.6,50C28.1,49.9,29.6,49.7,31.1,49.3z"}),Object(e.h)("path",{d:"M21.1,49.8L0.2,28.9c0.8,5.1,3.1,9.9,7,13.9C11.2,46.6,16.1,49,21.1,49.8z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PaidBadgeIcon",svgParams:{height:24,width:24,viewBox:"0 0 24 24"}}),Object(e.h)("circle",{cx:"12",cy:"11.9999",r:"11.5",stroke:"none"}),Object(e.h)("ellipse",{cx:"9.24894",cy:"9.25035",rx:"3.88838",ry:"3.83996",transform:"rotate(-45 9.24894 9.25035)"}),Object(e.h)("ellipse",{cx:"14.7499",cy:"14.7506",rx:"3.88838",ry:"3.83996",transform:"rotate(-45 14.7499 14.7506)"}),Object(e.h)("ellipse",{rx:"3.83996",ry:"3.88838",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 14.7847 9.21504)"}),Object(e.h)("ellipse",{rx:"3.83996",ry:"3.88838",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 9.21443 14.7848)"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"PinIcon",svgParams:{viewBox:"0 0 24 24",height:24,width:24,fill:"none"}}),Object(e.h)("path",{d:"M9 3V8L7 12V14H17M17 14H12M17 14V12L15 8V3",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M12 21V14",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M9 3V8L7 12V14H17M17 14H12M17 14V12L15 8V3",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M7 3H17",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d}=i,b=O(i,["stroke"]);return Object(e.h)(s.a,v(g({},b),{name:"UserProfileIcon",svgParams:{viewBox:"0 0 24 24",height:24,width:24,fill:"none"}}),Object(e.h)("path",{d:"M19 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V19C21 20.1 20.1 21 19 21Z",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M17 17.5C15.6 16.5 13.9 16 12 16C10.1 16 8.4 16.6 7 17.5",stroke:d,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"CommentBadgeHeartIcon",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)("path",{d:"M20.4134 4.58753C19.9121 4.08434 19.3164 3.68508 18.6606 3.41266C18.0047 3.14023 17.3015 3 16.5914 3C15.8812 3 15.178 3.14023 14.5222 3.41266C13.8663 3.68508 13.2707 4.08434 12.7694 4.58753L12 5.36717L11.2306 4.58753C10.7293 4.08434 10.1337 3.68508 9.47781 3.41266C8.82195 3.14023 8.11878 3 7.40863 3C6.69847 3 5.9953 3.14023 5.33944 3.41266C4.68358 3.68508 4.08793 4.08434 3.58665 4.58753C1.46832 6.70656 1.33842 10.2849 4.00631 13.0037L12 21L19.9937 13.0037C22.6616 10.2849 22.5317 6.70656 20.4134 4.58753Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"CommentBadgePinIcon",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)("path",{d:"M5 14.4709C5 15.3204 5.57723 15.8867 6.45681 15.8867H11.0196V20.0246C11.0196 21.1024 11.7251 22.5 12 22.5C12.2657 22.5 12.9712 21.1024 12.9712 20.0246V15.8867H17.5432C18.4136 15.8867 19 15.3204 19 14.4709C19 12.5709 17.4882 10.6709 15.0236 9.74837L14.7487 5.66529C16.0772 4.91627 17.0759 4.11244 17.5249 3.55524C17.7723 3.23554 17.9005 2.89756 17.9005 2.58699C17.9005 1.96585 17.4149 1.5 16.7094 1.5H7.28141C6.57592 1.5 6.09031 1.96585 6.09031 2.58699C6.09031 2.89756 6.21859 3.23554 6.47513 3.55524C6.91492 4.11244 7.91361 4.91627 9.25131 5.66529L8.96728 9.74837C6.50262 10.6709 5 12.5709 5 14.4709Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"CommentBadgePenIcon",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.58889 3.9704L6.25332 2.32056C6.16709 1.89657 6.49112 1.5 6.92378 1.5H16.9301C17.442 1.5 17.8255 1.96925 17.7234 2.47094L17.4389 3.87C17.3621 4.2472 17.0304 4.51823 16.6455 4.51823H7.25935C6.93405 4.51823 6.65372 4.28918 6.58889 3.9704ZM4.67357 12.2151C6.5326 10.2165 7.65784 7.75994 8.04929 6.22991C8.12323 5.94092 8.37629 5.72559 8.67459 5.72559H15.3334C15.6317 5.72559 15.8847 5.94092 15.9587 6.22991C16.3501 7.75993 17.4754 10.2164 19.3344 12.215C19.5386 12.4346 19.5681 12.7681 19.3936 13.012L12.6044 22.4985V14.098C13.6219 13.8276 14.373 12.8839 14.373 11.7613C14.373 10.4277 13.3133 9.34668 12.0061 9.34668C10.6989 9.34668 9.63916 10.4277 9.63916 11.7613C9.63916 12.8827 10.3886 13.8256 11.4044 14.0971L11.4044 22.5L4.61435 13.012C4.43985 12.7681 4.46936 12.4346 4.67357 12.2151ZM11.1162 11.7619C11.1162 11.2618 11.5136 10.8564 12.0038 10.8564C12.494 10.8564 12.8914 11.2618 12.8914 11.7619C12.8914 12.262 12.494 12.6674 12.0038 12.6674C11.5136 12.6674 11.1162 12.262 11.1162 11.7619Z"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"EmailIcon",svgParams:{height:25,width:25,strokeWidth:0,fill:"#000Z"}}),Object(e.h)("g",null,Object(e.h)("path",{d:"M22.93,7a2.43,2.43,0,0,0-.41-.93A2.61,2.61,0,0,0,20.39,5H4.61A2.61,2.61,0,0,0,2.48,6.1,2.43,2.43,0,0,0,2.07,7h0A2.78,2.78,0,0,0,2,7.61v9.78A2.61,2.61,0,0,0,4.61,20H20.39A2.61,2.61,0,0,0,23,17.39V7.61A2.25,2.25,0,0,0,22.93,7ZM4.61,6H20.39a1.58,1.58,0,0,1,1.26.62l-8.91,5.31a.49.49,0,0,1-.47,0L3.35,6.62A1.58,1.58,0,0,1,4.61,6ZM22,17.39A1.61,1.61,0,0,1,20.39,19H4.61A1.61,1.61,0,0,1,3,17.39V7.58l8.77,5.22a1.48,1.48,0,0,0,1.47,0L22,7.58Z"})));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{color:d="#B6B6B6",height:b=18}=i,w=O(i,["color","height"]);return Object(e.h)(s.a,v(g({},w),{height:b,name:"LockFullIcon",svgParams:{height:18,width:18,viewBox:"0 0 18 18"}}),Object(e.h)("rect",{x:"5.5",y:"2.5",width:"7",height:"13",rx:"3.5",stroke:d,fill:"none"}),Object(e.h)("rect",{x:"3.5",y:"8.5",width:"11",height:"8",rx:"0.5",fill:d,stroke:d}))};n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(788),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideRecommend",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(699),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LudiceArrowLeft",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(775),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideArrowRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(r,i,d)=>i in r?o(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,g=(r,i)=>{for(var d in i||(i={}))p.call(i,d)&&m(r,d,i[d]);if(l)for(var d of l(i))h.call(i,d)&&m(r,d,i[d]);return r},v=(r,i)=>a(r,c(i)),O=(r,i)=>{var d={};for(var b in r)p.call(r,b)&&i.indexOf(b)<0&&(d[b]=r[b]);if(r!=null&&l)for(var b of l(r))i.indexOf(b)<0&&h.call(r,b)&&(d[b]=r[b]);return d};const u=r=>{var i=r,{stroke:d="black",height:b=19,width:w=19}=i,E=O(i,["stroke","height","width"]);return Object(e.h)(s.a,v(g({},E),{name:"AdhocEmailIcon",svgParams:{height:b,width:w,viewBox:"0 0 19 19"}}),Object(e.h)("path",{d:"M3 4C3 3.72386 3.22386 3.5 3.5 3.5H13C13.2761 3.5 13.5 3.72386 13.5 4V12.5C13.5 12.7761 13.2761 13 13 13H3.5C3.22386 13 3 12.7761 3 12.5V4Z",stroke:d}),Object(e.h)("path",{d:"M3.5 4L8.25 9.02499L13 4",stroke:d,"stroke-linecap":"round","stroke-linejoin":"round"}),Object(e.h)("path",{d:"M5 13.5V15C5 15.2761 5.22386 15.5 5.5 15.5H15.3151C15.5913 15.5 15.8151 15.2761 15.8151 15V7C15.8151 6.72386 15.5913 6.5 15.3151 6.5H14",stroke:d}))};n.default=u},,,,function($,n,t){"use strict";t.d(n,"a",function(){return g});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(806),l=t(946),p=t(7),h={dragArea:"frontend-pencraft-FilePicker-module__dragArea--2APmT",dragActive:"frontend-pencraft-FilePicker-module__dragActive--PnBq-",text:"frontend-pencraft-FilePicker-module__text--3utCU",icon:"frontend-pencraft-FilePicker-module__icon--1szaw",browse:"frontend-pencraft-FilePicker-module__browse--2W1OB",file:"frontend-pencraft-FilePicker-module__file--1BQ3Z"},m=(v,O,u)=>new Promise((r,i)=>{var d=E=>{try{w(u.next(E))}catch(S){i(S)}},b=E=>{try{w(u.throw(E))}catch(S){i(S)}},w=E=>E.done?r(E.value):Promise.resolve(E.value).then(d,b);w((u=u.apply(v,O)).next())});const g=({onFileSelected:v,dragCTA:O="Drag file here",dropCTA:u=Object(e.h)("a",{className:h.browse,href:"javascript:void(0)"},"browse"),acceptableTypes:r,dropEvent:i,pickEvent:d,loading:b,className:w,multiple:E=!1,addMode:S=!1})=>{const[P,D]=Object(s.k)(!1),W=Object(s.j)(),B=M=>{M.preventDefault(),D(!0)},f=M=>{M.preventDefault(),D(!1)},y=M=>m(void 0,null,function*(){var N,A,L,C;M.preventDefault(),i&&Object(p.i)(i),D(!1);let R,U;if(((A=(N=M.dataTransfer)==null?void 0:N.items)==null?void 0:A.length)>0){const Z=Array.from(M.dataTransfer.items);for(const F of Z)if(F.kind!=="file"){alert("Please only drag files!");return}R=M.dataTransfer.items[0].getAsFile(),U=Z.map(F=>F.getAsFile())}else if(((C=(L=M.dataTransfer)==null?void 0:L.files)==null?void 0:C.length)>0)R=M.dataTransfer.files[0],U=M.dataTransfer.files;else{alert("Something went wrong!");return}E?yield v(U):yield v(R)});return Object(e.h)(e.Fragment,null,Object(e.h)("div",{className:a()(h.dragArea,w,{[h.dragActive]:P,"test-drag-active":P}),onDragEnter:B,onDragOver:B,onDragLeave:f,onDrop:y,onClick:()=>W.current.click(),"aria-label":"File Picker"},S?Object(e.h)(c.a,{size:20,className:h.icon}):Object(e.h)(l.a,{size:32,className:h.icon}),Object(e.h)("p",{className:h.text},b?"Loading...":P?"Release to upload":S?"Add another image":Object(e.h)(e.Fragment,null,O," or ",u))),Object(e.h)("input",{className:a()(h.file,"file-picker-input"),ref:W,type:"file",name:"file",accept:r,multiple:E,onInput:M=>m(void 0,null,function*(){d&&Object(p.i)(d);const N=M.target.files;N&&N[0]&&(E?yield v(N):yield v(N[0]))})}))}},function($,n,t){"use strict";t.d(n,"a",function(){return A});var e=t(0),s=t(6),o=t.n(s),a=t(126),c=t.n(a),l=t(11),p=t.n(l),h=t(3),m=t.n(h),g=t(16),v=t(9),O=t.n(v),u=t(7),r=t(8),i=t.n(r),d=t(81),b=t(372),w=t(663),E=t(213),S=t(136),P=Object.defineProperty,D=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,f=(L,C,R)=>C in L?P(L,C,{enumerable:!0,configurable:!0,writable:!0,value:R}):L[C]=R,y=(L,C)=>{for(var R in C||(C={}))W.call(C,R)&&f(L,R,C[R]);if(D)for(var R of D(C))B.call(C,R)&&f(L,R,C[R]);return L},M=(L,C,R)=>(f(L,typeof C!="symbol"?C+"":C,R),R),N=(L,C,R)=>new Promise((U,Z)=>{var F=V=>{try{G(R.next(V))}catch(k){Z(k)}},z=V=>{try{G(R.throw(V))}catch(k){Z(k)}},G=V=>V.done?U(V.value):Promise.resolve(V.value).then(F,z);G((R=R.apply(L,C)).next())});class A extends e.Component{constructor(C,R){super(C,R);if(M(this,"onTabClick",U=>Z=>{Z.preventDefault(),this.loadTab(U)}),M(this,"onSearchInput",U=>{this.state.tab.id==="search"&&this.loadTab("search",U.target.value||"")}),M(this,"onSearchKeyDown",U=>{this.state.tab.id==="search"&&U.key==="Escape"&&(U.target.blur(),this.loadTab(this.state.tabs[0].id))}),M(this,"onPostClicked",(U,Z,F,z)=>{Object(u.i)(u.a.ARCHIVE_PAGE_POST_CLICKED,{post_id:Z,tab:this.state.tab.id,rank_in_feed:F,source:z})}),M(this,"onSearchBlur",U=>{this.state.tab.id==="search"&&!U.target.value&&this.loadTab(this.state.tabs[0].id,"")}),M(this,"loadTab",(U,Z)=>N(this,null,function*(){const F=this.state.tabs.find(K=>K.id===U);let z=!1;if(F.id==="search"&&typeof Z=="string"&&F.query!==Z&&(z=!0,F.query=Z,F.posts=null,F.fullyLoaded=!1,F.loading=!1,F.loadingError=null),F.id!==this.state.tab.id?(this.setState({tab:F},()=>{F.id==="search"&&this.searchInput&&(this.searchInput.focus(),this.searchInput.select())}),this.props.stateInUrl&&typeof window!="undefined"&&window.history.replaceState&&window.history.replaceState({},document.title,Object(h.updateQuery)({sort:F.id,search:F.query||null}))):z&&this.props.stateInUrl&&typeof window!="undefined"&&window.history.replaceState&&window.history.replaceState({},document.title,Object(h.updateQuery)({search:F.query||null})),F.loading||F.fullyLoaded)return;if(F.id==="search"&&!F.query){F.posts=[],F.fullyLoaded=!0,this.setState({tabs:this.state.tabs});return}const G=Object(v.randomString)();if(F.loading=G,F.loadingError=null,this.setState({tabs:this.state.tabs}),F.id==="search"&&F.query&&(yield new Promise(K=>setTimeout(K,300)),F.loading!==G))return;!this.state.tabs.find(K=>K.posts||K.fullyLoaded||K.loading||K.loadingError)&&this.props.delayFirstLoad&&(yield new Promise(K=>setTimeout(K,this.props.delayFirstLoad)));const k=this.props.pub?"/api/v1/archive":this.props.profile?"/api/v1/profile-archive":null;try{const K=this.props.maxPosts?this.props.maxPosts*2:this.getFetchLimit(),Y=(yield p.a.get(k).query(y(y(y({sort:F.id==="search"?"new":F.id,search:F.id==="search"?F.query:"",offset:(F.posts||[]).length,limit:this.props.maxPosts?this.props.maxPosts*2:this.getFetchLimit(),type:this.props.isPodcast?"podcast":void 0},this.props.postTagId&&{post_tag_id:this.props.postTagId}),this.props.sectionId&&{section_id:this.props.sectionId}),this.props.profile&&{profile_user_id:this.props.profile.id}))).body;if(F.loading!==G)return;F.posts=F.posts?F.posts.concat(Y):Y,F.fullyLoaded=Y.length<K||this.props.maxPosts&&F.posts.length>=this.props.maxPosts}catch(K){console.error("Failed to load tab:",K),F.loadingError=K}F.loading=!1,this.setState({tabs:this.state.tabs})})),M(this,"onChange",({post:U})=>{!U||(Object(r.stateTransaction)(this,Z=>{let F=!1;const z=Z.tabs.map(G=>G.posts).filter(G=>Array.isArray(G));for(const G of z){const V=G.findIndex(k=>k.id===U.id);V!==-1&&(G[V]=U,F=!0)}F&&this.setState({tabs:Z.tabs})}),this.props.onChange&&this.props.onChange(U))}),!(this.props.pub||this.props.profile))throw new Error("Archive must be loaded for a publication or a profile");this.loadTab=this.loadTab.bind(this),this.state=this.getTabs()}componentDidMount(){this.loadTab(this.state.tab.id)}componentWillUnmount(){this.state.tab.id==="search"&&this.searchInput&&this.searchInput.blur()}componentDidUpdate(C){(C.hideTop!==this.props.hideTop||C.newPosts!==this.props.newPosts)&&this.setState(this.getTabs())}getTabs(){var C,R;let U=[];U.push({id:"new",title:this.props.newTitle||"New",posts:this.props.newPosts,fullyLoaded:Boolean(this.props.maxPosts&&this.props.newPosts)}),(!this.props.newPosts||this.props.newPosts.length>=this.getFetchLimit())&&(this.props.hideTop||U.push({id:"top",title:this.props.topTitle||"Top",posts:this.props.topPosts,fullyLoaded:Boolean(this.props.maxPosts&&this.props.topPosts)}),((C=this.props.pub)==null?void 0:C.community_enabled)&&((R=this.props.pub)==null?void 0:R.has_community_content)&&U.push({id:"community",title:this.props.communityTitle||"Community",posts:this.props.communityPosts,fullyLoaded:Boolean(this.props.maxPosts&&this.props.communityPosts)})),U=this.props.sortTabs&&this.props.sortTabs(U)||U,(this.props.sort==="search"||!(this.props.newPosts&&this.props.newPosts.length<this.getFetchLimit()))&&U.push({id:"search",title:"Search",posts:this.props.searchPosts,fullyLoaded:Boolean(this.props.maxPosts&&this.props.searchPosts),query:this.props.search||"",hidden:!0});const Z=U.find(F=>F.id===this.props.sort)||this.props.search&&U.find(F=>F.id==="search")||U[0];return{tabs:U,tab:Z}}getFetchLimit(){return this.props.maxPosts||12}render({className:C,user:R,pub:U,profile:Z,filterPosts:F,hideCoverImage:z,hideSearchTab:G,hideAuthor:V,showPublicationName:k,showMonthDividers:K,maxPosts:Y,disableInteractive:ee,showPins:ae,pinnedPosts:he,maxTitleLength:me,hideShare:Ye,authorInMeta:se,source:ie,emptyMessage:Ee="No posts",isBelowTheFold:Oe,isPodcast:ce},{tabs:ue,tab:pe}){const $e=K&&pe.id==="new",ne=ue.find(ht=>ht.id==="search"),X=ue.find(ht=>ht.id==="community");let q=Array.isArray(pe.posts)?pe.posts.filter(ht=>!(U&&pe.id==="top"&&ht.top_exclusions.includes(U.id))).filter(ht=>(U==null?void 0:U.section)&&(he==null?void 0:he.length)?!he.find(je=>je.id===ht.id):!0).filter(F||(()=>!0)):[];(U==null?void 0:U.section)&&(he==null?void 0:he.length)&&["new","top"].includes(pe.id)&&(q=[...he,...q]);const Ne=q.length===0,Qe=!q&&!pe.loadingError,Ze=!z&&q.some&&q.some(ht=>ht.cover_image);let tt;Z&&(tt=new Map(Z.publicationUsers.map(ht=>[ht.publication.id,ht.publication])));const Ft=Y?q.slice(0,Y):q,Lt=[];let rn;return Ft.forEach((ht,je)=>{if($e){const Le=c()(ht.post_date).format("MMMM YYYY");Le!==rn&&(je!==0&&Lt.push(Object(e.h)("h3",null,Le)),rn=Le)}Lt.push(Object(e.h)(E.e,{key:ht.id,className:"portable-archive-post",post:ht,pub:U||tt&&tt.get(ht.publication_id),user:R,showDate:!0,showCoverImage:Ze,authorInMeta:Object(v.getBylineUsers)(ht).length<=1&&se!==!1,linkToComments:pe===X,onChange:this.onChange,disableInteractive:ee,showPins:ae,showPublicationName:k,hideAuthor:V,onClick:Le=>this.onPostClicked(Le,ht.id,je,ie),maxTitleLength:me,hideShare:Ye,isBelowTheFold:Oe}))}),Object(e.h)("div",{className:o()("portable-archive",C,{"empty-list":Ne})},Object(e.h)("div",{className:"portable-archive-tabs"},pe===ne?Object(e.h)("div",{className:"portable-archive-search-bar"},Object(e.h)(w.default,{className:"portable-archive-search-bar-icon"}),Object(e.h)("input",{ref:ht=>this.searchInput=ht,className:"portable-archive-search-bar-input",type:"text",placeholder:"Search\u2026",value:pe.query,onKeyDown:this.onSearchKeyDown,onKeyPress:this.onSearchInput,onInput:this.onSearchInput,onChange:this.onSearchInput,onBlur:this.onSearchBlur}),Object(e.h)(d.default,{className:"portable-archive-search-bar-close",onClick:this.onTabClick(ue[0].id)})):Object(e.h)(e.Fragment,null,ue.filter(ht=>!ht.hidden).map(({id:ht,title:je})=>Object(e.h)("a",{className:`portable-archive-tab ${ht}-tab ${pe.id===ht?"active":""}`,onClick:this.onTabClick(ht)},Object(e.h)("span",{className:"portable-archive-tab-content"},je))),ne&&!G&&Object(e.h)("a",{className:"portable-archive-tab search-tab",href:"javascript:void(0)",onClick:this.onTabClick("search")},Object(e.h)(w.default,null)))),Object(e.h)("div",{className:"portable-archive-list"},pe.loadingError?Object(e.h)("p",{className:"portable-archive-empty"},"Failed to load posts"):q.length===0&&!pe.loading?Object(e.h)("p",{className:"portable-archive-empty"},pe.id!=="search"?Ee:pe.query?"No results":`Search ${U?U.name:""}`):Object(e.h)(e.Fragment,null,Lt,!Y&&!Qe&&!pe.loading&&!pe.fullyLoaded&&Object(e.h)(S.a,{threshold:640,onVisible:()=>this.loadTab(pe.id,pe.query)})),pe.loading||Qe?Array.from(new Array(this.getFetchLimit())).map(()=>Object(e.h)(E.f,{pub:U})):Y&&q.length>=Y&&Object(e.h)("a",{className:"portable-archive-all",href:ce?Object(g.getPodcastArchiveUrl)({pub:U,section:U.section,params:{sort:pe.id,search:pe.query}}):Object(h.getArchiveUrl)(U,{params:{sort:pe.id,search:pe.query}}),native:!0},"See all ",Object(e.h)(b.default,{height:12,width:12}))))}}},,,function($,n,t){"use strict";t.d(n,"d",function(){return c}),t.d(n,"a",function(){return l}),t.d(n,"b",function(){return p}),t.d(n,"c",function(){return h});const e=({pub:g,url:v})=>{var O,u;if(!v.includes("api.substack.com"))return null;if(v.includes(`/feed/podcast/${g.id}.rss`))return g.podcast_title||g.name;if(v.includes(`/feed/podcast/${g.id}/s/`)){const r=(u=(O=v.match(/\/feed\/podcast\/\d+\/s\/(?<sectionId>\d+)\.rss/))==null?void 0:O.groups)==null?void 0:u.sectionId;if(!r)return"Unknown section";const i=g.sections.find(d=>d.id===parseInt(r));return i?i.name:"Unknown Section"}return"another podcast"},s=({pub:g,url:v})=>v.includes("api.substack.com")?v.includes(`/feed/podcast/${g.id}/s/`)||v.includes(`/feed/podcast/${g.id}.rss`):!1,o=g=>{if(!g)return{can_syndicate:!1,hover_text:"Cannot find podcast"};if(!g.podcast_enabled)return{can_syndicate:!1,hover_text:"This podcast is not currently enabled."};if(!g.podcast_feed_url)return{can_syndicate:!0,hover_text:null};const v=e({pub:g,url:g.podcast_feed_url});return v?{can_syndicate:!1,hover_text:`This podcast is currently redirecting to ${v}.`}:{can_syndicate:!1,hover_text:`This podcast is currently redirecting to ${g.podcast_feed_url}.`}},a=({pub:g,section:v})=>{var O;if(!v.is_podcast)return{can_syndicate:!1,hover_text:"This section is not currently set up as a podcast."};const u=((O=v.podcastSettings)==null?void 0:O.podcast_feed_url)||null;if(!u)return{can_syndicate:!0,hover_text:null};const r=e({pub:g,url:u});return r?{can_syndicate:!1,hover_text:`This podcast is currently redirecting to ${r}.`}:{can_syndicate:!1,hover_text:`This podcast is currently redirecting to ${u}.`}},c=({pub:g})=>{var v;const O=[];if(g.podcast_enabled||!!g.podcast_title){const u=o(g);O.push({name:g.podcast_title||g.name,description:g.podcast_description||"",can_publish_to:u.can_syndicate,hover_text:u.hover_text,publication_id:g.id,section_id:null})}for(const u of(v=g.sections)!=null?v:[]){if(!u.is_podcast)continue;const r=a({pub:g,section:u});O.push({name:u.name,description:u.description,can_publish_to:r.can_syndicate,hover_text:r.hover_text,publication_id:g.id,section_id:u.id})}return O},l=g=>!g||!g.podcast_enabled?!1:g.podcast_feed_url?!s({pub:g,url:g.podcast_feed_url}):!0,p=({pub:g,section:v})=>{var O;if(!v.is_podcast)return!1;const u=((O=v.podcastSettings)==null?void 0:O.podcast_feed_url)||null;return u?!s({pub:g,url:u}):!0},h=(g,v=0)=>v?m(g,v):g.email_disabled?"none":g.receive_podcast_emails?"all":"allButPodcasts",m=(g,v)=>{var O;return!g.email_settings||!g.email_settings[v]?null:g.email_settings[v]==="disabled"?"none":((O=g.section_podcasts_enabled)==null?void 0:O.includes(v))?"all":"allButPodcasts"}},function($,n,t){"use strict";t.d(n,"a",function(){return l});var e=t(0),s=t(2),o=t(4),a=t(10),c={label:"frontend-pencraft-unstable-InputGroup-module__label--2VXOi"};const l=({className:v,children:O,detail:u,label:r,alignment:i="vertical",error:d=!1})=>{const b=i==="vertical"?p:h;return Object(e.h)(b,{className:v,detail:u,error:d,label:r},s.Children.map(O,w=>Object(s.isValidElement)(w)?Object(e.cloneElement)(w,{error:d}):w))},p=({children:v,className:O,detail:u,error:r,label:i})=>Object(e.h)(o.b,{className:O,gap:8,justifyContent:"start"},Object(e.h)("label",null,Object(e.h)(a.b.InputLabel,{as:"div",color:r?"error":"primary",paddingBottom:8},i),v),u&&Object(e.h)(g,{detail:u,error:r})),h=({children:v,className:O,detail:u,error:r,label:i})=>Object(e.h)(o.c,{className:O,justifyContent:"space-between",alignItems:"center"},Object(e.h)(o.b,{gap:4},i&&Object(e.h)(m,{label:i,error:r}),u&&Object(e.h)(g,{detail:u,error:r})),v),m=({label:v,error:O})=>Object(e.h)(a.b.InputLabel,{className:c.label,color:O?"error":"primary"},v),g=({detail:v,error:O})=>Object(e.h)(a.b.B4,{color:O?"error":"secondary"},v)},function($,n,t){var e=t(143);function s(o,a,c){for(var l=-1,p=o.length;++l<p;){var h=o[l],m=a(h);if(m!=null&&(g===void 0?m===m&&!e(m):c(m,g)))var g=m,v=h}return v}$.exports=s},,,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ArrowRight",[["line",{x1:"5",y1:"12",x2:"19",y2:"12",key:"1smlys"}],["polyline",{points:"12 5 19 12 12 19",key:"sfr3i6"}]]);n.a=s},,,,,function($,n){function t(e,s){return e>s}$.exports=t},function($,n,t){var e=t(444),s=t(215),o=Object.prototype,a=o.hasOwnProperty;function c(l,p,h){var m=l[p];(!(a.call(l,p)&&s(m,h))||h===void 0&&!(p in l))&&e(l,p,h)}$.exports=c},,,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",y1:"14",x2:"21",y2:"3",key:"19d9un"}]]);n.a=s},,,,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);n.a=s},,function($,n,t){"use strict";t.d(n,"a",function(){return p});var e=t(0),s=t(48),o=t(4),a=t(71),c=t(74),l=t(597);const p=({pub:h,user_id:m,user_profile_photo_url:g,children:v})=>Object(s.getConfigFor)("meetings_embed_publication_name")?Object(e.h)(o.b,{gap:20,alignItems:"center",paddingTop:32},Object(e.h)(c.a,{className:l.a.pubLogo,pub:h,size:112}),v):Object(e.h)(o.b,{gap:20,alignItems:"center",paddingTop:32},Object(e.h)("div",{className:l.a.avatarWithPubLogo},Object(e.h)(a.a,{className:l.a.avatar,user:{id:m,photo_url:g},size:112}),(h.logo_url||h.cover_photo_url)&&Object(e.h)(c.a,{className:l.a.pubIcon,pub:h,size:40})),v)},,,,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Unlock",[["rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",key:"biyj2e"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",y1:"11",x2:"10",y2:"17",key:"m9v7hp"}],["line",{x1:"14",y1:"11",x2:"14",y2:"17",key:"23cpt9"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Calendar",[["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2",key:"1dtxiw"}],["line",{x1:"16",y1:"2",x2:"16",y2:"6",key:"18saeg"}],["line",{x1:"8",y1:"2",x2:"8",y2:"6",key:"1u51jw"}],["line",{x1:"3",y1:"10",x2:"21",y2:"10",key:"6sq0yj"}]]);n.a=s},,,,,,function($,n,t){"use strict";t.d(n,"c",function(){return S}),t.d(n,"d",function(){return P}),t.d(n,"b",function(){return D}),t.d(n,"a",function(){return W});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(11),l=t.n(c),p=t(9),h=t.n(p),m=t(7),g=t(244),v=t(8),O=t.n(v),u=t(17),r=t(46),i=t(875),d=t(81),b=t(16);const w=({children:f,dismissKey:y,dismissDurationInSeconds:M,beforeDismiss:N,className:A,level:L="info"}={})=>{const[C,R]=Object(g.a)(y,M,N);if(!C)return Object(e.h)("div",{className:a()("banner",L,A)},f,Object(e.h)(d.default,{width:12,height:12,className:"banner-close",onClick:U=>{U.preventDefault(),U.stopPropagation(),R()}}))};var E=w;const S=()=>(Object(s.d)(()=>{Object(m.i)(m.a.GO_PAID_CTA_SHOWN,{type:"banner"})},[]),Object(e.h)(w,{dismissKey:"go-paid-banner.dismissed",dismissDurationInSeconds:3*h.a,beforeDismiss:()=>{Object(m.i)(m.a.GO_PAID_CTA_DISMISSED,{type:"banner"})}},Object(e.h)(i.default,{stroke:"var(--print_pop)",fill:"var(--print_pop)",strokeWidth:0,className:"go-paid-banner-bell"}),Object(e.h)("a",{href:"/publish/settings#connect",native:!0,onClick:()=>{Object(m.i)(m.a.GO_PAID_CTA_CLICKED,{type:"banner"})}},"Turn on paid subscriptions")," ",Object(e.h)("span",{className:"go-paid-banner-text"},"to get paid for your writing"))),P=({action:f="connect"})=>{const[y,M]=Object(s.k)(!1);if(!y)return Object(e.h)(w,{level:"setup",dismissKey:"setup-twitter-banner.dismissed",beforeDismiss:()=>{Object(m.i)(m.a.SETUP_TWITTER_CTA_DISMISSED,{type:"banner"})}},Object(e.h)("div",{class:"setup-twitter-banner-header"},"Help more readers discover your writing"),Object(e.h)("p",null,"Connect your Twitter account so we can notify your followers about your Substack."),f==="connect"&&Object(e.h)(u.b,{class:"twitter-button centered-icon",onClick:()=>{Object(m.i)(m.a.SETUP_TWITTER_CTA_CONNECT_CLICKED,{type:"banner"}),location.href=Object(b.getConnectTwitterUrl)({type:"connect_pub"})}},"Connect Twitter"),f==="set-discoverable"&&Object(e.h)(r.g,{className:"minimal",action:"/api/v1/twitter/set-discoverable",method:"put",onSuccess:()=>M(!0)},Object(e.h)("input",{type:"hidden",name:"d",value:"true"}),Object(e.h)(u.b,{class:"twitter-button centered-icon",type:"Submit",onClick:()=>Object(m.i)(m.a.SETUP_TWITTER_CTA_SETDISCOVERABLE_CLICKED,{type:"banner"})},"Turn on Discoverability")),Object(e.h)("div",{class:"twitter-permission-notice"},"We never tweet without your explicit permission"))},D=()=>Object(e.h)(w,{level:"coming-soon",dismissKey:"coming-soon-banner.dismissed",beforeDismiss:()=>{l.a.put("/api/v1/publication_settings").send({seen_coming_soon_explainer:!0})}},Object(e.h)("div",{class:"coming-soon-banner-header"},"Welcome to Substack!"),Object(e.h)("br",null),Object(e.h)("p",null,`We've created this "Coming Soon" post for you. To edit it, click the three-dot icon.`),Object(e.h)("br",null),Object(e.h)("p",null,`It's just a placeholder and won't be sent out to your subscribers. To email them, click the "New Post" button.`)),W=({children:f,className:y,level:M="info",onClose:N}={})=>{const[A,L]=Object(s.k)(!1);if(!(A&&M!=="error"))return Object(e.h)("div",{className:a()("banner",M,y)},f,M!=="error"&&Object(e.h)(d.default,{width:12,height:12,className:"banner-close",onClick:C=>{C.preventDefault(),C.stopPropagation(),N&&N(),L(!0)}}))},B=({featureName:f,featureLink:y,preText:M,linkedText:N,postText:A,children:L})=>{Object(s.d)(()=>{Object(m.i)(m.a.FEATURE_ANNOUNCEMENT_BANNER_SHOWN,{type:f})},[f]);const C=Object(v.isMobileBrowser)();return Object(e.h)(w,{level:"new-feature",dismissKey:"new-feature-banner.dismissed",dismissDurationInSeconds:3*h.a},!C&&L,Object(e.h)("p",{className:"new-feature-banner-text"},M," ",Object(e.h)("a",{href:y,native:!0,onClick:()=>{Object(m.i)(m.a.FEATURE_ANNOUNCEMENT_BANNER_CLICKED,{type:f})}},N)," ",A))}},,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ChevronLeft",[["polyline",{points:"15 18 9 12 15 6",key:"kvxz59"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ChevronRight",[["polyline",{points:"9 18 15 12 9 6",key:"1rtp27"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Plus",[["line",{x1:"12",y1:"5",x2:"12",y2:"19",key:"myz83a"}],["line",{x1:"5",y1:"12",x2:"19",y2:"12",key:"1smlys"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",y1:"15",x2:"12",y2:"3",key:"nqo27w"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Mail",[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ArrowUp",[["line",{x1:"12",y1:"19",x2:"12",y2:"5",key:"yrd7g6"}],["polyline",{points:"5 12 12 5 19 12",key:"1y7d7k"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Image",[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",key:"maln0c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Copy",[["rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2",key:"1ma1o8"}],["path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1",key:"pklvoz"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Edit2",[["path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z",key:"2s2c1q"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Edit",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",key:"1cs3r3"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 16 16 12 12 8",key:"1byh5s"}],["line",{x1:"8",y1:"12",x2:"16",y2:"12",key:"1myapg"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("BookmarkMinus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",y1:"2",x2:"12",y2:"15",key:"1sxkij"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",key:"1p50m8"}]]);n.a=s},function($,n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+e)}}n.isValid=function(s){return s&&typeof s.bit!="undefined"&&s.bit>=0&&s.bit<4},n.from=function(s,o){if(n.isValid(s))return s;try{return t(s)}catch(a){return o}}},,,,function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"CreditCardIcon",svgParams:{height:21,width:32}}),Object(e.h)("g",{fill:"none",fillRule:"evenodd"},Object(e.h)("g",{fill:u.fill||"#515e80",stroke:"none"},Object(e.h)("g",{transform:"translate(0 2)"},Object(e.h)("path",{d:"M26.58 19H2.42A2.4 2.4 0 0 1 0 16.62V2.38A2.4 2.4 0 0 1 2.42 0h24.16A2.4 2.4 0 0 1 29 2.38v14.25A2.4 2.4 0 0 1 26.58 19zM10 5.83c0-.46-.35-.83-.78-.83H3.78c-.43 0-.78.37-.78.83v3.34c0 .46.35.83.78.83h5.44c.43 0 .78-.37.78-.83V5.83z",opacity:".2"}),Object(e.h)("path",{d:"M25 15h-3c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1zm-6 0h-3c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1zm-6 0h-3c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1zm-6 0H4c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1z",opacity:".3"})))));n.default=O},,,,,,,function($,n,t){"use strict";t.d(n,"a",function(){return b});var e=t(0),s=t(2),o=t(1),a=t(11),c=t.n(a),l=t(3),p=t.n(l),h=t(9),m=t.n(h),g=t(17),v=t(64),O=t(7),u=(P,D,W)=>new Promise((B,f)=>{var y=A=>{try{N(W.next(A))}catch(L){f(L)}},M=A=>{try{N(W.throw(A))}catch(L){f(L)}},N=A=>A.done?B(A.value):Promise.resolve(A.value).then(y,M);N((W=W.apply(P,D)).next())});const r=(P,D,W,B,{trackOnly:f=!1}={})=>()=>u(void 0,null,function*(){if(Object(O.i)(O.a.RECOMMENDATION_SUBSCRIBE_BUTTON_CLICKED,{source:"recommendations-page",recommended_publication_id:P.id,recommending_publication_id:D.id}),!f)try{yield c.a.post("/api/v1/free").send({email:W.email,source:"recommendations_page",other_publication_id:P.id}),B(P)}catch(y){alert("Something went wrong")}}),i=(P,D,W,{trackOnly:B=!1}={})=>()=>u(void 0,null,function*(){if(Object(O.i)(O.a.RECOMMENDATION_UNSUBSCRIBE_BUTTON_CLICKED,{source:"recommendations-page",recommended_publication_id:P.id,recommending_publication_id:D.id}),!B)try{yield c.a.delete("/api/v1/free").send({publication_id:P.id,source:"recommendations_page"}),W(P)}catch(f){alert("Something went wrong")}}),d=({recommendations:P})=>{if(!P||Object.keys(P).length<=1)return P;const D=JSON.parse(JSON.stringify(P));for(let W=Object.keys(D).length-1;W>0;W--){const B=Math.floor(Math.random()*(W+1)),f=D[W];D[W]=D[B],D[B]=f}return D},b=({pub:P,recommendations:D,allSubscribedPubs:W,fullySubscribedPubs:B,user:f})=>{const y=P.author_photo_url,M=P.author_name,[N,A]=Object(o.k)(W),L=U=>{A([...N,U])},C=U=>{A(N.filter(({id:Z})=>Z!==U.id))},R=Object(s.useMemo)(()=>d({recommendations:D}),[D]);return Object(e.h)("div",{className:"container"},Object(e.h)("div",{className:"recommendations-page-container"},Object(e.h)("h2",null,"Recommended by ",Object(h.getByLine)(P)||P.name),Object(e.h)("div",{className:"recommended-publications-container"},R.map((U,Z)=>{const F=U.recommendedPublication;if(!F)return;const z=`${Object(l.getBaseUrl)(F)}/?utm_source=recommendations_page&utm_campaign=${P.id}`,G=Object(l.getSubscribeUrl)(F,{addBase:!0,utm_source:"recommendations_page"}),V=Object(h.getByLine)(F),k=B.map(({id:K})=>K).includes(F.id);return Object(e.h)("div",{className:"recommended-publications-text-container with-blurb"},Object(e.h)("div",{className:"recommendation-body"},Object(e.h)("div",{className:"publication-content"},Object(e.h)("div",{className:"top-row"},Object(e.h)("a",{className:"left",href:z,onClick:()=>{Object(O.i)(O.a.PUBLICATION_RECOMMENDATION_LINK_CLICKED,{source:"recommendations-page",recommended_publication_id:F.id,recommending_publication_id:P.id})}},Object(e.h)(v.a,{pub:F,size:48,logo_url:F.logo_url||F.author_photo_url,linkify:!1}),Object(e.h)("div",{className:"pub-meta"},Object(e.h)("div",{className:"publication-title"},F.name),!!V&&Object(e.h)("div",{className:"publication-author"},"By ",V))),N.map(({id:K})=>K).includes(F.id)?Object(e.h)(g.b,{onClick:i(F,P,C,{trackOnly:k}),href:k?Object(l.getPubAccountSettingsUrl)(F,{addBase:!0}):null,className:"unsubscribe"},"Subscribed"):Object(e.h)(g.b,{onClick:r(F,P,f,L,{trackOnly:!(f==null?void 0:f.email)}),href:(f==null?void 0:f.email)?null:G},"Subscribe")),Object(e.h)("div",{className:"publication-suggestion-text-area"},(F.editorial_bio||F.hero_text)&&Object(e.h)("div",{className:"publication-description"},F.editorial_bio||F.hero_text)),U.description&&Object(e.h)(w,{content:U.description,author:Object(h.getByLine)(P)||P.name}))))}))))},w=({author:P,content:D})=>Object(e.h)("div",{className:"blurb"},Object(e.h)("p",{className:"blurb-content"},D),Object(e.h)("p",{className:"blurb-author"},"- ",P)),E=({recommendations:P,numRecommendations:D,pub:W,user:B})=>{const f=Object(s.useMemo)(()=>d({recommendations:P}),[P]);return Object(e.h)("div",{className:"home-right-group recommendations"},Object(e.h)("div",{className:"home-right-group-title"},Object(e.h)("a",{href:Object(l.getRecommendationsPageUrl)(W)},"Recommendations"),(B==null?void 0:B.is_admin)?Object(e.h)("a",{href:Object(l.getPublishSettingsRecommendationsUrl)(W),native:!0},"Manage"):D>P.length?Object(e.h)("a",{href:Object(l.getRecommendationsPageUrl)(W),native:!0},"View all ",D):null),f.map(y=>Object(e.h)("div",{className:"home-right-col"},Object(e.h)(S,{recommendation:y,pub:W,signedIn:!!B}))))},S=({recommendation:P,pub:D,signedIn:W})=>{const{recommendedPublication:B}=P,f=Object(l.getPubUrl)(B,{params:{utm_source:"homepage_recommendations",utm_campaign:D.id},signedIn:W}),y=()=>{Object(O.i)(O.a.PUBLICATION_RECOMMENDATION_LINK_CLICKED,{recommending_publication_id:D.id,recommended_publication_id:B.id,source:"homepage-recommendations"})};return Object(e.h)("div",{className:"recommendation-row"},Object(e.h)("div",{className:"left"},Object(e.h)("a",{onClick:y},Object(e.h)(v.a,{pub:B,size:32,logo_url:B.logo_url,href:f,openInNewTab:!0,belowTheFold:!0})),Object(e.h)("div",{className:"pub-meta"},Object(e.h)("a",{href:f,target:"_blank",onClick:y},B.name),Object(e.h)("div",{className:"pub-author"},B.author.name))))};n.b=E},,,,,,function($,n,t){"use strict";var e=typeof Reflect=="object"?Reflect:null,s=e&&typeof e.apply=="function"?e.apply:function(S,P,D){return Function.prototype.apply.call(S,P,D)},o;e&&typeof e.ownKeys=="function"?o=e.ownKeys:Object.getOwnPropertySymbols?o=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:o=function(S){return Object.getOwnPropertyNames(S)};function a(E){console&&console.warn&&console.warn(E)}var c=Number.isNaN||function(S){return S!==S};function l(){l.init.call(this)}$.exports=l,$.exports.once=w,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var p=10;function h(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(E){if(typeof E!="number"||E<0||c(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");p=E}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||c(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function m(E){return E._maxListeners===void 0?l.defaultMaxListeners:E._maxListeners}l.prototype.getMaxListeners=function(){return m(this)},l.prototype.emit=function(S){for(var P=[],D=1;D<arguments.length;D++)P.push(arguments[D]);var W=S==="error",B=this._events;if(B!==void 0)W=W&&B.error===void 0;else if(!W)return!1;if(W){var f;if(P.length>0&&(f=P[0]),f instanceof Error)throw f;var y=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw y.context=f,y}var M=B[S];if(M===void 0)return!1;if(typeof M=="function")s(M,this,P);else for(var N=M.length,A=i(M,N),D=0;D<N;++D)s(A[D],this,P);return!0};function g(E,S,P,D){var W,B,f;if(h(P),B=E._events,B===void 0?(B=E._events=Object.create(null),E._eventsCount=0):(B.newListener!==void 0&&(E.emit("newListener",S,P.listener?P.listener:P),B=E._events),f=B[S]),f===void 0)f=B[S]=P,++E._eventsCount;else if(typeof f=="function"?f=B[S]=D?[P,f]:[f,P]:D?f.unshift(P):f.push(P),W=m(E),W>0&&f.length>W&&!f.warned){f.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=E,y.type=S,y.count=f.length,a(y)}return E}l.prototype.addListener=function(S,P){return g(this,S,P,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(S,P){return g(this,S,P,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(E,S,P){var D={fired:!1,wrapFn:void 0,target:E,type:S,listener:P},W=v.bind(D);return W.listener=P,D.wrapFn=W,W}l.prototype.once=function(S,P){return h(P),this.on(S,O(this,S,P)),this},l.prototype.prependOnceListener=function(S,P){return h(P),this.prependListener(S,O(this,S,P)),this},l.prototype.removeListener=function(S,P){var D,W,B,f,y;if(h(P),W=this._events,W===void 0)return this;if(D=W[S],D===void 0)return this;if(D===P||D.listener===P)--this._eventsCount==0?this._events=Object.create(null):(delete W[S],W.removeListener&&this.emit("removeListener",S,D.listener||P));else if(typeof D!="function"){for(B=-1,f=D.length-1;f>=0;f--)if(D[f]===P||D[f].listener===P){y=D[f].listener,B=f;break}if(B<0)return this;B===0?D.shift():d(D,B),D.length===1&&(W[S]=D[0]),W.removeListener!==void 0&&this.emit("removeListener",S,y||P)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(S){var P,D,W;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete D[S]),this;if(arguments.length===0){var B=Object.keys(D),f;for(W=0;W<B.length;++W)f=B[W],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=D[S],typeof P=="function")this.removeListener(S,P);else if(P!==void 0)for(W=P.length-1;W>=0;W--)this.removeListener(S,P[W]);return this};function u(E,S,P){var D=E._events;if(D===void 0)return[];var W=D[S];return W===void 0?[]:typeof W=="function"?P?[W.listener||W]:[W]:P?b(W):i(W,W.length)}l.prototype.listeners=function(S){return u(this,S,!0)},l.prototype.rawListeners=function(S){return u(this,S,!1)},l.listenerCount=function(E,S){return typeof E.listenerCount=="function"?E.listenerCount(S):r.call(E,S)},l.prototype.listenerCount=r;function r(E){var S=this._events;if(S!==void 0){var P=S[E];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function i(E,S){for(var P=new Array(S),D=0;D<S;++D)P[D]=E[D];return P}function d(E,S){for(;S+1<E.length;S++)E[S]=E[S+1];E.pop()}function b(E){for(var S=new Array(E.length),P=0;P<S.length;++P)S[P]=E[P].listener||E[P];return S}function w(E,S){return new Promise(function(P,D){function W(){B!==void 0&&E.removeListener("error",B),P([].slice.call(arguments))}var B;S!=="error"&&(B=function(y){E.removeListener(S,W),D(y)},E.once("error",B)),E.once(S,W)})}},,,function($,n,t){const e=t(1046),s=t(1047),o=t(1065),a=t(1066);function c(l,p,h,m,g){const v=[].slice.call(arguments,1),O=v.length,u=typeof v[O-1]=="function";if(!u&&!e())throw new Error("Callback required as last argument");if(u){if(O<2)throw new Error("Too few arguments provided");O===2?(g=h,h=p,p=m=void 0):O===3&&(p.getContext&&typeof g=="undefined"?(g=m,m=void 0):(g=m,m=h,h=p,p=void 0))}else{if(O<1)throw new Error("Too few arguments provided");return O===1?(h=p,p=m=void 0):O===2&&!p.getContext&&(m=h,h=p,p=void 0),new Promise(function(r,i){try{const d=s.create(h,m);r(l(d,p,m))}catch(d){i(d)}})}try{const r=s.create(h,m);g(null,l(r,p,m))}catch(r){g(r)}}n.create=s.create,n.toCanvas=c.bind(null,o.render),n.toDataURL=c.bind(null,o.renderToDataURL),n.toString=c.bind(null,function(l,p,h){return a.render(l,h)})},,,,,,,,,,function($,n,t){"use strict";t.d(n,"b",function(){return z}),t.d(n,"c",function(){return G}),t.d(n,"a",function(){return V});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(660),l=t.n(c),p=t(843),h=t.n(p),m=t(661),g=t(3),v=t(16),O=t(89),u=t(9),r=t(108),i=t(701),d=t(689),b=t(45),w=t(8),E=t(4),S=t(36),P=t(10),D=t(274),W=t(49),B={pageContainer:"frontend-substack-PublicationThreadAppLinkPage-module__pageContainer--2gZ8W",layoutTop:"frontend-substack-PublicationThreadAppLinkPage-module__layoutTop--2DQRV",layoutCentered:"frontend-substack-PublicationThreadAppLinkPage-module__layoutCentered--3l8m9",header:"frontend-substack-PublicationThreadAppLinkPage-module__header--2tYyZ",logo:"frontend-substack-PublicationThreadAppLinkPage-module__logo--2085u",footer:"frontend-substack-PublicationThreadAppLinkPage-module__footer--317-p",threadsLinkContainer:"frontend-substack-PublicationThreadAppLinkPage-module__threadsLinkContainer--3JR5W",threadsLinkFallback:"frontend-substack-PublicationThreadAppLinkPage-module__threadsLinkFallback--1N_4X",qrCode:"frontend-substack-PublicationThreadAppLinkPage-module__qrCode--2TvBx",avatarContainer:"frontend-substack-PublicationThreadAppLinkPage-module__avatarContainer--2knX7",activityBadge:"frontend-substack-PublicationThreadAppLinkPage-module__activityBadge--2dzpY",mobile:"frontend-substack-PublicationThreadAppLinkPage-module__mobile--1GG0y",appBadge:"frontend-substack-PublicationThreadAppLinkPage-module__appBadge--EVQJe",webChatLink:"frontend-substack-PublicationThreadAppLinkPage-module__webChatLink---Y_WR"},f=Object.defineProperty,y=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,A=(me,Ye,se)=>Ye in me?f(me,Ye,{enumerable:!0,configurable:!0,writable:!0,value:se}):me[Ye]=se,L=(me,Ye)=>{for(var se in Ye||(Ye={}))M.call(Ye,se)&&A(me,se,Ye[se]);if(y)for(var se of y(Ye))N.call(Ye,se)&&A(me,se,Ye[se]);return me},C=(me,Ye)=>{var se={};for(var ie in me)M.call(me,ie)&&Ye.indexOf(ie)<0&&(se[ie]=me[ie]);if(me!=null&&y)for(var ie of y(me))Ye.indexOf(ie)<0&&N.call(me,ie)&&(se[ie]=me[ie]);return se};function R({children:me,pub:Ye,user:se,showHeader:ie,layoutTop:Ee}){return Object(e.h)("div",{className:a()(B.pageContainer,Ee?B.layoutTop:B.layoutCentered)},Object(e.h)("div",{className:B.header},ie&&Ye&&se&&Object(e.h)(d.a,{pub:Ye,user:se,hideSections:!0,hideTitle:!0})),me)}function U({pub:me,utm_campaign:Ye}){return Object(e.h)(E.b,{alignItems:"center",justifyContent:"center",gap:12},Object(e.h)(ee,{utm_campaign:Ye}),Object(e.h)(P.b.B4,{size:12,color:"secondary",className:B.threadsLinkFallback},"Already have the app? ",Object(e.h)("a",{href:Object(g.getThreadDeepLinkUrl)(me)},"Open now")))}function Z({pub:me,utm_campaign:Ye}){return Object(e.h)(E.b,{alignItems:"center",justifyContent:"center",gap:12},Object(e.h)(ae,{utm_campaign:Ye}),Object(e.h)(P.b.B4,{size:12,color:"secondary",className:B.threadsLinkFallback},"Already have the app? ",Object(e.h)("a",{href:Object(g.getThreadDeepLinkUrl)(me)},"Open now")))}function F({pub:me,communityAction:Ye}){var se,ie;const Ee=Ye?`${Ye.author.name} started a thread`:`Join ${Object(u.possessive)(me.author_name)} subscriber chat `,Oe=(Ye==null?void 0:Ye.communityPost)?(se=Ye.communityPost.body)==null?void 0:se.slice(0,128):`Subscribe to ${me.name} and join the conversation.`,ce=((ie=Ye==null?void 0:Ye.communityPost)==null?void 0:ie.type)==="media"&&!!(Ye==null?void 0:Ye.communityPost.media_assets),ue=ce?Ye.communityPost.media_assets[0].url:me.logo_url,pe=Object(v.getPublicationChatAppLinkUrl)({pubKey:me.subdomain});return Object(e.h)(e.Fragment,null,Object(w.setMetaData)({title:Ee,socialTitle:Ee,description:Oe,image:ue,isLargeImage:ce}),Object(e.h)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:l()(Object(m.c)(me,{name:Ee,url:pe,description:Oe,potentialAction:null}),{json:!0,isScriptContext:!0})}}))}function z({publication:me,communityAction:Ye,user:se,showHeader:ie}){return Object(e.h)(R,{pub:me,user:se,showHeader:ie},Object(e.h)(E.b,{flex:"grow",alignSelf:"stretch",justifyContent:"center"},Object(e.h)(E.a,{flex:"grow",justifyContent:"center",paddingBottom:56},Object(e.h)(V,{publication:me,communityAction:Ye,publicationAuthor:me.author||{id:me.author_id||0,name:me.author_name||"",photo_url:me.author_photo_url},utm_campaign:"threads-page"}))))}function G({publication:me,communityAction:Ye,user:se,postId:ie,layoutTop:Ee,appModalOpenByDefault:Oe}){const ce=Object(W.b)(),[ue,pe]=Object(s.k)(!ce&&Oe),$e="thread-page",X=Object(b.c)().getConfigFor("chat_diagnostic_viewer"),q=Object(e.h)(E.b,{gap:8},Object(e.h)(r.e,{href:Object(v.getCommunityPostAppLinkUrl)({postId:ie,utm_source:"chat-post-landing",redirect:"app-store",utm_campaign:$e}),onClick:ce?null:Ne=>{Ne.preventDefault(),pe(!0)}},"Open in app"),X&&Object(e.h)(k,{publication:me,postId:ie,text:"Or join the conversation on web",source:"post-permalink"}));return Object(e.h)(R,{pub:me,user:se,layoutTop:Ee},Object(e.h)(E.b,{flex:"grow",alignSelf:"stretch",justifyContent:"center"},Object(e.h)(E.a,{flex:"grow",justifyContent:"center",paddingBottom:16},Object(e.h)(E.b,{style:{maxWidth:580},flex:"grow",justifyContent:"center"},Ye.communityPost?Object(e.h)(r.d,{communityPost:Ye.communityPost,author:Ye.author,withAttribution:!0,extras:ce?null:q,flex:"auto",isReadOnly:!0}):Object(e.h)(E.b,null,Object(e.h)(r.c,{author:Ye.author,extras:ce?null:q})))),ce&&Object(e.h)(E.b,{className:B.footer,sizing:"border-box",borderTop:"detail-themed",paddingY:16,alignSelf:"stretch"},q),Object(e.h)(F,{pub:me,communityAction:Ye})),Object(e.h)(he,{utm_campaign:$e,isOpen:ue,postId:ie,onClose:()=>pe(!1),subdomain:me.subdomain}))}function V({publication:me,communityAction:Ye,publicationAuthor:se,noFallback:ie,utm_campaign:Ee}){const Oe=Object(O.isMobile)(),ce=Object(O.isAndroid)(),pe=Object(b.c)().getConfigFor("chat_diagnostic_viewer");return Object(e.h)(E.b,{gap:Oe?20:24,justifyContent:"center",alignItems:"center"},Object(e.h)(D.a,{imageUrl:Object(g.getUserPhotoUrl)(se),size:"xxl",border:!0,badge:Object(e.h)("div",{className:a()(B.activityBadge)}),badgePosition:"bottom-right"}),Object(e.h)(E.b,{gap:8},Object(e.h)(P.b.H2,{size:24,align:"center",weight:"bold",color:"pub-primary-text"},"Join ",Object(u.possessive)(se.name)," subscriber chat"),!pe&&Object(e.h)(P.b.B3,{size:16,align:"center",as:"p",color:"pub-secondary-text"},"Available exclusively in the Substack app")),!Oe&&Object(e.h)("div",{className:B.threadsLinkContainer},Object(e.h)(K,{utm_campaign:Ee,subdomain:me.subdomain})),Oe&&(ce?Object(e.h)(Z,{pub:me,utm_campaign:Ee}):Object(e.h)(U,{pub:me,utm_campaign:Ee})),pe&&Object(e.h)(k,{publication:me,source:"pub-nav-bar"}),Object(e.h)(F,{pub:me,communityAction:Ye}))}function k({publication:me,source:Ye,postId:se,text:ie="Or open on web"}){return Object(e.h)("a",{href:Object(v.getWebChatUrl)({pubId:me.id,postId:se,params:{utm_source:Ye}}),className:B.webChatLink},Object(e.h)(P.b.B3,{size:14,weight:"semibold",align:"center",as:"p",color:"pub-secondary-text"},ie))}function K({utm_campaign:me,postId:Ye,subdomain:se}){return Object(e.h)(E.b,{gap:24,alignItems:"center"},Object(e.h)(E.a,{justifyContent:"center"},Object(e.h)(P.b.B4,{as:"span",weight:"bold"},"Scan the QR code below")),Object(e.h)(E.a,{flex:"auto",justifyContent:"center",border:"detail",radius:4,className:B.qrCode},Object(e.h)(Y,{utm_campaign:me,postId:Ye,subdomain:se})),Object(e.h)(i.a,{label:"OR"}),Object(e.h)(E.a,{gap:16,justifyContent:"center"},Object(e.h)(ee,{utm_campaign:me}),Object(e.h)(ae,{utm_campaign:me})))}function Y({utm_campaign:me,postId:Ye,subdomain:se}){const ie=Object(s.j)(),Ee=Ye?Object(v.getCommunityPostAppLinkUrl)({postId:Ye,utm_campaign:me}):Object(v.getPublicationChatAppLinkUrl)({pubKey:se,redirect:"app-store",utm_campaign:me});return Object(s.d)(()=>{const{current:Oe}=ie;Oe&&h.a.toCanvas(Oe,Ee,{width:180,margin:2})},[]),Object(e.h)("canvas",{ref:ie})}function ee({utm_campaign:me}){return Object(e.h)("a",{className:B.appBadge,href:Object(g.getAppStoreUrl)({utm_campaign:me,utm_source:"substack"})},Object(e.h)("img",{src:Object(g.cloudinary)("/img/app_page/app-store.png",400),height:40}))}function ae({utm_campaign:me}){return Object(e.h)("a",{className:B.appBadge,href:Object(g.getPlayStoreUrl)({utm_campaign:me,utm_source:"substack"})},Object(e.h)("img",{src:Object(g.cloudinary)("/img/app_page/google-play.png",400),height:40}))}function he(me){var Ye=me,{postId:se,utm_campaign:ie,subdomain:Ee}=Ye,Oe=C(Ye,["postId","utm_campaign","subdomain"]);return Object(e.h)(S.a,L({},Oe),Object(e.h)(S.d,{title:"Open in the Substack app",includeClose:!0,onClose:Oe.onClose,bottomBorder:!0}),Object(e.h)(E.b,{paddingY:32,paddingX:40},Object(e.h)(K,{utm_campaign:ie,postId:se,subdomain:Ee})))}},,,,,function($,n,t){var e=t(180);function s(o){return typeof o=="function"?o:e}$.exports=s},function($,n,t){var e=t(220),s=t(860),o=t(226);function a(c,l,p){for(var h=-1,m=l.length,g={};++h<m;){var v=l[h],O=e(c,v);p(O,v)&&s(g,o(v,c),O)}return g}$.exports=a},function($,n,t){var e=t(781),s=t(226),o=t(233),a=t(109),c=t(157);function l(p,h,m,g){if(!a(p))return p;h=s(h,p);for(var v=-1,O=h.length,u=O-1,r=p;r!=null&&++v<O;){var i=c(h[v]),d=m;if(i==="__proto__"||i==="constructor"||i==="prototype")return p;if(v!=u){var b=r[i];d=g?g(b,i,r):void 0,d===void 0&&(d=a(b)?b:o(h[v+1])?[]:{})}e(r,i,d),r=r[i]}return p}$.exports=l},,,,,,,,,,,,,,,function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"BellIcon",svgParams:{viewBox:"0 0 20 20",height:20,width:20,fill:"none"}}),Object(e.h)("path",{d:"M3.54717 7.14905L2.80009 7.08297L2.79717 7.11595V7.14905H3.54717ZM2.91038 10.6428L2.24437 10.298H2.24436L2.91038 10.6428ZM1 15.1428H0.25C0.25 15.557 0.585786 15.8928 0.999999 15.8928L1 15.1428ZM1.63679 12.6832L2.30281 13.0281L1.63679 12.6832ZM16.4528 7.14907H17.2028V7.10282L17.1971 7.05691L16.4528 7.14907ZM17.0896 10.8385L17.7556 10.4937L17.0896 10.8385ZM19 15.1429V15.8929C19.1989 15.8929 19.3896 15.8138 19.5303 15.6732C19.6709 15.5325 19.75 15.3418 19.75 15.1429H19ZM18.3632 12.6832L17.6972 13.0281V13.0281L18.3632 12.6832ZM11.8822 16.4286C11.8822 17.4412 11.0709 18.25 10.085 18.25V19.75C11.9127 19.75 13.3822 18.2562 13.3822 16.4286H11.8822ZM10.085 18.25C9.09913 18.25 8.28782 17.4412 8.28782 16.4286H6.78782C6.78782 18.2562 8.25733 19.75 10.085 19.75V18.25ZM8.28782 16.4286V15.1429H6.78782V16.4286H8.28782ZM13.3822 16.4286V15.1429H11.8822V16.4286H13.3822ZM10.085 0.25C8.89057 0.25 7.20474 0.623466 5.74421 1.66361C4.25626 2.7233 3.0324 4.45632 2.80009 7.08297L4.29425 7.21512C4.48647 5.04178 5.4702 3.70027 6.61436 2.88543C7.78595 2.05106 9.15677 1.75 10.085 1.75V0.25ZM2.79717 7.14905C2.79717 7.71546 2.73571 8.36489 2.63006 8.95552C2.52161 9.56174 2.37824 10.0394 2.24437 10.298L3.57639 10.9877C3.81469 10.5275 3.98971 9.87319 4.10662 9.21966C4.22632 8.55054 4.29717 7.81245 4.29717 7.14905H2.79717ZM2.24436 10.298C2.08304 10.6095 1.89068 10.8906 1.66386 11.2217C1.44351 11.5434 1.19295 11.9093 0.97078 12.3384L2.30281 13.0281C2.47688 12.6919 2.67702 12.3969 2.90136 12.0694C3.11923 11.7514 3.36554 11.3949 3.57639 10.9877L2.24436 10.298ZM0.97078 12.3384C0.607085 13.0407 0.428923 13.7345 0.340527 14.2466C0.296032 14.5044 0.27347 14.721 0.261993 14.8761C0.256245 14.9538 0.25325 15.0165 0.25169 15.0617C0.25091 15.0843 0.250487 15.1026 0.25026 15.1162C0.250146 15.123 0.250081 15.1287 0.250045 15.1331C0.250026 15.1353 0.250015 15.1373 0.250009 15.1389C0.250005 15.1397 0.250003 15.1404 0.250002 15.1411C0.250001 15.1414 0.250001 15.1417 0.25 15.142C0.25 15.1422 0.25 15.1424 0.25 15.1424C0.25 15.1426 0.25 15.1428 1 15.1428C1.75 15.1428 1.75 15.143 1.75 15.1432C1.75 15.1433 1.75 15.1434 1.75 15.1435C1.75 15.1438 1.75 15.144 1.75 15.1441C1.75 15.1445 1.75 15.1448 1.75 15.145C1.74999 15.1454 1.74999 15.1456 1.74999 15.1454C1.75 15.1452 1.75001 15.1437 1.75005 15.1412C1.75013 15.1362 1.75033 15.1269 1.7508 15.1135C1.75172 15.0866 1.7537 15.0436 1.75791 14.9868C1.76633 14.8729 1.78357 14.7052 1.81867 14.5018C1.88947 14.0916 2.02971 13.5555 2.30281 13.0281L0.97078 12.3384ZM10.085 1.75C11.0068 1.75 12.2869 2.04746 13.3926 2.87498C14.4767 3.68634 15.4356 5.03759 15.7085 7.24122L17.1971 7.05691C16.8756 4.46053 15.712 2.73725 14.2914 1.67407C12.8924 0.627065 11.2858 0.25 10.085 0.25V1.75ZM15.7028 7.14907C15.7028 7.81063 15.7733 8.59469 15.8917 9.30825C16.0065 9.99938 16.1801 10.7132 16.4236 11.1834L17.7556 10.4937C17.6269 10.245 17.4821 9.72906 17.3715 9.06262C17.2646 8.4186 17.2028 7.71732 17.2028 7.14907H15.7028ZM16.4236 11.1834C16.6493 11.6193 16.9157 11.9442 17.1336 12.2143C17.3558 12.4898 17.5373 12.7194 17.6972 13.0281L19.0292 12.3384C18.7928 11.8818 18.5236 11.5484 18.3011 11.2726C18.0743 10.9913 17.902 10.7765 17.7556 10.4937L16.4236 11.1834ZM17.6972 13.0281C17.9703 13.5555 18.1105 14.0916 18.1813 14.5018C18.2164 14.7052 18.2336 14.8729 18.2421 14.9868C18.2463 15.0436 18.2482 15.0866 18.2492 15.1135C18.2496 15.1269 18.2498 15.1363 18.2499 15.1413C18.25 15.1438 18.25 15.1452 18.25 15.1455C18.25 15.1456 18.25 15.1455 18.25 15.145C18.25 15.1448 18.25 15.1445 18.25 15.1442C18.25 15.144 18.25 15.1438 18.25 15.1436C18.25 15.1435 18.25 15.1433 18.25 15.1432C18.25 15.143 18.25 15.1429 19 15.1429C19.75 15.1429 19.75 15.1427 19.75 15.1425C19.75 15.1424 19.75 15.1422 19.75 15.142C19.75 15.1417 19.75 15.1414 19.75 15.1411C19.75 15.1405 19.75 15.1397 19.75 15.1389C19.7499 15.1373 19.7499 15.1354 19.7499 15.1331C19.7499 15.1287 19.7498 15.123 19.7497 15.1162C19.7495 15.1026 19.7491 15.0843 19.7483 15.0617C19.7467 15.0165 19.7437 14.9539 19.738 14.8762C19.7265 14.721 19.7039 14.5045 19.6594 14.2467C19.571 13.7345 19.3929 13.0408 19.0292 12.3384L17.6972 13.0281ZM0.999999 15.8928L19 15.8929V14.3929L1 14.3928L0.999999 15.8928Z"}));n.default=O},,,,,,function($,n,t){"use strict";t.r(n);var e=t(0),s=t(917),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideMicOff",svgParams:{height:24,width:24,stroke:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},,,,,,,,,,,,,,,,,,,,,function($,n,t){"use strict";t.d(n,"a",function(){return Qt});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(660),l=t.n(c),p=t(661),h=t(3),m=t(651),g=t(145),v=t(110),O=t(8),u=t(369),r=t.n(u),i=t(105),d=t(11),b=t.n(d),w=t(9),E=t(767),S=t(372),P=t(213),D=t(166),W=t(562),B=t.n(W),f=t(183),y=t.n(f),M=t(17),N=t(1024),A=t(7),L=t(14),C=t(36),R=t(10),U=t(188),Z=(Ot,lt,Be)=>new Promise((_e,Ae)=>{var fe=ct=>{try{nt(Be.next(ct))}catch(Xe){Ae(Xe)}},ft=ct=>{try{nt(Be.throw(ct))}catch(Xe){Ae(Xe)}},nt=ct=>ct.done?_e(ct.value):Promise.resolve(ct.value).then(fe,ft);nt((Be=Be.apply(Ot,lt)).next())});function F({showModal:Ot,onClose:lt,existingPub:Be,pub:_e}){return Object(e.h)(C.a,{isOpen:Ot,onClose:lt,className:"twitter-quitter-modal"},Object(e.h)(R.b.H2,{weight:"bold"},Be?"Tell your followers they can find you on Substack.":"Your Substack is live! Tell your followers about it."),Object(e.h)("div",{className:"subtext"},Object(e.h)(R.b.B3,{className:"body",color:"secondary"},"Let your followers on Twitter know you are now writing on Substack.")),Object(e.h)("div",{className:"modal-done"},Object(e.h)(L.a,{onClick:()=>Z(this,null,function*(){Object(A.i)(A.a.SHARE_LINK_CLICKED,{name:"twitter",source:"twitter-quitter"});const Ae=Be?"I'm writing on @substackinc. Subscribe to me there.":"I've started a @substackinc. Subscribe to me there.",fe=Object(h.getBaseUrl)(_e),ft=Object(h.pathWithQuery)("https://twitter.com/share",{url:fe,text:Ae});window.open(ft,"_blank"),lt()}),priority:"primary",style:{backgroundColor:"#1da1f2",width:"100%"},leftIcon:Object(e.h)(U.default,{fill:"white"})},"Share")))}var z=F,G=t(389),V=t(20),K=({podcastSettings:Ot})=>{var lt,Be;return Object(e.h)("div",{className:"section-header"},Object(e.h)("div",{className:"section-logo-and-name"},Ot.artUrl&&Object(e.h)(e.Fragment,null,Object(e.h)("img",{className:"logo desktop-only",src:Object(h.cloudinary)(Ot.artUrl,72*2),alt:(lt=Ot.title)!=null?lt:void 0}),Object(e.h)("img",{className:"logo mobile-only",src:Object(h.cloudinary)(Ot.artUrl,48*2),alt:(Be=Ot.title)!=null?Be:void 0})),Object(e.h)("h2",null,Ot.title)),Object(e.h)("p",null,Ot.description))},Y=t(834),ae=({section:Ot})=>Object(e.h)("div",{className:"section-header"},Object(e.h)("div",{className:"section-logo-and-name"},Ot.logo_url&&Object(e.h)(e.Fragment,null,Object(e.h)("img",{className:"logo desktop-only",src:Object(h.cloudinary)(Ot.logo_url,72*2),alt:Ot.name}),Object(e.h)("img",{className:"logo mobile-only",src:Object(h.cloudinary)(Ot.logo_url,48*2),alt:Ot.name})),Object(e.h)("h2",null,Ot.name)),Object(e.h)("p",null,Ot.description)),he=Object.defineProperty,me=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ie=(Ot,lt,Be)=>lt in Ot?he(Ot,lt,{enumerable:!0,configurable:!0,writable:!0,value:Be}):Ot[lt]=Be,Ee=(Ot,lt)=>{for(var Be in lt||(lt={}))Ye.call(lt,Be)&&ie(Ot,Be,lt[Be]);if(me)for(var Be of me(lt))se.call(lt,Be)&&ie(Ot,Be,lt[Be]);return Ot},Oe=(Ot,lt,Be)=>(ie(Ot,typeof lt!="symbol"?lt+"":lt,Be),Be),ce=(Ot,lt,Be)=>new Promise((_e,Ae)=>{var fe=ct=>{try{nt(Be.next(ct))}catch(Xe){Ae(Xe)}},ft=ct=>{try{nt(Be.throw(ct))}catch(Xe){Ae(Xe)}},nt=ct=>ct.done?_e(ct.value):Promise.resolve(ct.value).then(fe,ft);nt((Be=Be.apply(Ot,lt)).next())});class ue extends e.Component{constructor(lt,Be){super(lt,Be);Oe(this,"loadPinnedPosts",()=>Object(O.stateTransaction)(this,_e=>ce(this,null,function*(){var Ae;if(_e.pinnedPosts)return;let fe=b.a.get("/api/v1/archive").query(Ee({sort:"pinned",sectionId:(Ae=this.props.pub.section)==null?void 0:Ae.id},this.props.pub.multiple_pins?{}:{limit:1})).then(ft=>ft.body);this.setState({pinnedPosts:fe});try{fe=yield fe,fe.length===0&&(fe=null)}catch(ft){console.error("Failed to fetch pinned posts:",ft),fe=null}this.setState({pinnedPosts:fe})}))),Oe(this,"loadLatestChildPosts",()=>Object(O.stateTransaction)(this,(_e,Ae)=>ce(this,null,function*(){if(Ae.pub.child_publications.length===0||_e.latestChildPosts)return;let fe=b.a.get("/api/v1/posts/latest_child_posts").then(ft=>ft.body);try{fe=yield fe,fe.length===0&&(fe=null)}catch(ft){console.error("Failed to fetch child publications:",ft),fe=null}this.setState({latestChildPosts:fe})}))),Oe(this,"loadHomepageLinks",()=>Object(O.stateTransaction)(this,(_e,Ae)=>ce(this,null,function*(){if(!(_e.homepageLinks||Ae.pub.section))try{const fe=yield b.a.get("/api/v1/homepage_links").then(ft=>ft.body);this.setState({homepageLinks:fe})}catch(fe){console.error("Failed to fetch homepage links:",fe)}}))),Oe(this,"onChange",({post:_e})=>{!_e||Object(O.stateTransaction)(this,Ae=>{let fe=!1;const ft=[Ae.pinnedPosts,Ae.latestChildPosts].filter(nt=>Array.isArray(nt));for(const nt of ft){const ct=nt.findIndex(Xe=>Xe.id===_e.id);ct!==-1&&(nt[ct]=_e,fe=!0)}fe&&this.setState({pinnedPosts:Ae.pinnedPosts,latestChildPosts:Ae.latestChildPosts})})}),Oe(this,"_hidePrivatePosts",()=>{const{user:_e,pub:Ae}=this.props;return!(_e&&_e.is_subscribed)&&w.hidePaidPostsFor.includes(Ae==null?void 0:Ae.subdomain)}),this.state={pinnedPosts:this.props.pinnedPosts,latestChildPosts:this.props.latestChildPosts,homepageLinks:this.props.homepageLinks}}componentDidMount(){this.triggerTwitterQuitterOnLoad(),this.loadPinnedPosts(),this.loadLatestChildPosts(),this.loadHomepageLinks(),this.setShowWelcome()}setShowWelcome(){typeof window!="undefined"&&this.props.showWelcome&&(this.setState({showWelcome:!0}),Object(O.removeQueryParam)("showWelcome"))}triggerTwitterQuitterOnLoad(){let lt=!1,Be=!1;Object(h.getQueryItem)("twitter_quitter")&&(window.history.replaceState({},document.title,Object(h.updateQuery)({twitter_quitter:null})),lt=!0),Object(h.getQueryItem)("existing_pub")&&(window.history.replaceState({},document.title,Object(h.updateQuery)({existing_pub:null})),Be=!0),this.setState({showTwitterQuitterModal:lt,existingPubTwitterQuitterModal:Be})}render({user:lt,pub:Be,freeSignup:_e,freeSignupEmail:Ae,newPosts:fe,sort:ft,search:nt,children:ct,disableInteractive:Xe,isPodcast:gt,includePinnedPosts:Tt,recommendations:Ut,numRecommendations:qt},{pinnedPosts:sn,homepageLinks:_n,showTwitterQuitterModal:Hn,existingPubTwitterQuitterModal:wn}){var Un;const{section:bn}=Be;if(bn&&gt&&!bn.is_podcast)return Object(e.h)(V.t.H1,null,"Podcast not found");const cr=!Array.isArray(sn);let fr,ur;const er=sn;cr||(ur=new Set(sn.map(Fe=>Fe.id)),[fr,...sn]=sn);const jr=!bn&&_n&&_n.length>0,wt=Boolean(Ut==null?void 0:Ut.length)&&Be.show_recs_on_homepage,mt=jr||wt;return Object(e.h)(e.Fragment,null,ct,Object(e.h)(z,{showModal:Boolean(Hn),existingPub:Boolean(wn),onClose:()=>this.setState({showTwitterQuitterModal:!1}),pub:Be}),cr?Object(e.h)(P.f,{className:"home-big-post",pub:Be}):!fr&&!bn?Object(e.h)("div",{className:"container"},Object(e.h)("p",{className:"home-coming-soon"},"Coming soon")):[bn&&gt?Object(e.h)(K,{podcastSettings:Object(G.d)({pub:Be,section:bn})}):bn?Object(e.h)(ae,{section:bn}):gt?Object(e.h)(K,{podcastSettings:Object(G.c)({pub:Be})}):Object(e.h)(P.e,{className:"home-big-post",post:fr,pub:Be,user:lt,showDate:!0,showCoverImage:!0,coverImageOptional:!0,authorInMeta:Object(w.getBylineUsers)(fr).length<=1,maxTitleLength:Be.subdomain==="sinocism"?69:92,maxDescriptionLength:Be.subdomain==="sinocism"?240:280,imageAssetSize:900,onChange:this.onChange,disableInteractive:Xe,isBigPost:!0}),Object(e.h)("div",{className:a()("container home-container",{"has-right-column":mt})},Object(e.h)("div",{className:"home-posts"},Array.isArray(sn)&&sn.length>0&&!gt&&Object(e.h)("div",{className:"home-posts-pinned"},sn.map(Fe=>Object(e.h)(P.e,{className:"home-posts-post",post:Fe,pub:Be,user:lt,showDate:!0,showCoverImage:!0,onChange:this.onChange,disableInteractive:Xe}))),Object(e.h)("div",{className:"home-posts-columns"},Object(e.h)(E.a,{className:"home-posts-column-left",user:lt,freeSignup:_e,freeSignupEmail:Ae,pub:Be,maxPosts:7,filterPosts:Fe=>bn?!0:this._hidePrivatePosts()&&Fe.audience!=="everyone"?!1:Tt?!0:Object(w.shouldHidePostFromArchive)(Fe)?!1:!ur.has(Fe.id),pinnedPosts:er,showPins:Boolean(bn),hideCoverImage:mt&&!Be.image_thumbnails_always_enabled,sort:ft,search:nt,newPosts:fe,onChange:this.onChange,stateInUrl:!0,disableInteractive:Xe,sectionId:(Un=Be==null?void 0:Be.section)==null?void 0:Un.id,source:"homepage",emptyMessage:gt&&"No episodes",isBelowTheFold:!0,isPodcast:gt}),mt&&Object(e.h)("div",{className:"home-right-column"},wt&&Object(e.h)(Y.b,{recommendations:Ut,numRecommendations:qt,pub:Be,user:lt}),Object(e.h)($e,{homepageLinks:_n,pub:Be}))))),Object(e.h)("div",{className:"full-container-border mobile-only"})])}}const pe=({group:Ot,items:lt,newTab:Be,pub:_e})=>{const Ae=[];let fe=null;Be&&(fe="_blank",Ae.push("noopener noreferrer")),(!_e||(_e==null?void 0:_e.no_follow))&&Ae.push("ugc nofollow");const ft={rel:Ae.join(" "),target:fe};return Object(e.h)("div",{className:"home-right-group"},Object(e.h)("div",{className:"home-right-group-title"},Ot),lt.map(({title:nt,url:ct,subtitle:Xe,subtitleUrl:gt,edit:Tt,className:Ut})=>Object(e.h)("div",{className:a()("home-right-col",Ut)},Tt?Object(e.h)("div",{className:"home-right-col-editable"},Object(e.h)("a",{className:"home-right-col-title",href:ct,native:!0},nt),Object(e.h)(M.b,{className:"button secondary show-on-hover",href:Tt,title:"edit"},Object(e.h)(N.default,{height:20,width:20,stroke:"#aaa"}))):Object(e.h)("a",Ee({className:"home-right-col-title",href:ct,native:!0},ft),nt),Xe&&Object(e.h)("a",Ee({className:"home-right-col-sub",href:gt||ct,native:!0},ft),Xe))))},$e=({homepageLinks:Ot,pub:lt})=>{const Be=B()(Ot,"group");return y()(Object.keys(Be),Ae=>Ae[0].rank).map(Ae=>Object(e.h)(pe,{group:Ae,items:Be[Ae],pub:lt,newTab:!0}))},ne=Ot=>{if(!Ot)return!0;const lt=r()(Ot.filter(Be=>!!Be).map(Be=>Be.publishedBylines));return lt.every(Be=>Be.name===lt[0].name)};function X({user:Ot,pub:lt,freeSignup:Be,freeSignupEmail:_e,newPosts:Ae,pinnedPosts:fe,topPosts:ft,homepageLinks:nt,recommendations:ct,numRecommendations:Xe,sort:gt,search:Tt,children:Ut,disableInteractive:qt}){var sn;const[_n,Hn]=Object(s.k)(Ae),[wn,Un]=Object(s.k)(fe),[bn,cr]=Object(s.k)(ft),[fr,ur]=Object(s.k)(nt),[er,jr]=Object(s.k)(ct),[wt,mt]=Object(s.k)([]);Object(s.d)(()=>{!_n&&!Ae&&(Hn([]),b.a.get("/api/v1/archive").query({sort:"new",limit:13}).then(({body:At})=>Hn(At))),!wn&&!fe&&(Un([]),b.a.get("/api/v1/archive").query({sort:"pinned"}).then(({body:At})=>Un(At))),!bn&&!ft&&(cr([]),b.a.get("/api/v1/archive").query({sort:"top",limit:6}).then(({body:At})=>cr(At))),!fr&&!nt&&(ur([]),b.a.get("/api/v1/homepage_links").then(({body:At})=>ur(At))),!er&&!ct&&lt.show_recs_on_homepage&&(jr([]),b.a.get(`/api/v1/recommendations/from/${lt.id}?limit=5`).then(({body:At})=>jr(At))),wt||b.a.get("/api/v1/subscription/publications").then(({body:At})=>mt(At))},[_n,wn,bn,fr,Ae,fe,ft,nt,wt,lt.id,lt.show_recs_on_homepage,er,ct]);const Fe=Object(s.a)(({post:At})=>{if(!At)return;const Xt=[{list:bn,setter:cr},{list:wn,setter:Un},{list:_n,setter:Hn}];for(const en of Xt){const $n=en.list.findIndex(Xn=>Xn.id===At.id);if($n!==-1){const Xn=[...en.list];Xn.splice($n,1,At),en.setter(Xn)}}},[_n,wn,bn]),pt=Object(i.useMediaQuery)({query:"only screen and (max-width: 999px)"}),Dt=Object(i.useMediaQuery)({query:"only screen and (max-width: 650px)"}),Jt=new Set((wn||[]).map(At=>At.id)),Gt=(wn||[]).concat((_n||[]).filter(At=>!Jt.has(At.id))),mn=Gt.some(At=>At.cover_image),Cn=Gt.length>5&&!((sn=Gt[0])==null?void 0:sn.cover_image)?5:Gt.length>=4?Math.min(Gt.length-1,4):Gt.length>1&&mn?Gt.length:0,tr=Gt.slice(0,Cn),Zn=Gt.slice(Dt?Math.min(Cn,1):Cn);return Object(e.h)(e.Fragment,null,Ut,tr.length>0?Object(e.h)(Qe,{newPosts:tr,topPosts:bn,pub:lt,user:Ot,onChange:Fe,disableInteractive:qt,hideAuthor:ne(tr.concat(bn))}):null,Object(e.h)("div",{class:"magaziney-bottom"},Zn.length>0&&Object(e.h)(E.a,{class:"magaziney-archive",user:Ot,freeSignup:Be,freeSignupEmail:_e,pub:lt,maxPosts:Dt?11:8,sort:gt,search:Tt,newPosts:Zn,stateInUrl:!0,disableInteractive:qt,hideTop:!Dt,hideAuthor:ne(Zn),maxTitleLength:255,hideShare:!0,authorInMeta:pt?!1:void 0,source:"magazineyhome",isBelowTheFold:!0}),Object(e.h)("div",{class:"magaziney-meta-column"},bn&&bn.length>0&&Object(e.h)(Ze,{topPosts:bn,pub:lt,onChange:Fe,user:Ot,hideAuthor:ne(bn),disableInteractive:qt,authorInMeta:pt?!1:void 0}),Object(e.h)("div",{class:"meta-info-block"},lt.logo_url&&Object(e.h)("img",{class:"meta-pub-logo",src:Object(h.cloudinary)(lt.logo_url,88),alt:lt.name}),Object(e.h)("h4",{class:"meta-pub-name"},lt.name),lt.hero_text&&Object(e.h)("div",{class:"meta-pub-hero-text"},lt.hero_text),!(Ot==null?void 0:Ot.is_subscribed)&&Object(e.h)(D.b,{pub:lt,user:Ot,freeSignup:Be,freeSignupEmail:_e,isStatic:!1,source:"magaziney-home-page"})),Object(e.h)("div",{class:"meta-links"},Boolean(er==null?void 0:er.length)&&lt.show_recs_on_homepage&&Object(e.h)(Y.b,{recommendations:er,numRecommendations:Xe,pub:lt,user:Ot,subscribedPubs:wt}),Object(e.h)($e,{homepageLinks:fr,pub:lt})))))}const q=[680*2,352*2,352*2,288*2,288*2],Ne=[255,125,125,125,125],Qe=({pub:Ot,user:lt,newPosts:Be=[],topPosts:_e=[],hideAuthor:Ae,disableInteractive:fe,onChange:ft})=>{const nt=Be.map((ct,Xe)=>Object(e.h)(P.e,{class:`topper-post spot-${Xe+1}`,post:ct,pub:Ot,user:lt,onChange:ft,showCoverImage:!0,coverImageOptional:!0,hideAuthor:Ae,authorInMeta:!1,maxTitleLength:Ne[Xe],maxDescriptionLength:280,imageAssetSize:q[Xe]||352*2,imageAspectRatio:1.78,disableInteractive:fe,showDate:!0,hideShare:!0,isBelowTheFold:Xe>=2}));return Object(e.h)("div",{class:"magaziney-topper"},Object(e.h)("div",{class:"topper-col left"},nt[1],nt[2]),Object(e.h)("div",{class:"topper-col mid"},nt[0],nt[3],nt[4]),Object(e.h)("div",{class:"topper-col right"},_e&&_e.length>0&&Object(e.h)(Ze,{topPosts:_e,pub:Ot,user:lt,hideAuthor:Ae,onChange:ft})))},Ze=({topPosts:Ot=[],pub:lt,user:Be,hideAuthor:_e,disableInteractive:Ae,authorInMeta:fe,onChange:ft})=>Object(e.h)("div",{class:"most-popular"},Object(e.h)("h3",{class:"most-popular-header"},"Most popular"),Ot.map(nt=>Object(e.h)(P.e,{class:"most-popular-post",post:nt,pub:lt,user:Be,onChange:ft,showCoverImage:!1,authorInMeta:Object(w.getBylineUsers)(nt).length<=1&&fe!==!1,maxTitleLength:255,maxDescriptionLength:280,disableInteractive:Ae,hideDescription:!0,showDate:!1,hideShare:!0,hideAuthor:_e,isBelowTheFold:!0})),Object(e.h)("a",{className:"most-popular-see-all",native:!0,href:Object(h.getArchiveUrl)(lt,{params:{sort:"top"}})},"See all popular ",Object(e.h)(S.default,{height:19,width:19})));var tt=t(396),Ft=t(148),Lt=Object.defineProperty,rn=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,Pe=(Ot,lt,Be)=>lt in Ot?Lt(Ot,lt,{enumerable:!0,configurable:!0,writable:!0,value:Be}):Ot[lt]=Be,de=(Ot,lt)=>{for(var Be in lt||(lt={}))Le.call(lt,Be)&&Pe(Ot,Be,lt[Be]);if(je)for(var Be of je(lt))rt.call(lt,Be)&&Pe(Ot,Be,lt[Be]);return Ot},be=(Ot,lt)=>rn(Ot,ht(lt));function Ie({pub:Ot,user:lt,freeSignup:Be,freeSignupEmail:_e,className:Ae}){return Object(e.h)("div",{className:a()("home-sitemap",Ae)},Object(e.h)("h4",{className:"home-sitemap-title"},Ot.name),Be||lt&&lt.is_free_subscribed?!(lt&&lt.is_subscribed)&&Ot.plans?Object(e.h)("a",{className:"button primary home-sitemap-subscribe subscribe-btn",href:Object(h.getSubscribeUrl)(Ot,{utm_source:"home-sitemap"}),native:!0},Object(w.getSubscribeText)(Ot)):null:Object(e.h)(Ft.a,{className:"home-sitemap-signup-form",source:"home-sitemap",user:lt,pub:Ot,freeSignup:Be,freeSignupEmail:_e,onSuccess:fe=>{fe.body.prompt_to_login?setTimeout(()=>{document.location.href=Object(h.pathWithQuery)("/account/login",{redirect:document.location.href,email:fe.body.email})},30):Ot.plans?document.location.href=Object(h.pathWithQuery)("/subscribe",be(de({next:document.location.href,later:!0,just_signed_up:!0},fe.body.subscription_id&&{subscription_id:fe.body.subscription_id}),{requires_confirmation:fe.body.requires_confirmation?"true":""})):document.location.reload()},onConfirmationRequired:(Ot==null?void 0:Ot.payments_state)==="enabled"?()=>null:void 0,hideLogin:!0,hideTerms:!0}),Object(e.h)("div",{className:"home-sitemap-links"},Object(e.h)("a",{href:Object(h.getAboutUrl)(Ot),native:!!Ot.parent_publication_id},"About"),Object(e.h)("a",{href:Object(h.getBaseArchiveUrl)(Ot)},"Archive"),Ot.has_recommendations&&Object(e.h)("a",{href:Object(h.getRecommendationsPageUrl)(Ot),native:!0},"Recommendations"),Ot.can_have_sitemap&&Object(e.h)("a",{href:Object(h.getSitemapUrl)(Ot),native:!0},"Sitemap")))}var ke=Object.defineProperty,Te=Object.defineProperties,x=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Ue=(Ot,lt,Be)=>lt in Ot?ke(Ot,lt,{enumerable:!0,configurable:!0,writable:!0,value:Be}):Ot[lt]=Be,Ve=(Ot,lt)=>{for(var Be in lt||(lt={}))le.call(lt,Be)&&Ue(Ot,Be,lt[Be]);if(H)for(var Be of H(lt))Ce.call(lt,Be)&&Ue(Ot,Be,lt[Be]);return Ot},bt=(Ot,lt)=>Te(Ot,x(lt)),yt=(Ot,lt)=>{var Be={};for(var _e in Ot)le.call(Ot,_e)&&lt.indexOf(_e)<0&&(Be[_e]=Ot[_e]);if(Ot!=null&&H)for(var _e of H(Ot))lt.indexOf(_e)<0&&Ce.call(Ot,_e)&&(Be[_e]=Ot[_e]);return Be};const Qt=Ot=>{var lt=Ot,{blurbs:Be,freeSignup:_e,freeSignupEmail:Ae,hide_intro_popup:fe,homepageType:ft,isPodcast:nt,noBalanceHeroText:ct,notify_user:Xe,pinnedPosts:gt,pub:Tt,referralCode:Ut,section:qt,showRightColumn:sn,showWelcome:_n,user:Hn}=lt,wn=yt(lt,["blurbs","freeSignup","freeSignupEmail","hide_intro_popup","homepageType","isPodcast","noBalanceHeroText","notify_user","pinnedPosts","pub","referralCode","section","showRightColumn","showWelcome","user"]);const Un=Object(s.j)(!1),bn=Object(s.j)(null);Object(s.d)(()=>{Object(h.getQueryItem)("action")==="share"&&(window.history.replaceState({},document.title,Object(h.updateQuery)({action:null})),Un.current=!0),Un.current&&bn.current&&bn.current.open(),typeof window!="undefined"&&_n&&Object(O.removeQueryParam)("showWelcome")},[_n]),Object(s.d)(()=>{Xe&&typeof window!="undefined"&&Object(v.b)(Xe)},[Xe]);const cr=bt(Ve({},wn),{freeSignup:_e,freeSignupEmail:Ae,pinnedPosts:gt,pub:Tt,user:Hn}),fr=!qt&&gt&&gt.length>0;return Object(e.h)("div",{className:a()("home-page",{magaziney:ft==="magaziney","has-right-column":sn&&ft==="newspaper"})},Object(e.h)(tn,{pub:Tt}),Object(e.h)(Kn,{publication:Tt,section:qt,isPodcast:nt}),ft==="newspaper"&&Object(e.h)(ue,bt(Ve({},cr),{isPodcast:nt,section:qt,showRightColumn:sn})),ft==="magaziney"&&Object(e.h)(X,Ve({},cr)),fr&&Object(e.h)(Ie,{className:ft==="newspaper"?"container":"magaziney",pub:Tt,user:Hn,freeSignup:_e,freeSignupEmail:Ae}),Object(e.h)(g.c,{ref:ur=>bn.current=ur,pub:Tt,user:Hn}),Object(e.h)(m.c,{freeSignup:_e,freeSignupEmail:Ae,user:Hn,post:null,publication:Tt,hidden:fe||Un.current,referralCode:Ut,showOnMount:_n,blurbs:Be,noBalance:ct,isAudio:nt}))},tn=({pub:Ot})=>Object(e.h)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:l()(Object(p.c)(Ot),{json:!0,isScriptContext:!0})}}),Kn=({publication:Ot,section:lt,isPodcast:Be})=>{let _e,Ae;return Be&&Ot.podcast_title?({title:_e}=Object(tt.c)(Ot,Ot.podcast_title),Ae=Ot.podcast_description):lt?{title:_e,description:Ae}=Object(tt.c)(Ot,`${lt.name} | ${Ot.name}`,lt.description):{title:_e,description:Ae}=Object(tt.c)(Ot),Object(O.setMetaData)({title:_e,description:Ae})}},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);n.a=s},,function($,n,t){"use strict";var e=t(2),s=t(691),o=function(){return(o=Object.assign||function(p){for(var h,m=1,g=arguments.length;m<g;m++)for(var v in h=arguments[m])Object.prototype.hasOwnProperty.call(h,v)&&(p[v]=h[v]);return p}).apply(this,arguments)},a=function(p,h){var m={};for(v in p)Object.prototype.hasOwnProperty.call(p,v)&&h.indexOf(v)<0&&(m[v]=p[v]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,v=Object.getOwnPropertySymbols(p);g<v.length;g++)h.indexOf(v[g])<0&&Object.prototype.propertyIsEnumerable.call(p,v[g])&&(m[v[g]]=p[v[g]]);return m},c=function(p){return"Typesetting failed: ".concat(p.message!==void 0?p.message:p.toString())},l=function(p){function h(){var N;D==="every"&&f&&W==="post"&&S.current!==null&&(S.current.style.visibility=(N=(N=w.style)==null?void 0:N.visibility)!=null?N:"visible"),y.current||(D==="first"&&S.current!==null&&(S.current.style.visibility="visible"),v&&v(),y.current=!0),O&&O(),M.current=!1}var m=p.inline,g=m!==void 0&&m,m=p.hideUntilTypeset,v=p.onInitTypeset,O=p.onTypeset,u=p.text,r=p.dynamic,i=p.typesettingOptions,d=p.renderMode,b=p.children,w=a(p,["inline","hideUntilTypeset","onInitTypeset","onTypeset","text","dynamic","typesettingOptions","renderMode","children"]),E=Object(e.useRef)(""),S=Object(e.useRef)(null),P=Object(e.useContext)(s.a),D=m!=null?m:P==null?void 0:P.hideUntilTypeset,W=d!=null?d:P==null?void 0:P.renderMode,B=i!=null?i:P==null?void 0:P.typesettingOptions,f=r!==!1&&(r||!1),y=Object(e.useRef)(!1),M=Object(e.useRef)(!1);return!M.current&&S.current!==null&&f&&D==="every"&&W==="post"&&(S.current.style.visibility="hidden"),(typeof window!="undefined"?e.useLayoutEffect:e.useEffect)(function(){if((f||!y.current)&&S.current!==null){if(!P)throw Error("MathJax was not loaded, did you use the MathJax component outside of a MathJaxContext?");if(W==="pre"){if(!(typeof(N=u)=="string"&&0<N.length))throw Error(`Render mode 'pre' requires text prop to be set and non-empty, which was currently "`.concat(u,'"'));if(!i||!i.fn)throw Error("Render mode 'pre' requires 'typesettingOptions' prop with 'fn' property to be set on MathJax element or in the MathJaxContext");if(P.version===2)throw Error("Render mode 'pre' only available with MathJax 3, and version 2 is currently in use")}W!=="post"&&u===E.current||M.current||(M.current=!0,P.version===3?P.promise.then(function(A){var L;W==="pre"?(L=function(C){E.current=u,A.startup.document.clear(),A.startup.document.updateDocument(),S.current!==null&&(S.current.innerHTML=C.outerHTML),h()},i.fn.endsWith("Promise")?A.startup.promise.then(function(){return A[B.fn](u,o(o({},(B==null?void 0:B.options)||{}),{display:!g}))}).then(L).catch(function(C){throw h(),Error(c(C))}):A.startup.promise.then(function(){var C=A[B.fn](u,o(o({},(B==null?void 0:B.options)||{}),{display:!g}));L(C)}).catch(function(C){throw h(),Error(c(C))})):A.startup.promise.then(function(){return A.typesetClear([S.current]),A.typesetPromise([S.current])}).then(h).catch(function(C){throw h(),Error(c(C))})}).catch(function(A){throw h(),Error(c(A))}):P.promise.then(function(A){A.Hub.Queue(["Typeset",A.Hub,S.current]),A.Hub.Queue(h)}).catch(function(A){throw h(),Error(c(A))}))}var N}),e.default.createElement("span",o({},w,{style:o(o({display:g?"inline":"block"},w.style),{visibility:D?"hidden":(p=w.style)==null?void 0:p.visibility}),ref:S}),b)};n.a=l},function($,n,t){const e=t(823),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];n.getBlocksCount=function(c,l){switch(l){case e.L:return s[(c-1)*4+0];case e.M:return s[(c-1)*4+1];case e.Q:return s[(c-1)*4+2];case e.H:return s[(c-1)*4+3];default:return}},n.getTotalCodewordsCount=function(c,l){switch(l){case e.L:return o[(c-1)*4+0];case e.M:return o[(c-1)*4+1];case e.Q:return o[(c-1)*4+2];case e.H:return o[(c-1)*4+3];default:return}}},function($,n){n.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},function($,n){const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;n.KANJI=new RegExp(s,"g"),n.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),n.BYTE=new RegExp(o,"g"),n.NUMERIC=new RegExp(t,"g"),n.ALPHANUMERIC=new RegExp(e,"g");const a=new RegExp("^"+s+"$"),c=new RegExp("^"+t+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");n.testKanji=function(h){return a.test(h)},n.testNumeric=function(h){return c.test(h)},n.testAlphanumeric=function(h){return l.test(h)}},function($,n){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let s=e.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+e);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(a){return[a,a]}))),s.length===6&&s.push("F","F");const o=parseInt(s.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+s.slice(0,6).join("")}}n.getOptions=function(s){s||(s={}),s.color||(s.color={});const o=typeof s.margin=="undefined"||s.margin===null||s.margin<0?4:s.margin,a=s.width&&s.width>=21?s.width:void 0,c=s.scale||4;return{width:a,scale:a?4:c,margin:o,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},n.getScale=function(s,o){return o.width&&o.width>=s+o.margin*2?o.width/(s+o.margin*2):o.scale},n.getImageWidth=function(s,o){const a=n.getScale(s,o);return Math.floor((s+o.margin*2)*a)},n.qrToImageData=function(s,o,a){const c=o.modules.size,l=o.modules.data,p=n.getScale(c,a),h=Math.floor((c+a.margin*2)*p),m=a.margin*p,g=[a.color.light,a.color.dark];for(let v=0;v<h;v++)for(let O=0;O<h;O++){let u=(v*h+O)*4,r=a.color.light;if(v>=m&&O>=m&&v<h-m&&O<h-m){const i=Math.floor((v-m)/p),d=Math.floor((O-m)/p);r=g[l[i*c+d]?1:0]}s[u++]=r.r,s[u++]=r.g,s[u++]=r.b,s[u]=r.a}}},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("AlignLeft",[["line",{x1:"21",y1:"6",x2:"3",y2:"6",key:"1e448z"}],["line",{x1:"15",y1:"12",x2:"3",y2:"12",key:"80e4vw"}],["line",{x1:"17",y1:"18",x2:"3",y2:"18",key:"1771gn"}]]);n.a=s},function($,n,t){var e=t(369),s=t(640),o=t(641);function a(c){return o(s(c,void 0,e),c+"")}$.exports=a},,,,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Haze",[["path",{d:"m5.2 6.2 1.4 1.4",key:"17imol"}],["path",{d:"M2 13h2",key:"13gyu8"}],["path",{d:"M20 13h2",key:"16rner"}],["path",{d:"m17.4 7.6 1.4-1.4",key:"t4xlah"}],["path",{d:"M22 17H2",key:"1gtaj3"}],["path",{d:"M22 21H2",key:"1gy6en"}],["path",{d:"M16 13a4 4 0 0 0-8 0",key:"1dyczq"}],["path",{d:"M12 5V2.5",key:"1vytko"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",y1:"8",x2:"12",y2:"12",key:"1grbh0"}],["line",{x1:"12",y1:"16",x2:"12.01",y2:"16",key:"1w440g"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("MicOff",[["line",{x1:"2",y1:"2",x2:"22",y2:"22",key:"1w4vcy"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",y1:"19",x2:"12",y2:"22",key:"1l505v"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",y1:"19",x2:"12",y2:"22",key:"1l505v"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",ry:"2",key:"14il7g"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",y1:"2",x2:"22",y2:"22",key:"1w4vcy"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",y1:"8",x2:"22",y2:"13",key:"10apcb"}],["line",{x1:"22",y1:"8",x2:"17",y2:"13",key:"1l8di5"}]]);n.a=s},function($,n,t){"use strict";t.d(n,"a",function(){return i});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(3),l=t.n(c),p=t(8),h=t.n(p),m=t(81),g=t(659);const v=[["owner","Owner"],["founding_sub","Founding Sub"],["paid_sub","Paid Sub"],["free_sub","Free Sub"],["non_sub","Non Sub"]];function O(d,b,w){return b?w==="owner"?d.author_id===b.id:b.email===`${w}_for_${d.subdomain}@example.com`:!1}const u=({setExpanded:d})=>Object(e.h)("div",{style:{cursor:"pointer",width:"30px",height:"30px",opacity:.5,color:"var(--background_pop)"},onClick:()=>d(!0)},Object(e.h)(g.default,{height:30,stroke:"var(--background_pop)",fill:"var(--background_pop)"})),r=({pub:d,user:b,setExpanded:w})=>{const[E,S]=Object(s.k)("");return Object(e.h)("div",{style:{padding:"10px 20px",position:"relative",backgroundColor:"var(--web_bg_color)"}},Object(e.h)("div",null,"Sign in as",Object(e.h)("div",{style:{position:"absolute",top:7,right:7,cursor:"pointer"},onClick:()=>w(!1)},Object(e.h)(m.default,{height:20}))),v.map(([P,D])=>Object(e.h)("div",null,Object(e.h)("a",{className:a()("button",O(d,b,P)?"primary":"outline"),style:{width:"100%",marginTop:3},onClick:()=>{window.location.href=Object(c.pathWithQuery)("/api/v1/debug/log-in-as",{user_type:P,orig_url:window.location.href})}},D))),Object(e.h)("div",null,Object(e.h)("input",{value:E,onChange:P=>{var D;S((D=P.target)==null?void 0:D.value)}}),Object(e.h)("button",{onClick:()=>{window.location.href=Object(c.pathWithQuery)("/api/v1/debug/log-in-as",{custom_user:E,orig_url:window.location.href})}},"Log in as")))};class i extends e.Component{constructor(b,w){super(b,w);this.onDocumentMouseUp=E=>{!Object(p.isRootOrChild)(E.target,this.base)&&this.state.expanded&&this.setState({expanded:!1})},this.state={expanded:!1}}componentDidMount(){document.addEventListener("mouseup",this.onDocumentMouseUp)}componentWillUnmount(){document.removeEventListener("mouseup",this.onDocumentMouseUp)}render({pub:b,user:w},{expanded:E}){var S;return null}}},function($,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return i});var e=t(0),s=t(6),o=t.n(s),a=t(3),c=t.n(a),l=t(89),p=t(211),h=t(7),m=t(163),g=t(125),v=t(136),O=t(219);const u=({publication:d,user:b,path:w,hideTerms:E,showIntrinioAttrib:S})=>{typeof E=="undefined"&&(E=!1);const P=Object(p.b)(),D="Start Writing",W=Object(l.isMobile)(),B=Object(l.isIos)(),f=Object(l.isAndroid)(),y=W&&(B||f),M=b&&!b.reader_installed_at,N=y&&M;return Object(e.h)("div",{className:"footer-wrap publication-footer"},Object(e.h)(v.a,{onVisible:()=>{Object(h.i)(h.a.PUBLICATION_FOOTER_SEEN,{publication_id:d==null?void 0:d.id,user_id:b==null?void 0:b.id,source:r(w)})}}),Object(e.h)("div",{className:o()("footer",{"themed-background":P})},Object(e.h)("div",{className:"container"},Object(e.h)("div",{className:"footer-blurbs"},Object(e.h)("div",{className:"footer-copyright-blurb"},"\xA9 ",new Date().getFullYear()," ",d&&d.copyright||"Substack Inc"),S&&Object(e.h)("div",{className:"footer-copyright-blurb"},"Market data by ",Object(e.h)("a",{href:"https://intrinio.com/"},"Intrinio")),Object(e.h)("div",{className:"footer-terms-blurb"},E===!1&&[Object(e.h)("a",{href:Object(a.getPrivacyUrl)({pub:d}),native:!0},"Privacy")," \u2219 ",Object(e.h)("a",{href:"/tos",native:!0},"Terms")," \u2219 ",Object(e.h)("a",{href:`${Object(a.getSubstackUrl)()}/ccpa#personal-data-collected`,native:!0},"Collection notice")])),Object(e.h)("div",{className:"footer-buttons"},Object(e.h)("a",{className:o()("footer-substack-cta","start-publishing",N&&"app-upsell"),native:!0,href:(b==null?void 0:b.has_publication)?`${Object(a.getBaseUrl)({subdomain:"your"})}/publish`:`${Object(a.getSubstackUrl)()}/signup?${Object(a.serializeQuery)({utm_source:"substack",utm_medium:"web",utm_content:"footer"})}`},Object(e.h)(m.default,null)," ",D),!N&&Object(e.h)("a",{className:"footer-substack-cta get-the-app no-icon",native:!0,href:Object(a.getAppStoreRedirectUrl)({utm_campaign:"app-marketing",utm_content:"web-footer-button"})},"Get the app"),N&&B&&Object(e.h)("a",{className:O.a.appBadge,href:Object(a.getAppStoreRedirectUrl)({utm_campaign:"app-marketing",utm_content:"web-footer-button",force:"ios"})},Object(e.h)("img",{className:"app-upsell",src:Object(a.cloudinary)("/img/app_page/app-store.png",160*2)})),N&&f&&Object(e.h)("a",{className:O.a.appBadge,href:Object(a.getAppStoreRedirectUrl)({utm_campaign:"app-marketing",utm_content:"web-footer-button",force:"android"})},Object(e.h)("img",{className:"app-upsell",src:Object(a.cloudinary)("/img/app_page/google-play.png",160*2)}))),Object(e.h)("div",{className:"footer-slogan-blurb"},Object(e.h)("a",{href:`${Object(a.getSubstackUrl)()}`,native:!0},"Substack"),"\xA0is the home for great writing"))))};function r(d){return d?d==="/"?"pub-homepage":d.startsWith("/p")?"pub-post":d:"unknown"}const i=()=>Object(e.h)("div",{className:"footer-wrap www-footer"},Object(e.h)("div",{className:"home-footer"},Object(e.h)("div",{className:"footer-contain"},Object(e.h)("div",{className:"footer-info"},Object(e.h)("div",{className:"footer-info-col"},Object(e.h)("h3",null,"Read"),Object(e.h)("a",{href:"/discover?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Discover"),Object(e.h)("a",{href:"/app?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Get the app"),Object(e.h)("a",{href:"https://on.substack.com/s/stories?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Featured"),Object(e.h)("a",{href:"https://reader.substack.com?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Substack Reader"),Object(e.h)("a",{href:"/discover/category/culture/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in culture"),Object(e.h)("a",{href:"/discover/category/podcast/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top podcasts"),Object(e.h)("a",{href:"/discover/category/food/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in food & drink"),Object(e.h)("a",{href:"/discover/category/finance/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in finance"),Object(e.h)("a",{href:"/discover/category/sports/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in sports"),Object(e.h)("a",{href:"/discover/category/politics/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in politics"),Object(e.h)("a",{href:"/discover/category/technology/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in technology"),Object(e.h)("a",{href:"/discover/category/faith/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in faith"),Object(e.h)("a",{href:"/discover/category/business/paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Top in business"),Object(e.h)("a",{href:"/sitemap",native:!0},"Sitemap")),Object(e.h)("div",{className:"footer-info-col"},Object(e.h)("h3",null,"Writers"),Object(e.h)("a",{href:"/switch-to-substack?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Switch to Substack"),Object(e.h)("a",{href:"/ghost?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Switch from Ghost"),Object(e.h)("a",{href:"/going-paid?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Go paid"),Object(e.h)("a",{href:"/podcasts?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"For podcasts"),Object(e.h)("a",{href:"/for-bloggers?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"For bloggers"),Object(e.h)("a",{href:"/investing-and-business?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"For finance writers"),Object(e.h)("a",{href:"/comic-book-creators?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"For comic creators"),Object(e.h)("a",{href:"/food-writers?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"For food writers"),Object(e.h)("a",{href:"/local-news?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"For local news")),Object(e.h)("div",{className:"footer-info-col"},Object(e.h)("h3",null,"Company"),Object(e.h)("a",{href:Object(a.getAboutUrl)(null,{params:{utm_source:"substack",utm_medium:"web",utm_content:"footer"}}),native:!0},"About"),Object(e.h)("a",{href:Object(a.getSupportUrl)()},"Help"),Object(e.h)("a",{href:"/jobs?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Jobs"),Object(e.h)("a",{href:"https://on.substack.com?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Blog"),Object(e.h)("a",{href:"/vulnerability-disclosure?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Vulnerability Policy"),Object(e.h)("a",{href:"/contact?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Contact")),Object(e.h)("div",{className:"footer-info-col"},Object(e.h)("h3",null,"Resources"),Object(e.h)("a",{href:"/resources?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Resource center"),Object(e.h)("a",{href:"/going-paid-guide?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Guide to going paid"),Object(e.h)("a",{href:"https://support.substack.com/hc/en-us?s=support%40substack.com",native:!0},"Help center"),Object(e.h)("a",{href:"/community-and-programs?utm_source=substack&utm_medium=web&utm_content=footer",native:!0},"Community and programs"))),Object(e.h)("div",{className:"logo-copy-wrapper"},Object(e.h)(g.default,{className:"navbar-logo-wordmark substack-logo-wordmark"}),Object(e.h)("div",{className:"slogan tw-mt-5"},"Substack is the home for great writing")))),Object(e.h)("div",{className:"footer-divider"}),Object(e.h)("div",{className:"footer-bottom-bar"},Object(e.h)("div",{className:"app-badges"},Object(e.h)("a",{class:"app-badge",href:Object(a.getAppStoreUrl)({utm_campaign:"app-marketing",utm_content:"www-footer"})},Object(e.h)("img",{src:Object(a.cloudinary)("/img/app_page/app-store-white.png?v=1",119*2),height:40,width:134})),Object(e.h)("a",{class:"app-badge",href:Object(a.getPlayStoreUrl)({utm_campaign:"app-marketing",utm_content:"www-footer"})},Object(e.h)("img",{src:Object(a.cloudinary)("/img/app_page/google-play-white.png",119*2),height:40,width:134}))),Object(e.h)("div",{className:"footer-bottom-links"},Object(e.h)("span",{className:"copyright bottom-item"},"\xA9 Substack Inc."),Object(e.h)("a",{className:"bottom-item",href:Object(a.getPrivacyUrl)(),native:!0},"Privacy"),Object(e.h)("a",{className:"bottom-item",href:"/tos",native:!0},"Terms"),Object(e.h)("a",{className:"bottom-item",href:`${Object(a.getSubstackUrl)()}/ccpa#personal-data-collected`,native:!0},"Collection notice"))))},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(784),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideExternalLink",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"ShareFacebookBoxedIcon",svgParams:{height:17,width:16,viewBox:"10 0 10 26"}}),Object(e.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15,3C8.373,3,3,8.373,3,15c0,6.016,4.432,10.984,10.206,11.852V18.18h-2.969v-3.154h2.969v-2.099c0-3.475,1.693-5,4.581-5 c1.383,0,2.115,0.103,2.461,0.149v2.753h-1.97c-1.226,0-1.654,1.163-1.654,2.473v1.724h3.593L19.73,18.18h-3.106v8.697 C22.481,26.083,27,21.075,27,15C27,8.373,21.627,3,15,3z"}));n.default=O},,,,,,,function($,n,t){"use strict";t.d(n,"a",function(){return O});var e=t(0),s=t(1),o=t(229),a=t(3),c=t(379),l=t(116),p=t(50),h=t(4),m=t(26),g={wrapper:"frontend-lib-ProfileSetupToast-module__wrapper--3wUl-",headerRow:"frontend-lib-ProfileSetupToast-module__headerRow--17w27",header:"frontend-lib-ProfileSetupToast-module__header--fKsNz"};const v=(u,r,i,d)=>{if(!r)return null;switch(u){case"post-login":return r.profile_set_up_at?{title:"Your account is now set up",body:"You now have a profile and are able to leave comments on all of your subscriptions.",ctaText:"Check out profile",ctaLink:Object(a.getReaderProfileUrl)(r,{utm_source:"profile_toast",noBase:i}),ctaVariant:"secondary"}:null;case"post-subscribe-prompt":return d?{title:"Finish setting up your account",body:"Tell us more about yourself and find more things to read, so you can participate in the community",ctaText:"Finish setting up",ctaLink:Object(a.getReaderOnboardingUrl)(r,{isAbbreviated:!0,redirect:document.location.href,postRedirectToast:"post-subscribe-success",pubId:d?d.id:null}),ctaVariant:"themed-primary"}:null;case"post-subscribe-success":return!d||!r.profile_set_up_at?null:{title:`Welcome to ${d?d.name:""}`,body:Object(e.h)("span",null,"You will start receiving updates in your inbox. You can also read the"," ",Object(e.h)("a",{href:d?Object(a.getArchiveUrl)(d):null},"full archives")," in the website or check out your profile."),ctaText:"Check out profile",ctaLink:Object(a.getReaderProfileUrl)(r,{utm_source:"profile_toast",noBase:i}),ctaVariant:"secondary"};default:return null}};function O({user:u,pub:r=null,noBase:i=!1}){const d=Object(m.e)();return Object(s.d)(()=>{const b=new URL(location.toString()),w=b.searchParams.get("profile-setup-message");if(!w||(b.searchParams.delete("profile-setup-message"),history.replaceState({},"",b),!(w!=="post-subscribe-prompt")))return;const S=v(w,u,i,r);!S||d.popToast(({onClose:P})=>Object(e.h)(h.b,{className:g.wrapper,justifyContent:"space-between"},Object(e.h)(h.b,{gap:8},Object(e.h)(h.c,{className:g.headerRow,justifyContent:"space-between",alignItems:"center"},Object(e.h)(p.a,{look:"flex",onClick:P},Object(e.h)(o.a,{size:20})),Object(e.h)(l.d,{className:g.header},S.title)),S.body),Object(e.h)(p.a,{variant:S.ctaVariant,fill:"filled",onClick:D=>{Object(c.a)(D,S.ctaLink,{native:!0}),P()}},S.ctaText)),{ttl:null})},[]),null}},,,,,,,,,,,,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);n.a=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function($,n,t){"use strict";t.r(n);var e=t(0),s=t(921),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideVideoOff",svgParams:{height:24,width:24,stroke:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},,,,,,,,,,function($,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return d});var e=t(0),s=t(3),o=t(707),a=t(6),c=t.n(a),l=t(770),p=t(389),h=t(4),m=t(10),g={container:"frontend-main-setup_all_podcasts-module__container--eFprZ",noPodcasts:"frontend-main-setup_all_podcasts-module__noPodcasts--3p909"};const v=t(59),O=({})=>Object(e.h)("div",{className:g.noPodcasts},"No podcasts."),u=(b,w,E)=>{let S=b[w.id];return S||(S=Object(s.getPodcatcherSetupUrl)(w,{section:null,noSection:!1,addBase:!0,user:null,startAtSubscribeFlow:!E||!E.is_free_subscribed,params:{utm_source:"all-podcasts"}})),S},r=({pub:b,user:w,idToMagicLink:E,openInNewTab:S})=>b.subdomain!=="thebulwark"?null:Object(e.h)(m.b.B3,{paddingTop:16,paddingBottom:16},Object(e.h)("a",{href:u(E!=null?E:{},b,w),target:S?"_blank":void 0,rel:"noreferrer"},"Click here")," ","to set up your podcast app for everything in one feed."),i=({pub:b,user:w,idToMagicLink:E={},openInNewTab:S=!1,newFormatting:P=!1})=>{const D=[];v.isMultiPub(b)?v.getMultiPubChildPodcasts(b).forEach(M=>{const N=Object(o.b)(M,u(E,M,w));D.push(N)}):v.getSectionPodcasts(b)&&v.getSectionPodcasts(b).forEach(M=>{var N,A;if(!Object(l.b)({pub:b,section:M}))return;const L=Object(p.d)({pub:b,section:M});if(!L.title)return;const C={logoUrl:(N=L.artUrl)!=null?N:void 0,mainClickUrl:Object(s.getPodcastLandingUrl)({pub:b,section:M,addBase:!0}),buttonClickUrl:E[M.id]||Object(s.getPodcatcherSetupUrl)(b,{section:M,noSection:!1,addBase:!0,user:null,startAtSubscribeFlow:!w||!w.is_free_subscribed,params:{utm_source:"all-podcasts"}}),name:L.title,description:(A=L.description)!=null?A:"",buttonText:"Set up podcast"};D.push(C)}),Object(l.a)(b)&&D.push(Object(o.b)(b,u(E,b,w)));const W=Object.keys(E).length>0||!!(w==null?void 0:w.is_free_subscribed);let B=D.length>1?"Podcast feeds":"Podcast feed";W&&(B=v.hasMultiplePodcasts(b)?"Private podcast feeds":"Private podcast feed");const f=Object(e.h)(h.b,{radius:12,border:"detail",padding:16},v.hasPodcast(b)?Object(e.h)(e.Fragment,null,Object(e.h)(o.a,{showButton:!0,items:D,openInNewTab:S,buttonText:"Set up podcast"}),Object(e.h)(r,{pub:b,user:w,idToMagicLink:E,openInNewTab:S})):Object(e.h)(O,null));return P?Object(e.h)(e.Fragment,null,Object(e.h)(m.b.H4,{paddingTop:20,paddingBottom:8},B),f):Object(e.h)("div",{className:"container"},Object(e.h)("div",{id:"set-up-podcast"},Object(e.h)(m.b.H3,{paddingTop:16,paddingBottom:16},B),f))},d=({pub:b,user:w,idToMagicLink:E,openInNewTab:S=!1})=>Object(e.h)("div",{className:c()("page","typography",g.container)},Object(e.h)(i,{pub:b,user:w,idToMagicLink:E,openInNewTab:S}))},,,,,,,,,,,function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Contact",[["path",{d:"M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2",key:"1mghuy"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}],["line",{x1:"8",y1:"2",x2:"8",y2:"4",key:"1r8a5u"}],["line",{x1:"16",y1:"2",x2:"16",y2:"4",key:"tp0trh"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ScreenShareOff",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",y1:"9",x2:"9.01",y2:"9",key:"141aaf"}],["line",{x1:"15",y1:"9",x2:"15.01",y2:"9",key:"1cyg3o"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("ScreenShare",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m17 8 5-5",key:"fqif7o"}],["path",{d:"M17 3h5v5",key:"1o3tu8"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);n.a=s},function($,n,t){"use strict";var e=t(5);const s=Object(e.a)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);n.a=s},,,,,,,,,,,,,,,,,,function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PencilIcon",svgParams:{height:100,width:100}}),Object(e.h)("path",{d:"M55.3,25.6L22.5,58.4c-0.1,0.1-0.2,0.3-0.3,0.4c0,0,0,0.1-0.1,0.1c-0.1,0.1-0.1,0.3-0.2,0.4c0,0,0,0.1,0,0.1l-6.4,21.9   c-0.3,0.9,0,1.8,0.6,2.5c0.5,0.5,1.1,0.7,1.8,0.7c0.2,0,0.5,0,0.7-0.1l21.9-6.4c0,0,0.1,0,0.1,0c0.1,0,0.3-0.1,0.4-0.2   c0,0,0.1,0,0.1-0.1c0.2-0.1,0.3-0.2,0.4-0.3l32.8-32.8L55.3,25.6z M35.1,74.5l-13.5,3.9l3.9-13.5L35.1,74.5z"}),Object(e.h)("path",{d:"M62.1,18.8l-3.3,3.3l19.1,19.1l3.3-3.3c4.7-4.7,4.4-13.3-0.7-18.4C75.4,14.4,66.8,14.1,62.1,18.8z"}));n.default=O},,,,,,,,,,,,,,,,,,,,,,function($,n){$.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}},function($,n,t){const e=t(587),s=t(823),o=t(1048),a=t(1049),c=t(1050),l=t(1051),p=t(1052),h=t(906),m=t(1053),g=t(1056),v=t(1057),O=t(588),u=t(1058);function r(W,B){const f=W.size,y=l.getPositions(B);for(let M=0;M<y.length;M++){const N=y[M][0],A=y[M][1];for(let L=-1;L<=7;L++)if(!(N+L<=-1||f<=N+L))for(let C=-1;C<=7;C++)A+C<=-1||f<=A+C||(L>=0&&L<=6&&(C===0||C===6)||C>=0&&C<=6&&(L===0||L===6)||L>=2&&L<=4&&C>=2&&C<=4?W.set(N+L,A+C,!0,!0):W.set(N+L,A+C,!1,!0))}}function i(W){const B=W.size;for(let f=8;f<B-8;f++){const y=f%2==0;W.set(f,6,y,!0),W.set(6,f,y,!0)}}function d(W,B){const f=c.getPositions(B);for(let y=0;y<f.length;y++){const M=f[y][0],N=f[y][1];for(let A=-2;A<=2;A++)for(let L=-2;L<=2;L++)A===-2||A===2||L===-2||L===2||A===0&&L===0?W.set(M+A,N+L,!0,!0):W.set(M+A,N+L,!1,!0)}}function b(W,B){const f=W.size,y=g.getEncodedBits(B);let M,N,A;for(let L=0;L<18;L++)M=Math.floor(L/3),N=L%3+f-8-3,A=(y>>L&1)==1,W.set(M,N,A,!0),W.set(N,M,A,!0)}function w(W,B,f){const y=W.size,M=v.getEncodedBits(B,f);let N,A;for(N=0;N<15;N++)A=(M>>N&1)==1,N<6?W.set(N,8,A,!0):N<8?W.set(N+1,8,A,!0):W.set(y-15+N,8,A,!0),N<8?W.set(8,y-N-1,A,!0):N<9?W.set(8,15-N-1+1,A,!0):W.set(8,15-N-1,A,!0);W.set(y-8,8,1,!0)}function E(W,B){const f=W.size;let y=-1,M=f-1,N=7,A=0;for(let L=f-1;L>0;L-=2)for(L===6&&L--;;){for(let C=0;C<2;C++)if(!W.isReserved(M,L-C)){let R=!1;A<B.length&&(R=(B[A]>>>N&1)==1),W.set(M,L-C,R),N--,N===-1&&(A++,N=7)}if(M+=y,M<0||f<=M){M-=y,y=-y;break}}}function S(W,B,f){const y=new o;f.forEach(function(C){y.put(C.mode.bit,4),y.put(C.getLength(),O.getCharCountIndicator(C.mode,W)),C.write(y)});const M=e.getSymbolTotalCodewords(W),N=h.getTotalCodewordsCount(W,B),A=(M-N)*8;for(y.getLengthInBits()+4<=A&&y.put(0,4);y.getLengthInBits()%8!=0;)y.putBit(0);const L=(A-y.getLengthInBits())/8;for(let C=0;C<L;C++)y.put(C%2?17:236,8);return P(y,W,B)}function P(W,B,f){const y=e.getSymbolTotalCodewords(B),M=h.getTotalCodewordsCount(B,f),N=y-M,A=h.getBlocksCount(B,f),L=y%A,C=A-L,R=Math.floor(y/A),U=Math.floor(N/A),Z=U+1,F=R-U,z=new m(F);let G=0;const V=new Array(A),k=new Array(A);let K=0;const Y=new Uint8Array(W.buffer);for(let Ye=0;Ye<A;Ye++){const se=Ye<C?U:Z;V[Ye]=Y.slice(G,G+se),k[Ye]=z.encode(V[Ye]),G+=se,K=Math.max(K,se)}const ee=new Uint8Array(y);let ae=0,he,me;for(he=0;he<K;he++)for(me=0;me<A;me++)he<V[me].length&&(ee[ae++]=V[me][he]);for(he=0;he<F;he++)for(me=0;me<A;me++)ee[ae++]=k[me][he];return ee}function D(W,B,f,y){let M;if(Array.isArray(W))M=u.fromArray(W);else if(typeof W=="string"){let R=B;if(!R){const U=u.rawSplit(W);R=g.getBestVersionForData(U,f)}M=u.fromString(W,R||40)}else throw new Error("Invalid data");const N=g.getBestVersionForData(M,f);if(!N)throw new Error("The amount of data is too big to be stored in a QR Code");if(!B)B=N;else if(B<N)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+N+`.
`);const A=S(B,f,M),L=e.getSymbolSize(B),C=new a(L);return r(C,B),i(C),d(C,B),w(C,f,0),B>=7&&b(C,B),E(C,A),isNaN(y)&&(y=p.getBestMask(C,w.bind(null,C,f))),p.applyMask(y,C),w(C,f,y),{modules:C,version:B,errorCorrectionLevel:f,maskPattern:y,segments:M}}n.create=function(B,f){if(typeof B=="undefined"||B==="")throw new Error("No input text");let y=s.M,M,N;return typeof f!="undefined"&&(y=s.from(f.errorCorrectionLevel,s.M),M=g.from(f.version),N=p.from(f.maskPattern),f.toSJISFunc&&e.setToSJISFunction(f.toSJISFunc)),D(B,M,y,N)}},function($,n){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const s=Math.floor(e/8);return(this.buffer[s]>>>7-e%8&1)==1},put:function(e,s){for(let o=0;o<s;o++)this.putBit((e>>>s-o-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),e&&(this.buffer[s]|=128>>>this.length%8),this.length++}},$.exports=t},function($,n){function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,s,o,a){const c=e*this.size+s;this.data[c]=o,a&&(this.reservedBit[c]=!0)},t.prototype.get=function(e,s){return this.data[e*this.size+s]},t.prototype.xor=function(e,s,o){this.data[e*this.size+s]^=o},t.prototype.isReserved=function(e,s){return this.reservedBit[e*this.size+s]},$.exports=t},function($,n,t){const e=t(587).getSymbolSize;n.getRowColCoords=function(o){if(o===1)return[];const a=Math.floor(o/7)+2,c=e(o),l=c===145?26:Math.ceil((c-13)/(2*a-2))*2,p=[c-7];for(let h=1;h<a-1;h++)p[h]=p[h-1]-l;return p.push(6),p.reverse()},n.getPositions=function(o){const a=[],c=n.getRowColCoords(o),l=c.length;for(let p=0;p<l;p++)for(let h=0;h<l;h++)p===0&&h===0||p===0&&h===l-1||p===l-1&&h===0||a.push([c[p],c[h]]);return a}},function($,n,t){const e=t(587).getSymbolSize,s=7;n.getPositions=function(a){const c=e(a);return[[0,0],[c-s,0],[0,c-s]]}},function($,n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};n.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},n.from=function(o){return n.isValid(o)?parseInt(o,10):void 0},n.getPenaltyN1=function(o){const a=o.size;let c=0,l=0,p=0,h=null,m=null;for(let g=0;g<a;g++){l=p=0,h=m=null;for(let v=0;v<a;v++){let O=o.get(g,v);O===h?l++:(l>=5&&(c+=t.N1+(l-5)),h=O,l=1),O=o.get(v,g),O===m?p++:(p>=5&&(c+=t.N1+(p-5)),m=O,p=1)}l>=5&&(c+=t.N1+(l-5)),p>=5&&(c+=t.N1+(p-5))}return c},n.getPenaltyN2=function(o){const a=o.size;let c=0;for(let l=0;l<a-1;l++)for(let p=0;p<a-1;p++){const h=o.get(l,p)+o.get(l,p+1)+o.get(l+1,p)+o.get(l+1,p+1);(h===4||h===0)&&c++}return c*t.N2},n.getPenaltyN3=function(o){const a=o.size;let c=0,l=0,p=0;for(let h=0;h<a;h++){l=p=0;for(let m=0;m<a;m++)l=l<<1&2047|o.get(h,m),m>=10&&(l===1488||l===93)&&c++,p=p<<1&2047|o.get(m,h),m>=10&&(p===1488||p===93)&&c++}return c*t.N3},n.getPenaltyN4=function(o){let a=0;const c=o.data.length;for(let p=0;p<c;p++)a+=o.data[p];return Math.abs(Math.ceil(a*100/c/5)-10)*t.N4};function e(s,o,a){switch(s){case n.Patterns.PATTERN000:return(o+a)%2==0;case n.Patterns.PATTERN001:return o%2==0;case n.Patterns.PATTERN010:return a%3==0;case n.Patterns.PATTERN011:return(o+a)%3==0;case n.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2==0;case n.Patterns.PATTERN101:return o*a%2+o*a%3==0;case n.Patterns.PATTERN110:return(o*a%2+o*a%3)%2==0;case n.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2==0;default:throw new Error("bad maskPattern:"+s)}}n.applyMask=function(o,a){const c=a.size;for(let l=0;l<c;l++)for(let p=0;p<c;p++)a.isReserved(p,l)||a.xor(p,l,e(o,p,l))},n.getBestMask=function(o,a){const c=Object.keys(n.Patterns).length;let l=0,p=1/0;for(let h=0;h<c;h++){a(h),n.applyMask(h,o);const m=n.getPenaltyN1(o)+n.getPenaltyN2(o)+n.getPenaltyN3(o)+n.getPenaltyN4(o);n.applyMask(h,o),m<p&&(p=m,l=h)}return l}},function($,n,t){const e=t(1054);function s(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}s.prototype.initialize=function(a){this.degree=a,this.genPoly=e.generateECPolynomial(this.degree)},s.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const c=new Uint8Array(a.length+this.degree);c.set(a);const l=e.mod(c,this.genPoly),p=this.degree-l.length;if(p>0){const h=new Uint8Array(this.degree);return h.set(l,p),h}return l},$.exports=s},function($,n,t){const e=t(1055);n.mul=function(o,a){const c=new Uint8Array(o.length+a.length-1);for(let l=0;l<o.length;l++)for(let p=0;p<a.length;p++)c[l+p]^=e.mul(o[l],a[p]);return c},n.mod=function(o,a){let c=new Uint8Array(o);for(;c.length-a.length>=0;){const l=c[0];for(let h=0;h<a.length;h++)c[h]^=e.mul(a[h],l);let p=0;for(;p<c.length&&c[p]===0;)p++;c=c.slice(p)}return c},n.generateECPolynomial=function(o){let a=new Uint8Array([1]);for(let c=0;c<o;c++)a=n.mul(a,new Uint8Array([1,e.exp(c)]));return a}},function($,n){const t=new Uint8Array(512),e=new Uint8Array(256);(function(){let o=1;for(let a=0;a<255;a++)t[a]=o,e[o]=a,o<<=1,o&256&&(o^=285);for(let a=255;a<512;a++)t[a]=t[a-255]})(),n.log=function(o){if(o<1)throw new Error("log("+o+")");return e[o]},n.exp=function(o){return t[o]},n.mul=function(o,a){return o===0||a===0?0:t[e[o]+e[a]]}},function($,n,t){const e=t(587),s=t(906),o=t(823),a=t(588),c=t(907),l=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,p=e.getBCHDigit(l);function h(O,u,r){for(let i=1;i<=40;i++)if(u<=n.getCapacity(i,r,O))return i}function m(O,u){return a.getCharCountIndicator(O,u)+4}function g(O,u){let r=0;return O.forEach(function(i){r+=m(i.mode,u)+i.getBitsLength()}),r}function v(O,u){for(let r=1;r<=40;r++)if(g(O,r)<=n.getCapacity(r,u,a.MIXED))return r}n.from=function(u,r){return c.isValid(u)?parseInt(u,10):r},n.getCapacity=function(u,r,i){if(!c.isValid(u))throw new Error("Invalid QR Code version");typeof i=="undefined"&&(i=a.BYTE);const d=e.getSymbolTotalCodewords(u),b=s.getTotalCodewordsCount(u,r),w=(d-b)*8;if(i===a.MIXED)return w;const E=w-m(i,u);switch(i){case a.NUMERIC:return Math.floor(E/10*3);case a.ALPHANUMERIC:return Math.floor(E/11*2);case a.KANJI:return Math.floor(E/13);case a.BYTE:default:return Math.floor(E/8)}},n.getBestVersionForData=function(u,r){let i;const d=o.from(r,o.M);if(Array.isArray(u)){if(u.length>1)return v(u,d);if(u.length===0)return 1;i=u[0]}else i=u;return h(i.mode,i.getLength(),d)},n.getEncodedBits=function(u){if(!c.isValid(u)||u<7)throw new Error("Invalid QR Code version");let r=u<<12;for(;e.getBCHDigit(r)-p>=0;)r^=l<<e.getBCHDigit(r)-p;return u<<12|r}},function($,n,t){const e=t(587),s=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,o=1<<14|1<<12|1<<10|1<<4|1<<1,a=e.getBCHDigit(s);n.getEncodedBits=function(l,p){const h=l.bit<<3|p;let m=h<<10;for(;e.getBCHDigit(m)-a>=0;)m^=s<<e.getBCHDigit(m)-a;return(h<<10|m)^o}},function($,n,t){const e=t(588),s=t(1059),o=t(1060),a=t(1061),c=t(1063),l=t(908),p=t(587),h=t(1064);function m(b){return unescape(encodeURIComponent(b)).length}function g(b,w,E){const S=[];let P;for(;(P=b.exec(E))!==null;)S.push({data:P[0],index:P.index,mode:w,length:P[0].length});return S}function v(b){const w=g(l.NUMERIC,e.NUMERIC,b),E=g(l.ALPHANUMERIC,e.ALPHANUMERIC,b);let S,P;return p.isKanjiModeEnabled()?(S=g(l.BYTE,e.BYTE,b),P=g(l.KANJI,e.KANJI,b)):(S=g(l.BYTE_KANJI,e.BYTE,b),P=[]),w.concat(E,S,P).sort(function(W,B){return W.index-B.index}).map(function(W){return{data:W.data,mode:W.mode,length:W.length}})}function O(b,w){switch(w){case e.NUMERIC:return s.getBitsLength(b);case e.ALPHANUMERIC:return o.getBitsLength(b);case e.KANJI:return c.getBitsLength(b);case e.BYTE:return a.getBitsLength(b)}}function u(b){return b.reduce(function(w,E){const S=w.length-1>=0?w[w.length-1]:null;return S&&S.mode===E.mode?(w[w.length-1].data+=E.data,w):(w.push(E),w)},[])}function r(b){const w=[];for(let E=0;E<b.length;E++){const S=b[E];switch(S.mode){case e.NUMERIC:w.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:w.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:w.push([S,{data:S.data,mode:e.BYTE,length:m(S.data)}]);break;case e.BYTE:w.push([{data:S.data,mode:e.BYTE,length:m(S.data)}])}}return w}function i(b,w){const E={},S={start:{}};let P=["start"];for(let D=0;D<b.length;D++){const W=b[D],B=[];for(let f=0;f<W.length;f++){const y=W[f],M=""+D+f;B.push(M),E[M]={node:y,lastCount:0},S[M]={};for(let N=0;N<P.length;N++){const A=P[N];E[A]&&E[A].node.mode===y.mode?(S[A][M]=O(E[A].lastCount+y.length,y.mode)-O(E[A].lastCount,y.mode),E[A].lastCount+=y.length):(E[A]&&(E[A].lastCount=y.length),S[A][M]=O(y.length,y.mode)+4+e.getCharCountIndicator(y.mode,w))}}P=B}for(let D=0;D<P.length;D++)S[P[D]].end=0;return{map:S,table:E}}function d(b,w){let E;const S=e.getBestModeForData(b);if(E=e.from(w,S),E!==e.BYTE&&E.bit<S.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(S));switch(E===e.KANJI&&!p.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new s(b);case e.ALPHANUMERIC:return new o(b);case e.KANJI:return new c(b);case e.BYTE:return new a(b)}}n.fromArray=function(w){return w.reduce(function(E,S){return typeof S=="string"?E.push(d(S,null)):S.data&&E.push(d(S.data,S.mode)),E},[])},n.fromString=function(w,E){const S=v(w,p.isKanjiModeEnabled()),P=r(S),D=i(P,E),W=h.find_path(D.map,"start","end"),B=[];for(let f=1;f<W.length-1;f++)B.push(D.table[W[f]].node);return n.fromArray(u(B))},n.rawSplit=function(w){return n.fromArray(v(w,p.isKanjiModeEnabled()))}},function($,n,t){const e=t(588);function s(o){this.mode=e.NUMERIC,this.data=o.toString()}s.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(a){let c,l,p;for(c=0;c+3<=this.data.length;c+=3)l=this.data.substr(c,3),p=parseInt(l,10),a.put(p,10);const h=this.data.length-c;h>0&&(l=this.data.substr(c),p=parseInt(l,10),a.put(p,h*3+1))},$.exports=s},function($,n,t){const e=t(588),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(a){this.mode=e.ALPHANUMERIC,this.data=a}o.getBitsLength=function(c){return 11*Math.floor(c/2)+6*(c%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(c){let l;for(l=0;l+2<=this.data.length;l+=2){let p=s.indexOf(this.data[l])*45;p+=s.indexOf(this.data[l+1]),c.put(p,11)}this.data.length%2&&c.put(s.indexOf(this.data[l]),6)},$.exports=o},function($,n,t){const e=t(1062),s=t(588);function o(a){this.mode=s.BYTE,typeof a=="string"&&(a=e(a)),this.data=new Uint8Array(a)}o.getBitsLength=function(c){return c*8},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(a){for(let c=0,l=this.data.length;c<l;c++)a.put(this.data[c],8)},$.exports=o},function($,n,t){"use strict";$.exports=function(s){for(var o=[],a=s.length,c=0;c<a;c++){var l=s.charCodeAt(c);if(l>=55296&&l<=56319&&a>c+1){var p=s.charCodeAt(c+1);p>=56320&&p<=57343&&(l=(l-55296)*1024+p-56320+65536,c+=1)}if(l<128){o.push(l);continue}if(l<2048){o.push(l>>6|192),o.push(l&63|128);continue}if(l<55296||l>=57344&&l<65536){o.push(l>>12|224),o.push(l>>6&63|128),o.push(l&63|128);continue}if(l>=65536&&l<=1114111){o.push(l>>18|240),o.push(l>>12&63|128),o.push(l>>6&63|128),o.push(l&63|128);continue}o.push(239,191,189)}return new Uint8Array(o).buffer}},function($,n,t){const e=t(588),s=t(587);function o(a){this.mode=e.KANJI,this.data=a}o.getBitsLength=function(c){return c*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(a){let c;for(c=0;c<this.data.length;c++){let l=s.toSJIS(this.data[c]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[c]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),a.put(l,13)}},$.exports=o},function($,n,t){"use strict";var e={single_source_shortest_paths:function(s,o,a){var c={},l={};l[o]=0;var p=e.PriorityQueue.make();p.push(o,0);for(var h,m,g,v,O,u,r,i,d;!p.empty();){h=p.pop(),m=h.value,v=h.cost,O=s[m]||{};for(g in O)O.hasOwnProperty(g)&&(u=O[g],r=v+u,i=l[g],d=typeof l[g]=="undefined",(d||i>r)&&(l[g]=r,p.push(g,r),c[g]=m))}if(typeof a!="undefined"&&typeof l[a]=="undefined"){var b=["Could not find a path from ",o," to ",a,"."].join("");throw new Error(b)}return c},extract_shortest_path_from_predecessor_list:function(s,o){for(var a=[],c=o,l;c;)a.push(c),l=s[c],c=s[c];return a.reverse(),a},find_path:function(s,o,a){var c=e.single_source_shortest_paths(s,o,a);return e.extract_shortest_path_from_predecessor_list(c,a)},PriorityQueue:{make:function(s){var o=e.PriorityQueue,a={},c;s=s||{};for(c in o)o.hasOwnProperty(c)&&(a[c]=o[c]);return a.queue=[],a.sorter=s.sorter||o.default_sorter,a},default_sorter:function(s,o){return s.cost-o.cost},push:function(s,o){var a={value:s,cost:o};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};$.exports=e},function($,n,t){const e=t(909);function s(a,c,l){a.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=l,c.width=l,c.style.height=l+"px",c.style.width=l+"px"}function o(){try{return document.createElement("canvas")}catch(a){throw new Error("You need to specify a canvas element")}}n.render=function(c,l,p){let h=p,m=l;typeof h=="undefined"&&(!l||!l.getContext)&&(h=l,l=void 0),l||(m=o()),h=e.getOptions(h);const g=e.getImageWidth(c.modules.size,h),v=m.getContext("2d"),O=v.createImageData(g,g);return e.qrToImageData(O.data,c,h),s(v,m,g),v.putImageData(O,0,0),m},n.renderToDataURL=function(c,l,p){let h=p;typeof h=="undefined"&&(!l||!l.getContext)&&(h=l,l=void 0),h||(h={});const m=n.render(c,l,h),g=h.type||"image/png",v=h.rendererOpts||{};return m.toDataURL(g,v.quality)}},function($,n,t){const e=t(909);function s(c,l){const p=c.a/255,h=l+'="'+c.hex+'"';return p<1?h+" "+l+'-opacity="'+p.toFixed(2).slice(1)+'"':h}function o(c,l,p){let h=c+l;return typeof p!="undefined"&&(h+=" "+p),h}function a(c,l,p){let h="",m=0,g=!1,v=0;for(let O=0;O<c.length;O++){const u=Math.floor(O%l),r=Math.floor(O/l);!u&&!g&&(g=!0),c[O]?(v++,O>0&&u>0&&c[O-1]||(h+=g?o("M",u+p,.5+r+p):o("m",m,0),m=0,g=!1),u+1<l&&c[O+1]||(h+=o("h",v),v=0)):m++}return h}n.render=function(l,p,h){const m=e.getOptions(p),g=l.modules.size,v=l.modules.data,O=g+m.margin*2,u=m.color.light.a?"<path "+s(m.color.light,"fill")+' d="M0 0h'+O+"v"+O+'H0z"/>':"",r="<path "+s(m.color.dark,"stroke")+' d="'+a(v,g,m.margin)+'"/>',i='viewBox="0 0 '+O+" "+O+'"',d=m.width?'width="'+m.width+'" height="'+m.width+'" ':"",b='<svg xmlns="http://www.w3.org/2000/svg" '+d+i+' shape-rendering="crispEdges">'+u+r+`</svg>
`;return typeof h=="function"&&h(null,b),b}},function($,n,t){var e=t(859),s=t(404);function o(a,c){return e(a,c,function(l,p){return s(a,p)})}$.exports=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function($,n,t){"use strict";t.d(n,"a",function(){return P});var e=t(0),s=t(11),o=t.n(s),a=t(58),c=t(3),l=t.n(c),p=t(651),h=t(213),m=t(145),g=t(595),v=t(110),O=t(136),u=t(7),r=t(48),i=t(8),d=t.n(i),b=Object.defineProperty,w=(W,B,f)=>B in W?b(W,B,{enumerable:!0,configurable:!0,writable:!0,value:f}):W[B]=f,E=(W,B,f)=>(w(W,typeof B!="symbol"?B+"":B,f),f),S=(W,B,f)=>new Promise((y,M)=>{var N=C=>{try{L(f.next(C))}catch(R){M(R)}},A=C=>{try{L(f.throw(C))}catch(R){M(R)}},L=C=>C.done?y(C.value):Promise.resolve(C.value).then(N,A);L((f=f.apply(W,B)).next())});class P extends e.Component{constructor(B,f){super(B,f);E(this,"likesEnabled",Object(r.default)("like_posts_enabled")),this.state={posts:null,hasMore:!0,loading:!1},this.props.notify_user&&typeof window!="undefined"&&Object(v.b)(this.props.notify_user)}componentDidMount(){return S(this,null,function*(){this.triggerShareOnLoad(),yield this.loadMore()})}getBatchSize(){return 5}loadMore(){return S(this,null,function*(){if(!this.state.hasMore)return;(yield Object(i.stateLock)(this,"loading",f=>S(this,[f],function*({hasMore:y,posts:M}){if(!!y){M=M||[];try{const A=(yield o.a.get("/api/v1/posts").query({limit:this.getBatchSize(),offset:M.length})).body;M=M.concat(A),y=A.length>=this.getBatchSize(),this.makeSureIosCookiesArentBroken(A),this.setState({posts:M,hasMore:y})}catch(N){console.error(N)}return y}})))&&this.loader&&this.loader.checkVisibility()})}triggerShareOnLoad(){if(Object(c.getQueryItem)("action")==="share")window.history.replaceState({},document.title,Object(c.updateQuery)({action:null}));else return;this.setState({share_on_load:!0}),this.shareDialog.open()}makeSureIosCookiesArentBroken(B){if(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.props.user&&this.props.user.is_subscribed||!B||B.filter(M=>Object(a.isPaidAudience)(M.audience)&&!M.hidden).length===0)return;const f="__cookie_checked",y=Object(c.parseQuery)(window.location.search);y[f]||(y[f]="true",window.location.search=`?${Object(c.serializeQuery)(y)}`)}onChange({post:B}){if(B){const f=(this.state.posts||[]).map(y=>y.id).indexOf(B&&B.id);f!==-1&&(this.state.posts[f]=B,this.setState({posts:this.state.posts}))}}render({user:B,pub:f,freeSignup:y,freeSignupEmail:M,preloadedPosts:N,hide_intro_popup:A,children:L,blurbs:C,noBalanceHeroText:R},{posts:U,hasMore:Z,share_on_load:F}){const z=[];for(const G of U||N||[])G.hidden?Array.isArray(z[z.length-1])?z[z.length-1].push(G):z.push([G]):z.push(G);return Object(e.h)("div",{className:"classic-home-page"},Object(e.h)(m.c,{ref:G=>this.shareDialog=G,user:B,pub:f}),Object(e.h)(p.c,{freeSignup:y,freeSignupEmail:M,user:B,post:null,publication:f,hidden:A||F,blurbs:C,noBalance:R}),f&&f.subdomain==="sinocism"&&Object(e.h)("div",{className:"sinocism-hero-small"},Object(e.h)("div",{className:"container"},Object(e.h)("div",{className:"hero-text"},Object(e.h)("p",null,"Bill Bishop's Sinocism China Newsletter provides analysis, commentary and curated links to the important English and Chinese news of the day."),Object(e.h)("p",null,"Join thousands of other subscribers and gain valuable insights into China and its role in the world.")),Object(e.h)("div",{className:"hero-left"},Object(e.h)("p",{className:"review-quote"},"\u201CSinocism is the presidential daily brief for China hands.\u201D"),Object(e.h)("div",{className:"review-footer"},Object(e.h)("h3",null,"Evan Osnos"),Object(e.h)("p",null,"New Yorker correspondent and ",Object(e.h)("br",null),"National Book Award winner"))))),Object(e.h)("div",{className:"post-list"},z.length===0&&!Z&&Object(e.h)("div",{className:"container-border coming-soon"},Object(e.h)("div",{className:"container"},Object(e.h)("p",null,"Coming soon"))),z.map((G,V)=>Array.isArray(G)?this.renderHiddenPosts(G,V):this.renderPost(G,V)),Z?Object(e.h)("div",{className:"post-loader"},Object(e.h)("div",{className:"container"},Object(e.h)(O.a,{ref:G=>this.loader=G,noDedupe:!0,threshold:1280,onVisible:()=>this.loadMore()},Object(e.h)("p",null,"Loading more posts\u2026")))):f.has_posts&&U&&U.length>0&&Object(e.h)("div",{className:"container"},Object(e.h)("a",{className:"archive-link button invis",href:Object(c.getBaseArchiveUrl)(f)},"View archive"))),L)}renderPost(B){return Object(e.h)("div",{className:"container-border post-list-post"},Object(e.h)("div",{className:"container"},B.type==="thread"?Object(e.h)(g.a,{post:B,user:this.props.user,pub:this.props.pub,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,invisible:!this.props.hide_intro_popup,showCta:!0,showReactions:this.likesEnabled}):Object(e.h)(h.c,{post:B,user:this.props.user,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,pub:this.props.pub,invisible:!this.props.hide_intro_popup,truncateAt:1e4,truncateTo:8e3,onChange:f=>this.onChange(f),noTitleLink:Boolean(this.props.disableInteractive),disableSubscribePrompt:!0})))}renderHiddenPosts(B,f){let y,M;return f===0?(y=B.slice(0,1),M=B.slice(1)):B.length<=3?(y=B,M=[]):(y=B.slice(0,2),M=B.slice(2)),Object(e.h)(D,{user:this.props.user,pub:this.props.pub,posts:y,collapsedPosts:M,onChange:N=>this.onChange(N)})}}class D extends e.Component{toggle(){this.state.showing?this.setState({showing:!1}):(this.state.toggled||Object(u.i)(u.a.COLLAPSED_POSTS_SHOWN,{num_visible_posts:this.props.posts.length,num_collapsed_posts:this.props.collapsedPosts.length}),this.setState({showing:!0,toggled:!0}))}render({user:B,pub:f,posts:y,collapsedPosts:M,onChange:N},{showing:A}){return Object(e.h)("div",{className:`container-border post-list-hidden-posts ${A?"showing":""}`},Object(e.h)("div",{className:"container"},y.map(L=>Object(e.h)(h.d,{user:B,pub:f,post:L,onChange:N})),M.length>0&&Object(e.h)("div",{className:"collapse-toggle",onClick:()=>this.toggle()},A?"hide":`+${M.length} more`),M.map(L=>Object(e.h)(h.d,{className:"collapsed",user:B,pub:f,post:L,utm_source:"home",onChange:N}))))}}},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"ChevronIcon",svgParams:{height:24,width:24,stroke:"#666666",viewBox:"0 0 24 24"}}),Object(e.h)("path",{d:"M9.88507 18.9609L15.8851 12.9609L9.88507 6.96094",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}));n.default=O},function($,n,t){"use strict";t.d(n,"b",function(){return O}),t.d(n,"a",function(){return u});var e=t(0),s=t(1),o=t(229),a=t(3),c=t.n(a),l=t(89),p=t(125),h=t(7),m=t(244),g=t(42);function v(){return Object(m.a)("reader-ios-install-banner",60*60*24*7)}function O({user:E,pathname:S="/inbox"}){const[P,D]=v();if(P)return null;const W=()=>{Object(h.i)(h.a.IOS_APP_BANNER_DISMISSED),D()},B=y=>{Object(h.i)(h.a.IOS_APP_BANNER_TAPPED,{surface:"reader"})},f=(E==null?void 0:E.reader_installed_at)?`substack:/${S}`:Object(a.getAppStoreUrl)();return Object(e.h)(i,{className:"app-banner-fixed"},Object(e.h)(r,{surface:"reader"}),Object(e.h)(b,null),Object(e.h)(d,null,Object(e.h)("div",null,"Get the full experience")),Object(e.h)("a",{href:f,className:"app-banner-cta",onClick:B},"Get app"),Object(e.h)("button",{className:"reader2-button-reset",onClick:W},Object(e.h)(o.a,{size:16,className:"app-banner-x-out"})))}function u({post:E,subdomain:S}){if(!Object(l.isMobile)({checkFirst4:!0})||!Object(l.isIos)())return null;const P=Object(a.getPostAppLinkUrl)(S,E.slug,{redirect:"app-store",source:"post-banner"}),D=()=>{Object(h.i)(h.a.IOS_APP_BANNER_TAPPED,{surface:"post"})};return Object(e.h)(i,null,Object(e.h)(r,{surface:"post"}),Object(e.h)(b,null),Object(e.h)(d,null,Object(e.h)("div",null,E.type==="podcast"?"Listen":E.type==="video"?"Watch":"Read"," in the Substack app")),Object(e.h)("a",{className:"app-banner-cta",href:P,onClick:D},"Open app"))}function r({surface:E}){return Object(s.d)(()=>{Object(h.i)(h.a.IOS_APP_BANNER_VIEWED,{surface:"post"})},[]),null}const i=Object(g.a)("app-banner"),d=Object(g.a)("app-banner-text");function b(){return Object(e.h)("div",{className:"app-banner-icon"},Object(e.h)(p.default,{height:16}))}function w(){return Object(e.h)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(e.h)("path",{d:"M1.82993 9.00879C1.94419 9.09668 2.07016 9.12891 2.20786 9.10547C2.34848 9.08203 2.49643 9.01318 2.65171 8.89893L4.76108 7.34766L6.87485 8.89893C7.03012 9.01318 7.17807 9.08203 7.31869 9.10547C7.45932 9.12891 7.5853 9.09668 7.69662 9.00879C7.81088 8.92383 7.87973 8.81104 7.90317 8.67041C7.9266 8.53271 7.90756 8.37451 7.84604 8.1958L7.01108 5.71729L9.13803 4.19238C9.29623 4.07812 9.4061 3.95801 9.46762 3.83203C9.53207 3.70605 9.54086 3.57568 9.49399 3.44092C9.45004 3.30908 9.36508 3.21094 9.2391 3.14648C9.11606 3.0791 8.95932 3.04688 8.76889 3.0498L6.15854 3.06738L5.36313 0.571289C5.30454 0.386719 5.22544 0.246094 5.12583 0.149414C5.02622 0.0498047 4.90463 0 4.76108 0C4.62046 0 4.50034 0.0498047 4.40073 0.149414C4.30405 0.246094 4.22495 0.386719 4.16342 0.571289L3.37241 3.06738L0.757662 3.0498C0.567233 3.04688 0.409029 3.07764 0.283053 3.14209C0.160006 3.20654 0.0765099 3.30615 0.0325646 3.44092C-0.0172401 3.57568 -0.00991587 3.70605 0.0545373 3.83203C0.11899 3.95801 0.230319 4.07812 0.388522 4.19238L2.51547 5.71729L1.68051 8.1958C1.61899 8.37451 1.59995 8.53271 1.62338 8.67041C1.64975 8.81104 1.7186 8.92383 1.82993 9.00879Z"}))}},function($,n,t){"use strict";t.d(n,"a",function(){return y});var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(11),l=t.n(c),p=t(3),h=t.n(p),m=t(9),g=t.n(m),v=t(64),O=t(50),u=t(36),r=t(115),i=t(110),d=Object.defineProperty,b=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,D=(M,N,A)=>N in M?d(M,N,{enumerable:!0,configurable:!0,writable:!0,value:A}):M[N]=A,W=(M,N)=>{for(var A in N||(N={}))S.call(N,A)&&D(M,A,N[A]);if(E)for(var A of E(N))P.call(N,A)&&D(M,A,N[A]);return M},B=(M,N)=>b(M,w(N)),f=(M,N,A)=>new Promise((L,C)=>{var R=F=>{try{Z(A.next(F))}catch(z){C(z)}},U=F=>{try{Z(A.throw(F))}catch(z){C(z)}},Z=F=>F.done?L(F.value):Promise.resolve(F.value).then(R,U);Z((A=A.apply(M,N)).next())});const y=({pub:M,pubsToRecommend:N})=>{const[A,L]=Object(s.k)(!0),[C,R]=Object(s.k)(!0),[U,Z]=Object(s.k)((N||[]).reduce((K,Y)=>B(W({},K),{[Y.id]:!0}),{})),F=()=>{L(!A),R(!1)},z=K=>{const Y=W({},U);Y[K]=!Y[K],Z(Y)},G=()=>f(void 0,null,function*(){try{const K=Object.keys(U).filter(Y=>U[Y]===!0).map(Y=>Number(Y));yield l.a.put("/api/v1/recommendations/multiple").send({recommending_publication_id:M.id,recommended_publication_ids:K,source:"post_publish_cta",suggested:K.map(()=>!0)}),K.length&&Object(i.b)(`Recommended ${Object(m.pluralize)(K.length,"publication")}`,{timeout:1500}),F()}catch(K){console.error("Failed to add recommendations: ",K),F()}});let V,k;return(N==null?void 0:N.length)&&(V=(Object.values(U).filter(K=>K===!0)||[]).length,k=`Do you want to recommend ${N[0].name}${N.length>1?` and ${N.length-1} other ${Object(m.pluralize)(N.length-1,"publication",{just_word:!0})}`:""}?`),Object(e.h)(e.Fragment,null,C?Object(e.h)(u.a,{isOpen:A,onClose:F},Object(e.h)(u.d,{onClose:F,title:k}),Object(e.h)(u.b,null,Object(e.h)("div",{className:"recommend-linked-publication-modal-container"},Object(e.h)("p",{className:"subtitle"},"Since you embedded"," ",N.length>1?`${N.length} publications`:N[0].name," on your post, we thought you might want to recommend them to your readers"),N&&N.length&&N.map((K,Y)=>Object(e.h)("div",{className:a()("recommend-publication-container",{last:Y===N.length-1}),onClick:()=>z(K.id)},Object(e.h)(v.a,{pub:K,size:40,logo_url:K.logo_url,openInNewTab:!0}),Object(e.h)("div",{className:"publication-name-author"},Object(e.h)("a",{className:"publication-name",href:Object(p.getBaseUrl)(K),target:"_blank"},K.name),Object(e.h)("p",{className:"author-name"},Object(m.getByLine)(K))),Object(e.h)(r.a,{checked:U[K.id]?U[K.id]:!1}))))),Object(e.h)(u.c,{alignment:"center",primaryButton:Object(e.h)(O.a,{onClick:G,variant:"primary"},V===0?"Continue":`Recommend ${Object(m.pluralize)(V,"publication")}`),secondaryButton:Object(e.h)(O.a,{onClick:F,variant:"secondary"},"Maybe later")})):null)}},function($,n,t){"use strict";t.d(n,"b",function(){return c}),t.d(n,"a",function(){return l});var e=t(3),s=t.n(e),o=t(21),a=(h,m,g)=>new Promise((v,O)=>{var u=d=>{try{i(g.next(d))}catch(b){O(b)}},r=d=>{try{i(g.throw(d))}catch(b){O(b)}},i=d=>d.done?v(d.value):Promise.resolve(d.value).then(u,r);i((g=g.apply(h,m)).next())});function c(h){h=h||Object(e.getQueryItem)("selection");const{isLoading:m,error:g,result:v}=Object(o.f)({pathname:`/api/v1/post_selection/${h}`,auto:Boolean(h),deps:[h]});return{isLoading:m,error:g,postSelection:v!=null?v:null,highlightSelection:()=>{v&&p(v)}}}function l(h){return a(this,null,function*(){h=h||Object(e.getQueryItem)("selection");let m=null;try{m=yield Object(o.c)(`/api/v1/post_selection/${h}`,{})}catch(g){}m&&p(m)})}function p(h){var m,g;if(!h.text)return;const v=(g=(m=/^[^.]+\./.exec(h.text))==null?void 0:m[0])!=null?g:h.text;if(!v)return;const O=`#:~:text=${encodeURIComponent(v)}`;history.replaceState({},document.title,O),document.location.hash=O}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function($,n,t){"use strict";var e=t(0),s=t(1),o=t(6),a=t.n(o),c=t(196),l=t(3),p=t(7),h=t(8),m=t(50),g=t(26),v=t(925),O=t(926),u=t(296),r=t(355),i=t(188),d=t(44),b={toast:"frontend-components-prompts-WriterShareModal-module__toast--wc1bo",cta:"frontend-components-prompts-WriterShareModal-module__cta--3LjvC",modal:"frontend-components-prompts-WriterShareModal-module__modal--3G8F3"},w=Object.defineProperty,E=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,B=(Z,F,z)=>F in Z?w(Z,F,{enumerable:!0,configurable:!0,writable:!0,value:z}):Z[F]=z,f=(Z,F)=>{for(var z in F||(F={}))D.call(F,z)&&B(Z,z,F[z]);if(P)for(var z of P(F))W.call(F,z)&&B(Z,z,F[z]);return Z},y=(Z,F)=>E(Z,S(F));const M="https://twitter.com",N=()=>{const Z=Object(g.e)();return(F,z=null)=>Z.popToast(G=>Object(e.h)(g.c,y(f({},G),{className:b.toast,text:F,cta:z})))},A=({post:Z,publication:F,autoSharedOnTwitter:z,showAfter:G,publicationTwitterScreenName:V,authorVersion:k})=>{const K=Object(s.j)(null),[Y,ee]=Object(s.k)(!0),ae=N();Object(s.d)(()=>{z&&ae("Post shared to Twitter",V?Object(e.h)("a",{className:b.cta,href:`${M}/${V}`,target:"_blank",rel:"noreferrer"},"View"):null)},[]);const he=()=>{ee(!1)};return!Y&&G?G:Object(e.h)(d.b,{testID:"share-modal",openByDefault:!0,className:a()("force-light-theme",b.modal),ref:K,variant:"structured",modalTitle:`Share your ${k?"substack:":"post:"}`,modalFooter:Object(e.h)(m.a,{variant:k?"primary":"secondary",look:"button",onClick:me=>{me.preventDefault(),K.current.close()}},k?"View Dashboard":"View post"),onBeforeClose:he},Object(e.h)("div",{className:"author-post-share-container author-post-share-container--fullscreen author-post-share-container--publish"},Object(e.h)("div",{className:"author-post-share__check-container"},Object(e.h)(c.a,{size:20,strokeWidth:2})),Object(e.h)("h5",null,k?"Share your Substack with your friends, fans, and communities":"Your post has been published! It\u2019s time to get the word out"),!k&&Object(e.h)("div",{className:"tw-mb-8"},Object(e.h)(R,{modalRef:K})),Object(e.h)(L,{post:Z,publication:F,hideEmailOption:!k,trackingParams:{sd:"pf"},autoSharedOnTwitter:z,authorVersion:k})))},L=({post:Z,publication:F,hideEmailOption:z=!1,trackingParams:G,autoSharedOnTwitter:V,authorVersion:k})=>{const K=k?Object(l.getBaseUrl)(F):Z.canonical_url,Y=ae=>{Object(p.i)(p.a.SHARE_LINK_CLICKED,{name:ae,post_id:Z==null?void 0:Z.id,source:"fullscreen-author-share-dialog"})},ee=N();return Object(e.h)(e.Fragment,null,Object(e.h)(C,{onClick:()=>{Y("facebook"),window.open(`https://www.facebook.com/sharer/sharer.php?${Object(l.serializeQuery)({u:Object(l.updateQuery)(K,f({utm_source:"facebook"},G))})}`)},className:"share facebook"},Object(e.h)("button",{className:"button tw-w-full"},Object(e.h)(O.default,{height:16,fill:"#256fe2",stroke:"white",strokeWidth:1}),"Share on Facebook")),!V&&Object(e.h)(C,{onClick:()=>{Y("twitter"),window.open(`${M}/share?${Object(l.serializeQuery)({url:Object(l.updateQuery)(K,f({utm_source:"twitter"},G))})}`)},className:"share twitter"},Object(e.h)("button",{className:"button tw-w-full"},Object(e.h)(i.default,{height:16,fill:"#1DA1F2",stroke:"#1DA1F2",strokeWidth:0}),"Share on Twitter")),Object(e.h)(C,{onClick:()=>{Object(h.copyToClipboard)(Object(l.updateQuery)(K,G)),Y("copy"),ee("Link copied to clipboard")},className:"share copy"},Object(e.h)("button",{className:"button short-button tw-w-full"},Object(e.h)(u.default,{height:16,strokeWidth:0,fill:"black"}),"Copy Link")),!z&&Object(e.h)(C,{onClick:()=>{Y("email"),window.open(`mailto:?${Object(l.serializeQuery)({subject:k?`Check out ${F.name}`:Z.title,body:Object(l.updateQuery)(K,f({utm_source:"email"},G))})}`)},className:"share email"},Object(e.h)("button",{className:"button short-button tw-mb-8 tw-w-full"},Object(e.h)(r.default,{height:16,strokeWidth:0,fill:"black"}),"Share with email")),!k&&Object(e.h)(C,{onClick:()=>{Y("media-assets"),window.open(`${Object(l.getPostUrl)(F,Z)}/media-assets`)},className:"share press-kit"},Object(e.h)("button",{className:"button tw-w-full"},Object(e.h)(v.default,{stroke:"#404040",fill:"white"}),"View media assets")))},C=Z=>Object(e.h)("a",y(f({},Z),{native:!0})),R=({modalRef:Z})=>{var F,z,G;let V="";typeof window!="undefined"&&(V=window.location.host);const k=(F=document.head.querySelector('meta[property="og:image"]'))==null?void 0:F.content,K=(z=document.head.querySelector('meta[property="og:title"]'))==null?void 0:z.content,Y=(G=document.head.querySelector('meta[property="og:description"]'))==null?void 0:G.content;return Object(e.h)("div",{onClick:()=>{Z.current.close()},className:"overflow-hidden tw-cursor-pointer tw-rounded-xl tw-border tw-border-solid tw-border-substack-detail"},k&&Object(e.h)("div",{className:"tw-border-0 tw-border-b tw-border-solid tw-border-substack-detail"},Object(e.h)("img",{src:k,className:"social-media-share-preview__image"})),Object(e.h)("div",{className:"tw-p-3"},Object(e.h)("div",{className:"tw-text-sm tw-font-bold tw-text-substack-secondary"},V),Object(e.h)("div",{className:"tw-text-base tw-font-bold tw-text-substack-primary"},K),Object(e.h)("div",{className:"social-media-share-preview__description tw-text-sm tw-font-medium tw-text-substack-secondary"},Y)))};var U=n.a=A},,,,,,,,,,,,,,,,,,,,function($,n,t){"use strict";t.r(n),t.d(n,"LucideHaze",function(){return u});var e=t(0),s=t(915),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));function u(r){return Object(e.h)(o.a,O(v({},r),{name:"LucideHaze",svgParams:{height:24,width:24,fill:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}))}n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(916),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LudiceArrowLeft",svgParams:{height:24,width:24,fill:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n),t.d(n,"LucideSettings2",function(){return u});var e=t(0),s=t(918),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));function u(r){return Object(e.h)(o.a,O(v({},r),{name:"LucideSettings2",svgParams:{height:24,width:24,fill:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}))}n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(919),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideMic",svgParams:{height:24,width:24,stroke:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(920),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideVideo",svgParams:{height:24,width:24,stroke:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(922),o=t(12),a=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(r,i,d)=>i in r?a(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d,v=(r,i)=>{for(var d in i||(i={}))h.call(i,d)&&g(r,d,i[d]);if(p)for(var d of p(i))m.call(i,d)&&g(r,d,i[d]);return r},O=(r,i)=>c(r,l(i));const u=r=>Object(e.h)(o.a,O(v({},r),{name:"LucideUserX",svgParams:{height:24,width:24,stroke:"#ffffff",strokeWidth:0}}),Object(e.h)(s.a,{height:24,stroke:r.stroke,fill:r.fill,strokeWidth:r.strokeWidth}));n.default=u},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"DownloadIcon",svgParams:{height:32,width:32}}),Object(e.h)("rect",{width:"32",height:"32",rx:"6",fill:u.fill||"black"}),Object(e.h)("path",{d:"M23.5 18.5V21.8333C23.5 22.2754 23.3244 22.6993 23.0118 23.0118C22.6993 23.3244 22.2754 23.5 21.8333 23.5H10.1667C9.72464 23.5 9.30072 23.3244 8.98816 23.0118C8.67559 22.6993 8.5 22.2754 8.5 21.8333V18.5",stroke:u.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(e.h)("path",{d:"M11.8333 14.3335L16 18.5002L20.1667 14.3335",stroke:u.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(e.h)("path",{d:"M16 18.5V8.5",stroke:u.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"PanelsIcon",svgParams:{height:32,width:32}}),Object(e.h)("rect",{width:"32",height:"32",rx:"6",fill:"black"}),Object(e.h)("rect",{x:"7.19995",y:"7.2002",width:"8.49554",height:"11.8938",rx:"0.424777",fill:"white"}),Object(e.h)("rect",{opacity:"0.7",x:"7.19995",y:"19.603",width:"8.49554",height:"6.79643",rx:"0.424777",fill:"white"}),Object(e.h)("path",{opacity:"0.7",d:"M16.2048 7.62497C16.2048 7.39037 16.395 7.2002 16.6296 7.2002H20.4526C23.737 7.2002 26.3995 9.8627 26.3995 13.1471C26.3995 16.4314 23.737 19.094 20.4526 19.094H16.6296C16.395 19.094 16.2048 18.9038 16.2048 18.6692V7.62497Z",fill:"white"}));n.default=O},function($,n,t){"use strict";t.r(n);var e=t(0),s=t(12),o=Object.defineProperty,a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(u,r,i)=>r in u?o(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,g=(u,r)=>{for(var i in r||(r={}))p.call(r,i)&&m(u,i,r[i]);if(l)for(var i of l(r))h.call(r,i)&&m(u,i,r[i]);return u},v=(u,r)=>a(u,c(r));const O=u=>Object(e.h)(s.a,v(g({},u),{name:"DownloadIconNoBorder",svgParams:{height:32,width:32}}),Object(e.h)("path",{d:"M23.5 18.5V21.8333C23.5 22.2754 23.3244 22.6993 23.0118 23.0118C22.6993 23.3244 22.2754 23.5 21.8333 23.5H10.1667C9.72464 23.5 9.30072 23.3244 8.98816 23.0118C8.67559 22.6993 8.5 22.2754 8.5 21.8333V18.5",stroke:u.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,255,255,0)"}),Object(e.h)("path",{d:"M11.8333 14.3335L16 18.5002L20.1667 14.3335",stroke:u.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,255,255,0)"}),Object(e.h)("path",{d:"M16 18.5V8.5",stroke:u.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,255,255,0)"}));n.default=O},,,,,,,,,,,,,,,,,,,,,,,,,function($,n,t){"use strict";(function(e){var s=t(840),o=t.n(s),a=function(Q,te){if(Q==null)return{};var ge,re,ye={},Je=Object.keys(Q);for(re=0;re<Je.length;re++)ge=Je[re],te.indexOf(ge)>=0||(ye[ge]=Q[ge]);return ye},c=function(Q,te){if(Q==null)return{};var ge,re,ye=a(Q,te);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(Q);for(re=0;re<Je.length;re++)ge=Je[re],te.indexOf(ge)>=0||Object.prototype.propertyIsEnumerable.call(Q,ge)&&(ye[ge]=Q[ge])}return ye};function l(Q,te,ge,re,ye,Je,St){try{var Mt=Q[Je](St),Zt=Mt.value}catch(jn){return void ge(jn)}Mt.done?te(Zt):Promise.resolve(Zt).then(re,ye)}var p=function(Q){return function(){var te=this,ge=arguments;return new Promise(function(re,ye){var Je=Q.apply(te,ge);function St(Zt){l(Je,re,ye,St,Mt,"next",Zt)}function Mt(Zt){l(Je,re,ye,St,Mt,"throw",Zt)}St(void 0)})}},h=function(Q,te){if(!(Q instanceof te))throw new TypeError("Cannot call a class as a function")},m=function(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q};function g(Q,te){for(var ge=0;ge<te.length;ge++){var re=te[ge];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Q,re.key,re)}}var v=function(Q,te,ge){return te&&g(Q.prototype,te),ge&&g(Q,ge),Q},O=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof e!="undefined"?e:typeof self!="undefined"?self:{};function u(Q,te){return Q(te={exports:{}},te.exports),te.exports}var r=u(function(Q){function te(ge,re){return Q.exports=te=Object.setPrototypeOf||function(ye,Je){return ye.__proto__=Je,ye},te(ge,re)}Q.exports=te}),i=function(Q,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(te&&te.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),te&&r(Q,te)},d=u(function(Q){function te(ge){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Q.exports=te=function(re){return typeof re}:Q.exports=te=function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},te(ge)}Q.exports=te}),b=function(Q,te){return!te||d(te)!=="object"&&typeof te!="function"?m(Q):te},w=u(function(Q){function te(ge){return Q.exports=te=Object.setPrototypeOf?Object.getPrototypeOf:function(re){return re.__proto__||Object.getPrototypeOf(re)},te(ge)}Q.exports=te}),E=function(Q,te,ge){return te in Q?Object.defineProperty(Q,te,{value:ge,enumerable:!0,configurable:!0,writable:!0}):Q[te]=ge,Q},S=function(Q){if(Array.isArray(Q))return Q},P=function(Q,te){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(Q)){var ge=[],re=!0,ye=!1,Je=void 0;try{for(var St,Mt=Q[Symbol.iterator]();!(re=(St=Mt.next()).done)&&(ge.push(St.value),!te||ge.length!==te);re=!0);}catch(Zt){ye=!0,Je=Zt}finally{try{re||Mt.return==null||Mt.return()}finally{if(ye)throw Je}}return ge}},D=function(Q,te){(te==null||te>Q.length)&&(te=Q.length);for(var ge=0,re=new Array(te);ge<te;ge++)re[ge]=Q[ge];return re},W=function(Q,te){if(Q){if(typeof Q=="string")return D(Q,te);var ge=Object.prototype.toString.call(Q).slice(8,-1);return ge==="Object"&&Q.constructor&&(ge=Q.constructor.name),ge==="Map"||ge==="Set"?Array.from(Q):ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge)?D(Q,te):void 0}},B=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},f=function(Q,te){return S(Q)||P(Q,te)||W(Q,te)||B()},y=typeof Map=="function",M=typeof Set=="function",N=typeof WeakSet=="function",A=Object.keys,L=function(Q,te){return Q&&typeof Q=="object"&&te.add(Q)},C=function(Q,te,ge,re){for(var ye,Je=0;Je<Q.length;Je++)if(ge((ye=Q[Je])[0],te[0],re)&&ge(ye[1],te[1],re))return!0;return!1},R=function(Q,te,ge,re){for(var ye=0;ye<Q.length;ye++)if(ge(Q[ye],te,re))return!0;return!1},U=function(Q,te){return Q===te||Q!=Q&&te!=te},Z=function(Q){return Q.constructor===Object},F=function(Q){return typeof Q.then=="function"},z=function(Q){return!(!Q.$$typeof||!Q._store)},G=function(Q){return function(te){var ge=Q||te;return function(re,ye,Je){Je===void 0&&(Je=N?new WeakSet:Object.create({_values:[],add:function(Zt){this._values.push(Zt)},has:function(Zt){return!!~this._values.indexOf(Zt)}}));var St=Je.has(re),Mt=Je.has(ye);return St||Mt?St&&Mt:(L(re,Je),L(ye,Je),ge(re,ye,Je))}}},V=function(Q){var te=[];return Q.forEach(function(ge,re){return te.push([re,ge])}),te},k=function(Q){var te=[];return Q.forEach(function(ge){return te.push(ge)}),te},K=function(Q,te,ge,re){if(Q.length!==te.length)return!1;for(var ye=0;ye<Q.length;ye++)if(!ge(Q[ye],te[ye],re))return!1;return!0},Y=function(Q,te,ge,re){if(Q.size!==te.size)return!1;for(var ye=V(Q),Je=V(te),St=0;St<ye.length;St++)if(!C(Je,ye[St],ge,re)||!C(ye,Je[St],ge,re))return!1;return!0},ee=function(Q,te,ge,re){var ye,Je=A(Q),St=A(te);if(Je.length!==St.length)return!1;for(var Mt=0;Mt<Je.length;Mt++)if(ye=Je[Mt],!R(St,ye,U)||(ye!=="_owner"||!z(Q)||!z(te))&&!ge(Q[ye],te[ye],re))return!1;return!0},ae=function(Q,te){return Q.source===te.source&&Q.global===te.global&&Q.ignoreCase===te.ignoreCase&&Q.multiline===te.multiline&&Q.unicode===te.unicode&&Q.sticky===te.sticky&&Q.lastIndex===te.lastIndex},he=function(Q,te,ge,re){if(Q.size!==te.size)return!1;for(var ye=k(Q),Je=k(te),St=0;St<ye.length;St++)if(!R(Je,ye[St],ge,re)||!R(ye,Je[St],ge,re))return!1;return!0},me=Array.isArray,Ye=function(Q){var te=typeof Q=="function"?Q(ge):ge;function ge(re,ye,Je){if(U(re,ye))return!0;var St=typeof re;if(St!==typeof ye||St!=="object"||!re||!ye)return!1;if(Z(re)&&Z(ye))return ee(re,ye,te,Je);var Mt=me(re),Zt=me(ye);if(Mt||Zt)return Mt===Zt&&K(re,ye,te,Je);var jn=re instanceof Date,xr=ye instanceof Date;if(jn||xr)return jn===xr&&U(re.getTime(),ye.getTime());var Fr=re instanceof RegExp,bo=ye instanceof RegExp;if(Fr||bo)return Fr===bo&&ae(re,ye);if(F(re)||F(ye))return re===ye;if(y){var Ni=re instanceof Map,wi=ye instanceof Map;if(Ni||wi)return Ni===wi&&Y(re,ye,te,Je)}if(M){var Wi=re instanceof Set,ia=ye instanceof Set;if(Wi||ia)return Wi===ia&&he(re,ye,te,Je)}return ee(re,ye,te,Je)}return ge},se=(Ye(G()),Ye(G(U)),Ye());Ye(function(){return U});const ie={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ee={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Oe={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ce={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ue={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class pe{static getFirstMatch(te,ge){const re=ge.match(te);return re&&re.length>0&&re[1]||""}static getSecondMatch(te,ge){const re=ge.match(te);return re&&re.length>1&&re[2]||""}static matchAndReturnConst(te,ge,re){if(te.test(ge))return re}static getWindowsVersionName(te){switch(te){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(te){const ge=te.split(".").splice(0,2).map(re=>parseInt(re,10)||0);if(ge.push(0),ge[0]===10)switch(ge[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(te){const ge=te.split(".").splice(0,2).map(re=>parseInt(re,10)||0);if(ge.push(0),!(ge[0]===1&&ge[1]<5))return ge[0]===1&&ge[1]<6?"Cupcake":ge[0]===1&&ge[1]>=6?"Donut":ge[0]===2&&ge[1]<2?"Eclair":ge[0]===2&&ge[1]===2?"Froyo":ge[0]===2&&ge[1]>2?"Gingerbread":ge[0]===3?"Honeycomb":ge[0]===4&&ge[1]<1?"Ice Cream Sandwich":ge[0]===4&&ge[1]<4?"Jelly Bean":ge[0]===4&&ge[1]>=4?"KitKat":ge[0]===5?"Lollipop":ge[0]===6?"Marshmallow":ge[0]===7?"Nougat":ge[0]===8?"Oreo":ge[0]===9?"Pie":void 0}static getVersionPrecision(te){return te.split(".").length}static compareVersions(te,ge,re=!1){const ye=pe.getVersionPrecision(te),Je=pe.getVersionPrecision(ge);let St=Math.max(ye,Je),Mt=0;const Zt=pe.map([te,ge],jn=>{const xr=St-pe.getVersionPrecision(jn),Fr=jn+new Array(xr+1).join(".0");return pe.map(Fr.split("."),bo=>new Array(20-bo.length).join("0")+bo).reverse()});for(re&&(Mt=St-Math.min(ye,Je)),St-=1;St>=Mt;){if(Zt[0][St]>Zt[1][St])return 1;if(Zt[0][St]===Zt[1][St]){if(St===Mt)return 0;St-=1}else if(Zt[0][St]<Zt[1][St])return-1}}static map(te,ge){const re=[];let ye;if(Array.prototype.map)return Array.prototype.map.call(te,ge);for(ye=0;ye<te.length;ye+=1)re.push(ge(te[ye]));return re}static find(te,ge){let re,ye;if(Array.prototype.find)return Array.prototype.find.call(te,ge);for(re=0,ye=te.length;re<ye;re+=1){const Je=te[re];if(ge(Je,re))return Je}}static assign(te,...ge){const re=te;let ye,Je;if(Object.assign)return Object.assign(te,...ge);for(ye=0,Je=ge.length;ye<Je;ye+=1){const St=ge[ye];typeof St=="object"&&St!==null&&Object.keys(St).forEach(Mt=>{re[Mt]=St[Mt]})}return te}static getBrowserAlias(te){return ie[te]}static getBrowserTypeByAlias(te){return Ee[te]||""}}const $e=/version\/(\d+(\.?_?\d+)+)/i,ne=[{test:[/googlebot/i],describe(Q){const te={name:"Googlebot"},ge=pe.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/opera/i],describe(Q){const te={name:"Opera"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/opr\/|opios/i],describe(Q){const te={name:"Opera"},ge=pe.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/SamsungBrowser/i],describe(Q){const te={name:"Samsung Internet for Android"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/Whale/i],describe(Q){const te={name:"NAVER Whale Browser"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/MZBrowser/i],describe(Q){const te={name:"MZ Browser"},ge=pe.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/focus/i],describe(Q){const te={name:"Focus"},ge=pe.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/swing/i],describe(Q){const te={name:"Swing"},ge=pe.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/coast/i],describe(Q){const te={name:"Opera Coast"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/yabrowser/i],describe(Q){const te={name:"Yandex Browser"},ge=pe.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/ucbrowser/i],describe(Q){const te={name:"UC Browser"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/Maxthon|mxios/i],describe(Q){const te={name:"Maxthon"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/epiphany/i],describe(Q){const te={name:"Epiphany"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/puffin/i],describe(Q){const te={name:"Puffin"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/sleipnir/i],describe(Q){const te={name:"Sleipnir"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/k-meleon/i],describe(Q){const te={name:"K-Meleon"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/micromessenger/i],describe(Q){const te={name:"WeChat"},ge=pe.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/qqbrowser/i],describe(Q){const te={name:/qqbrowserlite/i.test(Q)?"QQ Browser Lite":"QQ Browser"},ge=pe.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/msie|trident/i],describe(Q){const te={name:"Internet Explorer"},ge=pe.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/\sedg\//i],describe(Q){const te={name:"Microsoft Edge"},ge=pe.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/edg([ea]|ios)/i],describe(Q){const te={name:"Microsoft Edge"},ge=pe.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/vivaldi/i],describe(Q){const te={name:"Vivaldi"},ge=pe.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/seamonkey/i],describe(Q){const te={name:"SeaMonkey"},ge=pe.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/sailfish/i],describe(Q){const te={name:"Sailfish"},ge=pe.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,Q);return ge&&(te.version=ge),te}},{test:[/silk/i],describe(Q){const te={name:"Amazon Silk"},ge=pe.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/phantom/i],describe(Q){const te={name:"PhantomJS"},ge=pe.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/slimerjs/i],describe(Q){const te={name:"SlimerJS"},ge=pe.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(Q){const te={name:"BlackBerry"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/(web|hpw)[o0]s/i],describe(Q){const te={name:"WebOS Browser"},ge=pe.getFirstMatch($e,Q)||pe.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/bada/i],describe(Q){const te={name:"Bada"},ge=pe.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/tizen/i],describe(Q){const te={name:"Tizen"},ge=pe.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/qupzilla/i],describe(Q){const te={name:"QupZilla"},ge=pe.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/firefox|iceweasel|fxios/i],describe(Q){const te={name:"Firefox"},ge=pe.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/electron/i],describe(Q){const te={name:"Electron"},ge=pe.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/chromium/i],describe(Q){const te={name:"Chromium"},ge=pe.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,Q)||pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/chrome|crios|crmo/i],describe(Q){const te={name:"Chrome"},ge=pe.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/GSA/i],describe(Q){const te={name:"Google Search"},ge=pe.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test(Q){const te=!Q.test(/like android/i),ge=Q.test(/android/i);return te&&ge},describe(Q){const te={name:"Android Browser"},ge=pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/playstation 4/i],describe(Q){const te={name:"PlayStation 4"},ge=pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/safari|applewebkit/i],describe(Q){const te={name:"Safari"},ge=pe.getFirstMatch($e,Q);return ge&&(te.version=ge),te}},{test:[/.*/i],describe(Q){const te=Q.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:pe.getFirstMatch(te,Q),version:pe.getSecondMatch(te,Q)}}}];var X=[{test:[/Roku\/DVP/],describe(Q){const te=pe.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,Q);return{name:ce.Roku,version:te}}},{test:[/windows phone/i],describe(Q){const te=pe.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,Q);return{name:ce.WindowsPhone,version:te}}},{test:[/windows /i],describe(Q){const te=pe.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,Q),ge=pe.getWindowsVersionName(te);return{name:ce.Windows,version:te,versionName:ge}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe(Q){const te=pe.getSecondMatch(/(Version\/)(\d[\d.]+)/,Q);return{name:ce.iOS,version:te}}},{test:[/macintosh/i],describe(Q){const te=pe.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,Q).replace(/[_\s]/g,"."),ge=pe.getMacOSVersionName(te),re={name:ce.MacOS,version:te};return ge&&(re.versionName=ge),re}},{test:[/(ipod|iphone|ipad)/i],describe(Q){const te=pe.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,Q).replace(/[_\s]/g,".");return{name:ce.iOS,version:te}}},{test(Q){const te=!Q.test(/like android/i),ge=Q.test(/android/i);return te&&ge},describe(Q){const te=pe.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,Q),ge=pe.getAndroidVersionName(te),re={name:ce.Android,version:te};return ge&&(re.versionName=ge),re}},{test:[/(web|hpw)[o0]s/i],describe(Q){const te=pe.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,Q),ge={name:ce.WebOS};return te&&te.length&&(ge.version=te),ge}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(Q){const te=pe.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,Q)||pe.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,Q)||pe.getFirstMatch(/\bbb(\d+)/i,Q);return{name:ce.BlackBerry,version:te}}},{test:[/bada/i],describe(Q){const te=pe.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,Q);return{name:ce.Bada,version:te}}},{test:[/tizen/i],describe(Q){const te=pe.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,Q);return{name:ce.Tizen,version:te}}},{test:[/linux/i],describe:()=>({name:ce.Linux})},{test:[/CrOS/],describe:()=>({name:ce.ChromeOS})},{test:[/PlayStation 4/],describe(Q){const te=pe.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,Q);return{name:ce.PlayStation4,version:te}}}],q=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(Q){const te=pe.getFirstMatch(/(can-l01)/i,Q)&&"Nova",ge={type:Oe.mobile,vendor:"Huawei"};return te&&(ge.model=te),ge}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Oe.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Oe.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:()=>({type:Oe.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Oe.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Oe.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Oe.tablet})},{test(Q){const te=Q.test(/ipod|iphone/i),ge=Q.test(/like (ipod|iphone)/i);return te&&!ge},describe(Q){const te=pe.getFirstMatch(/(ipod|iphone)/i,Q);return{type:Oe.mobile,vendor:"Apple",model:te}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Oe.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Oe.mobile})},{test:Q=>Q.getBrowserName(!0)==="blackberry",describe:()=>({type:Oe.mobile,vendor:"BlackBerry"})},{test:Q=>Q.getBrowserName(!0)==="bada",describe:()=>({type:Oe.mobile})},{test:Q=>Q.getBrowserName()==="windows phone",describe:()=>({type:Oe.mobile,vendor:"Microsoft"})},{test(Q){const te=Number(String(Q.getOSVersion()).split(".")[0]);return Q.getOSName(!0)==="android"&&te>=3},describe:()=>({type:Oe.tablet})},{test:Q=>Q.getOSName(!0)==="android",describe:()=>({type:Oe.mobile})},{test:Q=>Q.getOSName(!0)==="macos",describe:()=>({type:Oe.desktop,vendor:"Apple"})},{test:Q=>Q.getOSName(!0)==="windows",describe:()=>({type:Oe.desktop})},{test:Q=>Q.getOSName(!0)==="linux",describe:()=>({type:Oe.desktop})},{test:Q=>Q.getOSName(!0)==="playstation 4",describe:()=>({type:Oe.tv})},{test:Q=>Q.getOSName(!0)==="roku",describe:()=>({type:Oe.tv})}],Ne=[{test:Q=>Q.getBrowserName(!0)==="microsoft edge",describe(Q){if(/\sedg\//i.test(Q))return{name:ue.Blink};const te=pe.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,Q);return{name:ue.EdgeHTML,version:te}}},{test:[/trident/i],describe(Q){const te={name:ue.Trident},ge=pe.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:Q=>Q.test(/presto/i),describe(Q){const te={name:ue.Presto},ge=pe.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test(Q){const te=Q.test(/gecko/i),ge=Q.test(/like gecko/i);return te&&!ge},describe(Q){const te={name:ue.Gecko},ge=pe.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ue.Blink})},{test:[/(apple)?webkit/i],describe(Q){const te={name:ue.WebKit},ge=pe.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,Q);return ge&&(te.version=ge),te}}];class Qe{constructor(te,ge=!1){if(te==null||te==="")throw new Error("UserAgent parameter can't be empty");this._ua=te,this.parsedResult={},ge!==!0&&this.parse()}getUA(){return this._ua}test(te){return te.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const te=pe.find(ne,ge=>{if(typeof ge.test=="function")return ge.test(this);if(ge.test instanceof Array)return ge.test.some(re=>this.test(re));throw new Error("Browser's test function is not valid")});return te&&(this.parsedResult.browser=te.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(te){return te?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const te=pe.find(X,ge=>{if(typeof ge.test=="function")return ge.test(this);if(ge.test instanceof Array)return ge.test.some(re=>this.test(re));throw new Error("Browser's test function is not valid")});return te&&(this.parsedResult.os=te.describe(this.getUA())),this.parsedResult.os}getOSName(te){const{name:ge}=this.getOS();return te?String(ge).toLowerCase()||"":ge||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(te=!1){const{type:ge}=this.getPlatform();return te?String(ge).toLowerCase()||"":ge||""}parsePlatform(){this.parsedResult.platform={};const te=pe.find(q,ge=>{if(typeof ge.test=="function")return ge.test(this);if(ge.test instanceof Array)return ge.test.some(re=>this.test(re));throw new Error("Browser's test function is not valid")});return te&&(this.parsedResult.platform=te.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(te){return te?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const te=pe.find(Ne,ge=>{if(typeof ge.test=="function")return ge.test(this);if(ge.test instanceof Array)return ge.test.some(re=>this.test(re));throw new Error("Browser's test function is not valid")});return te&&(this.parsedResult.engine=te.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return pe.assign({},this.parsedResult)}satisfies(te){const ge={};let re=0;const ye={};let Je=0;if(Object.keys(te).forEach(St=>{const Mt=te[St];typeof Mt=="string"?(ye[St]=Mt,Je+=1):typeof Mt=="object"&&(ge[St]=Mt,re+=1)}),re>0){const St=Object.keys(ge),Mt=pe.find(St,jn=>this.isOS(jn));if(Mt){const jn=this.satisfies(ge[Mt]);if(jn!==void 0)return jn}const Zt=pe.find(St,jn=>this.isPlatform(jn));if(Zt){const jn=this.satisfies(ge[Zt]);if(jn!==void 0)return jn}}if(Je>0){const St=Object.keys(ye),Mt=pe.find(St,Zt=>this.isBrowser(Zt,!0));if(Mt!==void 0)return this.compareVersion(ye[Mt])}}isBrowser(te,ge=!1){const re=this.getBrowserName().toLowerCase();let ye=te.toLowerCase();const Je=pe.getBrowserTypeByAlias(ye);return ge&&Je&&(ye=Je.toLowerCase()),ye===re}compareVersion(te){let ge=[0],re=te,ye=!1;const Je=this.getBrowserVersion();if(typeof Je=="string")return te[0]===">"||te[0]==="<"?(re=te.substr(1),te[1]==="="?(ye=!0,re=te.substr(2)):ge=[],te[0]===">"?ge.push(1):ge.push(-1)):te[0]==="="?re=te.substr(1):te[0]==="~"&&(ye=!0,re=te.substr(1)),ge.indexOf(pe.compareVersions(Je,re,ye))>-1}isOS(te){return this.getOSName(!0)===String(te).toLowerCase()}isPlatform(te){return this.getPlatformType(!0)===String(te).toLowerCase()}isEngine(te){return this.getEngineName(!0)===String(te).toLowerCase()}is(te){return this.isBrowser(te)||this.isOS(te)||this.isPlatform(te)}some(te=[]){return te.some(ge=>this.is(ge))}}var Ze="new",tt="loading",Ft="joining-meeting",Lt="joined-meeting",rn="left-meeting",ht="error",je="blocked",Le="off",rt="sendable",Pe="loading",de="interrupted",be="playable",Ie="unknown",ke="full",Te="lobby",x="none",H="base",le="*",Ce="ejected",Ue="nbf-room",Ve="nbf-token",bt="exp-room",yt="exp-token",Qt="meeting-full",tn="cam-in-use",Kn="mic-in-use",Ot="cam-mic-in-use",lt="permissions",Be="undefined-mediadevices",_e="not-found",Ae="constraints",fe="unknown",ft="iframe-ready-for-launch-config",nt="iframe-launch-config",ct="theme-updated",Xe="loading",gt="load-attempt-failed",Tt="loaded",Ut="started-camera",qt="camera-error",sn="joining-meeting",_n="joined-meeting",Hn="left-meeting",wn="available-devices-updated",Un="participant-joined",bn="participant-updated",cr="participant-left",fr="participant-counts-updated",ur="access-state-updated",er="meeting-session-updated",jr="meeting-session-state-updated",wt="meeting-session-data-error",mt="waiting-participant-added",Fe="waiting-participant-updated",pt="waiting-participant-removed",Dt="track-started",Jt="track-stopped",Gt="transcription-started",mn="transcription-stopped",Cn="transcription-error",tr="recording-started",Zn="recording-stopped",At="recording-stats",Xt="recording-error",en="recording-upload-completed",$n="recording-data",Xn="app-message",Yn="input-event",Sn="remote-media-player-started",nr="remote-media-player-updated",zt="remote-media-player-stopped",Kt="local-screen-share-started",$t="local-screen-share-stopped",et="active-speaker-change",Wt="active-speaker-mode-change",Vt="network-quality-change",cn="network-connection",Tn="fullscreen",pn="exited-fullscreen",Gn="live-streaming-started",hr="live-streaming-stopped",Rn="live-streaming-error",pr="lang-updated",zn="receive-settings-updated",Ar="input-settings-updated",Rr="nonfatal-error",ir="error",Sr=4096,Pr="daily-custom-track",yr={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image"},br={PLAY:"play",PAUSE:"pause"},Br=10,Nr=["jpg","png","jpeg"],lo="add-endpoints",Zr="remove-endpoints";function zr(){return!wr()&&typeof window!="undefined"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function wr(){return typeof navigator!="undefined"&&navigator.product&&navigator.product==="ReactNative"}function $o(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function xo(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&function(Q,te){if(!Q||!te)return!0;switch(Q){case"Chrome":return te.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(te.major===13&&te.minor===0&&te.point===0);case"Firefox":return te.major>=67}return!0}(zo(),function(){switch(zo()){case"Chrome":return ho();case"Safari":return gi();case"Firefox":return ki();case"Edge":return function(){var Q=0,te=0;if(typeof window!="undefined"){var ge=zr(),re=ge.match(/Edge\/(\d+).(\d+)/);if(re)try{Q=parseInt(re[1]),te=parseInt(re[2])}catch(ye){}}return{major:Q,minor:te}}()}}())}function Vo(){if(wr()||!document)return!1;var Q=document.createElement("iframe");return!!Q.requestFullscreen||!!Q.webkitRequestFullscreen}var Ti=["Chrome","Firefox"];function Ho(){return!wr()&&!function(){var Q=zr();if(Q.match(/Mobi/)||Q.match(/Android/)||zr().match(/DailyAnd\//))return!0}()&&Ti.includes(zo())}function oi(){return $o()&&!function(){var Q,te=zo();if(!zr())return!0;switch(te){case"Chrome":return(Q=ho()).major&&Q.major>0&&Q.major<61;case"Firefox":return(Q=ki()).major<78;case"Safari":return(Q=gi()).major<12;default:return!0}}()}function zo(){if(typeof window!="undefined"){var Q=zr();return Jo()?"Safari":Q.indexOf("Edge")>-1?"Edge":Q.match(/Chrome\//)?"Chrome":Q.indexOf("Safari")>-1?"Safari":Q.indexOf("Firefox")>-1?"Firefox":Q.indexOf("MSIE")>-1||Q.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function ho(){var Q=0,te=0,ge=0,re=0,ye=!1;if(typeof window!="undefined"){var Je=zr(),St=Je.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(St)try{Q=parseInt(St[1]),te=parseInt(St[2]),ge=parseInt(St[3]),re=parseInt(St[4]),ye=Je.indexOf("OPR/")>-1}catch(Mt){}}return{major:Q,minor:te,build:ge,patch:re,opera:ye}}function Jo(){return!!zr().match(/iPad|iPhone|iPod/i)&&$o()}function gi(){var Q=0,te=0,ge=0;if(typeof window!="undefined"){var re=zr().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(re)try{Q=parseInt(re[1]),te=parseInt(re[2]),ge=parseInt(re[4])}catch(ye){}else Jo()&&(Q=14,te=0,ge=3)}return{major:Q,minor:te,point:ge}}function ki(){var Q=0,te=0;if(typeof window!="undefined"){var ge=zr().match(/Firefox\/(\d+).(\d+)/);if(ge)try{Q=parseInt(ge[1]),te=parseInt(ge[2])}catch(re){}}return{major:Q,minor:te}}function ao(){return Date.now()+Math.random().toString()}function Po(){throw new Error("Method must be implemented in subclass")}function qo(){return window._dailyConfig&&window._dailyConfig.callObjectBundleUrlOverride?window._dailyConfig.callObjectBundleUrlOverride:"https://c.daily.co/call-machine/versioned/".concat("0.35.1","/static/call-machine-object-bundle.js")}function Ai(Q){try{new URL(Q)}catch(te){return!1}return!0}var hi=function(){function Q(){h(this,Q)}return v(Q,[{key:"addListenerForMessagesFromCallMachine",value:function(te,ge,re){Po()}},{key:"addListenerForMessagesFromDailyJs",value:function(te,ge,re){Po()}},{key:"sendMessageToCallMachine",value:function(te,ge,re,ye){Po()}},{key:"sendMessageToDailyJs",value:function(te,ge,re){Po()}},{key:"removeListener",value:function(te){Po()}}]),Q}();function ze(Q,te){var ge=Object.keys(Q);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(Q);te&&(re=re.filter(function(ye){return Object.getOwnPropertyDescriptor(Q,ye).enumerable})),ge.push.apply(ge,re)}return ge}function Re(Q){for(var te=1;te<arguments.length;te++){var ge=arguments[te]!=null?arguments[te]:{};te%2?ze(Object(ge),!0).forEach(function(re){E(Q,re,ge[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(ge)):ze(Object(ge)).forEach(function(re){Object.defineProperty(Q,re,Object.getOwnPropertyDescriptor(ge,re))})}return Q}function We(Q){var te=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ge){return!1}}();return function(){var ge,re=w(Q);if(te){var ye=w(this).constructor;ge=Reflect.construct(re,arguments,ye)}else ge=re.apply(this,arguments);return b(this,ge)}}var it=function(Q){i(ge,hi);var te=We(ge);function ge(){var re;return h(this,ge),(re=te.call(this))._wrappedListeners={},re._messageCallbacks={},re}return v(ge,[{key:"addListenerForMessagesFromCallMachine",value:function(re,ye,Je){var St=this,Mt=function(Zt){if(Zt.data&&Zt.data.what==="iframe-call-message"&&(!Zt.data.callFrameId||Zt.data.callFrameId===ye)&&(!Zt.data.from||Zt.data.from!=="module")){var jn=Re({},Zt.data);if(delete jn.from,jn.callbackStamp&&St._messageCallbacks[jn.callbackStamp]){var xr=jn.callbackStamp;St._messageCallbacks[xr].call(Je,jn),delete St._messageCallbacks[xr]}delete jn.what,delete jn.callbackStamp,re.call(Je,jn)}};this._wrappedListeners[re]=Mt,window.addEventListener("message",Mt)}},{key:"addListenerForMessagesFromDailyJs",value:function(re,ye,Je){var St=function(Mt){if(!(!Mt.data||Mt.data.what!=="iframe-call-message"||!Mt.data.action||Mt.data.from&&Mt.data.from!=="module"||Mt.data.callFrameId&&ye&&Mt.data.callFrameId!==ye)){var Zt=Mt.data;re.call(Je,Zt)}};this._wrappedListeners[re]=St,window.addEventListener("message",St)}},{key:"sendMessageToCallMachine",value:function(re,ye,Je,St){var Mt=Re({},re);if(Mt.what="iframe-call-message",Mt.from="module",Mt.callFrameId=St,ye){var Zt=ao();this._messageCallbacks[Zt]=ye,Mt.callbackStamp=Zt}(Je?Je.contentWindow:window).postMessage(Mt,"*")}},{key:"sendMessageToDailyJs",value:function(re,ye,Je){re.what="iframe-call-message",re.callFrameId=Je,re.from="embedded",(ye?window:window.parent).postMessage(re,"*")}},{key:"removeListener",value:function(re){var ye=this._wrappedListeners[re];ye&&(window.removeEventListener("message",ye),delete this._wrappedListeners[re])}},{key:"forwardPackagedMessageToCallMachine",value:function(re,ye,Je){var St=Re({},re);St.callFrameId=Je,(ye?ye.contentWindow:window).postMessage(St,"*")}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(re,ye){var Je=function(St){if(St.data&&St.data.what==="iframe-call-message"&&(!St.data.callFrameId||St.data.callFrameId===ye)&&(!St.data.from||St.data.from!=="module")){var Mt=St.data;re(Mt)}};return this._wrappedListeners[re]=Je,window.addEventListener("message",Je),re}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(re){var ye=this._wrappedListeners[re];ye&&(window.removeEventListener("message",ye),delete this._wrappedListeners[re])}}]),ge}();function Pt(Q){var te=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ge){return!1}}();return function(){var ge,re=w(Q);if(te){var ye=w(this).constructor;ge=Reflect.construct(re,arguments,ye)}else ge=re.apply(this,arguments);return b(this,ge)}}var Nt=function(Q){i(ge,hi);var te=Pt(ge);function ge(){var re;return h(this,ge),re=te.call(this),e.callMachineToDailyJsEmitter=e.callMachineToDailyJsEmitter||new s.EventEmitter,e.dailyJsToCallMachineEmitter=e.dailyJsToCallMachineEmitter||new s.EventEmitter,re._wrappedListeners={},re._messageCallbacks={},re}return v(ge,[{key:"addListenerForMessagesFromCallMachine",value:function(re,ye,Je){this._addListener(re,e.callMachineToDailyJsEmitter,Je,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(re,ye,Je){this._addListener(re,e.dailyJsToCallMachineEmitter,Je,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(re,ye){this._sendMessage(re,e.dailyJsToCallMachineEmitter,"sending message to call machine",ye)}},{key:"sendMessageToDailyJs",value:function(re){this._sendMessage(re,e.callMachineToDailyJsEmitter,"sending message to daily-js")}},{key:"removeListener",value:function(re){var ye=this._wrappedListeners[re];ye&&(e.callMachineToDailyJsEmitter.removeListener("message",ye),e.dailyJsToCallMachineEmitter.removeListener("message",ye),delete this._wrappedListeners[re])}},{key:"_addListener",value:function(re,ye,Je,St){var Mt=this,Zt=function(jn){if(jn.callbackStamp&&Mt._messageCallbacks[jn.callbackStamp]){var xr=jn.callbackStamp;Mt._messageCallbacks[xr].call(Je,jn),delete Mt._messageCallbacks[xr]}re.call(Je,jn)};this._wrappedListeners[re]=Zt,ye.addListener("message",Zt)}},{key:"_sendMessage",value:function(re,ye,Je,St){if(St){var Mt=ao();this._messageCallbacks[Mt]=St,re.callbackStamp=Mt}ye.emit("message",re)}}]),ge}(),kt=Object.prototype.hasOwnProperty;function Ht(Q,te,ge){for(ge of Q.keys())if(Bt(ge,te))return ge}function Bt(Q,te){var ge,re,ye;if(Q===te)return!0;if(Q&&te&&(ge=Q.constructor)===te.constructor){if(ge===Date)return Q.getTime()===te.getTime();if(ge===RegExp)return Q.toString()===te.toString();if(ge===Array){if((re=Q.length)===te.length)for(;re--&&Bt(Q[re],te[re]););return re===-1}if(ge===Set){if(Q.size!==te.size)return!1;for(re of Q)if((ye=re)&&typeof ye=="object"&&!(ye=Ht(te,ye))||!te.has(ye))return!1;return!0}if(ge===Map){if(Q.size!==te.size)return!1;for(re of Q)if((ye=re[0])&&typeof ye=="object"&&!(ye=Ht(te,ye))||!Bt(re[1],te.get(ye)))return!1;return!0}if(ge===ArrayBuffer)Q=new Uint8Array(Q),te=new Uint8Array(te);else if(ge===DataView){if((re=Q.byteLength)===te.byteLength)for(;re--&&Q.getInt8(re)===te.getInt8(re););return re===-1}if(ArrayBuffer.isView(Q)){if((re=Q.byteLength)===te.byteLength)for(;re--&&Q[re]===te[re];);return re===-1}if(!ge||typeof Q=="object"){for(ge in re=0,Q)if(kt.call(Q,ge)&&++re&&!kt.call(te,ge)||!(ge in te&&Bt(Q[ge],te[ge])))return!1;return Object.keys(te).length===re}}return Q!=Q&&te!=te}var Yt="replace",an=[Yt,"shallow-merge"],En=function(){function Q(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=te.data,re=te.mergeStrategy,ye=re===void 0?Yt:re;h(this,Q),Q._validateMergeStrategy(ye),Q._validateData(ge,ye),this.mergeStrategy=ye,this.data=ge}return v(Q,[{key:"isNoOp",value:function(){return Q.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(te,ge){return Object.keys(te).length===0&&ge==="shallow-merge"}},{key:"_validateMergeStrategy",value:function(te){if(!an.includes(te))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(an,"]"))}},{key:"_validateData",value:function(te,ge){if(!function(Mt){if(Mt==null||d(Mt)!=="object")return!1;var Zt=Object.getPrototypeOf(Mt);return Zt==null||Zt===Object.prototype}(te))throw Error("Meeting session data must be a plain (map-like) object");var re;try{if(re=JSON.stringify(te),ge===Yt){var ye=JSON.parse(re);Bt(ye,te)||console.warn("The meeting session data provided will be modified when serialized.",ye,te)}else if(ge==="shallow-merge"){for(var Je in te)if(Object.hasOwnProperty.call(te,Je)&&te[Je]!==void 0){var St=JSON.parse(JSON.stringify(te[Je]));Bt(te[Je],St)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",St,te[Je])}}}catch(Mt){throw Error("Meeting session data must be serializable to JSON: ".concat(Mt))}if(re.length>102400)throw Error("Meeting session data is too large (".concat(re.length," characters). Maximum size suppported is ").concat(102400,"."))}}]),Q}(),vn=function(Q){return Function.toString.call(Q).indexOf("[native code]")!==-1},ar=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Q){return!1}},Er=u(function(Q){function te(ge,re,ye){return ar()?Q.exports=te=Reflect.construct:Q.exports=te=function(Je,St,Mt){var Zt=[null];Zt.push.apply(Zt,St);var jn=new(Function.bind.apply(Je,Zt));return Mt&&r(jn,Mt.prototype),jn},te.apply(null,arguments)}Q.exports=te}),Dr=u(function(Q){function te(ge){var re=typeof Map=="function"?new Map:void 0;return Q.exports=te=function(ye){if(ye===null||!vn(ye))return ye;if(typeof ye!="function")throw new TypeError("Super expression must either be null or a function");if(re!==void 0){if(re.has(ye))return re.get(ye);re.set(ye,Je)}function Je(){return Er(ye,arguments,w(this).constructor)}return Je.prototype=Object.create(ye.prototype,{constructor:{value:Je,enumerable:!1,writable:!0,configurable:!0}}),r(Je,ye)},te(ge)}Q.exports=te});function Lr(Q){var te=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ge){return!1}}();return function(){var ge,re=w(Q);if(te){var ye=w(this).constructor;ge=Reflect.construct(re,arguments,ye)}else ge=re.apply(this,arguments);return b(this,ge)}}var no=function(){function Q(){h(this,Q),this._currentLoad=null}return v(Q,[{key:"load",value:function(te,ge,re,ye){if(this.loaded)return window._dailyCallObjectSetup(te),void re(!0);(function(Je,St){window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.callFrameId=Je,window._dailyConfig.avoidEval=St})(te,ge),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new bi(function(){re(!1)},ye),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel()}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),Q}(),ko=3,bi=function(){function Q(te,ge){h(this,Q),this._attemptsRemaining=ko,this._currentAttempt=null,this._successCallback=te,this._failureCallback=ge}return v(Q,[{key:"start",value:function(){var te=this;this._currentAttempt||(this._currentAttempt=new li(this._successCallback,function ge(re){te._currentAttempt.cancelled||(te._attemptsRemaining--,te._failureCallback(re,te._attemptsRemaining>0),te._attemptsRemaining<=0||setTimeout(function(){te._currentAttempt.cancelled||(te._currentAttempt=new li(te._successCallback,ge),te._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),Q}(),ei=function(Q){i(ge,Q);var te=Lr(ge);function ge(){return h(this,ge),te.apply(this,arguments)}return ge}(Dr(Error)),li=function(){function Q(te,ge){h(this,Q),this._loadAttemptImpl=wr()||!_dailyConfig.avoidEval?new Vi(te,ge):new Qi(te,ge)}return v(Q,[{key:"start",value:function(){var te=p(function*(){return this._loadAttemptImpl.start()});return function(){return te.apply(this,arguments)}}()},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),Q}(),Vi=function(){function Q(te,ge){h(this,Q),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache!="undefined"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._successCallback=te,this._failureCallback=ge}return v(Q,[{key:"start",value:function(){var te=p(function*(){var ge=qo();!(yield this._tryLoadFromIOSCache(ge))&&this._loadFromNetwork(ge)});return function(){return te.apply(this,arguments)}}()},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:function(){var te=p(function*(ge){if(!this._iosCache)return!1;try{var re=yield this._iosCache.get(ge);return!!this.cancelled||!!re&&(re.code?(Function('"use strict";'+re.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=re.refetchHeaders,!1))}catch(ye){return!1}});return function(ge){return te.apply(this,arguments)}}()},{key:"_loadFromNetwork",value:function(){var te=p(function*(ge){var re=this;this._networkTimeout=setTimeout(function(){re._networkTimedOut=!0,re._failureCallback("Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(ge))},2e4);try{var ye=this._refetchHeaders?{headers:this._refetchHeaders}:{},Je=yield fetch(ge,ye);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new ei;var St=yield this._getBundleCodeFromResponse(ge,Je);if(this.cancelled)throw new ei;Function('"use strict";'+St)(),this._iosCache&&this._iosCache.set(ge,St,Je.headers),this.succeeded=!0,this._successCallback()}catch(Mt){if(clearTimeout(this._networkTimeout),Mt instanceof ei||this.cancelled||this._networkTimedOut)return;this._failureCallback("Failed to load call object bundle ".concat(ge,": ").concat(Mt))}});return function(ge){return te.apply(this,arguments)}}()},{key:"_getBundleCodeFromResponse",value:function(){var te=p(function*(ge,re){if(re.ok)return yield re.text();if(this._iosCache&&re.status===304)return(yield this._iosCache.renew(ge,re.headers)).code;throw new Error("Received ".concat(re.status," response"))});return function(ge,re){return te.apply(this,arguments)}}()}]),Q}(),Qi=function(){function Q(te,ge){h(this,Q),this.cancelled=!1,this.succeeded=!1,this._successCallback=te,this._failureCallback=ge,this._attemptId=ao(),this._networkTimeout=null,this._scriptElement=null}return v(Q,[{key:"start",value:function(){var te=p(function*(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var ge=qo();(typeof document=="undefined"?"undefined":d(document))==="object"?this._startLoading(ge):this._failureCallback("Call object bundle must be loaded in a DOM/web context")});return function(){return te.apply(this,arguments)}}()},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(te){var ge=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){ge._stopLoading(),ge._failureCallback("Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(te))},2e4);var re=document.getElementsByTagName("head")[0],ye=document.createElement("script");this._scriptElement=ye,ye.onload=p(function*(){ge._stopLoading(),ge.succeeded=!0,ge._successCallback()}),ye.onerror=function(){var Je=p(function*(St){ge._stopLoading(),ge._failureCallback("Failed to load call object bundle ".concat(St.target.src))});return function(St){return Je.apply(this,arguments)}}(),ye.src=te,re.appendChild(ye)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),Q}(),ua=function(Q,te){for(var ge=-1,re=Q==null?0:Q.length,ye=0,Je=[];++ge<re;){var St=Q[ge];te(St,ge,Q)&&(Je[ye++]=St)}return Je},Oi=function(Q){return function(te,ge,re){for(var ye=-1,Je=Object(te),St=re(te),Mt=St.length;Mt--;){var Zt=St[Q?Mt:++ye];if(ge(Je[Zt],Zt,Je)===!1)break}return te}}(),_a=function(Q,te){for(var ge=-1,re=Array(Q);++ge<Q;)re[ge]=te(ge);return re},pa=typeof O=="object"&&O&&O.Object===Object&&O,Ra=typeof self=="object"&&self&&self.Object===Object&&self,Si=pa||Ra||Function("return this")(),yi=Si.Symbol,Wa=Object.prototype,ot=Wa.hasOwnProperty,at=Wa.toString,Ct=yi?yi.toStringTag:void 0,ln=function(Q){var te=ot.call(Q,Ct),ge=Q[Ct];try{Q[Ct]=void 0;var re=!0}catch(Je){}var ye=at.call(Q);return re&&(te?Q[Ct]=ge:delete Q[Ct]),ye},yn=Object.prototype.toString,Dn=function(Q){return yn.call(Q)},Ln="[object Null]",Jn="[object Undefined]",rr=yi?yi.toStringTag:void 0,Cr=function(Q){return Q==null?Q===void 0?Jn:Ln:rr&&rr in Object(Q)?ln(Q):Dn(Q)},sr=function(Q){return Q!=null&&typeof Q=="object"},mo="[object Arguments]",po=function(Q){return sr(Q)&&Cr(Q)==mo},Hr=Object.prototype,Xr=Hr.hasOwnProperty,Ir=Hr.propertyIsEnumerable,Ur=po(function(){return arguments}())?po:function(Q){return sr(Q)&&Xr.call(Q,"callee")&&!Ir.call(Q,"callee")},mr=Array.isArray,ro=function(){return!1},co=u(function(Q,te){var ge=te&&!te.nodeType&&te,re=ge&&Q&&!Q.nodeType&&Q,ye=re&&re.exports===ge?Si.Buffer:void 0,Je=(ye?ye.isBuffer:void 0)||ro;Q.exports=Je}),j=9007199254740991,T=/^(?:0|[1-9]\d*)$/,_=function(Q,te){var ge=typeof Q;return!!(te=te==null?j:te)&&(ge=="number"||ge!="symbol"&&T.test(Q))&&Q>-1&&Q%1==0&&Q<te},J=9007199254740991,oe=function(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=J},ve={};ve["[object Float32Array]"]=ve["[object Float64Array]"]=ve["[object Int8Array]"]=ve["[object Int16Array]"]=ve["[object Int32Array]"]=ve["[object Uint8Array]"]=ve["[object Uint8ClampedArray]"]=ve["[object Uint16Array]"]=ve["[object Uint32Array]"]=!0,ve["[object Arguments]"]=ve["[object Array]"]=ve["[object ArrayBuffer]"]=ve["[object Boolean]"]=ve["[object DataView]"]=ve["[object Date]"]=ve["[object Error]"]=ve["[object Function]"]=ve["[object Map]"]=ve["[object Number]"]=ve["[object Object]"]=ve["[object RegExp]"]=ve["[object Set]"]=ve["[object String]"]=ve["[object WeakMap]"]=!1;var xe=function(Q){return sr(Q)&&oe(Q.length)&&!!ve[Cr(Q)]},Ke=function(Q){return function(te){return Q(te)}},qe=u(function(Q,te){var ge=te&&!te.nodeType&&te,re=ge&&Q&&!Q.nodeType&&Q,ye=re&&re.exports===ge&&pa.process,Je=function(){try{var St=re&&re.require&&re.require("util").types;return St||ye&&ye.binding&&ye.binding("util")}catch(Mt){}}();Q.exports=Je}),vt=qe&&qe.isTypedArray,It=vt?Ke(vt):xe,un=Object.prototype.hasOwnProperty,On=function(Q,te){var ge=mr(Q),re=!ge&&Ur(Q),ye=!ge&&!re&&co(Q),Je=!ge&&!re&&!ye&&It(Q),St=ge||re||ye||Je,Mt=St?_a(Q.length,String):[],Zt=Mt.length;for(var jn in Q)!te&&!un.call(Q,jn)||St&&(jn=="length"||ye&&(jn=="offset"||jn=="parent")||Je&&(jn=="buffer"||jn=="byteLength"||jn=="byteOffset")||_(jn,Zt))||Mt.push(jn);return Mt},dn=Object.prototype,In=function(Q){var te=Q&&Q.constructor;return Q===(typeof te=="function"&&te.prototype||dn)},Qn=function(Q,te){return function(ge){return Q(te(ge))}}(Object.keys,Object),dr=Object.prototype.hasOwnProperty,Gr=function(Q){if(!In(Q))return Qn(Q);var te=[];for(var ge in Object(Q))dr.call(Q,ge)&&ge!="constructor"&&te.push(ge);return te},Kr=function(Q){var te=typeof Q;return Q!=null&&(te=="object"||te=="function")},eo="[object AsyncFunction]",qr="[object Function]",so="[object GeneratorFunction]",oo="[object Proxy]",ti=function(Q){if(!Kr(Q))return!1;var te=Cr(Q);return te==qr||te==so||te==eo||te==oo},_r=function(Q){return Q!=null&&oe(Q.length)&&!ti(Q)},To=function(Q){return _r(Q)?On(Q):Gr(Q)},Co=function(Q,te){return function(ge,re){if(ge==null)return ge;if(!_r(ge))return Q(ge,re);for(var ye=ge.length,Je=te?ye:-1,St=Object(ge);(te?Je--:++Je<ye)&&re(St[Je],Je,St)!==!1;);return ge}}(function(Q,te){return Q&&Oi(Q,te,To)}),Ei=function(Q,te){var ge=[];return Co(Q,function(re,ye,Je){te(re,ye,Je)&&ge.push(re)}),ge},ni=function(){this.__data__=[],this.size=0},pi=function(Q,te){return Q===te||Q!=Q&&te!=te},Bi=function(Q,te){for(var ge=Q.length;ge--;)if(pi(Q[ge][0],te))return ge;return-1},_i=Array.prototype.splice,Qo=function(Q){var te=this.__data__,ge=Bi(te,Q);return!(ge<0||(ge==te.length-1?te.pop():_i.call(te,ge,1),--this.size,0))},ci=function(Q){var te=this.__data__,ge=Bi(te,Q);return ge<0?void 0:te[ge][1]},Xi=function(Q){return Bi(this.__data__,Q)>-1},Ri=function(Q,te){var ge=this.__data__,re=Bi(ge,Q);return re<0?(++this.size,ge.push([Q,te])):ge[re][1]=te,this};function yo(Q){var te=-1,ge=Q==null?0:Q.length;for(this.clear();++te<ge;){var re=Q[te];this.set(re[0],re[1])}}yo.prototype.clear=ni,yo.prototype.delete=Qo,yo.prototype.get=ci,yo.prototype.has=Xi,yo.prototype.set=Ri;var go=yo,Di=function(){this.__data__=new go,this.size=0},Ui=function(Q){var te=this.__data__,ge=te.delete(Q);return this.size=te.size,ge},Ki=function(Q){return this.__data__.get(Q)},Mi,ma=function(Q){return this.__data__.has(Q)},Fi=Si["__core-js_shared__"],Pa=(Mi=/[^.]+$/.exec(Fi&&Fi.keys&&Fi.keys.IE_PROTO||""))?"Symbol(src)_1."+Mi:"",Ca=function(Q){return!!Pa&&Pa in Q},ka=Function.prototype.toString,sa=function(Q){if(Q!=null){try{return ka.call(Q)}catch(te){}try{return Q+""}catch(te){}}return""},Sa=/^\[object .+?Constructor\]$/,Na=Function.prototype,Mn=Object.prototype,$r=Na.toString,uo=Mn.hasOwnProperty,Bo=RegExp("^"+$r.call(uo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uo=function(Q){return!(!Kr(Q)||Ca(Q))&&(ti(Q)?Bo:Sa).test(sa(Q))},Hi=function(Q,te){return Q==null?void 0:Q[te]},$i=function(Q,te){var ge=Hi(Q,te);return Uo(ge)?ge:void 0},Oa=$i(Si,"Map"),ya=$i(Object,"create"),Ma=function(){this.__data__=ya?ya(null):{},this.size=0},Xa=function(Q){var te=this.has(Q)&&delete this.__data__[Q];return this.size-=te?1:0,te},Za="__lodash_hash_undefined__",La=Object.prototype.hasOwnProperty,as=function(Q){var te=this.__data__;if(ya){var ge=te[Q];return ge===Za?void 0:ge}return La.call(te,Q)?te[Q]:void 0},Ka=Object.prototype.hasOwnProperty,ss=function(Q){var te=this.__data__;return ya?te[Q]!==void 0:Ka.call(te,Q)},na="__lodash_hash_undefined__",vl=function(Q,te){var ge=this.__data__;return this.size+=this.has(Q)?0:1,ge[Q]=ya&&te===void 0?na:te,this};function ls(Q){var te=-1,ge=Q==null?0:Q.length;for(this.clear();++te<ge;){var re=Q[te];this.set(re[0],re[1])}}ls.prototype.clear=Ma,ls.prototype.delete=Xa,ls.prototype.get=as,ls.prototype.has=ss,ls.prototype.set=vl;var el=ls,ga=function(){this.size=0,this.__data__={hash:new el,map:new(Oa||go),string:new el}},tl=function(Q){var te=typeof Q;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?Q!=="__proto__":Q===null},ys=function(Q,te){var ge=Q.__data__;return tl(te)?ge[typeof te=="string"?"string":"hash"]:ge.map},nl=function(Q){var te=ys(this,Q).delete(Q);return this.size-=te?1:0,te},Es=function(Q){return ys(this,Q).get(Q)},Ps=function(Q){return ys(this,Q).has(Q)},xa=function(Q,te){var ge=ys(this,Q),re=ge.size;return ge.set(Q,te),this.size+=ge.size==re?0:1,this};function cs(Q){var te=-1,ge=Q==null?0:Q.length;for(this.clear();++te<ge;){var re=Q[te];this.set(re[0],re[1])}}cs.prototype.clear=ga,cs.prototype.delete=nl,cs.prototype.get=Es,cs.prototype.has=Ps,cs.prototype.set=xa;var Ba=cs,bl=200,Hl=function(Q,te){var ge=this.__data__;if(ge instanceof go){var re=ge.__data__;if(!Oa||re.length<bl-1)return re.push([Q,te]),this.size=++ge.size,this;ge=this.__data__=new Ba(re)}return ge.set(Q,te),this.size=ge.size,this};function us(Q){var te=this.__data__=new go(Q);this.size=te.size}us.prototype.clear=Di,us.prototype.delete=Ui,us.prototype.get=Ki,us.prototype.has=ma,us.prototype.set=Hl;var Cs=us,Ol="__lodash_hash_undefined__",zl=function(Q){return this.__data__.set(Q,Ol),this},Ss=function(Q){return this.__data__.has(Q)};function Bs(Q){var te=-1,ge=Q==null?0:Q.length;for(this.__data__=new Ba;++te<ge;)this.add(Q[te])}Bs.prototype.add=Bs.prototype.push=zl,Bs.prototype.has=Ss;var yl=Bs,yc=function(Q,te){for(var ge=-1,re=Q==null?0:Q.length;++ge<re;)if(te(Q[ge],ge,Q))return!0;return!1},Gl=function(Q,te){return Q.has(te)},El=1,Yl=2,Us=function(Q,te,ge,re,ye,Je){var St=ge&El,Mt=Q.length,Zt=te.length;if(Mt!=Zt&&!(St&&Zt>Mt))return!1;var jn=Je.get(Q),xr=Je.get(te);if(jn&&xr)return jn==te&&xr==Q;var Fr=-1,bo=!0,Ni=ge&Yl?new yl:void 0;for(Je.set(Q,te),Je.set(te,Q);++Fr<Mt;){var wi=Q[Fr],Wi=te[Fr];if(re)var ia=St?re(Wi,wi,Fr,te,Q,Je):re(wi,Wi,Fr,Q,te,Je);if(ia!==void 0){if(ia)continue;bo=!1;break}if(Ni){if(!yc(te,function(No,Ns){if(!Gl(Ni,Ns)&&(wi===No||ye(wi,No,ge,re,Je)))return Ni.push(Ns)})){bo=!1;break}}else if(wi!==Wi&&!ye(wi,Wi,ge,re,Je)){bo=!1;break}}return Je.delete(Q),Je.delete(te),bo},Pl=Si.Uint8Array,js=function(Q){var te=-1,ge=Array(Q.size);return Q.forEach(function(re,ye){ge[++te]=[ye,re]}),ge},Fs=function(Q){var te=-1,ge=Array(Q.size);return Q.forEach(function(re){ge[++te]=re}),ge},rl=1,Cl=2,qa="[object Boolean]",ds="[object Date]",Jl="[object Error]",Ql="[object Map]",ja="[object Number]",Xl="[object RegExp]",ol="[object Set]",Ts="[object String]",Ws="[object Symbol]",il="[object ArrayBuffer]",fs="[object DataView]",la=yi?yi.prototype:void 0,$a=la?la.valueOf:void 0,Sl=function(Q,te,ge,re,ye,Je,St){switch(ge){case fs:if(Q.byteLength!=te.byteLength||Q.byteOffset!=te.byteOffset)return!1;Q=Q.buffer,te=te.buffer;case il:return!(Q.byteLength!=te.byteLength||!Je(new Pl(Q),new Pl(te)));case qa:case ds:case ja:return pi(+Q,+te);case Jl:return Q.name==te.name&&Q.message==te.message;case Xl:case Ts:return Q==te+"";case Ql:var Mt=js;case ol:var Zt=re&rl;if(Mt||(Mt=Fs),Q.size!=te.size&&!Zt)return!1;var jn=St.get(Q);if(jn)return jn==te;re|=Cl,St.set(Q,te);var xr=Us(Mt(Q),Mt(te),re,ye,Je,St);return St.delete(Q),xr;case Ws:if($a)return $a.call(Q)==$a.call(te)}return!1},Va=function(Q,te){for(var ge=-1,re=te.length,ye=Q.length;++ge<re;)Q[ye+ge]=te[ge];return Q},al=function(Q,te,ge){var re=te(Q);return mr(Q)?re:Va(re,ge(Q))},Zl=function(){return[]},sl=Object.prototype.propertyIsEnumerable,ql=Object.getOwnPropertySymbols,ec=ql?function(Q){return Q==null?[]:(Q=Object(Q),ua(ql(Q),function(te){return sl.call(Q,te)}))}:Zl,jl=function(Q){return al(Q,To,ec)},Tl=1,tc=Object.prototype.hasOwnProperty,ll=function(Q,te,ge,re,ye,Je){var St=ge&Tl,Mt=jl(Q),Zt=Mt.length;if(Zt!=jl(te).length&&!St)return!1;for(var jn=Zt;jn--;){var xr=Mt[jn];if(!(St?xr in te:tc.call(te,xr)))return!1}var Fr=Je.get(Q),bo=Je.get(te);if(Fr&&bo)return Fr==te&&bo==Q;var Ni=!0;Je.set(Q,te),Je.set(te,Q);for(var wi=St;++jn<Zt;){var Wi=Q[xr=Mt[jn]],ia=te[xr];if(re)var No=St?re(ia,Wi,xr,te,Q,Je):re(Wi,ia,xr,Q,te,Je);if(!(No===void 0?Wi===ia||ye(Wi,ia,ge,re,Je):No)){Ni=!1;break}wi||(wi=xr=="constructor")}if(Ni&&!wi){var Ns=Q.constructor,Ll=te.constructor;Ns!=Ll&&"constructor"in Q&&"constructor"in te&&!(typeof Ns=="function"&&Ns instanceof Ns&&typeof Ll=="function"&&Ll instanceof Ll)&&(Ni=!1)}return Je.delete(Q),Je.delete(te),Ni},cl=$i(Si,"DataView"),hs=$i(Si,"Promise"),ks=$i(Si,"Set"),ps=$i(Si,"WeakMap"),ul=sa(cl),nc=sa(Oa),rc=sa(hs),ms=sa(ks),Ds=sa(ps),Ua=Cr;(cl&&Ua(new cl(new ArrayBuffer(1)))!="[object DataView]"||Oa&&Ua(new Oa)!="[object Map]"||hs&&Ua(hs.resolve())!="[object Promise]"||ks&&Ua(new ks)!="[object Set]"||ps&&Ua(new ps)!="[object WeakMap]")&&(Ua=function(Q){var te=Cr(Q),ge=te=="[object Object]"?Q.constructor:void 0,re=ge?sa(ge):"";if(re)switch(re){case ul:return"[object DataView]";case nc:return"[object Map]";case rc:return"[object Promise]";case ms:return"[object Set]";case Ds:return"[object WeakMap]"}return te});var Dl=Ua,oc=1,Ml="[object Arguments]",Al="[object Array]",Ks="[object Object]",Aa=Object.prototype.hasOwnProperty,ic=function(Q,te,ge,re,ye,Je){var St=mr(Q),Mt=mr(te),Zt=St?Al:Dl(Q),jn=Mt?Al:Dl(te),xr=(Zt=Zt==Ml?Ks:Zt)==Ks,Fr=(jn=jn==Ml?Ks:jn)==Ks,bo=Zt==jn;if(bo&&co(Q)){if(!co(te))return!1;St=!0,xr=!1}if(bo&&!xr)return Je||(Je=new Cs),St||It(Q)?Us(Q,te,ge,re,ye,Je):Sl(Q,te,Zt,ge,re,ye,Je);if(!(ge&oc)){var Ni=xr&&Aa.call(Q,"__wrapped__"),wi=Fr&&Aa.call(te,"__wrapped__");if(Ni||wi){var Wi=Ni?Q.value():Q,ia=wi?te.value():te;return Je||(Je=new Cs),ye(Wi,ia,ge,re,Je)}}return!!bo&&(Je||(Je=new Cs),ll(Q,te,ge,re,ye,Je))},ac=function Q(te,ge,re,ye,Je){return te===ge||(te==null||ge==null||!sr(te)&&!sr(ge)?te!=te&&ge!=ge:ic(te,ge,re,ye,Q,Je))},$s=1,es=2,sc=function(Q,te,ge,re){var ye=ge.length,Je=ye,St=!re;if(Q==null)return!Je;for(Q=Object(Q);ye--;){var Mt=ge[ye];if(St&&Mt[2]?Mt[1]!==Q[Mt[0]]:!(Mt[0]in Q))return!1}for(;++ye<Je;){var Zt=(Mt=ge[ye])[0],jn=Q[Zt],xr=Mt[1];if(St&&Mt[2]){if(jn===void 0&&!(Zt in Q))return!1}else{var Fr=new Cs;if(re)var bo=re(jn,xr,Zt,Q,te,Fr);if(!(bo===void 0?ac(xr,jn,$s|es,re,Fr):bo))return!1}}return!0},wl=function(Q){return Q==Q&&!Kr(Q)},dl=function(Q){for(var te=To(Q),ge=te.length;ge--;){var re=te[ge],ye=Q[re];te[ge]=[re,ye,wl(ye)]}return te},fl=function(Q,te){return function(ge){return ge!=null&&ge[Q]===te&&(te!==void 0||Q in Object(ge))}},lc=function(Q){var te=dl(Q);return te.length==1&&te[0][2]?fl(te[0][0],te[0][1]):function(ge){return ge===Q||sc(ge,Q,te)}},cc="[object Symbol]",Ha=function(Q){return typeof Q=="symbol"||sr(Q)&&Cr(Q)==cc},Vs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Il=/^\w*$/,Ms=function(Q,te){if(mr(Q))return!1;var ge=typeof Q;return!(ge!="number"&&ge!="symbol"&&ge!="boolean"&&Q!=null&&!Ha(Q))||Il.test(Q)||!Vs.test(Q)||te!=null&&Q in Object(te)},uc="Expected a function";function Hs(Q,te){if(typeof Q!="function"||te!=null&&typeof te!="function")throw new TypeError(uc);var ge=function(){var re=arguments,ye=te?te.apply(this,re):re[0],Je=ge.cache;if(Je.has(ye))return Je.get(ye);var St=Q.apply(this,re);return ge.cache=Je.set(ye,St)||Je,St};return ge.cache=new(Hs.Cache||Ba),ge}Hs.Cache=Ba;var As=Hs,gs=500,dc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_l=/\\(\\)?/g,fc=function(Q){var te=As(Q,function(re){return ge.size===gs&&ge.clear(),re}),ge=te.cache;return te}(function(Q){var te=[];return Q.charCodeAt(0)===46&&te.push(""),Q.replace(dc,function(ge,re,ye,Je){te.push(ye?Je.replace(_l,"$1"):re||ge)}),te}),ws=function(Q,te){for(var ge=-1,re=Q==null?0:Q.length,ye=Array(re);++ge<re;)ye[ge]=te(Q[ge],ge,Q);return ye},hc=1/0,He=yi?yi.prototype:void 0,De=He?He.toString:void 0,Me=function Q(te){if(typeof te=="string")return te;if(mr(te))return ws(te,Q)+"";if(Ha(te))return De?De.call(te):"";var ge=te+"";return ge=="0"&&1/te==-hc?"-0":ge},st=function(Q){return Q==null?"":Me(Q)},dt=function(Q,te){return mr(Q)?Q:Ms(Q,te)?[Q]:fc(st(Q))},Rt=1/0,xt=function(Q){if(typeof Q=="string"||Ha(Q))return Q;var te=Q+"";return te=="0"&&1/Q==-Rt?"-0":te},jt=function(Q,te){for(var ge=0,re=(te=dt(te,Q)).length;Q!=null&&ge<re;)Q=Q[xt(te[ge++])];return ge&&ge==re?Q:void 0},_t=function(Q,te,ge){var re=Q==null?void 0:jt(Q,te);return re===void 0?ge:re},on=function(Q,te){return Q!=null&&te in Object(Q)},gn=function(Q,te,ge){for(var re=-1,ye=(te=dt(te,Q)).length,Je=!1;++re<ye;){var St=xt(te[re]);if(!(Je=Q!=null&&ge(Q,St)))break;Q=Q[St]}return Je||++re!=ye?Je:!!(ye=Q==null?0:Q.length)&&oe(ye)&&_(St,ye)&&(mr(Q)||Ur(Q))},Wn=function(Q,te){return Q!=null&&gn(Q,te,on)},or=1,lr=2,An=function(Q,te){return Ms(Q)&&wl(te)?fl(xt(Q),te):function(ge){var re=_t(ge,Q);return re===void 0&&re===te?Wn(ge,Q):ac(te,re,or|lr)}},xn=function(Q){return Q},Bn=function(Q){return function(te){return te==null?void 0:te[Q]}},fn=function(Q){return function(te){return jt(te,Q)}},Or=function(Q){return Ms(Q)?Bn(xt(Q)):fn(Q)},kr=function(Q){return typeof Q=="function"?Q:Q==null?xn:typeof Q=="object"?mr(Q)?An(Q[0],Q[1]):lc(Q):Or(Q)},Mo=function(Q,te){return(mr(Q)?ua:Ei)(Q,kr(te))},vo=function(Q,te){var ge=-1,re=_r(Q)?Array(Q.length):[];return Co(Q,function(ye,Je,St){re[++ge]=te(ye,Je,St)}),re},ii=function(Q,te){var ge=Q.length;for(Q.sort(te);ge--;)Q[ge]=Q[ge].value;return Q},Wo=function(Q,te){if(Q!==te){var ge=Q!==void 0,re=Q===null,ye=Q==Q,Je=Ha(Q),St=te!==void 0,Mt=te===null,Zt=te==te,jn=Ha(te);if(!Mt&&!jn&&!Je&&Q>te||Je&&St&&Zt&&!Mt&&!jn||re&&St&&Zt||!ge&&Zt||!ye)return 1;if(!re&&!Je&&!jn&&Q<te||jn&&ge&&ye&&!re&&!Je||Mt&&ge&&ye||!St&&ye||!Zt)return-1}return 0},Go=function(Q,te,ge){for(var re=-1,ye=Q.criteria,Je=te.criteria,St=ye.length,Mt=ge.length;++re<St;){var Zt=Wo(ye[re],Je[re]);if(Zt)return re>=Mt?Zt:Zt*(ge[re]=="desc"?-1:1)}return Q.index-te.index},Ao=function(Q,te,ge){te=te.length?ws(te,function(Je){return mr(Je)?function(St){return jt(St,Je.length===1?Je[0]:Je)}:Je}):[xn];var re=-1;te=ws(te,Ke(kr));var ye=vo(Q,function(Je,St,Mt){return{criteria:ws(te,function(Zt){return Zt(Je)}),index:++re,value:Je}});return ii(ye,function(Je,St){return Go(Je,St,ge)})},ui=function(Q,te,ge,re){return Q==null?[]:(mr(te)||(te=te==null?[]:[te]),mr(ge=re?void 0:ge)||(ge=ge==null?[]:[ge]),Ao(Q,te,ge))},gr=function(Q,te,ge){return mi(Q.local,te,ge)===!0},fo=function(Q,te,ge){return Q.local.streams&&Q.local.streams[te]&&Q.local.streams[te].stream&&Q.local.streams[te].stream["get".concat(ge==="video"?"Video":"Audio","Tracks")]()[0]},So=function(Q,te,ge,re){var ye=Ro(Q,te,ge,re);return ye&&ye.pendingTrack},mi=function(Q,te,ge){if(!Q)return!1;var re=function(Je){switch(Je){case"avatar":return!0;case"staged":return Je;default:return!!Je}},ye=Q.public.subscribedTracks;return ye&&ye[te]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(ge)===-1&&ye[te].custom?[!0,"staged"].includes(ye[te].custom)?re(ye[te].custom):re(ye[te].custom[ge]):re(ye[te][ge]):!ye||re(ye.ALL)},Ro=function(Q,te,ge,re){var ye=ui(Mo(Q.streams,function(Je){return Je.participantId===te&&Je.type===ge&&Je.pendingTrack&&Je.pendingTrack.kind===re}),"starttime","desc");return ye&&ye[0]},Pi=function(Q,te){var ge=Q.local.public.customTracks;if(ge&&ge[te])return ge[te].track};function Ci(Q){for(var te=store.getState(),ge=0,re=["cam","screen"];ge<re.length;ge++)for(var ye=re[ge],Je=0,St=["video","audio"];Je<St.length;Je++){var Mt=St[Je],Zt=ye==="cam"?Mt:"screen".concat(Mt.charAt(0).toUpperCase()+Mt.slice(1)),jn=Q.tracks[Zt];if(jn){var xr=Q.local?fo(te,ye,Mt):So(te,Q.session_id,ye,Mt);jn.state==="playable"&&(jn.track=xr),jn.persistentTrack=xr}}}function ra(Q){try{var te=store.getState();for(var ge in Q.tracks)if(!ca(ge)){var re=Q.tracks[ge].kind;if(re){var ye=Q.tracks[ge];if(ye){var Je=Q.local?Pi(te,ge,re):So(te,Q.session_id,ge,re);ye.state==="playable"&&(Q.tracks[ge].track=Je),ye.persistentTrack=Je}}else console.error("unknown type for custom track")}}catch(St){console.error(St)}}function ca(Q){return["video","audio","screenVideo","screenAudio"].includes(Q)}function va(Q,te){var ge=store.getState();if(Q.local){if(Q.audio)try{Q.audioTrack=ge.local.streams.cam.stream.getAudioTracks()[0],Q.audioTrack||(Q.audio=!1)}catch(jn){}if(Q.video)try{Q.videoTrack=ge.local.streams.cam.stream.getVideoTracks()[0],Q.videoTrack||(Q.video=!1)}catch(jn){}if(Q.screen)try{Q.screenVideoTrack=ge.local.streams.screen.stream.getVideoTracks()[0],Q.screenAudioTrack=ge.local.streams.screen.stream.getAudioTracks()[0],Q.screenVideoTrack||Q.screenAudioTrack||(Q.screen=!1)}catch(jn){}}else{var re=!0;try{var ye=ge.participants[Q.session_id];ye&&ye.public&&ye.public.rtcType&&ye.public.rtcType.impl==="peer-to-peer"&&ye.private&&!["connected","completed"].includes(ye.private.peeringState)&&(re=!1)}catch(jn){console.error(jn)}if(!re)return Q.audio=!1,Q.audioTrack=!1,Q.video=!1,Q.videoTrack=!1,Q.screen=!1,void(Q.screenTrack=!1);try{if(ge.streams,Q.audio&&gr(ge,Q.session_id,"cam-audio")){var Je=So(ge,Q.session_id,"cam","audio");Je&&(te&&te.audioTrack&&te.audioTrack.id===Je.id?Q.audioTrack=Je:Je.muted||(Q.audioTrack=Je)),Q.audioTrack||(Q.audio=!1)}if(Q.video&&gr(ge,Q.session_id,"cam-video")){var St=So(ge,Q.session_id,"cam","video");St&&(te&&te.videoTrack&&te.videoTrack.id===St.id?Q.videoTrack=St:St.muted||(Q.videoTrack=St)),Q.videoTrack||(Q.video=!1)}if(Q.screen&&gr(ge,Q.session_id,"screen-audio")){var Mt=So(ge,Q.session_id,"screen","audio");Mt&&(te&&te.screenAudioTrack&&te.screenAudioTrack.id===Mt.id?Q.screenAudioTrack=Mt:Mt.muted||(Q.screenAudioTrack=Mt))}if(Q.screen&&gr(ge,Q.session_id,"screen-video")){var Zt=So(ge,Q.session_id,"screen","video");Zt&&(te&&te.screenVideoTrack&&te.screenVideoTrack.id===Zt.id?Q.screenVideoTrack=Zt:Zt.muted||(Q.screenVideoTrack=Zt))}Q.screenVideoTrack||Q.screenAudioTrack||(Q.screen=!1)}catch(jn){console.error("unexpected error matching up tracks",jn)}}}function za(Q,te){var ge=Object.keys(Q);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(Q);te&&(re=re.filter(function(ye){return Object.getOwnPropertyDescriptor(Q,ye).enumerable})),ge.push.apply(ge,re)}return ge}function Xo(Q){for(var te=1;te<arguments.length;te++){var ge=arguments[te]!=null?arguments[te]:{};te%2?za(Object(ge),!0).forEach(function(re){E(Q,re,ge[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(ge)):za(Object(ge)).forEach(function(re){Object.defineProperty(Q,re,Object.getOwnPropertyDescriptor(ge,re))})}return Q}function ts(Q){var te=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ge){return!1}}();return function(){var ge,re=w(Q);if(te){var ye=w(this).constructor;ge=Reflect.construct(re,arguments,ye)}else ge=re.apply(this,arguments);return b(this,ge)}}function Ea(Q,te){var ge;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(ge=function(Zt,jn){if(!!Zt){if(typeof Zt=="string")return zi(Zt,jn);var xr=Object.prototype.toString.call(Zt).slice(8,-1);if(xr==="Object"&&Zt.constructor&&(xr=Zt.constructor.name),xr==="Map"||xr==="Set")return Array.from(Zt);if(xr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xr))return zi(Zt,jn)}}(Q))||te&&Q&&typeof Q.length=="number"){ge&&(Q=ge);var re=0,ye=function(){};return{s:ye,n:function(){return re>=Q.length?{done:!0}:{done:!1,value:Q[re++]}},e:function(Zt){throw Zt},f:ye}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Je,St=!0,Mt=!1;return{s:function(){ge=Q[Symbol.iterator]()},n:function(){var Zt=ge.next();return St=Zt.done,Zt},e:function(Zt){Mt=!0,Je=Zt},f:function(){try{St||ge.return==null||ge.return()}finally{if(Mt)throw Je}}}}function zi(Q,te){(te==null||te>Q.length)&&(te=Q.length);for(var ge=0,re=new Array(te);ge<te;ge++)re[ge]=Q[ge];return re}var vs="video",zs="voice",Zi=3,ns=wr()?{data:{}}:{data:{},topology:"none"},bs={present:0,hidden:0},Is={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Rl=["state","volume","simulcastEncodings"],hl={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},rs={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string"}},Ga={customTrayButtons:{validate:pl,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(rs))},url:{validate:function(Q){return typeof Q=="string"},help:"url should be a string"},baseUrl:{validate:function(Q){return typeof Q=="string"},help:"baseUrl should be a string"},token:{validate:function(Q){return typeof Q=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(Q){return window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.experimentalGetUserMediaConstraintsModify=Q.experimentalGetUserMediaConstraintsModify,window._dailyConfig.userMediaVideoConstraints=Q.userMediaVideoConstraints,window._dailyConfig.userMediaAudioConstraints=Q.userMediaAudioConstraints,window._dailyConfig.callObjectBundleUrlOverride=Q.callObjectBundleUrlOverride,!0}},reactNativeConfig:{validate:function(Q){return function te(ge,re){if(re===void 0)return!1;switch(d(re)){case"string":return d(ge)===re;case"object":if(d(ge)!=="object")return!1;for(var ye in ge)if(!te(ge[ye],re[ye]))return!1;return!0;default:return!1}}(Q,hl)},help:"reactNativeConfig should look like ".concat(JSON.stringify(hl),", all fields optional")},lang:{validate:function(Q){return["de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","ru","sv","tr","user"].includes(Q)},help:"language not supported. Options are: de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, ru, sv, tr, user"},userName:!0,userData:{validate:function(Q){try{return pc(Q),!0}catch(te){return console.error(te),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(Q,te){return te._preloadCache.videoDeviceId=Q,!0}},audioSource:{validate:function(Q,te){return te._preloadCache.audioDeviceId=Q,!0}},subscribeToTracksAutomatically:{validate:function(Q,te){return te._preloadCache.subscribeToTracksAutomatically=Q,!0}},theme:{validate:function(Q){var te=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],ge=function(re){for(var ye=0,Je=Object.keys(re);ye<Je.length;ye++){var St=Je[ye];if(!te.includes(St))return console.error('unsupported color "'.concat(St,'". Valid colors: ').concat(te.join(", "))),!1;if(!re[St].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(St,' theme color should be provided in valid hex color format. Received: "').concat(re[St],'"')),!1}return!0};return d(Q)==="object"&&("light"in Q&&"dark"in Q||"colors"in Q)?"light"in Q&&"dark"in Q?"colors"in Q.light?"colors"in Q.dark?ge(Q.light.colors)&&ge(Q.dark.colors):(console.error('Dark theme is missing "colors" property.',Q),!1):(console.error('Light theme is missing "colors" property.',Q),!1):ge(Q.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',Q),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(Q){if("grid"in Q){var te=Q.grid;if("maxTilesPerPage"in te){if(!Number.isInteger(te.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(te.maxTilesPerPage,".")),!1;if(te.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in te){if(!Number.isInteger(te.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(te.minTilesPerPage,".")),!1;if(te.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in te&&te.minTilesPerPage>te.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(Q){return Ys(Q,{allowAllParticipantsKey:!1})},help:Os({allowAllParticipantsKey:!1})},inputSettings:{validate:function(Q){return Nl(Q)},help:Js()},layout:{validate:function(Q){return Q==="custom-v1"||Q==="browser"||Q==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"}},Gs={styles:{validate:function(Q){for(var te in Q)if(te!=="cam"&&te!=="screen")return!1;if(Q.cam){for(var te in Q.cam)if(te!=="div"&&te!=="video")return!1}if(Q.screen){for(var te in Q.screen)if(te!=="div"&&te!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(Q,te,ge){if(te._preloadCache.subscribeToTracksAutomatically)return!1;var re=[!0,!1,"staged"];if(re.includes(Q)||!wr()&&Q==="avatar")return!0;var ye=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function Je(St){var Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var Zt in St)if(Zt==="custom"){if(!re.includes(St[Zt])&&!Je(St[Zt],!0))return!1}else{var jn=!Mt&&!ye.includes(Zt),xr=!re.includes(St[Zt]);if(jn||xr)return!1}return!0}(Q)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(wr()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,eject:!0,updatePermissions:{validate:function(Q){for(var te=0,ge=Object.entries(Q);te<ge.length;te++){var re=f(ge[te],2),ye=re[0],Je=re[1];switch(ye){case"hasPresence":if(typeof Je!="boolean")return!1;break;case"canSend":if(Je instanceof Set){var St,Mt=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],Zt=Ea(Je);try{for(Zt.s();!(St=Zt.n()).done;){var jn=St.value;if(!Mt.includes(jn))return!1}}catch(xr){Zt.e(xr)}finally{Zt.f()}}else if(typeof Je!="boolean")return!1;break;default:return!1}}return!0},help:"updatePermissions can take hasPresence and canSend permissions. hasPresence must be a boolean. canSend can be a boolean or an array of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio)."}};function _s(Q){var te={};for(var ge in Q)Q[ge]instanceof MediaStreamTrack?te[ge]=Pr:(ge==="dailyConfig"&&(Q[ge].modifyLocalSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyLocalSdpHook=Q[ge].modifyLocalSdpHook),delete Q[ge].modifyLocalSdpHook),Q[ge].modifyRemoteSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyRemoteSdpHook=Q[ge].modifyRemoteSdpHook),delete Q[ge].modifyRemoteSdpHook)),te[ge]=Q[ge]);return te}function di(){if(wr())throw new Error("This daily-js method is not currently supported in React Native")}function Rs(){if(!wr())throw new Error("This daily-js method is only supported in React Native")}function pc(Q){if(Q===void 0)return!0;var te;if(typeof Q=="string")te=Q;else try{te=JSON.stringify(Q),se(JSON.parse(te),Q)||console.warn("The userData provided will be modified when serialized.")}catch(ge){throw Error("userData must be serializable to JSON: ".concat(ge))}if(te.length>Sr)throw Error("userData is too large (".concat(te.length," characters). Maximum size suppported is ").concat(Sr,"."));return!0}function Ys(Q,te){for(var ge=te.allowAllParticipantsKey,re=function(Fr){var bo=["local"];return ge||bo.push("*"),Fr&&!bo.includes(Fr)},ye=function(Fr){return!!(Fr.layer===void 0||Number.isInteger(Fr.layer)&&Fr.layer>=0||Fr.layer==="inherit")},Je=function(Fr){return!!Fr&&!(Fr.video&&!ye(Fr.video))&&!(Fr.screenVideo&&!ye(Fr.screenVideo))},St=0,Mt=Object.entries(Q);St<Mt.length;St++){var Zt=f(Mt[St],2),jn=Zt[0],xr=Zt[1];if(!re(jn)||!Je(xr))return!1}return!0}function Nl(Q){return d(Q)==="object"&&!(!Q.video||d(Q.video)!=="object")&&!!function(te){var ge=["type","config","publish"];return!te||d(te)!=="object"||Object.keys(te).length===0||te.type&&!function(re){return typeof re!="string"?!1:Object.values(yr).includes(re)?!0:(console.error("inputSettings video processor type invalid"),!1)}(te.type)||te.publish!==void 0&&typeof te.publish!="boolean"||(typeof te.publish=="boolean"&&console.warn("inputSettings.video.processor: publish key has been deprecated; it will be ignored"),te.config&&(d(te.config)!=="object"||!function(re,ye){var Je=Object.keys(ye);if(Je.length===0)return!0;var St="invalid object in inputSettings -> video -> processor -> config";switch(re){case yr.BGBLUR:return Je.length>1||Je[0]!=="strength"?(console.error(St),!1):!(typeof ye.strength!="number"||ye.strength<=0||ye.strength>1||isNaN(ye.strength))||(console.error("".concat(St,"; expected: {0 < strength <= 1}, got: ").concat(ye.strength)),!1);case yr.BGIMAGE:return!(ye.source!==void 0&&!function(Mt){if(Mt.source==="default")return Mt.type="default",!0;if(Ai(Mt.source))return Mt.type="url",!!function(xr){var Fr=new URL(xr),bo=Fr.pathname;if(Fr.protocol==="data:")try{var Ni=bo.substring(bo.indexOf(":")+1,bo.indexOf(";")),wi=Ni.split("/")[1];return Nr.includes(wi)}catch(ia){return console.error("failed to deduce blob content type",ia),!1}var Wi=bo.split(".").at(-1).toLowerCase().trim();return Nr.includes(Wi)}(Mt.source)||(console.error("invalid image type; supported types: [".concat(Nr.join(", "),"]")),!1);return Zt=Mt.source,jn=Number(Zt),isNaN(jn)||!Number.isInteger(jn)||jn<=0||jn>Br?(console.error("invalid image selection; must be an int, > 0, <= ".concat(Br)),!1):(Mt.type="daily-preselect",!0);var Zt,jn}(ye));default:return!0}}(te.type,te.config)))?!1:(Object.keys(te).filter(function(re){return!ge.includes(re)}).forEach(function(re){console.warn("invalid key inputSettings -> video -> processor : ".concat(re)),delete te[re]}),!0)}(Q.video.processor)}function Js(){var Q=Object.values(yr).join(" | ");return"inputSettings must be of the form: { video: { processor: [ ".concat(Q," ] }, config?: {} }")}function Os(Q){var te=Q.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(H).concat(te?' | "'.concat(le,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function pl(Q){if(Q&&d(Q)!=="object"||Array.isArray(Q))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(rs),".")),!1;if(Q)for(var te=0,ge=Object.entries(Q);te<ge.length;te++)for(var re=f(ge[te],1)[0],ye=0,Je=Object.entries(Q[re]);ye<Je.length;ye++){var St=f(Je[ye],2),Mt=St[0],Zt=St[1];if(Mt==="iconPath"&&!Ai(Zt)||Mt==="iconPathDarkMode"&&!Ai(Zt))return console.error("customTrayButton ".concat(Mt," should be a url.")),!1;var jn=rs.id[Mt];if(!jn)return console.error("customTrayButton does not support key ".concat(Mt)),!1;if(d(Zt)!==jn)return console.error("customTrayButton ".concat(Mt," should be a ").concat(jn,".")),!1}return!0}function Qs(Q){if(d(Q)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(Q.state&&!Object.values(br).includes(Q.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(br));if(Q.volume){if(typeof Q.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(Q.volume<0||Q.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Xs(Q,te,ge){return!(typeof Q!="number"||Q<te||Q>ge)}n.a=function(Q){i(ge,o.a);var te=ts(ge);function ge(re){var ye,Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(h(this,ge),ye=te.call(this),E(m(ye),"startListeningForDeviceChanges",function(){navigator.mediaDevices.ondevicechange!==void 0||wr()?navigator.mediaDevices.addEventListener("devicechange",ye.deviceChangeListener):ye.startPollingForDeviceChanges()}),E(m(ye),"stopListeningForDeviceChanges",function(){navigator.mediaDevices.ondevicechange!==void 0||wr()?navigator.mediaDevices.removeEventListener("devicechange",ye.deviceChangeListener):ye.stopPollingForDeviceChanges()}),E(m(ye),"deviceChangeListener",p(function*(){var Mt=yield ye.enumerateDevices();ye.handleDeviceChange(Mt.devices)})),E(m(ye),"handleDeviceChange",function(Mt){ye.emit(wn,{action:wn,availableDevices:Mt})}),E(m(ye),"startPollingForDeviceChanges",function(){ye._deviceChangeInterval||(ye._deviceChangeInterval=setInterval(p(function*(){var Mt=yield ye.enumerateDevices(),Zt=JSON.stringify(Mt);ye._lastDevicesJSON&&Zt!==ye._lastDevicesJSON&&ye.handleDeviceChange(Mt.devices),ye._lastDevicesJSON=Zt}),3e3))}),E(m(ye),"stopPollingForDeviceChanges",function(){ye._deviceChangeInterval&&(clearInterval(ye._deviceChangeInterval),ye._deviceChangeInterval=null,ye._lastDevicesJSON=null)}),E(m(ye),"handleNativeAppActiveStateChange",function(Mt){ye.disableReactNativeAutoDeviceManagement("video")||(Mt?ye.camUnmutedBeforeLosingNativeActiveState&&ye.setLocalVideo(!0):(ye.camUnmutedBeforeLosingNativeActiveState=ye.localVideo(),ye.camUnmutedBeforeLosingNativeActiveState&&ye.setLocalVideo(!1)))}),E(m(ye),"handleNativeAudioFocusChange",function(Mt){ye.disableReactNativeAutoDeviceManagement("audio")||(ye._hasNativeAudioFocus=Mt,ye.toggleParticipantAudioBasedOnNativeAudioFocus(),ye._hasNativeAudioFocus?ye.micUnmutedBeforeLosingNativeAudioFocus&&ye.setLocalAudio(!0):(ye.micUnmutedBeforeLosingNativeAudioFocus=ye.localAudio(),ye.setLocalAudio(!1)))}),Je.dailyJsVersion=ge.version(),ye._iframe=re,ye._callObjectMode=Je.layout==="none"&&!ye._iframe,ye._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null},ye._callObjectMode&&(window._dailyPreloadCache=ye._preloadCache),Je.showLocalVideo!==void 0?ye._callObjectMode?console.error("showLocalVideo is not available in call object mode"):ye._showLocalVideo=!!Je.showLocalVideo:ye._showLocalVideo=!0,Je.showParticipantsBar!==void 0?ye._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):ye._showParticipantsBar=!!Je.showParticipantsBar:ye._showParticipantsBar=!0,Je.customTrayButtons!==void 0?ye._callObjectMode?console.error("customTrayButtons is not available in call object mode"):ye._customTrayButtons=Je.customTrayButtons:ye._customTrayButtons={},Je.activeSpeakerMode!==void 0?ye._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):ye._activeSpeakerMode=!!Je.activeSpeakerMode:ye._activeSpeakerMode=!1,Je.receiveSettings?ye._callObjectMode?ye._receiveSettings=Je.receiveSettings:console.error("receiveSettings is only available in call object mode"):ye._receiveSettings={},ye._inputSettings={},Je.inputSettings&&(ye._inputSettings=Je.inputSettings),ye.validateProperties(Je),ye.properties=Xo({},Je),ye._callObjectLoader=ye._callObjectMode?new no:null,ye._callState=Ze,ye._isPreparingToJoin=!1,ye._accessState={access:Ie},ye._meetingSessionState=ns,ye._nativeInCallAudioMode=vs,ye._participants={},ye._participantCounts=bs,ye._rmpPlayerState={},ye._waitingParticipants={},ye._inputEventsOn={},ye._network={threshold:"good",quality:100},ye._activeSpeaker={},ye._callFrameId=ao(),ye._messageChannel=wr()?new Nt:new it,ye._iframe&&(ye._iframe.requestFullscreen?ye._iframe.addEventListener("fullscreenchange",function(Mt){document.fullscreenElement===ye._iframe?(ye.emit(Tn,{action:Tn}),ye.sendMessageToCallMachine({action:Tn})):(ye.emit(pn,{action:pn}),ye.sendMessageToCallMachine({action:pn}))}):ye._iframe.webkitRequestFullscreen&&ye._iframe.addEventListener("webkitfullscreenchange",function(Mt){document.webkitFullscreenElement===ye._iframe?(ye.emit(Tn,{action:Tn}),ye.sendMessageToCallMachine({action:Tn})):(ye.emit(pn,{action:pn}),ye.sendMessageToCallMachine({action:pn}))})),wr()){var St=ye.nativeUtils();St.addAudioFocusChangeListener&&St.removeAudioFocusChangeListener&&St.addAppActiveStateChangeListener&&St.removeAppActiveStateChangeListener||console.warn("expected (add|remove)(AudioFocus|AppActiveState)ChangeListener to be available in React Native"),ye._hasNativeAudioFocus=!0,St.addAudioFocusChangeListener(ye.handleNativeAudioFocusChange),St.addAppActiveStateChangeListener(ye.handleNativeAppActiveStateChange)}return ye._callObjectMode&&ye.startListeningForDeviceChanges(),ye._messageChannel.addListenerForMessagesFromCallMachine(ye.handleMessageFromCallMachine,ye._callFrameId,m(ye)),ye}return v(ge,null,[{key:"supportedBrowser",value:function(){if(wr())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!1,supportsSfu:!0,supportsVideoProcessing:!1};var re=class{static getParser(ye,Je=!1){if(typeof ye!="string")throw new Error("UserAgent should be a string");return new Qe(ye,Je)}static parse(ye){return new Qe(ye).getResult()}static get BROWSER_MAP(){return Ee}static get ENGINE_MAP(){return ue}static get OS_MAP(){return ce}static get PLATFORMS_MAP(){return Oe}}.getParser(zr());return{supported:!!oi(),mobile:re.getPlatformType()==="mobile",name:re.getBrowserName(),version:re.getBrowserVersion(),supportsFullscreen:!!Vo(),supportsScreenShare:!!xo(),supportsSfu:!!oi(),supportsVideoProcessing:Ho()}}},{key:"version",value:function(){return"0.35.1"}},{key:"createCallObject",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return re.layout="none",new ge(null,re)}},{key:"wrap",value:function(re){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(di(),!re||!re.contentWindow||typeof re.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return ye.layout||(ye.customLayout?ye.layout="custom-v1":ye.layout="browser"),new ge(re,ye)}},{key:"createFrame",value:function(re,ye){var Je,St;di(),re&&ye?(Je=re,St=ye):re&&re.append?(Je=re,St={}):(Je=document.body,St=re||{});var Mt=St.iframeStyle;Mt||(Mt=Je===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var Zt=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?Zt.allow="microphone, camera":Zt.allow="microphone; camera; autoplay; display-capture",Zt.style.visibility="hidden",Je.appendChild(Zt),Zt.style.visibility=null,Object.keys(Mt).forEach(function(jn){return Zt.style[jn]=Mt[jn]}),St.layout||(St.customLayout?St.layout="custom-v1":St.layout="browser");try{return new ge(Zt,St)}catch(jn){throw Je.removeChild(Zt),jn}}},{key:"createTransparentFrame",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};di();var ye=document.createElement("iframe");return ye.allow="microphone; camera; autoplay",ye.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(ye),re.layout||(re.layout="custom-v1"),ge.wrap(ye,re)}}]),v(ge,[{key:"destroy",value:function(){var re=p(function*(){try{[Lt,tt].includes(this._callState)&&(yield this.leave())}catch(Mt){}var ye=this._iframe;if(ye){var Je=ye.parentElement;Je&&Je.removeChild(ye)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),wr()){var St=this.nativeUtils();St.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),St.removeAppActiveStateChangeListener(this.handleNativeAppActiveStateChange)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars()});return function(){return re.apply(this,arguments)}}()},{key:"loadCss",value:function(re){var ye=re.bodyClass,Je=re.cssFile,St=re.cssText;return di(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(Je),bodyClass:ye,cssText:St}),this}},{key:"iframe",value:function(){return di(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){if(!this._callObjectMode)throw new Error("accessState() currently only supported in call object mode");return this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){if(!this._callObjectMode)throw new Error("waitingParticipants() currently only supported in call object mode");return this._waitingParticipants}},{key:"validateParticipantProperties",value:function(re,ye){for(var Je in ye){if(!Gs[Je])throw new Error("unrecognized updateParticipant property ".concat(Je));if(Gs[Je].validate&&!Gs[Je].validate(ye[Je],this,this._participants[re]))throw new Error(Gs[Je].help)}}},{key:"updateParticipant",value:function(re,ye){return this._participants.local&&this._participants.local.session_id===re&&(re="local"),re&&ye&&(this.validateParticipantProperties(re,ye),this.sendMessageToCallMachine({action:"update-participant",id:re,properties:ye})),this}},{key:"updateParticipants",value:function(re){var ye=this._participants.local&&this._participants.local.session_id;for(var Je in re)Je===ye&&(Je="local"),Je&&re[Je]&&this.validateParticipantProperties(Je,re[Je]);return this.sendMessageToCallMachine({action:"update-participants",participants:re}),this}},{key:"updateWaitingParticipant",value:function(){var re=p(function*(){var ye=this,Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._callObjectMode)throw new Error("updateWaitingParticipant() currently only supported in call object mode");if(this._callState!==Lt)throw new Error("updateWaitingParticipant() only supported for joined meetings");if(typeof Je!="string"||d(St)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(Mt,Zt){ye.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:Je,updates:St},function(jn){jn.error&&Zt(jn.error),jn.id||Zt(new Error("unknown error in updateWaitingParticipant()")),Mt({id:jn.id})})})});return function(){return re.apply(this,arguments)}}()},{key:"updateWaitingParticipants",value:function(){var re=p(function*(){var ye=this,Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._callObjectMode)throw new Error("updateWaitingParticipants() currently only supported in call object mode");if(this._callState!==Lt)throw new Error("updateWaitingParticipants() only supported for joined meetings");if(d(Je)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(St,Mt){ye.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:Je},function(Zt){Zt.error&&Mt(Zt.error),Zt.ids||Mt(new Error("unknown error in updateWaitingParticipants()")),St({ids:Zt.ids})})})});return function(){return re.apply(this,arguments)}}()},{key:"requestAccess",value:function(){var re=p(function*(){var ye=this,Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=Je.access,Mt=St===void 0?{level:"full"}:St,Zt=Je.name,jn=Zt===void 0?"":Zt;if(!this._callObjectMode)throw new Error("requestAccess() currently only supported in call object mode");if(this._callState!==Lt)throw new Error("requestAccess() only supported for joined meetings");return new Promise(function(xr,Fr){ye.sendMessageToCallMachine({action:"daily-method-request-access",access:Mt,name:jn},function(bo){bo.error&&Fr(bo.error),bo.access||Fr(new Error("unknown error in requestAccess()")),xr({access:bo.access,granted:bo.granted})})})});return function(){return re.apply(this,arguments)}}()},{key:"localAudio",value:function(){return this._participants.local?this._participants.local.audio:null}},{key:"localVideo",value:function(){return this._participants.local?this._participants.local.video:null}},{key:"setLocalAudio",value:function(re){return this.sendMessageToCallMachine({action:"local-audio",state:re}),this}},{key:"setLocalVideo",value:function(re){return this.sendMessageToCallMachine({action:"local-video",state:re}),this}},{key:"getReceiveSettings",value:function(){var re=p(function*(ye){var Je=this,St=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,Mt=St!==void 0&&St;if(!this._callObjectMode)throw new Error("getReceiveSettings() only supported in call object mode");switch(d(ye)){case"string":return new Promise(function(Zt){Je.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:ye,showInheritedValues:Mt},function(jn){Zt(jn.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}});return function(ye){return re.apply(this,arguments)}}()},{key:"updateReceiveSettings",value:function(){var re=p(function*(ye){var Je=this;if(!this._callObjectMode)throw new Error("updateReceiveSettings() only supported in call object mode");if(!Ys(ye,{allowAllParticipantsKey:!0}))throw new Error(Os({allowAllParticipantsKey:!0}));if(this._callState!==Lt)throw new Error("updateReceiveSettings() is only allowed when joined. To specify receive settings earlier, use the receiveSettings config property.");return new Promise(function(St){Je.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:ye},function(Mt){St({receiveSettings:Mt.receiveSettings})})})});return function(ye){return re.apply(this,arguments)}}()},{key:"getInputSettings",value:function(){var re=this;return new Promise(function(ye){ye(re._inputSettings)})}},{key:"updateInputSettings",value:function(){var re=p(function*(ye){var Je=this;return new Promise(function(St,Mt){if(!Nl(ye))return console.error(Js()),void Mt(Js());Je.sendMessageToCallMachine({action:"update-input-settings",inputSettings:ye},function(Zt){Zt.error?Mt(Zt.error):St({inputSettings:Zt.inputSettings})})})});return function(ye){return re.apply(this,arguments)}}()},{key:"setBandwidth",value:function(re){var ye=re.kbs,Je=re.trackConstraints;return di(),this.sendMessageToCallMachine({action:"set-bandwidth",kbs:ye,trackConstraints:Je}),this}},{key:"getDailyLang",value:function(){var re=this;return di(),new Promise(function(){var ye=p(function*(Je){re.sendMessageToCallMachine({action:"get-daily-lang"},function(St){delete St.action,delete St.callbackStamp,Je(St)})});return function(Je){return ye.apply(this,arguments)}}())}},{key:"setDailyLang",value:function(re){return di(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:re}),this}},{key:"getMeetingSession",value:function(){var re=p(function*(){var ye=this;if(this._callState!==Lt)throw new Error("getMeetingSession() is only allowed when joined");return new Promise(function(Je){ye.sendMessageToCallMachine({action:"get-meeting-session"},function(St){delete St.action,delete St.callbackStamp,delete St.callFrameId,Je(St)})})});return function(){return re.apply(this,arguments)}}()},{key:"meetingSessionState",value:function(){if(this._callState!==Lt)throw new Error("meetingSessionState() is only available when joined");return this._meetingSessionState}},{key:"setMeetingSessionData",value:function(re){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";if(this._callState!==Lt)throw new Error("setMeetingSessionData() is only available when joined");try{(function(Je,St){new En({data:Je,mergeStrategy:St})})(re,ye)}catch(Je){throw console.error(Je),Je}try{this.sendMessageToCallMachine({action:"set-session-data",data:re,mergeStrategy:ye})}catch(Je){throw new Error("Error setting meeting session data: ".concat(Je))}}},{key:"setUserName",value:function(re,ye){var Je=this;return this.properties.userName=re,new Promise(function(St){Je.sendMessageToCallMachine({action:"set-user-name",name:re!=null?re:"",thisMeetingOnly:wr()||!!ye&&!!ye.thisMeetingOnly},function(Mt){delete Mt.action,delete Mt.callbackStamp,St(Mt)})})}},{key:"setUserData",value:function(){var re=p(function*(ye){var Je=this;try{pc(ye)}catch(St){throw console.error(St),St}return this.properties.userData=ye,new Promise(function(St){try{Je.sendMessageToCallMachine({action:"set-user-data",userData:ye},function(Mt){delete Mt.action,delete Mt.callbackStamp,delete Mt.callFrameId,St(Mt)})}catch(Mt){throw new Error("Error setting user data: ".concat(Mt))}})});return function(ye){return re.apply(this,arguments)}}()},{key:"startCamera",value:function(){var re=this,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._callObjectMode)throw new Error("startCamera() currently only supported in call object mode");if([Ft,Lt].includes(this._callState))throw new Error("startCamera() not supported after joining a meeting: did you mean to use setLocalAudio() and/or setLocalVideo() instead?");return new Promise(function(){var Je=p(function*(St,Mt){if(re.needsLoad())try{yield re.load(ye)}catch(Zt){Mt(Zt)}else re.validateProperties(ye);re.sendMessageToCallMachine({action:"start-camera",properties:_s(re.properties),preloadCache:_s(re._preloadCache)},function(Zt){delete Zt.action,delete Zt.callbackStamp,St(Zt)})});return function(St,Mt){return Je.apply(this,arguments)}}())}},{key:"validateCustomTrack",value:function(re,ye,Je){if(Je&&Je.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(ye&&ye!=="music"&&ye!=="speech"&&!(ye instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(!!Je&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].includes(Je))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(re instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var re=this,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};if(di(),this.validateCustomTrack(ye.track,ye.mode,ye.trackName),this._callState!==Lt)throw new Error("startCustomTrack() is only allowed when joined");return new Promise(function(Je,St){window._dailyPreloadCache.customTrack=ye.track,ye.track=Pr,re.sendMessageToCallMachine({action:"start-custom-track",properties:ye},function(Mt){Mt.error?reject({error:Mt.error}):Je(Mt.mediaTag)})})}},{key:"stopCustomTrack",value:function(re){var ye=this;if(di(),this._callState!==Lt)throw new Error("stopCustomTrack() is only allowed when joined");return new Promise(function(Je,St){ye.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:re},function(Mt){Je(Mt.mediaTag)})})}},{key:"setCamera",value:function(re){var ye=this;if(Rs(),this.needsLoad())throw new Error("Before you can invoke setCamera, first you need to invoke one of these methods: join, startCamera, or preAuth");return new Promise(function(Je,St){ye.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:re},function(Mt){Je({device:Mt.device})})})}},{key:"setAudioDevice",value:function(){var re=p(function*(ye){return Rs(),this.nativeUtils().setAudioDevice(ye),{deviceId:yield this.nativeUtils().getAudioDevice()}});return function(ye){return re.apply(this,arguments)}}()},{key:"cycleCamera",value:function(){var re=this;return new Promise(function(ye,Je){re.sendMessageToCallMachine({action:"cycle-camera"},function(St){ye({device:St.device})})})}},{key:"cycleMic",value:function(){var re=this;return di(),new Promise(function(ye,Je){re.sendMessageToCallMachine({action:"cycle-mic"},function(St){ye({device:St.device})})})}},{key:"getCameraFacingMode",value:function(){var re=this;return Rs(),new Promise(function(ye,Je){re.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(St){ye(St.facingMode)})})}},{key:"setInputDevices",value:function(re){var ye=re.audioDeviceId,Je=re.videoDeviceId,St=re.audioSource,Mt=re.videoSource;return console.warn("setInputDevices() is deprecated: instead use setInputDevicesAsync(), which returns a Promise"),this.setInputDevicesAsync({audioDeviceId:ye,videoDeviceId:Je,audioSource:St,videoSource:Mt}),this}},{key:"setInputDevicesAsync",value:function(){var re=p(function*(ye){var Je=this,St=ye.audioDeviceId,Mt=ye.videoDeviceId,Zt=ye.audioSource,jn=ye.videoSource;return di(),Zt!==void 0&&(St=Zt),jn!==void 0&&(Mt=jn),St&&(this._preloadCache.audioDeviceId=St),Mt&&(this._preloadCache.videoDeviceId=Mt),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(St instanceof MediaStreamTrack&&(St=Pr),Mt instanceof MediaStreamTrack&&(Mt=Pr),new Promise(function(xr){Je.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:St,videoDeviceId:Mt},function(Fr){delete Fr.action,delete Fr.callbackStamp,Fr.returnPreloadCache?xr({camera:{deviceId:Je._preloadCache.videoDeviceId},mic:{deviceId:Je._preloadCache.audioDeviceId},speaker:{deviceId:Je._preloadCache.outputDeviceId}}):xr(Fr)})}))});return function(ye){return re.apply(this,arguments)}}()},{key:"setOutputDevice",value:function(re){var ye=re.outputDeviceId;return console.warn("setOutputDevice() is deprecated: instead use setOutputDeviceAsync(), which returns a Promise"),this.setOutputDeviceAsync({outputDeviceId:ye}),this}},{key:"setOutputDeviceAsync",value:function(){var re=p(function*(ye){var Je=this,St=ye.outputDeviceId;return di(),St&&(this._preloadCache.outputDeviceId=St),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(Mt){Je.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:St},function(Zt){delete Zt.action,delete Zt.callbackStamp,Zt.returnPreloadCache?Mt({camera:{deviceId:Je._preloadCache.videoDeviceId},mic:{deviceId:Je._preloadCache.audioDeviceId},speaker:{deviceId:Je._preloadCache.outputDeviceId}}):Mt(Zt)})})});return function(ye){return re.apply(this,arguments)}}()},{key:"getInputDevices",value:function(){var re=p(function*(){var ye=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(Je,St){ye.sendMessageToCallMachine({action:"get-input-devices"},function(Mt){delete Mt.action,delete Mt.callbackStamp,Mt.returnPreloadCache?Je({camera:{deviceId:ye._preloadCache.videoDeviceId},mic:{deviceId:ye._preloadCache.audioDeviceId},speaker:{deviceId:ye._preloadCache.outputDeviceId}}):Je(Mt)})})});return function(){return re.apply(this,arguments)}}()},{key:"nativeInCallAudioMode",value:function(){return Rs(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(re){if(Rs(),[vs,zs].includes(re)){if(re!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=re,!this.disableReactNativeAutoDeviceManagement("audio")&&this._isCallPendingOrOngoing(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",re)}},{key:"preAuth",value:function(){var re=p(function*(){var ye=this,Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._callObjectMode)throw new Error("preAuth() currently only supported in call object mode");if([Ft,Lt].includes(this._callState))throw new Error("preAuth() not supported after joining a meeting");if(this.needsLoad()&&(yield this.load(Je)),!Je.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(Je),this.properties=Xo(Xo({},this.properties),Je),new Promise(function(St,Mt){ye.sendMessageToCallMachine({action:"daily-method-preauth",properties:_s(ye.properties)},function(Zt){return Zt.error?Mt(Zt.error):Zt.access?(ye._didPreAuth=!0,void St({access:Zt.access})):Mt(new Error("unknown error in preAuth()"))})})});return function(){return re.apply(this,arguments)}}()},{key:"load",value:function(){var re=p(function*(ye){var Je=this;if(this.needsLoad()){if(ye&&(this.validateProperties(ye),this.properties=Xo(Xo({},this.properties),ye)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");this._updateCallState(tt);try{this.emit("loading",{action:"loading"})}catch(St){console.log("could not emit 'loading'",St)}return this._callObjectMode?new Promise(function(St,Mt){Je._callObjectLoader.cancel(),Je._callObjectLoader.load(Je._callFrameId,Je.properties.dailyConfig&&Je.properties.dailyConfig.avoidEval,function(Zt){Je._updateCallState("loaded"),Zt&&Je.emit("loaded",{action:"loaded"}),St()},function(Zt,jn){Je.emit("load-attempt-failed",{action:"load-attempt-failed",errorMsg:Zt}),jn||(Je._updateCallState(ht),Je.resetMeetingDependentVars(),Je.emit("error",{action:"error",errorMsg:Zt}),Mt(Zt))})}):(this._iframe.src=this.assembleMeetingUrl(),new Promise(function(St,Mt){Je._loadedCallback=function(Zt){if(Je._callState!==ht){for(var jn in Je._updateCallState("loaded"),(Je.properties.cssFile||Je.properties.cssText)&&Je.loadCss(Je.properties),Je._inputEventsOn)Je.sendMessageToCallMachine({action:"register-input-handler",on:jn});St()}else Mt(Zt)}}))}});return function(ye){return re.apply(this,arguments)}}()},{key:"join",value:function(){var re=p(function*(){var ye=this,Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(Je)}catch(Mt){return this.updateIsPreparingToJoin(!1),Promise.reject(Mt)}}else{if(St=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(Je.url&&Je.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(Je.token&&Je.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(Je.url&&!this._callObjectMode&&Je.url&&Je.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(Je.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(Je),this.properties=Xo(Xo({},this.properties),Je)}if(Je.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!Je.showLocalVideo),Je.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!Je.showParticipantsBar),this._callState===Lt||this._callState===Ft)return console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1);this._updateCallState(Ft,!1);try{this.emit("joining-meeting",{action:"joining-meeting"})}catch(Mt){console.log("could not emit 'joining-meeting'",Mt)}return this.sendMessageToCallMachine({action:"join-meeting",properties:_s(this.properties),preloadCache:_s(this._preloadCache)}),new Promise(function(Mt,Zt){ye._joinedCallback=function(jn,xr){if(ye._callState!==ht){if(ye._updateCallState(Lt),jn)for(var Fr in jn)ye._callObjectMode&&(Ci(jn[Fr]),ra(jn[Fr]),va(jn[Fr],ye._participants[Fr])),ye._participants[Fr]=Xo({},jn[Fr]),ye.toggleParticipantAudioBasedOnNativeAudioFocus();St&&ye.loadCss(ye.properties),Mt(jn)}else Zt(xr)}})});return function(){return re.apply(this,arguments)}}()},{key:"leave",value:function(){var re=p(function*(){var ye=this;return new Promise(function(Je,St){if(ye._callObjectLoader&&!ye._callObjectLoader.loaded){ye._callObjectLoader.cancel(),ye._updateCallState(rn),ye.resetMeetingDependentVars();try{ye.emit(rn,{action:rn})}catch(Mt){console.log("could not emit 'left-meeting'",Mt)}Je()}else ye._callState===rn||ye._callState===ht?Je():(ye._resolveLeave=Je,ye.sendMessageToCallMachine({action:"leave-meeting"}))})});return function(){return re.apply(this,arguments)}}()},{key:"startScreenShare",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};di(),re.mediaStream&&(this._preloadCache.screenMediaStream=re.mediaStream,re.mediaStream=Pr),this.sendMessageToCallMachine({action:"local-screen-start",captureOptions:re})}},{key:"stopScreenShare",value:function(){di(),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Xo({action:"local-recording-start"},re))}},{key:"updateRecording",value:function(re){var ye=re.layout,Je=ye===void 0?{preset:"default"}:ye,St=re.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:Je,instanceId:St})}},{key:"stopRecording",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Xo({action:"local-recording-stop"},re))}},{key:"startLiveStreaming",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Xo({action:"daily-method-start-live-streaming"},re))}},{key:"updateLiveStreaming",value:function(re){var ye=re.layout,Je=ye===void 0?{preset:"default"}:ye,St=re.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:Je,instanceId:St})}},{key:"addLiveStreamingEndpoints",value:function(re){var ye=re.endpoints,Je=re.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming-endpoints",endpointsOp:lo,endpoints:ye,instanceId:Je})}},{key:"removeLiveStreamingEndpoints",value:function(re){var ye=re.endpoints,Je=re.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming-endpoints",endpointsOp:Zr,endpoints:ye,instanceId:Je})}},{key:"stopLiveStreaming",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Xo({action:"daily-method-stop-live-streaming"},re))}},{key:"startRemoteMediaPlayer",value:function(){var re=p(function*(ye){var Je=this,St=ye.url,Mt=ye.settings,Zt=Mt===void 0?{state:br.PLAY}:Mt;try{(function(jn){if(typeof jn!="string")throw new Error('url parameter must be "string" type')})(St),Qs(Zt),function(jn){for(var xr in jn)if(!Rl.includes(xr))throw new Error("Invalid key ".concat(xr,", valid keys are: ").concat(Rl));if(jn.simulcastEncodings){if(!(jn.simulcastEncodings instanceof Array))throw new Error('simulcastEncodings must be "Array"');if(!Xs(jn.simulcastEncodings.length,0,Zi))throw new Error('"simulcastEncodings" not in range. valid range 1 to 3 layers');jn.simulcastEncodings.every(function(Fr){for(var bo in Fr){if(!Is.hasOwnProperty(bo))throw new Error("Invalid key ".concat(bo,", valid keys are:")+Object.keys(Is));if(typeof Fr[bo]!="number")throw new Error("simulcastEncodings[].".concat(bo,' must be "number"'));var Ni=Is[bo],wi=Ni.min,Wi=Ni.max;if(!Xs(Fr[bo],wi,Wi))throw new Error("simulcastEncodings[].".concat(bo," value not in range. valid range:        ").concat(wi," to ").concat(Wi))}if(!Fr.hasOwnProperty("maxBitrate"))throw new Error("simulcastEncodings[].maxBitrate is not specified")})}}(Zt)}catch(jn){throw console.error("invalid argument Error: ".concat(jn)),console.error(`startRemoteMediaPlayer arguments must be of the form: 
  { url: "playback url", 
  settings?: 
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),jn}return new Promise(function(){var jn=p(function*(xr,Fr){Je.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:St,settings:Zt},function(bo){bo.error?Fr({error:bo.error,errorMsg:bo.errorMsg}):xr({session_id:bo.session_id,remoteMediaPlayerState:{state:bo.state,settings:bo.settings}})})});return function(xr,Fr){return jn.apply(this,arguments)}}())});return function(ye){return re.apply(this,arguments)}}()},{key:"stopRemoteMediaPlayer",value:function(){var re=p(function*(ye){var Je=this;if(typeof ye!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(){var St=p(function*(Mt,Zt){Je.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:ye},function(jn){jn.error?Zt({error:jn.error,errorMsg:jn.errorMsg}):Mt()})});return function(Mt,Zt){return St.apply(this,arguments)}}())});return function(ye){return re.apply(this,arguments)}}()},{key:"updateRemoteMediaPlayer",value:function(){var re=p(function*(ye){var Je=this,St=ye.session_id,Mt=ye.settings;try{Qs(Mt)}catch(Zt){throw console.error("invalid argument Error: ".concat(Zt)),console.error(`updateRemoteMediaPlayer arguments must be of the form: 
  session_id: "participant session", 
  { settings?: {state: "play"|"pause"} }`),Zt}return new Promise(function(){var Zt=p(function*(jn,xr){Je.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:St,settings:Mt},function(Fr){Fr.error?xr({error:Fr.error,errorMsg:Fr.errorMsg}):jn({session_id:Fr.session_id,remoteMediaPlayerState:{state:Fr.state,settings:Fr.settings}})})});return function(jn,xr){return Zt.apply(this,arguments)}}())});return function(ye){return re.apply(this,arguments)}}()},{key:"startTranscription",value:function(re){this.sendMessageToCallMachine(Xo({action:"daily-method-start-transcription"},re))}},{key:"stopTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-transcription"})}},{key:"getNetworkStats",value:function(){var re=this;return this._callState!==Lt?{stats:{latest:{}}}:new Promise(function(ye,Je){re.sendMessageToCallMachine({action:"get-calc-stats"},function(St){ye(Xo({stats:St.stats},re._network))})})}},{key:"getActiveSpeaker",value:function(){return di(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(re){return di(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:re}),this}},{key:"activeSpeakerMode",value:function(){return di(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(re){if(this._callState!==Lt)throw new Error("setSubscribeToTracksAutomatically() is only allowed when joined");return this._preloadCache.subscribeToTracksAutomatically=re,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:re}),this}},{key:"enumerateDevices",value:function(){var re=p(function*(){var ye=this;return this._callObjectMode?{devices:(yield navigator.mediaDevices.enumerateDevices()).map(function(Je){return JSON.parse(JSON.stringify(Je))})}:new Promise(function(Je,St){ye.sendMessageToCallMachine({action:"enumerate-devices"},function(Mt){Je({devices:Mt.devices})})})});return function(){return re.apply(this,arguments)}}()},{key:"sendAppMessage",value:function(re){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(JSON.stringify(re).length>4096)throw new Error("Message data too large. Max size is 4096");return this.sendMessageToCallMachine({action:"app-msg",data:re,to:ye}),this}},{key:"addFakeParticipant",value:function(re){return di(),this.sendMessageToCallMachine(Xo({action:"add-fake-participant"},re)),this}},{key:"setShowNamesMode",value:function(re){return di(),re&&re!=="always"&&re!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:re}),this)}},{key:"setShowLocalVideo",value:function(){var re=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return di(),typeof re!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowLocalVideo is not available in callObject mode"),this):this._callState!==Lt?(console.error("the meeting must be joined before calling setShowLocalVideo"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:re}),this._showLocalVideo=re,this)}},{key:"showLocalVideo",value:function(){return di(),this._callObjectMode?(console.error("showLocalVideo is not available in callObject mode"),this):this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var re=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return di(),typeof re!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowParticipantsBar is not available in callObject mode"),this):this._callState!==Lt?(console.error("the meeting must be joined before calling setShowParticipantsBar"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:re}),this._showParticipantsBar=re,this)}},{key:"showParticipantsBar",value:function(){return di(),this._callObjectMode?(console.error("showParticipantsBar is not available in callObject mode"),this):this._showParticipantsBar}},{key:"customTrayButtons",value:function(){return di(),this._callObjectMode?(console.error("customTrayButtons is not available in callObject mode"),this):this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(re){return di(),this._callObjectMode?(console.error("updateCustomTrayButtons is not available in callObject mode"),this):this._callState!==Lt?(console.error("the meeting must be joined before calling updateCustomTrayButtons"),this):pl(re)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:re}),this._customTrayButtons=re,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(rs))),this)}},{key:"theme",value:function(){return this._callObjectMode?(console.error("theme is not available in callObject mode"),this):this.properties.theme}},{key:"setTheme",value:function(re){var ye=this;return new Promise(function(Je,St){if(ye._callObjectMode)St("setTheme is not available in callObject mode");else try{ye.validateProperties({theme:re}),ye.properties.theme=Xo({},re),ye.sendMessageToCallMachine({action:"set-theme",theme:ye.properties.theme});try{ye.emit("theme-updated",{action:"theme-updated",theme:ye.properties.theme})}catch(Mt){console.log("could not emit 'theme-updated'",Mt)}Je(ye.properties.theme)}catch(Mt){St(Mt)}})}},{key:"detectAllFaces",value:function(){var re=this;return di(),new Promise(function(ye,Je){re.sendMessageToCallMachine({action:"detect-all-faces"},function(St){delete St.action,delete St.callbackStamp,ye(St)})})}},{key:"requestFullscreen",value:function(){var re=p(function*(){if(di(),this._iframe&&!document.fullscreenElement&&Vo())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(ye){console.log("could not make video call fullscreen",ye)}});return function(){return re.apply(this,arguments)}}()},{key:"exitFullscreen",value:function(){di(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"room",value:function(){var re=p(function*(){var ye=this,Je=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,St=Je===void 0||Je;return this._accessState.access===Ie||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(Mt,Zt){ye.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:St},function(jn){delete jn.action,delete jn.callbackStamp,Mt(jn)})})});return function(){return re.apply(this,arguments)}}()},{key:"geo",value:function(){var re=p(function*(){return new Promise(function(){var ye=p(function*(Je,St){try{var Mt=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");Je({current:(yield Mt.json()).geo})}catch(Zt){console.error("geo lookup failed",Zt),Je({current:""})}});return function(Je,St){return ye.apply(this,arguments)}}())});return function(){return re.apply(this,arguments)}}()},{key:"setNetworkTopology",value:function(){var re=p(function*(ye){var Je=this;return di(),new Promise(function(){var St=p(function*(Mt,Zt){Je.sendMessageToCallMachine({action:"set-network-topology",opts:ye},function(jn){jn.error?Zt({error:jn.error}):Mt({workerId:jn.workerId})})});return function(Mt,Zt){return St.apply(this,arguments)}}())});return function(ye){return re.apply(this,arguments)}}()},{key:"getNetworkTopology",value:function(){var re=p(function*(){var ye=this;return new Promise(function(){var Je=p(function*(St,Mt){ye.sendMessageToCallMachine({action:"get-network-topology"},function(Zt){Zt.error?Mt({error:Zt.error}):St({topology:Zt.topology})})});return function(St,Mt){return Je.apply(this,arguments)}}())});return function(){return re.apply(this,arguments)}}()},{key:"setPlayNewParticipantSound",value:function(re){if(di(),typeof re!="number"&&re!==!0&&re!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(re));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:re})}},{key:"on",value:function(re,ye){return this._inputEventsOn[re]={},this.sendMessageToCallMachine({action:"register-input-handler",on:re}),o.a.prototype.on.call(this,re,ye)}},{key:"once",value:function(re,ye){return this._inputEventsOn[re]={},this.sendMessageToCallMachine({action:"register-input-handler",on:re}),o.a.prototype.once.call(this,re,ye)}},{key:"off",value:function(re,ye){return delete this._inputEventsOn[re],this.sendMessageToCallMachine({action:"register-input-handler",off:re}),o.a.prototype.off.call(this,re,ye)}},{key:"validateProperties",value:function(re){for(var ye in re){if(!Ga[ye])throw new Error("unrecognized property '".concat(ye,"'"));if(Ga[ye].validate&&!Ga[ye].validate(re[ye],this))throw new Error("property '".concat(ye,"': ").concat(Ga[ye].help))}}},{key:"assembleMeetingUrl",value:function(){var re=Xo(Xo({},this.properties),{},{emb:this._callFrameId,embHref:encodeURIComponent(window.location.href)}),ye=re.url.match(/\?/)?"&":"?";return re.url+ye+Object.keys(Ga).filter(function(Je){return Ga[Je].queryString&&re[Je]!==void 0}).map(function(Je){return"".concat(Ga[Je].queryString,"=").concat(re[Je])}).join("&")}},{key:"needsLoad",value:function(){return[Ze,tt,rn,ht].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(re,ye){this._messageChannel.sendMessageToCallMachine(re,ye,this._iframe,this._callFrameId)}},{key:"forwardPackagedMessageToCallMachine",value:function(re){this._messageChannel.forwardPackagedMessageToCallMachine(re,this._iframe,this._callFrameId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(re){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(re,this._callFrameId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(re){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(re)}},{key:"handleMessageFromCallMachine",value:function(re){switch(re.action){case"iframe-ready-for-launch-config":this.sendMessageToCallMachine(Xo({action:"iframe-launch-config"},this.properties));break;case"loaded":this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null);try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}break;case"joined-meeting":this._joinedCallback&&(this._joinedCallback(re.participants),this._joinedCallback=null);try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}break;case"participant-joined":case"participant-updated":if(this._callState===rn)return;if(re.participant&&re.participant.session_id){var ye=re.participant.local?"local":re.participant.session_id;this._callObjectMode&&(Ci(re.participant),ra(re.participant),va(re.participant,this._participants[ye]));try{this.maybeEventTrackStopped(this._participants[ye],re.participant,"audioTrack"),this.maybeEventTrackStopped(this._participants[ye],re.participant,"videoTrack"),this.maybeEventTrackStopped(this._participants[ye],re.participant,"screenVideoTrack"),this.maybeEventTrackStopped(this._participants[ye],re.participant,"screenAudioTrack"),this.maybeEventTrackStarted(this._participants[ye],re.participant,"audioTrack"),this.maybeEventTrackStarted(this._participants[ye],re.participant,"videoTrack"),this.maybeEventTrackStarted(this._participants[ye],re.participant,"screenVideoTrack"),this.maybeEventTrackStarted(this._participants[ye],re.participant,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(this._participants[ye],re.participant),this.maybeEventTrackStartedForCustomTracks(this._participants[ye],re.participant),this.maybeEventRecordingStopped(this._participants[ye],re.participant),this.maybeEventRecordingStarted(this._participants[ye],re.participant)}catch(No){console.error("track events error",No)}if(!this.compareEqualForParticipantUpdateEvent(re.participant,this._participants[ye])){this._participants[ye]=Xo({},re.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus();try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}}}break;case"participant-left":if(re.participant&&re.participant.session_id){var Je=this._participants[re.participant.session_id];Je&&(this.maybeEventTrackStopped(Je,null,"audioTrack"),this.maybeEventTrackStopped(Je,null,"videoTrack"),this.maybeEventTrackStopped(Je,null,"screenVideoTrack"),this.maybeEventTrackStopped(Je,null,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(Je,null)),delete this._participants[re.participant.session_id];try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}}break;case"participant-counts-updated":if(!se(this._participantCounts,re.participantCounts)){this._participantCounts=re.participantCounts;try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}}break;case"access-state-updated":var St={access:re.access};if(re.awaitingAccess&&(St.awaitingAccess=re.awaitingAccess),!se(this._accessState,St)){this._accessState=St;try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}}break;case"meeting-session-updated":if(re.meetingSession)try{delete re.callFrameId,this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}break;case"error":this._iframe&&!re.preserveIframe&&(this._iframe.src=""),this._updateCallState(ht),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(re.errorMsg),this._loadedCallback=null),this._joinedCallback&&(this._joinedCallback(null,re.errorMsg),this._joinedCallback=null);try{re.preserveIframe;var Mt=c(re,["preserveIframe"]);this.emit(re.action,Mt)}catch(No){console.log("could not emit",re,No)}break;case"left-meeting":this._callState!==ht&&this._updateCallState(rn),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null);try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}break;case"input-event":var Zt=this._participants[re.session_id];Zt||(Zt=re.session_id===this._participants.local.session_id?this._participants.local:{});try{this.emit(re.event.type,{action:re.event.type,event:re.event,participant:Xo({},Zt)})}catch(No){console.log("could not emit",re,No)}break;case"selected-devices-updated":if(re.devices)try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}break;case"network-quality-change":var jn=re.threshold,xr=re.quality;if(jn!==this._network.threshold||xr!==this._network.quality){this._network.quality=xr,this._network.threshold=jn;try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}}break;case"active-speaker-change":var Fr=re.activeSpeaker;if(this._activeSpeaker.peerId!==Fr.peerId){this._activeSpeaker.peerId=Fr.peerId;try{this.emit(re.action,{action:re.action,activeSpeaker:this._activeSpeaker})}catch(No){console.log("could not emit",re,No)}}break;case"show-local-video-changed":if(this._callObjectMode)return;var bo=re.show;this._showLocalVideo=bo;try{this.emit(re.action,{action:re.action,show:bo})}catch(No){console.log("could not emit",re,No)}break;case"active-speaker-mode-change":var Ni=re.enabled;if(this._activeSpeakerMode!==Ni){this._activeSpeakerMode=Ni;try{this.emit(re.action,{action:re.action,enabled:this._activeSpeakerMode})}catch(No){console.log("could not emit",re,No)}}break;case"waiting-participant-added":case"waiting-participant-updated":case"waiting-participant-removed":this._waitingParticipants=re.allWaitingParticipants;try{this.emit(re.action,{action:re.action,participant:re.participant})}catch(No){console.log("could not emit",re,No)}break;case"receive-settings-updated":if(!se(this._receiveSettings,re.receiveSettings)){this._receiveSettings=re.receiveSettings;try{this.emit(re.action,{action:re.action,receiveSettings:re.receiveSettings})}catch(No){console.log("could not emit",re,No)}}break;case"input-settings-updated":if(!se(this._inputSettings,re.inputSettings)){this._inputSettings=re.inputSettings;try{this.emit(re.action,{action:re.action,inputSettings:re.inputSettings})}catch(No){console.log("could not emit",re,No)}}break;case"remote-media-player-started":var wi=re.session_id;this._rmpPlayerState[wi]=re.playerState,this.emitDailyJSEvent(re);break;case"remote-media-player-stopped":delete this._rmpPlayerState[re.session_id],this.emitDailyJSEvent(re);break;case"remote-media-player-updated":var Wi=re.session_id,ia=this._rmpPlayerState[Wi];ia&&this.compareEqualForRMPUpdateEvent(ia,re.remoteMediaPlayerState)||(this._rmpPlayerState[Wi]=re.remoteMediaPlayerState,this.emitDailyJSEvent(re));break;case"custom-button-click":this.emitDailyJSEvent(re);break;case"meeting-session-state-updated":this._meetingSessionState=re.meetingSessionState,this.emitDailyJSEvent(re);break;case"recording-started":case"recording-stopped":case"recording-stats":case"recording-error":case"recording-upload-completed":case"transcription-started":case"transcription-stopped":case"transcription-error":case"started-camera":case"camera-error":case"app-message":case"local-screen-share-started":case"local-screen-share-stopped":case"network-connection":case"recording-data":case"live-streaming-started":case"live-streaming-stopped":case"live-streaming-error":case"nonfatal-error":case"lang-updated":try{this.emit(re.action,re)}catch(No){console.log("could not emit",re,No)}break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(re,ye){var Je="record";if(re&&!ye.local&&ye[Je]===!1&&re[Je]!==ye[Je])try{this.emit("recording-stopped",{action:"recording-stopped"})}catch(St){console.log("could not emit",St)}}},{key:"maybeEventRecordingStarted",value:function(re,ye){var Je="record";if(re&&!ye.local&&ye[Je]===!0&&re[Je]!==ye[Je])try{this.emit("recording-started",{action:"recording-started"})}catch(St){console.log("could not emit",St)}}},{key:"maybeEventTrackStopped",value:function(re,ye,Je){if(re&&(re[Je]&&re[Je].readyState==="ended"||re[Je]&&(!ye||!ye[Je])||re[Je]&&re[Je].id!==ye[Je].id))try{this.emit("track-stopped",{action:"track-stopped",track:re[Je],participant:ye})}catch(St){console.log("could not emit",St)}}},{key:"maybeEventCustomTrackStopped",value:function(re,ye,Je){if(re&&(re&&re.readyState==="ended"||re&&!ye||re&&re.id!==ye.id))try{this.emit("track-stopped",{action:"track-stopped",track:re,participant:Je})}catch(St){console.log("maybeEventCustomTrackStopped: could not emit",St)}}},{key:"maybeEventCustomTrackStarted",value:function(re,ye,Je){if(ye&&!re||ye&&re.readyState==="ended"||ye&&ye.id!==re.id)try{this.emit("track-started",{action:"track-started",track:ye,participant:Je})}catch(St){console.log("maybeEventCustomTrackStarted: could not emit",St)}}},{key:"maybeEventTrackStarted",value:function(re,ye,Je){if(ye[Je]&&(!re||!re[Je])||ye[Je]&&re[Je].readyState==="ended"||ye[Je]&&ye[Je].id!==re[Je].id)try{this.emit("track-started",{action:"track-started",track:ye[Je],participant:ye})}catch(St){console.log("could not emit",St)}}},{key:"maybeEventTrackStoppedForCustomTracks",value:function(re,ye){if(re)for(var Je in re.tracks)ca(Je)||this.maybeEventCustomTrackStopped(re.tracks[Je].track,ye&&ye.tracks[Je]?ye.tracks[Je].track:null,ye)}},{key:"maybeEventTrackStartedForCustomTracks",value:function(re,ye){if(ye)for(var Je in ye.tracks)ca(Je)||this.maybeEventCustomTrackStarted(re&&re.tracks[Je]?re.tracks[Je].track:null,ye.tracks[Je].track,ye)}},{key:"compareEqualForRMPUpdateEvent",value:function(re,ye){var Je,St;return re.state===ye.state&&((Je=re.settings)===null||Je===void 0?void 0:Je.volume)===((St=ye.settings)===null||St===void 0?void 0:St.volume)}},{key:"emitDailyJSEvent",value:function(re){try{this.emit(re.action,re)}catch(ye){console.log("could not emit",re,ye)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(re,ye){return!!se(re,ye)&&(!re.videoTrack||!ye.videoTrack||re.videoTrack.id===ye.videoTrack.id&&re.videoTrack.muted===ye.videoTrack.muted&&re.videoTrack.enabled===ye.videoTrack.enabled)&&(!re.audioTrack||!ye.audioTrack||re.audioTrack.id===ye.audioTrack.id&&re.audioTrack.muted===ye.audioTrack.muted&&re.audioTrack.enabled===ye.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return wr()?typeof DailyNativeUtils=="undefined"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(re){this._updateCallState(this._callState,re)}},{key:"_updateCallState",value:function(re){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(re!==this._callState||ye!==this._isPreparingToJoin){var Je=this._callState,St=this._isPreparingToJoin;this._callState=re,this._isPreparingToJoin=ye;var Mt=this._isCallPendingOrOngoing(Je,St),Zt=this._isCallPendingOrOngoing(this._callState,this._isPreparingToJoin);Mt!==Zt&&(this.updateKeepDeviceAwake(Zt),this.updateDeviceAudioMode(Zt),this.updateShowAndroidOngoingMeetingNotification(Zt),this.updateNoOpRecordingEnsuringBackgroundContinuity(Zt))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=bs,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Ie},this._meetingSessionState=ns,this._receiveSettings={},this._inputSettings={},this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(re){wr()&&this.nativeUtils().setKeepDeviceAwake(re,this._callFrameId)}},{key:"updateDeviceAudioMode",value:function(re){if(wr()&&!this.disableReactNativeAutoDeviceManagement("audio")){var ye=re?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(ye)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(re){if(wr()&&this.nativeUtils().setShowOngoingMeetingNotification){var ye,Je,St,Mt;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var Zt=this.properties.reactNativeConfig.androidInCallNotification;ye=Zt.title,Je=Zt.subtitle,St=Zt.iconName,Mt=Zt.disableForCustomOverride}Mt&&(re=!1),this.nativeUtils().setShowOngoingMeetingNotification(re,ye,Je,St,this._callFrameId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(re){wr()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(re)}},{key:"_isCallPendingOrOngoing",value:function(re,ye){return[Ft,Lt].includes(re)||ye}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){if(wr()){var re=store.getState();for(var ye in re.streams){var Je=re.streams[ye];Je&&Je.pendingTrack&&Je.pendingTrack.kind==="audio"&&(Je.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(re){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[re]}},{key:"absoluteUrl",value:function(re){if(re!==void 0){var ye=document.createElement("a");return ye.href=re,ye.href}}},{key:"sayHello",value:function(){var re="hello, world.";return console.log(re),re}}]),ge}()}).call(this,t(144))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function($,n,t){(function(e){var s="Expected a function",o=0/0,a="[object Symbol]",c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,h=/^0o[0-7]+$/i,m=parseInt,g=typeof e=="object"&&e&&e.Object===Object&&e,v=typeof self=="object"&&self&&self.Object===Object&&self,O=g||v||Function("return this")(),u=Object.prototype,r=u.toString,i=Math.max,d=Math.min,b=function(){return O.Date.now()};function w(B,f,y){var M,N,A,L,C,R,U=0,Z=!1,F=!1,z=!0;if(typeof B!="function")throw new TypeError(s);f=W(f)||0,S(y)&&(Z=!!y.leading,F="maxWait"in y,A=F?i(W(y.maxWait)||0,f):A,z="trailing"in y?!!y.trailing:z);function G(Ye){var se=M,ie=N;return M=N=void 0,U=Ye,L=B.apply(ie,se),L}function V(Ye){return U=Ye,C=setTimeout(Y,f),Z?G(Ye):L}function k(Ye){var se=Ye-R,ie=Ye-U,Ee=f-se;return F?d(Ee,A-ie):Ee}function K(Ye){var se=Ye-R,ie=Ye-U;return R===void 0||se>=f||se<0||F&&ie>=A}function Y(){var Ye=b();if(K(Ye))return ee(Ye);C=setTimeout(Y,k(Ye))}function ee(Ye){return C=void 0,z&&M?G(Ye):(M=N=void 0,L)}function ae(){C!==void 0&&clearTimeout(C),U=0,M=R=N=C=void 0}function he(){return C===void 0?L:ee(b())}function me(){var Ye=b(),se=K(Ye);if(M=arguments,N=this,R=Ye,se){if(C===void 0)return V(R);if(F)return C=setTimeout(Y,f),G(R)}return C===void 0&&(C=setTimeout(Y,f)),L}return me.cancel=ae,me.flush=he,me}function E(B,f,y){var M=!0,N=!0;if(typeof B!="function")throw new TypeError(s);return S(y)&&(M="leading"in y?!!y.leading:M,N="trailing"in y?!!y.trailing:N),w(B,f,{leading:M,maxWait:f,trailing:N})}function S(B){var f=typeof B;return!!B&&(f=="object"||f=="function")}function P(B){return!!B&&typeof B=="object"}function D(B){return typeof B=="symbol"||P(B)&&r.call(B)==a}function W(B){if(typeof B=="number")return B;if(D(B))return o;if(S(B)){var f=typeof B.valueOf=="function"?B.valueOf():B;B=S(f)?f+"":f}if(typeof B!="string")return B===0?B:+B;B=B.replace(c,"");var y=p.test(B);return y||h.test(B)?m(B.slice(2),y?2:8):l.test(B)?o:+B}$.exports=E}).call(this,t(144))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function($,n,t){"use strict";t.r(n);var e=t(111),s=t(83),o=t(0),a=t(1),c=t(6),l=t.n(c),p=t(73),h=t.n(p),m=t(41),g=t(397),v=t(3),O=t(923),u=t(924),r=t(8);class i extends o.Component{render({html:De,children:Me,metadata:st}){return Object(o.h)("div",{className:"container-border"},Object(r.setMetaData)(st),Object(o.h)("div",{className:"container"},Object(o.h)("div",{className:"page typography"},Me,Object(o.h)("div",{className:"body markup",dangerouslySetInnerHTML:{__html:De}}))))}}var d=t(651),b=t(689),w=t(627),E=t(110),S=t(7),P=t(389),D=t(933),W=t(51),B=t(557),f=t(337),y=t(1242),M=t(2),N=t(142),A=t(1535),L=t.n(A);function C(He,De,Me,st,dt,Rt,xt){try{var jt=He[Rt](xt),_t=jt.value}catch(on){Me(on);return}jt.done?De(_t):Promise.resolve(_t).then(st,dt)}function R(He){return function(){var De=this,Me=arguments;return new Promise(function(st,dt){var Rt=He.apply(De,Me);function xt(_t){C(Rt,st,dt,xt,jt,"next",_t)}function jt(_t){C(Rt,st,dt,xt,jt,"throw",_t)}xt(void 0)})}}function U(){return U=Object.assign||function(He){for(var De=1;De<arguments.length;De++){var Me=arguments[De];for(var st in Me)Object.prototype.hasOwnProperty.call(Me,st)&&(He[st]=Me[st])}return He},U.apply(this,arguments)}function Z(He,De){if(He==null)return{};var Me={},st=Object.keys(He),dt,Rt;for(Rt=0;Rt<st.length;Rt++)dt=st[Rt],!(De.indexOf(dt)>=0)&&(Me[dt]=He[dt]);return Me}function F(He,De){if(!!He){if(typeof He=="string")return z(He,De);var Me=Object.prototype.toString.call(He).slice(8,-1);if(Me==="Object"&&He.constructor&&(Me=He.constructor.name),Me==="Map"||Me==="Set")return Array.from(He);if(Me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Me))return z(He,De)}}function z(He,De){(De==null||De>He.length)&&(De=He.length);for(var Me=0,st=new Array(De);Me<De;Me++)st[Me]=He[Me];return st}function G(He,De){var Me=typeof Symbol!="undefined"&&He[Symbol.iterator]||He["@@iterator"];if(Me)return(Me=Me.call(He)).next.bind(Me);if(Array.isArray(He)||(Me=F(He))||De&&He&&typeof He.length=="number"){Me&&(He=Me);var st=0;return function(){return st>=He.length?{done:!0}:{done:!1,value:He[st++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V=Object(M.createContext)(null),k=function(){var De=Object(M.useContext)(V);return De},K=Object(M.createContext)({on:function(){},off:function(){}}),Y=0,ee=function(){return Y++},ae=function(De,Me){var st=Object(M.useContext)(K),dt=st.off,Rt=st.on,xt=Object(M.useState)(!1),jt=xt[0],_t=xt[1],on=Object(M.useRef)(0),gn=Object(M.useMemo)(function(){return ee()},[]);Object(M.useEffect)(function(){if(!(!De||jt)){if(on.current>1e5){console.error(`useDailyEvent called with potentially non-memoized event callback or due to too many re-renders.
        Memoize using useCallback to avoid re-render loop or reduce the amount of state transitions the callback depends on.
        Passed callback for '`+De+"' event is NOT registered.",Me),_t(!0);return}on.current++;var Wn=setTimeout(function(){on.current=0},50);return Rt(De,Me,gn),function(){clearTimeout(Wn),dt(De,gn)}}},[Me,De,gn,jt,dt,Rt])},he=function(De,Me,st){st===void 0&&(st=100);var dt=Object(M.useContext)(K),Rt=dt.off,xt=dt.on,jt=Object(M.useMemo)(function(){var gn;return Array.isArray(De)?De.reduce(function(Wn,or){return Wn[or]=ee(),Wn},{}):(gn={},gn[De]=ee(),gn)},[De]),_t=Object(M.useRef)([]),on=Object(M.useMemo)(function(){return L()(function(){_t.current.length!==0&&(Me(_t.current),_t.current=[])},st,{trailing:!0})},[Me,st]);Object(M.useEffect)(function(){if(!!De){var gn=function(or){_t.current.push(or),setTimeout(on,0)};return Array.isArray(De)?De.forEach(function(Wn){return xt(Wn,gn,jt[Wn])}):xt(De,gn,jt[De]),function(){Array.isArray(De)?De.forEach(function(Wn){return Rt(Wn,jt[Wn])}):Rt(De,jt[De])}}},[on,De,jt,Rt,xt])},me="daily-react-",Ye=function(De,Me){return String(Me).split(".").filter(function(st){return st.length}).reduce(function(st,dt){return st&&st[dt]},De)},se=function(De,Me){return Me.map(function(st){return Ye(De,st)})},ie=Object(N.b)({key:me+"active-id",default:null}),Ee=Object(N.b)({key:me+"local-id",default:""}),Oe=Object(N.b)({key:me+"participants-objects",default:[]}),ce=Object(N.e)({key:me+"participant",get:function(De){return function(Me){var st,dt=Me.get,Rt=dt(Oe);return(st=Rt.find(function(xt){return xt.session_id===De}))!=null?st:null}}}),ue=Object(N.e)({key:me+"participant-property",get:function(De){var Me=De.id,st=De.properties;return function(dt){var Rt,xt=dt.get,jt=xt(Oe),_t=(Rt=jt.find(function(on){return on.session_id===Me}))!=null?Rt:null;return se(_t,st)}}}),pe=function(De){var Me=De.children,st=k(),dt=Object(N.f)(function(xt){var jt=xt.transact_UNSTABLE;return function(_t){jt(function(on){var gn=on.set;gn(Ee,_t.local.session_id),gn(Oe,Object.values(_t))})}},[]);Object(M.useEffect)(function(){if(!!st){var xt=setInterval(function(){var jt=st.participants();"local"in jt&&(dt(jt),clearInterval(xt))},100);return function(){clearInterval(xt)}}},[st,dt]);var Rt=Object(M.useCallback)(function(){if(!!st){var xt=st==null?void 0:st.participants();!xt.local||dt(xt)}},[st,dt]);return ae("started-camera",Rt),ae("access-state-updated",Rt),ae("joining-meeting",Rt),ae("joined-meeting",Object(M.useCallback)(function(xt){dt(xt.participants)},[dt])),he(["active-speaker-change","participant-joined","participant-updated","participant-left"],Object(N.f)(function(xt){var jt=xt.transact_UNSTABLE;return function(_t){jt(function(on){var gn=on.set;_t.forEach(function(Wn){switch(Wn.action){case"active-speaker-change":{var or=Wn.activeSpeaker.peerId;gn(ie,or),gn(Oe,function(lr){return[].concat(lr).map(function(An){return An.session_id===or?U({},An,{last_active:new Date}):An})});break}case"participant-joined":gn(Oe,function(lr){return[].concat(lr,[Wn.participant]).filter(function(An,xn,Bn){return Bn.findIndex(function(fn){return fn.session_id===An.session_id})==xn})});break;case"participant-updated":gn(Oe,function(lr){return[].concat(lr).map(function(An){return An.session_id===Wn.participant.session_id?U({},Wn.participant,{last_active:An.last_active}):An})});break;case"participant-left":gn(Oe,function(lr){return[].concat(lr).filter(function(An){return Wn.participant.session_id!==An.session_id})});break}})})}},[])),ae("left-meeting",Object(N.f)(function(xt){var jt=xt.reset;return function(){jt(Ee),jt(Oe)}},[])),M.default.createElement(M.default.Fragment,null,Me)},$e=function(De,Me){var st=Me===void 0?{}:Me,dt=st.onParticipantLeft,Rt=st.onParticipantUpdated,xt=Object(N.g)(ce(De));return he(["participant-updated","participant-left"],Object(M.useCallback)(function(jt){var _t=jt.filter(function(on){return on.participant.session_id===De});!_t.length||_t.forEach(function(on){switch(on.action){case"participant-updated":Rt==null||Rt(on);break;case"participant-left":dt==null||dt(on);break}})},[dt,Rt,De])),xt},ne=function(De){var Me=De===void 0?{}:De,st=Me.ignoreLocal,dt=st===void 0?!1:st,Rt=Me.onActiveSpeakerChange,xt=k(),jt=Object(N.g)(ie),_t=Object(M.useState)(""),on=_t[0],gn=_t[1],Wn=$e(on);return Object(M.useEffect)(function(){var or;if(!!xt){var lr=xt==null||(or=xt.participants())==null?void 0:or.local;dt&&jt===(lr==null?void 0:lr.session_id)||gn(jt!=null?jt:"")}},[xt,dt,jt]),ae("active-speaker-change",Object(M.useCallback)(function(or){Rt==null||Rt(or)},[Rt])),Wn},X=function(){return Object(N.g)(Ee)||null},q=Boolean,Ne=function(){return 0},Qe=function(De){var Me=De===void 0?{filter:q,sort:Ne}:De,st=Me.filter,dt=st===void 0?q:st,Rt=Me.onActiveSpeakerChange,xt=Me.onParticipantJoined,jt=Me.onParticipantLeft,_t=Me.onParticipantUpdated,on=Me.sort,gn=on===void 0?Ne:on,Wn=Object(N.g)(Oe),or=Object(M.useMemo)(function(){var xn=q;switch(dt){case"local":xn=function(fn){return fn.local};break;case"owner":xn=function(fn){return fn.owner};break;case"record":xn=function(fn){return fn.record};break;case"remote":xn=function(fn){return!fn.local};break;case"screen":xn=function(fn){return fn.screen};break;default:xn=dt}return xn},[dt]),lr=Object(M.useMemo)(function(){var xn;switch(gn){case"joined_at":case"session_id":case"user_id":case"user_name":xn=function(fn,Or){var kr=fn[gn],Mo=Or[gn];if(kr!==void 0||Mo!==void 0){if(kr===void 0)return-1;if(Mo===void 0||kr>Mo)return 1;if(kr<Mo)return-1}return 0};break;default:xn=gn;break}return xn},[gn]),An=Object(M.useMemo)(function(){return Wn.filter(or).sort(lr).map(function(xn){return xn.session_id}).filter(Boolean)},[Wn,or,lr]);return he(["participant-joined","participant-updated","active-speaker-change","participant-left"],Object(M.useCallback)(function(xn){!xn.length||xn.forEach(function(Bn){switch(Bn.action){case"participant-joined":xt==null||xt(Bn);break;case"participant-updated":_t==null||_t(Bn);break;case"active-speaker-change":Rt==null||Rt(Bn);break;case"participant-left":jt==null||jt(Bn);break}})},[Rt,xt,jt,_t])),An},Ze=function(De){var Me=De===void 0?{}:De,st=Me.onLocalScreenShareStarted,dt=Me.onLocalScreenShareStopped,Rt=k(),xt=Object(M.useCallback)(function(gn){Rt==null||Rt.startScreenShare(gn)},[Rt]),jt=Object(M.useCallback)(function(){Rt==null||Rt.stopScreenShare()},[Rt]);ae("local-screen-share-started",Object(M.useCallback)(function(){return st==null?void 0:st()},[st])),ae("local-screen-share-stopped",Object(M.useCallback)(function(){return dt==null?void 0:dt()},[dt]));var _t=Qe({filter:"screen"}),on=Object(M.useMemo)(function(){return _t.map(function(gn){var Wn,or=Object.values((Wn=Rt==null||Rt.participants==null?void 0:Rt.participants())!=null?Wn:{}),lr=or.find(function(An){return An.session_id===gn});if(!!lr)return{local:lr.local,screenAudio:lr.tracks.screenAudio,screenVideo:lr.tracks.screenVideo,screenId:gn+"-screen",session_id:gn}}).filter(function(gn){return!!gn})},[Rt,_t]);return{isSharingScreen:on.some(function(gn){return gn.local}),screens:on,startScreenShare:xt,stopScreenShare:jt}},tt=function(De){return["blocked","off"].includes(De.state)},Ft=function(De,Me){var st=Object(N.g)(ue({id:De,properties:Array.isArray(Me)?Me:[Me]}));return Array.isArray(Me)?st:st[0]},Lt=function(De,Me){Me===void 0&&(Me="video");var st=Ft(De,"tracks."+Me);return st?U({},st,{isOff:st.state==="blocked"||st.state==="off"}):{isOff:!0,persistentTrack:void 0,state:"off",subscribed:!1}},rn=function(De){var Me=De.onPlayFailed,st=De.sessionId,dt=De.type,Rt=dt===void 0?"audio":dt,xt=Object(M.useRef)(null),jt=Lt(st,Rt);return Object(M.useEffect)(function(){var _t=xt.current;if(!(!_t||!(jt==null?void 0:jt.persistentTrack))){var on,gn=function(){on=setTimeout(function(){_t.readyState===_t.HAVE_ENOUGH_DATA&&!_t.paused||Me==null||Me({sessionId:st,target:_t,type:Rt})},1500)},Wn=function(){clearTimeout(on)};return _t.addEventListener("canplay",gn),_t.addEventListener("play",Wn),_t.srcObject=new MediaStream([jt==null?void 0:jt.persistentTrack]),function(){_t==null||_t.removeEventListener("canplay",gn),_t==null||_t.removeEventListener("play",Wn)}}},[jt==null?void 0:jt.persistentTrack,Me,st,Rt]),M.default.createElement("audio",{autoPlay:!0,"data-session-id":st,"data-audio-type":Rt,playsInline:!0,ref:xt})},ht=Object(M.memo)(function(He){var De=He.maxSpeakers,Me=De===void 0?5:De,st=He.onPlayFailed,dt=He.playLocalScreenAudio,Rt=dt===void 0?!1:dt,xt=Object(M.useState)([]),jt=xt[0],_t=xt[1],on=Ze(),gn=on.screens,Wn=X(),or=ne({ignoreLocal:!0}),lr=Qe({filter:Object(M.useCallback)(function(Bn){return!Bn.local&&Boolean(Bn.tracks.audio.subscribed)},[])}),An=Object(N.f)(function(Bn){var fn=Bn.snapshot;return function(){var Or=R(function*(kr){if(!!lr.includes(kr)){var Mo=yield fn.getPromise(Oe);_t(function(vo){var ii;if(vo.includes(kr))return vo;if(vo.some(function(gr){return!gr})){var Wo=vo.findIndex(function(gr){return!gr});return vo[Wo]=kr,[].concat(vo)}var Go=vo.findIndex(function(gr){return Mo.some(function(fo){return fo.session_id===gr&&tt(fo.tracks.audio)})});if(Go>=0)return vo[Go]=kr,[].concat(vo);var Ao=Mo.filter(function(gr){return vo.includes(gr.session_id)&&gr.session_id!==(or==null?void 0:or.session_id)}).sort(function(gr,fo){var So,mi,Ro=(So=gr==null?void 0:gr.last_active)!=null?So:new Date("1970-01-01"),Pi=(mi=fo==null?void 0:fo.last_active)!=null?mi:new Date("1970-01-01");return Ro>Pi?1:Ro<Pi?-1:0});if(!Ao.length)return vo[0]=kr,[].concat(vo);var ui=vo.indexOf((ii=Ao[0])==null?void 0:ii.session_id);return vo[ui]=kr,[].concat(vo)})}});return function(kr){return Or.apply(this,arguments)}}()},[or==null?void 0:or.session_id,lr]),xn=Object(M.useCallback)(function(Bn){_t(function(fn){if(!fn.includes(Bn))return fn;var Or=[].concat(fn),kr=Or.indexOf(Bn);return Or[kr]="",Or})},[]);return he(["active-speaker-change","track-started","participant-left"],Object(M.useCallback)(function(Bn){Bn.forEach(function(fn){switch(fn.action){case"active-speaker-change":if(fn.activeSpeaker.peerId===Wn)return;An(fn.activeSpeaker.peerId);break;case"track-started":fn.track.kind==="audio"&&fn.participant&&!fn.participant.local&&An(fn.participant.session_id);break;case"participant-left":xn(fn.participant.session_id);break}})},[An,Wn,xn])),Object(M.useEffect)(function(){var fn=new Array(Me).fill(null);_t(fn)},[Me]),M.default.createElement(M.default.Fragment,null,jt.map(function(Bn,fn){return M.default.createElement(rn,{key:"speaker-slot-"+fn,onPlayFailed:st,sessionId:Bn,type:"audio"})}),gn.filter(function(Bn){return Rt?!0:!Bn.local}).map(function(Bn){return M.default.createElement(rn,{key:Bn.screenId,onPlayFailed:st,sessionId:Bn.session_id,type:"screenAudio"})}))});ht.displayName="DailyAudio";var je=Object(M.forwardRef)(function(He,De){var Me=He.automirror,st=He.fit,dt=st===void 0?"contain":st,Rt=He.mirror,xt=He.onResize,jt=He.playableStyle,_t=jt===void 0?{}:jt,on=He.sessionId,gn=He.style,Wn=gn===void 0?{}:gn,or=He.type,lr=or===void 0?"video":or,An=Z(He,["automirror","fit","mirror","onResize","playableStyle","sessionId","style","type"]),xn=X(),Bn=xn===on,fn=lr==="screenVideo",Or=Bn&&!fn,kr=Object(M.useRef)(null),Mo=De||kr,vo=Lt(on,lr),ii=vo.persistentTrack,Wo=Or||fn||!vo.isOff,Go=Ft(on,"tracks."+lr+".subscribed"),Ao=Object(M.useMemo)(function(){if(typeof Rt=="boolean")return Rt;if(!Me)return!1;if(!ii)return Or;var ui=ii.getSettings(),gr="facingMode"in ui?Or&&ui.facingMode==="user":Or;return gr},[Me,Or,Rt,ii]);return Object(M.useEffect)(function(){var gr=Mo.current;if(!!gr){var fo=function(){!gr.paused||gr.play()},So=function(){gr.style.transform="scale(1)"},mi=function(){gr.style.transform="",setTimeout(function(){gr.paused&&gr.play()},100)},Ro=function(){document.visibilityState!=="hidden"&&(!gr.paused||gr.play())};return gr.addEventListener("canplay",fo),gr.addEventListener("enterpictureinpicture",So),gr.addEventListener("leavepictureinpicture",mi),document.addEventListener("visibilitychange",Ro),function(){gr.removeEventListener("canplay",fo),gr.removeEventListener("enterpictureinpicture",So),gr.removeEventListener("leavepictureinpicture",mi),document.removeEventListener("visibilitychange",Ro)}}},[Mo]),Object(M.useEffect)(function(){var gr=Mo.current;if(!(!gr||!ii))return gr.srcObject=new MediaStream([ii]),gr.load(),function(){gr.srcObject=null,gr.load()}},[Mo,ii,ii==null?void 0:ii.id]),Object(M.useEffect)(function(){var gr=Mo.current;if(!(!xt||!gr)){var fo,So=function(){!gr||(fo&&cancelAnimationFrame(fo),fo=requestAnimationFrame(function(){if(!document.hidden){var Ro=gr==null?void 0:gr.videoWidth,Pi=gr==null?void 0:gr.videoHeight;Ro&&Pi&&xt({aspectRatio:Ro/Pi,height:Pi,width:Ro})}}))};return So(),gr==null||gr.addEventListener("resize",So),function(){return gr==null?void 0:gr.removeEventListener("resize",So)}}},[xt,Mo,ii]),M.default.createElement("video",Object.assign({autoPlay:!0,muted:!0,playsInline:!0,ref:Mo,"data-local":Bn,"data-mirrored":Ao||void 0,"data-playable":Wo||void 0,"data-session-id":on,"data-subscribed":Go,"data-video-type":lr,style:U({objectFit:dt,transform:Ao?"scale(-1, 1)":""},Wn,Wo?_t:{})},An))});je.displayName="DailyVideo";var Le=Object(M.createContext)({refreshDevices:function(){return Promise.resolve()}}),rt=Object(N.b)({key:me+"general-camera-state",default:"pending"}),Pe=Object(N.b)({key:me+"general-microphone-state",default:"pending"}),de=Object(N.b)({key:me+"camera-devices",default:[]}),be=Object(N.b)({key:me+"microphone-devices",default:[]}),Ie=Object(N.b)({key:me+"speaker-devices",default:[]}),ke=Object(N.b)({key:me+"last-camera-error",default:null}),Te=function(De){var Me=De.children,st=k(),dt=Object(N.f)(function(xt){var jt=xt.transact_UNSTABLE;return R(function*(){var _t,on,gn,Wn;if(typeof((_t=navigator)==null||(on=_t.mediaDevices)==null?void 0:on.getUserMedia)=="undefined"||typeof((gn=navigator)==null||(Wn=gn.mediaDevices)==null?void 0:Wn.enumerateDevices)=="undefined"){jt(function(Wo){var Go=Wo.set;Go(rt,"not-supported"),Go(Pe,"not-supported")});return}if(!!st)try{var or=yield st.enumerateDevices(),lr=or.devices,An=lr.filter(function(Wo){return Wo.kind==="videoinput"&&Wo.deviceId!==""}),xn=lr.filter(function(Wo){return Wo.kind==="audioinput"&&Wo.deviceId!==""}),Bn=lr.filter(function(Wo){return Wo.kind==="audiooutput"&&Wo.deviceId!==""}),fn=yield st.getInputDevices(),Or=fn.camera,kr=fn.mic,Mo=fn.speaker,vo=function(Go,Ao,ui){var gr,fo;return{device:Ao,selected:"deviceId"in Go&&Ao.deviceId===Go.deviceId,state:(gr=(fo=ui.find(function(So){return So.device.deviceId===Ao.deviceId}))==null?void 0:fo.state)!=null?gr:"granted"}},ii=function(Go,Ao){return Go.device.deviceId==="default"?-1:Ao.device.deviceId==="default"?1:Go.device.label<Ao.device.label?-1:Go.device.label>Ao.device.label?1:0};jt(function(Wo){var Go=Wo.set;Go(de,function(Ao){return An.filter(Boolean).map(function(ui){return vo(Or,ui,Ao)}).sort(ii)}),Go(be,function(Ao){return xn.filter(Boolean).map(function(ui){return vo(kr,ui,Ao)}).sort(ii)}),Go(Ie,function(Ao){return Bn.filter(Boolean).map(function(ui){return vo(Mo,ui,Ao)}).sort(ii)})})}catch(Wo){jt(function(Go){var Ao=Go.set;Ao(rt,"not-supported"),Ao(Pe,"not-supported")})}})},[st]),Rt=Object(N.f)(function(xt){var jt=xt.set,_t=xt.snapshot,on=xt.transact_UNSTABLE;return R(function*(){var gn,Wn,or,lr,An,xn,Bn,fn,Or,kr,Mo,vo;if(!!st){var ii=yield _t.getPromise(rt),Wo=yield _t.getPromise(Pe),Go=st.participants();if(!!Go.local){var Ao=Go.local.tracks,ui=ii==="pending"&&Ao.video.state==="interrupted",gr=Wo==="pending"&&Ao.audio.state==="interrupted";((gn=Ao.audio)==null||(Wn=gn.blocked)==null?void 0:Wn.byDeviceInUse)?on(function(fo){var So=fo.set;So(Pe,"in-use"),So(be,function(mi){return mi.map(function(Ro){return Ro.selected?U({},Ro,{state:"in-use"}):Ro})})}):((or=Ao.audio)==null||(lr=or.blocked)==null?void 0:lr.byDeviceMissing)?jt(Pe,"not-found"):((An=Ao.audio)==null||(xn=An.blocked)==null?void 0:xn.byPermissions)?jt(Pe,"blocked"):gr||on(function(fo){var So=fo.set;So(Pe,"granted"),So(be,function(mi){return mi.map(function(Ro){return Ro.selected?U({},Ro,{state:"granted"}):Ro})})}),((Bn=Ao.video)==null||(fn=Bn.blocked)==null?void 0:fn.byDeviceInUse)?on(function(fo){var So=fo.set;So(rt,"in-use"),So(de,function(mi){return mi.map(function(Ro){return Ro.selected?U({},Ro,{state:"in-use"}):Ro})})}):((Or=Ao.video)==null||(kr=Or.blocked)==null?void 0:kr.byDeviceMissing)?jt(rt,"not-found"):((Mo=Ao.video)==null||(vo=Mo.blocked)==null?void 0:vo.byPermissions)?jt(rt,"blocked"):ui||on(function(fo){var So=fo.set;So(rt,"granted"),So(de,function(mi){return mi.map(function(Ro){return Ro.selected?U({},Ro,{state:"granted"}):Ro})})}),dt()}}})},[st,dt]);return ae("participant-updated",Object(M.useCallback)(function(xt){!xt.participant.local||Rt()},[Rt])),ae("available-devices-updated",dt),ae("selected-devices-updated",dt),ae("camera-error",Object(N.f)(function(xt){var jt=xt.transact_UNSTABLE;return function(_t){jt(function(on){var gn,Wn,or,lr,An,xn,Bn,fn=on.set;switch(fn(ke,_t.error),(gn=_t.error)==null?void 0:gn.type){case"cam-in-use":fn(rt,"in-use");break;case"mic-in-use":fn(Pe,"in-use");break;case"cam-mic-in-use":fn(rt,"in-use"),fn(Pe,"in-use");break;case"not-found":((Wn=_t.error)==null?void 0:Wn.missingMedia.includes("video"))&&fn(rt,"not-found"),((or=_t.error)==null?void 0:or.missingMedia.includes("audio"))&&fn(Pe,"not-found");break;case"permissions":((lr=_t.error)==null?void 0:lr.blockedMedia.includes("video"))&&fn(rt,"blocked"),((An=_t.error)==null?void 0:An.blockedMedia.includes("audio"))&&fn(Pe,"blocked");break;case"constraints":((xn=_t.error)==null?void 0:xn.reason)==="invalid"?(fn(rt,"constraints-invalid"),fn(Pe,"constraints-invalid")):((Bn=_t.error)==null?void 0:Bn.reason)==="none-specified"&&(fn(rt,"constraints-none-specified"),fn(Pe,"constraints-none-specified"));break;case"undefined-mediadevices":fn(rt,"undefined-mediadevices"),fn(Pe,"undefined-mediadevices");break;case"unknown":default:fn(rt,"unknown"),fn(Pe,"unknown");break}})}},[])),ae("started-camera",Object(N.f)(function(xt){var jt=xt.transact_UNSTABLE;return function(){jt(function(_t){var on=_t.set;on(rt,"granted"),on(Pe,"granted")}),Rt()}},[Rt])),M.default.createElement(Le.Provider,{value:{refreshDevices:dt}},Me)},x=Object(N.b)({key:me+"room",default:null}),H=function(De){var Me=De.children,st=k(),dt=Object(N.f)(function(Rt){var xt=Rt.set;return R(function*(){if(!(!st||st.meetingState()==="left-meeting")){var jt=yield st.room();return jt&&"id"in jt&&xt(x,jt),jt}})},[st]);return ae("access-state-updated",dt),M.default.createElement(M.default.Fragment,null,Me)},le=function(De){var Me=De.children,st=De.recoilRootProps,dt=st===void 0?{}:st,Rt=Z(De,["children","recoilRootProps"]),xt=Object(M.useState)("callObject"in Rt?Rt.callObject:null),jt=xt[0],_t=xt[1],on=Object(M.useRef)({});Object(M.useEffect)(function(){var An;if("callObject"in Rt){var xn=(jt==null?void 0:jt._callFrameId)!==(Rt==null||(An=Rt.callObject)==null?void 0:An._callFrameId),Bn=!Rt.callObject,fn=!jt&&Rt.callObject;Bn?_t(null):(xn||fn)&&_t(Rt.callObject)}},[jt,Rt]);var gn=Object(M.useCallback)(function(An){if("action"in An)for(var xn=An.action,Bn=G((Or=(kr=on.current)==null||(Mo=kr[xn])==null?void 0:Mo.values())!=null?Or:[]),fn;!(fn=Bn()).done;){var Or,kr,Mo,vo=fn.value;vo(An)}},[]),Wn=Object(M.useCallback)(function(An){!An||Object.keys(on.current).forEach(function(xn){An.off(xn,gn).on(xn,gn)})},[gn]);Object(M.useEffect)(function(){if(!jt){if("callObject"in Rt){_t(Rt.callObject),Wn(Rt.callObject);return}var An=y.a.createCallObject(Rt);_t(An),Wn(An)}},[jt,Wn,Rt]);var or=Object(M.useCallback)(function(An,xn,Bn){var fn;if(on.current[An]||(on.current[An]=new Map,jt&&jt.off(An,gn).on(An,gn)),!((fn=on.current[An])==null?void 0:fn.has(Bn))){var Or;(Or=on.current[An])==null||Or.set(Bn,xn)}},[jt,gn]),lr=Object(M.useCallback)(function(An,xn){var Bn,fn;(Bn=on.current[An])==null||Bn.delete(xn),((fn=on.current[An])==null?void 0:fn.size)===0&&(jt==null||jt.off(An,gn),delete on.current[An])},[jt,gn]);return M.default.createElement(N.a,Object.assign({},dt),M.default.createElement(V.Provider,{value:jt},M.default.createElement(K.Provider,{value:{on:or,off:lr}},M.default.createElement(H,null,M.default.createElement(pe,null,M.default.createElement(Te,null,Me))))))},Ce=function(){return!0},Ue=function(De){var Me=De===void 0?{}:De,st=Me.filter,dt=st===void 0?Ce:st,Rt=Me.ignoreLocal,xt=Rt===void 0?!1:Rt,jt=X(),_t=Object(N.g)(ie),on=Object(M.useState)(null),gn=on[0],Wn=on[1];return Object(M.useEffect)(function(){xt&&_t===jt||!(dt==null?void 0:dt(_t))||Wn(_t)},[dt,jt,xt,_t]),gn},Ve=function(De){var Me=De===void 0?{}:De,st=Me.onAppMessage,dt=k(),Rt=Object(M.useCallback)(function(jt,_t){_t===void 0&&(_t="*"),!!dt&&dt.sendAppMessage(jt,_t)},[dt]),xt=Object(M.useCallback)(function(jt){st==null||st(jt,Rt)},[st,Rt]);return ae("app-message",xt),Rt},bt=function(De){return Lt(De,"audio")},yt=function(){var De=k(),Me=Object(N.g)(rt),st=Object(N.g)(Pe),dt=Object(N.g)(de),Rt=Object(N.g)(be),xt=Object(N.g)(Ie),jt=Object(N.g)(ke),_t=Object(M.useContext)(Le),on=_t.refreshDevices,gn=Object(M.useCallback)(function(){var An=R(function*(xn){yield De==null?void 0:De.setInputDevicesAsync({audioDeviceId:null,videoDeviceId:xn})});return function(xn){return An.apply(this,arguments)}}(),[De]),Wn=Object(M.useCallback)(function(){var An=R(function*(xn){yield De==null?void 0:De.setInputDevicesAsync({audioDeviceId:xn,videoDeviceId:null})});return function(xn){return An.apply(this,arguments)}}(),[De]),or=Object(M.useCallback)(function(){var An=R(function*(xn){yield De==null?void 0:De.setOutputDeviceAsync({outputDeviceId:xn})});return function(xn){return An.apply(this,arguments)}}(),[De]),lr=["blocked","in-use","not-found","constraints-invalid","constraints-none-specified","undefined-mediadevices","unknown"];return{cameraError:jt,cameras:dt,camState:Me,hasCamError:lr.includes(Me),hasMicError:lr.includes(st),microphones:Rt,micState:st,refreshDevices:on,setCamera:gn,setMicrophone:Wn,setSpeaker:or,speakers:xt}},Qt=Object(N.b)({key:me+"input-settings",default:null}),tn=Object(N.b)({key:me+"input-settings-error",default:null}),Kn=function(De){var Me=De===void 0?{}:De,st=Me.onError,dt=Me.onInputSettingsUpdated,Rt=Object(N.g)(Qt),xt=Object(N.g)(tn),jt=k(),_t=Object(N.f)(function(gn){var Wn=gn.set;return function(or){Wn(Qt,or)}},[]);Object(M.useEffect)(function(){!jt||jt.getInputSettings().then(_t)},[jt,_t]),ae("input-settings-updated",Object(M.useCallback)(function(gn){_t(gn.inputSettings),dt==null||dt(gn)},[dt,_t])),ae("nonfatal-error",Object(N.f)(function(gn){var Wn=gn.set;return function(or){or.type==="input-settings-error"&&(Wn(tn,or.errorMsg),st==null||st(or))}},[st]));var on=Object(M.useCallback)(function(gn){jt==null||jt.updateInputSettings(gn)},[jt]);return{errorMsg:xt,inputSettings:Rt,updateInputSettings:on}},Ot=Object(N.b)({key:me+"live-streaming",default:{errorMsg:void 0,isLiveStreaming:!1,layout:void 0}}),lt=function(De){var Me=De===void 0?{}:De,st=Me.onLiveStreamingError,dt=Me.onLiveStreamingStarted,Rt=Me.onLiveStreamingStopped,xt=k(),jt=Object(N.g)(Ot);ae("live-streaming-started",Object(N.f)(function(Wn){var or=Wn.set;return function(lr){or(Ot,{isLiveStreaming:!0,layout:lr==null?void 0:lr.layout}),dt==null||dt(lr)}},[dt])),ae("live-streaming-stopped",Object(N.f)(function(Wn){var or=Wn.set;return function(lr){or(Ot,function(An){return U({},An,{isLiveStreaming:!1,layout:void 0})}),Rt==null||Rt(lr)}},[Rt])),ae("live-streaming-error",Object(N.f)(function(Wn){var or=Wn.set;return function(lr){or(Ot,function(An){return U({},An,{errorMsg:lr.errorMsg})}),st==null||st(lr)}},[st]));var _t=Object(M.useCallback)(function(Wn){!xt||xt.startLiveStreaming(Wn)},[xt]),on=Object(M.useCallback)(function(){!xt||xt.stopLiveStreaming()},[xt]),gn=Object(M.useCallback)(function(Wn){var or=Wn.layout;!xt||xt.updateLiveStreaming({layout:or})},[xt]);return U({},jt,{startLiveStreaming:_t,stopLiveStreaming:on,updateLiveStreaming:gn})},Be=function(){var De=Object(N.g)(Ee);return $e(De)},_e=Object(N.b)({key:me+"topology",default:"none"}),Ae=Object(N.b)({key:me+"networkQuality",default:100}),fe=Object(N.b)({key:me+"networkThreshold",default:"good"}),ft=function(De){var Me=De===void 0?{}:De,st=Me.onNetworkConnection,dt=Me.onNetworkQualityChange,Rt=k(),xt=Object(N.g)(_e),jt=Object(N.g)(Ae),_t=Object(N.g)(fe),on=Object(N.f)(function(lr){var An=lr.set;return R(function*(){if(!!Rt){var xn=yield Rt.getNetworkTopology();!xn||(xn==null?void 0:xn.topology)==="none"||An(_e,xn.topology)}})},[Rt]),gn=Object(N.f)(function(lr){var An=lr.transact_UNSTABLE;return function(xn){An(function(Bn){var fn=Bn.set;switch(xn.event){case"connected":xn.type==="peer-to-peer"&&fn(_e,"peer"),xn.type==="sfu"&&fn(_e,"sfu");break}}),st==null||st(xn)}},[st]),Wn=Object(N.f)(function(lr){var An=lr.transact_UNSTABLE;return function(xn){An(function(Bn){var fn=Bn.set;fn(Ae,function(Or){return Or!==xn.quality?xn.quality:Or}),fn(fe,function(Or){return Or!==xn.threshold?xn.threshold:Or})}),dt==null||dt(xn)}},[dt]);ae("joined-meeting",on),ae("network-connection",gn),ae("network-quality-change",Wn),Object(M.useEffect)(function(){!Rt||xt||on()},[Rt,on,xt]);var or=Object(M.useCallback)(R(function*(){var lr=yield Rt==null?void 0:Rt.getNetworkStats();return lr==null?void 0:lr.stats}),[Rt]);return{getStats:or,quality:jt,threshold:_t,topology:xt}},nt=Object(N.c)({key:me+"participant-receive-settings",default:{}}),ct=function(De){var Me=De===void 0?{}:De,st=Me.id,dt=st===void 0?"base":st,Rt=Me.onReceiveSettingsUpdated,xt=Object(N.g)(nt("base")),jt=Object(N.g)(nt(dt)),_t=k();ae("receive-settings-updated",Object(N.f)(function(gn){var Wn=gn.transact_UNSTABLE;return function(or){Wn(function(lr){for(var An=lr.reset,xn=lr.set,Bn=U({},or.receiveSettings),fn=0,Or=Object.entries(Bn);fn<Or.length;fn++){var kr=Or[fn],Mo=kr[0],vo=kr[1];xn(nt(Mo),vo)}dt in Bn||An(nt(dt))}),Rt==null||Rt(or)}},[dt,Rt]));var on=Object(M.useCallback)(function(gn){!(_t&&_t.meetingState()==="joined-meeting")||_t==null||_t.updateReceiveSettings==null||_t.updateReceiveSettings(gn)},[_t]);return{receiveSettings:dt==="base"||Object.keys(jt).length===0?xt:jt,updateReceiveSettings:on}},Xe=Object(N.b)({key:me+"recording",default:{isLocalParticipantRecorded:!1,isRecording:!1}}),gt=function(De){var Me=De===void 0?{}:De,st=Me.onRecordingData,dt=Me.onRecordingError,Rt=Me.onRecordingStarted,xt=Me.onRecordingStopped,jt=k(),_t=Object(N.g)(Xe),on=Object(N.h)(Xe),gn=X(),Wn=Qe({filter:"record"});Object(M.useEffect)(function(){var xn=Wn.length>0,Bn=Wn.includes(gn!=null?gn:"local");on(function(fn){return U({},fn,{isLocalParticipantRecorded:(fn==null?void 0:fn.type)==="local"||!(fn==null?void 0:fn.type)?xn:fn.isLocalParticipantRecorded,isRecording:(fn==null?void 0:fn.type)==="local"||!(fn==null?void 0:fn.type)?xn:fn.isRecording,local:((fn==null?void 0:fn.type)==="local"||!(fn==null?void 0:fn.type))&&xn?Bn:fn==null?void 0:fn.local,type:xn?"local":fn==null?void 0:fn.type})})},[gn,Wn,on]),ae("recording-started",Object(N.f)(function(xn){var Bn=xn.set;return function(fn){var Or=!0;switch(fn.type){case"cloud-beta":case"cloud":{var kr;gn&&((kr=fn.layout)==null?void 0:kr.preset)==="single-participant"&&fn.layout.session_id!==gn&&(Or=!1);break}}Bn(Xe,{error:!1,isLocalParticipantRecorded:Or,isRecording:!0,layout:fn==null?void 0:fn.layout,local:fn==null?void 0:fn.local,recordingId:fn==null?void 0:fn.recordingId,recordingStartedDate:new Date,startedBy:fn==null?void 0:fn.startedBy,type:fn==null?void 0:fn.type}),Rt==null||Rt(fn)}},[gn,Rt])),ae("recording-stopped",Object(N.f)(function(xn){var Bn=xn.set;return function(fn){Bn(Xe,function(Or){return U({},Or,{isLocalParticipantRecorded:!1,isRecording:!1})}),xt==null||xt(fn)}},[xt])),ae("recording-error",Object(N.f)(function(xn){var Bn=xn.set;return function(fn){Bn(Xe,function(Or){return U({},Or,{error:!0,isLocalParticipantRecorded:!1,isRecording:!1})}),dt==null||dt(fn)}},[dt])),ae("recording-data",Object(M.useCallback)(function(xn){st==null||st(xn)},[st]));var or=Object(M.useCallback)(function(xn){!jt||jt.startRecording(xn)},[jt]),lr=Object(M.useCallback)(function(){!jt||jt.stopRecording()},[jt]),An=Object(M.useCallback)(function(xn){!jt||jt.updateRecording(xn)},[jt]);return U({},_t,{startRecording:or,stopRecording:lr,updateRecording:An})},Tt=function(){var De=Object(N.g)(x);return De},Ut=function(De){return Lt(De,"screenAudio")},qt=function(De){return Lt(De,"screenVideo")},sn=Object(N.b)({key:me+"transcription",default:{isTranscriptionEnabled:!1,isTranscribing:!1,model:"general",language:"en",transcriptions:[]}}),_n=function(De){var Me,st=De===void 0?{}:De,dt=st.onTranscriptionAppData,Rt=st.onTranscriptionError,xt=st.onTranscriptionStarted,jt=st.onTranscriptionStopped,_t=k(),on=Object(N.g)(sn),gn=Object(N.h)(sn),Wn=Tt();Object(M.useEffect)(function(){var An;!(Wn==null||(An=Wn.domainConfig)==null?void 0:An.enable_transcription)||gn(function(xn){return U({},xn,{isTranscriptionEnabled:!0})})},[Wn==null||(Me=Wn.domainConfig)==null?void 0:Me.enable_transcription,gn]),ae("transcription-started",Object(N.f)(function(An){var xn=An.set;return function(Bn){xn(sn,U({isTranscriptionEnabled:!0,error:!1,isTranscribing:!0,transcriptionStartDate:new Date,transcriptions:[]},Bn)),xt==null||xt(Bn)}},[xt])),ae("transcription-stopped",Object(N.f)(function(An){var xn=An.set;return function(Bn){xn(sn,function(fn){return U({},fn,{updatedBy:Bn==null?void 0:Bn.updatedBy,isTranscribing:!1})}),jt==null||jt(Bn)}},[jt])),ae("transcription-error",Object(N.f)(function(An){var xn=An.set;return function(Bn){xn(sn,function(fn){return U({},fn,{error:!0,isTranscribing:!1})}),Rt==null||Rt(Bn)}},[Rt])),ae("app-message",Object(N.f)(function(An){var xn=An.set;return function(Bn){var fn;(Bn==null?void 0:Bn.fromId)==="transcription"&&(Bn==null||(fn=Bn.data)==null?void 0:fn.is_final)&&(xn(sn,function(Or){return U({},Or,{isTranscribing:!0,transcriptions:[].concat(Or.transcriptions,[Bn.data])})}),dt==null||dt(Bn))}},[dt]));var or=Object(M.useCallback)(function(An){!_t||_t.startTranscription(An)},[_t]),lr=Object(M.useCallback)(function(){!_t||_t.stopTranscription()},[_t]);return U({},on,{startTranscription:or,stopTranscription:lr})},Hn=function(De){return Lt(De,"video")},wn=Object(N.b)({key:me+"waiting-participants",default:[]}),Un=Object(N.c)({key:me+"waiting-participant",default:{awaitingAccess:{level:"full"},id:"",name:""}}),bn=Object(N.d)({key:me+"waitingParticipantsSelector",get:function(De){var Me=De.get,st=Me(wn);return st.map(function(dt){return Me(Un(dt))})}}),cr=function(De){var Me=De===void 0?{}:De,st=Me.onWaitingParticipantAdded,dt=Me.onWaitingParticipantRemoved,Rt=Me.onWaitingParticipantUpdated,xt=k(),jt=Object(N.g)(bn),_t=Object(N.f)(function(An){var xn=An.transact_UNSTABLE;return function(Bn){xn(function(fn){var Or=fn.set;Or(wn,function(kr){return kr.includes(Bn.participant.id)?kr:[].concat(kr,[Bn.participant.id])}),Or(Un(Bn.participant.id),Bn.participant)}),st==null||st(Bn)}},[st]),on=Object(N.f)(function(An){var xn=An.transact_UNSTABLE;return function(Bn){xn(function(fn){var Or=fn.reset,kr=fn.set;kr(wn,function(Mo){return Mo.filter(function(vo){return vo!==Bn.participant.id})}),Or(Un(Bn.participant.id))}),dt==null||dt(Bn)}},[dt]),gn=Object(N.f)(function(An){var xn=An.set;return function(Bn){xn(Un(Bn.participant.id),Bn.participant),Rt==null||Rt(Bn)}},[Rt]);ae("waiting-participant-added",_t),ae("waiting-participant-removed",on),ae("waiting-participant-updated",gn);var Wn=Object(M.useCallback)(function(An,xn){if(An==="*"){xt==null||xt.updateWaitingParticipants({"*":{grantRequestedAccess:xn}});return}xt==null||xt.updateWaitingParticipant(An,{grantRequestedAccess:xn})},[xt]),or=Object(M.useCallback)(function(An){Wn(An,!0)},[Wn]),lr=Object(M.useCallback)(function(An){Wn(An,!1)},[Wn]);return{waitingParticipants:jt,grantAccess:or,denyAccess:lr}},fr=t(11),ur=t.n(fr),er=t(4),jr=t(26),wt=t(14),mt=t(116),Fe=t(178),pt={view:"frontend-live_events-LiveEvent-module__view--3kuZ_",eventComplete:"frontend-live_events-LiveEvent-module__eventComplete--23m7M",lobby:"frontend-live_events-LiveEvent-module__lobby--2QDLw",videoContainer:"frontend-live_events-LiveEvent-module__videoContainer--3wqOD",loading:"frontend-live_events-LiveEvent-module__loading--abXhR",localScreen:"frontend-live_events-LiveEvent-module__localScreen--2FreB",roomActionsContainer:"frontend-live_events-LiveEvent-module__roomActionsContainer--PEvSv",room:"frontend-live_events-LiveEvent-module__room--3B2wv",presentation:"frontend-live_events-LiveEvent-module__presentation--3hkCd",presentationContainer:"frontend-live_events-LiveEvent-module__presentationContainer--Ns_Xd",remoteScreen:"frontend-live_events-LiveEvent-module__remoteScreen--3nzLn",participantsContainer:"frontend-live_events-LiveEvent-module__participantsContainer--1kS5E",participant:"frontend-live_events-LiveEvent-module__participant--1xqtZ",onlyOne:"frontend-live_events-LiveEvent-module__onlyOne--3-SRH",onlyTwo:"frontend-live_events-LiveEvent-module__onlyTwo--3PiLD",small:"frontend-live_events-LiveEvent-module__small--3qdKk",medium:"frontend-live_events-LiveEvent-module__medium--2hYWg",large:"frontend-live_events-LiveEvent-module__large--RHUtC",name:"frontend-live_events-LiveEvent-module__name--mzQsk",reaction:"frontend-live_events-LiveEvent-module__reaction--1PirK",clickableHand:"frontend-live_events-LiveEvent-module__clickableHand--3QrMi",controls:"frontend-live_events-LiveEvent-module__controls--1vlYv",participantModeration:"frontend-live_events-LiveEvent-module__participantModeration--1D1mK",action:"frontend-live_events-LiveEvent-module__action--2vYJF",videoDisabled:"frontend-live_events-LiveEvent-module__videoDisabled--3g-AZ",chatMenu:"frontend-live_events-LiveEvent-module__chatMenu--1_4V3",chat:"frontend-live_events-LiveEvent-module__chat--3X11q",messageWindow:"frontend-live_events-LiveEvent-module__messageWindow--qhNsq",noMessages:"frontend-live_events-LiveEvent-module__noMessages--1KMcE",chatMessage:"frontend-live_events-LiveEvent-module__chatMessage--3i-zh",messageFrom:"frontend-live_events-LiveEvent-module__messageFrom--LrtI0",messageText:"frontend-live_events-LiveEvent-module__messageText--1A1Ig",inputContainer:"frontend-live_events-LiveEvent-module__inputContainer--3ewbk",emojiMenu:"frontend-live_events-LiveEvent-module__emojiMenu--1Ox7f",emojiMenuItem:"frontend-live_events-LiveEvent-module__emojiMenuItem--29_WA",emojiDrawer:"frontend-live_events-LiveEvent-module__emojiDrawer--1v2k7",emoji:"frontend-live_events-LiveEvent-module__emoji--1Gpgq",raisedHand:"frontend-live_events-LiveEvent-module__raisedHand--_7aeb"},Dt=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});const Jt=({joinCall:He,credentials:De})=>{const Me=Be(),st=Hn(Me==null?void 0:Me.session_id),dt=k(),Rt=Object(a.j)(),[xt,jt]=Object(a.k)(!0);Object(a.d)(()=>{function on(){return Dt(this,null,function*(){yield dt==null?void 0:dt.preAuth({url:De.roomUrl,token:De.token}),yield dt==null?void 0:dt.startCamera(),jt(!1)})}on()},[dt]),Object(a.d)(()=>{!st.persistentTrack||Rt.current&&(Rt.current.srcObject=new MediaStream([st==null?void 0:st.persistentTrack]))},[st.persistentTrack]);const _t=on=>{dt==null||dt.setUserName(on.target.value)};return Object(o.h)(er.b,{className:pt.lobby,gap:20,alignItems:"center",justifyContent:"center",paddingTop:12,paddingBottom:24},Object(o.h)(mt.a,{as:"h4"},"Get ready to join live event"),Object(o.h)(er.c,{className:`${pt.videoContainer} ${xt?pt.loading:""}`,alignItems:"center",justifyContent:"center"},xt&&Object(o.h)(Fe.a,{type:"circular"}),Object(o.h)("video",{ref:Rt,autoPlay:!0})),Object(o.h)("input",{placeholder:"What's your name?",value:(Me==null?void 0:Me.user_name)||"",onChange:_t}),Object(o.h)(wt.a,{priority:"primary",onClick:He,disabled:!De},"Join"))};var Gt=t(1209);const mn=()=>Object(o.h)(er.b,{className:pt.eventComplete,alignItems:"center",justifyContent:"center",gap:24},Object(o.h)(Gt.default,{height:64}));var Cn=t(1002),tr=t(1004),Zn=t(270),At=t.n(Zn),Xt=t(440),en=t(808),$n=t(15),Xn=t.n($n),Yn=t(35),Sn=t(10);const nr=({from:He,text:De})=>({type:"chat",from:He,time:new Date,message:De}),zt=({message:He})=>Object(o.h)(er.b,{className:pt.chatMessage},Object(o.h)(Sn.b,{size:12,className:pt.messageFrom},He.from," @ ",Xn()(He.time).format("h:mm A")),Object(o.h)(Sn.b,{size:14,className:pt.messageText},Object(o.h)(At.a,{options:{attributes:{rel:"nofollow ugc"}}},He.message))),Kt=["\u{1F642}","\u{1F604}","\u{1F602}","\u{1F970}","\u{1F923}","\u{1F632}","\u2764\uFE0F","\u{1F44D}","\u{1F44E}","\u{1F64F}","\u{1F44F}","\u{1F525}","\u{1F389}"],$t=({onSelect:He})=>Object(o.h)(er.c,{className:pt.emojiDrawer,alignItems:"center",justifyContent:"space-between",wrap:"wrap"},Kt.map(De=>Object(o.h)("div",{className:pt.emoji,onClick:()=>He(De)},De))),et=()=>Object(o.h)(er.b,{className:pt.noMessages,alignItems:"center",justifyContent:"center"},Object(o.h)(Sn.b,{as:"h5"},"No messages yet"),Object(o.h)(Xt.a,null)),Wt=({messages:He,sendMessage:De})=>{const[Me,st]=Object(a.k)(""),dt=Object(a.j)(),Rt=X(),xt=Ft(Rt,"user_name"),jt=()=>{const gn=nr({from:xt,text:Me});De(gn),st("")},_t=gn=>{!Me||gn.keyCode===13&&!gn.shiftKey&&jt()},on=gn=>{var Wn;st(or=>or.length?`${or} ${gn}`:gn),(Wn=dt.current)==null||Wn.focus()};return Object(o.h)(Yn.c,{trigger:Object(o.h)(wt.c,{size:32,fill:"empty",priority:"secondary"},Object(o.h)(en.a,{size:20})),className:pt.chatMenu},Object(o.h)(er.b,{className:pt.chat},Object(o.h)(er.b,{className:pt.messageWindow,gap:8},!He.length&&Object(o.h)(et,null),He.map(gn=>Object(o.h)(zt,{message:gn}))),Object(o.h)(er.b,null,Object(o.h)(er.c,{className:pt.inputContainer,alignItems:"center",gap:4},Object(o.h)("input",{value:Me,onChange:gn=>st(gn.currentTarget.value),onKeyUp:_t,placeholder:"Type message here...",ref:dt}),Object(o.h)(Yn.c,{className:pt.emojiMenu,trigger:Object(o.h)("div",null,"\u{1F642}")},Object(o.h)(Yn.d,{className:pt.emojiMenuItem,onClick:()=>{}},Object(o.h)($t,{onSelect:on})))))))},Vt=(He,De)=>({type:"moderation",message:De,to:He}),cn=He=>{const{to:De,message:Me}=He;if(De==="*"){if(Me==="tempDisableAudio")return"The host has temporarily muted everyone's audio";if(Me==="tempDisableVideo")return"The host has has temporarily disabled everyone's video";if(Me==="disableAudio")return"The host has muted all participants";if(Me==="enableAudio")return"The host enabled audio for all participants";if(Me==="endEvent")return"The host has ended the event"}return Me==="tempDisableAudio"?"The host has muted your audio":Me==="tempDisableVideo"?"The host has temporarily disabled your video":Me==="disableAudio"?"The host has disabled your audio":Me==="disableVideo"?"The host has disabled your video":Me==="enableAudio"?"The host has enabled your audio":Me==="enableVideo"?"The host has enabled your video":Me==="stopScreenShare"?"The host has ended your screen share":Me==="selected"?"The host has called on you and unmuted your microphone":Me==="forceDisconnect"?"The host has removed you from the event":(console.error("No matching ModerationMessageType in getToastModerationMessage"),"")};var Tn=t(1001),pn=t(903),Gn=t(1210),hr=t(881),Rn=t(1211),pr=t(275),zn=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});const Ar=({activeScreenShare:He,sendModerationMessage:De})=>{const Me=Object(pr.a)(),st=X(),dt=Ft(st,"owner"),Rt=k(),xt=()=>{const gn={};for(const Wn in Rt==null?void 0:Rt.participants())Wn!=="local"&&(gn[Wn]={setAudio:!1});Rt==null||Rt.updateParticipants(gn),De("*","tempDisableAudio")},jt=()=>{const gn=He==null?void 0:He.session_id;!gn||De(gn,"stopScreenShare")},_t=()=>zn(void 0,null,function*(){const gn=window.location.pathname.split("/")[2];yield ur.a.post(`/api/v1/live_event/${gn}/end`).send()}),on=Object(a.a)(gn=>{const Wn=window.location.href;Me(Wn.replace("/host",`/${gn}`))},[window.location.href]);if(!!dt)return Object(o.h)(Yn.c,{trigger:Object(o.h)(wt.c,{size:32,fill:"empty"},Object(o.h)(Rn.default,{height:20}))},Object(o.h)(Yn.d,{onClick:()=>on("guest"),icon:Object(o.h)(Tn.a,null)},"Copy Guest URL"),Object(o.h)(Yn.d,{onClick:()=>on("participant"),icon:Object(o.h)(pn.a,null)},"Copy Participant URL"),He&&He.session_id!==st&&Object(o.h)(Yn.d,{onClick:jt,icon:Object(o.h)(Cn.a,null)},"Stop active screen share"),Object(o.h)(Yn.d,{onClick:xt,icon:Object(o.h)(hr.default,null)},"Temporarily Mute All"),Object(o.h)(Yn.d,{onClick:_t,icon:Object(o.h)(Gn.default,null)},"End Event"))};var Rr=t(659),ir=t(1003),Sr=t(1212),Pr=t(1213),yr=t(980),br=Object.defineProperty,Br=Object.defineProperties,Nr=Object.getOwnPropertyDescriptors,lo=Object.getOwnPropertySymbols,Zr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable,wr=(He,De,Me)=>De in He?br(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,$o=(He,De)=>{for(var Me in De||(De={}))Zr.call(De,Me)&&wr(He,Me,De[Me]);if(lo)for(var Me of lo(De))zr.call(De,Me)&&wr(He,Me,De[Me]);return He},xo=(He,De)=>Br(He,Nr(De));const Vo=["\u{1F44F}","\u{1F44D}","\u2764\uFE0F","\u{1F923}","\u{1F632}","\u{1F389}"],Ti=()=>{const He=k(),[De,Me]=Object(a.k)(null),st=X(),dt=Ft(st,"userData")||{},{handRaised:Rt}=dt,xt=_t=>{He==null||He.setUserData(xo($o({},dt),{reaction:_t})),De&&clearTimeout(De);const on=setTimeout(()=>{He==null||He.setUserData(xo($o({},dt),{reaction:null})),Me(null)},6500);Me(on)},jt=()=>{He==null||He.setUserData(xo($o({},dt),{handRaised:!Rt}))};return Object(M.useEffect)(()=>()=>{De&&(clearTimeout(De),Me(null))},[]),Object(o.h)(Yn.c,{className:pt.emojiMenu,trigger:Object(o.h)(er.c,{alignItems:"center"},Object(o.h)(ir.a,{size:18,stroke:"#ffffff"}))},Object(o.h)(Yn.d,{className:pt.emojiMenuItem,onClick:()=>{}},Object(o.h)(er.c,{className:pt.emojiDrawer,alignItems:"center",justifyContent:"space-between",wrap:"wrap"},Vo.map(_t=>Object(o.h)("div",{className:pt.emoji,onClick:()=>xt(_t)},_t))),Object(o.h)(er.c,{gap:4,className:pt.raisedHand,justifyContent:"center",alignItems:"center",onClick:jt},Object(o.h)(Sn.b,null,Rt?"Lower Hand":"Raise Hand"," \u270B"))))},Ho=()=>{const He=k(),De=X(),Me=Ft(De,"video"),st=Ft(De,"audio"),dt=Ft(De,"permissions"),Rt=typeof dt.canSend=="boolean";let xt,jt;return Rt?(xt=dt.canSend,jt=dt.canSend):(xt=dt.canSend.has("audio"),jt=dt.canSend.has("video")),Object(o.h)(er.c,{className:pt.controls,padding:4,alignItems:"center",justifyContent:"space-between"},Object(o.h)(er.c,{gap:4},xt&&Object(o.h)(er.c,{alignItems:"center",onClick:()=>He==null?void 0:He.setLocalAudio(!st)},st?Object(o.h)(Sr.default,{height:18}):Object(o.h)(hr.default,{height:18})),jt&&Object(o.h)(er.c,{alignItems:"center",onClick:()=>He==null?void 0:He.setLocalVideo(!Me)},Me?Object(o.h)(Pr.default,{height:18}):Object(o.h)(yr.default,{height:18}))),Object(o.h)(Ti,null))},oi=({name:He,screen:De})=>Object(o.h)(er.c,{className:pt.name,padding:4},He?Object(o.h)(mt.a,null,He,De&&"'s Screen"):Object(o.h)(Rr.default,{height:16,stroke:"#e0e0e0"})),zo=({sessionId:He})=>{const{reaction:De,handRaised:Me}=Ft(He,"userData")||{},st=!1;return!De&&!Me?null:Object(o.h)(er.c,{gap:4,className:pt.reaction},Object(o.h)("span",null,De),!st&&Me&&Object(o.h)("span",null,"\u270B"))},ho=()=>{const He=X(),De=Ft(He,"video"),Me=Ft(He,"user_name");return Object(o.h)("div",{className:pt.participant},Object(o.h)(je,{sessionId:He,type:"video",fit:"cover",automirror:!0}),Object(o.h)(Ho,null),!De&&Object(o.h)(er.a,{justifyContent:"center",alignItems:"center",className:pt.videoDisabled},Object(o.h)(Rr.default,{height:144,stroke:"#e0e0e0"})," "),Object(o.h)(oi,{name:Me}),Object(o.h)(zo,{sessionId:He}))},Jo=({screen:He})=>He?Object(o.h)(er.a,{alignItems:"center",justifyContent:"center",className:pt.localScreen},Object(o.h)(je,{type:"screenVideo",sessionId:He.session_id,fit:"cover"})):null;var gi=t(945),ki=t(1214);const ao=({participantId:He,sendModerationMessage:De})=>{const Me=k(),st=Ft(He,"audio"),dt=Ft(He,"video"),Rt=Ft(He,"permissions"),xt=typeof Rt.canSend=="boolean";let jt,_t;xt?(jt=Rt.canSend,_t=Rt.canSend):(jt=Rt.canSend.has("audio"),_t=Rt.canSend.has("video"));const on=()=>{Me==null||Me.updateParticipant(He,{setAudio:!1}),De(He,"tempDisableAudio")},gn=()=>{Me==null||Me.updateParticipant(He,{setVideo:!1}),De(He,"tempDisableVideo")},Wn=()=>{let An,xn;jt?(An=_t?new Set(["video"]):!1,xn="disableAudio"):(An=_t?new Set(["audio","video"]):new Set(["audio"]),xn="enableAudio"),Me==null||Me.updateParticipant(He,{setAudio:!1,updatePermissions:{canSend:An}}),De(He,xn)},or=()=>{let An,xn;_t?(An=jt?new Set(["audio"]):!1,xn="disableVideo"):(An=jt?new Set(["audio","video"]):new Set(["video"]),xn="enableVideo"),Me==null||Me.updateParticipant(He,{setAudio:!1,updatePermissions:{canSend:An}}),De(He,xn)},lr=()=>{De(He,"forceDisconnect"),Me==null||Me.updateParticipant(He,{eject:!0})};return Object(o.h)("div",{className:pt.participantModeration},Object(o.h)(Yn.c,{trigger:Object(o.h)(er.c,null,Object(o.h)(gi.a,{height:20,stroke:"#eeeeee"}))},st&&Object(o.h)(Yn.d,{className:pt.action,onClick:on,icon:Object(o.h)(hr.default,{height:16})},"Temporarily mute"),dt&&Object(o.h)(Yn.d,{onClick:gn,icon:Object(o.h)(yr.default,{height:16})},"Temporily disable video"),Object(o.h)(Yn.d,{className:pt.action,onClick:Wn,icon:Object(o.h)(hr.default,{fill:jt?"#ff6b6b":"#53d09c",height:16})},jt?"Disable audio":"Enable audio"),Object(o.h)(Yn.d,{onClick:or,icon:Object(o.h)(yr.default,{fill:_t?"#ff6b6b":"#53d09c",height:16})},_t?"Disable video":"Enable video"),Object(o.h)(Yn.d,{onClick:lr,icon:Object(o.h)(ki.default,{fill:"#ff6b6b",height:16})},"Remove participant")))},Po=({participantId:He,sendModerationMessage:De})=>{const Me=X(),st=Ft(Me,"owner"),dt=Ft(He,"user_name"),Rt=Ft(He,"video"),xt=Object(jr.e)();return Object(o.h)("div",{className:pt.participant},st&&De&&Object(o.h)(ao,{participantId:He,sendModerationMessage:De}),!Rt&&Object(o.h)(er.a,{justifyContent:"center",alignItems:"center",className:pt.videoDisabled},Object(o.h)(Rr.default,{height:144,stroke:"#e0e0e0"})," "),Object(o.h)(je,{sessionId:He,type:"video",fit:"cover"}),Object(o.h)(rn,{sessionId:He}),Object(o.h)(oi,{name:dt}),Object(o.h)(zo,{sessionId:He}))},qo=({screen:He})=>{const De=Ft(He==null?void 0:He.session_id,"user_name");return He?Object(o.h)(er.a,{className:pt.remoteScreen},Object(o.h)(je,{type:"screenVideo",sessionId:He.session_id,fit:"cover"}),Object(o.h)(oi,{name:De,screen:!0})):null};var Ai=Object.defineProperty,hi=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,Re=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,Pt=(He,De,Me)=>De in He?Ai(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,Nt=(He,De)=>{for(var Me in De||(De={}))We.call(De,Me)&&Pt(He,Me,De[Me]);if(Re)for(var Me of Re(De))it.call(De,Me)&&Pt(He,Me,De[Me]);return He},kt=(He,De)=>hi(He,ze(De));const Ht=(He,De)=>De==="presentation"?"large":He===1?"onlyOne":He<=2?"onlyTwo":He<=6?"small":He<=12?"medium":"large",Bt=({participantType:He})=>{const De=Object(jr.e)(),Me=["host","guest"].includes(He),{isSharingScreen:st,screens:dt,startScreenShare:Rt,stopScreenShare:xt}=Ze(),[jt,_t]=Object(a.k)("standard");Object(a.d)(()=>{dt.length&&!st&&_t("presentation"),dt.length||_t("standard")},[dt,st]);const on=Qe({filter:fn=>!fn.local&&!fn.owner}),gn=Qe({filter:fn=>!fn.local&&fn.owner}),[Wn,or]=Object(a.k)([]),lr=Ve({onAppMessage:Object(a.a)(fn=>{const{type:Or}=fn.data;if(Or==="chat"&&or(kr=>[...kr,fn.data]),Or==="moderation"){const kr=fn.data,Mo=cn(kr);De.popToast(vo=>Object(o.h)(jr.c,kt(Nt({},vo),{text:Mo}))),kr.message==="stopScreenShare"&&xt()}},[])}),An=fn=>{lr(fn),or(Or=>[...Or,fn])},xn=(fn,Or)=>{lr(Vt(fn,Or),fn)},Bn=()=>{if(st)xt();else{if(dt.length){const fn="Another participant is currently sharing their screen";De.popToast(Or=>Object(o.h)(jr.c,kt(Nt({},Or),{text:fn})));return}Rt()}};return Object(o.h)(er.a,{className:l()(pt.room,jt==="presentation"&&pt.presentation)},st&&Object(o.h)(Jo,{screen:dt[0]}),jt==="presentation"&&Object(o.h)(er.c,{className:pt.presentationContainer,justifyContent:"center",alignItems:"center"},dt&&!st&&Object(o.h)(qo,{screen:dt[0]})),Object(o.h)(er.a,{className:l()(pt.participantsContainer,`${pt[Ht(on.length+gn.length+1,jt)]}`),justifyContent:"center",wrap:"wrap",gap:12},gn.map(fn=>Object(o.h)(Po,{key:fn,participantId:fn})),Object(o.h)(ho,null),on.map(fn=>Object(o.h)(Po,{key:fn,participantId:fn,sendModerationMessage:xn})),Object(o.h)(er.c,{className:pt.roomActionsContainer,gap:4,padding:4,alignItems:"end"},Me?Object(o.h)(wt.c,{size:32,fill:"empty",priority:"secondary",onClick:Bn},st?Object(o.h)(Cn.a,{size:20}):Object(o.h)(tr.a,{size:20})):null,Object(o.h)(Ar,{sendModerationMessage:xn,activeScreenShare:dt[0]}),Object(o.h)(Wt,{messages:Wn,sendMessage:An}))))};var Yt=Object.defineProperty,an=Object.defineProperties,En=Object.getOwnPropertyDescriptors,vn=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable,Dr=(He,De,Me)=>De in He?Yt(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,Lr=(He,De)=>{for(var Me in De||(De={}))ar.call(De,Me)&&Dr(He,Me,De[Me]);if(vn)for(var Me of vn(De))Er.call(De,Me)&&Dr(He,Me,De[Me]);return He},no=(He,De)=>an(He,En(De)),ko=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});const bi=({user:He,participantType:De,eventId:Me})=>{const st=Object(jr.e)(),[dt,Rt]=Object(a.k)(null),[xt,jt]=Object(a.k)(null),[_t,on]=Object(a.k)(!1),[gn,Wn]=Object(a.k)(null),[or,lr]=Object(a.k)(!1),An=Bn=>{var fn;((fn=Bn==null?void 0:Bn.error)==null?void 0:fn.type)==="ejected"&&(lr(!0),setTimeout(()=>Object(r.redirect)(window.location.origin),1500)),Bn.errorMsg==="You are not allowed to join this meeting"&&(st.popToast(Or=>Object(o.h)(jr.c,no(Lr({},Or),{text:"You don't have access to this event"}))),setTimeout(()=>Object(r.redirect)(window.location.origin),1500)),Bn.errorMsg==="Meeting has ended"&&(lr(!0),st.popToast(Or=>Object(o.h)(jr.c,no(Lr({},Or),{text:"The event has ended"}))),setTimeout(()=>Object(r.redirect)(window.location.origin),3e3))};Object(a.d)(()=>{if(!He)return Object(r.redirectToLogin)();const Bn=y.a.createCallObject();Bn.on("error",An),Wn(Bn);const[fn]=Array.from(document.body.getElementsByClassName("overflow-list-container sections-overflow")),[Or]=Array.from(document.body.getElementsByClassName("navbar-buttons"));return fn&&(fn.style.display="none"),Or&&(Or.style.visibility="hidden"),()=>{Bn.off("error",An);try{Bn.destroy()}catch(kr){console.error("Failed to destroy call object",kr)}fn&&(fn.style.display="flex"),Or&&(Or.style.visibility="visible")}},[]),Object(a.d)(()=>{(()=>ko(void 0,null,function*(){const Or=(yield ur.a.get(`/api/v1/live_event/${Me}`).send()).body;Rt(Or),Or.ended_at&&(lr(!0),st.popToast(kr=>Object(o.h)(jr.c,no(Lr({},kr),{text:"This event has ended"}))),setTimeout(()=>Object(r.redirect)(window.location.origin),1500))}))()},[]),Object(a.d)(()=>{gn&&dt&&!xt&&(()=>ko(void 0,null,function*(){try{const Or=(yield ur.a.get(`/api/v1/live_event/${Me}/credentials/${De}`).send()).body;jt(Or)}catch(fn){fn.status===401?(st.popToast(Or=>Object(o.h)(jr.c,no(Lr({},Or),{text:"You don't have access to this event"}))),setTimeout(()=>Object(r.redirect)(window.location.origin),1500)):(st.popToast(Or=>Object(o.h)(jr.c,no(Lr({},Or),{text:"Unable to access event. Please try again."}))),console.error("Failed to load participant credentials",fn))}}))()},[gn,dt,xt]);const xn=()=>ko(void 0,null,function*(){yield gn==null?void 0:gn.join({url:dt.room_url,token:xt.token}),on(!0)});return xt?or?Object(o.h)(mn,null):Object(o.h)(le,{callObject:gn},Object(o.h)(er.b,{width:"100vw",alignItems:"center",className:pt.view},!_t&&Object(o.h)(Jt,{joinCall:xn,credentials:xt}),_t&&Object(o.h)(Bt,{participantType:De}))):null};var ei=t(853),li=t(816),Vi=t(105),Qi=t(59),ua=t.n(Qi),Oi=t(9),_a=t(60),pa=t(204),Ra=t(166),Si=({tabs:He,tab:De,onTabClick:Me})=>Object(o.h)("div",{className:"ui-tabs"},He.map(({id:st,title:dt})=>Object(o.h)("a",{className:`ui-tab ${st}-tab ${De===st?"active":""}`,onClick:()=>Me&&Me(st)},dt))),yi=t(136),Wa=t(379),ot=t(288),at=t(50),Ct=t(707),ln={authorPic:"frontend-main-about_page-module__authorPic--phINI",heroText:"frontend-main-about_page-module__heroText--xJI9E",container:"frontend-main-about_page-module__container--ZUMPS"},yn=Object.defineProperty,Dn=(He,De,Me)=>De in He?yn(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,Ln=(He,De,Me)=>(Dn(He,typeof De!="symbol"?De+"":De,Me),Me),Jn=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});function rr(He){if(typeof window=="undefined")return!0;const De=document.createElement("div");De.innerHTML=He;for(let Me=De.childNodes.length-1;Me>=0;Me--){const st=De.childNodes[Me];if(Object(r.hasClass)(st,"button-wrapper")||Object(r.hasClass)(st,"subscription-widget-wrap"))return!1}return!0}const Cr=({pub:He,user:De,freeSignup:Me,freeSignupEmail:st})=>{const dt=He.payments_state==="enabled"&&(De==null?void 0:De.is_free_subscribed)&&!(De==null?void 0:De.is_subscribed)?"paid_upsell":"free_upsell";return Object(a.d)(()=>{Object(S.i)(S.a.ABOUT_PAGE_END_CTA_RENDERED,{pub_id:He.id,type:dt})},[]),Object(o.h)(o.Fragment,null,Object(o.h)(yi.a,{onVisible:()=>{Object(S.i)(S.a.ABOUT_PAGE_END_CTA_SEEN,{pub_id:He.id,type:dt})}}),Object(o.h)(er.b,{alignItems:"center",gap:16,padding:24,className:l()(ln.container,"end-cta-container")},Object(o.h)("img",{src:Object(v.cloudinary)(He.author_photo_url||He.logo_url,64),className:ln.authorPic}),Object(o.h)(er.b,{alignItems:"center"},Object(o.h)(Sn.b.H2,{lineHeight:32,align:"center"},"Subscribe to ",He.name),He.hero_text&&Object(o.h)(Sn.b.Meta,{size:12,className:ln.heroText,align:"center"},He.hero_text)),Object(o.h)(Ra.b,{pub:He,user:De,freeSignup:Me,freeSignupEmail:st,isStatic:!1,source:"about-page-end-cta"})))};function sr({pub:He,user:De,freeSignup:Me,freeSignupEmail:st,subscribeContent:dt}){return typeof dt!="string"?Object(o.h)("div",{className:"content-about-silhouette"},Object(o.h)("div",{className:"content-about-silhouette-line"}),Object(o.h)("div",{className:"content-about-silhouette-line"}),Object(o.h)("div",{className:"content-about-silhouette-line"}),Object(o.h)("div",{className:"content-about-silhouette-line"}),Object(o.h)("div",{className:"content-about-silhouette-line"})):Object(o.h)("div",{className:"content-about"},Object(o.h)(pa.a,{html:dt,pub:He,user:De,freeSignup:Me,freeSignupEmail:st}))}function mo({pub:He,people:De}){const Me=Object(Vi.useMediaQuery)({maxWidth:540}),st=Me?[[]]:[[],[]];for(let dt=0;dt<De.length;++dt)st[Me?0:dt%2].push(De[dt]);return Object(o.h)("div",{className:"content-people"},st.map(dt=>Object(o.h)("div",{class:"people-column"},dt.map(Rt=>Object(o.h)("div",{class:"content-person",onclick:xt=>Object(Wa.a)(xt,Object(v.getProfileUrl)(Rt,He,{utm_source:"about-page"}),{native:!0})},Object(o.h)(_a.a,{subject:Rt,profile:Rt,themed:!0,hideSubscribeButtons:!0,utmSource:"about-page"}))))))}class po extends o.Component{constructor(De,Me){super(De,Me);if(Ln(this,"onTabClick",st=>{this.loadTab({tabId:st})}),this.state={subscribeContent:De.subscribeContent,people:De.people,tabs:[]},(De.pub.child_publications||[]).length){this.state.tabs.push({id:"about",title:"About"}),this.state.tab=this.state.tabs[0];const st=Object(Oi.group_by)(De.pub.child_publications,"type");for(const dt of Array.from(st.keys()).sort())this.state.tabs.push({id:dt,title:`${Object(Oi.toTitleCase)(dt)}s`});this.state.tab=this.state.tabs.find(dt=>dt.id===De.sort)||this.state.tabs[0]}}componentDidMount(){return Jn(this,null,function*(){if(this.props.pub.parent_publication&&this.props.pub.parent_about_page_enabled){Object(r.redirect)(Object(v.getAboutUrl)(this.props.pub.parent_publication,{addBase:!0}));return}this.loadPeople(),this.loadAbout()})}loadAbout(){return Jn(this,null,function*(){if(this.state.subscribeContent!=="")try{const{body:De}=yield ur.a.get("/api/v1/publication/subscribe_content");this.setState({subscribeContent:De})}catch(De){console.error("Failed to load about content:",De)}})}loadPeople(){return Jn(this,null,function*(){if(!this.state.people)try{const{body:De}=yield ur.a.get("/api/v1/publication/users/ranked").query({public:!0});this.setState({people:De})}catch(De){console.error("Failed to load people:",De)}})}loadTab(){return Jn(this,arguments,function*({tabId:De}={}){const Me=De?this.state.tabs.find(st=>st.id===De):this.state.tab;this.state.tab.id!==Me.id&&(this.setState({tab:Me}),typeof window!="undefined"&&window.history.replaceState&&window.history.replaceState({},document.title,Object(v.updateQuery)({sort:Me.id})))})}renderChildPublications({pub:De,user:Me,freeSignup:st},{tab:dt}){let Rt,xt;De.plans?(xt=Me&&Me.is_subscribed,Rt=xt):(Rt=st||Me&&Me.is_free_subscribed,xt=Me&&Me.is_free_subscribed);const jt=gn=>`${Object(v.getBaseUrl)(gn)}/?showWelcome=true`;if(dt.id==="podcast")if(xt){const gn=ua.a.getMultiPubChildPodcasts(De).map(Wn=>Object(Ct.b)(Wn,Object(v.getPodcatcherSetupUrl)(Wn,{addBase:!0,user:null,section:null,noSection:null,params:null})));return Object(o.h)(Ct.a,{pub:De,showButton:!0,buttonText:"Set up podcast",items:gn})}else{const gn=ua.a.getMultiPubChildPodcasts(De).map(Wn=>Object(Ct.b)(Wn,jt(Wn)));return Object(o.h)(Ct.a,{pub:De,showButton:!Rt,buttonText:I`Subscribe`,items:gn})}const on=(De.child_publications?De.child_publications.filter(gn=>gn.type===dt.id):[]).map(gn=>Object(Ct.b)(gn,jt(gn)));return Object(o.h)(Ct.a,{pub:De,showButton:!Rt,buttonText:I`Subscribe`,items:on})}render({pub:De,user:Me,freeSignup:st,freeSignupEmail:dt,metadata:Rt},{subscribeContent:xt,people:jt,tabs:_t,tab:on}){const gn=_t.length>0&&(on==null?void 0:on.id),Wn=!gn||(on==null?void 0:on.id)==="about",or=(!Me||!Object(ot.a)(Me,De))&&rr(xt);return Object(o.h)("div",{className:"page typography about-page typography"},Rt&&Object(r.setMetaData)(Rt),Object(o.h)("div",{className:"container"},(Me==null?void 0:Me.is_contributor)&&Wn&&Object(o.h)(at.a,{variant:"themed-secondary",href:Object(v.pathWithQuery)("/publish/settings/edit",{title:"About page",bodyField:"subscribe_content",redirect:document.location.href}),localNavigation:!1,leftIcon:Object(o.h)(li.a,{size:20})},"Edit"),gn&&Object(o.h)(Si,{tabs:_t,tab:on.id,onTabClick:this.onTabClick}),Wn&&Object(o.h)(o.Fragment,null,Object(o.h)("div",{className:"about-content-wrap"},Object(o.h)(sr,{pub:De,user:Me,freeSignup:st,freeSignupEmail:dt,subscribeContent:xt})),or?Object(o.h)(Cr,{pub:De,user:Me,freeSignup:st,freeSignupEmail:dt}):null,(jt!=null?jt:[]).length>0&&Object(o.h)(er.b,{gap:24},Object(o.h)("h3",{class:"about-page-section-title"},"People"),Object(o.h)(mo,{pub:De,people:jt}))),gn&&["podcast","newsletter"].includes(on.id)&&this.renderChildPublications({pub:De,user:Me,freeSignup:st},{tab:on})))}}var Hr=t(767),Xr=t(211);function Ir({children:He,title:De,pub:Me,user:st,freeSignup:dt,freeSignupEmail:Rt,sort:xt,search:jt,newPosts:_t,topPosts:on,communityPosts:gn,searchPosts:Wn,sectionId:or,isPodcast:lr,metadata:An}){const xn=Boolean(Me==null?void 0:Me.theme);return Object(o.h)(Xr.a,{value:{hasThemedBackground:xn}},An&&Object(r.setMetaData)(An),Object(o.h)("div",{className:l()("archive-page typography",{"use-theme-bg":xn})},Object(o.h)("div",{className:"container"},De&&Object(o.h)("h2",null,De),Object(o.h)(Hr.a,{communityTitle:"Discussion",user:st,freeSignup:dt,freeSignupEmail:Rt,pub:Me,sort:xt,search:jt,newPosts:_t,topPosts:on,communityPosts:gn,searchPosts:Wn,stateInUrl:!0,sectionId:or,source:"archive",isPodcast:lr,showMonthDividers:!0}),He)))}var Ur=t(1153),mr=t(266),ro=t(365);class co extends o.Component{constructor(De,Me){super(De,Me);this.state={freeSignup:De.freeSignup,freeSignupEmail:De.freeSignupEmail}}componentDidMount(){Object(r.preloadImage)(Object(v.cloudinary)("/img/substack_wordmark.png",200))}onPrepareData(De){this.props.pub.plans&&!this.subscribeWindow&&(this.subscribeWindow=window.open("about:blank","_blank"))}onSignup(De){this.setState({freeSignup:!0,freeSignupEmail:De.body.email}),this.subscribeWindow&&(this.subscribeWindow.location=`${this.props.pub.base_url}/subscribe?just_signed_up=true`)}onError(De){if(this.subscribeWindow){try{this.subscribeWindow.close()}catch(Me){console.error("Failed to close subscribe window:",Me)}this.subscribeWindow=null}}render({pub:De,user:Me,no_border:st},{freeSignup:dt,freeSignupEmail:Rt}){return Object(o.h)("div",{className:`embed-page ${st?"no-border":""}`},Object(o.h)("div",{className:"embed-page-inner"},De.logo_url&&Object(o.h)("a",{href:`${De.base_url}/`,target:"_blank"},Object(o.h)("img",{className:"publication-logo",src:Object(v.cloudinary)(De.logo_url,170,{quality:"auto:best"}),alt:"Logo"})),Object(o.h)("h1",{className:`publication-name${De.logo_url?"":" no-logo"}`},Object(o.h)("a",{href:`${De.base_url}/`,target:"_blank"},Object(o.h)(ro.a,{text:De.name}))),Object(o.h)("p",{className:"publication-tagline"},!!De.hero_text&&Object(o.h)(ro.a,{text:De.hero_text})),Object(o.h)(Ra.b,{source:"embed",pub:De,user:Me,freeSignup:dt,freeSignupEmail:Rt,forceEmailInput:!0,onPrepareData:xt=>this.onPrepareData(xt),onSignup:xt=>this.onSignup(xt),onError:xt=>this.onError(xt)}),(Me||dt)&&Object(o.h)("p",null,Object(o.h)("span",{className:"account-info-logout"},Object(o.h)("a",{href:Object(v.getSignoutUrl)({redirect:document.location.href,for_pub:De.subdomain}),native:!0},"Sign out")))),Object(o.h)("a",{href:`${Object(v.getSubstackUrl)()}/?utm_source=embed&utm_content=${De.subdomain}`,target:"_blank"},Object(o.h)("img",{ref:xt=>this.img=xt,className:"substack-watermark",src:Object(v.cloudinary)("/img/substack_wordmark.black.png",200),onMouseEnter:()=>this.img.src=Object(v.cloudinary)("/img/substack_wordmark.png",200),onMouseLeave:()=>this.img.src=Object(v.cloudinary)("/img/substack_wordmark.black.png",200),alt:"Substack"})))}}var j=t(153),T=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())}),J=({pub:He,slug:De})=>{var Me;const[st,dt]=Object(a.k)(null);Object(a.d)(()=>{function xt(){return T(this,null,function*(){try{const jt=yield ur.a.get(`/api/v1/posts/${De}`);dt(jt.body)}catch(jt){console.error("Failed to load post:",jt),jt.status===404?alert("Post not found"):alert(Object(r.getNetworkErrorMessage)(jt))}})}xt()},[De]);let Rt=!1;return typeof window!="undefined"&&(Rt=((Me=Object(v.parseQuery)(window.location.href).autoplay)!=null?Me:"0")==="1"),st?Object(o.h)(j.a,{feature:"Podcast",pub:He,post:st,src:st.podcast_url,autoPlay:Rt,metricsPost:st,isFancy:!0,showCTAs:!0}):Object(o.h)("div",{className:"loading-container"})};class oe extends o.Component{render(){return Object(o.h)("div",{className:"embed-test-page"},Object(o.h)("iframe",{style:{border:"1px solid #EEE",background:"white"},width:"480",height:"320",src:"/embed",frameBorder:"0",scrolling:"no"}))}}var ve=t(154),xe=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())}),qe=({pub:He,slug:De})=>{var Me;const[st,dt]=Object(a.k)(null);Object(a.d)(()=>{function xt(){return xe(this,null,function*(){try{const jt=yield ur.a.get(`/api/v1/posts/${De}`);dt(jt.body)}catch(jt){console.error("Failed to load post:",jt),jt.status===404?alert("Post not found"):alert(Object(r.getNetworkErrorMessage)(jt))}})}xt()},[De]);let Rt=!1;return typeof window!="undefined"&&(Rt=((Me=Object(v.parseQuery)(window.location.href).autoplay)!=null?Me:"0")==="1"),st?Object(o.h)("div",{className:"video-player-embed-container"},Object(o.h)(ve.a,{mediaUpload:st.videoUpload,pub:He,post:st,autoPlay:Rt})):Object(o.h)("div",{className:"loading-container"})},vt=t(1154),It=t(1215),un=t(1216),On=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});function dn(){var He;return typeof window!="undefined"?((He=window._preloads)==null?void 0:He.file)||{}:{}}function In(He,De){return`${He.title.toLowerCase().replace(/\s/g,"_")}.${De.toLowerCase()}`}function Qn({file:He=dn(),pub:De}){const[Me,st]=Object(a.k)(null);return Object(a.d)(()=>(()=>On(this,null,function*(){if(!He.fileKey){const dt=yield fetch(`/api/v1/file/entry/${window.location.pathname.split("/").pop()}`);dt.redirected&&(window.location.href=dt.url);const Rt=yield dt.json();st(Rt)}}))(),[He.fileKey]),Object(o.h)(dr,{file:Me||He,pub:De})}function dr({file:He,pub:De}){var Me;if(!He.id)return Object(o.h)("div",{className:"page"},Object(o.h)("div",{className:"container"},Object(o.h)("h3",null,"Read Now"),Object(o.h)("div",{className:"popup-container"},Object(o.h)("div",{className:"overlay"}))));const st=(Me=He.file_key)==null?void 0:Me.split(".").pop().toUpperCase(),dt=Object(Oi.numberToHumanFileSize)(He.num_bytes),Rt=In(He,st);return Object(o.h)("div",{className:"page"},Object(o.h)("div",{className:"container"},Object(o.h)("span",{className:"table-list-title"},Object(o.h)("h3",null,"Read Now"),Object(o.h)("a",{className:"file-sidebar-header-button",href:`${Object(v.getBaseUrl)(De)}/p/${He.post_id}`},"Back")),Object(o.h)("div",{className:"table-list"},Object(o.h)("div",{className:"table-list-row table-list-header"},Object(o.h)("img",{className:`table-list-thumbnail ${He.thumbnail&&He.thumbnail.indexOf("/img/attachment_icon.svg")===-1?"":"default"}`,src:He.thumbnail||`${Object(v.getBaseUrl)(De)}/img/attachment_icon.svg`}),Object(o.h)("div",{className:"table-list-col"},Object(o.h)("div",{className:"table-list-h1"},He.title||"Unknown File"),Object(o.h)("div",{className:"table-list-h2"},dt," \u2219 ",st," File"))),Object(o.h)("a",{className:"table-list-row table-list-item",href:`${Object(v.getBaseUrl)(De)}/api/v1/file/panels/${He.file_key}`},Object(o.h)(un.default,null),Object(o.h)("span",{className:"table-list-grow"},Object(o.h)("div",{className:"table-list-h1"},"Open in Panels"),Object(o.h)("div",{className:"table-list-h2"},"Comic reader for iOS")),Object(o.h)(vt.default,{stroke:"#666",strokeWidth:0,isStatic:!0})),Object(o.h)("a",{className:"table-list-row table-list-item",download:Rt,href:`${Object(v.getBaseUrl)(De)}/api/v1/file/${He.file_key}`},Object(o.h)(It.default,null),Object(o.h)("span",{className:"table-list-grow"},Object(o.h)("div",{className:"table-list-h1"},"Download file"),Object(o.h)("div",{className:"table-list-h2"},Rt)),Object(o.h)(vt.default,{stroke:"#666",strokeWidth:0,isStatic:!0})))))}var Gr=t(187),Kr=Object.defineProperty,eo=(He,De,Me)=>De in He?Kr(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,qr=(He,De,Me)=>(eo(He,typeof De!="symbol"?De+"":De,Me),Me),so=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});class oo extends o.Component{constructor(){super(...arguments);qr(this,"acceptInvite",()=>so(this,null,function*(){var De,Me;try{const st=yield ur.a.post(`/api/v1/publication_user_invite/${this.props.matches.id}/accept`);((De=st.body)==null?void 0:De.postUrl)?location.href=(Me=st.body)==null?void 0:Me.postUrl:Object(r.redirect)(`/invite-success/${this.props.matches.id}`)}catch(st){const dt=Object(r.getNetworkErrorMessage)(st);this.setState({error:dt})}}))}componentDidMount(){this.props.user||Object(r.redirectToLogin)()}render({pub:De,post:Me,user:st,freeSignup:dt,freeSignupEmail:Rt,inviteToPost:xt,primaryEligiblePublications:jt,switchAccountRedirectUrl:_t},{error:on}){if(on)return Object(o.h)("div",{className:"container invite-success"},Object(o.h)("h3",null,"Error"),Object(o.h)("p",null,on));const gn=xt&&Me&&Me.type==="podcast",Wn=gn&&st?"Fill out your profile for your podcast appearance":gn&&!st?"Set up your profile for your podcast appearance":xt&&st?"Set up your profile":xt&&!st?"Fill out your profile":`Your invite to ${De.name}`,or=gn?"Listeners will want to know more about you. Use your profile as a chance to express yourself.":xt?"Readers will want to know more about you and even follow your writing. Use your profile as a chance to express yourself.":"Before you can accept your invite, finish setting up your profile:",lr=xt?"Update Profile & Accept Invite":"Accept Invite",An=st?"Already a writer?":"Already have an account?",xn=st?"Switch accounts":"Login";return Object(o.h)("div",{className:"container finish-invite"},Object(o.h)("h3",null,Wn),Object(o.h)("p",null,or),Object(o.h)(Gr.b,{pageTitle:"",user:st,freeSignup:dt,freeSignupEmail:Rt,needsPhoto:!1,optionalPhoto:xt,isPostInvite:xt,primaryEligiblePublications:jt,onSuccess:this.acceptInvite,text:lr}),xt&&_t&&Object(o.h)("div",{class:"invite-switch-account"},An," ",Object(o.h)("a",{href:_t},xn)))}}qr(oo,"defaultProps",{inviteToPost:!1,primaryEligiblePublications:[]});var ti=t(17),_r=t(46),To=t(148);class Co extends o.Component{renderNotAvailable(De,{time:Me=!1}={}){const st=Me?"this gift has expired":"all of these gifts have already been claimed";return Object(o.h)("div",{className:"container reward-page gift-reward-page"},Object(o.h)("h2",null,"All gone"),De,Object(o.h)("p",null,"Sorry, ",st,". You can still subscribe if you like."),Object(o.h)("div",{class:"signup"},Object(o.h)(To.a,{source:"viral_gift_none_left",pub:this.props.pub,onSuccess:()=>document.location.href="/subscribe",hideLogin:!0,hideTerms:!0})))}renderForSender(){return[Object(o.h)("h3",{class:"sender-hint"},Object(o.h)("span",null,ni(this.props.user),", share this page to give your gift"),Object(o.h)("a",{className:"button twitter-button",href:this.props.viral_gift_data.tweet_link,native:!0},"Share on Twitter"))]}render({pub:De,t:Me,user:st,freeSignupEmail:dt,viral_gift_data:Rt}){const{sender_name:xt,count_remaining:jt,sender_id:_t}=Rt,on=Object(Oi.getGiftValueText)(De.plans),gn=on?` (value: ${on})`:"",Wn=`Accept ${xt||"your friend"}'s gift`,or=`A three-month subscription to ${De.name}${gn}`,lr=Object(r.setMetaData)({title:Wn,description:or,image:De.logo_url});if(!Me||!jt)return this.renderNotAvailable(lr);let An=null;st&&st.id==_t&&(An=this.renderForSender());let xn="",Bn=dt||"";st&&!An&&(xn=st.name,Bn=st.email);const fn=`${jt} left`;return Object(o.h)("div",{className:"container reward-page receive-page"},An,lr,Object(o.h)("h2",null,"Accept Gift Subscription"),Object(o.h)("p",null,xt||"Your friend"," would like to give you a free, three-month subscription. ",gn),Object(o.h)("p",null,Object(o.h)("b",null,fn)),Object(o.h)(_r.g,{action:"/api/v1/viral_gifts/accept_gift_from_link",onSuccess:()=>document.location.href="/account/gifts/accept"},Object(o.h)("input",{type:"text",name:"name",placeholder:"Your name",value:xn}),Object(o.h)("input",{type:"email",name:"email",placeholder:"Your email",value:Bn}),Object(o.h)("input",{type:"hidden",value:Me,name:"token"}),Object(o.h)("div",{id:"error-container"}),Object(o.h)("div",{className:"button-container"},Object(o.h)(ti.b,{className:"ok-button primary",type:"submit"},"Accept Gift"))))}}class Ei extends o.Component{renderNotAvailable(De,{reason:Me="this gift is not available"}={}){return Object(o.h)("div",{className:"container reward-page gift-reward-page"},Object(o.h)("h2",null,"All gone"),De,Object(o.h)("p",null,"Sorry, ",Me,". You can still subscribe if you'd like."),Object(o.h)("div",{class:"signup"},Object(o.h)(To.a,{source:"gift_campaign_none_left",pub:this.props.pub,onSuccess:()=>document.location.href="/subscribe",hideLogin:!0,hideTerms:!0})))}render({pub:De,user:Me,freeSignupEmail:st,campaign:dt}){if(!dt||!De.plans)return this.renderNotAvailable();const Rt=Object(Oi.getGiftValueText)(De.plans,{interval:dt.gift_interval,interval_count:dt.gift_interval_count,min:500}),xt=Rt?` (${Rt} value)`:"",jt="Accept your gift",_t=`A ${dt.gift_interval_count} ${dt.gift_interval} subscription to ${De.name}${xt}`,on=Object(r.setMetaData)({title:jt,description:_t,image:De.logo_url});if(dt.limit_hours&&dt.time_limit_start&&Xn()(dt.time_limit_start).add(dt.limit_hours,"hours").isBefore(Xn()()))return this.renderNotAvailable(on,{reason:"the time has run out"});if(dt.limit_count&&dt.limit_count<=dt.count_so_far)return this.renderNotAvailable(on,{reason:"all these gifts have been claimed"});let gn=st||"";Me&&(gn=Me.email);let Wn;return dt.limit_count?Wn=`${dt.limit_count-dt.count_so_far} left`:dt.limit_hours&&(dt.time_limit_start?Wn=`${Xn()(dt.time_limit_start).add(dt.limit_hours,"hour").fromNow(!0)} left`:Wn=`${dt.limit_hours} hours left`),Object(o.h)("div",{className:"container reward-page campaign-receive-page"},on,Object(o.h)("div",{className:"gift-receive-header"},Object(o.h)("h2",null,dt.name),Object(o.h)("p",{className:"campaign-pitch"},"Here's a free ",dt.gift_interval_count," ",dt.gift_interval," gift subscription ",xt," ","to ",De.name,"."),Object(o.h)("p",{className:"urgency-text"},Wn)),Object(o.h)(_r.g,{action:"/api/v1/gift_campaigns/accept",onSuccess:()=>document.location.href="/account/gifts/accept"},Object(o.h)("input",{type:"email",name:"email",placeholder:"Your email",value:gn}),Object(o.h)("input",{type:"hidden",value:dt.code,name:"code"}),Object(o.h)("div",{id:"error-container"}),Object(o.h)("div",{className:"button-container"},Object(o.h)(ti.b,{className:"ok-button primary",type:"submit"},"Accept Gift"))))}}function ni(He){return He.name?He.name.trim().split(/\s+/g)[0]:He.email.split("@")[0]}var pi=t(902),Bi=Object.defineProperty,_i=(He,De,Me)=>De in He?Bi(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,Qo=(He,De,Me)=>(_i(He,typeof De!="symbol"?De+"":De,Me),Me),ci=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});class Xi extends o.Component{constructor(){super(...arguments);Qo(this,"state",{loading:!0,invites:[]}),Qo(this,"onSuccess",()=>ci(this,null,function*(){alert("Invite sent!"),document.location.reload()}))}componentDidMount(){if(!this.hasInvites()){Object(r.redirectToAccount)(this.props.pub);return}this.loadInvites()}hasInvites(){const{pub:De,user:Me}=this.props;return De.invite_only?Me&&Me.is_contributor?!0:!(!(De.subscriber_invites>0)||!(Me&&Me.is_subscribed)):!1}loadInvites(){return ci(this,null,function*(){try{const De=yield ur.a.get("/api/v1/publication/invite");this.setState({invites:De.body,loading:!1})}catch(De){console.error("Failed to fetch invites:",De),alert(Object(r.getNetworkErrorMessage)(De))}})}render({pub:De,user:Me},{loading:st,invites:dt}){if(!this.hasInvites())return Object(o.h)("p",{className:"main-loader"},"Loading\u2026");const Rt=Me&&Me.is_contributor,xt=Math.max(Me&&Me.invites,dt.length),jt=Math.max(xt,De.subscriber_invites),_t=jt-xt;return Object(o.h)("div",{className:"invite-page page"},Object(o.h)("div",{className:"container"},Object(o.h)("h3",null,"Your invites"),Object(o.h)("p",null,De.name," is invite-only, but you\u2019ve been granted"," ",Rt?"an infinite number of invites":Object(Oi.pluralize)(jt,"invite")," to give out."),(_t>0||Rt)&&[!Rt&&Object(o.h)("h5",null,"You have ",Object(Oi.pluralize)(_t,"invite")," left"),Object(o.h)(_r.g,{ref:on=>this.form=on,action:"/api/v1/publication/invite",onSuccess:this.onSuccess,noInlineErrors:!0},Object(o.h)("div",{className:"sideBySideWrap"},Object(o.h)("input",{type:"text",name:"name",placeholder:"Name\u2026"}),Object(o.h)("input",{type:"text",name:"email",placeholder:"Email\u2026"}),Object(o.h)(ti.b,{type:"submit",className:"primary"},"Invite")),Object(o.h)("div",{id:"error-container"}))],st&&xt>0?Object(o.h)("p",null,Object(o.h)("br",null),"Loading\u2026"):dt.length>0?[Object(o.h)("h5",null,"Used invites"),Object(o.h)("ul",null,dt.sort((on,gn)=>new Date(gn.created_at)-new Date(on.created_at)).map(on=>Object(o.h)("li",null,on.inviteeUser&&on.inviteeUser.name||""," on"," ",Xn()(on.created_at).standardDate())))]:null))}}var Ri=t(47);function yo({pub:He,user:De,post:Me,freeSignup:st,freeSignupEmail:dt}){const Rt=Object(a.j)(null),xt=()=>Rt.current&&Rt.current.open();if(!Me)return Object(o.h)(er.b,{paddingTop:32},Object(o.h)("div",{className:"container invite-success"},Object(o.h)("p",null,"You accepted your invite to ",He.name,"."),Object(o.h)("p",null,"If you need admin access, ask your inviter to change your status in the publication settings."),Object(o.h)("p",null,"If you expect to be shown on this publication's author list, make sure your"," ",Object(o.h)(Ri.a,{onClick:xt},"profile is up to date")),Object(o.h)(Gr.c,{ref:Rt,user:De,freeSignup:st,freeSignupEmail:dt,needsPhoto:!0})));const jt=Me.type==="podcast"?"We\u2019ll let you know when the podcast episode goes live":"We\u2019ll let you know when your guest post is live",_t="Your profile is set up and good to go!";return Object(o.h)(er.b,{alignItems:"center",className:"container",gap:32},Object(o.h)(er.b,{alignItems:"center",gap:4},Object(o.h)(Sn.b.PageTitle,null,jt),Object(o.h)(Sn.b.B3,null,_t)),Object(o.h)(wt.a,{href:He.base_url},`Go to ${He.name}`))}var go=t(1005),Di=t(1006),Ui=t(48),Ki=t(229),Mi=t(597);const ma=({pub:He})=>{const De=()=>{const Me=Object(v.getQueryItem)("referrer"),st=Me!=null?Me:Object(v.getPubUrl)(He);Object(r.redirect)(st,{local_navigation:!1})};return Object(o.h)(wt.c,{onClick:De,className:Mi.a.closeButton,size:40,fill:"outline",priority:"secondary"},Object(o.h)(Ki.a,{className:Mi.a.closeIcon}))};var Fi=t(790);const Pa=({pub:He,user:De,settings:Me})=>{var st;const{selected_event_type:{price:dt,subscriber_price:Rt,founding_price:xt,currency:jt,description_html:_t,duration:on,num_availabilities:gn},user_name:Wn}=Me;let or=dt,lr=null;(De==null?void 0:De.is_subscribed)&&Rt&&(or=Rt,lr="SUBSCRIBER DISCOUNT"),(De==null?void 0:De.is_founding)&&xt&&(or=xt,lr=`${Object(Qi.getFoundingTierName)(He).toUpperCase()} DISCOUNT`),Object(a.d)(()=>{var Or,kr;Object(S.i)(S.a.MEETING_PAGE_VIEWED,{publication_id:He.id,user_id:De.id,referrer:(Or=Object(v.getQueryItem)("referrer"))!=null?Or:null,source:(kr=Object(v.getQueryItem)("source"))!=null?kr:null})},[]);const An=(st=Object(v.getQueryItem)("referrer"))!=null?st:void 0,xn=Object(v.updateQuery)("/meetings/book",{referrer:An}),Bn=gn>0,fn=_t?{__html:_t.replace(/<br>/g,"")}:{__html:""};return Object(o.h)(o.Fragment,null,Object(o.h)(ma,{pub:He}),Object(o.h)(er.b,{style:{minHeight:"100vh"},bg:"secondary",alignItems:"center",justifyContent:"center"},Object(o.h)(er.b,{paddingX:24,gap:32,style:{width:400,maxWidth:"100%",boxSizing:"border-box"}},Object(o.h)(Fi.a,{pub:He,user_id:Me.user_id,user_profile_photo_url:Me.user_profile_photo_url},Object(o.h)("div",null,Object(o.h)(Sn.b.H2,{align:"center",size:20},"Book a meeting with"),Object(o.h)(Sn.b.H2,{align:"center",paddingTop:4},Object(Ui.getConfigFor)("meetings_embed_publication_name")?He.name:Wn))),Object(o.h)(er.b,{bg:"primary",className:l()(Mi.a.offer,{[Mi.a.unavailable]:!Bn}),radius:8,shadow:"xl",padding:20},lr&&Object(o.h)("div",{className:Mi.a.displayedBadge},lr),Object(o.h)(er.c,{justifyContent:"space-between",paddingBottom:16},Object(o.h)(er.b,null,or&&jt&&on&&Object(o.h)(o.Fragment,null,Object(o.h)(Sn.b.H3,{color:Bn?"primary":"secondary"},on,"-minute meeting"),Object(o.h)(Sn.b.B4,{color:Bn?"primary":"secondary",paddingTop:4},or<dt&&Object(o.h)("span",{className:Mi.a.originalPrice},Object(Oi.centsToPriceString)(dt,jt)),Object(Oi.centsToPriceString)(or,jt)," \xB7"," ",Bn?gn>50?"Many availabilities":`${Object(Oi.pluralize)(gn,"slot")} available this month`:"No slots available in the next week"))),Bn?Object(o.h)(go.a,{className:Mi.a.check,size:28}):Object(o.h)(Di.a,{size:28,className:Mi.a.disabledCheck})),Object(o.h)(Sn.b.B4,{color:"secondary"},Object(o.h)("div",{className:Mi.a.description,dangerouslySetInnerHTML:fn}))),Object(o.h)(wt.a,{className:Mi.a.button,disabled:!Bn,grow:!0,localNavigation:!1,href:xn},Bn?"Continue to book":"No meetings available"))))};var Ca=t(16),ka=t(441),sa=t(815),Sa={meetingDetails:"frontend-main-meetings-MeetingDetails-module__meetingDetails--1H7lq"},Na=Object.defineProperty,Mn=Object.defineProperties,$r=Object.getOwnPropertyDescriptors,uo=Object.getOwnPropertySymbols,Bo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,Hi=(He,De,Me)=>De in He?Na(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,$i=(He,De)=>{for(var Me in De||(De={}))Bo.call(De,Me)&&Hi(He,Me,De[Me]);if(uo)for(var Me of uo(De))Uo.call(De,Me)&&Hi(He,Me,De[Me]);return He},Oa=(He,De)=>Mn(He,$r(De));const ya=(He,De,Me)=>{var st,dt,Rt,xt,jt,_t,on,gn,Wn,or,lr,An,xn,Bn,fn,Or,kr,Mo,vo,ii,Wo,Go,Ao,ui,gr,fo,So,mi,Ro,Pi,Ci,ra,ca;return!((st=He.location)==null?void 0:st.location)&&!((dt=He.location)==null?void 0:dt.join_url)?De&&Me?{href:Object(Ca.getMeetingOrderUrl)(Me,He.id,{addBase:!0}),label:"View here"}:{href:null,label:"Processing..."}:{zoom:{href:(Rt=He.location)==null?void 0:Rt.join_url,copyContent:(xt=He.location)==null?void 0:xt.join_url,label:"Join Zoom"},zoom_conference:{href:(jt=He.location)==null?void 0:jt.join_url,copyContent:(_t=He.location)==null?void 0:_t.join_url,label:"Join Zoom"},google:{href:(on=He.location)==null?void 0:on.join_url,copyContent:(gn=He.location)==null?void 0:gn.join_url,label:"Join Meet"},google_conference:{href:(Wn=He.location)==null?void 0:Wn.join_url,copyContent:(or=He.location)==null?void 0:or.join_url,label:"Join Meet"},inbound_call:{href:`tel:${(lr=He.location)==null?void 0:lr.location}`,copyContent:(An=He.location)==null?void 0:An.location,label:(xn=He.location)==null?void 0:xn.location},outbound_call:{href:null,label:`${Object(Oi.guessFirstName)(He.user_name)} will call you at ${(Bn=He.location)==null?void 0:Bn.location}`},microsoft_teams:{href:(fn=He.location)==null?void 0:fn.join_url,copyContent:(Or=He.location)==null?void 0:Or.join_url,label:"Join Teams"},microsoft_teams_conference:{href:(kr=He.location)==null?void 0:kr.join_url,copyContent:(Mo=He.location)==null?void 0:Mo.join_url,label:"Join Teams"},webex:{href:(vo=He.location)==null?void 0:vo.join_url,copyContent:(ii=He.location)==null?void 0:ii.join_url,label:"Join Webex"},webex_conference:{href:(Wo=He.location)==null?void 0:Wo.join_url,copyContent:(Go=He.location)==null?void 0:Go.join_url,label:"Join Webex"},gotomeeting:{href:(Ao=He.location)==null?void 0:Ao.join_url,copyContent:(ui=He.location)==null?void 0:ui.join_url,label:"Join GoToMeeting"},gotomeeting_conference:{href:(gr=He.location)==null?void 0:gr.join_url,copyContent:(fo=He.location)==null?void 0:fo.join_url,label:"Join GoToMeeting"},physical:{href:null,label:(mi=(So=He.location)==null?void 0:So.location)!=null?mi:"Unknown"},ask_invitee:{href:null,label:(Pi=(Ro=He.location)==null?void 0:Ro.location)!=null?Pi:"Unknown"},custom:{href:null,label:(ra=(Ci=He.location)==null?void 0:Ci.location)!=null?ra:"Unknown"}}[(ca=He.location)==null?void 0:ca.type]||{}},Ma=({order:He,isStatic:De=!1,pub:Me=null})=>{const st=Object(jr.e)(),{href:dt,label:Rt,copyContent:xt}=ya(He,De,Me),jt=Object(o.h)(Sn.b.B3,{align:"right"},dt?Object(o.h)("a",{href:dt},Rt):Rt);return De||!xt?jt:Object(o.h)(er.c,{gap:4,alignItems:"center"},jt,Object(o.h)(wt.c,{size:24,onClick:()=>{Object(r.copyToClipboard)(xt),st.popToast(_t=>Object(o.h)(jr.c,Oa($i({},_t),{Icon:ka.a,text:"Invite link copied"})))}},Object(o.h)(sa.a,{height:20})))},Xa=({order:He,pub:De})=>{const Me=Xn()(He.start_time),st=Xn()(He.end_time),dt=`${Me.format("MMMM D, YYYY")} at ${Me.format("h:mm A z")}`,Rt=st.diff(Me,"minute");return Object(o.h)(er.b,{gap:8,className:Sa.meetingDetails},Object(o.h)(er.c,{justifyContent:"space-between",gap:8},Object(o.h)(Sn.b.B3,{weight:"bold"},"Time"),Object(o.h)(Sn.b.B3,null,dt)),Object(o.h)(er.c,{justifyContent:"space-between",gap:8},Object(o.h)(Sn.b.B3,{weight:"bold"},"Length"),Object(o.h)(Sn.b.B3,null,Rt," minutes")),Object(o.h)(er.c,{justifyContent:"space-between",alignItems:"center",gap:8},Object(o.h)(Sn.b.B3,{weight:"bold"},"Location"),Object(o.h)(Ma,{order:He,pub:De})),Object(o.h)(Sn.b.B3,{align:"center",className:Sa.description,paddingTop:16},Object(o.h)("i",null,He.description)))},Za=({booking:He,settings:De,pub:Me})=>{const st=Object(Ui.getConfigFor)("meetings_embed_publication_name")?Me.name:He.user_name;return He.cancelled_at?Object(o.h)(o.Fragment,null,Object(o.h)(Fi.a,{pub:Me,user_id:De.user_id,user_profile_photo_url:De.user_profile_photo_url},Object(o.h)(Sn.b.H2,{align:"center"},"Your meeting with ",st," has been cancelled")),He.cancellation_reason&&Object(o.h)(o.Fragment,null,Object(o.h)(Sn.b.B3,{align:"center",paddingBottom:16},"The author provided the following reason:"),Object(o.h)(Sn.b.B4,{align:"center",paddingBottom:32},He.cancellation_reason)),He.refunded_at&&Object(o.h)(Sn.b.B3,{align:"center"},"A refund has been issued to your original form of payment."),De.enabled&&Object(o.h)(Sn.b.B3,{align:"center",paddingBottom:16},Object(o.h)(o.Fragment,null,"You can book another meeting"," ",Object(o.h)("a",{href:Object(Ca.getMeetingsUrl)(Me,{params:{source:"cancellation-rebook"}})},"here"),"."))):Object(o.h)(o.Fragment,null,Object(o.h)(Fi.a,{pub:Me,user_id:De.user_id,user_profile_photo_url:De.user_profile_photo_url},Object(o.h)(Sn.b.H2,{align:"center"},"Your meeting with ",st," has been ",He.num_rebookings>0?"rebooked":"booked")),Object(o.h)(er.b,{gap:16,alignItems:"center"},Object(o.h)(Xa,{order:He,pub:Me}),Object(o.h)(Sn.b.B4,{align:"center"},"A confirmation of your booking has been emailed to you."),He.refunded_at&&Object(o.h)(Sn.b.B4,{align:"center"},"A refund has been issued to your original form of payment."),Object(o.h)(wt.a,{onClick:()=>{const dt=Object(v.getQueryItem)("referrer"),Rt=dt!=null?dt:Object(v.getPubUrl)(Me);Object(r.redirect)(Rt,{local_navigation:!1})}},"Done")))};var La=t(381),as=t.n(La),Ka=t(291),ss=t(827),na=t(20),vl=t(766),ls=t(137),el=t(771),ga={button:"frontend-main-meetings-book-index-module__button--3ZioJ",tos:"frontend-main-meetings-book-index-module__tos--1RZHb",orderForm:"frontend-main-meetings-book-index-module__orderForm--1xS8n",input:"frontend-main-meetings-book-index-module__input--3HWtT",error:"frontend-main-meetings-book-index-module__error--1sor2",stripeError:"frontend-main-meetings-book-index-module__stripeError--3pty8",originalPrice:"frontend-main-meetings-book-index-module__originalPrice--Hg28D",filePicker:"frontend-main-meetings-book-index-module__filePicker--3xu76",fileAttachment:"frontend-main-meetings-book-index-module__fileAttachment--1mRVb",fileName:"frontend-main-meetings-book-index-module__fileName--1D5yQ",fileRemoveIcon:"frontend-main-meetings-book-index-module__fileRemoveIcon--2E5xL",savedCard:"frontend-main-meetings-book-index-module__savedCard--13GmP",cardOnFileIcon:"frontend-main-meetings-book-index-module__cardOnFileIcon--3M96R",errorContainer:"frontend-main-meetings-book-index-module__errorContainer--mfIfL",errorTooltip:"frontend-main-meetings-book-index-module__errorTooltip--3aqkR",checkoutBox:"frontend-main-meetings-book-index-module__checkoutBox--3Nx9o"},tl=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});const ys=({stripe_publishable_key:He,onComplete:De,user:Me,pub:st,booking:dt,settings:Rt})=>{const[xt,jt]=Object(a.k)(dt.name),[_t,on]=Object(a.k)(dt.description),[gn,Wn]=Object(a.k)(null),[or,lr]=Object(a.k)(null),[An,xn]=Object(a.k)(null),[Bn,fn]=Object(a.k)(null),[Or,kr]=Object(a.k)(!1),[Mo,vo]=Object(a.k)(null);Object(a.d)(()=>{const Ci=Object(_r.e)(He,st),ra=Ci&&Object(_r.f)(Ci);lr(Ci),xn(ra)},[st,He,lr,xn]),Object(a.d)(()=>{Object(S.i)(Ka.a.MEETING_ORDER_PAGE_VIEWED,{user_id:Me.id,publication_id:st.id})},[]),Object(a.d)(()=>{(()=>tl(void 0,null,function*(){var ra;const ca=yield ur.a.get("/api/v1/subscription/last4");((ra=ca.body)==null?void 0:ra.last4)&&fn(ca.body.last4)}))()},[st]);const ii=Rt.selected_event_type,{price:Wo,duration:Go,subscriber_price:Ao,founding_price:ui,currency:gr}=ii;let fo=Wo;Me.is_subscribed&&Ao&&(fo=Ao),Me.is_founding&&ui&&(fo=ui);const So=!!(Me==null?void 0:Me.has_saved_payment),mi=Object(a.a)(()=>tl(void 0,null,function*(){return or?yield or.createToken(An):{token:null,error:{message:""}}}),[or,An]),Ro=Object(a.a)(()=>tl(void 0,null,function*(){var Ci,ra,ca,va;kr(!0),vo(null);let za;if(!So){const{token:Ea,error:zi}=yield mi();if(zi){kr(!1),vo(zi&&zi.message),Object(S.i)(Ka.a.MEETING_MISSING_PAYMENT,{type:zi&&zi.type,code:zi&&zi.code,decline_code:zi&&zi.decline_code,reason:zi&&zi.message});return}za=Ea}const Xo=new FormData;Xo.append("name",xt),Xo.append("description",_t),za&&Xo.append("stripe_token",JSON.stringify(za)),gn&&Xo.append("attachment",gn);const ts=Intl.DateTimeFormat().resolvedOptions().timeZone;ts&&Xo.append("timezone",ts),Object(S.i)(Ka.a.MEETING_SUBMIT_PRESSED,{publication_id:st.id,user_id:Me.id});try{const Ea=yield ur.a.post("/api/v1/meetings/book").send(Xo);history.pushState({},"",`/meetings/book/${Ea.body.order_id}`),De("schedule",as()(Ea.body,["order_id","calendly_scheduling_uri","name","email","description"]))}catch(Ea){((ra=(Ci=Ea.response)==null?void 0:Ci.body)==null?void 0:ra.error)?vo((va=(ca=Ea.response)==null?void 0:ca.body)==null?void 0:va.error):vo("Something went wrong.")}kr(!1)}),[xt,_t,mi,gn,kr,vo]),Pi=!!xt&&!!_t;return Object(o.h)(o.Fragment,null,Object(o.h)(Fi.a,{pub:st,user_id:Rt.user_id,user_profile_photo_url:Rt.user_profile_photo_url},Object(o.h)("div",null,Object(o.h)(na.t.H2,{align:"center",size:20},"Book a meeting with"),Object(o.h)(na.t.H2,{align:"center",paddingTop:4},Object(Ui.getConfigFor)("meetings_embed_publication_name")?st.name:Rt.user_name),Object(o.h)(na.t.B3,{align:"center",paddingTop:8},fo<Wo&&Object(o.h)("span",{className:ga.originalPrice},Object(Oi.centsToPriceString)(Wo,gr)),Object(Oi.centsToPriceString)(fo,gr)," \xB7 ",Go,"-minute meeting"))),Object(o.h)(na.i,{gap:32},Object(o.h)(el.a,{alignment:"vertical",label:"Your name"},Object(o.h)(na.v,{name:"name",value:xt,onChange:Ci=>jt(Ci.target.value),placeholder:"Name...",disabled:Or,maxLength:500})),Object(o.h)(el.a,{alignment:"vertical",label:"What do you want to talk about?"},Object(o.h)(na.w,{name:"description",value:_t,onChange:Ci=>on(Ci.target.value),rows:4,maxLength:1e3,placeholder:"E.g. I\u2019m really interested in knowing...",disabled:Or})),gn?Object(o.h)("div",null,Object(o.h)(na.t.InputLabel,{paddingBottom:8},"Add an attachment (optional)"),Object(o.h)(na.j,{className:ga.fileAttachment,gap:8,alignItems:"center",flex:"auto"},Object(o.h)(Ki.a,{onClick:()=>Wn(null),className:ga.fileRemoveIcon,height:24}),Object(o.h)(na.t.B3,{className:ga.fileName},gn.name))):Object(o.h)("div",null,Object(o.h)(na.t.InputLabel,{paddingBottom:8},"Add an attachment (optional)"),Object(o.h)(vl.a,{className:ga.filePicker,onFileSelected:Ci=>Wn(Ci),acceptableTypes:".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/pdf, image/*, audio/*, video/*, .pdf, .xls, .xlsx"})),Object(o.h)("div",{className:ga.checkoutBox},So&&Object(o.h)(na.j,{className:ga.savedCard,padding:12,gap:12},Object(o.h)(ss.default,{className:ga.cardOnFileIcon}),Object(o.h)(na.t.B4,null,Bn?`**** **** **** ${Bn}`:"Use card on file")),!So&&An&&Object(o.h)(_r.c,{className:ga.input,card:An}),Mo&&Object(o.h)(na.t.B4,{paddingTop:12,className:ga.errorContainer},Mo),Object(o.h)(na.h,{paddingTop:12},Object(o.h)(ls.a,{text:Rt.enabled?"You must provide your name and a topic for the meeting before booking.":"You must enable Meetings before one can be booked.",disabled:Or||Pi&&Rt.enabled,preferPlacement:"top-center",className:ga.errorTooltip},Object(o.h)(na.b,{className:ga.button,grow:!0,type:"submit",onClick:Ro,disabled:Or||!Pi||!Rt.enabled},Or?"Loading...":"Book meeting"))))),Object(o.h)(na.t,{className:ga.tos,paddingBottom:16,size:14,align:"center",color:"secondary"},"By booking, you will be automatically signed up for a free subscription to ",st.name,". Additionally, you agree to Substack's"," ",Object(o.h)("a",{href:"https://substack.com/tos",target:"__blank"},"Terms of Service"),", our"," ",Object(o.h)("a",{href:"https://substack.com/privacy",target:"__blank"},"Privacy Policy"),", and our"," ",Object(o.h)("a",{href:"https://substack.com/ccpa#personal-data-collected",target:"__blank"},"Information Collection Notice"),"."))};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var nl=function(He,De){return nl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Me,st){Me.__proto__=st}||function(Me,st){for(var dt in st)st.hasOwnProperty(dt)&&(Me[dt]=st[dt])},nl(He,De)};function Es(He,De){nl(He,De);function Me(){this.constructor=He}He.prototype=De===null?Object.create(De):(Me.prototype=De.prototype,new Me)}var Ps=function(){return Ps=Object.assign||function(De){for(var Me,st=1,dt=arguments.length;st<dt;st++){Me=arguments[st];for(var Rt in Me)Object.prototype.hasOwnProperty.call(Me,Rt)&&(De[Rt]=Me[Rt])}return De},Ps.apply(this,arguments)};function xa(He,De){De===void 0&&(De={});var Me=De.insertAt;if(!(!He||typeof document=="undefined")){var st=document.head||document.getElementsByTagName("head")[0],dt=document.createElement("style");dt.type="text/css",Me==="top"&&st.firstChild?st.insertBefore(dt,st.firstChild):st.appendChild(dt),dt.styleSheet?dt.styleSheet.cssText=He:dt.appendChild(document.createTextNode(He))}}var cs=`/*
  code is extracted from Calendly's embed stylesheet: https://assets.calendly.com/assets/external/widget.css
*/

.calendly-inline-widget,
.calendly-inline-widget *,
.calendly-badge-widget,
.calendly-badge-widget *,
.calendly-overlay,
.calendly-overlay * {
    font-size:16px;
    line-height:1.2em
}

.calendly-inline-widget iframe,
.calendly-badge-widget iframe,
.calendly-overlay iframe {
    display:inline;
    width:100%;
    height:100%
}

.calendly-popup-content {
    position:relative
}

.calendly-popup-content.calendly-mobile {
    -webkit-overflow-scrolling:touch;
    overflow-y:auto
}

.calendly-overlay {
    position:fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;
    overflow:hidden;
    z-index:9999;
    background-color:#a5a5a5;
    background-color:rgba(31,31,31,0.4)
}

.calendly-overlay .calendly-close-overlay {
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0
}

.calendly-overlay .calendly-popup {
    box-sizing:border-box;
    position:absolute;
    top:50%;
    left:50%;
    -webkit-transform:translateY(-50%) translateX(-50%);
    transform:translateY(-50%) translateX(-50%);
    width:80%;
    min-width:900px;
    max-width:1000px;
    height:90%;
    max-height:680px
}

@media (max-width: 975px) {
    .calendly-overlay .calendly-popup {
        position:fixed;
        top:50px;
        left:0;
        right:0;
        bottom:0;
        -webkit-transform:none;
        transform:none;
        width:100%;
        height:auto;
        min-width:0;
        max-height:none
    }
}

.calendly-overlay .calendly-popup .calendly-popup-content {
    height:100%;
}

.calendly-overlay .calendly-popup-close {
    position:absolute;
    top:25px;
    right:25px;
    color:#fff;
    width:19px;
    height:19px;
    cursor:pointer;
    background:url(https://assets.calendly.com/assets/external/close-icon.svg) no-repeat;
    background-size:contain
}

@media (max-width: 975px) {
    .calendly-overlay .calendly-popup-close {
        top:15px;
        right:15px
    }
}

.calendly-badge-widget {
    position:fixed;
    right:20px;
    bottom:15px;
    z-index:9998
}

.calendly-badge-widget .calendly-badge-content {
    display:table-cell;
    width:auto;
    height:45px;
    padding:0 30px;
    border-radius:25px;
    box-shadow:rgba(0,0,0,0.25) 0 2px 5px;
    font-family:sans-serif;
    text-align:center;
    vertical-align:middle;
    font-weight:bold;
    font-size:14px;
    color:#fff;
    cursor:pointer
}

.calendly-badge-widget .calendly-badge-content.calendly-white {
    color:#666a73
}

.calendly-badge-widget .calendly-badge-content span {
    display:block;
    font-size:12px
}

.calendly-spinner {
    position:absolute;
    top:50%;
    left:0;
    right:0;
    -webkit-transform:translateY(-50%);
    transform:translateY(-50%);
    text-align:center;
    z-index:-1
}

.calendly-spinner>div {
    display:inline-block;
    width:18px;
    height:18px;
    background-color:#e1e1e1;
    border-radius:50%;
    vertical-align:middle;
    -webkit-animation:calendly-bouncedelay 1.4s infinite ease-in-out;
    animation:calendly-bouncedelay 1.4s infinite ease-in-out;
    -webkit-animation-fill-mode:both;
    animation-fill-mode:both
}

.calendly-spinner .calendly-bounce1 {
    -webkit-animation-delay:-0.32s;
    animation-delay:-0.32s
}

.calendly-spinner .calendly-bounce2 {
    -webkit-animation-delay:-0.16s;
    animation-delay:-0.16s
}

@-webkit-keyframes calendly-bouncedelay {
    0%,80%,100% {
        -webkit-transform:scale(0);
        transform:scale(0)
    } 
    
    40%{
        -webkit-transform:scale(1);
        transform:scale(1)
    }
}

@keyframes calendly-bouncedelay{ 
    0%,80%,100% {
        -webkit-transform:scale(0);
        transform:scale(0)
    }
    
    40% {
        -webkit-transform:scale(1);
        transform:scale(1)
    }
}`;xa(cs);var Ba;(function(He){He.PROFILE_PAGE_VIEWED="calendly.profile_page_viewed",He.EVENT_TYPE_VIEWED="calendly.event_type_viewed",He.DATE_AND_TIME_SELECTED="calendly.date_and_time_selected",He.EVENT_SCHEDULED="calendly.event_scheduled"})(Ba||(Ba={}));var bl=function(He){var De=He.url,Me=He.prefill,st=Me===void 0?{}:Me,dt=He.pageSettings,Rt=dt===void 0?{}:dt,xt=He.utm,jt=xt===void 0?{}:xt,_t=He.embedType,on=Rt.backgroundColor,gn=Rt.hideEventTypeDetails,Wn=Rt.hideLandingPageDetails,or=Rt.primaryColor,lr=Rt.textColor,An=Rt.hideGdprBanner,xn=st.customAnswers,Bn=st.date,fn=st.email,Or=st.firstName,kr=st.guests,Mo=st.lastName,vo=st.location,ii=st.name,Wo=jt.utmCampaign,Go=jt.utmContent,Ao=jt.utmMedium,ui=jt.utmSource,gr=jt.utmTerm,fo=jt.salesforce_uuid,So=De.indexOf("?"),mi=So>-1,Ro=De.slice(So+1),Pi=mi?De.slice(0,So):De,Ci=[mi?Ro:null,on?"background_color="+on:null,gn?"hide_event_type_details=1":null,Wn?"hide_landing_page_details=1":null,or?"primary_color="+or:null,lr?"text_color="+lr:null,An?"hide_gdpr_banner=1":null,ii?"name="+encodeURIComponent(ii):null,vo?"location="+encodeURIComponent(vo):null,Or?"first_name="+encodeURIComponent(Or):null,Mo?"last_name="+encodeURIComponent(Mo):null,kr?"guests="+kr.map(encodeURIComponent).join(","):null,fn?"email="+encodeURIComponent(fn):null,Bn&&Bn instanceof Date?"date="+Hl(Bn):null,Wo?"utm_campaign="+encodeURIComponent(Wo):null,Go?"utm_content="+encodeURIComponent(Go):null,Ao?"utm_medium="+encodeURIComponent(Ao):null,ui?"utm_source="+encodeURIComponent(ui):null,gr?"utm_term="+encodeURIComponent(gr):null,fo?"salesforce_uuid="+encodeURIComponent(fo):null,_t?"embed_type="+_t:null,"embed_domain=1"].concat(xn?Cs(xn):[]).filter(function(ra){return ra!==null}).join("&");return Pi+"?"+Ci},Hl=function(He){var De=He.getMonth()+1,Me=He.getDate(),st=He.getFullYear();return[st,De<10?"0"+De:De,Me<10?"0"+Me:Me].join("-")},us=/^a\d{1,2}$/,Cs=function(He){var De=Object.keys(He).filter(function(Me){return Me.match(us)});return De.length?De.map(function(Me){return Me+"="+encodeURIComponent(He[Me])}):[]},Ol=function(He){Es(De,He);function De(){return He!==null&&He.apply(this,arguments)||this}return De.prototype.render=function(){return Object(M.createElement)("div",{className:"calendly-spinner"},Object(M.createElement)("div",{className:"calendly-bounce1"}),Object(M.createElement)("div",{className:"calendly-bounce2"}),Object(M.createElement)("div",{className:"calendly-bounce3"}))},De}(M.Component),zl={minWidth:"320px",height:"630px"},Ss=function(He){Es(De,He);function De(Me){var st=He.call(this,Me)||this;return st.state={isLoading:!0},st.onLoad=st.onLoad.bind(st),st}return De.prototype.onLoad=function(){this.setState({isLoading:!1})},De.prototype.render=function(){var Me=bl({url:this.props.url,pageSettings:this.props.pageSettings,prefill:this.props.prefill,utm:this.props.utm,embedType:"Inline"});return Object(M.createElement)("div",{className:"calendly-inline-widget",style:this.props.styles||zl},this.state.isLoading&&Object(M.createElement)(Ol,null),Object(M.createElement)("iframe",{width:"100%",height:"100%",frameBorder:"0",title:this.props.iframeTitle||"Calendly Scheduling Page",onLoad:this.onLoad,src:Me}))},De}(M.Component),Bs=function(He){Es(De,He);function De(Me){var st=He.call(this,Me)||this;return st.state={isLoading:!0},st.onLoad=st.onLoad.bind(st),st}return De.prototype.onLoad=function(){this.setState({isLoading:!1})},De.prototype.render=function(){var Me=bl({url:this.props.url,pageSettings:this.props.pageSettings,prefill:this.props.prefill,utm:this.props.utm,embedType:"PopupWidget"});return Object(M.createElement)(M.Fragment,null,this.state.isLoading&&Object(M.createElement)(Ol,null),Object(M.createElement)("iframe",{width:"100%",height:"100%",frameBorder:"0",title:this.props.iframeTitle||"Calendly Scheduling Page",onLoad:this.onLoad,src:Me}))},De}(M.Component),yl=function(He){return He.open?Object(M.createPortal)(Object(M.createElement)("div",{className:"calendly-overlay"},Object(M.createElement)("div",{onClick:He.onModalClose,className:"calendly-close-overlay"}),Object(M.createElement)("div",{className:"calendly-popup"},Object(M.createElement)("div",{className:"calendly-popup-content"},Object(M.createElement)(Bs,Ps({},He)))),Object(M.createElement)("button",{className:"calendly-popup-close",onClick:He.onModalClose,"aria-label":"Close modal",style:{display:"block",border:"none",padding:0}})),He.rootElement):null},yc=function(He){Es(De,He);function De(Me){var st=He.call(this,Me)||this;return st.state={isOpen:!1},st.onClick=st.onClick.bind(st),st.onClose=st.onClose.bind(st),st}return De.prototype.onClick=function(Me){Me.preventDefault(),this.setState({isOpen:!0})},De.prototype.onClose=function(Me){Me.stopPropagation(),this.setState({isOpen:!1})},De.prototype.render=function(){return Object(M.createElement)(M.Fragment,null,Object(M.createElement)("button",{onClick:this.onClick,style:this.props.styles||{},className:this.props.className||""},this.props.text),Object(M.createElement)(yl,Ps({},this.props,{open:this.state.isOpen,onModalClose:this.onClose,rootElement:this.props.rootElement})))},De}(M.Component),Gl=function(He){Es(De,He);function De(Me){var st=He.call(this,Me)||this;return st.state={isOpen:!1},st.onClick=st.onClick.bind(st),st.onClose=st.onClose.bind(st),st}return De.prototype.onClick=function(){this.setState({isOpen:!0})},De.prototype.onClose=function(Me){Me.stopPropagation(),this.setState({isOpen:!1})},De.prototype.render=function(){return Object(M.createElement)("div",{className:"calendly-badge-widget",onClick:this.onClick},Object(M.createElement)("div",{className:"calendly-badge-content",style:{background:this.props.color||"#00a2ff",color:this.props.textColor||"#ffffff"}},this.props.text||"Schedule time with me",this.props.branding&&Object(M.createElement)("span",null,"powered by Calendly")),Object(M.createElement)(yl,Ps({},this.props,{open:this.state.isOpen,onModalClose:this.onClose,rootElement:this.props.rootElement})))},De}(M.Component),El="message";function Yl(He){var De=He||{},Me=De.onDateAndTimeSelected,st=De.onEventScheduled,dt=De.onEventTypeViewed,Rt=De.onProfilePageViewed;Object(M.useEffect)(function(){var xt=function(jt){var _t=jt.data.event;_t===Ba.DATE_AND_TIME_SELECTED?Me&&Me(jt):_t===Ba.EVENT_SCHEDULED?st&&st(jt):_t===Ba.EVENT_TYPE_VIEWED?dt&&dt(jt):_t===Ba.PROFILE_PAGE_VIEWED&&Rt&&Rt(jt)};return window.addEventListener(El,xt),function(){window.removeEventListener(El,xt)}},[He])}var Us=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});const Pl=({booking:He,onComplete:De,settings:Me,pub:st})=>{const dt="calendly",[Rt,xt]=Object(a.k)(!1),[jt,_t]=Object(a.k)(!1),{duration:on}=Me.selected_event_type,gn=Object(Ui.getConfigFor)("meetings_embed_publication_name")?st.name:He.user_name,Wn=Object(Vi.useMediaQuery)({maxWidth:698});return Yl({onEventScheduled:or=>Us(void 0,null,function*(){var lr,An,xn;const Bn=(xn=(An=(lr=or.data)==null?void 0:lr.payload)==null?void 0:An.event)==null?void 0:xn.uri;xt(!0);try{const fn=yield ur.a.put(`/api/v1/meetings/order/${He.order_id}`).send({calendly_event_uri:Bn});yield new Promise(Or=>setTimeout(Or,2e3)),De("confirmation",fn.body)}catch(fn){_t(!0)}})}),jt?Object(o.h)(Fi.a,{pub:st,user_id:Me.user_id,user_profile_photo_url:Me.user_profile_photo_url},Object(o.h)(Sn.b.H2,{align:"center"},"Something went wrong with your booking. Please contact meetings@substackinc.com.")):Rt?Object(o.h)(er.a,{justifyContent:"center"},Object(o.h)(Fe.a,{type:"circular"})):Object(o.h)(o.Fragment,null,Object(o.h)(Fi.a,{pub:st,user_id:Me.user_id,user_profile_photo_url:Me.user_profile_photo_url},Object(o.h)("div",null,Object(o.h)(Sn.b.H2,{align:"center"},He.num_rebookings>0?"Rebook":"Book"," your meeting with ",gn),Object(o.h)(Sn.b.B3,{align:"center",paddingTop:8},"Schedule your ",on,"-minute meeting"))),typeof window!="undefined"&&He.calendly_scheduling_uri&&Object(o.h)(Ss,{iframeTitle:dt,url:`${He.calendly_scheduling_uri}?hide_gdpr_banner=1`,prefill:{name:He.name,email:He.email,customAnswers:{a1:He.description}},styles:{minWidth:"320px",height:"700px",marginTop:Wn?"0px":"-66px"}}))};var js=Object.defineProperty,Fs=Object.getOwnPropertySymbols,rl=Object.prototype.hasOwnProperty,Cl=Object.prototype.propertyIsEnumerable,qa=(He,De,Me)=>De in He?js(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,ds=(He,De)=>{for(var Me in De||(De={}))rl.call(De,Me)&&qa(He,Me,De[Me]);if(Fs)for(var Me of Fs(De))Cl.call(De,Me)&&qa(He,Me,De[Me]);return He},Jl=(He,De)=>{var Me={};for(var st in He)rl.call(He,st)&&De.indexOf(st)<0&&(Me[st]=He[st]);if(He!=null&&Fs)for(var st of Fs(He))De.indexOf(st)<0&&Cl.call(He,st)&&(Me[st]=He[st]);return Me};const Ql=He=>{var De=He,{step:Me}=De,st=Jl(De,["step"]);switch(Me){case"order":return Object(o.h)(ys,ds({},st));case"schedule":return Object(o.h)(Pl,ds({},st));case"confirmation":return Object(o.h)(Za,ds({},st))}},ja=({stripe_publishable_key:He,pub:De,user:Me,order:st,order_id:dt,settings:Rt})=>{const xt=dt?st.calendly_scheduling_uri?"schedule":"confirmation":"order",[jt,_t]=Object(a.k)(xt),[on,gn]=Object(a.k)(ds({name:Me.name,email:Me.email,description:""},st)),Wn=Ql({step:jt,booking:on,settings:Rt,order:st,onComplete:(or,lr)=>{gn(ds(ds({},on),lr)),_t(or)},pub:De,stripe_publishable_key:He,user:Me,orderId:dt});return Object(o.h)(o.Fragment,null,Object(o.h)(ma,{pub:De}),Object(o.h)(er.a,{style:{minHeight:"100vh"},bg:"secondary",alignItems:"center",justifyContent:"center"},Object(o.h)(er.b,{paddingX:24,gap:32,style:{width:jt==="schedule"?"100%":450,maxWidth:"100%",boxSizing:"border-box"}},Wn)))};var Xl=t(68);const ol=({subdomain:He})=>{const{getExperimentVariant:De,exposeExperiment:Me}=Object(Xl.d)(),st=De("start_writing_on_not_found")==="treatment";return Me("start_writing_on_not_found"),Object(o.h)("div",{className:"page typography signup-page",path:"/not-found"},Object(r.setMetaData)({title:"Not Found"}),Object(o.h)("div",{className:"container"},Object(o.h)("h2",null,"Not Found"),Object(o.h)("p",null,"The page you are attempting to access is not found."),st&&Object(o.h)("p",null,"If you want to claim this URL you can start a Substack today"),Object(o.h)("p",null,st?Object(o.h)("a",{href:Object(v.getStartPublishingUrl)(),class:"button primary",rel:"nofollow"},"Start a Substack"):Object(o.h)("a",{href:Object(v.getDiscoverSearchUrl)({query:He,params:{searching:"publication"}}),class:"button primary",rel:"nofollow"},'Search Substack for "',He,'"')),Object(o.h)("p",null,Object(o.h)("a",{href:Object(v.getBaseUrl)()},"Go to substack.com"))))};var Ts=t(660),Ws=t.n(Ts),il=t(58),fs=t(661),la=t(802),$a=t(1155),Sl=t(238),Va=t(213),al=t(1189),Zl=t(134),sl=t(1156);class ql extends o.Component{isSubscribed(){const{user:De}=this.props;return De&&De.is_subscribed}isFreeSubscribed(){const{freeSignup:De,user:Me}=this.props;return De||Me&&Me.is_free_subscribed&&!Me.is_contributor}onFreeSubscribe(De){if(this.props.publication.plans){let Me=Object(v.getSubscribeUrl)(this.props.publication,{just_signed_up:!0});De.body.prompt_to_login&&(Me=`/account/login?redirect=${encodeURIComponent(Me)}&email=${encodeURIComponent(De.body.email)}`),document.location.href=Me}else window.location.reload()}render({publication:De,user:Me,freeSignupEmail:st,features:dt}){if(!(this.isSubscribed()||this.isFreeSubscribed()&&!De.plans))return Object(o.h)("div",{className:"subscribe-footer"},Object(o.h)("div",{className:"container"},Object(o.h)("p",null,"Ready for more?"),this.isFreeSubscribed()?Object(o.h)("div",null,Object(o.h)("a",{className:"cta",href:Object(v.getSubscribeUrl)(De,{utm_source:"ready-for-more"}),native:!0},Object(o.h)(ti.b,{className:"primary"},Object(o.h)("b",null,Object(Oi.getSubscribeText)(De))))):Object(o.h)(To.a,{user:Me,pub:De,freeSignupEmail:st,source:"subscribe_footer",onSuccess:this.onFreeSubscribe.bind(this),hideLogin:!0,hideTerms:!0,submitButtonText:Object(Oi.getSubscribeText)(De)})))}}var ec=t(632),jl=t(1157),Tl=t(371),tc=Object.defineProperty,ll=Object.defineProperties,cl=Object.getOwnPropertyDescriptors,hs=Object.getOwnPropertySymbols,ks=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable,ul=(He,De,Me)=>De in He?tc(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,nc=(He,De)=>{for(var Me in De||(De={}))ks.call(De,Me)&&ul(He,Me,De[Me]);if(hs)for(var Me of hs(De))ps.call(De,Me)&&ul(He,Me,De[Me]);return He},rc=(He,De)=>ll(He,cl(De)),ms=(He,De,Me)=>(ul(He,typeof De!="symbol"?De+"":De,Me),Me),Ds=(He,De,Me)=>new Promise((st,dt)=>{var Rt=_t=>{try{jt(Me.next(_t))}catch(on){dt(on)}},xt=_t=>{try{jt(Me.throw(_t))}catch(on){dt(on)}},jt=_t=>_t.done?st(_t.value):Promise.resolve(_t.value).then(Rt,xt);jt((Me=Me.apply(He,De)).next())});class Ua extends o.Component{constructor(De,Me){super(De,Me);ms(this,"updateSubscribeTakeover",()=>{const dt=this.props.publication.id,Rt=`pub-${dt}-subscribe-prompt-next-shown-at`,xt=`pub-${dt}-takeover-next-shown-at`,jt=Object(W.getStoredValue)(xt),_t=!jt||Date.now()>=jt;Object(r.isWindowVisible)()?this.state.subscribeTakeOverTimer&&(_t&&Date.now()-this.state.subscribeTakeOverTimer>=2*60*1e3&&this.setState({showSubscribeTakeover:!0}),this.setState({subscribeTakeOverTimer:null}),Object(W.setStoredValue)(Rt,Xn()().add(1,"hour").valueOf()),Object(W.setStoredValue)(xt,Xn()().add(1,"hour").valueOf())):this.state.subscribeTakeOverTimer||this.setState({subscribeTakeOverTimer:new Date})}),ms(this,"onChangeComment",dt=>{this.setState({comments:Object(mr.j)(this.state.comments,dt)})}),ms(this,"onVisible",dt=>{const Rt=`${dt} Seen`;!this.state.post||this.state[Rt]||(this.setState({[Rt]:!0}),Object(S.i)(Rt,{post_id:this.state.post.id,post_audience:this.state.post.audience,post_type:this.state.post.type}))}),ms(this,"_inlineComments",()=>{const{inlineComments:dt,publication:Rt}=this.props;return dt||Object(Oi.shouldUseInlineComments)(Rt,this.state.post||this.props.post)}),ms(this,"fillEmbeddedEmailInputs",()=>{var dt;const Rt=document.querySelectorAll('article.post input[type="email"]'),xt=((dt=this.state.user)==null?void 0:dt.email)||this.props.freeSignupEmail;if(xt)for(const jt of Rt)jt.value=xt;this.setState({embeddedEmailInputsFilled:!0})});let{user:st}=De;De.postPreview&&(st=rc(nc({},st),{is_draft:!1,is_subscribed:De.postPreview!=="free",is_founding:De.postPreview==="founding"})),De.post&&[De.post.slug,De.post.uuid].filter(dt=>dt).includes(De.slug)&&!this.shouldRedirectToComments(De.post)?this.state={post:De.post,comments:De.renderedComments,user:st}:this.state={post:null,comments:null,user:st}}componentDidMount(){return Ds(this,null,function*(){Object(r.scrollToHash)(),this.cleanUpTikTokEnhanceListener=Object(ec.a)();const De=this.props.post&&[this.props.post.slug,this.props.post.uuid].filter(Me=>Me).includes(this.props.slug)&&this.props.post;this.shouldRedirectToComments(De)?this.redirectToComments(De):this.state.post||(yield this.loadPost()),this.triggerShareOnLoad(),this.fillEmbeddedEmailInputs(),this.props.justPublished&&(Object(r.removeQueryParam)("justPublished"),Object(r.preloadImage)(Object(Tl.b)(this.props.publication,this.props.post)[0])),(this.props.embeddedPostPublications||this.props.embeddedPostPublications==="")&&Object(r.removeQueryParam)("embeddedPostPublications"),this.props.autoSharedOnTwitter&&Object(r.removeQueryParam)("autoSharedOnTwitter"),this.props.showRestackModal&&Object(r.removeQueryParam)("showRestackModal"),this.props.showWelcome||Object(r.onWindowVisibilityChange)(this.updateSubscribeTakeover),this.props.selectionFromQuery&&Object(jl.a)(this.props.selectionFromQuery)})}componentWillUnmount(){var De;(De=this.cleanUpTikTokEnhanceListener)==null||De.call(this),Object(r.offWindowVisibilityChange)(this.updateSubscribeTakeover)}componentDidUpdate(De){return Ds(this,null,function*(){De.slug!==this.props.slug&&this.loadPost(),this.state.embeddedEmailInputsFilled||this.fillEmbeddedEmailInputs()})}shouldRedirectToComments(De){if(De&&De.type==="thread")return!0}redirectToComments(De){Object(m.route)(Object(v.getPostUrl)(this.props.publication,De,{comments:!0,noBase:!0}),!0)}loadPost(){return Ds(this,null,function*(){if(this.setState({embeddedEmailInputsFilled:!1}),this.props.post&&[this.props.post.slug,this.props.post.uuid].filter(De=>De).includes(this.props.slug)&&!this.shouldRedirectToComments(this.props.post))this.setState({post:this.props.post,comments:this.props.renderedComments},()=>Object(r.scrollToHash)());else{this.setState({post:null,comments:null});try{const De=yield ur.a.get(`/api/v1/posts/${this.props.slug}`).query({postPreview:this.props.postPreview});this.shouldRedirectToComments(De.body)?this.redirectToComments(De.body):(yield Object(r.setState)(this,{post:De.body,comments:De.body.comments}),Object(r.scrollToHash)())}catch(De){console.error("Failed to load post:",De),De.status===404?this.setState({notFound:!0}):alert(Object(r.getNetworkErrorMessage)(De))}}})}triggerShareOnLoad(){if(Object(v.getQueryItem)("action")==="share")window.history.replaceState({},document.title,Object(v.updateQuery)({action:null}));else return;!this.post||this.post.triggerShare({fromEmail:!0})}render({slug:De,freeSignup:Me,freeSignupEmail:st,publication:dt,reaction_token:Rt,hide_intro_popup:xt,freewallVariant:jt,unlock:_t,sort:on,search:gn,children:Wn,showWelcome:or,justPublished:lr,autoSharedOnTwitter:An,readerIsSearchCrawler:xn,postPreview:Bn,truncatedPost:fn,selectionFromQuery:Or,embeddedPublications:kr,siteConfigs:Mo={},freeTrialCoupon:vo,showRestackModal:ii,publicationSettings:Wo,show_reaction_upsell:Go},{comments:Ao,notFound:ui,post:gr,user:fo,showSubscribeTakeover:So}){const mi=this._inlineComments(),Ro=(gr==null?void 0:gr.audience)?Object(il.userHasFullAccessToPost)(fo,gr):!0,Pi=(fo==null?void 0:fo.is_subscribed)&&Ro,Ci=gr&&gr.slug&&gr.slug!=="coming-soon"&&gr.type!=="page",ra=Object(Oi.commentsEnabledForPost)({publication:dt,post:gr}),ca=Object(Oi.showCommentsOnPost)({publication:dt,post:gr}),va=Pi||(fo==null?void 0:fo.is_free_subscriber)||Me,Xo=(_t||(gr==null?void 0:gr.free_unlock_required))&&!va&&["treatment_short","treatment_long"].includes(jt),ts=fo&&fo.is_contributor&&(gr==null?void 0:gr.slug)=="coming-soon"&&!(Wo==null?void 0:Wo.seen_coming_soon_explainer);Xo&&(fn?gr.body_html=fn.body_html:gr.truncatedBody&&(gr.body_html=gr.truncatedBody));const Ea=(gr==null?void 0:gr.type)==="podcast",zi=!(gr==null?void 0:gr.hidden)&&(Object(Oi.isUUID)(De)||Pi||xn||gr&&!Object(il.isPaidAudience)(gr.audience)&&!Xo||gr&&!gr.slug&&!Xo),vs=!zi||(fo==null?void 0:fo.is_contributor)&&gr&&Object(il.isPaidAudience)(gr.audience),zs=lr&&(fo==null?void 0:fo.is_contributor)&&!this.props.publication.invite_only&&!["page"].includes(gr.type);return Object(o.h)("div",null,Object(o.h)(oc,{pub:dt,post:gr}),(or||So)&&Object(o.h)(d.c,{freeSignup:Me,freeSignupEmail:st,user:fo,post:gr,publication:dt,hidden:xt||Xo}),gr&&dt&&Object(o.h)($a.a,{user:fo,subdomain:dt.subdomain,post:gr}),ts&&Object(o.h)(la.b,null),Object(o.h)("div",{className:l()("single-post-container")},Object(o.h)("div",{className:l()({container:!Ea})},Object(o.h)("div",{className:"single-post"},Object(o.h)(Tl.a,{post:gr,publication:dt,selection:Or,siteConfigs:Mo}),gr?Object(o.h)(Va.c,{ref:Zi=>{this.post=Zi},commentsEnabled:ra,postPreview:Bn,showComments:ca,user:fo,post:gr,pub:dt,freeSignup:Me,freeSignupEmail:st,reaction_token:Rt,disableSubscribePrompt:or&&!(xt||Xo),paywall:zi?!1:Xo?{email_form:!0,autoFocus:!1,title:`Subscribe for free to ${dt.name} to unlock this ${gr.type==="podcast"?"episode":"post"}`}:!0,noTitleLink:!0,onChange:Zi=>this.setState(Zi),fromPostPage:!0,freeTrialCoupon:vo,showRestackModal:Boolean(ii)}):ui?Object(o.h)("p",{className:"main-loader"},"Post not found"):Object(o.h)(Va.g,{pub:dt}),Wn)),Ci&&zi&&[ca&&!Ea&&Object(o.h)(Dl,{commentsEnabled:ra,comments:Ao,post:gr,slug:De,user:fo,freeSignup:Me,freeSignupEmail:st,publication:dt,reaction_token:Rt,onVisible:this.onVisible,onChangeComment:this.onChangeComment,inlineComments:mi,selectionFromQuery:Or,onChange:Zi=>this.setState(Zi)}),dt.has_posts&&Object(o.h)("div",{className:"single-post-section"},Object(o.h)("div",{className:"full-container-border"}),Object(o.h)("div",{className:"container"},Object(o.h)(yi.a,{onVisible:()=>this.onVisible("Top Posts Footer")}),Object(o.h)(Hr.a,{user:fo,freeSignup:Me,freeSignupEmail:st,pub:dt,maxPosts:!vs&&!Pi&&!(va&&!dt.plans)?3:10,filterPosts:Zi=>Zi.id!==gr.id,sort:on,search:gn,stateInUrl:!0,sortTabs:Zi=>{const ns=Zi.findIndex(bs=>bs.id==="top");if(ns!==-1)return[Zi[ns]].concat(Zi.filter((bs,Is)=>Is!==ns))},delayFirstLoad:1e3,source:"post",isBelowTheFold:!0}))),!vs&&[Object(o.h)(yi.a,{onVisible:()=>this.onVisible("Subscribe Footer")}),Object(o.h)(ql,{publication:dt,user:fo,freeSignupEmail:st,freeSignup:Me})]],zs?Object(o.h)(al.a,{post:gr,autoSharedOnTwitter:An==="true",publicationTwitterScreenName:dt.twitter_screen_name,publication:dt,showAfter:(kr==null?void 0:kr.length)?Object(o.h)(sl.a,{pub:dt,pubsToRecommend:kr}):null}):null,Go?Object(o.h)(Sl.a,{pub:dt}):null))}}class Dl extends o.Component{constructor(De,Me){super(De,Me);ms(this,"modalRef",Object(o.createRef)(null)),this.inputRef=Object(o.createRef)(null),this.handleFocusInput=()=>{this.inputRef.current.focus()},this.state={comments:De.comments,reactionSigninComment:null}}componentDidMount(){document.addEventListener(Va.b,this.handleFocusInput)}componentWillUnmount(){document.removeEventListener(Va.b,this.handleFocusInput)}render({commentsEnabled:De,inlineComments:Me,post:st,user:dt,freeSignup:Rt,freeSignupEmail:xt,publication:jt,reaction_token:_t,onVisible:on,onChangeComment:gn,selectionFromQuery:Wn,slug:or,onChange:lr},{comments:An,reactionSigninComment:xn}){if(Me)return Object(o.h)("div",null,Object(o.h)("div",{className:"full-container-border"}),Object(o.h)(mr.d,{slug:or,user:dt,freeSignupEmail:xt,freeSignup:Rt,post:st,publication:jt,post_reaction_token:_t,selectionFromQuery:Wn,initialComments:An,inline:!0,onChange:lr}));const Bn=(fn,Or)=>Ds(this,null,function*(){return Object(mr.i)({user:dt,reactionToken:_t,comments:An,id:fn,reacted:Or,setComments:kr=>this.setState({comments:kr}),onNeedsSignin:kr=>new Promise(Mo=>this.setState({reactionSigninComment:kr},()=>this.modalRef.current.open(Mo)))})});return Object(o.h)("div",{className:"single-post-section comments-section"},Object(o.h)("div",{className:"container"},(De||st.comment_count>0)&&Object(o.h)("div",{className:"comments-section-title"},st.comment_count>0?Object(Oi.pluralize)(st.comment_count,"Comment"):"Comments"),Object(o.h)(yi.a,{onVisible:()=>on("Post Comments Footer")}),De&&Object(o.h)(mr.a,{user:dt,freeSignup:Rt,freeSignupEmail:xt,pub:jt,post:st,token:_t,ref:this.inputRef}),An.length>0&&!De&&Object(o.h)(mr.e,{post:st}),An&&An.length>0&&jt.community_enabled&&Object(o.h)(mr.b,{className:"post-page-root-comment-list",key:`post:${st.id}`,user:dt,freeSignup:Rt,freeSignupEmail:xt,pub:jt,post:st,comments:An,reaction_token:_t,onChange:gn,updateCommentReacted:Bn}),De&&st.comment_count>(An||[]).length&&Object(o.h)("a",{className:"more-comments",href:Object(mr.h)(st,jt)},Object(Oi.pluralize)(st.comment_count-(An||[]).length,"more comment"),"\u2026"),xn&&Object(o.h)(Zl.b,{comment:xn,pub:jt,user:dt,react:()=>Bn(xn.id,!0),modalRef:this.modalRef})))}}const oc=({pub:He,post:De})=>{if(!!De)return Object(o.h)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:Ws()(Object(fs.a)(He,De),{json:!0,isScriptContext:!0})}})};var Ml=t(31),Al=t(22),Ks=t(1217),Aa={root:"frontend-components-PressKitImage-module__root--3Peca",tableRoot:"frontend-components-PressKitImage-module__tableRoot--o7k15",link:"frontend-components-PressKitImage-module__link--27O9x",image:"frontend-components-PressKitImage-module__image--2T57z",download:"frontend-components-PressKitImage-module__download--2zt4c",imageLoading:"frontend-components-PressKitImage-module__imageLoading--txdUU",imageEmail:"frontend-components-PressKitImage-module__imageEmail--1E7CP",text:"frontend-components-PressKitImage-module__text--3w_-X"};const ic=({pub:He,post:De,style:Me,text:st})=>{const[dt,Rt]=Object(a.k)("");Object(a.d)(()=>{const jt=Object(v.getPressKitUrl)(He,De,Me);Object(r.preloadImage)(Object(v.getPressKitUrl)(He,De,Me),()=>{Rt(jt)})},[Rt,He,De,Me]);const xt=Object(M.useCallback)(()=>{Object(S.i)(S.a.WRITER_MEDIA_ASSETS_IMAGE_DOWNLOADED,{post_id:De.id,type:st})},[De,st]);return Object(o.h)("a",{onClick:xt,href:dt,alt:"Download Image",download:!0,className:Aa.link,target:"_blank"},Object(o.h)("div",{className:Aa.root},Object(o.h)("div",{className:Aa.download},Object(o.h)(Ks.default,{stroke:"#404040",fill:"white"})),!dt&&Object(o.h)("div",{className:`${Aa.image} ${Aa.imageLoading}`,alt:"Loading"},Object(o.h)(Al.b,null)),dt&&Object(o.h)("img",{src:dt,className:Aa.image})))},ac=({pub:He,post:De,style:Me,text:st,downloadUrl:dt})=>Object(o.h)("table",{className:Aa.tableRoot},Object(o.h)("tr",null,Object(o.h)("td",null,Object(o.h)("a",{href:dt||Object(v.getPressKitUrl)(He,De,Me),alt:"Download Image",download:!0,target:"_blank",className:Aa.link},Object(o.h)("img",{src:Object(v.getPressKitUrl)(He,De,Me),className:Aa.imageEmail})))),Object(o.h)("tr",null,Object(o.h)("td",null,Object(o.h)(Ml.b,{aClassName:"button download",alt:"Download Image",download:!0,target:"_blank",href:dt||Object(v.getPressKitUrl)(He,De,Me)},Object(o.h)("span",null,"Download")))));var $s=ic,es={root:"frontend-main-PressKitPage-module__root--2cpfS",pageTitle:"frontend-main-PressKitPage-module__pageTitle--LycbM",postTitle:"frontend-main-PressKitPage-module__postTitle--2uLcG",container:"frontend-main-PressKitPage-module__container--2bIzE",imageContainer:"frontend-main-PressKitPage-module__imageContainer--3tagG",divider:"frontend-main-PressKitPage-module__divider--1ccCY",text:"frontend-main-PressKitPage-module__text--zm4O5",textFooter:"frontend-main-PressKitPage-module__textFooter--Xt6kV"},wl=He=>{const De=He.themeVariables,Me=De.web_bg_color||De.cover_bg_color,st=He.post.cover_image||He.publication.cover_photo_url;return Object(a.d)(()=>{Object(S.i)(S.a.WRITER_MEDIA_ASSETS_PAGE_VISITED,{post_id:He.post.id})},[He.post.id]),Object(o.h)("div",{className:es.root},Object(o.h)(Sn.b.H2,{color:"pub-primary-text",className:es.pageTitle},"Media Assets"),Object(o.h)(Sn.b.B3,{color:"pub-primary-text",className:es.text},"We\u2019ve generated custom images to help you promote your post on other social networks. Download your images and share with a link to your post!"),Object(o.h)(er.b,{justifyContent:"center",className:es.container},Object(o.h)("div",{className:es.postTitle},Object(o.h)(Sn.b.H4,{color:"pub-primary-text"},He.post.title)),Object(o.h)("div",{className:es.divider}),Object(o.h)(er.a,{wrap:"wrap",justifyContent:"space-between"},Object(o.h)($s,{pub:He.publication,post:He.post,style:{bgColor:Me,textColor:De.print_on_web_bg_color||De.cover_print_primary||"#1a1a1a"},text:"Background Color"}),De.background_pop&&Object(o.h)($s,{pub:He.publication,post:He.post,style:{bgColor:De.background_pop,textColor:De.print_on_pop},text:"Accent Color"}),st&&Object(o.h)($s,{pub:He.publication,post:He.post,style:{bgImage:!0,textColor:"#ffffff"},text:"Image"}),Me.toLowerCase()!=="#ffffff"?Object(o.h)($s,{pub:He.publication,post:He.post,style:{bgColor:"#ffffff",textColor:"#404040"},text:"Black and White"}):null)),Object(o.h)("div",{className:es.textFooter},Object(o.h)(Sn.b.B4,{color:"pub-secondary-text"},"These images are generated from your publication theme colors which you can edit in your"," ",Object(o.h)("a",{href:Object(v.getPublishSettingsUrl)(He.publication,{addBase:!0,section:"theme"})},"publication settings")," ","and the social preview which you can edit in your post settings.")))},dl=t(396);const fl=({sitemapHeader:He,sitemapDescription:De,sitemapLinks:Me})=>Object(o.h)("div",{className:"container typography sitemap-page"},Object(r.setMetaData)({title:He,description:De}),Object(o.h)("h1",null,He),Object(o.h)("div",null,Me.map(st=>Object(o.h)("p",null,Object(o.h)("a",{class:"sitemap-link",href:st.href,native:!0},st.text)))));var lc=t(834),cc=t(990),Ha=t(21);function Vs({slug:He,pub:De,user:Me,freeSignup:st,freeSignupEmail:dt,tagPagePreloads:Rt}){var xt,jt;const _t=Boolean(De==null?void 0:De.theme),on=Object(Ha.f)({pathname:`/api/v1/publication/post-tag/slug/${He}`,auto:(Rt==null?void 0:Rt.slug)!==He,initialResult:(Rt==null?void 0:Rt.slug)===He?Rt.postTag:null,deps:[Rt,He]});return Object(o.h)(Xr.a,{value:{hasThemedBackground:_t}},Object(o.h)("div",{className:l()("archive-page typography",{"use-theme-bg":_t})},Object(o.h)("div",{className:"container"},on.isLoading?Object(o.h)("p",{className:"main-loader"},"Loading.."):Object(o.h)(o.Fragment,null,Object(o.h)("h2",null,((xt=on.result)==null?void 0:xt.name)||"Page not found"),Object(o.h)(Hr.a,{user:Me,freeSignup:st,freeSignupEmail:dt,pub:De,sort:"new",postTagId:(jt=on.result)==null?void 0:jt.id,newPosts:(Rt==null?void 0:Rt.slug)===He?Rt.posts:null,source:"tag-archive"})))))}var Il=Object.defineProperty,Ms=Object.getOwnPropertySymbols,uc=Object.prototype.hasOwnProperty,Hs=Object.prototype.propertyIsEnumerable,As=(He,De,Me)=>De in He?Il(He,De,{enumerable:!0,configurable:!0,writable:!0,value:Me}):He[De]=Me,gs=(He,De)=>{for(var Me in De||(De={}))uc.call(De,Me)&&As(He,Me,De[Me]);if(Ms)for(var Me of Ms(De))Hs.call(De,Me)&&As(He,Me,De[Me]);return He};const dc=1e3*60*60*24,_l="domain-redirect-time";class fc extends o.Component{constructor(De,Me){super(De,Me);this.state=De.initialData||{}}componentDidUpdate(De,Me){var st,dt,Rt,xt;this.props.initialData&&JSON.stringify(this.props.initialData)!==JSON.stringify(this.state)&&this.setState(gs({},this.props.initialData));const jt=(dt=(st=this.state.pub)==null?void 0:st.theme)==null?void 0:dt.web_bg_color,_t=document.documentElement;_t&&jt&&((xt=(Rt=Me==null?void 0:Me.pub)==null?void 0:Rt.theme)==null?void 0:xt.web_bg_color)!==jt&&(_t.style.background=jt)}componentDidMount(){var De,Me,st,dt;const Rt=(dt=(st=(Me=(De=this.props)==null?void 0:De.initialData)==null?void 0:Me.pub)==null?void 0:st.theme)==null?void 0:dt.web_bg_color,xt=document.documentElement;xt&&Rt&&(xt.style.background=Rt);const jt=this.loadedWithLikelyLoggedInParam()?"param":null;jt&&!this.shouldBlockLoginRedirect()?this.attemptLoginRedirect({source:jt}):this.useIframe()&&window.addEventListener("message",_t=>this.handleFrameMessage(_t))}shouldBlockLoginRedirect(){var De;const Me=parseInt(Object(W.getStoredValue)(_l,0));return this.state.block_auto_login||!((De=this.state.pub)==null?void 0:De.custom_domain)||this.state.user||typeof window=="undefined"||Date.now()-Me<=dc||Object(v.parseQuery)(window.location.toString()).hasOwnProperty("triedSigningIn")}handleFrameMessage(De){var Me,st,dt;if(((Me=De.data)==null?void 0:Me.type)!=="frame-state")return;const Rt=!this.shouldBlockLoginRedirect()&&((st=De.data)==null?void 0:st.loggedInAtSubstack);Object(S.i)(S.a.FRAME_MESSAGE_HANDLED,{loggedInAtSubstack:(dt=De.data)==null?void 0:dt.loggedInAtSubstack,loggedInAtCustomDomain:!!this.state.user,attemptRedirect:Rt}),Rt&&this.attemptLoginRedirect({source:"cookie"})}attemptLoginRedirect({source:De}={}){Object(S.i)(S.a.CUSTOM_DOMAIN_LOGIN_REDIRECT_ATTEMPTED,{fromParam:De==="param",source:De}),Object(W.setStoredValue)(_l,`${Date.now()}`),location.href=Object(r.getLoginRedirect)({justTrying:!0,useOriginalUrl:!0})}loadedWithLikelyLoggedInParam(){return typeof window!="undefined"&&window._preloads.original_url&&!!Object(v.parseQuery)(window._preloads.original_url).hasOwnProperty("lli")}useIframe(){var De,Me;return!(typeof window=="undefined"||this.loadedWithLikelyLoggedInParam()||!((De=this.state.pub)==null?void 0:De.custom_domain)||Object(v.urlIsRegularlyShownInIframe)((Me=window==null?void 0:window.location)==null?void 0:Me.href))}render({coupon:De},{pub:Me,section:st,user:dt,userProfile:Rt,freeSignup:xt,freeSignupEmail:jt,posts:_t,post:on,truncatedPost:gn,pinnedPosts:Wn,newPosts:or,topPosts:lr,communityPosts:An,communityAction:xn,searchPosts:Bn,inlineComments:fn,latestChildPosts:Or,latestSectionPosts:kr,subscribeContent:Mo,homepageLinks:vo,recommendations:ii,numRecommendations:Wo,allSubscribedPubs:Go,fullySubscribedPubs:Ao,sitemapHeader:ui,sitemapDescription:gr,sitemapLinks:fo,referralCode:So,referralCoupon:mi,hide_intro_popup:Ro,post_reaction_token:Pi,stripe_publishable_key:Ci,viral_gift_data:ra,campaign:ca,referralCampaign:va,file:za,primaryEligiblePublications:Xo,flagged_as_spam:ts,switchAccountRedirectUrl:Ea,readerIsSearchCrawler:zi,commentId:vs,selectionFromQuery:zs,siteConfigs:Zi={},blurbs:ns,noBalanceHeroText:bs,embeddedPublications:Is,themeVariables:Rl,subdomainNotFound:hl,freeTrialCoupon:rs,signupForFreeVariant:Ga,people:Gs,useNewSubscribePage:_s,idToMagicLink:di,token:Rs,podcast_rss_url:pc,publicationSettings:Ys,pledgePlans:Nl,isChatActive:Js,isMeetingsActive:Os,optOutLegacyTheming:pl,meetingsOrder:Qs,meetingsSettings:Xs,appModalOpenByDefault:Q,twitterCardUrl:te,tagPagePreloads:ge,initialComments:re}){const ye=h()(this.state.comments)?this.state.comments:[];if(hl)return Object(o.h)(ol,{subdomain:hl});if(ts&&!(dt==null?void 0:dt.is_global_admin))return Object(o.h)("div",{className:"page typography signup-page",path:"/flagged"},Object(r.setMetaData)({title:"Flagged as TOS violation"}),Object(o.h)("div",{className:"container"},Object(o.h)("h2",null,"Publication Not Available"),Object(o.h)("p",null,"The page you are attempting to access is unavailable."," ",Object(o.h)("a",{href:`${Object(v.getBaseUrl)()}`,native:!0},"Click here")," ","to view some more great writing."),Object(o.h)("p",null,Object(o.h)("a",{href:Object(v.getBaseUrl)(),className:"button primary"},"Go to substack.com"))));const Je=Boolean((Me==null?void 0:Me.theme)&&!pl),St=Object(m.getCurrentUrl)().startsWith("/chat");return Object(o.h)(w.a,{user:dt,siteConfigs:Zi,hasThemedBackground:Je,locale:this.state.language,experimentInfo:this.props.initialData,publicationSettings:Ys},Object(o.h)(dl.a,{publication:Me,twitterCardUrl:te}),Object(o.h)(ws,{user:dt}),Object(o.h)(hc,{user:dt,pub:Me}),Object(o.h)("div",{className:l()("main typography",{"use-theme-bg":Je,"should-flex":St}),id:"main"},this.useIframe()&&Object(o.h)("iframe",{src:`${Object(v.getSubstackUrl)()}/channel-frame`,class:"channel-frame",width:"0",height:"0"}),Object(o.h)(g.Match,{path:"/"},({path:Mt})=>{var Zt,jn;let xr="/home";/^\/about\b/.test(Mt)?xr="/about":/^\/chat\b/.test(Mt)?xr="/chat":/^\/podcast\b/.test(Mt)?xr="/podcast":/^\/archive\b/.test(Mt)?xr="/archive":/^\/recommendations\b/.test(Mt)?xr="/recommendations":/^\/listen\b/.test(Mt)?xr="/listen":st?xr=st.id:/^\/p\//.test(Mt)?xr=((Zt=/^\/p\/([^/?#]+)/.exec(Mt))==null?void 0:Zt[0])||"/p":/^\/t\//.test(Mt)&&(xr=((jn=/^\/t\/([^/?#]+)/.exec(Mt))==null?void 0:jn[0])||"/p");let Fr;typeof window!="undefined"&&window.location.search&&(Fr=Object(v.parseQuery)(window.location.search));const bo=/^\/p\/([^/?#]*)/.exec(Mt),Ni=bo&&!((on==null?void 0:on.type)==="page"&&on.slug===bo[1]),wi=Mt.startsWith("/subscribe")||Mt.startsWith("/finish-invite")||Mt.startsWith("/meetings"),Wi=Mt.startsWith("/chat/posts/");return st?Object(o.h)(b.a,{pub:Me,user:dt,freeSignup:xt,freeSignupEmail:jt,hide_subscribe_cta:Mt.startsWith("/subscribe"),selectedSectionId:xr,isPostView:Ni,showCustomerSupportModeModal:Boolean(Fr==null?void 0:Fr.showCustomerSupportModeModal),lowChrome:wi,numRecommendations:Wo,isChatActive:Js,isMeetingsActive:Os,signupForFreeVariant:Ga}):!["welcome","embed","meetings"].some(ia=>Mt.startsWith(`/${ia}`))&&!(Mt.startsWith("/subscribe")&&(_s||Nl))&&Object(o.h)(b.a,{pub:Me,user:dt,freeSignup:xt,freeSignupEmail:jt,hide_subscribe_cta:Mt.startsWith("/subscribe"),isPostView:Ni,selectedSectionId:xr,showCustomerSupportModeModal:Boolean(Fr==null?void 0:Fr.showCustomerSupportModeModal),lowChrome:wi,numRecommendations:Wo,isChatActive:Js,isMeetingsActive:Os,signupForFreeVariant:Ga,hideSections:Wi})}),Object(o.h)(E.a,{pub:Me,user:dt}),Object(o.h)(m.Router,{onChange:B.a},["newspaper","magaziney"].includes(Me.homepage_type)?Object(o.h)(pi.a,{path:"/",blurbs:ns,freeSignup:xt,freeSignupEmail:jt,hide_intro_popup:Ro,homepageLinks:vo,homepageType:Me.homepage_type,latestChildPosts:Or,latestSectionPosts:kr,newPosts:or,noBalanceHeroText:bs,numRecommendations:Wo,pinnedPosts:Wn,pub:Me,recommendations:ii,referralCampaign:va,referralCode:So,topPosts:lr,user:dt}):Object(o.h)(Ur.a,{path:"/",user:dt,freeSignupEmail:jt,freeSignup:xt,hide_intro_popup:Ro,preloadedPosts:_t,pub:Me,blurbs:ns,noBalanceHeroText:bs}),Object(o.h)(pi.a,{path:"/listen/:sectionSlug",homepageType:"newspaper",user:dt,freeSignupEmail:jt,freeSignup:xt,hide_intro_popup:Ro,pub:Me,pinnedPosts:Wn,newPosts:or,latestChildPosts:Or,latestSectionPosts:kr,homepageLinks:vo,section:Me.section,referralCampaign:va,isPodcast:!0}),Object(o.h)(pi.a,{path:"/podcast",homepageType:"newspaper",user:dt,freeSignupEmail:jt,freeSignup:xt,hide_intro_popup:Ro,pub:Me,pinnedPosts:Wn,newPosts:or,latestChildPosts:Or,latestSectionPosts:kr,homepageLinks:vo,recommendations:ii,numRecommendations:Wo,referralCampaign:va,isPodcast:!0,includePinnedPosts:!0}),Object(o.h)(Ir,{path:"/podcast/archive",user:dt,newPosts:or,topPosts:lr,communityPosts:An,searchPosts:Bn,pub:Me,freeSignupEmail:jt,freeSignup:xt,isPodcast:!0,metadata:gs({title:`Podcast Archive - ${Me.name}`,description:`Full archive of all the episodes from ${Me.name}.`},Boolean(Bn||Object(v.getQueryItem)("search"))&&{seoProps:{noindex:!0}})}),Object(o.h)(pi.a,{path:"/s/:slug",homepageType:"newspaper",user:dt,freeSignupEmail:jt,freeSignup:xt,hide_intro_popup:Ro,pub:Me,pinnedPosts:Wn,newPosts:or,latestChildPosts:Or,latestSectionPosts:kr,homepageLinks:vo,section:Me.section,referralCampaign:va}),Object(o.h)(pi.a,{path:"/beta",homepageType:"newspaper",user:dt,freeSignupEmail:jt,freeSignup:xt,hide_intro_popup:Ro,pub:Me,pinnedPosts:Wn,newPosts:or,latestChildPosts:Or,homepageLinks:vo,recommendations:ii,numRecommendations:Wo,referralCampaign:va}),Object(o.h)(Ir,{path:"/archive",user:dt,newPosts:or,topPosts:lr,communityPosts:An,searchPosts:Bn,pub:Me,freeSignupEmail:jt,freeSignup:xt,metadata:gs({title:`Archive - ${Me.name}`,description:`Full archive of all the posts from ${Me.name}.`},Boolean(Bn||Object(v.getQueryItem)("search"))&&{seoProps:{noindex:!0}})}),Object(o.h)(Ir,{path:"/s/:slug/archive",user:dt,newPosts:or,topPosts:lr,communityPosts:An,searchPosts:Bn,pub:Me,freeSignupEmail:jt,freeSignup:xt,sectionId:st==null?void 0:st.id,metadata:gs({title:`Archive - ${st==null?void 0:st.name} of ${Me.name}`,description:`Full archive of all the posts from ${st==null?void 0:st.name} of ${Me.name}.`},Boolean(Bn||Object(v.getQueryItem)("search"))&&{seoProps:{noindex:!0}})}),Object(o.h)(Ir,{path:"/listen/:sectionSlug/archive/",user:dt,newPosts:or,topPosts:lr,communityPosts:An,searchPosts:Bn,pub:Me,freeSignupEmail:jt,freeSignup:xt,sectionId:st==null?void 0:st.id,metadata:gs({title:`Podcast Archive - ${Object(P.d)({pub:Me,section:Me.section}).title}`,description:`Full archive of all the episodes from ${Object(P.d)({pub:Me,section:Me.section}).title}.`},Boolean(Bn||Object(v.getQueryItem)("search"))&&{seoProps:{noindex:!0}})}),Object(o.h)(Vs,{path:"/t/:slug",user:dt,freeSignupEmail:jt,freeSignup:xt,pub:Me,tagPagePreloads:ge}),Object(o.h)(Ir,{default:!0,title:"Page not found",user:dt,newPosts:or,topPosts:lr,communityPosts:An,searchPosts:Bn,pub:Me,freeSignupEmail:jt,freeSignup:xt}),Object(o.h)(i,{path:"/tos",html:Me.tos_content_html||"Terms of Service",metadata:{title:"Terms of Service"}},Object(o.h)("p",null,"You agree to the terms of service below, and the"," ",Object(o.h)("a",{href:"https://substack.com/tos",native:!0},"Terms of Use for Substack"),", the technology provider.")),Object(o.h)(i,{path:"/privacy",html:Me.privacy_content_html||"Privacy Policy",metadata:{title:"Privacy Policy"}},Object(o.h)("p",null,"You agree to the privacy policy below, and the"," ",Object(o.h)("a",{href:Object(v.getPrivacyUrl)(),native:!0},"Privacy Policy for Substack"),", the technology provider.")),Object(o.h)(i,{path:"/disclosures",html:Me.disclosures_content_html||"Disclosures",metadata:{title:"Disclosures"}}),Object(o.h)(d.c,{path:"/welcome",publication:Me,post:null,user:dt,freeSignup:xt,freeSignupEmail:jt,alwaysShow:!0,onHide:()=>{document.location.href="/"}}),Object(o.h)(d.c,{path:"/podcast",publication:Me,post:null,referralCode:So,referralCoupon:mi,user:dt,freeSignup:xt,freeSignupEmail:jt,coupon:De,alwaysShow:!0,onHide:()=>{document.location.href="/"}}),Object(o.h)(Xi,{pub:Me,path:"/invite",user:dt,freeSignup:xt,freeSignupEmail:jt}),Object(o.h)(yo,{path:"/invite-success/:id",pub:Me,user:dt,post:on,freeSignup:xt,freeSignupEmail:jt}),Object(o.h)(oo,{path:"/finish-invite/:id",pub:Me,user:dt,freeSignup:xt,freeSignupEmail:jt}),Object(o.h)(oo,{path:"/finish-post-invite/:id",pub:Me,post:on,user:dt,freeSignup:xt,freeSignupEmail:jt,inviteToPost:!0,primaryEligiblePublications:Xo||[],switchAccountRedirectUrl:Ea}),Object(o.h)(lc.a,{path:"/recommendations",pub:Me,user:dt,recommendations:ii,allSubscribedPubs:Go,fullySubscribedPubs:Ao}),Object(o.h)(fl,{path:"/sitemap",pub:Me,sitemapHeader:ui,sitemapDescription:gr,sitemapLinks:fo}),Object(o.h)(fl,{path:"/sitemap/:year",pub:Me,sitemapHeader:ui,sitemapDescription:gr,sitemapLinks:fo}),Object(o.h)(po,{path:"/about",pub:Me,user:dt,freeSignup:xt,freeSignupEmail:jt,subscribeContent:Mo,people:Gs,metadata:{title:`About - ${Me.name}`}}),Object(o.h)(Ua,{path:"/p/:slug",user:dt,freeSignupEmail:jt,freeSignup:xt,referralCoupon:mi,referralCode:So,post:on,truncatedPost:gn,publication:Me,renderedComments:ye,inlineComments:fn,reaction_token:Pi,hide_intro_popup:Ro,stripe_publishable_key:Ci,readerIsSearchCrawler:zi,selectionFromQuery:zs,embeddedPublications:Is,siteConfigs:Zi,freeTrialCoupon:rs,publicationSettings:Ys}),Object(o.h)(cc.b,{path:"/listen",pub:Me,user:dt||null,openInNewTab:!0,idToMagicLink:di}),Object(o.h)(wl,{path:"/p/:slug/media-assets",post:on,publication:Me,themeVariables:Rl}),fn?Object(o.h)(Ua,{path:"/p/:slug/comments",user:dt,freeSignupEmail:jt,freeSignup:xt,referralCoupon:mi,referralCode:So,post:on,truncatedPost:gn,publication:Me,renderedComments:ye,inlineComments:fn,reaction_token:Pi,hide_intro_popup:Ro,stripe_publishable_key:Ci,readerIsSearchCrawler:zi,selectionFromQuery:zs,siteConfigs:Zi,freeTrialCoupon:rs}):Object(o.h)(mr.d,{path:"/p/:slug/comments",user:dt,freeSignupEmail:jt,freeSignup:xt,post:on,publication:Me,post_reaction_token:Pi,commentId:vs,freeTrialCoupon:rs,initialComments:re}),!fn&&Object(o.h)(mr.d,{path:"/p/:slug/comment/:comment_id",user:dt,freeSignupEmail:jt,freeSignup:xt,post:on,publication:Me,post_reaction_token:Pi,commentId:vs,freeTrialCoupon:rs}),Object(o.h)(Co,{path:"/rewards/receive",pub:Me,user:dt,freeSignupEmail:jt,viral_gift_data:ra}),Object(o.h)(Ei,{path:"/c/:code",pub:Me,user:dt,freeSignupEmail:jt,campaign:ca}),Object(o.h)(co,{path:"/embed",pub:Me,user:dt,freeSignup:xt,freeSignupEmail:jt}),Object(o.h)(oe,{path:"/embed/test",pub:Me,user:dt,freeSignup:xt,freeSignupEmail:jt}),Object(o.h)(J,{path:"/embed/podcast/:slug",pub:Me}),Object(o.h)(qe,{path:"/embed/video/:slug",pub:Me}),Object(o.h)(Qn,{path:"/f/:fileId",pub:Me,user:dt,hide_subscribe_cta:!0,file:za}),Zi.live_events&&Object(o.h)(bi,{path:"/live_event/:eventId/:participantType",pub:Me,user:dt}),Object(o.h)(ei.b,{path:"/chat",publication:Me,user:dt}),Object(o.h)(ei.c,{path:"/chat/posts/:postId",publication:Me,communityAction:xn,user:dt,appModalOpenByDefault:Q}),Zi.meetings_v1&&(Os||(dt==null?void 0:dt.is_author))&&Object(o.h)(Pa,{path:"/meetings",exact:!0,pub:Me,user:dt,settings:Xs}),Zi.meetings_v1&&(Os||(dt==null?void 0:dt.is_author))&&Object(o.h)(ja,{path:"/meetings/book",pub:Me,user:dt,stripe_publishable_key:Ci,order:Qs,settings:Xs}),Zi.meetings_v1&&(Qs||Os||(dt==null?void 0:dt.is_author))&&Object(o.h)(ja,{path:"/meetings/book/:order_id?",pub:Me,user:dt,stripe_publishable_key:Ci,order:Qs,settings:Xs})),Object(o.h)(g.Match,{path:"/"},({path:Mt})=>!Mt.startsWith("/welcome")&&!Mt.startsWith("/embed")&&!Mt.startsWith("/subscribe")&&!Mt.startsWith("/meetings")&&!Mt.startsWith("/chat")&&Object(o.h)(u.a,{publication:Me,user:dt,showIntrinioAttrib:on&&on.hasCashtag,path:Mt})),Object(o.h)(O.a,{pub:Me,user:dt})))}}function ws({user:He}){const De=Object(f.a)({user:He});return Object(a.d)(()=>{const Me=new URLSearchParams(location.search);if(Me.get("reaction")==="\u2764"){De(),Me.delete("reaction");const st=Me.toString();history.replaceState({},document.title,location.pathname+(st&&`?${st}`))}},[]),null}function hc({user:He,pub:De}){return Object(D.a)({user:He,pub:De}),null}Object(e.a)(fc)}])});of();})();

//# sourceMappingURL=main.bundle.js.map