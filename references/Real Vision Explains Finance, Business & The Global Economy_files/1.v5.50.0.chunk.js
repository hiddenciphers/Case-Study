(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(695);t.Jsona=i.default;var o=r(676);t.ModelsSerializer=o.default;var s=r(677);t.JsonDeserializer=s.default;var n=r(664);t.ModelPropertiesMapper=n.ModelPropertiesMapper,t.JsonPropertiesMapper=n.JsonPropertiesMapper;var a=r(698);t.SwitchCaseModelMapper=a.SwitchCaseModelMapper,t.SwitchCaseJsonMapper=a.SwitchCaseJsonMapper,t.default=i.default},664:function(e,t,r){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],n=0,a=s.length;n<a;n++,o++)i[o]=s[n];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.RELATIONSHIP_NAMES_PROP="relationshipNames";var o=function(){function e(){}return e.prototype.getId=function(e){return e.id},e.prototype.getType=function(e){return e.type},e.prototype.getAttributes=function(e){var r=["id","type",t.RELATIONSHIP_NAMES_PROP];Array.isArray(e[t.RELATIONSHIP_NAMES_PROP])?r.push.apply(r,e[t.RELATIONSHIP_NAMES_PROP]):e[t.RELATIONSHIP_NAMES_PROP]&&console.warn("Can't getAttributes correctly, '"+t.RELATIONSHIP_NAMES_PROP+"' property of "+e.type+"-"+e.id+" model\n                isn't array of relationship names",e[t.RELATIONSHIP_NAMES_PROP]);var i={};return Object.keys(e).forEach((function(t){-1===r.indexOf(t)&&(i[t]=e[t])})),i},e.prototype.getRelationships=function(e){var r=e[t.RELATIONSHIP_NAMES_PROP];if(r&&(!Array.isArray(r)||r.length)){if(!r||Array.isArray(r)){var i={};return r.forEach((function(t){void 0!==e[t]&&(i[t]=e[t])})),i}console.warn("Can't getRelationships correctly,\n                '"+t.RELATIONSHIP_NAMES_PROP+"' property of "+e.type+"-"+e.id+" model\n                isn't array of relationship names",e[t.RELATIONSHIP_NAMES_PROP])}},e}();function s(e,t,r){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,set:function(r){delete e[t],e[t]=r},get:function(){return delete e[t],e[t]=r()}})}t.ModelPropertiesMapper=o,t.defineRelationGetter=s;var n=function(){function e(){}return e.prototype.createModel=function(e){return{type:e}},e.prototype.setId=function(e,t){e.id=t},e.prototype.setAttributes=function(e,t){Object.keys(t).forEach((function(r){e[r]=t[r]}))},e.prototype.setMeta=function(e,t){e.meta=t},e.prototype.setLinks=function(e,t){e.links=t},e.prototype.setResourceIdObjMeta=function(e,t){e.resourceIdObjMeta=t},e.prototype.setRelationships=function(e,r){Object.keys(r).forEach((function(t){"function"==typeof r[t]?s(e,t,r[t]):e[t]=r[t]}));var o=Object.keys(r),n=e[t.RELATIONSHIP_NAMES_PROP];n&&n.length?e[t.RELATIONSHIP_NAMES_PROP]=i(n,o).filter((function(e,t,r){return r.indexOf(e)===t})):e[t.RELATIONSHIP_NAMES_PROP]=o},e.prototype.setRelationshipLinks=function(e,t,r){},e.prototype.setRelationshipMeta=function(e,t,r){},e}();t.JsonPropertiesMapper=n},675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIncludeNamesTree=function e(t,r){var i=t.split("."),o=i.shift(),s=null;i.length&&(s=r[o]||{},e(i.join("."),s)),r[o]=s},t.jsonParse=function(e){var t;try{t=JSON.parse(e)}catch(e){t={},console.warn(e)}return t}},676:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(675),o=function(){function e(e){e&&this.setPropertiesMapper(e)}return e.prototype.setPropertiesMapper=function(e){this.propertiesMapper=e},e.prototype.setStuff=function(e){this.stuff=e},e.prototype.setIncludeNames=function(e){if(Array.isArray(e)){var t={};e.forEach((function(e){i.createIncludeNamesTree(e,t)})),this.includeNamesTree=t}else this.includeNamesTree=e},e.prototype.build=function(){var e=this.stuff,t=this.propertiesMapper;if(!t||"object"!=typeof t)throw new Error("ModelsSerializer cannot build, propertiesMapper is not set");if(!e||"object"!=typeof e)throw new Error("ModelsSerializer cannot build, stuff is not set");var r={},i={};if(e&&Array.isArray(e)){for(var o=e.length,s=[],n=0;n<o;n++)s.push(this.buildDataByModel(e[n])),this.buildIncludedByModel(e[n],this.includeNamesTree,i);r.data=s}else e?(r.data=this.buildDataByModel(e),this.buildIncludedByModel(e,this.includeNamesTree,i)):null===e&&(r.data=null);return Object.keys(i).length&&(r.included=[],Object.keys(i).forEach((function(e){r.included.push(i[e])}))),r},e.prototype.buildDataByModel=function(e){var t={id:this.propertiesMapper.getId(e),type:this.propertiesMapper.getType(e),attributes:this.propertiesMapper.getAttributes(e)};if("string"!=typeof t.type||!t.type)throw console.warn("ModelsSerializer cannot buildDataByModel, type is not set or incorrect",e),new Error("ModelsSerializer cannot buildDataByModel, type is not set or incorrect");var r=this.buildRelationshipsByModel(e);return r&&Object.keys(r).length&&(t.relationships=r),t},e.prototype.buildRelationshipsByModel=function(e){var t=this,r=this.propertiesMapper.getRelationships(e);if(r&&Object.keys(r).length){var i={};return Object.keys(r).forEach((function(e){var o=r[e];if(Array.isArray(o)){for(var s=[],n=o.length,a=0;a<n;a++)(p={id:t.propertiesMapper.getId(o[a]),type:t.propertiesMapper.getType(o[a])}).id&&p.type?s.push(p):console.error("Can't create data item["+a+"] for relationship "+e+",\n                            it doesn't have 'id' or 'type', it was skipped",o[a]);i[e]={data:s}}else if(o){var p;(p={id:t.propertiesMapper.getId(o),type:t.propertiesMapper.getType(o)}).type?i[e]={data:p}:console.error("Can't create data for relationship "+e+", it doesn't have 'type', it was skipped",o)}else i[e]={data:o}})),i}},e.prototype.buildIncludedByModel=function(e,t,r){if(void 0===r&&(r={}),t&&Object.keys(t).length){var i=this.propertiesMapper.getRelationships(e);if(i&&Object.keys(i).length)for(var o=Object.keys(t),s=o.length,n=0;n<s;n++){var a=o[n],p=i[a];if(p)if(Array.isArray(p))for(var l=p.length,u=0;u<l;u++){var c=p[u];this.buildIncludedItem(c,t[a],r)}else this.buildIncludedItem(p,t[a],r)}}},e.prototype.buildIncludedItem=function(e,t,r){var i=this.propertiesMapper.getType(e)+this.propertiesMapper.getId(e);r[i]||(r[i]=this.buildDataByModel(e),t&&this.buildIncludedByModel(e,t,r))},e}();t.ModelsSerializer=o,t.default=o},677:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){this.preferNestedDataFromData=!1,this.setPropertiesMapper(e),this.setDeserializeCache(t),r&&r.preferNestedDataFromData&&(this.preferNestedDataFromData=!0)}return e.prototype.setDeserializeCache=function(e){this.dc=e},e.prototype.setPropertiesMapper=function(e){this.pm=e},e.prototype.setJsonParsedObject=function(e){this.body=e},e.prototype.build=function(){var e,t=this.body.data;if(Array.isArray(t)){e=[];for(var r=t.length,i=0;i<r;i++)if(t[i]){var o=this.buildModelByData(t[i]);o&&e.push(o)}}else t&&(e=this.buildModelByData(t));return e},e.prototype.buildModelByData=function(e,t){void 0===t&&(t={});var r=this.dc.getCachedModel(e);if(r)return r;var i=this.pm.createModel(e.type);if(this.dc.handleModel(i,e),i){this.pm.setId(i,e.id),e.attributes&&this.pm.setAttributes(i,e.attributes),e.meta&&this.pm.setMeta&&this.pm.setMeta(i,e.meta),e.links&&this.pm.setLinks&&this.pm.setLinks(i,e.links),t.meta&&this.pm.setResourceIdObjMeta(i,t.meta);var o=this.buildRelationsByData(e,i);o&&this.pm.setRelationships(i,o)}return i},e.prototype.buildRelationsByData=function(e,t){var r={};if(e.relationships)for(var i in e.relationships){var o=e.relationships[i];if(Array.isArray(o.data)){r[i]=[];for(var s=o.data.length,n=void 0,a=0;a<s;a++){if(!(n=o.data[a]))return;var p=this.buildDataFromIncludedOrData(n.id,n.type);r[i].push(this.buildModelByData(p,n))}}else o.data?(p=this.buildDataFromIncludedOrData(o.data.id,o.data.type),r[i]=this.buildModelByData(p,o.data)):null===o.data&&(r[i]=null);if(o.links){var l=this.pm.setRelationshipLinks;l&&l(t,i,o.links)}if(o.meta){var u=this.pm.setRelationshipMeta;u&&u(t,i,o.meta)}}return Object.keys(r).length?r:null},e.prototype.buildDataFromIncludedOrData=function(e,t){if(this.preferNestedDataFromData&&(r=this.buildDataInObject()[t+e]))return r;var r,i=this.buildIncludedInObject()[t+e];return i||(!this.preferNestedDataFromData&&(r=this.buildDataInObject()[t+e])?r:{id:e,type:t})},e.prototype.buildDataInObject=function(){if(!this.dataInObject){this.dataInObject={};var e=this.body.data,t=e.length;if(e&&t)for(var r=0;r<t;r++){var i=e[r];this.dataInObject[i.type+i.id]=i}else e&&(this.dataInObject[e.type+e.id]=e)}return this.dataInObject},e.prototype.buildIncludedInObject=function(){if(!this.includedInObject&&(this.includedInObject={},this.body.included))for(var e=this.body.included.length,t=0;t<e;t++){var r=this.body.included[t];this.includedInObject[r.type+r.id]=r}return this.includedInObject},e}();t.JsonDeserializer=i,t.default=i},695:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(675),o=r(676),s=r(677),n=r(696),a=r(664),p=r(697),l=function(){function e(e){this.modelPropertiesMapper=new a.ModelPropertiesMapper,this.jsonPropertiesMapper=new a.JsonPropertiesMapper,this.DeserializeCache=p.DeserializeCache,this.ModelsSerializer=o.default,this.JsonDeserializer=s.default,e&&e.modelPropertiesMapper&&(this.modelPropertiesMapper=e.modelPropertiesMapper),e&&e.jsonPropertiesMapper&&(this.jsonPropertiesMapper=e.jsonPropertiesMapper),e&&e.DeserializeCache&&(this.DeserializeCache=e.DeserializeCache),e&&e.ModelsSerializer&&(this.ModelsSerializer=e.ModelsSerializer),e&&e.JsonDeserializer&&(this.JsonDeserializer=e.JsonDeserializer)}return e.prototype.serialize=function(e){var t=e.stuff,r=e.includeNames;if(!t)throw new Error("Jsona can not serialize, stuff is not passed");var i=new this.ModelsSerializer(this.modelPropertiesMapper);return i.setStuff(t),r&&i.setIncludeNames(r),i.build()},e.prototype.deserialize=function(e,t){if(!e)throw new Error("Jsona can not deserialize, body is not passed");var r=new this.DeserializeCache,o=new this.JsonDeserializer(this.jsonPropertiesMapper,r,t);return"string"==typeof e?o.setJsonParsedObject(i.jsonParse(e)):o.setJsonParsedObject(e),o.build()},e.prototype.denormalizeReduxObject=function(e){var t=e.reduxObject,r=e.entityType,i=e.entityIds,o=e.returnBuilderInRelations,s=void 0!==o&&o;if(!t)throw new Error("Jsona can not denormalize ReduxObject, incorrect reduxObject passed");if(!r)throw new Error("Jsona can not denormalize ReduxObject, entityType is not passed");if(!t[r])return null;var a=new n.default(this.jsonPropertiesMapper);return a.setReduxObject(t),a.setEntityType(r),a.setReturnBuilderInRelations(s),i&&a.setEntityIds(Array.isArray(i)?i:i.toString()),a.build()},e}();t.default=l},696:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.cachedModels={},this.setPropertiesMapper(e)}return e.prototype.setPropertiesMapper=function(e){this.propertiesMapper=e},e.prototype.setReduxObject=function(e){this.reduxObject=e},e.prototype.setEntityType=function(e){this.entityType=e},e.prototype.setEntityIds=function(e){this.ids=e},e.prototype.setReturnBuilderInRelations=function(e){this.returnBuilderInRelations=e},e.prototype.build=function(){var e=this,t=this,r=t.reduxObject,i=t.entityType,o=t.propertiesMapper;if(!o||"object"!=typeof o)throw new Error("ReduxObjectDenormalizer cannot build, propertiesMapper is not set");if(!r||"object"!=typeof r)throw new Error("ReduxObjectDenormalizer cannot build, reduxObject is not set");if(!i)throw new Error("ReduxObjectDenormalizer cannot build, entityType is not set");if(!r[i])return null;var s=this.ids;if(s||(s=Object.keys(r[i])),Array.isArray(s)){if(!s.length)return null;var n=[];return s.forEach((function(t){var r=e.buildModel(i,t);r&&n.push(r)})),n}return this.buildModel(i,s)},e.prototype.buildModel=function(e,t){var r=this.reduxObject;if(!r[e])return null;var i=r[e][t];if(!i)return null;var o=e+"-"+t,s=this.cachedModels[o];if(!s&&(s=this.propertiesMapper.createModel(e))){this.cachedModels[o]=s,this.propertiesMapper.setId(s,i.id),i.attributes&&this.propertiesMapper.setAttributes(s,i.attributes);var n=this.buildRelationships(s,i.relationships);n&&this.propertiesMapper.setRelationships(s,n)}return s},e.prototype.buildRelationships=function(e,t){var r=this;if(!t)return null;var i=Object.keys(t);if(!i.length)return null;var o={};return i.forEach((function(i){var s=t[i];if(s&&s.data&&(r.returnBuilderInRelations?o[i]=r.buildRelationModels.bind(r,s.data):o[i]=r.buildRelationModels(s.data)),s&&s.links&&r.propertiesMapper.setRelationshipLinks(e,i,s.links),s&&s.meta){var n=r.propertiesMapper.setRelationshipMeta;n&&n(e,i,s.meta)}})),Object.keys(o).length?o:null},e.prototype.buildRelationModels=function(e){var t=this;if(Array.isArray(e)){var r=[];return e.forEach((function(e){var i=t.buildModel(e.type,e.id);r.push(i||e)})),r}return e.id&&e.type?this.buildModel(e.type,e.id)||e:null},e}();t.default=i},697:function(e,t,r){"use strict";function i(e){var t;try{t=JSON.stringify(e)}catch(e){t="",console.warn(e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.jsonStringify=i;var o=function(){function e(){this.cachedModels={}}return e.prototype.getCachedModel=function(e){var t=this.createCacheKey(e);return this.cachedModels[t]||null},e.prototype.handleModel=function(e,t){var r=this.createCacheKey(t),i=t.attributes||t.relationships;r&&i&&(this.cachedModels[r]=e)},e.prototype.createCacheKey=function(e){if(e.type&&e.id&&!e.meta)return e.type+"-"+e.id;if(e.type&&e.id&&e.meta){var t=i(e.meta);return e.type+"-"+e.id+"-"+t}return""},e}();t.DeserializeCache=o},698:function(e,t,r){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(651),n=r(664),a=function(e){function t(t){var r=e.call(this)||this,i=t||{},o=i.switchAttributes,s=void 0===o||o,n=i.switchRelationships,a=void 0===n||n,p=i.switchType,l=void 0===p||p,u=i.switchChar,c=void 0===u?"-":u;return r.switchAttributes=s,r.switchRelationships=a,r.switchType=l,r.switchChar=c,r}return o(t,e),t.prototype.getType=function(t){var r=this,i=e.prototype.getType.call(this,t);return this.switchType&&i?i.replace(/([a-z][A-Z0-9])/g,(function(e){return e[0]+r.switchChar+e[1].toLowerCase()})):i},t.prototype.getAttributes=function(t){var r=this,i=e.prototype.getAttributes.call(this,t);if(!this.switchAttributes||!i)return i;var o={};return Object.keys(i).forEach((function(e){var t=e.replace(/([a-z][A-Z0-9])/g,(function(e){return e[0]+r.switchChar+e[1].toLowerCase()}));o[t]=i[e]})),o},t.prototype.getRelationships=function(t){var r=this,i=e.prototype.getRelationships.call(this,t);if(!this.switchRelationships||!i)return i;var o={};return Object.keys(i).forEach((function(e){var t=e.replace(/([a-z][A-Z0-9])/g,(function(e){return e[0]+r.switchChar+e[1].toLowerCase()}));o[t]=i[e]})),o},t}(s.ModelPropertiesMapper);t.SwitchCaseModelMapper=a;var p=function(e){function t(t){var r=e.call(this)||this,i=t||{},o=i.camelizeAttributes,s=void 0===o||o,n=i.camelizeRelationships,a=void 0===n||n,p=i.camelizeType,l=void 0===p||p,u=i.camelizeMeta,c=void 0!==u&&u,d=i.switchChar,h=void 0===d?"-":d;return r.camelizeAttributes=s,r.camelizeRelationships=a,r.camelizeType=l,r.camelizeMeta=c,r.switchChar=h,r}return o(t,e),t.prototype.createModel=function(e){if(!this.camelizeType)return{type:e};var t=new RegExp(this.switchChar+"([a-z0-9])","g");return{type:e.replace(t,(function(e){return e[1].toUpperCase()}))}},t.prototype.setAttributes=function(t,r){var i=this;if(!this.camelizeAttributes)return e.prototype.setAttributes.call(this,t,r);Object.keys(r).forEach((function(e){var o=new RegExp(i.switchChar+"([a-z0-9])","g"),s=e.replace(o,(function(e){return e[1].toUpperCase()}));t[s]=r[e]}))},t.prototype.setMeta=function(t,r){var i=this;if(!this.camelizeMeta)return e.prototype.setMeta.call(this,t,r);t.meta={},Object.keys(r).forEach((function(e){var o=new RegExp(i.switchChar+"([a-z0-9])","g"),s=e.replace(o,(function(e){return e[1].toUpperCase()}));t.meta[s]=r[e]}))},t.prototype.setRelationships=function(t,r){var i=this;e.prototype.setRelationships.call(this,t,r),this.camelizeRelationships&&t[n.RELATIONSHIP_NAMES_PROP].forEach((function(e,r){var o=new RegExp(i.switchChar+"([a-z0-9])","g"),s=e.replace(o,(function(e){return e[1].toUpperCase()}));s!==e&&(t[s]=t[e],delete t[e],t[n.RELATIONSHIP_NAMES_PROP][r]=s)}))},t}(s.JsonPropertiesMapper);t.SwitchCaseJsonMapper=p}}]);