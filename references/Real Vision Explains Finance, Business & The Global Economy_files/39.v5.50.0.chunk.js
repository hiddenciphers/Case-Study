(window.webpackJsonp=window.webpackJsonp||[]).push([[39,66,67,96,97],{551:function(e,t,s){"use strict";s.r(t);var a=s(149),r=Object(a.a)({name:"PasswordRevealInput",inheritAttrs:!1,data:function(){return{showPassword:!1}},computed:{inputType:function(){return this.showPassword?"text":"password"}}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"password-reveal-input"},[s("input",e._b({staticClass:"input",attrs:{type:e.inputType},on:{input:function(t){return e.$emit("input",t.target.value)}}},"input",e.$attrs,!1)),e._v(" "),s("i",{staticClass:"fa",class:{"fa-eye-slash":!e.showPassword,"fa-eye":e.showPassword},attrs:{"aria-hidden":"true"},on:{click:function(t){e.showPassword=!e.showPassword}}})])}),[],!1,null,"36662aea",null);t.default=r.exports},576:function(e,t,s){"use strict";s.r(t);var a=s(11),r=s(551),o=a.a.get("graph"),n=Object.prototype.hasOwnProperty,i={name:"LoginForm",components:{PasswordRevealInput:r.default},props:{links:{type:Object,default:function(){return{forgot:""}}},required_user_tag:{type:String,default:""},product:{type:String,default:"television"},show_forgot_password:{type:Boolean,default:!0},redirect_on_success:{type:Boolean,default:!0}},data:function(){return{email:null,password:null,hasError:!1,redirect:"/"}},created:function(){"portal"===this.product?this.redirect="/portal/partner/widgets":"/"===window.location.pathname?this.redirect="/dashboard".concat(window.location.search):this.redirect=window.location.pathname},methods:{submitForm:function(e){var t=this;window.fetch(o,{method:"POST",credentials:"include",headers:{"content-type":"application/json","apollographql-client-name":"rv-wordpress"},body:JSON.stringify({query:"\n            mutation LogIn($email: String!, $password: String!) {\n                logIn(email: $email, password: $password) {\n                  __typename\n                  ... on User {\n                    tags\n                  }\n                  ... on Error {\n                    statusCode\n                    message\n                  }\n                }\n              }\n            ",variables:{email:this.email,password:this.password}})}).then((function(e){if(e.ok)return e.json();throw new Error("Network response was not ok.")})).then((function(e){if(Object.prototype.hasOwnProperty.call(e,"data")){var s=e.data;if("Error"===s.logIn.__typename)throw new Error("".concat(s.logIn.statusCode," : ").concat(s.logIn.message))}if(t.required_user_tag){var a;if(Object.prototype.hasOwnProperty.call(e,"data")){var r=e.data;Object.prototype.hasOwnProperty.call(r,"logIn")&&(a=r.logIn.tags)}Array.isArray(a)&&a.includes(t.required_user_tag)?t.redirect_on_success?window.location=t.redirect:t.$emit("logged-in"):window.location="/logout"}else t.$store.dispatch("userIndex/fetchUser",!0).then((function(){window.sessionStorage.clear(),t.redirect_on_success?window.location=t.redirect:t.$emit("logged-in")}))})).catch((function(){t.hasError=!0})),e.preventDefault()},$_flatten:function(e,t){var s=[],a=[];return n.call(e,"collection")&&n.call(e.collection,"items")&&(e.collection.items.forEach((function(e){e.data.some((function(a){return"type"===a.name&&a.value===t&&(s.push({data:e.data,links:e.links}),!0)}))})),s.forEach((function(e){var s={data:{},links:{},key:null};e.data.forEach((function(e){n.call(s.data,e.name)?(Array.isArray(s.data[e.name])||(s.data[e.name]=[s.data[e.name]]),s.data[e.name].push(e.value)):s.data[e.name]=e.value})),n.call(e,"links")&&e.links&&e.links.forEach((function(e){n.call(s.links,e.rel)?(Array.isArray(s.links[e.rel])||(s.links[e.rel]=[s.links[e.rel]]),s.links[e.rel].push(e.href)):s.links[e.rel]=e.href})),n.call(s.data,"".concat(t,"_id"))&&(s.key=s.data["".concat(t,"_id")],s.id=s.data["".concat(t,"_id")]),a.push(s)}))),a}}},l=s(149),c=Object(l.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{on:{submit:e.submitForm}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("EMAIL")]),e._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{required:"",placeholder:"Enter email",type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("PASSWORD")]),e._v(" "),s("div",{staticClass:"control"},[s("PasswordRevealInput",{attrs:{required:"",placeholder:"Enter password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.redirect,expression:"redirect"}],attrs:{type:"hidden",name:"redirect"},domProps:{value:e.redirect},on:{input:function(t){t.target.composing||(e.redirect=t.target.value)}}}),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"is-danger"},[e._v("The email and password do not match our records. Please try again.")]),e._v(" "),e._m(0),e._v(" "),e.show_forgot_password?s("p",{staticClass:"has-text-centered"},[s("a",{attrs:{href:e.links.forgot},on:{click:function(t){return t.preventDefault(),e.$emit("forgot-password")}}},[e._v("Forgot your password?")])]):e._e()])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button"},[e._v("LOG IN")])])])}],!1,null,"e14c1fa6",null);t.default=c.exports},582:function(e,t,s){"use strict";s.r(t);var a={name:"ForgotPasswordForm",props:{links:{type:Object,default:function(){return{forgot:""}}}},data:function(){return{email:null,message:null}},methods:{submitForm:function(e){var t=this;this.message=null,window.fetch(this.links.forgot,{credentials:"same-origin",method:"POST",headers:{Accept:"application/vnd.collection+json","Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(this.email)}).finally((function(){t.message="If an account exists for ".concat(t.email,", you will get an email with instructions on resetting\n          your password. If it doesn't arrive, be sure to check your spam folder.")})),e.preventDefault()}}},r=s(149),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{on:{submit:e.submitForm}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("EMAIL")]),e._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{required:"",placeholder:"Enter email",type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),e.message?s("p",{staticClass:"help is-danger"},[e._v(e._s(e.message))]):e._e()]),e._v(" "),e._m(0),e._v(" "),s("p",{staticClass:"has-text-right"},[s("a",{on:{click:function(t){return e.$emit("go-back")}}},[e._v("Go back")])])])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button"},[e._v("RESET PASSWORD")])])])}],!1,null,"3abb7120",null);t.default=o.exports},587:function(e,t,s){"use strict";s.r(t);var a={name:"PortalSignUpForm",components:{PasswordRevealInput:s(551).default},props:{links:{type:Object,default:function(){return{terms:"",privacy:""}}},required_user_tag:{type:String,default:""}},data:function(){return{form:{given_name:null,family_name:null,email:null,password:null,confirm_password:null,is_gdpr_applicable:!1,product_id:"television",tracking:"",terms_and_conditions:!0,legal_copy:"",mailchimp_opt_ins:"f3b723fcaf",cfa_id:"",is_student:!1,tags:"",user_tags:this.required_user_tag,code:""},errors:{},hasError:!1,submitted:!1,isLoggedIn:!1}},computed:{successImage:function(){return"".concat(window.resourceBaseUrl,"images/green_check.png")},hasAccess:function(){return this.hasUserTag()},password:function(){return this.form.password}},watch:{password:function(e){this.form.confirm_password=e}},created:function(){var e=this;this.$store.dispatch("userIndex/fetchUser").then((function(){e.$store.getters["userIndex/isUserLoggedIn"]&&(e.isLoggedIn=!0)}))},methods:{submitForm:function(e){var t=this,s=Object.keys(this.form).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t.form[e]))})).join("&");if(this.submitted=!0,this.errors={},this.form.legal_copy=this.$refs.legal.innerHTML,this.isLoggedIn){var a=this.$store.getters["userIndex/getUserID"];window.fetch("".concat(window.rv_config.get("platform"),"userIndex/").concat(a,"/addusertag"),{credentials:"same-origin",method:"POST",headers:{"x-api-key":window.rv_config.get("key"),"Content-Type":"application/x-www-form-urlencoded"},body:"name=".concat(this.required_user_tag)}).then((function(e){throw e.ok&&(t.$emit("signup-success"),t.isLoggedIn=!0),new Error("Network response was not ok.")}))}else window.fetch("/rv/register?c=register",{credentials:"same-origin",method:"POST",headers:{Accept:"application/vnd.collection+json","Content-Type":"application/x-www-form-urlencoded"},body:s}).then((function(e){if(t.submitted=!1,e.ok||400===e.status)return e.json();throw new Error("Network response was not ok.")})).then((function(e){Object.prototype.hasOwnProperty.call(e.collection,"error")?e.collection.template.data.forEach((function(e){e.prompt.split(":").length>1&&t.$set(t.errors,e.name,e.prompt.split(":")[1])})):(t.$emit("signup-success"),t.isLoggedIn=!0)})).catch((function(){t.hasError=!0}));e.preventDefault()},hasUserTag:function(){return this.$store.getters["userIndex/hasUserTag"](this.required_user_tag)}}},r=s(149),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.hasAccess?s("div",{on:{load:function(t){return e.$emit("signup-success")}}}):s("form",{staticClass:"sign-up-form",on:{submit:e.submitForm}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("NAME")]),e._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.given_name,expression:"form.given_name"}],staticClass:"input",attrs:{required:"",placeholder:"First Name",type:"text"},domProps:{value:e.form.given_name},on:{input:function(t){t.target.composing||e.$set(e.form,"given_name",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.family_name,expression:"form.family_name"}],staticClass:"input",attrs:{required:"",placeholder:"Last Name",type:"text"},domProps:{value:e.form.family_name},on:{input:function(t){t.target.composing||e.$set(e.form,"family_name",t.target.value)}}})])])]),e._v(" "),s("p",{staticClass:"help is-danger",class:{"is-marginless":!e.errors.given_name}},[e._v(e._s(e.errors.given_name))]),e._v(" "),s("p",{staticClass:"help is-danger",class:{"is-marginless":!e.errors.family_name}},[e._v(e._s(e.errors.family_name))])]),e._v(" "),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("EMAIL")]),e._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"input",attrs:{required:"",placeholder:"Enter email",type:"text"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),e._v(" "),s("p",{staticClass:"help is-danger",class:{"is-marginless":!e.errors.email}},[e._v(e._s(e.errors.email))])]),e._v(" "),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("PASSWORD")]),e._v(" "),s("div",{staticClass:"control"},[s("PasswordRevealInput",{attrs:{required:"",placeholder:"Minimum of 8 characters"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("p",{staticClass:"help is-danger",class:{"is-marginless":!e.errors.password}},[e._v(e._s(e.errors.password))]),e._v(" "),s("p",{staticClass:"help is-danger",class:{"is-marginless":!e.errors.confirm_password}},[e._v("\n      "+e._s(e.errors.confirm_password)+"\n    ")])]),e._v(" "),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.is_gdpr_applicable,expression:"form.is_gdpr_applicable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.is_gdpr_applicable)?e._i(e.form.is_gdpr_applicable,null)>-1:e.form.is_gdpr_applicable},on:{change:function(t){var s=e.form.is_gdpr_applicable,a=t.target,r=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&e.$set(e.form,"is_gdpr_applicable",s.concat([null])):o>-1&&e.$set(e.form,"is_gdpr_applicable",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.form,"is_gdpr_applicable",r)}}}),e._v(" "),s("span",[e._v("I would like to hear about Real Vision offers and news")])]),e._v(" "),s("p",{ref:"legal",staticClass:"legal"},[e._v("\n    By clicking below you agree to our "),s("a",{attrs:{href:e.links.terms,target:"_blank"}},[e._v("Terms & Conditions")]),e._v(" and\n    "),s("a",{attrs:{href:e.links.privacy,target:"_blank"}},[e._v("Privacy Policy")])]),e._v(" "),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button",attrs:{disabled:e.submitted}},[e._v("SIGN UP")])])])])}),[],!1,null,"0b5c018a",null);t.default=o.exports},623:function(e,t,s){"use strict";s.r(t);var a=s(576),r=s(587),o=s(582),n={name:"TheLoginModal",components:{LogInForm:a.default,PortalSignUpForm:r.default,ForgotPasswordForm:o.default},props:{links:{type:Object,default:function(){return{terms:"",privacy:"",forgot:""}}},STATES:{type:Object,default:function(){return{CLOSED:0,LOGIN:1,SIGNUP:2,FORGOT_PASSWORD:3,SIGNUP_SUCCESS:4}}},hasSubscribe:{type:Boolean,default:!0}},data:function(){return{state:null,required_user_tag:"",product:"television"}},computed:{logo:function(){return"portal"===this.product?"".concat(window.resourceBaseUrl,"images/logos/free/white/logo-free2x.png"):"".concat(window.resourceBaseUrl,"images/logos/generic/black/small/logo-generic2x.png")},successImage:function(){return"".concat(window.resourceBaseUrl,"images/green_check.png")},successRedirect:function(){return"portal"===this.product?"/portal/partner/widgets":"/tv/home"}},created:function(){var e=this;document.querySelectorAll("[data-login-modal]").forEach((function(t){t.addEventListener("click",(function(t){t.currentTarget.dataset.loginModal&&(e.product=t.currentTarget.dataset.loginModal),"portal"===e.product&&(e.required_user_tag="edge_portal"),e.state=e.STATES.LOGIN,t.preventDefault()}))})),document.querySelectorAll("[data-signup-modal]").forEach((function(t){t.addEventListener("click",(function(t){t.currentTarget.dataset.signupModal&&(e.product=t.currentTarget.dataset.signupModal),"portal"===e.product&&(e.required_user_tag="edge_portal"),e.state=e.STATES.SIGNUP,t.preventDefault()}))})),this.$bus.$on("login",(function(t,s){e.state=e.STATES.LOGIN,e.required_user_tag=t,e.product=s})),this.$bus.$on("register",(function(t,s){e.state=e.STATES.SIGNUP,e.required_user_tag=t,e.product=s}))},methods:{close:function(){this.state===this.STATES.SIGNUP_SUCCESS?window.location=this.successRedirect:this.state=this.STATES.CLOSED},redirect:function(){window.location=this.successRedirect}}},i=s(149),l=Object(i.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal the-login-modal",class:{"is-active":!!e.state}},[s("div",{staticClass:"modal-background",on:{click:e.close}}),e._v(" "),s("div",{staticClass:"modal-content",class:{"modal-content--portal":"portal"===e.product}},[e.state===e.STATES.SIGNUP_SUCCESS&&"portal"!==e.product?s("div",{staticClass:"success has-text-centered"},[s("img",{attrs:{src:e.successImage}}),e._v(" "),s("h2",[e._v("You've successfully unlocked the following features:")]),e._v(" "),e._m(0),e._v(" "),s("p",[s("a",{staticClass:"button",on:{click:e.close}},[e._v("START EXPLORING")])])]):e._e(),e._v(" "),e.state===e.STATES.FORGOT_PASSWORD?s("div",{staticClass:"forgot-password"},[s("img",{attrs:{src:e.logo,width:"110"}}),e._v(" "),s("h2",{staticClass:"has-text-left"},[e._v("Forgot Password?")]),e._v(" "),s("p",{staticClass:"has-text-left"},[e._v("\n        Enter the email address associated with your Real Vision account and we'll send you a link to reset your\n        password.\n      ")]),e._v(" "),s("ForgotPasswordForm",{attrs:{links:e.links},on:{"go-back":function(t){e.state=e.STATES.LOGIN}}})],1):e._e(),e._v(" "),e.state===e.STATES.LOGIN||e.state===e.STATES.SIGNUP?s("div",[s("img",{attrs:{src:e.logo,width:"110"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.state===e.STATES.LOGIN,expression:"state === STATES.LOGIN"}]},[e._m(1),e._v(" "),s("LogInForm",{attrs:{links:e.links,required_user_tag:e.required_user_tag,product:e.product},on:{"forgot-password":function(t){e.state=e.STATES.FORGOT_PASSWORD}}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.state===e.STATES.SIGNUP&&"portal"===e.product,expression:"state === STATES.SIGNUP && product === 'portal'"}]},[e._m(2),e._v(" "),s("PortalSignUpForm",{attrs:{links:e.links,required_user_tag:e.required_user_tag,product:e.product},on:{"signup-success":e.redirect}})],1)]):e._e(),e._v(" "),s("a",{staticClass:"modal-close",attrs:{"aria-label":"Close"},on:{click:e.close}})])])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("Join the conversation by commenting on videos")]),e._v(" "),s("li",[e._v('Add shows to "My List" to keep track of new episodes')]),e._v(" "),s("li",[e._v("Like what you see? Give us a thumbs up!")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sign-up--login"},[s("h2",{staticClass:"has-text-centered"},[e._v("LOG IN")]),e._v(" "),s("hr")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sign-up--heading"},[s("h2",{staticClass:"has-text-centered"},[e._v("SIGN UP")]),e._v(" "),s("hr")])}],!1,null,"6d4324d3",null);t.default=l.exports}}]);